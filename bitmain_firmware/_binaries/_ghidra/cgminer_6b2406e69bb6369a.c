// Decompiled: cgminer_6b2406e69bb6369a

void _DT_INIT(void)

{
    FUN_00016754();
    return;
}

/* WARNING: Globals starting with '_' overlap smaller symbols at the same
 * address */
/* WARNING: Restarted to delay deadcode elimination for space: ram */

void FUN_00012f58(int param_1, char *param_2)

{
    undefined2 uVar1;
    byte *pbVar2;
    char cVar3;
    int *piVar4;
    char **ppcVar5;
    code **ppcVar6;
    FILE *pFVar7;
    char *pcVar8;
    size_t sVar9;
    ushort **ppuVar10;
    long lVar11;
    undefined4 uVar12;
    char *pcVar13;
    char *__src;
    byte *pbVar14;
    void *pvVar15;
    size_t sVar16;
    __sighandler_t p_Var17;
    __sighandler_t p_Var18;
    __pid_t _Var19;
    int iVar20;
    pthread_mutex_t *ppVar21;
    char **ppcVar22;
    int extraout_r1;
    undefined4 *puVar23;
    code *extraout_r2;
    code *pcVar24;
    int *piVar25;
    code *pcVar26;
    byte bVar27;
    code **extraout_r3;
    code **ppcVar28;
    uint uVar29;
    code *pcVar30;
    uint uVar31;
    int iVar32;
    int iVar33;
    undefined *puVar34;
    undefined4 *puVar35;
    uint uVar36;
    int iVar37;
    undefined *puVar38;
    uint uVar39;
    bool bVar40;
    undefined8 uVar41;
    char acStack_2a60[4104];
    char local_1a58[4088];
    char *local_a60;
    int *local_a50;
    char *local_a4c;
    int *local_a48;
    int *local_a44;
    int local_a40;
    int *local_a3c;
    int *local_a38;
    char *local_a34;
    char **local_a30;
    int *local_a2c;
    int *local_a28;
    int *local_a24;
    code **local_a20;
    char *local_a1c;
    char *local_a18;
    int local_a14[2];
    int local_a0c;
    char acStack_a08[32];
    pthread_attr_t pStack_9e8;
    _union_1051 local_9c4;
    sigset_t sStack_9c0;
    int local_940;
    undefined4 local_938[64];
    code *local_838;
    int local_834;
    int iStack_830;
    int iStack_82c;
    code *local_828;
    int local_824;
    uint local_820;
    uint local_81c;
    undefined4 local_818;
    uint local_814;
    uint local_810;
    undefined4 local_80c;
    char local_808[8];
    undefined2 uStack_800;
    undefined1 local_7fe;

    local_a0c = 0;
    local_a18 = param_2;
    local_a14[0] = param_1;
    pthread_attr_init(&pStack_9e8);
    local_a28 = (int *)&DAT_000685b8;
    pthread_attr_setstacksize(&pStack_9e8, 0x200000);
    DAT_000685b8 = 0;
    param_2 = *(char **)param_2;
    memset(local_938, 0, 0x100);
    memset(&local_9c4, 0, 0x40);
    snprintf((char *)&local_9c4, 0x40, "pidof %s", param_2);
    pFVar7 = popen((char *)&local_9c4, "r");
    if (pFVar7 != (FILE *)0x0) {
    LAB_00013028:
        do {
            pcVar8 = fgets((char *)local_938, 0x100, pFVar7);
            if (pcVar8 == (char *)0x0)
                goto LAB_0001313c;
            if (DAT_000686e1 != '\0') {
                if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                    (DAT_00067858 < 7)) {
                LAB_000130e0:
                    if ((DAT_000686e0 == '\0') && (DAT_00067858 < 7))
                        goto LAB_00013028;
                } else {
                    local_a60 = (char *)local_938;
                    snprintf((char *)&local_838, 0x800,
                             "pidof %s command result is: %s\n", param_2);
                    FUN_0001dbec(7, &local_838, 0);
                    if (DAT_000686e1 == '\0')
                        goto LAB_00013028;
                    if (DAT_00072d88 == '\0')
                        goto LAB_000130e0;
                }
                sVar9 = strlen((char *)local_938);
                snprintf((char *)&local_838, 0x800, "strlen is: %d\n", sVar9);
                FUN_0001dbec(7, &local_838, 0);
            }
        } while (true);
    }
    if ((DAT_000686e1 != '\0') &&
        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
          (6 < DAT_00067858)))) {
        snprintf((char *)&local_838, 0x800, " app-service:%s Not Found!!!",
                 param_2);
        FUN_0001dbec(7, &local_838, 0);
    }
LAB_000133b0:
    DAT_000685e8._0_1_ = 'l';
    DAT_000685e8._1_1_ = 'o';
    DAT_000685e8._2_1_ = 'g';
    DAT_000685e8._3_1_ = '\0';
    DAT_000685c2 = 0;
    DAT_000685e0._0_1_ = 'b';
    DAT_000685e0._1_1_ = 'm';
    DAT_000685e0._2_1_ = 'm';
    DAT_000685e0._3_1_ = 'i';
    DAT_000685e4._0_1_ = 'n';
    DAT_000685e4._1_1_ = 'e';
    DAT_000685e4._2_1_ = 'r';
    DAT_000685e4._3_1_ = '.';
    DAT_000685c0 = 0x2b61;
    local_a2c = (int *)&DAT_000685c0;
    lVar11 = sysconf(0x54);
    pcVar24 = extraout_r2;
    ppcVar28 = extraout_r3;
    if (lVar11 == 1) {
        ppcVar28 = &DAT_0006797c;
        pcVar24 = sched_yield;
    }
    if (lVar11 == 1) {
        *ppcVar28 = pcVar24;
    }
    local_a1c = &DAT_000686e8;
    iVar37 = FUN_0001f708((local_a14[0] + 1) * 4, "cgminer.c", &DAT_0004f010,
                          0x2f2c);
    DAT_00068b64 = iVar37;
    if (0 < local_a14[0]) {
        puVar35 = (undefined4 *)(iVar37 + -4);
        iVar32 = 0;
        pcVar8 = local_a18 + -4;
        do {
            pcVar8 = pcVar8 + 4;
            iVar32 = iVar32 + 1;
            uVar12 = __strdup(*(undefined4 *)pcVar8);
            puVar35 = puVar35 + 1;
            *puVar35 = uVar12;
        } while (iVar32 < local_a14[0]);
    }
    *(undefined4 *)(iVar37 + local_a14[0] * 4) = 0;
    FUN_0002cce8(&DAT_00072ed0, &DAT_0004f010, 0x2f35);
    FUN_0002cce8(&DAT_00076010, &DAT_0004f010, 0x2f36);
    FUN_0002cce8(&DAT_00074fdc, &DAT_0004f010, 0x2f37);
    FUN_0002cd94(&DAT_00076140, &DAT_0004f010, 0x2f38);
    FUN_0002cce8(&DAT_00072d8c, &DAT_0004f010, 0x2f39);
    local_a20 = (code **)&DAT_0006a6e0;
    FUN_0002cce8(&DAT_00068c74, &DAT_0004f010, 0x2f3a);
    FUN_0002cd94(&DAT_00076108, &DAT_0004f010, 0x2f3b);
    FUN_0002cce8(&DAT_00068c4c, &DAT_0004f010, 0x2f3c);
    FUN_0002cd6c(&DAT_0006a1a8, &DAT_0004f010, 0x2f3d);
    FUN_0002cd6c(&DAT_00072e94, &DAT_0004f010, 0x2f3e);
    FUN_0002cd6c(&DAT_00074f88, &DAT_0004f010, 0x2f3f);
    FUN_0002cd6c(&DAT_00074fb8, &DAT_0004f010, 0x2f40);
    FUN_0002cce8(&DAT_00068c00, &DAT_0004f010, 0x2f42);
    iVar37 = pthread_cond_init((pthread_cond_t *)&DAT_00068c18,
                               (pthread_condattr_t *)0x0);
    if (iVar37 != 0) {
        local_838 = (code *)0x6c696146;
        local_834._0_1_ = 'e';
        local_834._1_1_ = 'd';
        local_834._2_1_ = ' ';
        local_834._3_1_ = 't';
        iStack_830._0_1_ = 'o';
        iStack_830._1_1_ = ' ';
        iStack_830._2_1_ = 'p';
        iStack_830._3_1_ = 't';
        iStack_82c._0_1_ = 'h';
        iStack_82c._1_1_ = 'r';
        iStack_82c._2_1_ = 'e';
        iStack_82c._3_1_ = 'a';
        local_828 = (code *)0x6f635f64;
        local_824._0_1_ = 'n';
        local_824._1_1_ = 'd';
        local_824._2_1_ = '_';
        local_824._3_1_ = 'i';
        local_820._0_1_ = 'n';
        local_820._1_1_ = 'i';
        local_820._2_1_ = 't';
        local_820._3_1_ = ' ';
        local_81c._0_1_ = 'l';
        local_81c._1_1_ = 'p';
        local_81c._2_1_ = '_';
        local_81c._3_1_ = 'c';
        local_818._0_1_ = 'o';
        local_818._1_1_ = 'n';
        local_818._2_1_ = 'd';
        local_818._3_1_ = '\0';
        FUN_0001dbec(3, &local_838, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002c508(1, 0);
    }
    FUN_0002cce8(&DAT_00074f64, &DAT_0004f010, 0x2f49);
    iVar37 = pthread_cond_init((pthread_cond_t *)&DAT_00076190,
                               (pthread_condattr_t *)0x0);
    if (iVar37 != 0) {
        local_838 = (code *)0x6c696146;
        local_834._0_1_ = 'e';
        local_834._1_1_ = 'd';
        local_834._2_1_ = ' ';
        local_834._3_1_ = 't';
        iStack_830._0_1_ = 'o';
        iStack_830._1_1_ = ' ';
        iStack_830._2_1_ = 'p';
        iStack_830._3_1_ = 't';
        iStack_82c._0_1_ = 'h';
        iStack_82c._1_1_ = 'r';
        iStack_82c._2_1_ = 'e';
        iStack_82c._3_1_ = 'a';
        local_828 = (code *)0x6f635f64;
        local_824._0_1_ = 'n';
        local_824._1_1_ = 'd';
        local_824._2_1_ = '_';
        local_824._3_1_ = 'i';
        local_820._0_1_ = 'n';
        local_820._1_1_ = 'i';
        local_820._2_1_ = 't';
        local_820._3_1_ = ' ';
        local_81c._0_1_ = 'r';
        local_81c._1_1_ = 'e';
        local_81c._2_1_ = 's';
        local_81c._3_1_ = 't';
        local_818._0_1_ = 'a';
        local_818._1_1_ = 'r';
        local_818._2_1_ = 't';
        local_818._3_1_ = '_';
        local_814._0_1_ = 'c';
        local_814._1_1_ = 'o';
        local_814._2_1_ = 'n';
        local_814._3_1_ = 'd';
        local_810 = local_810 & 0xffffff00;
        goto LAB_0001485c;
    }
    iVar37 = pthread_cond_init((pthread_cond_t *)&DAT_00072e60,
                               (pthread_condattr_t *)0x0);
    if (iVar37 != 0) {
        iStack_830._0_1_ = 'o';
        iStack_830._1_1_ = ' ';
        iStack_830._2_1_ = 'p';
        iStack_830._3_1_ = 't';
        iStack_82c._0_1_ = 'h';
        iStack_82c._1_1_ = 'r';
        iStack_82c._2_1_ = 'e';
        iStack_82c._3_1_ = 'a';
        local_828 = (code *)0x6f635f64;
        local_824._0_1_ = 'n';
        local_824._1_1_ = 'd';
        local_824._2_1_ = '_';
        local_824._3_1_ = 'i';
        local_820._0_1_ = 'n';
        local_820._1_1_ = 'i';
        local_820._2_1_ = 't';
        local_820._3_1_ = ' ';
        local_81c._0_1_ = 'g';
        local_81c._1_1_ = 'w';
        local_81c._2_1_ = 's';
        local_81c._3_1_ = '_';
        local_818._0_1_ = 'c';
        local_818._1_1_ = 'o';
        local_818._2_1_ = 'n';
        local_818._3_1_ = 'd';
        local_814 = local_814 & 0xffffff00;
    LAB_000146e0:
        local_834._0_1_ = 'e';
        local_834._1_1_ = 'd';
        local_834._2_1_ = ' ';
        local_834._3_1_ = 't';
        local_838 = (code *)0x6c696146;
        FUN_0001dbec(3, &local_838, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002c508(1, 0);
    }
    DAT_00074f58 = FUN_0001fedc();
    if (DAT_00074f58 == 0) {
        iStack_830._0_1_ = 'o';
        iStack_830._1_1_ = ' ';
        iStack_830._2_1_ = 'c';
        iStack_830._3_1_ = 'r';
        iStack_82c._0_1_ = 'e';
        iStack_82c._1_1_ = 'a';
        iStack_82c._2_1_ = 't';
        iStack_82c._3_1_ = 'e';
        local_828 = (code *)0x74656720;
        local_824 = CONCAT22(local_824._2_2_, 0x71);
        DAT_00074f58 = 0;
        goto LAB_000146e0;
    }
    local_a60 = "1.0.0";
    *(int *)(local_a1c + 0x438) = DAT_00074f58 + 0xc;
    snprintf(&DAT_00068904, 0x100, "%s %s", "cgminer");
    local_9c4.sa_handler = (__sighandler_t)&DAT_0002c5e4;
    local_940 = iVar37;
    sigemptyset(&sStack_9c0);
    sigaction(0xf, (sigaction *)&local_9c4, (sigaction *)&DAT_00072dc8);
    sigaction(2, (sigaction *)&local_9c4, (sigaction *)&DAT_0007607c);
    sigaction(6, (sigaction *)&local_9c4, (sigaction *)&DAT_00076230);
    DAT_00076228 = local_1a58;
    DAT_00076068 = acStack_2a60;
    builtin_strncpy(local_1a58, "/usr/bin", 8);
    local_1a58[8] = 0;
    local_a30 = &DAT_00076228;
    iVar37 = 0x24;
    local_a34 = "/";
    pcVar13 = (char *)__strdup(*(undefined4 *)local_a18);
    pcVar8 = DAT_00076068;
    __src = dirname(pcVar13);
    strcpy(pcVar8, __src);
    free(pcVar13);
    pcVar8 = DAT_00076068;
    sVar9 = strlen(DAT_00076068);
    (pcVar8 + sVar9)[0] = '/';
    (pcVar8 + sVar9)[1] = '\0';
    *(undefined4 *)((int)local_a20 + -0x28c) = 9;
    pbVar14 = (byte *)FUN_0001f790(0x68, 1, "cgminer.c", &DAT_0004f010);
    do {
        sVar9 = strlen((char *)pbVar14);
        iVar37 = iVar37 + -1;
        (pbVar14 + sVar9)[0] = '0';
        (pbVar14 + sVar9)[1] = '\0';
    } while (iVar37 != 0);
    uVar39 = 0x9e3779b9;
    uVar36 = 0xfeedbeef;
    local_a24 = (int *)(sVar9 + 1);
    uVar31 = uVar39;
    pbVar2 = pbVar14;
    for (piVar25 = local_a24; (int *)0xb < piVar25; piVar25 = piVar25 + -3) {
        iVar37 = (uint)pbVar2[6] * 0x10000 + (uint)pbVar2[5] * 0x100 +
                 (uint)pbVar2[4] + (uint)pbVar2[7] * 0x1000000 + uVar31;
        uVar36 = (uint)pbVar2[10] * 0x10000 + (uint)pbVar2[9] * 0x100 +
                 (uint)pbVar2[8] + (uint)pbVar2[0xb] * 0x1000000 + uVar36;
        uVar31 = ((((uint)pbVar2[2] * 0x10000 + (uint)pbVar2[1] * 0x100 +
                    (uint)*pbVar2 + (uint)pbVar2[3] * 0x1000000) -
                   iVar37) -
                  uVar36) +
                     uVar39 ^
                 uVar36 >> 0xd;
        uVar39 = (iVar37 - uVar36) - uVar31 ^ uVar31 << 8;
        uVar36 = (uVar36 - uVar31) - uVar39 ^ uVar39 >> 0xd;
        uVar29 = (uVar31 - uVar39) - uVar36 ^ uVar36 >> 0xc;
        uVar31 = (uVar39 - uVar36) - uVar29 ^ uVar29 << 0x10;
        uVar36 = (uVar36 - uVar29) - uVar31 ^ uVar31 >> 5;
        uVar39 = (uVar29 - uVar31) - uVar36 ^ uVar36 >> 3;
        uVar31 = (uVar31 - uVar36) - uVar39 ^ uVar39 << 10;
        uVar36 = (uVar36 - uVar39) - uVar31 ^ uVar31 >> 0xf;
        pbVar2 = pbVar2 + 0xc;
    }
    pcVar8 = (char *)((int)local_a24 + uVar36);
    switch (piVar25) {
    case (int *)0xb:
        pcVar8 = pcVar8 + (uint)pbVar2[10] * 0x1000000;
    case (int *)0xa:
        pcVar8 = pcVar8 + (uint)pbVar2[9] * 0x10000;
    case (int *)0x9:
        pcVar8 = pcVar8 + (uint)pbVar2[8] * 0x100;
    case (int *)0x8:
        uVar31 = uVar31 + (uint)pbVar2[7] * 0x1000000;
    case (int *)0x7:
        uVar31 = uVar31 + (uint)pbVar2[6] * 0x10000;
    case (int *)0x6:
        uVar31 = uVar31 + (uint)pbVar2[5] * 0x100;
    case (int *)0x5:
        uVar31 = uVar31 + pbVar2[4];
    case (int *)0x4:
        uVar39 = uVar39 + (uint)pbVar2[3] * 0x1000000;
    case (int *)0x3:
        uVar39 = uVar39 + (uint)pbVar2[2] * 0x10000;
    case (int *)0x2:
        uVar39 = uVar39 + (uint)pbVar2[1] * 0x100;
    case (int *)0x1:
        uVar39 = uVar39 + *pbVar2;
    }
    *(byte **)(pbVar14 + 0x58) = pbVar14;
    uVar39 = (uVar39 - uVar31) - (int)pcVar8 ^ (uint)pcVar8 >> 0xd;
    uVar29 = (uVar31 - (int)pcVar8) - uVar39 ^ uVar39 << 8;
    uVar31 = (uint)(pcVar8 + (-uVar29 - uVar39)) ^ uVar29 >> 0xd;
    uVar36 = (uVar39 - uVar29) - uVar31 ^ uVar31 >> 0xc;
    uVar39 = (uVar29 - uVar31) - uVar36 ^ uVar36 << 0x10;
    uVar31 = (uVar31 - uVar36) - uVar39 ^ uVar39 >> 5;
    uVar36 = (uVar36 - uVar39) - uVar31 ^ uVar31 >> 3;
    uVar39 = (uVar39 - uVar31) - uVar36 ^ uVar36 << 10;
    uVar39 = (uVar31 - uVar36) - uVar39 ^ uVar39 >> 0xf;
    *(uint *)(pbVar14 + 0x60) = uVar39;
    sVar9 = strlen((char *)pbVar14);
    *(size_t *)(pbVar14 + 0x5c) = sVar9;
    iVar37 = *(int *)((int)local_a20 + -0x518);
    if (iVar37 == 0) {
        pbVar14[0x4c] = 0;
        pbVar14[0x4d] = 0;
        pbVar14[0x4e] = 0;
        pbVar14[0x4f] = 0;
        pbVar14[0x48] = 0;
        pbVar14[0x49] = 0;
        pbVar14[0x4a] = 0;
        pbVar14[0x4b] = 0;
        *(byte **)((int)local_a20 + -0x518) = pbVar14;
        pvVar15 = malloc(0x2c);
        *(void **)(pbVar14 + 0x44) = pvVar15;
        if (pvVar15 == (void *)0x0)
            goto LAB_00014718;
        memset(pvVar15, 0, 0x2c);
        *(byte **)(*(int *)(pbVar14 + 0x44) + 0x10) = pbVar14 + 0x44;
        *(undefined4 *)(*(int *)(pbVar14 + 0x44) + 4) = 0x20;
        *(undefined4 *)(*(int *)(pbVar14 + 0x44) + 8) = 5;
        *(undefined4 *)(*(int *)(pbVar14 + 0x44) + 0x14) = 0x44;
        puVar35 = *(undefined4 **)(pbVar14 + 0x44);
        pvVar15 = malloc(0x180);
        *puVar35 = pvVar15;
        if ((void *)**(undefined4 **)(pbVar14 + 0x44) == (void *)0x0)
            goto LAB_00014718;
        memset((void *)**(undefined4 **)(pbVar14 + 0x44), 0, 0x180);
        *(undefined4 *)(*(int *)(pbVar14 + 0x44) + 0x28) = 0xa0111fe1;
    } else {
        uVar12 = *(undefined4 *)(iVar37 + 0x44);
        pbVar14[0x4c] = 0;
        pbVar14[0x4d] = 0;
        pbVar14[0x4e] = 0;
        pbVar14[0x4f] = 0;
        *(undefined4 *)(pbVar14 + 0x44) = uVar12;
        *(int *)(pbVar14 + 0x48) = *(int *)(*(int *)(iVar37 + 0x44) + 0x10) -
                                   *(int *)(*(int *)(iVar37 + 0x44) + 0x14);
        *(byte **)(*(int *)(*(int *)(iVar37 + 0x44) + 0x10) + 8) = pbVar14;
        *(byte **)(*(int *)(iVar37 + 0x44) + 0x10) = pbVar14 + 0x44;
    }
    iVar32 = *(int *)((int)local_a20 + -0x518);
    *(int *)(*(int *)(iVar32 + 0x44) + 0xc) =
        *(int *)(*(int *)(iVar32 + 0x44) + 0xc) + 1;
    iVar33 = (uVar39 & (*(int **)(iVar32 + 0x44))[1] - 1U) * 0xc;
    iVar37 = **(int **)(iVar32 + 0x44) + iVar33;
    *(int *)(iVar37 + 4) = *(int *)(iVar37 + 4) + 1;
    uVar12 = *(undefined4 *)(**(int **)(iVar32 + 0x44) + iVar33);
    pbVar14[0x50] = 0;
    pbVar14[0x51] = 0;
    pbVar14[0x52] = 0;
    pbVar14[0x53] = 0;
    *(undefined4 *)(pbVar14 + 0x54) = uVar12;
    piVar25 = *(int **)(iVar32 + 0x44);
    if (*(int *)(*piVar25 + iVar33) != 0) {
        *(byte **)(*(int *)(*piVar25 + iVar33) + 0xc) = pbVar14 + 0x44;
        piVar25 = *(int **)(iVar32 + 0x44);
    }
    *(byte **)(*piVar25 + iVar33) = pbVar14 + 0x44;
    iVar33 = **(int **)(iVar32 + 0x44) + iVar33;
    if ((*(int *)(iVar33 + 8) * 10 + 10U <= *(uint *)(iVar33 + 4)) &&
        (*(int *)(*(int *)(pbVar14 + 0x44) + 0x24) != 1)) {
        pvVar15 = calloc(*(int *)(*(int *)(pbVar14 + 0x44) + 4) * 0x18, 1);
        if (pvVar15 == (void *)0x0) {
        LAB_00014718:
            /* WARNING: Subroutine does not return */
            exit(-1);
        }
        iVar37 = *(int *)(pbVar14 + 0x44);
        local_a24 = (int *)0x0;
        *(uint *)(iVar37 + 0x18) =
            (uint)((*(int *)(iVar37 + 4) * 2 - 1U & *(uint *)(iVar37 + 0xc)) !=
                   0) +
            (*(uint *)(iVar37 + 0xc) >> (*(int *)(iVar37 + 8) + 1U & 0xff));
        *(undefined4 *)(*(int *)(pbVar14 + 0x44) + 0x1c) = 0;
        puVar35 = *(undefined4 **)(pbVar14 + 0x44);
        for (; local_a24 < (int *)puVar35[1];
             local_a24 = (int *)((int)local_a24 + 1)) {
            iVar37 = *(int *)((int)*puVar35 + (int)local_a24 * 0xc);
            while (iVar37 != 0) {
                iVar33 = *(int *)(iVar37 + 0x10);
                uVar31 = puVar35[1] * 2 - 1U & *(uint *)(iVar37 + 0x1c);
                uVar39 = *(int *)((int)pvVar15 + uVar31 * 0xc + 4) + 1;
                *(uint *)((int)pvVar15 + uVar31 * 0xc + 4) = uVar39;
                iVar32 = *(int *)(pbVar14 + 0x44);
                if (*(uint *)(iVar32 + 0x18) < uVar39) {
                    *(int *)(iVar32 + 0x1c) = *(int *)(iVar32 + 0x1c) + 1;
                    uVar12 = FUN_0004a4a0(
                        *(undefined4 *)((int)pvVar15 + uVar31 * 0xc + 4),
                        *(undefined4 *)(*(int *)(pbVar14 + 0x44) + 0x18));
                    *(undefined4 *)((int)pvVar15 + uVar31 * 0xc + 8) = uVar12;
                }
                *(undefined4 *)(iVar37 + 0xc) = 0;
                *(undefined4 *)(iVar37 + 0x10) =
                    *(undefined4 *)((int)pvVar15 + uVar31 * 0xc);
                iVar32 = *(int *)((int)pvVar15 + uVar31 * 0xc);
                if (iVar32 != 0) {
                    *(int *)(iVar32 + 0xc) = iVar37;
                }
                *(int *)((int)pvVar15 + uVar31 * 0xc) = iVar37;
                puVar35 = *(undefined4 **)(pbVar14 + 0x44);
                iVar37 = iVar33;
            }
        }
        free((void *)*puVar35);
        *(int *)(*(int *)(pbVar14 + 0x44) + 4) =
            *(int *)(*(int *)(pbVar14 + 0x44) + 4) << 1;
        *(int *)(*(int *)(pbVar14 + 0x44) + 8) =
            *(int *)(*(int *)(pbVar14 + 0x44) + 8) + 1;
        **(undefined4 **)(pbVar14 + 0x44) = pvVar15;
        iVar37 = *(int *)(pbVar14 + 0x44);
        if (*(uint *)(iVar37 + 0xc) >> 1 < *(uint *)(iVar37 + 0x1c)) {
            iVar32 = *(int *)(iVar37 + 0x20) + 1;
        } else {
            iVar32 = 0;
        }
        *(int *)(iVar37 + 0x20) = iVar32;
        if (1 < *(uint *)(*(int *)(pbVar14 + 0x44) + 0x20)) {
            *(undefined4 *)(*(int *)(pbVar14 + 0x44) + 0x24) = 1;
        }
    }
    strcpy(&DAT_000761dc, (char *)pbVar14);
    DAT_00072f04 = &DAT_00072f04;
    DAT_00072f08 = &DAT_00072f04;
    FUN_0003f030(&DAT_00067a80,
                 "Options for both config file and command line");
    FUN_0003f030(&DAT_00068204, "Options for command line only");
    FUN_0003f104(local_a14, local_a18, &DAT_00028638);
    if (local_a14[0] != 1) {
        local_838 = (code *)0x78656e55;
        local_834._0_1_ = 'p';
        local_834._1_1_ = 'e';
        local_834._2_1_ = 'c';
        local_834._3_1_ = 't';
        iStack_830._0_1_ = 'e';
        iStack_830._1_1_ = 'd';
        iStack_830._2_1_ = ' ';
        iStack_830._3_1_ = 'e';
        iStack_82c._0_1_ = 'x';
        iStack_82c._1_1_ = 't';
        iStack_82c._2_1_ = 'r';
        iStack_82c._3_1_ = 'a';
        local_828 = (code *)0x6d6f6320;
        local_824._0_1_ = 'm';
        local_824._1_1_ = 'a';
        local_824._2_1_ = 'n';
        local_824._3_1_ = 'd';
        local_820._0_1_ = 'l';
        local_820._1_1_ = 'i';
        local_820._2_1_ = 'n';
        local_820._3_1_ = 'e';
        local_81c._0_1_ = ' ';
        local_81c._1_1_ = 'a';
        local_81c._2_1_ = 'r';
        local_81c._3_1_ = 'g';
        local_818._0_1_ = 'u';
        local_818._1_1_ = 'm';
        local_818._2_1_ = 'e';
        local_818._3_1_ = 'n';
        local_814 = CONCAT13(local_814._3_1_, 0x7374);
        FUN_0001dbec(3, &local_838, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002c508(1, 0);
    }
    if (local_a1c[0x328] == '\0') {
        FUN_0002b740();
    }
    *(undefined4 *)((int)local_a20 + -0x288) = 8;
    DAT_00072db8 = FUN_0001f790(8, 0x40, "cgminer.c", &DAT_0004f010);
    iVar37 = DAT_00072db8 + 0x40;
    local_a3c = &DAT_00072db8;
    *(undefined4 *)(local_a1c + 0x488) = 1;
    local_a40 = FUN_00022e34(iVar37, &pStack_9e8, FUN_00029e58);
    if (local_a40 != 0) {
        local_838 = (code *)0x20495041;
        local_834._0_1_ = 't';
        local_834._1_1_ = 'h';
        local_834._2_1_ = 'r';
        local_834._3_1_ = 'e';
        iStack_830._0_1_ = 'a';
        iStack_830._1_1_ = 'd';
        iStack_830._2_1_ = ' ';
        iStack_830._3_1_ = 'c';
        iStack_82c._0_1_ = 'r';
        iStack_82c._1_1_ = 'e';
        iStack_82c._2_1_ = 'a';
        iStack_82c._3_1_ = 't';
        local_828 = (code *)0x61662065;
        local_824._0_1_ = 'i';
        local_824._1_1_ = 'l';
        local_824._2_1_ = 'e';
        local_824._3_1_ = 'd';
        local_820 = local_820 & 0xffffff00;
        FUN_0001dbec(3, &local_838, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002c508(1, 0);
    }
    local_a38 = &DAT_00072da8;
    if ((local_a1c[0x560] != '\0') || (DAT_00072da8 != 0)) {
        iVar37 = FUN_00030318();
        puVar35 = (undefined4 *)FUN_0001f708(0xff, "cgminer.c", &DAT_0004f010,
                                             0x2fad);
        *(undefined4 **)(iVar37 + 0xa4) = puVar35;
        if (*local_a38 == 0) {
            pcVar8 = "Benchmark";
        } else {
            pcVar8 = "Benchfile";
        }
        uVar12 = *(undefined4 *)(pcVar8 + 4);
        uVar1 = *(undefined2 *)(pcVar8 + 8);
        *puVar35 = *(undefined4 *)pcVar8;
        puVar35[1] = uVar12;
        *(undefined2 *)(puVar35 + 2) = uVar1;
        uVar12 = *(undefined4 *)(iVar37 + 0xa4);
        *(undefined4 *)(iVar37 + 0xac) = uVar12;
        *(undefined4 *)(iVar37 + 0xb0) = uVar12;
        *(undefined4 *)(iVar37 + 0xa8) = uVar12;
        *(undefined4 *)(iVar37 + 0x268) = uVar12;
        strncpy((char *)(iVar37 + 0x30), "?", 7);
        *(undefined1 *)(iVar37 + 0x37) = 0;
        if (*(int *)(iVar37 + 100) != 1) {
            FUN_00029258(iVar37 + 100);
        }
        iVar32 = 0;
        *(undefined1 *)(iVar37 + 0x61) = 0;
        puVar34 = &DAT_00069698;
        DAT_000686e2 = 1;
        puVar38 = &DAT_00068c98;
        do {
            FUN_0001fa24(
                puVar38,
                "000000029c6bf469abe4ad37605c097a860cff3cf5c1ef4377618f74000000"
                "000000000082b1514e7b6565941e5824f084292164ec5f97e7ea20c494bd96"
                "e524d478977b536dd2261900896c8b10020000000080000000000000000000"
                "00000000000000000000000000000000000000000000000000000000000000"
                "8002000064e4e3becc01064d808269b330f40f4de82dc92e894d635025daa3"
                "e2e2c410b4" +
                    iVar32);
            pcVar8 = "00000002c01f502cb3e9fdb053230ec12a4954c1021a6b35862b5e290"
                     "00000000000000084d1b83ae44057025e8c5b5756b44f04df5fffe4a7"
                     "a30e5c12d12a97a7a4c2ea536dce431900896cb6d60e0000000080000"
                     "000000000000000000000000000000000000000000000000000000000"
                     "0000000000000000000080020000d08f7e14c50dad77dc238b4db2901"
                     "a0578e657b1954779ab9cd82a73829edf7f" +
                     iVar32;
            iVar32 = iVar32 + 0x144;
            FUN_0001fa24(puVar34, pcVar8, 0xa0);
            puVar34 = puVar34 + 0xa0;
            puVar38 = puVar38 + 0xa0;
        } while (iVar32 != 0x1440);
        FUN_0002b7a4(0, &DAT_0006a45c);
    }
    if (*(int *)(local_a1c + 0x210) != 0) {
        FUN_0003dc58();
    }
    pcVar8 = local_a1c;
    pcVar13 = *(char **)(local_a1c + 0x200);
    if (pcVar13 == (char *)0x0) {
    LAB_000142f8:
        iVar37 = *(int *)(local_a1c + 0x208);
        if (iVar37 == 0) {
            local_a18 = &DAT_000686e0;
        } else {
        LAB_00014308:
            memset(local_938, 0, 0x100);
            pcVar8 = *(char **)(local_a1c + 0x204);
            if (pcVar8 == (char *)0x0) {
                local_a18 = &DAT_000686e0;
                if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                    (2 < DAT_00067858)) {
                    snprintf((char *)&local_838, 0x800, "Log work path: %s",
                             iVar37);
                    FUN_0001dbec(3, &local_838, 0);
                }
            } else {
                if (*pcVar8 == '\0') {
                    pcVar8 = "Log work asic num empty";
                    ppcVar28 = &local_838;
                LAB_00014948:
                    pcVar24 = *(code **)(pcVar8 + 4);
                    pcVar26 = *(code **)(pcVar8 + 8);
                    pcVar30 = *(code **)(pcVar8 + 0xc);
                    *ppcVar28 = *(code **)pcVar8;
                    ppcVar28[1] = pcVar24;
                    ppcVar28[2] = pcVar26;
                    ppcVar28[3] = pcVar30;
                    pcVar24 = *(code **)(pcVar8 + 0x14);
                    ppcVar28[4] = *(code **)(pcVar8 + 0x10);
                    ppcVar28[5] = pcVar24;
                    goto LAB_00014964;
                }
                lVar11 = strtol(pcVar8, (char **)0x0, 10);
                *(long *)((int)local_a20 + -0x264) = lVar11;
                if (lVar11 != 1 && (lVar11 - 0x20U & 0xffffffdf) != 0) {
                    local_838 = (code *)0x20676f4c;
                    local_834._0_1_ = 'w';
                    local_834._1_1_ = 'o';
                    local_834._2_1_ = 'r';
                    local_834._3_1_ = 'k';
                    iStack_830._0_1_ = ' ';
                    iStack_830._1_1_ = 'a';
                    iStack_830._2_1_ = 's';
                    iStack_830._3_1_ = 'i';
                    iStack_82c._0_1_ = 'c';
                    iStack_82c._1_1_ = ' ';
                    iStack_82c._2_1_ = 'n';
                    iStack_82c._3_1_ = 'u';
                    local_828 = (code *)0x756d206d;
                    local_824._0_1_ = 's';
                    local_824._1_1_ = 't';
                    local_824._2_1_ = ' ';
                    local_824._3_1_ = 'b';
                    local_820._0_1_ = 'e';
                    local_820._1_1_ = ' ';
                    local_820._2_1_ = '1';
                    local_820._3_1_ = ',';
                    local_81c._0_1_ = ' ';
                    local_81c._1_1_ = '3';
                    local_81c._2_1_ = '2';
                    local_81c._3_1_ = ',';
                    local_818._0_1_ = ' ';
                    local_818._1_1_ = '6';
                    local_818._2_1_ = '4';
                    local_818._3_1_ = '\0';
                    FUN_0001dbec(3, &local_838, 1);
                    /* WARNING: Subroutine does not return */
                    FUN_0002c508(1);
                }
                local_a18 = &DAT_000686e0;
                if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                    (2 < DAT_00067858)) {
                    snprintf((char *)&local_838, 0x800,
                             "Log work path: %s Asic num: %s",
                             *(undefined4 *)(local_a1c + 0x208));
                    FUN_0001dbec(3, &local_838, 0);
                }
            }
            sprintf((char *)local_938, "%s.txt",
                    *(undefined4 *)(local_a1c + 0x208));
            pFVar7 = fopen64((char *)local_938, "a+");
            bVar40 = DAT_00072d88 != '\0';
            *(FILE **)((int)local_a20 + -0x260) = pFVar7;
            if (((bVar40) || (*local_a18 != '\0')) || (2 < DAT_00067858)) {
                snprintf((char *)&local_838, 0x800, "Log work open file %s",
                         local_938);
                FUN_0001dbec(3, &local_838, 0);
            }
            ppcVar28 = local_a20;
            if (*(int *)((int)local_a20 + -0x264) == 1) {
                sprintf((char *)local_938, "%s%02d.txt",
                        *(undefined4 *)(local_a1c + 0x208));
                pFVar7 = fopen64((char *)local_938, "a+");
                bVar40 = DAT_00072d88 != '\0';
                *(FILE **)((int)local_a20 + -0x25c) = pFVar7;
                if (((bVar40) || (*local_a18 != '\0')) || (2 < DAT_00067858)) {
                    snprintf((char *)&local_838, 0x800,
                             "Log work open asic %d file %s",
                             *(undefined4 *)((int)local_a20 + -0x264));
                    FUN_0001dbec(3, &local_838, 0);
                }
            } else if ((*(int *)((int)local_a20 + -0x264) - 0x20U &
                        0xffffffdf) == 0) {
                for (iVar37 = 0; iVar37 <= *(int *)((int)ppcVar28 + -0x264);
                     iVar37 = iVar37 + 1) {
                    sprintf((char *)local_938, "%s%02d_%02d.txt",
                            *(undefined4 *)(local_a1c + 0x208));
                    pFVar7 = fopen64((char *)local_938, "a+");
                    cVar3 = DAT_00072d88;
                    (&DAT_0006a484)[iVar37] = pFVar7;
                    if (((cVar3 != '\0') || (*local_a18 != '\0')) ||
                        (2 < DAT_00067858)) {
                        snprintf((char *)&local_838, 0x800,
                                 "Log work open asic %d file %s",
                                 *(undefined4 *)((int)ppcVar28 + -0x264));
                        FUN_0001dbec(3, &local_838, 0);
                    }
                }
            }
            pcVar8 = local_a1c;
            if (*(char *)((int)local_a20 + -0x158) != '\0') {
                puVar35 = (undefined4 *)&DAT_0006a588;
                local_a24 = (int *)0x543d8;
                iVar37 = 0;
                do {
                    sprintf((char *)local_938, "%s_diff_%02d.txt",
                            *(undefined4 *)(pcVar8 + 0x208), iVar37);
                    pFVar7 = fopen64((char *)local_938, "a+");
                    cVar3 = DAT_00072d88;
                    puVar35 = puVar35 + 1;
                    *puVar35 = pFVar7;
                    if (((cVar3 != '\0') || (*local_a18 != '\0')) ||
                        (2 < DAT_00067858)) {
                        snprintf((char *)&local_838, 0x800, (char *)local_a24,
                                 local_938);
                        FUN_0001dbec(3, &local_838, 0);
                    }
                    iVar37 = iVar37 + 1;
                } while (iVar37 != 0x41);
            }
        }
        if ((DAT_00072d88 == '\0') && (*local_a18 == '\0'))
            goto LAB_00013ef4;
    LAB_0001464c:
        snprintf((char *)&local_838, 0x800, "Started %s", &DAT_00068904);
        FUN_0001dbec(4, &local_838, 0);
        if (*(int *)(local_a1c + 800) != 0) {
            if ((DAT_00072d88 == '\0') && (*local_a18 == '\0'))
                goto LAB_00013f10;
        LAB_00013f24:
            snprintf((char *)&local_838, 0x800, "Loaded configuration file %s");
            FUN_0001dbec(5, &local_838, 0);
            iVar37 = *(int *)(local_a1c + 0x3f4);
            if (iVar37 == -1) {
                if (DAT_00072d88 == '\0') {
                LAB_000149e8:
                    if ((*local_a18 != '\0') || (3 < DAT_00067858))
                        goto LAB_00014a7c;
                    if (DAT_00076072 == '\0')
                        goto LAB_00013fdc;
                LAB_00014a20:
                    if (3 < DAT_00067858) {
                    LAB_00014a34:
                        uVar12 = local_808._0_4_;
                        local_838 = (code *)0x72617453;
                        local_834._0_1_ = 't';
                        local_834._1_1_ = ' ';
                        local_834._2_1_ = 'c';
                        local_834._3_1_ = 'g';
                        iStack_830._0_1_ = 'm';
                        iStack_830._1_1_ = 'i';
                        iStack_830._2_1_ = 'n';
                        iStack_830._3_1_ = 'e';
                        iStack_82c._0_1_ = 'r';
                        iStack_82c._1_1_ = ' ';
                        iStack_82c._2_1_ = 'w';
                        iStack_82c._3_1_ = 'i';
                        local_828 = (code *)0x2d206874;
                        local_824._0_1_ = 'T';
                        local_824._1_1_ = ' ';
                        local_824._2_1_ = 't';
                        local_824._3_1_ = 'o';
                        local_820._0_1_ = ' ';
                        local_820._1_1_ = 's';
                        local_820._2_1_ = 'e';
                        local_820._3_1_ = 'e';
                        local_81c._0_1_ = ' ';
                        local_81c._1_1_ = 'w';
                        local_81c._2_1_ = 'h';
                        local_81c._3_1_ = 'a';
                        local_818._0_1_ = 't';
                        local_818._1_1_ = ' ';
                        local_818._2_1_ = 'f';
                        local_818._3_1_ = 'a';
                        local_814._0_1_ = 'i';
                        local_814._1_1_ = 'l';
                        local_814._2_1_ = 'e';
                        local_814._3_1_ = 'd';
                        local_810._0_1_ = ' ';
                        local_810._1_1_ = 't';
                        local_810._2_1_ = 'o';
                        local_810._3_1_ = ' ';
                        local_80c._0_1_ = 'l';
                        local_80c._1_1_ = 'o';
                        local_80c._2_1_ = 'a';
                        local_80c._3_1_ = 'd';
                        local_808[0] = '.';
                        local_808[1] = '\0';
                        local_808._0_4_ = uVar12;
                        /* WARNING: Ignoring partial resolution of indirect */
                        FUN_0001dbec(4, &local_838, 0);
                    }
                } else {
                LAB_00014a7c:
                    local_838 = (code *)0x6f727245;
                    local_834._0_1_ = 'r';
                    local_834._1_1_ = ' ';
                    local_834._2_1_ = 'i';
                    local_834._3_1_ = 'n';
                    iStack_830._0_1_ = ' ';
                    iStack_830._1_1_ = 'c';
                    iStack_830._2_1_ = 'o';
                    iStack_830._3_1_ = 'n';
                    iStack_82c._0_1_ = 'f';
                    iStack_82c._1_1_ = 'i';
                    iStack_82c._2_1_ = 'g';
                    iStack_82c._3_1_ = 'u';
                    local_828 = (code *)0x69746172;
                    local_824._0_1_ = 'o';
                    local_824._1_1_ = 'n';
                    local_824._2_1_ = ' ';
                    local_824._3_1_ = 'f';
                    local_820._0_1_ = 'i';
                    local_820._1_1_ = 'l';
                    local_820._2_1_ = 'e';
                    local_820._3_1_ = ',';
                    local_81c._0_1_ = ' ';
                    local_81c._1_1_ = 'p';
                    local_81c._2_1_ = 'a';
                    local_81c._3_1_ = 'r';
                    local_818._0_1_ = 't';
                    local_818._1_1_ = 'i';
                    local_818._2_1_ = 'a';
                    local_818._3_1_ = 'l';
                    local_814._0_1_ = 'l';
                    local_814._1_1_ = 'y';
                    local_814._2_1_ = ' ';
                    local_814._3_1_ = 'l';
                    local_810._0_1_ = 'o';
                    local_810._1_1_ = 'a';
                    local_810._2_1_ = 'd';
                    local_810._3_1_ = 'e';
                    local_80c._0_3_ = 0x2e64;
                    FUN_0001dbec(4, &local_838, 0);
                    if (DAT_00076072 != '\0') {
                        if ((DAT_00072d88 == '\0') && (*local_a18 == '\0'))
                            goto LAB_00014a20;
                        goto LAB_00014a34;
                    }
                }
            } else {
            LAB_00013f58:
                if (iVar37 == 0) {
                    if (((DAT_00072d88 == '\0') && (*local_a18 == '\0')) &&
                        (DAT_00067858 < 4)) {
                    LAB_00013f90:
                        if (DAT_00067858 < 4)
                            goto LAB_00013fdc;
                    } else {
                        local_838 = (code *)0x61746146;
                        local_834._0_1_ = 'l';
                        local_834._1_1_ = ' ';
                        local_834._2_1_ = 'J';
                        local_834._3_1_ = 'S';
                        iStack_830._0_1_ = 'O';
                        iStack_830._1_1_ = 'N';
                        iStack_830._2_1_ = ' ';
                        iStack_830._3_1_ = 'e';
                        iStack_82c._0_1_ = 'r';
                        iStack_82c._1_1_ = 'r';
                        iStack_82c._2_1_ = 'o';
                        iStack_82c._3_1_ = 'r';
                        local_828 = (code *)0x206e6920;
                        local_824._0_1_ = 'c';
                        local_824._1_1_ = 'o';
                        local_824._2_1_ = 'n';
                        local_824._3_1_ = 'f';
                        local_820._0_1_ = 'i';
                        local_820._1_1_ = 'g';
                        local_820._2_1_ = 'u';
                        local_820._3_1_ = 'r';
                        local_81c._0_1_ = 'a';
                        local_81c._1_1_ = 't';
                        local_81c._2_1_ = 'i';
                        local_81c._3_1_ = 'o';
                        local_818._0_1_ = 'n';
                        local_818._1_1_ = ' ';
                        local_818._2_1_ = 'f';
                        local_818._3_1_ = 'i';
                        local_814._0_1_ = 'l';
                        local_814._1_1_ = 'e';
                        local_814._2_1_ = '.';
                        local_814._3_1_ = '\0';
                        FUN_0001dbec(4, &local_838, 0);
                        if ((DAT_00072d88 == '\0') && (*local_a18 == '\0'))
                            goto LAB_00013f90;
                    }
                    local_838 = (code *)0x666e6f43;
                    local_834._0_1_ = 'i';
                    local_834._1_1_ = 'g';
                    local_834._2_1_ = 'u';
                    local_834._3_1_ = 'r';
                    iStack_830._0_1_ = 'a';
                    iStack_830._1_1_ = 't';
                    iStack_830._2_1_ = 'i';
                    iStack_830._3_1_ = 'o';
                    iStack_82c._0_1_ = 'n';
                    iStack_82c._1_1_ = ' ';
                    iStack_82c._2_1_ = 'f';
                    iStack_82c._3_1_ = 'i';
                    local_828 = (code *)0x6320656c;
                    local_824._0_1_ = 'o';
                    local_824._1_1_ = 'u';
                    local_824._2_1_ = 'l';
                    local_824._3_1_ = 'd';
                    local_820._0_1_ = ' ';
                    local_820._1_1_ = 'n';
                    local_820._2_1_ = 'o';
                    local_820._3_1_ = 't';
                    local_81c._0_1_ = ' ';
                    local_81c._1_1_ = 'b';
                    local_81c._2_1_ = 'e';
                    local_81c._3_1_ = ' ';
                    local_818._0_1_ = 'u';
                    local_818._1_1_ = 's';
                    local_818._2_1_ = 'e';
                    local_818._3_1_ = 'd';
                    /* WARNING: Ignoring partial resolution of indirect */
                    local_814._0_2_ = 0x2e;
                    FUN_0001dbec(4, &local_838, 0);
                }
            }
        LAB_00013fdc:
            pcVar8 = local_a1c;
            free(*(void **)(local_a1c + 800));
            *(undefined4 *)(pcVar8 + 800) = 0;
        }
    } else {
        *(undefined1 *)local_a28 = 1;
        strcpy((char *)&DAT_000685e0, pcVar13);
        if (*(char **)(pcVar8 + 0x20c) != (char *)0x0) {
            strcpy((char *)&DAT_000685c0, *(char **)(pcVar8 + 0x20c));
        }
        if (((DAT_00072d88 != '\0') ||
             (local_a18 = &DAT_000686e0, DAT_000686e0 != '\0')) ||
            (2 < DAT_00067858)) {
            snprintf((char *)&local_838, 0x800,
                     "Log file path: %s Open flag: %s", &DAT_000685e0);
            FUN_0001dbec(3, &local_838, 0);
            goto LAB_000142f8;
        }
        iVar37 = *(int *)(local_a1c + 0x208);
        if (iVar37 != 0)
            goto LAB_00014308;
    LAB_00013ef4:
        if (3 < DAT_00067858)
            goto LAB_0001464c;
        if (*(int *)(local_a1c + 800) != 0) {
        LAB_00013f10:
            if (4 < DAT_00067858)
                goto LAB_00013f24;
            iVar37 = *(int *)(local_a1c + 0x3f4);
            if (iVar37 == -1)
                goto LAB_000149e8;
            goto LAB_00013f58;
        }
    }
    pcVar8 = *local_a30;
    sVar9 = strlen(pcVar8);
    *(undefined2 *)(pcVar8 + sVar9) = *(undefined2 *)local_a34;
    if (DAT_0007600c == '\0') {
        if (*local_a18 != '\0')
            goto LAB_0001402c;
        setlogmask(0x3f);
    } else {
        *local_a18 = '\x01';
    LAB_0001402c:
        setlogmask(0xff);
    }
    if (DAT_000681f4 < 0) {
        DAT_000681f4 = 0x3c;
    }
    FUN_0003c5b4(&DAT_00072c90);
    FUN_0003c5b4(&DAT_00072c18);
    FUN_0003c5b4(&DAT_00072d08);
    local_a28 = &DAT_00076220;
    FUN_0003c5b4(&DAT_000684f0);
    (**(code **)(extraout_r1 + 0xc))(0);
    (*DAT_00072c24)(0);
    (*DAT_00072d14)(0);
    (*DAT_000684fc)(0);
    DAT_00076220 = 0;
    local_a24 = &DAT_00074fd8;
    for (iVar37 = 0; iVar37 < DAT_00074fd8; iVar37 = iVar37 + 1) {
        FUN_0003c7fc(*(undefined4 *)(DAT_00074f60 + iVar37 * 4));
    }
    if (DAT_00074fd8 == 0) {
        local_838 = (code *)0x206c6c41;
        local_834._0_1_ = 'd';
        local_834._1_1_ = 'e';
        local_834._2_1_ = 'v';
        local_834._3_1_ = 'i';
        iStack_830._0_1_ = 'c';
        iStack_830._1_1_ = 'e';
        iStack_830._2_1_ = 's';
        iStack_830._3_1_ = ' ';
        iStack_82c._0_1_ = 'd';
        iStack_82c._1_1_ = 'i';
        iStack_82c._2_1_ = 's';
        iStack_82c._3_1_ = 'a';
        local_828 = (code *)0x64656c62;
        local_824._0_1_ = ',';
        local_824._1_1_ = ' ';
        local_824._2_1_ = 'c';
        local_824._3_1_ = 'a';
        local_820._0_1_ = 'n';
        local_820._1_1_ = 'n';
        local_820._2_1_ = 'o';
        local_820._3_1_ = 't';
        local_81c._0_1_ = ' ';
        local_81c._1_1_ = 'm';
        local_81c._2_1_ = 'i';
        local_81c._3_1_ = 'n';
        local_818 = CONCAT13(local_818._3_1_, 0x2174);
        FUN_0001dbec(3, &local_838, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002c508(1, 0);
    }
    pcVar8 = *(char **)(local_a1c + 0x400);
    *(int *)((int)local_a20 + -0x4b0) = DAT_00074fd8;
    if (pcVar8 == (char *)0x0) {
        iVar32 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_00074fb8);
        iVar37 = DAT_00074f60;
        if (iVar32 != 0) {
            FUN_0002df98("load_temp_cutoffs", 0x559);
        LAB_00015600:
            piVar25 = __errno_location();
            snprintf((char *)&local_838, 0x800,
                     "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d",
                     *piVar25);
            goto LAB_00014964;
        }
        local_a2c = &DAT_00074f60;
        iVar33 = *local_a24;
        iVar32 = 0;
        while (iVar32 < iVar33) {
            iVar20 = *(int *)(iVar37 + iVar32 * 4);
            iVar32 = iVar32 + 1;
            if (*(int *)(iVar20 + 0xb8) == 0) {
                *(undefined4 *)(iVar20 + 0xb8) = 0x5f;
            }
        }
        FUN_0002d9e0(&DAT_00074fb8, "load_temp_cutoffs", 0x562);
    } else {
        iVar37 = 0;
        uVar39 = 0;
        piVar25 = &DAT_00074f60;
        ppcVar28 = &DAT_0006797c;
        pcVar8 = strtok(pcVar8, ",");
        while (pcVar8 != (char *)0x0) {
            if (*local_a24 <= iVar37) {
                local_838 = (code *)0x206f6f54;
                local_834._0_1_ = 'm';
                local_834._1_1_ = 'a';
                local_834._2_1_ = 'n';
                local_834._3_1_ = 'y';
                iStack_830._0_1_ = ' ';
                iStack_830._1_1_ = 'v';
                iStack_830._2_1_ = 'a';
                iStack_830._3_1_ = 'l';
                iStack_82c._0_1_ = 'u';
                iStack_82c._1_1_ = 'e';
                iStack_82c._2_1_ = 's';
                iStack_82c._3_1_ = ' ';
                local_828 = (code *)0x73736170;
                local_824._0_1_ = 'e';
                local_824._1_1_ = 'd';
                local_824._2_1_ = ' ';
                local_824._3_1_ = 't';
                local_820._0_1_ = 'o';
                local_820._1_1_ = ' ';
                local_820._2_1_ = 's';
                local_820._3_1_ = 'e';
                local_81c._0_1_ = 't';
                local_81c._1_1_ = ' ';
                local_81c._2_1_ = 't';
                local_81c._3_1_ = 'e';
                local_818._0_1_ = 'm';
                local_818._1_1_ = 'p';
                local_818._2_1_ = ' ';
                local_818._3_1_ = 'c';
                local_814._0_1_ = 'u';
                local_814._1_1_ = 't';
                local_814._2_1_ = 'o';
                local_814._3_1_ = 'f';
                local_810 = CONCAT22(local_810._2_2_, 0x66);
                FUN_0001dbec(3, &local_838, 1);
                /* WARNING: Subroutine does not return */
                FUN_0002c508(1);
            }
            uVar39 = strtol(pcVar8, (char **)0x0, 10);
            if (200 < uVar39) {
                local_838 = (code *)0x61766e49;
                local_834._0_1_ = 'l';
                local_834._1_1_ = 'i';
                local_834._2_1_ = 'd';
                local_834._3_1_ = ' ';
                iStack_830._0_1_ = 'v';
                iStack_830._1_1_ = 'a';
                iStack_830._2_1_ = 'l';
                iStack_830._3_1_ = 'u';
                iStack_82c._0_1_ = 'e';
                iStack_82c._1_1_ = ' ';
                iStack_82c._2_1_ = 'p';
                iStack_82c._3_1_ = 'a';
                pcVar8 = "ssed to set temp cutoff";
                ppcVar28 = &local_828;
                goto LAB_00014948;
            }
            iVar32 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_00074fb8);
            if (iVar32 != 0) {
                pcVar8 = (char *)FUN_0002df98("load_temp_cutoffs", 0x552);
                goto LAB_000155a0;
            }
            *(uint *)(*(int *)(DAT_00074f60 + iVar37 * 4) + 0xb8) = uVar39;
            iVar32 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00074fb8);
            if (iVar32 != 0)
                goto LAB_00015600;
            iVar37 = iVar37 + 1;
            (*DAT_0006797c)();
            pcVar8 = strtok((char *)0x0, ",");
        }
        if (iVar37 < 2) {
            iVar33 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_00074fb8);
            iVar32 = DAT_00074f60;
            if (iVar33 != 0) {
                FUN_0002df98("load_temp_cutoffs", 0x569);
                goto LAB_000156d4;
            }
            local_a2c = &DAT_00074f60;
            iVar33 = *local_a24;
            for (; iVar37 < iVar33; iVar37 = iVar37 + 1) {
                *(uint *)(*(int *)(iVar32 + iVar37 * 4) + 0xb8) = uVar39;
            }
            FUN_0002d9e0(&DAT_00074fb8, "load_temp_cutoffs", 0x56f);
        } else {
            local_a2c = &DAT_00074f60;
        }
    }
    iVar37 = *local_a24;
    iVar33 = *local_a2c;
    for (iVar32 = 0; iVar32 < iVar37; iVar32 = iVar32 + 1) {
        *(undefined4 *)(*(int *)(iVar33 + iVar32 * 4) + 0x138) = 99999999;
    }
    ppcVar28 = &local_838;
    if (DAT_00076070 == '\0') {
        *(int *)((int)local_a20 + -0x28c) = *(int *)((int)local_a20 + -0x28c) +
                                            *(int *)((int)local_a20 + -0x4b0);
    }
    local_a30 = (char **)&DAT_00067858;
    while (true) {
        iVar32 = 0;
        for (iVar37 = 0; iVar37 < DAT_00072e58; iVar37 = iVar37 + 1) {
            iVar33 = *(int *)(DAT_00072efc + iVar37 * 4);
            if (**(char **)(iVar33 + 0xa4) != '\0') {
                if (**(char **)(iVar33 + 0xac) == '\0') {
                    if ((DAT_000686e1 != '\0') &&
                        (((DAT_00072d88 != '\0' || (*local_a18 != '\0')) ||
                          (6 < (int)*local_a30)))) {
                        local_838 = (code *)0x6e616c42;
                        local_834._0_1_ = 'k';
                        local_834._1_1_ = ' ';
                        local_834._2_1_ = 'w';
                        local_834._3_1_ = 'o';
                        iStack_830._0_1_ = 'r';
                        iStack_830._1_1_ = 'k';
                        iStack_830._2_1_ = 'e';
                        iStack_830._3_1_ = 'r';
                        iStack_82c._0_1_ = ' ';
                        iStack_82c._1_1_ = 'e';
                        iStack_82c._2_1_ = 'x';
                        iStack_82c._3_1_ = 'i';
                        local_828 = (code *)0x2e737473;
                        local_824 = CONCAT22(local_824._2_2_, 10);
                        FUN_0001dbec(7, ppcVar28, 0);
                    }
                } else {
                    iVar32 = iVar32 + 1;
                }
            }
        }
        if (iVar32 != 0)
            break;
        if (*(int *)((int)local_a20 + -0x50) == 0) {
            if (((DAT_00072d88 != '\0') || (*local_a18 != '\0')) ||
                (4 < (int)*local_a30)) {
                local_838 = (code *)0x76206f4e;
                local_834._0_1_ = 'a';
                local_834._1_1_ = 'l';
                local_834._2_1_ = 'i';
                local_834._3_1_ = 'd';
                iStack_830._0_1_ = ' ';
                iStack_830._1_1_ = 'p';
                iStack_830._2_1_ = 'o';
                iStack_830._3_1_ = 'o';
                iStack_82c._0_1_ = 'l';
                iStack_82c._1_1_ = 's';
                iStack_82c._2_1_ = ',';
                iStack_82c._3_1_ = ' ';
                local_828 = (code *)0x61656c70;
                local_824._0_1_ = 's';
                local_824._1_1_ = 'e';
                local_824._2_1_ = ' ';
                local_824._3_1_ = 'c';
                local_820._0_1_ = 'o';
                local_820._1_1_ = 'n';
                local_820._2_1_ = 'f';
                local_820._3_1_ = 'i';
                local_81c._0_1_ = 'g';
                local_81c._1_1_ = 'u';
                local_81c._2_1_ = 'r';
                local_81c._3_1_ = 'e';
                local_818._0_1_ = ' ';
                local_818._1_1_ = 't';
                local_818._2_1_ = 'h';
                local_818._3_1_ = 'e';
                local_814._0_1_ = 'm';
                local_814._1_1_ = ' ';
                local_814._2_1_ = 'f';
                local_814._3_1_ = 'i';
                local_810._0_1_ = 'r';
                local_810._1_1_ = 's';
                local_810._2_1_ = 't';
                local_810._3_1_ = '!';
                local_80c._0_2_ = 10;
                FUN_0001dbec(5, ppcVar28, 0);
            }
            *(undefined4 *)((int)local_a20 + -0x50) = 1;
        }
        if ((DAT_000686e1 != '\0') &&
            (((DAT_00072d88 != '\0' || (*local_a18 != '\0')) ||
              (6 < (int)*local_a30)))) {
            local_838 = (code *)0x63656863;
            local_834._0_1_ = 'k';
            local_834._1_1_ = ' ';
            local_834._2_1_ = 'n';
            local_834._3_1_ = 'o';
            iStack_830._0_1_ = ' ';
            iStack_830._1_1_ = 'p';
            iStack_830._2_1_ = 'o';
            iStack_830._3_1_ = 'o';
            iStack_82c._0_1_ = 'l';
            iStack_82c._1_1_ = ' ';
            iStack_82c._2_1_ = 'a';
            iStack_82c._3_1_ = 'n';
            local_828 = (code *)0x73752064;
            local_824._0_1_ = 'e';
            local_824._1_1_ = 'r';
            local_824._2_1_ = ' ';
            local_824._3_1_ = 'r';
            local_820._0_1_ = 'e';
            local_820._1_1_ = 't';
            local_820._2_1_ = 'r';
            local_820._3_1_ = 'y';
            local_81c = CONCAT22(local_81c._2_2_, 0x21);
            FUN_0001dbec(7, ppcVar28, 0);
        }
        sleep(1);
    }
    if (DAT_00072e58 == 0) {
        if (((DAT_00072d88 != '\0') || (*local_a18 != '\0')) ||
            (3 < DAT_00067858)) {
            local_838 = (code *)0x6465654e;
            local_834._0_1_ = ' ';
            local_834._1_1_ = 't';
            local_834._2_1_ = 'o';
            local_834._3_1_ = ' ';
            iStack_830._0_1_ = 's';
            iStack_830._1_1_ = 'p';
            iStack_830._2_1_ = 'e';
            iStack_830._3_1_ = 'c';
            iStack_82c._0_1_ = 'i';
            iStack_82c._1_1_ = 'f';
            iStack_82c._2_1_ = 'y';
            iStack_82c._3_1_ = ' ';
            local_828 = (code *)0x6c207461;
            local_824._0_1_ = 'e';
            local_824._1_1_ = 'a';
            local_824._2_1_ = 's';
            local_824._3_1_ = 't';
            local_820._0_1_ = ' ';
            local_820._1_1_ = 'o';
            local_820._2_1_ = 'n';
            local_820._3_1_ = 'e';
            local_81c._0_1_ = ' ';
            local_81c._1_1_ = 'p';
            local_81c._2_1_ = 'o';
            local_81c._3_1_ = 'o';
            local_818._0_1_ = 'l';
            local_818._1_1_ = ' ';
            local_818._2_1_ = 's';
            local_818._3_1_ = 'e';
            local_814._0_1_ = 'r';
            local_814._1_1_ = 'v';
            local_814._2_1_ = 'e';
            local_814._3_1_ = 'r';
            local_810 = CONCAT22(local_810._2_2_, 0x2e);
            FUN_0001dbec(4, ppcVar28, 0);
        }
        local_838 = (code *)0x6c6f6f50;
        local_834._0_1_ = ' ';
        local_834._1_1_ = 's';
        local_834._2_1_ = 'e';
        local_834._3_1_ = 't';
        iStack_830._0_1_ = 'u';
        iStack_830._1_1_ = 'p';
        iStack_830._2_1_ = ' ';
        iStack_830._3_1_ = 'f';
        iStack_82c._0_1_ = 'a';
        iStack_82c._1_1_ = 'i';
        iStack_82c._2_1_ = 'l';
        iStack_82c._3_1_ = 'e';
        local_828 = (code *)CONCAT22(local_828._2_2_, 100);
        FUN_0001dbec(3, ppcVar28, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002c508(1, 0);
    }
    local_a30 = (char **)&DAT_00072efc;
    local_a34 = "cgminer.c";
    for (piVar25 = (int *)0x0; (int)piVar25 < DAT_00072e58;
         piVar25 = (int *)((int)piVar25 + 1)) {
        iVar37 = *(int *)(*local_a30 + (int)piVar25 * 4);
        *(undefined4 *)(iVar37 + 0x194) = 99999999;
        *(undefined4 *)(iVar37 + 0x1b8) = 99999999;
        if (*(int *)(iVar37 + 0xa8) == 0) {
            if (*(int *)(iVar37 + 0xb0) == 0) {
                pvVar15 = calloc(1, 1);
                *(void **)(iVar37 + 0xb0) = pvVar15;
            }
            pcVar8 = *(char **)(iVar37 + 0xac);
            if (pcVar8 == (char *)0x0) {
            LAB_000155a0:
                snprintf((char *)ppcVar28, 0x800,
                         "No login credentials supplied for pool %u %s",
                         piVar25);
                FUN_0001dbec(3, ppcVar28, 1);
                /* WARNING: Subroutine does not return */
                FUN_0002c508(1, pcVar8);
            }
            sVar9 = strlen(pcVar8);
            sVar16 = strlen(*(char **)(iVar37 + 0xb0));
            sVar9 = sVar9 + sVar16 + 2;
            pcVar8 =
                (char *)FUN_0001f708(sVar9, local_a34, &DAT_0004f010, 0x30c1);
            *(char **)(iVar37 + 0xa8) = pcVar8;
            snprintf(pcVar8, sVar9, "%s:%s", *(undefined4 *)(iVar37 + 0xac));
        }
    }
    bVar40 = DAT_00072d88 != '\0';
    *(undefined4 *)(local_a1c + 0x48c) = *(undefined4 *)*local_a30;
    if (bVar40) {
        openlog("cgminer", 1, 8);
    }
    if (*(int *)((int)local_a20 + -0x4c) != 0) {
        iVar37 = pipe((int *)ppcVar28);
        if (iVar37 < 0) {
            perror("pipe - failed to create pipe for --monitor");
            /* WARNING: Subroutine does not return */
            exit(1);
        }
        fflush(stderr);
        iVar37 = dup2(local_834, 2);
        if (iVar37 < 0) {
            perror("dup2 - failed to alias stderr to write end of pipe for "
                   "--monitor");
            /* WARNING: Subroutine does not return */
            exit(1);
        }
        iVar37 = close(local_834);
        if (iVar37 < 0) {
            perror("close - failed to close write end of pipe for --monitor");
            /* WARNING: Subroutine does not return */
            exit(1);
        }
        p_Var17 = signal(0xd, (__sighandler_t)0x1);
        p_Var18 = signal(0xd, (__sighandler_t)0x1);
        if (p_Var17 == (__sighandler_t)0xffffffff ||
            p_Var18 == (__sighandler_t)0xffffffff) {
            perror("signal - failed to edit signal mask for --monitor");
            /* WARNING: Subroutine does not return */
            exit(1);
        }
        _Var19 = fork();
        *(__pid_t *)(local_a1c + 0x424) = _Var19;
        if (_Var19 < 0) {
        LAB_000156d4:
            perror("fork - failed to fork child process for --monitor");
            /* WARNING: Subroutine does not return */
            exit(1);
        }
        if (_Var19 == 0) {
            iVar37 = dup2((int)local_838, 0);
            if (iVar37 < 0) {
                perror("dup2 - in child, failed to alias read end of pipe to "
                       "stdin for --monitor");
                /* WARNING: Subroutine does not return */
                exit(1);
            }
            close((int)local_838);
            execl("/bin/bash", "/bin/bash", &DAT_00054758,
                  *(undefined4 *)((int)local_a20 + -0x4c));
            perror("execl - in child failed to exec user specified command for "
                   "--monitor");
            /* WARNING: Subroutine does not return */
            exit(1);
        }
        iVar37 = close((int)local_838);
        if (iVar37 < 0) {
            perror("close - failed to close read end of pipe for --monitor");
            /* WARNING: Subroutine does not return */
            exit(1);
        }
    }
    local_a44 = &DAT_00073f18;
    DAT_00073f18 = FUN_0001f790(*local_a28, 4, "cgminer.c", &DAT_0004f010);
    for (iVar37 = 0; iVar37 < *local_a28; iVar37 = iVar37 + 1) {
        iVar32 = *local_a44;
        uVar12 = FUN_0001f790(1, 0x40, "cgminer.c", &DAT_0004f010);
        *(undefined4 *)(iVar32 + iVar37 * 4) = uVar12;
    }
    local_a34 = (char *)0x0;
    local_a4c = &DAT_000686e1;
    local_a50 = &DAT_00072e58;
    local_a48 = (int *)&DAT_00072d88;
    for (iVar37 = 0;
         piVar4 = local_a48, piVar25 = local_a50, iVar37 < *local_a24;
         iVar37 = iVar37 + 1) {
        iVar33 = *(int *)(*local_a2c + iVar37 * 4);
        iVar32 = FUN_0001f708((*(int *)(iVar33 + 0x94) + 1) * 4, "cgminer.c",
                              &DAT_0004f010, 0x30df);
        *(int *)(iVar33 + 0x98) = iVar32;
        *(undefined4 *)(iVar32 + *(int *)(iVar33 + 0x94) * 4) = 0;
        *(undefined4 *)(iVar33 + 0x60) = 4;
        for (iVar32 = 0;
             pcVar8 = local_a34 + iVar32, iVar32 < *(int *)(iVar33 + 0x94);
             iVar32 = iVar32 + 1) {
            puVar35 = (undefined4 *)FUN_0002f964(pcVar8);
            *puVar35 = pcVar8;
            puVar35[9] = iVar33;
            puVar35[1] = iVar32;
            iVar20 = (**(code **)(*(int *)(iVar33 + 4) + 0x2c))();
            if (iVar20 != 0) {
                iVar20 =
                    FUN_00022e34(puVar35, &pStack_9e8, FUN_000290f4, puVar35);
                if (iVar20 != 0) {
                    snprintf((char *)ppcVar28, 0x800, "thread %d create failed",
                             *puVar35);
                    FUN_0001dbec(3, ppcVar28, 1);
                    /* WARNING: Subroutine does not return */
                    FUN_0002c508(1, 0);
                }
                *(undefined4 **)(*(int *)(iVar33 + 0x98) + iVar32 * 4) =
                    puVar35;
                if (*(int *)(iVar33 + 0x20) != 1) {
                    if ((*local_a4c != '\0') &&
                        ((((char)*local_a48 != '\0' || (*local_a18 != '\0')) ||
                          (6 < DAT_00067858)))) {
                        snprintf((char *)ppcVar28, 0x800,
                                 "Pushing sem post to thread %d", *puVar35);
                        FUN_0001dbec(7, ppcVar28, 0);
                    }
                    FUN_00022e7c(puVar35 + 4, "cgminer.c", &DAT_0004f010,
                                 0x30fb);
                }
            }
        }
        local_a34 = pcVar8;
    }
    if ((local_a1c[0x560] == '\0') && (*local_a38 == 0)) {
        iVar32 = pthread_mutex_lock((pthread_mutex_t *)&DAT_0006a234);
        for (iVar37 = 0; iVar37 < *piVar25; iVar37 = iVar37 + 1) {
            iVar33 = *(int *)(*local_a30 + iVar37 * 4);
            iVar32 = iVar33 + 100;
            if (*(int *)(iVar33 + 100) != 1) {
                iVar32 = FUN_00029258();
            }
            *(undefined1 *)(iVar33 + 0x61) = 1;
        }
        if (*(int *)(local_a1c + 0x210) != 0) {
            FUN_0003dc58(iVar32);
        }
        if ((((char)*piVar4 != '\0') || (*local_a18 != '\0')) ||
            (4 < DAT_00067858)) {
            local_838 = (code *)0x626f7250;
            local_834._0_1_ = 'i';
            local_834._1_1_ = 'n';
            local_834._2_1_ = 'g';
            local_834._3_1_ = ' ';
            iStack_830._0_1_ = 'f';
            iStack_830._1_1_ = 'o';
            iStack_830._2_1_ = 'r';
            iStack_830._3_1_ = ' ';
            iStack_82c._0_1_ = 'a';
            iStack_82c._1_1_ = 'n';
            iStack_82c._2_1_ = ' ';
            iStack_82c._3_1_ = 'a';
            local_828 = (code *)0x6576696c;
            local_824._0_1_ = ' ';
            local_824._1_1_ = 'p';
            local_824._2_1_ = 'o';
            local_824._3_1_ = 'o';
            local_820 = CONCAT22(local_820._2_2_, 0x6c);
            FUN_0001dbec(5, ppcVar28, 0);
        }
        FUN_00028fc4();
        iVar37 = 0;
        pthread_mutex_unlock((pthread_mutex_t *)&DAT_0006a234);
        do {
            iVar37 = iVar37 + 1;
            sleep(1);
            pcVar8 = local_a18;
            if (iVar37 == 0xb4) {
                bVar27 = 0;
            } else {
                bVar27 = (local_a1c[0x31c] ^ 1U) & 1;
            }
        } while (bVar27 != 0);
        local_a34 = &DAT_000686e1;
        bVar40 = false;
        while (local_a1c[0x31c] == '\0') {
            if (bVar40) {
            LAB_00015884:
                if (DAT_00076072 == '\0') {
                LAB_00015890:
                    if ((*local_a34 != '\0') &&
                        ((((char)*piVar4 != '\0' || (*pcVar8 != '\0')) ||
                          (6 < DAT_00067858)))) {
                        local_838 = (code *)0x73206f4e;
                        local_834._0_1_ = 'e';
                        local_834._1_1_ = 'r';
                        local_834._2_1_ = 'v';
                        local_834._3_1_ = 'e';
                        iStack_830._0_1_ = 'r';
                        iStack_830._1_1_ = 's';
                        iStack_830._2_1_ = ' ';
                        iStack_830._3_1_ = 'c';
                        iStack_82c._0_1_ = 'o';
                        iStack_82c._1_1_ = 'u';
                        iStack_82c._2_1_ = 'l';
                        iStack_82c._3_1_ = 'd';
                        local_828 = (code *)0x20656220;
                        local_824._0_1_ = 'u';
                        local_824._1_1_ = 's';
                        local_824._2_1_ = 'e';
                        local_824._3_1_ = 'd';
                        local_820._0_1_ = '!';
                        local_820._1_1_ = ' ';
                        local_820._2_1_ = 'E';
                        local_820._3_1_ = 'x';
                        local_81c._0_1_ = 'i';
                        local_81c._1_1_ = 't';
                        local_81c._2_1_ = 'i';
                        local_81c._3_1_ = 'n';
                        local_818._0_3_ = 0x2e67;
                        FUN_0001dbec(7, ppcVar28, 0);
                    }
                }
            } else {
                if ((((char)*piVar4 == '\0') && (*pcVar8 == '\0')) &&
                    (DAT_00067858 < 3)) {
                LAB_0001661c:
                    if (2 < DAT_00067858)
                        goto LAB_000164d8;
                LAB_00016628:
                    if (2 < DAT_00067858)
                        goto LAB_00016514;
                } else {
                    local_838 = (code *)0x73206f4e;
                    local_834._0_1_ = 'e';
                    local_834._1_1_ = 'r';
                    local_834._2_1_ = 'v';
                    local_834._3_1_ = 'e';
                    iStack_830._0_1_ = 'r';
                    iStack_830._1_1_ = 's';
                    iStack_830._2_1_ = ' ';
                    iStack_830._3_1_ = 'w';
                    iStack_82c._0_1_ = 'e';
                    iStack_82c._1_1_ = 'r';
                    iStack_82c._2_1_ = 'e';
                    iStack_82c._3_1_ = ' ';
                    local_828 = (code *)0x6e756f66;
                    local_824._0_1_ = 'd';
                    local_824._1_1_ = ' ';
                    local_824._2_1_ = 't';
                    local_824._3_1_ = 'h';
                    local_820._0_1_ = 'a';
                    local_820._1_1_ = 't';
                    local_820._2_1_ = ' ';
                    local_820._3_1_ = 'c';
                    local_81c._0_1_ = 'o';
                    local_81c._1_1_ = 'u';
                    local_81c._2_1_ = 'l';
                    local_81c._3_1_ = 'd';
                    local_818._0_1_ = ' ';
                    local_818._1_1_ = 'b';
                    local_818._2_1_ = 'e';
                    local_818._3_1_ = ' ';
                    local_814._0_1_ = 'u';
                    local_814._1_1_ = 's';
                    local_814._2_1_ = 'e';
                    local_814._3_1_ = 'd';
                    local_810._0_1_ = ' ';
                    local_810._1_1_ = 't';
                    local_810._2_1_ = 'o';
                    local_810._3_1_ = ' ';
                    local_80c._0_1_ = 'g';
                    local_80c._1_1_ = 'e';
                    local_80c._2_1_ = 't';
                    local_80c._3_1_ = ' ';
                    builtin_strncpy(local_808, "work fro", 8);
                    uStack_800 = 0x2e6d;
                    local_7fe = 0;
                    FUN_0001dbec(3, ppcVar28, 0);
                    if (((char)*piVar4 == '\0') && (*pcVar8 == '\0'))
                        goto LAB_0001661c;
                LAB_000164d8:
                    memcpy(ppcVar28,
                           "Please check the details from the list below of "
                           "the servers you have input",
                           0x4b);
                    FUN_0001dbec(3, ppcVar28, 0);
                    if (((char)*piVar4 == '\0') && (*pcVar8 == '\0'))
                        goto LAB_00016628;
                LAB_00016514:
                    memcpy(
                        ppcVar28,
                        "Most likely you have input the wrong URL, forgotten "
                        "to add a port, or have not set up workers",
                        0x5e);
                    FUN_0001dbec(3, ppcVar28, 0);
                }
                for (iVar37 = 0; iVar37 < *piVar25; iVar37 = iVar37 + 1) {
                    if ((((char)*piVar4 != '\0') || (*pcVar8 != '\0')) ||
                        (3 < DAT_00067858)) {
                        snprintf((char *)ppcVar28, 0x800,
                                 "Pool: %d  URL: %s  User: %s  Password: %s",
                                 iVar37);
                        FUN_0001dbec(4, ppcVar28, 0);
                    }
                }
                if (DAT_00076072 == '\0')
                    goto LAB_00015890;
                if ((((char)*piVar4 != '\0') || (*pcVar8 != '\0')) ||
                    (2 < DAT_00067858)) {
                    memcpy(ppcVar28,
                           "Press any key to exit, or cgminer will wait "
                           "indefinitely for an alive pool.",
                           0x4c);
                    FUN_0001dbec(3, ppcVar28, 0);
                    goto LAB_00015884;
                }
            }
            FUN_000207b4(500);
            bVar40 = true;
        }
        local_938[0] = 0x6f67;
        if ((*local_a34 != '\0') &&
            ((((char)*piVar4 != '\0' || (*local_a18 != '\0')) ||
              (6 < DAT_00067858)))) {
            snprintf((char *)ppcVar28, 0x800, "check success, send %s",
                     local_938);
            FUN_0001dbec(7, ppcVar28, 0);
        }
        sVar9 = strlen((char *)local_938);
        FUN_00042848(local_938, sVar9);
    }
    _DAT_00072d80 = 0;
    DAT_00072d84 = 0;
    puVar35 = &DAT_00068b98;
    do {
        puVar23 = puVar35 + 2;
        *puVar35 = 0;
        puVar35[1] = 0;
        puVar35 = puVar23;
    } while (puVar23 != &DAT_00068bf8);
    iVar33 = *local_a24;
    iVar32 = *local_a2c;
    *(undefined4 *)(local_a1c + 0x510) = 0;
    for (iVar37 = local_a40; iVar37 < iVar33; iVar37 = iVar37 + 1) {
        iVar20 = *(int *)(iVar32 + iVar37 * 4);
        *(undefined4 *)(iVar20 + 0x50) = 0;
        *(undefined4 *)(iVar20 + 0x54) = 0;
        *(undefined4 *)(iVar20 + 0x30) = 0;
        *(undefined4 *)(iVar20 + 0x34) = 0;
    }
    FUN_00020580(&DAT_00068b30);
    FUN_00020580(&DAT_00068b28);
    FUN_00020580(&DAT_00068b90);
    FUN_0002a478(&DAT_00068b38, 0x28);
    iVar32 = *local_a3c;
    *(undefined4 *)(local_a1c + 0x480) = 3;
    iVar37 = FUN_00022e34(iVar32 + 0xc0, &pStack_9e8, FUN_000321f0, 0);
    if (iVar37 != 0) {
        local_838 = (code *)0x63746177;
        local_834._0_1_ = 'h';
        local_834._1_1_ = 'p';
        local_834._2_1_ = 'o';
        local_834._3_1_ = 'o';
        iStack_830._0_1_ = 'l';
        iStack_830._1_1_ = ' ';
        iStack_830._2_1_ = 't';
        iStack_830._3_1_ = 'h';
        iStack_82c._0_1_ = 'r';
        iStack_82c._1_1_ = 'e';
        iStack_82c._2_1_ = 'a';
        iStack_82c._3_1_ = 'd';
        local_828 = (code *)0x65726320;
        local_824._0_1_ = 'a';
        local_824._1_1_ = 't';
        local_824._2_1_ = 'e';
        local_824._3_1_ = ' ';
        local_820._0_1_ = 'f';
        local_820._1_1_ = 'a';
        local_820._2_1_ = 'i';
        local_820._3_1_ = 'l';
        local_81c = CONCAT13(local_81c._3_1_, 0x6465);
        FUN_0001dbec(3, ppcVar28, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002c508(1, 0);
    }
    pthread_detach(*(pthread_t *)(iVar32 + 0xcc));
    iVar32 = *local_a3c;
    *(undefined4 *)(local_a1c + 0x484) = 4;
    iVar37 = FUN_00022e34(iVar32 + 0x100, &pStack_9e8, FUN_000364f0, 0);
    if (iVar37 != 0) {
        local_838 = (code *)0x63746177;
        local_834._0_1_ = 'h';
        local_834._1_1_ = 'd';
        local_834._2_1_ = 'o';
        local_834._3_1_ = 'g';
        iStack_830._0_1_ = ' ';
        iStack_830._1_1_ = 't';
        iStack_830._2_1_ = 'h';
        iStack_830._3_1_ = 'r';
        iStack_82c._0_1_ = 'e';
        iStack_82c._1_1_ = 'a';
        iStack_82c._2_1_ = 'd';
        iStack_82c._3_1_ = ' ';
        local_828 = (code *)0x61657263;
        local_824._0_1_ = 't';
        local_824._1_1_ = 'e';
        local_824._2_1_ = ' ';
        local_824._3_1_ = 'f';
        local_820._0_1_ = 'a';
        local_820._1_1_ = 'i';
        local_820._2_1_ = 'l';
        local_820._3_1_ = 'e';
        local_81c = CONCAT22(local_81c._2_2_, 100);
        FUN_0001dbec(3, ppcVar28, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002c508(1, 0);
    }
    pthread_detach(*(pthread_t *)(iVar32 + 0x10c));
    if (*(int *)((int)local_a20 + -0x288) != 8) {
        snprintf((char *)ppcVar28, 0x800,
                 "incorrect total_control_threads (%d) should be 8");
    LAB_0001485c:
        FUN_0001dbec(3, &local_838, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002c508(1, 0);
    }
    iVar37 = nice(-10);
    if (((iVar37 == 0) && (DAT_000686e1 != '\0')) &&
        (((char)*piVar4 != '\0' ||
          ((*local_a18 != '\0' || (6 < DAT_00067858)))))) {
        local_838 = (code *)0x62616e55;
        local_834._0_1_ = 'l';
        local_834._1_1_ = 'e';
        local_834._2_1_ = ' ';
        local_834._3_1_ = 't';
        iStack_830._0_1_ = 'o';
        iStack_830._1_1_ = ' ';
        iStack_830._2_1_ = 's';
        iStack_830._3_1_ = 'e';
        iStack_82c._0_1_ = 't';
        iStack_82c._1_1_ = ' ';
        iStack_82c._2_1_ = 't';
        iStack_82c._3_1_ = 'h';
        local_828 = (code *)0x64616572;
        local_824._0_1_ = ' ';
        local_824._1_1_ = 't';
        local_824._2_1_ = 'o';
        local_824._3_1_ = ' ';
        local_820._0_1_ = 'h';
        local_820._1_1_ = 'i';
        local_820._2_1_ = 'g';
        local_820._3_1_ = 'h';
        local_81c._0_1_ = ' ';
        local_81c._1_1_ = 'p';
        local_81c._2_1_ = 'r';
        local_81c._3_1_ = 'i';
        local_818._0_1_ = 'o';
        local_818._1_1_ = 'r';
        local_818._2_1_ = 'i';
        local_818._3_1_ = 't';
        local_814 = CONCAT22(local_814._2_2_, 0x79);
        FUN_0001dbec(7, ppcVar28, 0);
    }
    ppcVar6 = local_a20;
    ppcVar5 = local_a30;
    local_a34 = &DAT_00076060;
    local_a2c = (int *)&DAT_00074f5d;
    local_a24 = piVar4;
LAB_00015a04:
    if (*local_a34 != '\0') {
        if ((((char)*local_a24 != '\0') || (*local_a18 != '\0')) ||
            (5 < DAT_00067858)) {
            local_838 = (code *)0x6b726f57;
            local_834._0_1_ = ' ';
            local_834._1_1_ = 'u';
            local_834._2_1_ = 'p';
            local_834._3_1_ = 'd';
            iStack_830._0_1_ = 'a';
            iStack_830._1_1_ = 't';
            iStack_830._2_1_ = 'e';
            iStack_830._3_1_ = ' ';
            iStack_82c._0_1_ = 'm';
            iStack_82c._1_1_ = 'e';
            iStack_82c._2_1_ = 's';
            iStack_82c._3_1_ = 's';
            local_828 = (code *)0x20656761;
            local_824._0_1_ = 'r';
            local_824._1_1_ = 'e';
            local_824._2_1_ = 'c';
            local_824._3_1_ = 'e';
            local_820._0_1_ = 'i';
            local_820._1_1_ = 'v';
            local_820._2_1_ = 'e';
            local_820._3_1_ = 'd';
            local_81c = local_81c & 0xffffff00;
            FUN_0001dbec(6, ppcVar28, 0);
        }
        FUN_00020580(&DAT_00068af4);
        iVar37 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_00074f88);
        if (iVar37 != 0) {
            piVar25 = __errno_location();
            pcVar8 = "WTF RDLOCK ERROR ON LOCK! errno=%d in %s %s():%d";
            goto LAB_0001627c;
        }
        iVar32 = *local_a28;
        iVar33 = *local_a44;
        for (iVar37 = 0; iVar37 < iVar32; iVar37 = iVar37 + 1) {
            *(undefined1 *)(*(int *)(iVar33 + iVar37 * 4) + 0x3f) = 1;
        }
        iVar37 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00074f88);
        if (iVar37 != 0) {
            piVar25 = __errno_location();
            pcVar8 = "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d";
            goto LAB_0001627c;
        }
        (*DAT_0006797c)();
    }
    ppVar21 = *(pthread_mutex_t **)(local_a1c + 0x438);
    *local_a34 = '\0';
    iVar37 = pthread_mutex_lock(ppVar21);
    pcVar8 = local_a1c;
    if (iVar37 != 0) {
        piVar25 = __errno_location();
        pcVar8 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        goto LAB_0001627c;
    }
    if ((*(int *)(local_a1c + 0x514) != 0) &&
        (1 < *(int *)(*(int *)(*(int *)(local_a1c + 0x514) + 0x158) + 0xc))) {
        pthread_cond_wait((pthread_cond_t *)&DAT_00072e60,
                          *(pthread_mutex_t **)(local_a1c + 0x438));
        iVar37 = *(int *)(pcVar8 + 0x514);
        if (iVar37 != 0) {
            iVar32 = *(int *)(*(int *)(iVar37 + 0x158) + 0xc);
            iVar37 =
                pthread_mutex_unlock(*(pthread_mutex_t **)(pcVar8 + 0x438));
            if (iVar37 != 0)
                goto LAB_00016250;
            (*DAT_0006797c)();
            if (iVar32 < 2)
                goto LAB_00015a78;
            local_a0c = FUN_00032d98(0);
            if (local_a0c != 0) {
                FUN_0002acd0(&local_a0c, "cgminer.c", &DAT_0004f010, 0x31bd);
            }
            goto LAB_00015a04;
        }
    }
    iVar37 = pthread_mutex_unlock(*(pthread_mutex_t **)(local_a1c + 0x438));
    if (iVar37 == 0) {
        (*DAT_0006797c)();
    LAB_00015a78:
        if (local_a0c != 0) {
            FUN_0002acd0(&local_a0c, "cgminer.c", &DAT_0004f010, 0x31c5);
        }
        local_a20 = (code **)&DAT_0006a240;
        local_a30 = (char **)0x54a54;
        local_a0c = FUN_0002dbec();
    LAB_00015c0c:
        pthread_mutex_lock((pthread_mutex_t *)((int)local_a20 + -0xc));
        puVar35 = (undefined4 *)FUN_0002fe54();
        if (*(int *)(local_a1c + 0x3fc) == 4) {
            puVar35 = (undefined4 *)FUN_0002929c();
        } else if (*(int *)(local_a1c + 0x3fc) == 3) {
            iVar37 = *piVar25;
            pcVar8 = *ppcVar5;
            for (iVar32 = 0; iVar32 < iVar37; iVar32 = iVar32 + 1) {
                iVar33 = *(int *)(pcVar8 + iVar32 * 4);
                if (*(int *)(iVar33 + 0x40) < *(int *)(iVar33 + 0x3c))
                    goto LAB_00015c9c;
            }
            for (iVar32 = 0; iVar32 < iVar37; iVar32 = iVar32 + 1) {
                *(undefined4 *)(*(int *)(pcVar8 + iVar32 * 4) + 0x40) = 0;
            }
            iVar32 = *(int *)((int)ppcVar6 + -0x48) + 1;
            if (iVar37 <= iVar32) {
                iVar32 = 0;
            }
            *(int *)((int)ppcVar6 + -0x48) = iVar32;
        LAB_00015c9c:
            iVar37 = 0;
            while (true) {
                puVar23 = (undefined4 *)*piVar25;
                iVar32 = iVar37 + 1;
                if ((int)puVar23 <= iVar37)
                    break;
                iVar37 =
                    *(int *)(*ppcVar5 + *(int *)((int)ppcVar6 + -0x48) * 4);
                iVar33 = *(int *)(iVar37 + 0x40);
                *(int *)(iVar37 + 0x40) = iVar33 + 1;
                if (iVar33 < *(int *)(iVar37 + 0x3c)) {
                    if ((*(char *)(iVar37 + 0x61) == '\0') &&
                        (*(int *)(iVar37 + 100) == 1)) {
                        uVar41 = FUN_00029278(iVar37);
                        puVar23 = (undefined4 *)((ulonglong)uVar41 >> 0x20);
                        if ((int)uVar41 == 0)
                            goto LAB_00015ec0;
                    }
                    if ((char)*local_a2c != '\0') {
                        iVar37 = FUN_000293b0(0);
                        *(int *)(iVar37 + 0x40) = *(int *)(iVar37 + 0x40) + -1;
                    }
                }
                iVar20 = *(int *)((int)ppcVar6 + -0x48);
                iVar33 = *piVar25;
                *(int *)((int)ppcVar6 + -0x48) = iVar20 + 1;
                iVar37 = iVar32;
                if (iVar33 <= iVar20 + 1) {
                    *(undefined4 *)((int)ppcVar6 + -0x48) = 0;
                }
            }
            for (iVar37 = 0; iVar37 < *piVar25; iVar37 = iVar37 + 1) {
                puVar23 = (undefined4 *)FUN_000293b0(iVar37, puVar23);
                if ((*(char *)((int)puVar23 + 0x61) == '\0') &&
                    (puVar23[0x19] == 1)) {
                    uVar41 = FUN_00029278();
                    puVar23 = (undefined4 *)((ulonglong)uVar41 >> 0x20);
                    if ((int)uVar41 == 0)
                        goto LAB_00015ec0;
                }
            }
        }
        puVar23 = puVar35;
        if (DAT_000686e1 != '\0')
            goto LAB_00015ad8;
        goto LAB_00015b30;
    }
LAB_00016250:
    piVar25 = __errno_location();
    pcVar8 = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
LAB_0001627c:
    snprintf((char *)ppcVar28, 0x800, pcVar8, *piVar25);
LAB_00014964:
    FUN_0001dbec(3, &local_838, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
LAB_0001313c:
    pclose(pFVar7);
    local_a1c = "Parsed proc id is: %d\n";
    uVar39 = 0;
    iVar37 = 0;
    pbVar14 = (byte *)local_938;
    for (uVar31 = 1; sVar9 = strlen((char *)local_938), uVar31 <= sVar9;
         uVar31 = uVar31 + 1) {
        memset(acStack_a08, 0, 0x20);
        ppuVar10 = __ctype_b_loc();
        if (((*ppuVar10)[*pbVar14] & 0x2000) != 0) {
            strncpy(acStack_a08, (char *)((int)local_938 + uVar39),
                    (uVar31 - uVar39) - 1);
            lVar11 = strtol(acStack_a08, (char **)0x0, 10);
            uVar39 = uVar31;
            if (((0 < lVar11) && (iVar37 = iVar37 + 1, DAT_000686e1 != '\0')) &&
                ((DAT_00072d88 != '\0' ||
                  ((DAT_000686e0 != '\0' || (6 < DAT_00067858)))))) {
                local_a20 = &local_838;
                snprintf((char *)local_a20, 0x800, local_a1c);
                FUN_0001dbec(7, local_a20, 0);
            }
        }
        pbVar14 = pbVar14 + 1;
    }
    if (iVar37 != 0) {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (2 < DAT_00067858)) {
            local_a60 = param_2;
            snprintf((char *)&local_838, 0x800,
                     " %d instance of %s is  already Running on this machine",
                     iVar37);
            FUN_0001dbec(3, &local_838, 0);
        }
        if (iVar37 != 1) {
            snprintf((char *)&local_838, 0x800,
                     "%s is forbidden to start twice, will exit immediately!",
                     *(undefined4 *)local_a18);
            FUN_0001dbec(3, &local_838, 1);
            /* WARNING: Subroutine does not return */
            FUN_0002c508(0xffffffff, 0);
        }
    }
    goto LAB_000133b0;
LAB_00015ec0:
    if (DAT_000686e1 == '\0') {
    LAB_00015ecc:
        ppcVar22 = (char **)FUN_00029278(puVar23);
        if (ppcVar22 == (char **)0x0)
            goto code_r0x00015edc;
    } else {
    LAB_00015ad8:
        if ((((char)*local_a24 != '\0') || (*local_a18 != '\0')) ||
            (6 < DAT_00067858)) {
            snprintf((char *)ppcVar28, 0x800, (char *)local_a30, *puVar23);
            FUN_0001dbec(7, ppcVar28, 0);
        }
    LAB_00015b30:
        if ((*(char *)((int)puVar23 + 0x61) == '\0') && (puVar23[0x19] == 1))
            goto LAB_00015ecc;
    }
    FUN_00031c3c(0);
    puVar35 = (undefined4 *)FUN_0002fe54();
    if (*(int *)(local_a1c + 0x3fc) == 4) {
        puVar35 = (undefined4 *)FUN_0002929c();
    } else if (*(int *)(local_a1c + 0x3fc) == 3) {
        iVar37 = *piVar25;
        pcVar8 = *ppcVar5;
        for (iVar32 = 0; iVar32 < iVar37; iVar32 = iVar32 + 1) {
            iVar33 = *(int *)(pcVar8 + iVar32 * 4);
            if (*(int *)(iVar33 + 0x40) < *(int *)(iVar33 + 0x3c))
                goto LAB_00015d90;
        }
        for (iVar32 = 0; iVar32 < iVar37; iVar32 = iVar32 + 1) {
            *(undefined4 *)(*(int *)(pcVar8 + iVar32 * 4) + 0x40) = 0;
        }
        iVar32 = *(int *)((int)ppcVar6 + -0x48) + 1;
        if (iVar37 <= iVar32) {
            iVar32 = 0;
        }
        *(int *)((int)ppcVar6 + -0x48) = iVar32;
    LAB_00015d90:
        iVar37 = 0;
        while (true) {
            puVar23 = (undefined4 *)*piVar25;
            iVar32 = iVar37 + 1;
            if ((int)puVar23 <= iVar37)
                break;
            iVar37 = *(int *)(*ppcVar5 + *(int *)((int)ppcVar6 + -0x48) * 4);
            iVar33 = *(int *)(iVar37 + 0x40);
            *(int *)(iVar37 + 0x40) = iVar33 + 1;
            if (iVar33 < *(int *)(iVar37 + 0x3c)) {
                if ((*(char *)(iVar37 + 0x61) == '\0') &&
                    (*(int *)(iVar37 + 100) == 1)) {
                    uVar41 = FUN_00029278(iVar37);
                    puVar23 = (undefined4 *)((ulonglong)uVar41 >> 0x20);
                    if ((int)uVar41 == 0)
                        goto LAB_000160a0;
                }
                if ((char)*local_a2c != '\0') {
                    iVar37 = FUN_000293b0(0);
                    *(int *)(iVar37 + 0x40) = *(int *)(iVar37 + 0x40) + -1;
                }
            }
            iVar20 = *(int *)((int)ppcVar6 + -0x48);
            iVar33 = *piVar25;
            *(int *)((int)ppcVar6 + -0x48) = iVar20 + 1;
            iVar37 = iVar32;
            if (iVar33 <= iVar20 + 1) {
                *(undefined4 *)((int)ppcVar6 + -0x48) = 0;
            }
        }
        for (iVar37 = 0; iVar37 < *piVar25; iVar37 = iVar37 + 1) {
            puVar23 = (undefined4 *)FUN_000293b0(iVar37, puVar23);
            if ((*(char *)((int)puVar23 + 0x61) == '\0') &&
                (puVar23[0x19] == 1)) {
                uVar41 = FUN_00029278();
                puVar23 = (undefined4 *)((ulonglong)uVar41 >> 0x20);
                if ((int)uVar41 == 0)
                    goto LAB_000160a0;
            }
        }
    }
    puVar23 = puVar35;
    if (DAT_000686e1 != '\0')
        goto LAB_00015b88;
LAB_00015be0:
    if ((*(char *)((int)puVar23 + 0x61) != '\0') || (puVar23[0x19] != 1))
        goto LAB_00015bf8;
    goto LAB_000160ac;
code_r0x00015edc:
    *(undefined4 *)((int)ppcVar6 + -0x490) = 0;
    ppVar21 = (pthread_mutex_t *)((int)local_a20 + -0xc);
    local_a30 = ppcVar22;
    pthread_mutex_unlock(ppVar21);
    pthread_mutex_lock(ppVar21);
    if (*(int *)((int)ppcVar6 + -0x490) == 1) {
        *(char ***)((int)ppcVar6 + -0x490) = local_a30;
        pthread_mutex_unlock(ppVar21);
        goto LAB_00015a04;
    }
    if (*(char *)(puVar23 + 0xa4) != '\0') {
        FUN_00033768(puVar23, local_a0c);
        if ((DAT_000686e1 != '\0') &&
            ((((char)*local_a24 != '\0' || (*local_a18 != '\0')) ||
              (6 < DAT_00067858)))) {
            local_838 = (code *)0x656e6547;
            local_834._0_1_ = 'r';
            local_834._1_1_ = 'a';
            local_834._2_1_ = 't';
            local_834._3_1_ = 'e';
            iStack_830._0_1_ = 'd';
            iStack_830._1_1_ = ' ';
            iStack_830._2_1_ = 's';
            iStack_830._3_1_ = 't';
            iStack_82c._0_1_ = 'r';
            iStack_82c._1_1_ = 'a';
            iStack_82c._2_1_ = 't';
            iStack_82c._3_1_ = 'u';
            local_828 = (code *)0x6f77206d;
            local_824 = CONCAT13(local_824._3_1_, 0x6b72);
            FUN_0001dbec(7, ppcVar28, 0);
        }
        FUN_0003b220(local_a0c);
        local_a0c = 0;
        pthread_mutex_unlock((pthread_mutex_t *)((int)local_a20 + -0xc));
        goto LAB_00015a04;
    }
    pthread_mutex_unlock(ppVar21);
    iVar37 = local_a0c;
    local_a20 = (code **)*local_a38;
    if (local_a20 == (code **)0x0) {
        if (local_a1c[0x560] == '\0')
            goto LAB_00015a04;
        *(undefined8 *)(local_a0c + 0x178) = 0x4040000000000000;
        iVar32 = local_a0c + 400;
        FUN_000231cc(local_a0c + 0xa0, &DAT_0006a45c, 0x20, "cgminer.c");
        pcVar8 = *ppcVar5;
        *(undefined1 *)(iVar37 + 0x11a) = 1;
        *(code ***)(iVar37 + 0xf4) = local_a20;
        *(undefined4 *)(iVar37 + 0x104) = *(undefined4 *)pcVar8;
        FUN_00020580(iVar32);
        FUN_000234dc(iVar37 + 0x198, iVar32);
        cVar3 = DAT_000686e1;
        *(undefined1 *)(iVar37 + 0x1b8) = 0x42;
        if ((cVar3 == '\0') ||
            ((((char)*local_a24 == '\0' && (*local_a18 == '\0')) &&
              (DAT_00067858 < 7))))
            goto LAB_00016020;
        pcVar8 = "Generated benchmark work";
    } else {
        iVar32 = local_a0c + 400;
        FUN_0002c880(local_a0c);
        pcVar8 = *ppcVar5;
        *(undefined1 *)(iVar37 + 0x11a) = 1;
        *(undefined4 *)(iVar37 + 0x104) = *(undefined4 *)pcVar8;
        FUN_00020580(iVar32);
        FUN_000234dc(iVar37 + 0x198, iVar32);
        *(undefined1 *)(iVar37 + 0x1b8) = 0x42;
        FUN_00028d58(0, iVar37);
        if ((DAT_000686e1 == '\0') ||
            ((((char)*local_a24 == '\0' && (*local_a18 == '\0')) &&
              (DAT_00067858 < 7))))
            goto LAB_00016020;
        pcVar8 = "Generated benchfile work";
    }
    local_838 = *(code **)pcVar8;
    local_834 = *(int *)((int)pcVar8 + 4);
    iStack_830 = *(int *)((int)pcVar8 + 8);
    iStack_82c = *(int *)((int)pcVar8 + 0xc);
    local_828 = *(code **)((int)pcVar8 + 0x10);
    local_824 = *(int *)((int)pcVar8 + 0x14);
    local_820 = CONCAT31(local_820._1_3_, (char)*(int *)((int)pcVar8 + 0x18));
    FUN_0001dbec(7, ppcVar28, 0);
LAB_00016020:
    FUN_0003b220(local_a0c);
    local_a0c = 0;
    goto LAB_00015a04;
LAB_000160a0:
    if (DAT_000686e1 != '\0') {
    LAB_00015b88:
        if ((((char)*local_a24 != '\0') || (*local_a18 != '\0')) ||
            (6 < DAT_00067858)) {
            snprintf((char *)ppcVar28, 0x800, (char *)local_a30, *puVar23);
            FUN_0001dbec(7, ppcVar28, 0);
        }
        goto LAB_00015be0;
    }
LAB_000160ac:
    iVar37 = FUN_00029278(puVar23);
    if (iVar37 == 0) {
        pthread_mutex_unlock((pthread_mutex_t *)((int)local_a20 + -0xc));
        goto LAB_00015c0c;
    }
LAB_00015bf8:
    pthread_mutex_unlock((pthread_mutex_t *)((int)local_a20 + -0xc));
    FUN_000207b4(0xb);
    goto LAB_00015c0c;
}

void entry(undefined4 param_1)

{
    undefined4 in_stack_00000000;

    __libc_start_main(FUN_00012f58, in_stack_00000000, &stack0x00000004,
                      0x4aef9, &DAT_0004af35, param_1);
    /* WARNING: Subroutine does not return */
    abort();
}

/* WARNING: Removing unreachable block (ram,0x00016768) */

void FUN_00016754(void)

{
    __gmon_start__();
    return;
}

/* WARNING: Removing unreachable block (ram,0x0001678c) */
/* WARNING: Removing unreachable block (ram,0x00016796) */

void FUN_00016778(void)

{
    return;
}

/* WARNING: Removing unreachable block (ram,0x000167b8) */
/* WARNING: Removing unreachable block (ram,0x000167c2) */

void FUN_0001679c(void)

{
    return;
}

void _FINI_0(void)

{
    if (DAT_0006859c == '\0') {
        FUN_00016778();
        DAT_0006859c = '\x01';
    }
    return;
}

void FUN_000167e8(int param_1)

{
    undefined4 uVar1;
    undefined4 uVar2;
    char acStack_d0[64];
    char acStack_90[64];
    char acStack_50[68];

    memset(acStack_d0, 0, 0x40);
    memset(acStack_90, 0, 0x40);
    memset(acStack_50, 0, 0x40);
    if (param_1 != 0) {
        uVar1 = FUN_00048c40();
        snprintf(acStack_d0, 0x40, "%s", &DAT_0006a6c8);
        uVar2 = FUN_000491d4(acStack_d0);
        FUN_00049a64(uVar1, "miner_version", uVar2);
        snprintf(acStack_90, 0x40, "%s", &DAT_0006a254);
        uVar2 = FUN_000491d4(acStack_90);
        FUN_00049a64(uVar1, "CompileTime", uVar2);
        snprintf(acStack_50, 0x40, "%s", &DAT_0006a354);
        if (DAT_0007631c != '\0') {
            snprintf(acStack_50, 0x40, "%s", &DAT_0007631c);
        }
        uVar2 = FUN_000491d4(acStack_50);
        FUN_00049a64(uVar1, &DAT_0004b0d0, uVar2);
        FUN_00049a64(param_1, &DAT_0004b0d8, uVar1);
    }
    return;
}

void FUN_00016928(int param_1, int param_2, int param_3, char *param_4)

{
    char *pcVar1;
    undefined4 uVar2;
    undefined4 uVar3;
    undefined4 uVar4;
    char acStack_50[52];

    memset(acStack_50, 0, 0x30);
    if (param_4 != (char *)0x0 && param_1 != 0) {
        uVar2 = FUN_00048fd0();
        uVar3 = FUN_00048c40();
        uVar4 = FUN_000491d4();
        FUN_00049a64(uVar3, "STATUS", uVar4);
        uVar4 = FUN_00049420(DAT_000685a0, DAT_000685a0 >> 0x1f);
        FUN_00049a64(uVar3, &DAT_0004b0e8, uVar4);
        uVar4 = FUN_00049420(param_3, param_3 >> 0x1f);
        FUN_00049a64(uVar3, &DAT_0004b0f0, uVar4);
        pcVar1 = DAT_00072e58;
        if (param_3 != 7) {
            pcVar1 = param_4;
            param_4 = "%s";
        }
        snprintf(acStack_50, 0x30, param_4, pcVar1);
        uVar4 = FUN_000491d4(acStack_50);
        FUN_00049a64(uVar3, &DAT_0004b0f8, uVar4);
        uVar4 = FUN_000491d4(DAT_000682c0);
        FUN_00049a64(uVar3, "Description", uVar4);
        FUN_00049f24(uVar2, uVar3);
        FUN_00049a64(param_1, "STATUS", uVar2);
        if (param_2 == 0) {
            uVar2 = FUN_00049420(1, 0);
            FUN_00049a64(param_1, &DAT_0004b108, uVar2);
            return;
        }
    }
    return;
}

undefined4 FUN_00016ab0(int param_1, int param_2)

{
    undefined4 uVar1;
    undefined4 uVar2;
    undefined4 uVar3;
    char acStack_850[64];
    char acStack_810[2048];

    memset(acStack_850, 0, 0x40);
    if (param_1 == 0 || param_2 == 0) {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (2 < DAT_00067858)) {
            snprintf(acStack_810, 0x800, "%s: input bad api param\n",
                     "get_version_old");
            FUN_0001dbec(3, acStack_810, 0);
        }
        return 0x80000002;
    }
    FUN_00016928(param_1, 1, 0x16, *(undefined4 *)(param_2 + 8));
    uVar1 = FUN_00048fd0();
    uVar2 = FUN_00048c40();
    uVar3 = FUN_000491d4("1.0.0");
    FUN_00049a64(uVar2, "BMMiner", uVar3);
    uVar3 = FUN_000491d4(&DAT_0004b130);
    FUN_00049a64(uVar2, &DAT_0004b134, uVar3);
    uVar3 = FUN_000491d4(&DAT_0006a6c8);
    FUN_00049a64(uVar2, "Miner", uVar3);
    uVar3 = FUN_000491d4(&DAT_0006a254);
    FUN_00049a64(uVar2, "CompileTime", uVar3);
    snprintf(acStack_850, 0x40, "%s", &DAT_0006a354);
    if (DAT_0007631c != '\0') {
        snprintf(acStack_850, 0x40, "%s", &DAT_0007631c);
    }
    uVar3 = FUN_000491d4(acStack_850);
    FUN_00049a64(uVar2, &DAT_0004b140, uVar3);
    FUN_00049f24(uVar1, uVar2);
    FUN_00049a64(param_1, "VERSION", uVar1);
    uVar1 = FUN_00049420(1, 0);
    FUN_00049a64(param_1, &DAT_0004b108, uVar1);
    return 0;
}

void FUN_00016cac(int param_1, undefined4 *param_2)

{
    undefined4 uVar1;
    undefined4 uVar2;
    char local_30[16];
    undefined4 local_20;
    undefined4 local_1c;
    undefined4 local_18;
    undefined4 local_14;

    local_30[4] = '\0';
    local_30[5] = '\0';
    local_30[6] = '\0';
    local_30[7] = '\0';
    local_30[0] = '\0';
    local_30[1] = '\0';
    local_30[2] = '\0';
    local_30[3] = '\0';
    local_30[8] = '\0';
    local_30[9] = '\0';
    local_30[10] = '\0';
    local_30[0xb] = '\0';
    local_30[0xc] = '\0';
    local_30[0xd] = '\0';
    local_30[0xe] = '\0';
    local_30[0xf] = '\0';
    local_20 = 0;
    local_1c = 0;
    local_18 = 0;
    local_14 = 0;
    if (param_2 == (undefined4 *)0x0 || param_1 == 0) {
        return;
    }
    uVar1 = FUN_00048c40();
    uVar2 = FUN_000491d4("S");
    FUN_00049a64(uVar1, "STATUS", uVar2);
    uVar2 = FUN_00049420(DAT_000685a0, DAT_000685a0 >> 0x1f);
    FUN_00049a64(uVar1, &DAT_0004b150, uVar2);
    snprintf(local_30, 0x10, "%s", *param_2);
    uVar2 = FUN_000491d4(local_30);
    FUN_00049a64(uVar1, &DAT_0004b0f8, uVar2);
    snprintf((char *)&local_20, 0x10, "%s", param_2[1]);
    uVar2 = FUN_000491d4(&local_20);
    FUN_00049a64(uVar1, "api_version", uVar2);
    FUN_00049a64(param_1, "STATUS", uVar1);
    return;
}

/* WARNING: Globals starting with '_' overlap smaller symbols at the same
 * address */

undefined4 FUN_00016dc8(int param_1, int param_2)

{
    undefined4 uVar1;
    int iVar2;
    undefined4 uVar3;
    code *pcVar4;
    int iVar5;
    undefined2 local_824[2];
    char acStack_820[2052];

    local_824[0] = 0;
    if (param_2 == 0 || param_1 == 0) {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (2 < DAT_00067858)) {
            snprintf(acStack_820, 0x800, "%s: input bad api param\n",
                     "get_stats");
            FUN_0001dbec(3, acStack_820, 0);
        }
        return 0x80000002;
    }
    FUN_00042848(local_824, 1);
    FUN_00016cac(param_1, param_2);
    FUN_000167e8(param_1);
    uVar1 = FUN_00048fd0();
    iVar2 = 0;
    if (0 < DAT_00074fd8) {
        do {
            iVar5 = iVar2 + 1;
            iVar2 = FUN_0002e2cc(iVar2);
            if (((iVar2 != 0) && (*(int *)(iVar2 + 4) != 0)) &&
                (pcVar4 = *(code **)(*(int *)(iVar2 + 4) + 0x1c),
                 pcVar4 != (code *)0x0)) {
                uVar3 = (*pcVar4)();
                FUN_00049f24(uVar1, uVar3);
            }
            iVar2 = iVar5;
        } while (iVar5 < DAT_00074fd8);
    }
    if ((DAT_000686e1 != '\0') &&
        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
          (6 < DAT_00067858)))) {
        snprintf(acStack_820, 0x800,
                 "total_mhashes_done = %lf\n new_total_mhashes_done = %lf\n "
                 "total_secs = %lf\n, new_total_secs = %lf",
                 &DAT_00072d80, _DAT_00072d80, DAT_00072d84, DAT_00072ec8,
                 DAT_00072ecc, _DAT_000681c0, DAT_000681c4, DAT_000681d8,
                 DAT_000681dc);
        FUN_0001dbec(7, acStack_820, 0);
    }
    FUN_00049a64(param_1, "STATS", uVar1);
    return 0;
}

undefined4 FUN_00016fd4(int param_1, int param_2)

{
    undefined4 uVar1;
    time_t tVar2;
    undefined4 uVar3;
    undefined4 uVar4;
    int iVar5;
    uint uVar6;
    uint uVar7;
    uint uVar8;
    int iVar9;
    int iVar10;
    char local_954[8];
    undefined4 local_94c;
    char local_948[8];
    uint local_940[6];
    char acStack_928[128];
    char acStack_8a8[128];
    char acStack_828[2052];

    memset(acStack_928, 0, 0x80);
    memset(acStack_8a8, 0, 0x80);
    local_948[0] = '\0';
    local_948[1] = '\0';
    local_948[2] = '\0';
    local_948[3] = '\0';
    local_94c._0_1_ = '\0';
    local_94c._1_1_ = '\0';
    local_94c._2_1_ = '\0';
    local_94c._3_1_ = '\0';
    local_948[4] = '\0';
    local_948[5] = '\0';
    local_948[6] = '\0';
    local_948[7] = '\0';
    local_954[0] = '\0';
    local_954[1] = '\0';
    local_954[2] = '\0';
    local_954[3] = '\0';
    local_940[0] = 0;
    local_954[4] = '\0';
    local_954[5] = '\0';
    local_954[6] = '\0';
    local_954[7] = '\0';
    local_940[1] = 0;
    local_940[2] = 0;
    local_940[3] = 0;
    local_940[4] = 0;
    local_940[5] = 0;
    if (param_1 == 0 || param_2 == 0) {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (2 < DAT_00067858)) {
            snprintf(acStack_828, 0x800, "%s: input bad api param\n",
                     "get_pools");
            FUN_0001dbec(3, acStack_828, 0);
        }
        return 0x80000002;
    }
    FUN_00016cac(param_1, param_2);
    FUN_000167e8(param_1);
    uVar1 = FUN_00048fd0();
    if (0 < DAT_00072e58) {
        iVar10 = 0;
        uVar8 = 0;
        do {
            iVar9 = *(int *)(DAT_00072efc + uVar8 * 4);
            if (iVar9 != 0) {
                uVar3 = FUN_00048c40();
                uVar4 = FUN_00049420(uVar8, iVar10);
                FUN_00049a64(uVar3, "index", uVar4);
                memset(acStack_928, 0, 0x80);
                snprintf(acStack_928, 0x80, "%s",
                         *(undefined4 *)(iVar9 + 0xa4));
                uVar4 = FUN_000491d4(acStack_928);
                FUN_00049a64(uVar3, &DAT_0004b1d4, uVar4);
                memset(acStack_8a8, 0, 0x80);
                snprintf(acStack_8a8, 0x80, "%s",
                         *(undefined4 *)(iVar9 + 0xac));
                uVar4 = FUN_000491d4(acStack_8a8);
                FUN_00049a64(uVar3, &DAT_0004b1d8, uVar4);
                iVar5 = *(int *)(iVar9 + 100);
                local_948[4] = '\0';
                local_948[5] = '\0';
                local_948[6] = '\0';
                local_948[7] = '\0';
                if (iVar5 == 1) {
                    if (*(char *)(iVar9 + 0x61) == '\0') {
                        local_94c._0_1_ = 'A';
                        local_94c._1_1_ = 'l';
                        local_94c._2_1_ = 'i';
                        local_94c._3_1_ = 'v';
                        local_948[0] = 'e';
                        local_948[1] = '\0';
                        local_948[2] = '\0';
                        local_948[3] = '\0';
                    } else {
                        local_94c._0_1_ = 'D';
                        local_94c._1_1_ = 'e';
                        local_94c._2_1_ = 'a';
                        local_94c._3_1_ = 'd';
                        local_948[0] = '\0';
                        local_948[1] = '\0';
                        local_948[2] = '\0';
                        local_948[3] = '\0';
                    }
                } else if (iVar5 == 0) {
                    local_94c._0_1_ = 'D';
                    local_94c._1_1_ = 'i';
                    local_94c._2_1_ = 's';
                    local_94c._3_1_ = 'a';
                    builtin_strncpy(local_948, "bled", 5);
                    local_948[5] = '\0';
                    local_948[6] = '\0';
                    local_948[7] = '\0';
                } else if (iVar5 == 2) {
                    local_94c._0_1_ = 'R';
                    local_94c._1_1_ = 'e';
                    local_94c._2_1_ = 'j';
                    local_94c._3_1_ = 'e';
                    builtin_strncpy(local_948, "cting", 6);
                    local_948[6] = '\0';
                    local_948[7] = '\0';
                } else {
                    local_94c._0_1_ = 'U';
                    local_94c._1_1_ = 'n';
                    local_94c._2_1_ = 'k';
                    local_94c._3_1_ = 'n';
                    local_948[0] = 'o';
                    local_948[1] = 'w';
                    local_948[2] = 'n';
                    local_948[3] = '\0';
                }
                uVar4 = FUN_000491d4(&local_94c);
                FUN_00049a64(uVar3, "status", uVar4);
                uVar4 = FUN_00049420(*(int *)(iVar9 + 4),
                                     *(int *)(iVar9 + 4) >> 0x1f);
                FUN_00049a64(uVar3, "priority", uVar4);
                uVar4 = FUN_00049420(*(undefined4 *)(iVar9 + 0x74), 0);
                FUN_00049a64(uVar3, "getworks", uVar4);
                uVar4 = FUN_00049420(*(undefined4 *)(iVar9 + 8),
                                     *(undefined4 *)(iVar9 + 0xc));
                FUN_00049a64(uVar3, "accepted", uVar4);
                uVar4 = FUN_00049420(*(undefined4 *)(iVar9 + 0x10),
                                     *(undefined4 *)(iVar9 + 0x14));
                FUN_00049a64(uVar3, "rejected", uVar4);
                uVar4 = FUN_00049420(*(undefined4 *)(iVar9 + 0x7c), 0);
                FUN_00049a64(uVar3, "discarded", uVar4);
                uVar4 = FUN_00049420(*(undefined4 *)(iVar9 + 0x78), 0);
                FUN_00049a64(uVar3, "stale", uVar4);
                local_954[0] = '\0';
                local_954[1] = '\0';
                local_954[2] = '\0';
                local_954[3] = '\0';
                local_954[4] = '\0';
                local_954[5] = '\0';
                local_954[6] = '\0';
                local_954[7] = '\0';
                snprintf(local_954, 8, "%s", iVar9 + 0x30);
                uVar4 = FUN_000491d4(local_954);
                FUN_00049a64(uVar3, &DAT_0004b248, uVar4);
                uVar4 = FUN_00049420(*(undefined4 *)(iVar9 + 0x28),
                                     *(undefined4 *)(iVar9 + 0x2c));
                FUN_00049a64(uVar3, "diff1", uVar4);
                FUN_0004ad7c(*(undefined4 *)(iVar9 + 0x48),
                             *(undefined4 *)(iVar9 + 0x4c));
                uVar4 = FUN_00049420();
                FUN_00049a64(uVar3, &DAT_0004b258, uVar4);
                FUN_0004ad7c(*(undefined4 *)(iVar9 + 0x50),
                             *(undefined4 *)(iVar9 + 0x54));
                uVar4 = FUN_00049420();
                FUN_00049a64(uVar3, "diffr", uVar4);
                FUN_0004ad7c(*(undefined4 *)(iVar9 + 0x58),
                             *(undefined4 *)(iVar9 + 0x5c));
                uVar4 = FUN_00049420();
                FUN_00049a64(uVar3, "diffs", uVar4);
                FUN_0004ad7c(*(undefined4 *)(iVar9 + 0x168),
                             *(undefined4 *)(iVar9 + 0x16c));
                uVar4 = FUN_00049420();
                FUN_00049a64(uVar3, "lsdiff", uVar4);
                uVar6 = *(uint *)(iVar9 + 0x160);
                local_940[0] = 0;
                local_940[1] = 0;
                local_940[2] = 0;
                uVar7 = uVar6;
                if ((int)uVar6 < 1) {
                    uVar7 = 0x30;
                }
                local_940[3] = 0;
                local_940[4] = 0;
                local_940[5] = 0;
                if ((int)uVar6 < 1) {
                    local_940[0] = uVar7 & 0xffff;
                } else {
                    tVar2 = time((time_t *)0x0);
                    uVar6 = tVar2 - *(int *)(iVar9 + 0x160);
                    uVar6 = uVar6 & ~((int)uVar6 >> 0x1f);
                    uVar7 = uVar6 % 0xe10;
                    snprintf((char *)local_940, 0x18, "%d:%02d:%02d",
                             uVar6 / 0xe10, uVar7 / 0x3c, uVar7 % 0x3c);
                }
                uVar4 = FUN_000491d4(local_940);
                FUN_00049a64(uVar3, "lstime", uVar4);
                FUN_00049f24(uVar1, uVar3);
            }
            iVar9 = uVar8 + 1;
            iVar10 = iVar10 + (uint)(0xfffffffe < uVar8);
            uVar8 = uVar8 + 1;
        } while (iVar9 < DAT_00072e58);
    }
    FUN_00049a64(param_1, "POOLS", uVar1);
    return 0;
}

undefined4 FUN_00017540(int param_1, int param_2)

{
    undefined4 uVar1;
    undefined4 uVar2;
    undefined *puVar3;
    time_t tVar4;
    undefined1 *puVar5;
    int iVar6;
    uint uVar7;
    uint uVar8;
    undefined4 uVar9;
    int iVar10;
    int iVar11;
    uint uVar12;
    double dVar13;
    char local_964[8];
    undefined4 local_95c;
    char local_958[4];
    undefined4 local_954;
    uint local_950[6];
    char acStack_938[128];
    char acStack_8b8[128];
    char acStack_838[2052];

    memset(acStack_938, 0, 0x80);
    memset(acStack_8b8, 0, 0x80);
    local_958[0] = '\0';
    local_958[1] = '\0';
    local_958[2] = '\0';
    local_958[3] = '\0';
    local_95c._0_1_ = '\0';
    local_95c._1_1_ = '\0';
    local_95c._2_1_ = '\0';
    local_95c._3_1_ = '\0';
    local_954 = 0;
    local_964[0] = '\0';
    local_964[1] = '\0';
    local_964[2] = '\0';
    local_964[3] = '\0';
    local_950[0] = 0;
    local_964[4] = '\0';
    local_964[5] = '\0';
    local_964[6] = '\0';
    local_964[7] = '\0';
    local_950[1] = 0;
    local_950[2] = 0;
    local_950[3] = 0;
    local_950[4] = 0;
    local_950[5] = 0;
    if (param_1 == 0 || param_2 == 0) {
        if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
            (DAT_00067858 < 3)) {
            uVar9 = 0x80000002;
        } else {
            uVar9 = 0x80000002;
            snprintf(acStack_838, 0x800, "%s: input bad api param\n",
                     "get_pools_old");
            FUN_0001dbec(3, acStack_838, 0);
        }
    } else if (DAT_00072e58 == 0) {
        FUN_00016928(param_1, 0, 8, "No pools");
        uVar9 = 0;
    } else {
        FUN_00016928(param_1, 1, 7, *(undefined4 *)(param_2 + 8));
        uVar1 = FUN_00048fd0();
        if (0 < DAT_00072e58) {
            iVar11 = 0;
            uVar12 = 0;
            do {
                iVar10 = *(int *)(DAT_00072efc + uVar12 * 4);
                if (*(char *)(iVar10 + 0x69) == '\0') {
                    uVar9 = FUN_00048c40();
                    uVar2 = FUN_00049420(uVar12, iVar11);
                    FUN_00049a64(uVar9, &DAT_0004b2a4, uVar2);
                    memset(acStack_938, 0, 0x80);
                    snprintf(acStack_938, 0x80, "%s",
                             *(undefined4 *)(iVar10 + 0xa4));
                    uVar2 = FUN_000491d4(acStack_938);
                    FUN_00049a64(uVar9, "URL", uVar2);
                    iVar6 = *(int *)(iVar10 + 100);
                    local_954 = 0;
                    if (iVar6 == 1) {
                        if (*(char *)(iVar10 + 0x61) == '\0') {
                            local_95c._0_1_ = 'A';
                            local_95c._1_1_ = 'l';
                            local_95c._2_1_ = 'i';
                            local_95c._3_1_ = 'v';
                            local_958[0] = 'e';
                            local_958[1] = '\0';
                            local_958[2] = '\0';
                            local_958[3] = '\0';
                        } else {
                            local_95c._0_1_ = 'D';
                            local_95c._1_1_ = 'e';
                            local_95c._2_1_ = 'e';
                            local_95c._3_1_ = 'd';
                            local_958[0] = '\0';
                            local_958[1] = '\0';
                            local_958[2] = '\0';
                            local_958[3] = '\0';
                        }
                    } else if (iVar6 == 0) {
                        local_95c._0_1_ = 'D';
                        local_95c._1_1_ = 'i';
                        local_95c._2_1_ = 's';
                        local_95c._3_1_ = 'a';
                        builtin_strncpy(local_958, "bled", 4);
                        local_954 = 0;
                    } else if (iVar6 == 2) {
                        local_95c._0_1_ = 'R';
                        local_95c._1_1_ = 'e';
                        local_95c._2_1_ = 'j';
                        local_95c._3_1_ = 'e';
                        local_958[0] = 'c';
                        local_958[1] = 't';
                        local_958[2] = 'i';
                        local_958[3] = 'n';
                        local_954 = 0x67;
                    } else {
                        local_95c._0_1_ = 'U';
                        local_95c._1_1_ = 'n';
                        local_95c._2_1_ = 'k';
                        local_95c._3_1_ = 'n';
                        builtin_strncpy(local_958, "own", 4);
                    }
                    uVar2 = FUN_000491d4(&local_95c);
                    FUN_00049a64(uVar9, "Status", uVar2);
                    uVar2 = FUN_00049420(*(int *)(iVar10 + 4),
                                         *(int *)(iVar10 + 4) >> 0x1f);
                    FUN_00049a64(uVar9, "Priority", uVar2);
                    uVar2 = FUN_00049420(*(int *)(iVar10 + 0x38),
                                         *(int *)(iVar10 + 0x38) >> 0x1f);
                    FUN_00049a64(uVar9, "Quota", uVar2);
                    if (*(int *)(iVar10 + 0x6c) == 0) {
                        puVar3 = &DAT_0004b2e0;
                    } else {
                        puVar3 = &DAT_0004b2d0;
                    }
                    uVar2 = FUN_000491d4(puVar3);
                    FUN_00049a64(uVar9, "Long Poll", uVar2);
                    uVar2 = FUN_00049420(*(undefined4 *)(iVar10 + 0x74), 0);
                    FUN_00049a64(uVar9, "Getworks", uVar2);
                    uVar2 = FUN_00049420(*(undefined4 *)(iVar10 + 8),
                                         *(undefined4 *)(iVar10 + 0xc));
                    FUN_00049a64(uVar9, "Accepted", uVar2);
                    uVar2 = FUN_00049420(*(undefined4 *)(iVar10 + 0x10),
                                         *(undefined4 *)(iVar10 + 0x14));
                    FUN_00049a64(uVar9, "Rejected", uVar2);
                    uVar2 = FUN_00049420(*(undefined4 *)(iVar10 + 0x7c), 0);
                    FUN_00049a64(uVar9, "Discarded", uVar2);
                    uVar2 = FUN_00049420(*(undefined4 *)(iVar10 + 0x78), 0);
                    FUN_00049a64(uVar9, "Stale", uVar2);
                    uVar2 = FUN_00049420(*(undefined4 *)(iVar10 + 0x80), 0);
                    FUN_00049a64(uVar9, "Get Failures", uVar2);
                    uVar2 = FUN_00049420(*(undefined4 *)(iVar10 + 0x84), 0);
                    FUN_00049a64(uVar9, "Remote Failures", uVar2);
                    memset(acStack_8b8, 0, 0x80);
                    snprintf(acStack_8b8, 0x80, "%s",
                             *(undefined4 *)(iVar10 + 0xac));
                    uVar2 = FUN_000491d4(acStack_8b8);
                    FUN_00049a64(uVar9, &DAT_0004b33c, uVar2);
                    uVar7 = *(uint *)(iVar10 + 0x160);
                    local_950[0] = 0;
                    local_950[1] = 0;
                    local_950[2] = 0;
                    uVar8 = uVar7;
                    if ((int)uVar7 < 1) {
                        uVar8 = 0x30;
                    }
                    local_950[3] = 0;
                    local_950[4] = 0;
                    local_950[5] = 0;
                    if ((int)uVar7 < 1) {
                        local_950[0] = uVar8 & 0xffff;
                    } else {
                        tVar4 = time((time_t *)0x0);
                        uVar7 = tVar4 - *(int *)(iVar10 + 0x160);
                        uVar7 = uVar7 & ~((int)uVar7 >> 0x1f);
                        uVar8 = uVar7 % 0xe10;
                        snprintf((char *)local_950, 0x18, "%d:%02d:%02d",
                                 uVar7 / 0xe10, uVar8 / 0x3c, uVar8 % 0x3c);
                    }
                    uVar2 = FUN_000491d4(local_950);
                    FUN_00049a64(uVar9, "Last Share Time", uVar2);
                    local_964[0] = '\0';
                    local_964[1] = '\0';
                    local_964[2] = '\0';
                    local_964[3] = '\0';
                    local_964[4] = '\0';
                    local_964[5] = '\0';
                    local_964[6] = '\0';
                    local_964[7] = '\0';
                    snprintf(local_964, 8, "%s", iVar10 + 0x30);
                    uVar2 = FUN_000491d4(local_964);
                    FUN_00049a64(uVar9, &DAT_0004b354, uVar2);
                    uVar2 = FUN_00049420(*(undefined4 *)(iVar10 + 0x28),
                                         *(undefined4 *)(iVar10 + 0x2c));
                    FUN_00049a64(uVar9, "Diff1 Shares", uVar2);
                    if (*(int *)(iVar10 + 0xb8) == 0) {
                        uVar2 = FUN_000491d4(&DAT_0004d488);
                        FUN_00049a64(uVar9, "Proxy Type", uVar2);
                        puVar5 = &DAT_0004d488;
                    } else {
                        FUN_0001f8b4(*(undefined4 *)(iVar10 + 0xb4));
                        uVar2 = FUN_000491d4();
                        FUN_00049a64(uVar9, "Proxy Type", uVar2);
                        puVar5 = *(undefined1 **)(iVar10 + 0xb8);
                    }
                    uVar2 = FUN_000491d4(puVar5);
                    FUN_00049a64(uVar9, "Proxy", uVar2);
                    dVar13 = *(double *)(iVar10 + 0x48) * 100.0;
                    FUN_0004ad7c(SUB84(dVar13, 0),
                                 (int)((ulonglong)dVar13 >> 0x20));
                    dVar13 = (double)FUN_0004ace4();
                    uVar2 = FUN_000494a4(SUB84(dVar13 / 100.0, 0));
                    FUN_00049a64(uVar9, "Difficulty Accepted", uVar2);
                    dVar13 = *(double *)(iVar10 + 0x50) * 100.0;
                    FUN_0004ad7c(SUB84(dVar13, 0),
                                 (int)((ulonglong)dVar13 >> 0x20));
                    dVar13 = (double)FUN_0004ace4();
                    uVar2 = FUN_000494a4(SUB84(dVar13 / 100.0, 0));
                    FUN_00049a64(uVar9, "Difficulty Rejected", uVar2);
                    dVar13 = *(double *)(iVar10 + 0x58) * 100.0;
                    FUN_0004ad7c(SUB84(dVar13, 0),
                                 (int)((ulonglong)dVar13 >> 0x20));
                    dVar13 = (double)FUN_0004ace4();
                    uVar2 = FUN_000494a4(SUB84(dVar13 / 100.0, 0));
                    FUN_00049a64(uVar9, "Difficulty Stale", uVar2);
                    dVar13 = *(double *)(iVar10 + 0x168) * 100.0;
                    FUN_0004ad7c(SUB84(dVar13, 0),
                                 (int)((ulonglong)dVar13 >> 0x20));
                    dVar13 = (double)FUN_0004ace4();
                    uVar2 = FUN_000494a4(SUB84(dVar13 / 100.0, 0));
                    FUN_00049a64(uVar9, "Last Share Difficulty", uVar2);
                    if (*(char *)(iVar10 + 0x290) == '\0') {
                        uVar2 = FUN_000495e4();
                    } else {
                        uVar2 = FUN_000495d8();
                    }
                    FUN_00049a64(uVar9, "Has Stratum", uVar2);
                    if (*(char *)(iVar10 + 0x291) == '\0') {
                        uVar2 = FUN_000495e4();
                    } else {
                        uVar2 = FUN_000495d8();
                    }
                    FUN_00049a64(uVar9, "Stratum Active", uVar2);
                    if (*(char *)(iVar10 + 0x291) == '\0') {
                        puVar5 = &DAT_0004d488;
                    } else {
                        puVar5 = *(undefined1 **)(iVar10 + 0x240);
                    }
                    uVar2 = FUN_000491d4(puVar5);
                    FUN_00049a64(uVar9, "Stratum URL", uVar2);
                    if (*(char *)(iVar10 + 0x2f0) == '\0') {
                        uVar2 = FUN_000495e4();
                    } else {
                        uVar2 = FUN_000495d8();
                    }
                    FUN_00049a64(uVar9, "Has GBT", uVar2);
                    uVar8 = *(uint *)(iVar10 + 0x170);
                    iVar6 = *(int *)(iVar10 + 0x174) * 3 +
                            (uint)CARRY4(uVar8, uVar8) +
                            (uint)CARRY4(uVar8 * 2, uVar8);
                    dVar13 = (double)FUN_0004ace4(
                        uVar8 * 100, iVar6 +
                                         (iVar6 * 0x20 | uVar8 * 3 >> 0x1b) +
                                         (uint)CARRY4(uVar8 * 3, uVar8 * 0x60) +
                                         *(int *)(iVar10 + 0x174) +
                                         (uint)CARRY4(uVar8 * 99, uVar8));
                    uVar2 = FUN_000494a4(SUB84(dVar13 / 100.0, 0));
                    FUN_00049a64(uVar9, "Best Share", uVar2);
                    dVar13 = *(double *)(iVar10 + 0x50) +
                             *(double *)(iVar10 + 0x48) +
                             *(double *)(iVar10 + 0x58);
                    uVar2 = 0;
                    if (dVar13 != 0.0) {
                        dVar13 = (*(double *)(iVar10 + 0x50) / dVar13) * 100.0;
                        FUN_0004ad7c(SUB84(dVar13, 0),
                                     (int)((ulonglong)dVar13 >> 0x20));
                        dVar13 = (double)FUN_0004ace4();
                        uVar2 = SUB84(dVar13 / 100.0, 0);
                    }
                    uVar2 = FUN_000494a4(uVar2);
                    FUN_00049a64(uVar9, "Pool Rejected%", uVar2);
                    dVar13 = *(double *)(iVar10 + 0x48) +
                             *(double *)(iVar10 + 0x50) +
                             *(double *)(iVar10 + 0x58);
                    uVar2 = 0;
                    if (dVar13 != 0.0) {
                        dVar13 = (*(double *)(iVar10 + 0x58) / dVar13) * 100.0;
                        FUN_0004ad7c(SUB84(dVar13, 0),
                                     (int)((ulonglong)dVar13 >> 0x20));
                        dVar13 = (double)FUN_0004ace4();
                        uVar2 = SUB84(dVar13 / 100.0, 0);
                    }
                    uVar2 = FUN_000494a4(uVar2);
                    FUN_00049a64(uVar9, "Pool Stale%%", uVar2);
                    FUN_00049f24(uVar1, uVar9);
                }
                iVar10 = uVar12 + 1;
                iVar11 = iVar11 + (uint)(0xfffffffe < uVar12);
                uVar12 = uVar12 + 1;
            } while (iVar10 < DAT_00072e58);
        }
        uVar9 = 0;
        FUN_00049a64(param_1, "POOLS", uVar1);
        uVar1 = FUN_00049420(1, 0);
        FUN_00049a64(param_1, &DAT_0004b108, uVar1);
    }
    return uVar9;
}

undefined4 FUN_00017e44(void)

{
    int iVar1;
    undefined4 uVar2;
    undefined4 local_818;
    undefined2 local_814;
    char acStack_810[2052];

    if ((DAT_000686e1 != '\0') &&
        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
          (6 < DAT_00067858)))) {
        snprintf(acStack_810, 0x800,
                 "<<<<<<<<<<<<<<<<<<<<exec %s start>>>>>>>>>>>>>>>>",
                 "enter_sleep");
        FUN_0001dbec(7, acStack_810, 0);
    }
    iVar1 = strcmp((char *)&DAT_000685a4, "127.0.0.1");
    if (iVar1 == 0) {
        local_818 = 0x65656c73;
        local_814 = 0x70;
        FUN_00042848(&local_818, 5);
        uVar2 = 0;
        if ((DAT_000686e1 != '\0') &&
            (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
              (6 < DAT_00067858)))) {
            snprintf(acStack_810, 0x800,
                     "<<<<<<<<<<<<<<<<<<<<exec %s end>>>>>>>>>>>>>>>>>>",
                     "enter_sleep");
            FUN_0001dbec(7, acStack_810, 0);
        }
    } else {
        uVar2 = 0x80000005;
    }
    return uVar2;
}

undefined4 FUN_00017f98(int param_1, int param_2)

{
    undefined4 uVar1;
    FILE *__stream;
    undefined4 uVar2;
    undefined4 uVar3;
    char *pcVar4;
    undefined4 local_b44;
    undefined4 local_b40;
    undefined2 local_b3c;
    undefined4 local_b38;
    undefined4 local_b34;
    undefined4 local_b30;
    undefined3 uStack_b2c;
    undefined1 auStack_b28[128];
    undefined1 auStack_aa8[128];
    char acStack_a28[512];
    char acStack_828[2052];

    local_b40 = 0;
    local_b3c = 0;
    local_b44 = 0;
    memset(auStack_b28, 0, 0x80);
    memset(auStack_aa8, 0, 0x80);
    local_b38 = 0;
    local_b34 = 0;
    local_b30 = 0;
    uStack_b2c = 0;
    memset(acStack_a28, 0, 0x200);
    if (param_1 == 0 || param_2 == 0) {
        if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
            (DAT_00067858 < 3)) {
            uVar1 = 0x80000002;
        } else {
            snprintf(acStack_828, 0x800, "%s: input bad api param\n",
                     "get_warning");
            FUN_0001dbec(3, acStack_828, 0);
            uVar1 = 0x80000002;
        }
    } else {
        FUN_00016cac(param_1, param_2);
        FUN_000167e8(param_1);
        __stream = fopen64("/tmp/warning.log", "r");
        if (__stream != (FILE *)0x0) {
            uVar1 = FUN_00048fd0();
            while (true) {
                pcVar4 = fgets(acStack_a28, 0x200, __stream);
                if (pcVar4 == (char *)0x0)
                    break;
                local_b44 = 0;
                local_b40 = 0;
                local_b3c = 0;
                memset(auStack_b28, 0, 0x80);
                memset(auStack_aa8, 0, 0x80);
                local_b38 = 0;
                local_b34 = 0;
                local_b30 = 0;
                uStack_b2c = 0;
                sscanf(acStack_a28, "%[^;]; %[^;]; %[^;]; %s", &local_b44,
                       auStack_b28, auStack_aa8, &local_b38);
                memset(acStack_a28, 0, 0x200);
                uVar2 = FUN_00048c40();
                uVar3 = FUN_000491d4(&local_b44);
                FUN_00049a64(uVar2, "code", uVar3);
                uVar3 = FUN_000491d4(auStack_b28);
                FUN_00049a64(uVar2, "cause", uVar3);
                uVar3 = FUN_000491d4(auStack_aa8);
                FUN_00049a64(uVar2, "suggestion", uVar3);
                uVar3 = FUN_000491d4(&local_b38);
                FUN_00049a64(uVar2, "timestamp", uVar3);
                FUN_00049f24(uVar1, uVar2);
            }
            fclose(__stream);
            FUN_00049a64(param_1, "WARNING", uVar1);
            return 0;
        }
        uVar1 = 0x80000001;
    }
    return uVar1;
}

void FUN_00018228(int *param_1)

{
    DAT_000685b4 = 1;
    if (*param_1 == -1) {
        return;
    }
    shutdown(*param_1, 2);
    close(*param_1);
    *param_1 = -1;
    return;
}

size_t FUN_0001826c(int param_1, char *param_2, uint param_3)

{
    size_t sVar1;
    int iVar2;
    undefined4 uVar3;
    char *pcVar4;
    int iVar5;
    int *piVar6;
    undefined4 local_94;
    undefined4 local_90;
    undefined4 local_8c;
    undefined4 local_88;
    char local_84[4];
    char acStack_80[4];
    undefined2 local_7c;

    memset(local_84, 0, 100);
    if ((param_1 == 0) || (2 < param_3)) {
        sVar1 = 0x80000002;
    } else {
        iVar5 = 0;
        sVar1 = strlen(param_2);
        local_90 = 0;
        local_94 = 0;
        local_8c = 0;
        local_88 = 0;
        if (sVar1 - 1 < 0x10) {
            strncpy((char *)&local_94, param_2, sVar1);
            pcVar4 = DAT_00067320;
            if (param_3 != 0) {
                while (true) {
                    if (pcVar4 == (char *)0x0) {
                        sVar1 =
                            FUN_00016928(param_1, 0, 0xe, "Invalid command");
                        return sVar1;
                    }
                    iVar2 = strcmp((char *)&local_94, pcVar4);
                    if (iVar2 == 0)
                        break;
                    iVar5 = iVar5 + 1;
                    pcVar4 = (&DAT_00067320)[iVar5 * 4];
                }
                sVar1 = (*(code *)(&DAT_0006732c)[iVar5 * 4])(param_1);
                return sVar1;
            }
            if (DAT_00067380 != (char *)0x0) {
                piVar6 = (int *)&DAT_00067380;
                iVar5 = 0;
                pcVar4 = DAT_00067380;
                do {
                    iVar2 = strcmp((char *)&local_94, pcVar4);
                    if (iVar2 == 0) {
                        sVar1 = (**(code **)(&DAT_00067388 + iVar5 * 0xc))(
                            param_1, &DAT_00067380 + iVar5 * 3);
                        if (-1 < (int)sVar1) {
                            return sVar1;
                        }
                        if (sVar1 != 0x80000002)
                            goto LAB_0001839c;
                        goto LAB_000183fc;
                    }
                    piVar6 = piVar6 + 3;
                    pcVar4 = (char *)*piVar6;
                    iVar5 = iVar5 + 1;
                } while (pcVar4 != (char *)0x0);
            }
            snprintf(local_84, 100, "not support (%s)", param_2);
        } else {
            if (param_3 != 0) {
                return sVar1;
            }
        LAB_000183fc:
            local_84[0] = 'b';
            local_84[1] = 'a';
            local_84[2] = 'd';
            local_84[3] = ' ';
            acStack_80[0] = 'p';
            acStack_80[1] = 'a';
            acStack_80[2] = 'r';
            acStack_80[3] = 'a';
            local_7c = 0x6d;
        }
    LAB_0001839c:
        uVar3 = FUN_000491d4(local_84);
        sVar1 = FUN_00049a64(param_1, "error_message", uVar3);
    }
    return sVar1;
}

void FUN_00018418(char *param_1, int *param_2)

{
    undefined4 uVar1;
    int iVar2;
    char local_110[4];
    ushort local_10c;

    memset(local_110, 0, 0x100);
    if (param_2 != (int *)0x0) {
        iVar2 = *param_2;
        if (iVar2 == 6) {
            builtin_strncpy(local_110, "fals", 4);
            local_10c = 0x65;
        } else if (iVar2 == 5) {
            local_110[0] = 't';
            local_110[1] = 'r';
            local_110[2] = 'u';
            local_110[3] = 'e';
            local_10c = local_10c & 0xff00;
        } else if (iVar2 == 3) {
            FUN_00049454(param_2);
            snprintf(local_110, 0x100, "%lld");
        } else if (iVar2 == 4) {
            FUN_00049500(param_2);
            snprintf(local_110, 0x100, "%.2lf");
        } else if (iVar2 == 2) {
            uVar1 = FUN_000491f8(param_2);
            snprintf(local_110, 0x100, "%s", uVar1);
        }
        strcat(param_1, local_110);
    }
    return;
}

void FUN_0001851c(undefined4 param_1, int param_2, int param_3)

{
    undefined4 uVar1;
    int iVar2;
    int iVar3;
    int *piVar4;

    if (*(int *)(param_2 + 8) < 1) {
        return;
    }
    piVar4 = *(int **)(param_2 + 0x10);
    if (param_3 == *piVar4) {
        iVar3 = 0;
    } else {
        iVar2 = 0;
        do {
            iVar2 = iVar2 + 1;
            iVar3 = iVar2 * 4;
            if (iVar2 == *(int *)(param_2 + 8)) {
                return;
            }
            piVar4 = piVar4 + 1;
        } while (*piVar4 != param_3);
    }
    uVar1 = FUN_000491d4(*(undefined4 *)(*(int *)(param_2 + 0xc) + iVar3));
    FUN_00049a64(param_1, "status", uVar1);
    iVar2 = *(int *)(*(int *)(param_2 + 0x10) + iVar3);
    uVar1 = FUN_00049420(iVar2, iVar2 >> 0x1f);
    FUN_00049a64(param_1, "code", uVar1);
    uVar1 = FUN_000491d4(*(undefined4 *)(*(int *)(param_2 + 0x14) + iVar3));
    FUN_00049a64(param_1, &DAT_0004b54c, uVar1);
    return;
}

void FUN_00018624(int param_1, int param_2)

{
    int iVar1;
    undefined4 local_20;
    undefined4 uStack_1c;
    undefined4 local_18;
    undefined4 uStack_14;

    local_20 = 0;
    uStack_1c = 0;
    local_18 = 0;
    uStack_14 = 0;
    if (param_1 != 0) {
        sscanf(&DAT_0007642c, "%lf", &local_20);
        sscanf(&DAT_0007644c, "%lf", &local_18);
        if ((double)CONCAT44(uStack_1c, local_20) <
            (double)CONCAT44(uStack_14, local_18) * 0.95) {
            iVar1 = -1;
        } else {
            iVar1 = (int)((uint)(byte)DAT_00077d18 << 0x1c) >> 0x1f;
        }
        if (param_2 != 0) {
            FUN_0001851c(param_1, param_2, iVar1);
            return;
        }
    }
    return;
}

undefined4 FUN_000186d4(void)

{
    int iVar1;
    undefined4 uVar2;
    char acStack_810[2052];

    if ((DAT_000686e1 != '\0') &&
        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
          (6 < DAT_00067858)))) {
        snprintf(acStack_810, 0x800,
                 "<<<<<<<<<<<<<<<<<<<<exec %s start>>>>>>>>>>>>>>>>",
                 "reload_config");
        FUN_0001dbec(7, acStack_810, 0);
    }
    iVar1 = strcmp((char *)&DAT_000685a4, "127.0.0.1");
    if (iVar1 == 0) {
        FUN_0003df78();
        uVar2 = 0;
        if ((DAT_000686e1 != '\0') &&
            (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
              (6 < DAT_00067858)))) {
            snprintf(acStack_810, 0x800,
                     "<<<<<<<<<<<<<<<<<<<<exec %s end>>>>>>>>>>>>>>>>>>",
                     "reload_config");
            FUN_0001dbec(7, acStack_810, 0);
        }
    } else {
        uVar2 = 0x80000005;
    }
    return uVar2;
}

void FUN_0001880c(int param_1, int param_2)

{
    int iVar1;
    undefined4 uVar2;
    int *piVar3;

    if (param_1 == 0) {
        return;
    }
    iVar1 = pthread_mutex_trylock((pthread_mutex_t *)&DAT_0006a234);
    if (iVar1 == 0) {
        if (0 < DAT_00072e58) {
            piVar3 = (int *)(DAT_00072efc + -4);
            iVar1 = 0;
            do {
                piVar3 = piVar3 + 1;
                iVar1 = iVar1 + 1;
                if ((*(int *)(*piVar3 + 100) != 0) &&
                    (*(char *)(*piVar3 + 0x61) == '\0')) {
                    pthread_mutex_unlock((pthread_mutex_t *)&DAT_0006a234);
                    if (param_2 == 0) {
                        return;
                    }
                    uVar2 = 0;
                    goto LAB_00018898;
                }
            } while (iVar1 != DAT_00072e58);
        }
        uVar2 = 0xffffffff;
        pthread_mutex_unlock((pthread_mutex_t *)&DAT_0006a234);
    } else {
        uVar2 = 0;
    }
    if (param_2 == 0) {
        return;
    }
LAB_00018898:
    FUN_0001851c(param_1, param_2, uVar2);
    return;
}

/* WARNING: Type propagation algorithm not settling */

void FUN_000188cc(uint *param_1, char *param_2)

{
    size_t sVar1;
    uint uVar2;
    int iVar3;
    ssize_t sVar4;
    int *piVar5;
    char *pcVar6;
    __suseconds_t *p_Var7;
    size_t __n;
    int iVar8;
    uint uVar9;
    uint uVar10;
    timeval local_8b0;
    fd_set local_8a8;
    char acStack_828[2052];

    iVar8 = 0;
    sVar1 = strlen(param_2);
    sVar1 = sVar1 + 1;
    __n = sVar1;
    do {
        p_Var7 = &local_8b0.tv_usec;
        local_8b0.tv_sec = 0;
        local_8b0.tv_usec = 50000;
        do {
            p_Var7 = p_Var7 + 1;
            *p_Var7 = 0;
        } while (p_Var7 != local_8a8.fds_bits + 0x1f);
        uVar2 = *param_1;
        uVar9 = uVar2 + 0x1f;
        if (-1 < (int)uVar2) {
            uVar9 = uVar2;
        }
        uVar10 = uVar2 & 0x1f;
        if ((int)uVar2 < 1) {
            uVar10 = -(-uVar2 & 0x1f);
        }
        local_8a8.fds_bits[(int)uVar9 >> 5] =
            local_8a8.fds_bits[(int)uVar9 >> 5] | 1 << (uVar10 & 0xff);
        iVar3 = select(uVar2 + 1, (fd_set *)0x0, &local_8a8, (fd_set *)0x0,
                       &local_8b0);
        if (iVar3 < 1) {
            if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                (DAT_00067858 < 3)) {
                return;
            }
            snprintf(acStack_828, 0x800, "%s: send select failed, ret = %d",
                     "send_api_result", iVar3);
            FUN_0001dbec(3, acStack_828, 0);
            return;
        }
        sVar4 = send(*param_1, param_2, __n, 0);
        if (sVar4 < 0) {
            piVar5 = __errno_location();
            if (*piVar5 != 0xb) {
                if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                    (DAT_00067858 < 3)) {
                    return;
                }
                pcVar6 = strerror(*piVar5);
                snprintf(acStack_828, 0x800, "%s: send (%d:%d) failed %s",
                         "send_api_result", sVar1, sVar1 - __n, pcVar6);
                FUN_0001dbec(3, acStack_828, 0);
                return;
            }
            if ((DAT_000686e1 != '\0') &&
                (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
                  (6 < DAT_00067858)))) {
                snprintf(acStack_828, 0x800, "%s: send EAGAIN ",
                         "send_api_result");
                FUN_0001dbec(7, acStack_828, 0);
            }
        LAB_000189bc:
            iVar8 = iVar8 + 1;
        } else {
            __n = __n - sVar4;
            param_2 = param_2 + sVar4;
            if (sVar4 == 0)
                goto LAB_000189bc;
        }
        if ((int)__n < 1 || 2 < iVar8) {
            return;
        }
    } while (true);
}

/* WARNING: Globals starting with '_' overlap smaller symbols at the same
 * address */

undefined4 FUN_00018b70(int param_1, int param_2)

{
    int iVar1;
    undefined4 uVar2;
    undefined4 uVar3;
    undefined4 uVar4;
    undefined1 *puVar5;
    int iVar6;
    int *piVar7;
    undefined *puVar8;
    int iVar9;
    int iVar10;
    int iVar11;
    bool bVar12;
    double dVar13;
    int local_a0c;
    uint local_a08;
    int local_a04;
    int local_9fc;
    undefined2 local_9c4[2];
    undefined4 local_9c0;
    undefined4 uStack_9bc;
    undefined4 local_9b8;
    undefined4 uStack_9b4;
    undefined4 local_9b0;
    undefined4 uStack_9ac;
    undefined4 local_9a8;
    undefined4 uStack_9a4;
    char local_9a0[48];
    char acStack_970[64];
    uint local_930;
    undefined4 uStack_92c;
    char acStack_830[2052];

    local_9c0 = 0;
    uStack_9bc = 0;
    local_9b8 = 0;
    uStack_9b4 = 0;
    local_9b0 = 0;
    uStack_9ac = 0;
    local_9a8 = 0;
    uStack_9a4 = 0;
    local_9a0[0] = '\0';
    local_9a0[1] = '\0';
    local_9a0[2] = '\0';
    local_9a0[3] = '\0';
    local_9a0[4] = '\0';
    local_9a0[5] = '\0';
    local_9a0[6] = '\0';
    local_9a0[7] = '\0';
    local_9a0[8] = '\0';
    local_9a0[9] = '\0';
    local_9a0[10] = '\0';
    local_9a0[0xb] = '\0';
    local_9a0[0xc] = '\0';
    local_9a0[0xd] = '\0';
    local_9a0[0xe] = '\0';
    local_9a0[0xf] = '\0';
    memset(local_9a0 + 0x10, 0, 0x20);
    memset(&local_930, 0, 0x100);
    local_9c4[0] = 0;
    memset(acStack_970, 0, 0x40);
    if (param_1 == 0 || param_2 == 0) {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (2 < DAT_00067858)) {
            snprintf(acStack_830, 0x800, "%s: input bad api param\n",
                     "get_stats_old");
            FUN_0001dbec(3, acStack_830, 0);
        }
        return 0x80000002;
    }
    FUN_00042848(local_9c4, 1);
    iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_000762f8);
    if (iVar1 != 0) {
        piVar7 = __errno_location();
        snprintf(acStack_830, 0x800,
                 "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar7,
                 "api_new.c", "get_stats_old", 0x3d2);
        FUN_0001dbec(3, acStack_830, 1);
        FUN_0003c4b4(1);
    }
    FUN_00016928(param_1, 1, 0x46, *(undefined4 *)(param_2 + 8));
    uVar2 = FUN_00048fd0();
    uVar3 = FUN_00048c40();
    uVar4 = FUN_000491d4("1.0.0");
    FUN_00049a64(uVar3, "BMMiner", uVar4);
    uVar4 = FUN_000491d4(&DAT_0006a6c8);
    FUN_00049a64(uVar3, "Miner", uVar4);
    uVar4 = FUN_000491d4(&DAT_0006a254);
    FUN_00049a64(uVar3, "CompileTime", uVar4);
    snprintf(acStack_970, 0x40, "%s", &DAT_0006a354);
    if (DAT_0007631c != '\0') {
        snprintf(acStack_970, 0x40, "%s", &DAT_0007631c);
    }
    uVar4 = FUN_000491d4(acStack_970);
    FUN_00049a64(uVar3, &DAT_0004b140, uVar4);
    FUN_00049f24(uVar2, uVar3);
    if (0 < DAT_00074fd8) {
        local_9fc = 0;
        local_a0c = 0;
        local_a08 = 0;
        local_a04 = 0;
        do {
            iVar1 = FUN_0002e2cc(local_a08);
            uVar3 = FUN_00048c40();
            uVar4 = FUN_00049420(local_a08, local_a04);
            FUN_00049a64(uVar3, "STATS", uVar4);
            snprintf(local_9a0, 0x10, "BTM_SOC%d", local_a08);
            uVar4 = FUN_000491d4(local_9a0);
            FUN_00049a64(uVar3, &DAT_0004b5ec, uVar4);
            FUN_0004ad7c(_DAT_000681c0, DAT_000681c4);
            uVar4 = FUN_00049420();
            FUN_00049a64(uVar3, "Elapsed", uVar4);
            uVar4 = FUN_00049420(*(undefined4 *)(iVar1 + 0x124), 0);
            FUN_00049a64(uVar3, "Calls", uVar4);
            uVar4 = FUN_00049420(*(int *)(iVar1 + 0x128),
                                 *(int *)(iVar1 + 0x128) >> 0x1f);
            FUN_00049a64(uVar3, &DAT_0004b600, uVar4);
            uVar4 = FUN_00049420(*(int *)(iVar1 + 0x130),
                                 *(int *)(iVar1 + 0x130) >> 0x1f);
            FUN_00049a64(uVar3, &DAT_0004b608, uVar4);
            uVar4 = FUN_00049420(*(int *)(iVar1 + 0x138),
                                 *(int *)(iVar1 + 0x138) >> 0x1f);
            FUN_00049a64(uVar3, &DAT_0004b60c, uVar4);
            sscanf(&DAT_0007641c, "%lf", &local_9c0);
            dVar13 = (double)CONCAT44(uStack_9bc, local_9c0) * 100.0;
            FUN_0004ad7c(SUB84(dVar13, 0), (int)((ulonglong)dVar13 >> 0x20));
            dVar13 = (double)FUN_0004ace4();
            uVar4 = FUN_000494a4(SUB84(dVar13 / 100.0, 0));
            FUN_00049a64(uVar3, "GHS 5s", uVar4);
            sscanf(&DAT_0007643c, "%lf", &local_9b0);
            dVar13 = (double)CONCAT44(uStack_9ac, local_9b0) * 100.0;
            FUN_0004ad7c(SUB84(dVar13, 0), (int)((ulonglong)dVar13 >> 0x20));
            dVar13 = (double)FUN_0004ace4();
            uVar4 = FUN_000494a4(SUB84(dVar13 / 100.0, 0));
            FUN_00049a64(uVar3, "GHS av", uVar4);
            sscanf(&DAT_0007642c, "%lf", &local_9b8);
            dVar13 = (double)CONCAT44(uStack_9b4, local_9b8) * 100.0;
            FUN_0004ad7c(SUB84(dVar13, 0), (int)((ulonglong)dVar13 >> 0x20));
            dVar13 = (double)FUN_0004ace4();
            uVar4 = FUN_000494a4(SUB84(dVar13 / 100.0, 0));
            FUN_00049a64(uVar3, "rate_30m", uVar4);
            uVar4 = FUN_00049420(DAT_00068298, DAT_00068298 >> 0x1f);
            FUN_00049a64(uVar3, &DAT_0004b62c, uVar4);
            uVar4 = FUN_00049420(DAT_00076314, DAT_00076314 >> 0x1f);
            FUN_00049a64(uVar3, "miner_count", uVar4);
            iVar1 = DAT_00076314;
            if (DAT_00076314 < 1) {
                if (DAT_00076314 == 0) {
                    iVar1 = 1;
                }
            } else {
                iVar9 = 0;
                puVar8 = &DAT_00076310;
                do {
                    piVar7 = (int *)(puVar8 + 0x16c);
                    iVar9 = iVar9 + 1;
                    puVar8 = puVar8 + 0x610;
                    local_a0c = local_a0c + *piVar7;
                    if (iVar9 == DAT_00076314)
                        break;
                } while (iVar9 != 4);
            }
            local_a0c = FUN_0004a718(local_a0c, iVar1);
            uVar4 = FUN_00049420(local_a0c, local_a0c >> 0x1f);
            FUN_00049a64(uVar3, "frequency", uVar4);
            uVar4 = FUN_00049420(DAT_00076464, DAT_00076464 >> 0x1f);
            FUN_00049a64(uVar3, "fan_num", uVar4);
            if (0 < DAT_00076464) {
                iVar1 = 0;
                piVar7 = &DAT_00076468;
                do {
                    iVar1 = iVar1 + 1;
                    memset(local_9a0 + 0x10, 0, 0x20);
                    snprintf(local_9a0 + 0x10, 0x20, "fan%d", iVar1);
                    uVar4 = FUN_00049420(*piVar7, *piVar7 >> 0x1f);
                    FUN_00049a64(uVar3, local_9a0 + 0x10, uVar4);
                    piVar7 = piVar7 + 1;
                } while (iVar1 < DAT_00076464);
            }
            uVar4 = FUN_00049420(DAT_00076314, DAT_00076314 >> 0x1f);
            FUN_00049a64(uVar3, "temp_num", uVar4);
            iVar1 = 0;
            do {
                iVar9 = iVar1 + 1;
                if (0 < DAT_00076314) {
                    iVar11 = 0;
                    puVar8 = &DAT_00076310;
                    do {
                        iVar11 = iVar11 + 1;
                        if (*(int *)(puVar8 + 0x168) == iVar1) {
                            memset(local_9a0 + 0x10, 0, 0x20);
                            snprintf(local_9a0 + 0x10, 0x20, "temp%d", iVar9);
                            iVar10 = *(int *)(puVar8 + 0x2a8);
                            if (*(int *)(puVar8 + 0x2a8) <
                                *(int *)(puVar8 + 0x2a4)) {
                                iVar10 = *(int *)(puVar8 + 0x2a4);
                            }
                            if (iVar10 < -0xff) {
                                iVar10 = -0xff;
                            }
                            if (iVar10 < *(int *)(puVar8 + 0x2ac)) {
                                iVar10 = *(int *)(puVar8 + 0x2ac);
                            }
                            iVar6 = *(int *)(puVar8 + 0x2b0);
                            if (*(int *)(puVar8 + 0x2b0) <= iVar10) {
                                iVar6 = iVar10;
                            }
                            uVar4 = FUN_00049420(iVar6, iVar6 >> 0x1f);
                            FUN_00049a64(uVar3, local_9a0 + 0x10, uVar4);
                            memset(local_9a0 + 0x10, 0, 0x20);
                            snprintf(local_9a0 + 0x10, 0x20, "temp2_%d", iVar9);
                            iVar10 = *(int *)(puVar8 + 0x2b8);
                            if (*(int *)(puVar8 + 0x2b8) <
                                *(int *)(puVar8 + 0x2b4)) {
                                iVar10 = *(int *)(puVar8 + 0x2b4);
                            }
                            if (iVar10 < -0xff) {
                                iVar10 = -0xff;
                            }
                            if (iVar10 < *(int *)(puVar8 + 700)) {
                                iVar10 = *(int *)(puVar8 + 700);
                            }
                            iVar6 = *(int *)(puVar8 + 0x2c0);
                            if (*(int *)(puVar8 + 0x2c0) <= iVar10) {
                                iVar6 = iVar10;
                            }
                            uVar4 = FUN_00049420(iVar6, iVar6 >> 0x1f);
                            FUN_00049a64(uVar3, local_9a0 + 0x10, uVar4);
                        }
                        puVar8 = puVar8 + 0x610;
                    } while (iVar11 < DAT_00076314);
                }
                iVar1 = iVar9;
            } while (iVar9 != 4);
            iVar1 = 0;
            do {
                iVar9 = iVar1 + 1;
                memset(local_9a0 + 0x10, 0, 0x20);
                memset(&local_930, 0, 0x100);
                snprintf(local_9a0 + 0x10, 0x20, "temp_pcb%d", iVar9);
                if (DAT_00076314 < 1) {
                LAB_00019ae8:
                    local_930 = 0x2d302d30;
                    uStack_92c = 0x302d30;
                } else {
                    if (DAT_00076478 == iVar1) {
                        iVar11 = 0;
                    } else {
                        iVar11 = 0;
                        puVar8 = &DAT_00076310;
                        do {
                            iVar11 = iVar11 + 1;
                            if (DAT_00076314 == iVar11)
                                goto LAB_00019ae8;
                            if (iVar11 == 4) {
                                if (DAT_00076314 < 5)
                                    goto LAB_00019ae8;
                                break;
                            }
                            piVar7 = (int *)(puVar8 + 0x778);
                            puVar8 = puVar8 + 0x610;
                        } while (*piVar7 != iVar1);
                    }
                    snprintf((char *)&local_930, 0x100, "%d-%d-%d-%d",
                             (&DAT_000765b4)[iVar11 * 0x184],
                             (&DAT_000765b8)[iVar11 * 0x184],
                             (&DAT_000765bc)[iVar11 * 0x184],
                             (&DAT_000765c0)[iVar11 * 0x184]);
                }
                uVar4 = FUN_000491d4(&local_930);
                FUN_00049a64(uVar3, local_9a0 + 0x10, uVar4);
                iVar1 = iVar9;
            } while (iVar9 != 4);
            iVar1 = 0;
            do {
                iVar9 = iVar1 + 1;
                memset(local_9a0 + 0x10, 0, 0x20);
                memset(&local_930, 0, 0x100);
                snprintf(local_9a0 + 0x10, 0x20, "temp_chip%d", iVar9);
                if (DAT_00076314 < 1) {
                LAB_00019acc:
                    local_930 = 0x2d302d30;
                    uStack_92c = 0x302d30;
                } else {
                    if (DAT_00076478 == iVar1) {
                        iVar11 = 0;
                    } else {
                        iVar11 = 0;
                        puVar8 = &DAT_00076310;
                        do {
                            iVar11 = iVar11 + 1;
                            if (DAT_00076314 == iVar11)
                                goto LAB_00019acc;
                            if (iVar11 == 4) {
                                if (DAT_00076314 < 5)
                                    goto LAB_00019acc;
                                break;
                            }
                            piVar7 = (int *)(puVar8 + 0x778);
                            puVar8 = puVar8 + 0x610;
                        } while (*piVar7 != iVar1);
                    }
                    snprintf((char *)&local_930, 0x100, "%d-%d-%d-%d",
                             (&DAT_000765c4)[iVar11 * 0x184],
                             (&DAT_000765c8)[iVar11 * 0x184],
                             (&DAT_000765cc)[iVar11 * 0x184],
                             (&DAT_000765d0)[iVar11 * 0x184]);
                }
                uVar4 = FUN_000491d4(&local_930);
                FUN_00049a64(uVar3, local_9a0 + 0x10, uVar4);
                iVar1 = iVar9;
            } while (iVar9 != 4);
            iVar1 = 0;
            do {
                iVar9 = iVar1 + 1;
                memset(local_9a0 + 0x10, 0, 0x20);
                memset(&local_930, 0, 0x100);
                snprintf(local_9a0 + 0x10, 0x20, "temp_pic%d", iVar9);
                if (DAT_00076314 < 1) {
                LAB_00019ab0:
                    local_930 = 0x2d302d30;
                    uStack_92c = 0x302d30;
                } else {
                    if (DAT_00076478 == iVar1) {
                        iVar11 = 0;
                    } else {
                        iVar11 = 0;
                        puVar8 = &DAT_00076310;
                        do {
                            iVar11 = iVar11 + 1;
                            if (DAT_00076314 == iVar11)
                                goto LAB_00019ab0;
                            if (iVar11 == 4) {
                                if (DAT_00076314 < 5)
                                    goto LAB_00019ab0;
                                break;
                            }
                            piVar7 = (int *)(puVar8 + 0x778);
                            puVar8 = puVar8 + 0x610;
                        } while (*piVar7 != iVar1);
                    }
                    snprintf((char *)&local_930, 0x100, "%d-%d-%d-%d",
                             (&DAT_000765a4)[iVar11 * 0x184],
                             (&DAT_000765a8)[iVar11 * 0x184],
                             (&DAT_000765ac)[iVar11 * 0x184],
                             (&DAT_000765b0)[iVar11 * 0x184]);
                }
                uVar4 = FUN_000491d4(&local_930);
                FUN_00049a64(uVar3, local_9a0 + 0x10, uVar4);
                iVar1 = iVar9;
            } while (iVar9 != 4);
            sscanf(&DAT_0007644c, "%lf", &local_9a8);
            dVar13 = (double)CONCAT44(uStack_9a4, local_9a8) * 100.0;
            FUN_0004ad7c(SUB84(dVar13, 0), (int)((ulonglong)dVar13 >> 0x20));
            dVar13 = (double)FUN_0004ace4();
            uVar4 = FUN_000494a4(SUB84(dVar13 / 100.0, 0));
            FUN_00049a64(uVar3, "total_rateideal", uVar4);
            uVar4 = FUN_000491d4(&DAT_0004b6c4);
            FUN_00049a64(uVar3, "rate_unit", uVar4);
            uVar4 = FUN_00049420(local_a0c, local_a0c >> 0x1f);
            FUN_00049a64(uVar3, "total_freqavg", uVar4);
            if (0 < DAT_00076314) {
                iVar1 = 0;
                puVar8 = &DAT_00076310;
                do {
                    iVar1 = iVar1 + 1;
                    piVar7 = (int *)(puVar8 + 400);
                    puVar8 = puVar8 + 0x610;
                    local_9fc = local_9fc + *piVar7;
                } while (iVar1 < 4 && iVar1 < DAT_00076314);
            }
            uVar4 = FUN_00049420(local_9fc, local_9fc >> 0x1f);
            FUN_00049a64(uVar3, "total_acn", uVar4);
            dVar13 = (double)CONCAT44(uStack_9ac, local_9b0) * 100.0;
            FUN_0004ad7c(SUB84(dVar13, 0), (int)((ulonglong)dVar13 >> 0x20));
            dVar13 = (double)FUN_0004ace4();
            uVar4 = FUN_000494a4(SUB84(dVar13 / 100.0, 0));
            FUN_00049a64(uVar3, "total rate", uVar4);
            uVar4 = FUN_00049420(0, 0);
            FUN_00049a64(uVar3, "temp_max", uVar4);
            uVar4 = FUN_00049420(DAT_00076058, DAT_00076058 >> 0x1f);
            FUN_00049a64(uVar3, "no_matching_work", uVar4);
            iVar1 = 0;
            do {
                iVar9 = iVar1 + 1;
                memset(local_9a0 + 0x10, 0, 0x20);
                snprintf(local_9a0 + 0x10, 0x20, "chain_acn%d", iVar9);
                if (DAT_00076314 < 1) {
                LAB_00019a9c:
                    iVar11 = 0;
                    iVar1 = 0;
                } else {
                    if (DAT_00076478 == iVar1) {
                        iVar11 = 0;
                    } else {
                        iVar11 = 0;
                        puVar8 = &DAT_00076310;
                        do {
                            iVar11 = iVar11 + 1;
                            if (DAT_00076314 == iVar11)
                                goto LAB_00019a9c;
                            if (iVar11 == 4) {
                                if (DAT_00076314 < 5)
                                    goto LAB_00019a9c;
                                break;
                            }
                            piVar7 = (int *)(puVar8 + 0x778);
                            puVar8 = puVar8 + 0x610;
                        } while (*piVar7 != iVar1);
                    }
                    iVar11 = (&DAT_000764a0)[iVar11 * 0x184];
                    iVar1 = iVar11 >> 0x1f;
                }
                uVar4 = FUN_00049420(iVar11, iVar1);
                FUN_00049a64(uVar3, local_9a0 + 0x10, uVar4);
                iVar1 = iVar9;
            } while (iVar9 != 4);
            iVar1 = 0;
            do {
                iVar9 = iVar1 + 1;
                memset(local_9a0 + 0x10, 0, 0x20);
                memset(&local_930, 0, 0x100);
                snprintf(local_9a0 + 0x10, 0x20, "chain_acs%d", iVar9);
                if (DAT_00076314 < 1) {
                LAB_00019a8c:
                    local_930 = local_930 & 0xffffff00;
                } else {
                    if (DAT_00076478 == iVar1) {
                        iVar1 = 0x194;
                    } else {
                        iVar11 = 0;
                        puVar8 = &DAT_00076310;
                        do {
                            iVar11 = iVar11 + 1;
                            if (iVar11 == DAT_00076314)
                                goto LAB_00019a8c;
                            if (iVar11 == 4) {
                                if (DAT_00076314 < 5)
                                    goto LAB_00019a8c;
                                iVar1 = 0x19d4;
                                goto LAB_00019720;
                            }
                            piVar7 = (int *)(puVar8 + 0x778);
                            puVar8 = puVar8 + 0x610;
                        } while (*piVar7 != iVar1);
                        iVar1 = iVar11 * 0x610 + 0x194;
                    }
                LAB_00019720:
                    snprintf((char *)&local_930, 0x100, "%s",
                             &DAT_00076310 + iVar1);
                }
                uVar4 = FUN_000491d4(&local_930);
                FUN_00049a64(uVar3, local_9a0 + 0x10, uVar4);
                iVar1 = iVar9;
            } while (iVar9 != 4);
            iVar1 = 0;
            do {
                iVar9 = iVar1 + 1;
                memset(local_9a0 + 0x10, 0, 0x20);
                snprintf(local_9a0 + 0x10, 0x20, "chain_hw%d", iVar9);
                if (DAT_00076314 < 1) {
                LAB_00019a78:
                    iVar11 = 0;
                    iVar1 = 0;
                } else {
                    if (DAT_00076478 == iVar1) {
                        iVar11 = 0;
                    } else {
                        iVar11 = 0;
                        puVar8 = &DAT_00076310;
                        do {
                            iVar11 = iVar11 + 1;
                            if (DAT_00076314 == iVar11)
                                goto LAB_00019a78;
                            if (iVar11 == 4) {
                                if (DAT_00076314 < 5)
                                    goto LAB_00019a78;
                                break;
                            }
                            piVar7 = (int *)(puVar8 + 0x778);
                            puVar8 = puVar8 + 0x610;
                        } while (*piVar7 != iVar1);
                    }
                    iVar11 = (&DAT_000765d4)[iVar11 * 0x184];
                    iVar1 = iVar11 >> 0x1f;
                }
                uVar4 = FUN_00049420(iVar11, iVar1);
                FUN_00049a64(uVar3, local_9a0 + 0x10, uVar4);
                iVar1 = iVar9;
            } while (iVar9 != 4);
            iVar1 = 0;
            do {
                iVar9 = iVar1 + 1;
                memset(local_9a0 + 0x10, 0, 0x20);
                snprintf(local_9a0 + 0x10, 0x20, "chain_rate%d", iVar9);
                puVar5 = &DAT_0004d488;
                if (0 < DAT_00076314) {
                    if (DAT_00076478 == iVar1) {
                        iVar1 = 0x180;
                    } else {
                        iVar11 = 0;
                        puVar8 = &DAT_00076310;
                        do {
                            iVar11 = iVar11 + 1;
                            if (iVar11 == DAT_00076314)
                                goto LAB_0001989c;
                            if (iVar11 == 4) {
                                if (DAT_00076314 < 5)
                                    goto LAB_0001989c;
                                iVar1 = 0x19c0;
                                goto LAB_00019898;
                            }
                            piVar7 = (int *)(puVar8 + 0x778);
                            puVar8 = puVar8 + 0x610;
                        } while (*piVar7 != iVar1);
                        iVar1 = iVar11 * 0x610 + 0x180;
                    }
                LAB_00019898:
                    puVar5 = &DAT_00076310 + iVar1;
                }
            LAB_0001989c:
                uVar4 = FUN_000491d4(puVar5);
                FUN_00049a64(uVar3, local_9a0 + 0x10, uVar4);
                iVar1 = iVar9;
            } while (iVar9 != 4);
            iVar1 = 0;
            do {
                iVar9 = iVar1 + 1;
                memset(local_9a0 + 0x10, 0, 0x20);
                snprintf(local_9a0 + 0x10, 0x20, "freq%d", iVar9);
                if (DAT_00076314 < 1) {
                LAB_00019a54:
                    iVar11 = 0;
                    iVar1 = 0;
                } else {
                    if (DAT_00076478 == iVar1) {
                        iVar11 = 0;
                    } else {
                        iVar11 = 0;
                        puVar8 = &DAT_00076310;
                        do {
                            iVar11 = iVar11 + 1;
                            if (iVar11 == DAT_00076314)
                                goto LAB_00019a54;
                            if (iVar11 == 4) {
                                if (DAT_00076314 < 5)
                                    goto LAB_00019a54;
                                break;
                            }
                            piVar7 = (int *)(puVar8 + 0x778);
                            puVar8 = puVar8 + 0x610;
                        } while (*piVar7 != iVar1);
                    }
                    iVar11 = (&DAT_0007647c)[iVar11 * 0x184];
                    iVar1 = iVar11 >> 0x1f;
                }
                uVar4 = FUN_00049420(iVar11, iVar1);
                FUN_00049a64(uVar3, local_9a0 + 0x10, uVar4);
                iVar1 = iVar9;
            } while (iVar9 != 4);
            uVar4 = FUN_000491d4(&DAT_0006a6c8);
            FUN_00049a64(uVar3, "miner_version", uVar4);
            uVar4 = FUN_000491d4(&DAT_00077cf0);
            FUN_00049a64(uVar3, "miner_id", uVar4);
            FUN_00049f24(uVar2, uVar3);
            iVar1 = local_a08 + 1;
            bVar12 = 0xfffffffe < local_a08;
            local_a08 = local_a08 + 1;
            local_a04 = local_a04 + (uint)bVar12;
        } while (iVar1 < DAT_00074fd8);
    }
    FUN_00049a64(param_1, "STATS", uVar2);
    uVar2 = FUN_00049420(1, 0);
    FUN_00049a64(param_1, &DAT_0004b108, uVar2);
    iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000762f8);
    if (iVar1 != 0) {
        piVar7 = __errno_location();
        snprintf(acStack_830, 0x800,
                 "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar7,
                 "api_new.c", "get_stats_old", 0x4e5);
        FUN_0001dbec(3, acStack_830, 1);
        FUN_0003c4b4(1);
    }
    (*DAT_0006797c)();
    return 0;
}

undefined4 FUN_00019cf0(int param_1, int param_2)

{
    int iVar1;
    int iVar2;
    undefined4 uVar3;
    undefined4 uVar4;
    int iVar5;
    undefined4 uVar6;
    undefined *puVar7;
    int iVar8;
    int *piVar9;
    int *piVar10;
    uint uVar11;
    int iVar12;
    uint uVar13;
    bool bVar14;
    undefined4 extraout_s1;
    undefined4 extraout_s1_00;
    double dVar15;
    char acStack_840[2052];

    if (param_1 == 0 || param_2 == 0) {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (2 < DAT_00067858)) {
            snprintf(acStack_840, 0x800, "%s: input bad api param\n",
                     "get_devs_old");
            FUN_0001dbec(3, acStack_840, 0);
        }
        return 0x80000002;
    }
    iVar1 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_00074fb8);
    if (iVar1 != 0) {
        piVar9 = __errno_location();
        snprintf(acStack_840, 0x800,
                 "WTF RDLOCK ERROR ON LOCK! errno=%d in %s %s():%d", *piVar9,
                 "api_new.c", "numascs", 0x4f1);
        FUN_0001dbec(3, acStack_840, 1);
        FUN_0003c4b4(1);
    }
    if (DAT_00074fd8 < 1) {
        iVar1 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00074fb8);
        if (iVar1 == 0) {
            (*DAT_0006797c)();
            goto LAB_0001a3cc;
        }
        iVar1 = 0;
    LAB_0001a4cc:
        piVar9 = __errno_location();
        snprintf(acStack_840, 0x800,
                 "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar9,
                 "api_new.c", "numascs", 0x4f6);
        FUN_0001dbec(3, acStack_840, 1);
        FUN_0003c4b4(1);
    } else {
        iVar1 = 0;
        piVar9 = DAT_00074f60;
        do {
            piVar10 = piVar9 + 1;
            if ((**(int **)(*piVar9 + 4) == 2) ||
                (**(int **)(*piVar9 + 4) == 3)) {
                iVar1 = iVar1 + 1;
            }
            piVar9 = piVar10;
        } while (DAT_00074f60 + DAT_00074fd8 != piVar10);
        iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00074fb8);
        if (iVar2 != 0)
            goto LAB_0001a4cc;
    }
    (*DAT_0006797c)();
    if (iVar1 != 0) {
        uVar13 = 0;
        FUN_00016928(param_1, 1, 9, *(undefined4 *)(param_2 + 8));
        iVar2 = 0;
        uVar3 = FUN_00048fd0();
        do {
            uVar4 = FUN_00048c40();
            iVar5 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_00074fb8);
            if (iVar5 != 0) {
                piVar9 = __errno_location();
                snprintf(acStack_840, 0x800,
                         "WTF RDLOCK ERROR ON LOCK! errno=%d in %s %s():%d",
                         *piVar9, "api_new.c", "ascdevice", 0x4fe);
                FUN_0001dbec(3, acStack_840, 1);
                FUN_0003c4b4(1);
            }
            if (0 < DAT_00074fd8) {
                iVar5 = 0;
                iVar12 = 0;
                piVar9 = DAT_00074f60 + -1;
                do {
                    piVar9 = piVar9 + 1;
                    if ((**(int **)(*piVar9 + 4) == 2) ||
                        (**(int **)(*piVar9 + 4) == 3)) {
                        iVar5 = iVar5 + 1;
                    }
                    if (iVar5 == uVar13 + 1) {
                        iVar5 = pthread_rwlock_unlock(
                            (pthread_rwlock_t *)&DAT_00074fb8);
                        if (iVar5 != 0) {
                            piVar9 = __errno_location();
                            snprintf(acStack_840, 0x800,
                                     "WTF RWLOCK ERROR ON UNLOCK! errno=%d in "
                                     "%s %s():%d",
                                     *piVar9, "api_new.c", "ascdevice", 0x50b);
                            FUN_0001dbec(3, acStack_840, 1);
                            FUN_0003c4b4(1);
                        }
                        (*DAT_0006797c)();
                        goto LAB_00019f30;
                    }
                    iVar12 = iVar12 + 1;
                } while (iVar12 != DAT_00074fd8);
            }
            iVar5 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00074fb8);
            if (iVar5 != 0) {
                piVar9 = __errno_location();
                snprintf(acStack_840, 0x800,
                         "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d",
                         *piVar9, "api_new.c", "ascdevice", 0x506);
                FUN_0001dbec(3, acStack_840, 1);
                FUN_0003c4b4(1);
            }
            iVar12 = -1;
            (*DAT_0006797c)();
        LAB_00019f30:
            iVar5 = FUN_0002e2cc(iVar12);
            uVar6 = FUN_00049420(uVar13, iVar2);
            FUN_00049a64(uVar4, &DAT_0004b808, uVar6);
            uVar6 = FUN_000491d4(*(undefined4 *)(*(int *)(iVar5 + 4) + 8));
            FUN_00049a64(uVar4, &DAT_0004b80c, uVar6);
            uVar6 =
                FUN_00049420(*(int *)(iVar5 + 8), *(int *)(iVar5 + 8) >> 0x1f);
            FUN_00049a64(uVar4, &DAT_0004b5ec, uVar6);
            if (*(int *)(iVar5 + 0x20) == 1) {
                puVar7 = &DAT_0004b2e0;
            } else {
                puVar7 = &DAT_0004b2d0;
            }
            uVar6 = FUN_000491d4(puVar7);
            FUN_00049a64(uVar4, "Enabled", uVar6);
            uVar6 = FUN_000491d4("Alive");
            FUN_00049a64(uVar4, "Status", uVar6);
            dVar15 = *(double *)(iVar5 + 0xb0) * 100.0;
            FUN_0004ad7c(SUB84(dVar15, 0), (int)((ulonglong)dVar15 >> 0x20));
            dVar15 = (double)FUN_0004ace4();
            uVar6 = FUN_000494a4(SUB84(dVar15 / 100.0, 0));
            FUN_00049a64(uVar4, "Tenperature", uVar6);
            dVar15 = *(double *)(iVar5 + 0x50);
            uVar6 = FUN_0002aa68(iVar5);
            dVar15 = (dVar15 / (double)CONCAT44(extraout_s1, uVar6)) * 100.0;
            FUN_0004ad7c(SUB84(dVar15, 0), (int)((ulonglong)dVar15 >> 0x20));
            dVar15 = (double)FUN_0004ace4();
            uVar6 = FUN_000494a4(SUB84(dVar15 / 100.0, 0));
            FUN_00049a64(uVar4, "MHS av", uVar6);
            snprintf(acStack_840, 0x18, "MHS %ds", DAT_000681d0);
            dVar15 = *(double *)(iVar5 + 0x30) * 100.0;
            FUN_0004ad7c(SUB84(dVar15, 0), (int)((ulonglong)dVar15 >> 0x20));
            dVar15 = (double)FUN_0004ace4();
            uVar6 = FUN_000494a4(SUB84(dVar15 / 100.0, 0));
            FUN_00049a64(uVar4, acStack_840, uVar6);
            uVar6 = FUN_00049420(*(int *)(iVar5 + 0x24),
                                 *(int *)(iVar5 + 0x24) >> 0x1f);
            FUN_00049a64(uVar4, "Accepted", uVar6);
            uVar6 = FUN_00049420(*(int *)(iVar5 + 0x28),
                                 *(int *)(iVar5 + 0x28) >> 0x1f);
            FUN_00049a64(uVar4, "Rejected", uVar6);
            uVar6 = FUN_00049420(*(int *)(iVar5 + 0x2c),
                                 *(int *)(iVar5 + 0x2c) >> 0x1f);
            FUN_00049a64(uVar4, "Hardware Errors", uVar6);
            dVar15 = *(double *)(iVar5 + 0x58) * 100.0;
            FUN_0004ad7c(SUB84(dVar15, 0), (int)((ulonglong)dVar15 >> 0x20));
            dVar15 = (double)FUN_0004ace4();
            uVar6 = FUN_000494a4(SUB84(dVar15 / 100.0, 0));
            FUN_00049a64(uVar4, "Utility", uVar6);
            if (*(int *)(iVar5 + 0xdc) < 1) {
                iVar12 = -1;
                iVar8 = -1;
            } else {
                iVar8 = *(int *)(iVar5 + 0xd8);
                iVar12 = iVar8 >> 0x1f;
            }
            uVar6 = FUN_00049420(iVar8, iVar12);
            FUN_00049a64(uVar4, "Last Share Pool", uVar6);
            uVar6 = FUN_00049420(*(int *)(iVar5 + 0xdc),
                                 *(int *)(iVar5 + 0xdc) >> 0x1f);
            FUN_00049a64(uVar4, "Last Share Time", uVar6);
            dVar15 = *(double *)(iVar5 + 0x50) * 100.0;
            FUN_0004ad7c(SUB84(dVar15, 0), (int)((ulonglong)dVar15 >> 0x20));
            dVar15 = (double)FUN_0004ace4();
            uVar6 = FUN_000494a4(SUB84(dVar15 / 100.0, 0));
            FUN_00049a64(uVar4, "Total MH", uVar6);
            uVar6 = FUN_00049420(*(undefined4 *)(iVar5 + 0xc0),
                                 *(undefined4 *)(iVar5 + 0xc4));
            FUN_00049a64(uVar4, "Diff1 Work", uVar6);
            FUN_0004ad7c(*(undefined4 *)(iVar5 + 200),
                         *(undefined4 *)(iVar5 + 0xcc));
            uVar6 = FUN_00049420();
            FUN_00049a64(uVar4, "Difficulty Accepted", uVar6);
            FUN_0004ad7c(*(undefined4 *)(iVar5 + 0xd0),
                         *(undefined4 *)(iVar5 + 0xd4));
            uVar6 = FUN_00049420();
            FUN_00049a64(uVar4, "Difficulty Rejected", uVar6);
            uVar6 = FUN_00049420(*(int *)(iVar5 + 0xe8),
                                 *(int *)(iVar5 + 0xe8) >> 0x1f);
            FUN_00049a64(uVar4, "Last Share Difficulty", uVar6);
            uVar6 = FUN_00049420(*(int *)(iVar5 + 0xe8),
                                 *(int *)(iVar5 + 0xe8) >> 0x1f);
            FUN_00049a64(uVar4, "Last Valid Work", uVar6);
            uVar11 = *(uint *)(iVar5 + 0x2c);
            uVar6 = 0;
            if (*(uint *)(iVar5 + 0xc0) + uVar11 != 0 ||
                *(int *)(iVar5 + 0xc4) + ((int)uVar11 >> 0x1f) +
                        (uint)CARRY4(*(uint *)(iVar5 + 0xc0), uVar11) !=
                    0) {
                dVar15 = (double)FUN_0004ace4();
                dVar15 = ((double)(longlong)(int)uVar11 / dVar15) * 100.0;
                FUN_0004ad7c(SUB84(dVar15, 0),
                             (int)((ulonglong)dVar15 >> 0x20));
                dVar15 = (double)FUN_0004ace4();
                uVar6 = SUB84(dVar15 / 100.0, 0);
            }
            uVar6 = FUN_000494a4(uVar6);
            FUN_00049a64(uVar4, "Device Hardware%", uVar6);
            uVar6 = 0;
            if (*(int *)(iVar5 + 0xc0) != 0 || *(int *)(iVar5 + 0xc4) != 0) {
                dVar15 = (double)FUN_0004ace4();
                dVar15 = (*(double *)(iVar5 + 0xd0) / dVar15) * 100.0;
                FUN_0004ad7c(SUB84(dVar15, 0),
                             (int)((ulonglong)dVar15 >> 0x20));
                dVar15 = (double)FUN_0004ace4();
                uVar6 = SUB84(dVar15 / 100.0, 0);
            }
            uVar6 = FUN_000494a4(uVar6);
            FUN_00049a64(uVar4, "Device Rejected%", uVar6);
            uVar6 = FUN_0002aa68(iVar5);
            FUN_0004ad7c(uVar6, extraout_s1_00);
            uVar6 = FUN_00049420();
            FUN_00049a64(uVar4, "Device Elapsed", uVar6);
            FUN_00049f24(uVar3, uVar4);
            bVar14 = 0xfffffffe < uVar13;
            uVar13 = uVar13 + 1;
            iVar2 = iVar2 + (uint)bVar14;
            if (iVar1 <= (int)uVar13) {
                FUN_00049a64(param_1, &DAT_0004b8c0, uVar3);
                uVar3 = FUN_00049420(1, 0);
                FUN_00049a64(param_1, &DAT_0004b108, uVar3);
                return 0;
            }
        } while (true);
    }
LAB_0001a3cc:
    FUN_00016928(param_1, 0, 10, "No ASCs");
    return 0;
}

undefined4 FUN_0001a5c8(undefined4 param_1, int param_2)

{
    int iVar1;
    undefined4 uVar2;
    undefined4 uVar3;
    undefined4 uVar4;
    undefined4 uVar5;
    undefined4 uVar6;
    int iVar7;
    undefined4 uVar8;
    int iVar9;
    int iVar10;
    int *piVar11;
    int iVar12;
    int *piVar13;
    undefined2 local_83c[2];
    char local_838[8];
    undefined4 local_830;
    undefined4 local_82c;
    char acStack_828[2052];

    local_82c = 0;
    local_838[0] = '\0';
    local_838[1] = '\0';
    local_838[2] = '\0';
    local_838[3] = '\0';
    local_838[4] = '\0';
    local_838[5] = '\0';
    local_838[6] = '\0';
    local_838[7] = '\0';
    local_830 = 0;
    local_83c[0] = 0;
    if (param_2 != 0) {
        FUN_00042848(local_83c, 1);
        FUN_00016cac(param_1, param_2);
        FUN_000167e8(param_1);
        iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_000762f8);
        if (iVar1 != 0) {
            piVar11 = __errno_location();
            snprintf(acStack_828, 0x800,
                     "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d",
                     *piVar11, "api_new.c", "get_rate", 0x270);
            FUN_0001dbec(3, acStack_828, 1);
            FUN_0003c4b4(1);
        }
        iVar1 = DAT_00077d14;
        iVar10 = DAT_00077d14;
        if (0x17 < DAT_00077d14) {
            iVar10 = 0x18;
        }
        uVar2 = FUN_00048fd0();
        uVar3 = FUN_00048c40();
        snprintf((char *)&local_830, 8, "%s/s", &DAT_0007645c);
        uVar4 = FUN_000491d4(&local_830);
        FUN_00049a64(uVar3, &DAT_0004b8d0, uVar4);
        uVar4 = FUN_00048fd0();
        if (0 < iVar1) {
            iVar9 = 0;
            iVar12 = 0xf;
            do {
                local_838[0] = '\0';
                local_838[1] = '\0';
                local_838[2] = '\0';
                local_838[3] = '\0';
                iVar9 = iVar9 + 1;
                local_838[4] = '\0';
                local_838[5] = '\0';
                local_838[6] = '\0';
                local_838[7] = '\0';
                snprintf(local_838, 8, "%dmin", iVar12);
                uVar5 = FUN_000491d4(local_838);
                FUN_00049f24(uVar4, uVar5);
                iVar12 = iVar12 + 0xf;
            } while (iVar9 < iVar10);
        }
        FUN_00049a64(uVar3, "xAxis", uVar4);
        uVar4 = FUN_00048fd0();
        if (0 < DAT_00076314) {
            piVar11 = &DAT_000765d4;
            iVar12 = 0;
            do {
                uVar5 = FUN_00048c40();
                iVar9 = 0;
                local_838[0] = '\0';
                local_838[1] = '\0';
                local_838[2] = '\0';
                local_838[3] = '\0';
                local_838[4] = '\0';
                local_838[5] = '\0';
                local_838[6] = '\0';
                local_838[7] = '\0';
                snprintf(local_838, 8, "chain%d", piVar11[-0x57]);
                uVar6 = FUN_000491d4(local_838);
                FUN_00049a64(uVar5, &DAT_0004b8f0, uVar6);
                uVar6 = FUN_00048fd0();
                piVar13 = piVar11;
                if (0 < iVar1) {
                    do {
                        iVar7 = piVar13[1];
                        iVar9 = iVar9 + 1;
                        uVar8 = FUN_00049420(iVar7, iVar7 >> 0x1f);
                        FUN_00049f24(uVar6, uVar8);
                        piVar13 = piVar13 + 1;
                    } while (iVar9 < iVar10);
                }
                iVar12 = iVar12 + 1;
                FUN_00049a64(uVar5, &DAT_0004b8f8, uVar6);
                FUN_00049f24(uVar4, uVar5);
                piVar11 = piVar11 + 0x184;
            } while (iVar12 < DAT_00076314);
        }
        FUN_00049a64(uVar3, "series", uVar4);
        FUN_00049f24(uVar2, uVar3);
        FUN_00049a64(param_1, &DAT_0004b908, uVar2);
        iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000762f8);
        if (iVar1 != 0) {
            piVar11 = __errno_location();
            snprintf(acStack_828, 0x800,
                     "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d",
                     *piVar11, "api_new.c", "get_rate", 0x297);
            FUN_0001dbec(3, acStack_828, 1);
            FUN_0003c4b4(1);
        }
        (*DAT_0006797c)();
        return 0;
    }
    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
        (2 < DAT_00067858)) {
        snprintf(acStack_828, 0x800, "%s: input bad api param\n", "get_rate");
        FUN_0001dbec(3, acStack_828, 0);
    }
    return 0x80000002;
}

/* WARNING: Globals starting with '_' overlap smaller symbols at the same
 * address */

undefined4 FUN_0001a998(undefined4 param_1, int param_2)

{
    int iVar1;
    undefined4 uVar2;
    undefined4 uVar3;
    undefined4 uVar4;
    undefined4 uVar5;
    int *piVar6;
    double dVar7;
    undefined8 uVar8;
    undefined2 local_854[2];
    undefined4 local_850;
    undefined4 uStack_84c;
    undefined4 local_848;
    undefined4 uStack_844;
    undefined4 local_840;
    undefined4 uStack_83c;
    undefined4 local_838;
    undefined4 uStack_834;
    char local_830[2056];

    local_850 = 0;
    uStack_84c = 0;
    local_830[4] = '\0';
    local_830[5] = '\0';
    local_830[6] = '\0';
    local_830[7] = '\0';
    local_830[0] = '\0';
    local_830[1] = '\0';
    local_830[2] = '\0';
    local_830[3] = '\0';
    local_854[0] = 0;
    local_848 = 0;
    uStack_844 = 0;
    local_840 = 0;
    uStack_83c = 0;
    local_838 = 0;
    uStack_834 = 0;
    if (param_2 != 0) {
        FUN_00042848(local_854, 1);
        FUN_00016cac(param_1, param_2);
        iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_000762f8);
        if (iVar1 != 0) {
            piVar6 = __errno_location();
            snprintf(local_830 + 8, 0x800,
                     "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar6,
                     "api_new.c", "get_summary", 0x158);
            FUN_0001dbec(3, local_830 + 8, 1);
            FUN_0003c4b4(1);
        }
        FUN_000167e8(param_1);
        uVar2 = FUN_00048fd0();
        uVar8 = FUN_00048c40();
        uVar3 = (undefined4)uVar8;
        if (DAT_00076318 < 2) {
            if (DAT_00076318 == 1) {
                FUN_0003d358(uVar3, (int)((ulonglong)uVar8 >> 0x20));
                uVar8 = 0;
            } else {
                uVar8 = 0;
            }
        } else {
            uVar8 = FUN_0004ad7c(_DAT_000681c0, DAT_000681c4);
        }
        uVar4 = FUN_00049420((int)uVar8, (int)((ulonglong)uVar8 >> 0x20));
        FUN_00049a64(uVar3, "elapsed", uVar4);
        sscanf(&DAT_0007641c, "%lf", &local_850);
        dVar7 = (double)CONCAT44(uStack_84c, local_850) * 100.0;
        FUN_0004ad7c(SUB84(dVar7, 0), (int)((ulonglong)dVar7 >> 0x20));
        dVar7 = (double)FUN_0004ace4();
        uVar4 = FUN_000494a4(SUB84(dVar7 / 100.0, 0));
        FUN_00049a64(uVar3, "rate_5s", uVar4);
        sscanf(&DAT_0007642c, "%lf", &local_848);
        dVar7 = (double)CONCAT44(uStack_844, local_848) * 100.0;
        FUN_0004ad7c(SUB84(dVar7, 0), (int)((ulonglong)dVar7 >> 0x20));
        dVar7 = (double)FUN_0004ace4();
        uVar4 = FUN_000494a4(SUB84(dVar7 / 100.0, 0));
        FUN_00049a64(uVar3, "rate_30m", uVar4);
        sscanf(&DAT_0007643c, "%lf", &local_840);
        dVar7 = (double)CONCAT44(uStack_83c, local_840) * 100.0;
        FUN_0004ad7c(SUB84(dVar7, 0), (int)((ulonglong)dVar7 >> 0x20));
        dVar7 = (double)FUN_0004ace4();
        uVar4 = FUN_000494a4(SUB84(dVar7 / 100.0, 0));
        FUN_00049a64(uVar3, "rate_avg", uVar4);
        sscanf(&DAT_0007644c, "%lf", &local_838);
        dVar7 = (double)CONCAT44(uStack_834, local_838) * 100.0;
        FUN_0004ad7c(SUB84(dVar7, 0), (int)((ulonglong)dVar7 >> 0x20));
        dVar7 = (double)FUN_0004ace4();
        uVar4 = FUN_000494a4(SUB84(dVar7 / 100.0, 0));
        FUN_00049a64(uVar3, "rate_ideal", uVar4);
        snprintf(local_830, 8, "%s/s", &DAT_0007645c);
        uVar4 = FUN_000491d4(local_830);
        FUN_00049a64(uVar3, "rate_unit", uVar4);
        uVar4 = FUN_00049420(DAT_00076058, DAT_00076058 >> 0x1f);
        FUN_00049a64(uVar3, "hw_all", uVar4);
        uVar4 = FUN_00049420(DAT_00068b00, DAT_00068b04);
        FUN_00049a64(uVar3, "bestshare", uVar4);
        iVar1 = FUN_00048fd0();
        if ((iVar1 != 0) && (DAT_000673e0 != 0)) {
            piVar6 = &DAT_000673e0;
            do {
                uVar4 = FUN_00048c40();
                uVar5 = FUN_000491d4(*piVar6);
                FUN_00049a64(uVar4, &DAT_0004b0d0, uVar5);
                (*(code *)piVar6[1])(uVar4, piVar6);
                FUN_00049f24(iVar1, uVar4);
                piVar6 = piVar6 + 6;
            } while (*piVar6 != 0);
        }
        FUN_00049a64(uVar3, "status", iVar1);
        FUN_00049f24(uVar2, uVar3);
        FUN_00049a64(param_1, "SUMMARY", uVar2);
        iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000762f8);
        if (iVar1 != 0) {
            piVar6 = __errno_location();
            snprintf(local_830 + 8, 0x800,
                     "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d",
                     *piVar6, "api_new.c", "get_summary", 0x18d);
            FUN_0001dbec(3, local_830 + 8, 1);
            FUN_0003c4b4(1);
        }
        (*DAT_0006797c)();
        return 0;
    }
    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
        (2 < DAT_00067858)) {
        snprintf(local_830 + 8, 0x800, "%s: input bad api param\n",
                 "get_summary");
        FUN_0001dbec(3, local_830 + 8, 0);
    }
    return 0x80000002;
}

/* WARNING: Globals starting with '_' overlap smaller symbols at the same
 * address */

undefined4 FUN_0001ae38(int param_1, int param_2)

{
    longlong lVar1;
    int iVar2;
    undefined4 uVar3;
    undefined4 uVar4;
    undefined4 uVar5;
    int *piVar6;
    double dVar7;
    undefined8 uVar8;
    undefined2 local_854[2];
    undefined4 local_850;
    undefined4 uStack_84c;
    undefined4 local_848;
    undefined4 uStack_844;
    undefined4 local_840;
    undefined4 uStack_83c;
    char acStack_838[2052];

    local_850 = 0;
    uStack_84c = 0;
    local_848 = 0;
    uStack_844 = 0;
    local_840 = 0;
    uStack_83c = 0;
    local_854[0] = 0;
    if (param_1 == 0 || param_2 == 0) {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (2 < DAT_00067858)) {
            snprintf(acStack_838, 0x800, "%s: input bad api param\n",
                     "get_summary_old");
            FUN_0001dbec(3, acStack_838, 0);
        }
        return 0x80000002;
    }
    FUN_00042848(local_854, 1);
    iVar2 = pthread_mutex_lock((pthread_mutex_t *)&DAT_000762f8);
    if (iVar2 != 0) {
        piVar6 = __errno_location();
        snprintf(acStack_838, 0x800,
                 "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar6,
                 "api_new.c", "get_summary_old", 0x2ec);
        FUN_0001dbec(3, acStack_838, 1);
        FUN_0003c4b4(1);
    }
    FUN_00016928(param_1, 1, 0xb, *(undefined4 *)(param_2 + 8));
    uVar3 = FUN_00048fd0();
    uVar4 = FUN_00048c40();
    FUN_0004ad7c(_DAT_000681c0, DAT_000681c4);
    uVar5 = FUN_00049420();
    FUN_00049a64(uVar4, "Elapsed", uVar5);
    sscanf(&DAT_0007641c, "%lf", &local_850);
    dVar7 = (double)CONCAT44(uStack_84c, local_850) * 100.0;
    FUN_0004ad7c(SUB84(dVar7, 0), (int)((ulonglong)dVar7 >> 0x20));
    dVar7 = (double)FUN_0004ace4();
    uVar5 = FUN_000494a4(SUB84(dVar7 / 100.0, 0));
    FUN_00049a64(uVar4, "GHS 5s", uVar5);
    sscanf(&DAT_0007643c, "%lf", &local_840);
    dVar7 = (double)CONCAT44(uStack_83c, local_840) * 100.0;
    FUN_0004ad7c(SUB84(dVar7, 0), (int)((ulonglong)dVar7 >> 0x20));
    dVar7 = (double)FUN_0004ace4();
    uVar5 = FUN_000494a4(SUB84(dVar7 / 100.0, 0));
    FUN_00049a64(uVar4, "GHS av", uVar5);
    sscanf(&DAT_0007642c, "%lf", &local_848);
    dVar7 = (double)CONCAT44(uStack_844, local_848) * 100.0;
    FUN_0004ad7c(SUB84(dVar7, 0), (int)((ulonglong)dVar7 >> 0x20));
    dVar7 = (double)FUN_0004ace4();
    uVar5 = FUN_000494a4(SUB84(dVar7 / 100.0, 0));
    FUN_00049a64(uVar4, "GHS 30m", uVar5);
    uVar5 = FUN_00049420(DAT_0007606c, 0);
    FUN_00049a64(uVar4, "Found Blocks", uVar5);
    uVar5 = FUN_00049420(DAT_00074f80, DAT_00074f84);
    FUN_00049a64(uVar4, "Getwork", uVar5);
    uVar5 = FUN_00049420(DAT_00072ee8, DAT_00072eec);
    FUN_00049a64(uVar4, "Accepted", uVar5);
    uVar5 = FUN_00049420(DAT_00074fb0, DAT_00074fb4);
    FUN_00049a64(uVar4, "Rejected", uVar5);
    uVar5 = FUN_00049420(DAT_00076058, (int)DAT_00076058 >> 0x1f);
    FUN_00049a64(uVar4, "Hardware Errors", uVar5);
    dVar7 = _DAT_00074f20 + _DAT_00074fa8 + _DAT_00072ef0;
    uVar8 = FUN_0004ad7c(SUB84(dVar7, 0), (int)((ulonglong)dVar7 >> 0x20));
    DAT_00072dc4 = (int)((ulonglong)uVar8 >> 0x20);
    DAT_00072dc0 = (uint)uVar8;
    dVar7 = (double)FUN_0004ace4(DAT_00072ee8, DAT_00072eec);
    if ((double)CONCAT44(DAT_000681c4, _DAT_000681c0) != 0.0) {
        dVar7 = dVar7 / (double)CONCAT44(DAT_000681c4, _DAT_000681c0);
    }
    dVar7 = dVar7 * 60.0 * 100.0;
    FUN_0004ad7c(SUB84(dVar7, 0), (int)((ulonglong)dVar7 >> 0x20));
    dVar7 = (double)FUN_0004ace4();
    dVar7 = (dVar7 / 100.0) * 100.0;
    FUN_0004ad7c(SUB84(dVar7, 0), (int)((ulonglong)dVar7 >> 0x20));
    dVar7 = (double)FUN_0004ace4();
    uVar5 = FUN_000494a4(SUB84(dVar7 / 100.0, 0));
    FUN_00049a64(uVar4, "Utility", uVar5);
    uVar5 = FUN_00049420(DAT_00075000, DAT_00075004);
    FUN_00049a64(uVar4, "Discarded", uVar5);
    uVar5 = FUN_00049420(DAT_000762c0, DAT_000762c4);
    FUN_00049a64(uVar4, "Stale", uVar5);
    uVar5 = FUN_00049420(DAT_00072f00, 0);
    FUN_00049a64(uVar4, "Get Failures", uVar5);
    uVar5 = FUN_00049420(DAT_00072f0c, 0);
    FUN_00049a64(uVar4, "Local Work", uVar5);
    uVar5 = FUN_00049420(DAT_00072da4, 0);
    FUN_00049a64(uVar4, "Remote Failures", uVar5);
    uVar5 = FUN_00049420(DAT_000761d0, 0);
    FUN_00049a64(uVar4, "Network Blocks", uVar5);
    FUN_0004ad7c(SUB84(_DAT_00072d80 * 100.0, 0),
                 (int)((ulonglong)(_DAT_00072d80 * 100.0) >> 0x20));
    dVar7 = (double)FUN_0004ace4();
    uVar5 = FUN_000494a4(SUB84(dVar7 / 100.0, 0));
    FUN_00049a64(uVar4, "Total MH", uVar5);
    dVar7 = (double)FUN_0004ace4(DAT_00072dc0, DAT_00072dc4);
    if ((double)CONCAT44(DAT_000681c4, _DAT_000681c0) != 0.0) {
        dVar7 = dVar7 / (double)CONCAT44(DAT_000681c4, _DAT_000681c0);
    }
    dVar7 = dVar7 * 60.0 * 100.0;
    FUN_0004ad7c(SUB84(dVar7, 0), (int)((ulonglong)dVar7 >> 0x20));
    dVar7 = (double)FUN_0004ace4();
    uVar5 = FUN_000494a4(SUB84(dVar7 / 100.0, 0));
    FUN_00049a64(uVar4, "Work Utility", uVar5);
    FUN_0004ad7c(SUB84(_DAT_00074f20 * 100.0, 0),
                 (int)((ulonglong)(_DAT_00074f20 * 100.0) >> 0x20));
    dVar7 = (double)FUN_0004ace4();
    uVar5 = FUN_000494a4(SUB84(dVar7 / 100.0, 0));
    FUN_00049a64(uVar4, "Difficulty Accepted", uVar5);
    FUN_0004ad7c(SUB84(_DAT_00074fa8 * 100.0, 0),
                 (int)((ulonglong)(_DAT_00074fa8 * 100.0) >> 0x20));
    dVar7 = (double)FUN_0004ace4();
    uVar5 = FUN_000494a4(SUB84(dVar7 / 100.0, 0));
    FUN_00049a64(uVar4, "Difficulty Rejected", uVar5);
    FUN_0004ad7c(SUB84(_DAT_00072ef0 * 100.0, 0),
                 (int)((ulonglong)(_DAT_00072ef0 * 100.0) >> 0x20));
    dVar7 = (double)FUN_0004ace4();
    uVar5 = FUN_000494a4(SUB84(dVar7 / 100.0, 0));
    FUN_00049a64(uVar4, "Difficulty Stale", uVar5);
    uVar5 = FUN_00049420(DAT_00068b00, DAT_00068b04);
    FUN_00049a64(uVar4, "Best Share", uVar5);
    iVar2 = DAT_00072dc4 + ((int)DAT_00076058 >> 0x1f) +
            (uint)CARRY4(DAT_00072dc0, DAT_00076058);
    if (DAT_00072dc0 + DAT_00076058 == 0 && iVar2 == 0) {
        uVar5 = 0;
    } else {
        lVar1 = (longlong)(int)DAT_00076058;
        dVar7 = (double)FUN_0004ace4(DAT_00072dc0 + DAT_00076058, iVar2);
        dVar7 = ((double)lVar1 / dVar7) * 100.0;
        FUN_0004ad7c(SUB84(dVar7, 0), (int)((ulonglong)dVar7 >> 0x20));
        dVar7 = (double)FUN_0004ace4();
        uVar5 = SUB84(dVar7 / 100.0, 0);
    }
    uVar5 = FUN_000494a4(uVar5);
    FUN_00049a64(uVar4, "Device Hardware%", uVar5);
    if (DAT_00072dc0 == 0 && DAT_00072dc4 == 0) {
        uVar5 = 0;
    } else {
        dVar7 = (double)FUN_0004ace4();
        dVar7 = (_DAT_00074fa8 / dVar7) * 100.0;
        FUN_0004ad7c(SUB84(dVar7, 0), (int)((ulonglong)dVar7 >> 0x20));
        dVar7 = (double)FUN_0004ace4();
        uVar5 = SUB84(dVar7 / 100.0, 0);
    }
    uVar5 = FUN_000494a4(uVar5);
    FUN_00049a64(uVar4, "Device Rejected%", uVar5);
    dVar7 = _DAT_00074fa8 + _DAT_00074f20 + _DAT_00072ef0;
    if (dVar7 == 0.0) {
        uVar5 = 0;
    } else {
        dVar7 = (_DAT_00074fa8 / dVar7) * 100.0;
        FUN_0004ad7c(SUB84(dVar7, 0), (int)((ulonglong)dVar7 >> 0x20));
        dVar7 = (double)FUN_0004ace4();
        uVar5 = SUB84(dVar7 / 100.0, 0);
    }
    uVar5 = FUN_000494a4(uVar5);
    FUN_00049a64(uVar4, "Pool Rejected%", uVar5);
    dVar7 = _DAT_00074f20 + _DAT_00074fa8 + _DAT_00072ef0;
    if (dVar7 == 0.0) {
        uVar5 = 0;
    } else {
        dVar7 = (_DAT_00072ef0 / dVar7) * 100.0;
        FUN_0004ad7c(SUB84(dVar7, 0), (int)((ulonglong)dVar7 >> 0x20));
        dVar7 = (double)FUN_0004ace4();
        uVar5 = SUB84(dVar7 / 100.0, 0);
    }
    uVar5 = FUN_000494a4(uVar5);
    FUN_00049a64(uVar4, "Pool Stale%", uVar5);
    uVar5 = FUN_00049420(DAT_00076078, DAT_00076078 >> 0x1f);
    FUN_00049a64(uVar4, "Last getwork", uVar5);
    FUN_00049f24(uVar3, uVar4);
    FUN_00049a64(param_1, "SUMMARY", uVar3);
    uVar3 = FUN_00049420(1, 0);
    FUN_00049a64(param_1, &DAT_0004b108, uVar3);
    iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000762f8);
    if (iVar2 != 0) {
        piVar6 = __errno_location();
        snprintf(acStack_838, 0x800,
                 "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar6,
                 "api_new.c", "get_summary_old", 0x334);
        FUN_0001dbec(3, acStack_838, 1);
        FUN_0003c4b4(1);
    }
    (*DAT_0006797c)();
    return 0;
}

void FUN_0001b704(void)

{
    byte bVar1;
    bool bVar2;
    addrinfo *paVar3;
    int iVar4;
    time_t tVar5;
    time_t tVar6;
    int iVar7;
    ssize_t sVar8;
    int *piVar9;
    int *piVar10;
    void *pvVar11;
    char *pcVar12;
    size_t sVar13;
    int *piVar14;
    int iVar15;
    uint uVar16;
    char *pcVar17;
    char *pcVar18;
    int *unaff_r5;
    uint uVar19;
    undefined4 *puVar20;
    undefined4 uVar21;
    time_t *unaff_r10;
    undefined *unaff_r11;
    uint local_a574;
    uint local_a570;
    char *local_a56c;
    uint local_a568;
    undefined2 *local_a564;
    int local_a540;
    int local_a53c;
    socklen_t local_a538;
    undefined4 local_a534;
    undefined4 local_a530;
    undefined4 local_a52c;
    addrinfo *local_a528;
    undefined4 local_a524;
    undefined4 local_a520;
    uint local_a51c;
    char acStack_a518[12];
    undefined4 local_a50c;
    undefined4 local_a508;
    undefined4 local_a504;
    undefined4 local_a500;
    undefined4 local_a4fc;
    undefined4 local_a4f8;
    undefined4 local_a4f4;
    undefined4 local_a4f0;
    undefined4 auStack_a4ec[4];
    undefined4 local_a4dc;
    addrinfo local_a4d8;
    sockaddr asStack_a4b8[8];
    undefined1 auStack_a438[252];
    undefined1 auStack_a33c[252];
    char acStack_a240[256];
    __pthread_unwind_buf_t a_Stack_a140[6];
    char acStack_a028[2048];
    char acStack_9828[2048];
    char acStack_9028[2048];
    char acStack_8828[2048];
    char acStack_8028[2048];
    char acStack_7828[2048];
    char acStack_7028[2048];
    char acStack_6828[2048];
    char acStack_6028[2048];
    char acStack_5828[2048];
    char acStack_5028[2048];
    char acStack_4828[2048];
    char acStack_4028[2048];
    char acStack_3828[2047];
    char acStack_3029[4097];
    undefined1 local_2028[8196];

    local_a540 = -1;
    local_a53c = -1;
    local_a574 = 2;
    memset(local_2028, 0, 0x2000);
    memset(acStack_3029 + 1, 0, 0x1000);
    local_a508 = 0;
    local_a50c = 0;
    local_a504 = 0;
    local_a500 = 0;
    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
        (4 < DAT_00067858)) {
        snprintf(acStack_a028, 0x800, "Start %s function\n", &DAT_0004b010);
        FUN_0001dbec(5, acStack_a028, 0);
    }
    paVar3 = (addrinfo *)__sigsetjmp(a_Stack_a140, 0);
    if (paVar3 != (addrinfo *)0x0) {
        FUN_00018228(&local_a540);
        __pthread_unwind_next(a_Stack_a140);
        goto LAB_0001c89c;
    }
    __pthread_register_cancel(a_Stack_a140);
    sprintf(acStack_a518, "%d", 0xfbc);
    local_a4d8.ai_flags = 1;
    local_a4d8.ai_family = (int)paVar3;
    local_a4d8.ai_socktype = (int)paVar3;
    local_a4d8.ai_protocol = (int)paVar3;
    local_a4d8.ai_addrlen = (socklen_t)paVar3;
    local_a4d8.ai_addr = (sockaddr *)paVar3;
    local_a4d8.ai_canonname = (char *)paVar3;
    local_a4d8.ai_next = paVar3;
    iVar4 = getaddrinfo("0.0.0.0", acStack_a518, &local_a4d8, &local_a528);
    if (iVar4 == 0) {
        paVar3 = local_a528;
        if (local_a528 == (addrinfo *)0x0) {
            iVar4 = 0;
        } else {
            do {
                iVar4 = socket(local_a528->ai_family, 1, 0);
                if (0 < iVar4)
                    goto LAB_0001b898;
                paVar3 = paVar3->ai_next;
            } while (paVar3 != (addrinfo *)0x0);
            if (iVar4 == -1) {
                if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                    (2 < DAT_00067858)) {
                    snprintf(acStack_5828, 0x800, "%s: exec socket() failed\n",
                             "api_init_socket");
                    FUN_0001dbec(3, acStack_5828, 0);
                    goto LAB_0001bf3c;
                }
                goto LAB_0001bea0;
            }
        }
    LAB_0001b898:
        local_a524 = 1;
        setsockopt(iVar4, 1, 2, &local_a524, 4);
        tVar5 = time((time_t *)0x0);
        while (iVar7 = bind(iVar4, paVar3->ai_addr, paVar3->ai_addrlen),
               iVar7 < 0) {
            piVar9 = __errno_location();
            pcVar17 = strerror(*piVar9);
            tVar6 = time((time_t *)0x0);
            if (0x3d < tVar6 - tVar5) {
                freeaddrinfo(local_a528);
                if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                    (DAT_00067858 < 3))
                    goto LAB_0001bea0;
                snprintf(acStack_4828, 0x800,
                         "api bind to port %d, failed (%s)", 0xfbc, pcVar17);
                FUN_0001dbec(3, acStack_4828, 0);
                goto LAB_0001bf3c;
            }
            if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                (3 < DAT_00067858)) {
                snprintf(
                    acStack_5028, 0x800,
                    "%s: api bind to port %d failed, trying again in 30sec",
                    "api_init_socket", 0xfbc);
                FUN_0001dbec(4, acStack_5028, 0);
            }
            sleep(0x1e);
        }
        freeaddrinfo(local_a528);
        iVar7 = listen(iVar4, 100);
        if (iVar7 < 0) {
            if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                (2 < DAT_00067858)) {
                piVar9 = __errno_location();
                pcVar17 = strerror(*piVar9);
                snprintf(acStack_4028, 0x800, "%s: exec listen() failed (%s)",
                         "api_init_socket", pcVar17);
                FUN_0001dbec(3, acStack_4028, 0);
            }
            close(iVar4);
        } else if (-1 < iVar4) {
            local_a56c = "get_version_old";
            unaff_r11 = &DAT_0004b010;
            unaff_r10 = &DAT_000685a0;
            local_a564 = &DAT_0004bb90;
            local_a570 = 0;
            local_a540 = iVar4;
            do {
                bVar1 = *(byte *)(unaff_r10 + 5);
                if (bVar1 != 0) {
                LAB_0001c51c:
                    __pthread_unregister_cancel(a_Stack_a140);
                    FUN_00018228(&local_a540);
                    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                        (4 < DAT_00067858)) {
                        snprintf(acStack_6828, 0x800, "End %s function !!!",
                                 &DAT_0004b010);
                        FUN_0001dbec(5, acStack_6828, 0);
                    }
                    close(local_a540);
                    return;
                }
                local_a538 = 0x80;
                local_a53c = accept(local_a540, asStack_a4b8, &local_a538);
                if (local_a53c < 0) {
                    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                        (2 < DAT_00067858)) {
                        piVar9 = __errno_location();
                        pcVar17 = strerror(*piVar9);
                        snprintf(acStack_9028, 0x800,
                                 "%s: exec accept failed (%s)", &DAT_0004b010,
                                 pcVar17);
                        FUN_0001dbec(3, acStack_9028, 0);
                    }
                    goto LAB_0001c51c;
                }
                local_a52c = 2;
                local_a534 = 1;
                local_a530 = 5;
                setsockopt(local_a53c, 1, 9, &local_a534, 4);
                setsockopt(local_a53c, 6, 1, &local_a534, 4);
                setsockopt(local_a53c, 6, 6, &local_a534, 4);
                setsockopt(local_a53c, 6, 4, &local_a530, 4);
                setsockopt(local_a53c, 6, 5, &local_a52c, 4);
                local_a520 = 10;
                local_a51c = (uint)bVar1;
                iVar4 = setsockopt(local_a53c, 1, 0x15, &local_a520, 8);
                if (iVar4 != 0) {
                    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                        (2 < DAT_00067858)) {
                        snprintf(acStack_8828, 0x800,
                                 "%s:setsocket SO_SNDTIMEO failed\n",
                                 unaff_r11);
                        FUN_0001dbec(3, acStack_8828, 0);
                    }
                    close(local_a53c);
                }
                iVar4 = setsockopt(local_a53c, 1, 0x14, &local_a520, 8);
                if (iVar4 != 0) {
                    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                        (2 < DAT_00067858)) {
                        snprintf(acStack_8028, 0x800,
                                 "%s:setsocket SO_RCVTIMEO failed\n",
                                 unaff_r11);
                        FUN_0001dbec(3, acStack_8028, 0);
                    }
                    close(local_a53c);
                }
                sVar8 = recv(local_a53c, local_2028, 0xfff, 0);
                if (sVar8 < 1) {
                    local_2028[0] = 0;
                } else {
                    unaff_r10[1] = 0;
                    unaff_r10[2] = 0;
                    unaff_r10[3] = 0;
                    unaff_r10[4] = 0;
                    local_2028[sVar8] = 0;
                    local_a50c = 0;
                    local_a508 = 0;
                    local_a504 = 0;
                    local_a500 = 0;
                    tVar5 = time((time_t *)0x0);
                    *unaff_r10 = tVar5;
                    getnameinfo(asStack_a4b8, 0x80, (char *)(unaff_r10 + 1),
                                0x10, (char *)0x0, 0, 1);
                    if ((DAT_000686e1 != '\0') &&
                        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
                          (6 < DAT_00067858)))) {
                        snprintf(acStack_7828, 0x800, "connect_addr: %s",
                                 unaff_r10 + 1);
                        FUN_0001dbec(7, acStack_7828, 0);
                    }
                    local_a4f8 = 0;
                    local_a4fc = 0;
                    local_a4f4 = 0;
                    local_a4f0 = 0;
                    piVar9 = (int *)FUN_00047e20(local_2028, 0, auStack_a438);
                    if ((piVar9 != (int *)0x0) && (*piVar9 == 0)) {
                        piVar10 = (int *)FUN_00048cc4(piVar9, "command");
                        if ((piVar10 != (int *)0x0) && (*piVar10 == 1)) {
                            piVar14 = (int *)FUN_00048cc4(piVar9, "new_api");
                            iVar4 = 1;
                            if ((piVar14 != (int *)0x0) &&
                                (iVar4 = *piVar14 + -5, iVar4 != 0)) {
                                iVar4 = 1;
                            }
                            local_a568 = local_a570;
                            iVar7 = FUN_00048c40();
                            for (uVar19 = local_a570;
                                 (uVar16 = FUN_00049030(piVar10),
                                 uVar19 < uVar16 &&
                                      (piVar14 =
                                           (int *)FUN_0004904c(piVar10, uVar19),
                                      piVar14 != (int *)0x0 && uVar19 != 0xb));
                                 uVar19 = uVar19 + 1) {
                                if (*piVar14 == 2) {
                                    local_a4fc = 0;
                                    local_a4f8 = 0;
                                    local_a4f4 = 0;
                                    local_a4f0 = 0;
                                    uVar21 = FUN_000491f8();
                                    snprintf((char *)&local_a4fc, 0x10, "%s",
                                             uVar21);
                                    iVar15 =
                                        strcmp((char *)&local_a4fc, "reload");
                                    if (iVar15 == 0 && iVar4 == 0) {
                                        local_a568 = 1;
                                    } else {
                                        uVar21 = FUN_00048c40();
                                        FUN_0001826c(uVar21, &local_a4fc,
                                                     iVar4);
                                        FUN_00049a64(iVar7, &local_a4fc,
                                                     uVar21);
                                    }
                                }
                            }
                            pvVar11 = (void *)FUN_00045c3c(iVar7, 0x6000);
                            if (pvVar11 != (void *)0x0) {
                                FUN_000188cc(&local_a53c, pvVar11);
                            }
                            free(pvVar11);
                            if (local_a568 == 1) {
                                FUN_0001826c(iVar7, "reload", 0);
                            }
                            if ((iVar7 != 0) && (*(int *)(iVar7 + 4) != -1)) {
                                piVar10 = (int *)(iVar7 + 4);
                                DataMemoryBarrier(0xb);
                                do {
                                    iVar4 = *piVar10;
                                    bVar2 = (bool)hasExclusiveAccess(piVar10);
                                } while (!bVar2);
                                *piVar10 = iVar4 + -1;
                                if (iVar4 + -1 == 0) {
                                    FUN_000495fc(iVar7);
                                }
                            }
                            if (piVar9[1] != -1) {
                                piVar10 = piVar9 + 1;
                                DataMemoryBarrier(0xb);
                                do {
                                    iVar4 = *piVar10;
                                    bVar2 = (bool)hasExclusiveAccess(piVar10);
                                } while (!bVar2);
                                *piVar10 = iVar4 + -1;
                                if (iVar4 + -1 == 0) {
                                    FUN_000495fc(piVar9);
                                }
                            }
                            goto LAB_0001b9e8;
                        }
                        if (piVar9[1] != -1) {
                            piVar10 = piVar9 + 1;
                            DataMemoryBarrier(0xb);
                            do {
                                iVar4 = *piVar10;
                                bVar2 = (bool)hasExclusiveAccess(piVar10);
                            } while (!bVar2);
                            *piVar10 = iVar4 + -1;
                            if (iVar4 + -1 == 0) {
                                FUN_000495fc(piVar9);
                            }
                        }
                    }
                    paVar3 = (addrinfo *)FUN_00048c40();
                    unaff_r5 = (int *)FUN_00047e20(local_2028, 0, auStack_a33c);
                    if ((unaff_r5 == (int *)0x0) || (*unaff_r5 != 0)) {
                        local_a574 = 2;
                        snprintf((char *)&local_a50c, 0x10, "%s", local_2028);
                    LAB_0001bddc:
                        FUN_0001826c(paVar3, &local_a50c, local_a574);
                    } else {
                        piVar9 = (int *)FUN_00048cc4(unaff_r5, "command");
                        if ((piVar9 != (int *)0x0) && (*piVar9 == 2)) {
                            uVar21 = FUN_000491f8();
                            snprintf((char *)&local_a50c, 0x10, "%s", uVar21);
                            piVar9 = (int *)FUN_00048cc4(unaff_r5, "new_api");
                            if (piVar9 == (int *)0x0) {
                            LAB_0001c89c:
                                iVar4 = unaff_r5[1];
                            LAB_0001c830:
                                if (iVar4 == -1) {
                                    local_a574 = 1;
                                    goto LAB_0001bddc;
                                }
                                local_a574 = 1;
                            } else {
                                iVar4 = unaff_r5[1];
                                if (*piVar9 != 5)
                                    goto LAB_0001c830;
                                local_a574 = local_a570;
                                if (iVar4 == -1) {
                                    goto LAB_0001bddc;
                                }
                            }
                            piVar9 = unaff_r5 + 1;
                            DataMemoryBarrier(0xb);
                            do {
                                iVar4 = *piVar9;
                                bVar2 = (bool)hasExclusiveAccess(piVar9);
                            } while (!bVar2);
                            *piVar9 = iVar4 + -1;
                            if (iVar4 + -1 == 0) {
                                FUN_000495fc(unaff_r5);
                            }
                            goto LAB_0001bddc;
                        }
                        if (((DAT_00072d88 == '\0') &&
                             (DAT_000686e0 == '\0')) &&
                            (DAT_00067858 < 3)) {
                            if (unaff_r5[1] != -1) {
                            LAB_0001c218:
                                piVar9 = unaff_r5 + 1;
                                DataMemoryBarrier(0xb);
                                do {
                                    iVar4 = *piVar9;
                                    bVar2 = (bool)hasExclusiveAccess(piVar9);
                                } while (!bVar2);
                                *piVar9 = iVar4 + -1;
                                if (iVar4 + -1 == 0) {
                                    FUN_000495fc(unaff_r5);
                                }
                                goto LAB_0001c23c;
                            }
                        LAB_0001c488:
                            if (2 < DAT_00067858)
                                goto LAB_0001c264;
                        } else {
                            snprintf(acStack_3828, 0x800,
                                     "%s error: format error about command\n",
                                     local_a56c + 0xe0);
                            FUN_0001dbec(3, acStack_3828, 0);
                            if (unaff_r5[1] != -1)
                                goto LAB_0001c218;
                        LAB_0001c23c:
                            if ((DAT_00072d88 == '\0') &&
                                (DAT_000686e0 == '\0'))
                                goto LAB_0001c488;
                        LAB_0001c264:
                            snprintf(acStack_7028, 0x800,
                                     "%s: input invaild param format",
                                     unaff_r11);
                            FUN_0001dbec(3, acStack_7028, 0);
                        }
                        FUN_00016928(paVar3, 0, 0x18,
                                     "Missing JSON \'command\'");
                    }
                    if (local_a574 == 2) {
                        pcVar17 = acStack_3029 + 1;
                        memset(pcVar17, 0, 0x1000);
                        if (((paVar3 != (addrinfo *)0x0) &&
                             (piVar9 = (int *)FUN_00048cc4(paVar3, "STATUS"),
                              piVar9 != (int *)0x0)) &&
                            ((*piVar9 == 1 &&
                              ((piVar9 = (int *)FUN_0004904c(piVar9, 0),
                                piVar9 != (int *)0x0 && (*piVar9 == 0)))))) {
                            FUN_00048f2c();
                            pcVar12 = (char *)FUN_00048fac();
                            while (pcVar12 != (char *)0x0) {
                                FUN_00048fc4(pcVar12);
                                iVar4 = FUN_00048fb8();
                                if (iVar4 == 0)
                                    break;
                                sVar13 = strlen(pcVar17);
                                pcVar18 = stpcpy(pcVar17 + sVar13, pcVar12);
                                *(undefined2 *)pcVar18 = *local_a564;
                                FUN_00018418(pcVar17, iVar4);
                                sVar13 = strlen(pcVar17);
                                (pcVar17 + sVar13)[0] = ',';
                                (pcVar17 + sVar13)[1] = '\0';
                                uVar21 = FUN_00048fc4(pcVar12);
                                FUN_00048f78(piVar9, uVar21);
                                pcVar12 = (char *)FUN_00048fac();
                            }
                            sVar13 = strlen(acStack_3029 + 1);
                            acStack_3029[sVar13] = '|';
                            memset(acStack_a240, 0, 0x100);
                            auStack_a4ec[0] =
                                *(undefined4 *)(local_a56c + 0xf0);
                            auStack_a4ec[1] =
                                *(undefined4 *)(local_a56c + 0xf4);
                            auStack_a4ec[2] =
                                *(undefined4 *)(local_a56c + 0xf8);
                            auStack_a4ec[3] =
                                *(undefined4 *)(local_a56c + 0xfc);
                            local_a4dc = *(undefined4 *)(local_a56c + 0x100);
                            uVar19 = local_a570;
                            puVar20 = auStack_a4ec;
                            do {
                                uVar21 = *puVar20;
                                piVar9 = (int *)FUN_00048cc4(paVar3, uVar21);
                                if ((piVar9 != (int *)0x0) && (*piVar9 == 1)) {
                                    if ((uVar19 & 0xfffffffb) == 0) {
                                        snprintf(acStack_a240, 0x100, "%s,",
                                                 uVar21);
                                        strcat(acStack_3029 + 1, acStack_a240);
                                    }
                                    uVar16 = FUN_00049030(piVar9);
                                    uVar19 = local_a570;
                                    if (0 < (int)uVar16) {
                                        do {
                                            piVar10 = (int *)FUN_0004904c(
                                                piVar9, uVar19);
                                            if ((piVar10 != (int *)0x0) &&
                                                (*piVar10 == 0)) {
                                                FUN_00048f2c();
                                                pcVar17 =
                                                    (char *)FUN_00048fac();
                                                if (pcVar17 != (char *)0x0) {
                                                    pcVar12 = acStack_3029 + 1;
                                                    do {
                                                        FUN_00048fc4(pcVar17);
                                                        iVar4 = FUN_00048fb8();
                                                        if (iVar4 == 0)
                                                            break;
                                                        sVar13 =
                                                            strlen(pcVar12);
                                                        pcVar18 = stpcpy(
                                                            pcVar12 + sVar13,
                                                            pcVar17);
                                                        *(undefined2 *)pcVar18 =
                                                            *local_a564;
                                                        FUN_00018418(pcVar12,
                                                                     iVar4);
                                                        sVar13 =
                                                            strlen(pcVar12);
                                                        (pcVar12 + sVar13)[0] =
                                                            ',';
                                                        (pcVar12 + sVar13)[1] =
                                                            '\0';
                                                        uVar21 = FUN_00048fc4(
                                                            pcVar17);
                                                        FUN_00048f78(piVar10,
                                                                     uVar21);
                                                        pcVar17 = (char *)
                                                            FUN_00048fac();
                                                    } while (pcVar17 !=
                                                             (char *)0x0);
                                                }
                                                sVar13 =
                                                    strlen(acStack_3029 + 1);
                                                acStack_3029[sVar13] = '|';
                                                if (uVar16 - 1 != uVar19) {
                                                    sVar13 = strlen(
                                                        acStack_3029 + 1);
                                                    acStack_3029[sVar13 + 1] =
                                                        ',';
                                                }
                                            }
                                            uVar19 = uVar19 + 1;
                                        } while (uVar16 != uVar19);
                                    }
                                    break;
                                }
                                uVar19 = uVar19 + 1;
                                puVar20 = puVar20 + 1;
                            } while (uVar19 != 5);
                        }
                        FUN_000188cc(&local_a53c, acStack_3029 + 1);
                        if ((paVar3 != (addrinfo *)0x0) &&
                            (paVar3->ai_family != -1)) {
                            piVar9 = &paVar3->ai_family;
                            DataMemoryBarrier(0xb);
                            do {
                                iVar4 = *piVar9;
                                bVar2 = (bool)hasExclusiveAccess(piVar9);
                            } while (!bVar2);
                            *piVar9 = iVar4 + -1;
                            if (iVar4 + -1 == 0) {
                                FUN_000495fc(paVar3);
                            }
                        }
                    } else {
                        pvVar11 = (void *)FUN_00045c3c(paVar3, 0x6000);
                        if (pvVar11 != (void *)0x0) {
                            FUN_000188cc(&local_a53c, pvVar11);
                        }
                        if ((paVar3 != (addrinfo *)0x0) &&
                            (paVar3->ai_family != -1)) {
                            piVar9 = &paVar3->ai_family;
                            DataMemoryBarrier(0xb);
                            do {
                                iVar4 = *piVar9;
                                bVar2 = (bool)hasExclusiveAccess(piVar9);
                            } while (!bVar2);
                            *piVar9 = iVar4 + -1;
                            if (iVar4 + -1 == 0) {
                                FUN_000495fc(paVar3);
                            }
                        }
                        free(pvVar11);
                    }
                }
            LAB_0001b9e8:
                close(local_a53c);
            } while (true);
        }
    LAB_0001bf3c:
        if ((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0'))
            goto LAB_0001beb4;
    } else if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
               (2 < DAT_00067858)) {
        snprintf(acStack_6028, 0x800, "%s: exec getaddrinfo() failed\n",
                 "api_init_socket");
        FUN_0001dbec(3, acStack_6028, 0);
        goto LAB_0001bf3c;
    }
LAB_0001bea0:
    if (DAT_00067858 < 3) {
        return;
    }
LAB_0001beb4:
    snprintf(acStack_9828, 0x800, "%s: init socket failed", &DAT_0004b010);
    FUN_0001dbec(3, acStack_9828, 0);
    return;
}

void FUN_0001c9a8(undefined4 *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    char cVar1;
    void *pvVar2;
    undefined4 *puVar3;
    undefined4 uVar4;
    int iVar5;
    int iVar6;
    undefined4 *puVar7;
    size_t __nmemb;
    char acStack_818[2048];

    if (*(char *)(param_1 + 1) != '\0') {
        snprintf(
            acStack_818, 0x800,
            "List %s store can\'t %s() - from %s %s() line %d in %s %s():%d",
            *param_1, "k_alloc_items", param_2, param_3, param_4, "klist.c",
            "k_alloc_items", 0x13);
        FUN_0001dbec(3, acStack_818, 1);
        FUN_0003c4b4(1);
    }
    iVar6 = param_1[10];
    if (iVar6 < 1) {
        __nmemb = param_1[9];
    } else {
        iVar5 = param_1[6];
        if (iVar6 <= iVar5) {
            return;
        }
        __nmemb = param_1[9];
        if (iVar6 < (int)(iVar5 + __nmemb)) {
            __nmemb = iVar6 - iVar5;
        }
    }
    iVar6 = param_1[0xc];
    param_1[0xc] = iVar6 + 1;
    pvVar2 = realloc((void *)param_1[0xd], (iVar6 + 1) * 4);
    param_1[0xd] = pvVar2;
    if (pvVar2 == (void *)0x0) {
        snprintf(acStack_818, 0x800,
                 "List %s item_memory failed to realloc count=%d in %s %s():%d",
                 *param_1, param_1[0xc], "klist.c", "k_alloc_items", 0x21);
        FUN_0001dbec(3, acStack_818, 1);
        FUN_0003c4b4(1);
    }
    puVar3 = (undefined4 *)calloc(__nmemb, 0x10);
    if (puVar3 == (undefined4 *)0x0) {
        snprintf(acStack_818, 0x800,
                 "List %s failed to calloc %d new items - total was %d, limit "
                 "was %d in %s %s():%d",
                 *param_1, __nmemb, param_1[6], param_1[10], "klist.c",
                 "k_alloc_items", 0x26);
        FUN_0001dbec(3, acStack_818, 1);
        FUN_0003c4b4(1);
    }
    *(undefined4 **)(param_1[0xd] + (param_1[0xc] + 0x3fffffff) * 4) = puVar3;
    uVar4 = *param_1;
    param_1[7] = __nmemb;
    param_1[8] = __nmemb;
    param_1[6] = param_1[6] + __nmemb;
    *puVar3 = uVar4;
    puVar3[1] = 0;
    puVar3[2] = puVar3 + 4;
    if (2 < (int)__nmemb) {
        puVar7 = puVar3 + 8;
        do {
            puVar7[-4] = uVar4;
            puVar7[-3] = puVar7 + -8;
            puVar7[-2] = puVar7;
            puVar7 = puVar7 + 4;
        } while (puVar7 != puVar3 + __nmemb * 4);
    }
    iVar6 = __nmemb + 0xfffffff;
    cVar1 = *(char *)(param_1 + 0xb);
    puVar3[iVar6 * 4] = uVar4;
    param_1[3] = puVar3;
    puVar7 = puVar3 + iVar6 * 4;
    puVar7[1] = puVar3 + iVar6 * 4 + -4;
    puVar7[2] = 0;
    if (cVar1 != '\0') {
        param_1[4] = puVar7;
    }
    do {
        iVar6 = param_1[0xe];
        param_1[0xe] = iVar6 + 1;
        pvVar2 = realloc((void *)param_1[0xf], (iVar6 + 1) * 4);
        param_1[0xf] = pvVar2;
        if (pvVar2 == (void *)0x0) {
            snprintf(
                acStack_818, 0x800,
                "List %s data_memory failed to realloc count=%d in %s %s():%d",
                *param_1, param_1[0xe], "klist.c", "k_alloc_items", 0x45);
            FUN_0001dbec(3, acStack_818, 1);
            FUN_0003c4b4(1);
        }
        pvVar2 = calloc(1, param_1[5]);
        puVar3[3] = pvVar2;
        if (pvVar2 == (void *)0x0) {
            snprintf(acStack_818, 0x800,
                     "List %s failed to calloc item data in %s %s():%d",
                     *param_1, "klist.c", "k_alloc_items", 0x49);
            FUN_0001dbec(3, acStack_818, 1);
            FUN_0003c4b4(1);
            pvVar2 = (void *)puVar3[3];
        }
        *(void **)(param_1[0xf] + (param_1[0xe] + 0x3fffffff) * 4) = pvVar2;
        puVar3 = (undefined4 *)puVar3[2];
    } while (puVar3 != (undefined4 *)0x0);
    return;
}

undefined4 *FUN_0001cce4(undefined4 *param_1)

{
    undefined1 uVar1;
    undefined4 *puVar2;
    undefined4 uVar3;
    undefined4 uVar4;
    char acStack_810[2052];

    puVar2 = (undefined4 *)calloc(1, 0x40);
    uVar3 = *param_1;
    if (puVar2 == (undefined4 *)0x0) {
        snprintf(acStack_810, 0x800,
                 "Failed to calloc store for %s in %s %s():%d", uVar3,
                 "klist.c", "k_new_store", 0x55);
        FUN_0001dbec(3, acStack_810, 1);
        FUN_0003c4b4(1);
        uVar3 = *param_1;
    }
    uVar4 = param_1[2];
    uVar1 = *(undefined1 *)(param_1 + 0xb);
    *puVar2 = uVar3;
    puVar2[2] = uVar4;
    *(undefined1 *)(puVar2 + 0xb) = uVar1;
    *(undefined1 *)(puVar2 + 1) = 1;
    return puVar2;
}

undefined4 *FUN_0001cd8c(undefined4 param_1, undefined4 param_2, int param_3,
                         int param_4, undefined1 param_5, undefined4 param_6,
                         undefined4 param_7, undefined4 param_8)

{
    undefined4 *puVar1;
    pthread_mutex_t *__mutex;
    int iVar2;
    int *piVar3;
    char acStack_820[2048];

    if (param_3 < 1) {
        snprintf(
            acStack_820, 0x800,
            "Invalid new list %s with allocate %d must be > 0 in %s %s():%d",
            param_1, param_3, "klist.c", "_k_new_list", 100);
        FUN_0001dbec(3, acStack_820, 1);
        FUN_0003c4b4(1);
    }
    if (param_4 < 0) {
        snprintf(acStack_820, 0x800,
                 "Invalid new list %s with limit %d must be >= 0 in %s %s():%d",
                 param_1, param_4, "klist.c", "_k_new_list", 0x67);
        FUN_0001dbec(3, acStack_820, 1);
        FUN_0003c4b4(1);
    }
    puVar1 = (undefined4 *)calloc(1, 0x40);
    if (puVar1 == (undefined4 *)0x0) {
        snprintf(acStack_820, 0x800, "Failed to calloc list %s in %s %s():%d",
                 param_1, "klist.c", "_k_new_list", 0x6b);
        FUN_0001dbec(3, acStack_820, 1);
        FUN_0003c4b4(1);
    }
    *(undefined1 *)(puVar1 + 1) = 0;
    __mutex = (pthread_mutex_t *)calloc(1, 0x38);
    puVar1[2] = __mutex;
    if (__mutex == (pthread_mutex_t *)0x0) {
        snprintf(acStack_820, 0x800,
                 "Failed to calloc lock for list %s in %s %s():%d", param_1,
                 "klist.c", "_k_new_list", 0x71);
        FUN_0001dbec(3, acStack_820, 1);
        FUN_0003c4b4(1);
        __mutex = (pthread_mutex_t *)puVar1[2];
    }
    iVar2 = pthread_mutex_init(__mutex, (pthread_mutexattr_t *)0x0);
    if (iVar2 != 0) {
        piVar3 = __errno_location();
        snprintf(acStack_820, 0x800,
                 "Failed to pthread_mutex_init errno=%d in %s %s():%d", *piVar3,
                 "klist.c", "_k_new_list", 0x73);
        FUN_0001dbec(3, acStack_820, 1);
        FUN_0003c4b4(1);
    }
    iVar2 = pthread_rwlock_init((pthread_rwlock_t *)(__mutex + 1),
                                (pthread_rwlockattr_t *)0x0);
    if (iVar2 != 0) {
        piVar3 = __errno_location();
        snprintf(acStack_820, 0x800,
                 "Failed to pthread_rwlock_init errno=%d in %s %s():%d",
                 *piVar3, "klist.c", "_k_new_list", 0x73);
        FUN_0001dbec(3, acStack_820, 1);
        FUN_0003c4b4(1);
    }
    *puVar1 = param_1;
    puVar1[5] = param_2;
    puVar1[9] = param_3;
    puVar1[10] = param_4;
    *(undefined1 *)(puVar1 + 0xb) = param_5;
    FUN_0001c9a8(puVar1, param_6, param_7, param_8);
    return puVar1;
}

int FUN_0001d03c(int param_1)

{
    int iVar1;
    int iVar2;

    iVar2 = *(int *)(param_1 + 0xc);
    if (iVar2 == 0) {
        if (*(char *)(param_1 + 4) == '\0') {
            FUN_0001c9a8();
            iVar2 = *(int *)(param_1 + 0xc);
            if (iVar2 != 0)
                goto LAB_0001d050;
        }
        return 0;
    }
LAB_0001d050:
    iVar1 = *(int *)(iVar2 + 8);
    *(int *)(param_1 + 0xc) = iVar1;
    if (iVar1 == 0) {
        if (*(char *)(param_1 + 0x2c) != '\0') {
            *(undefined4 *)(param_1 + 0x10) = 0;
        }
    } else {
        *(undefined4 *)(iVar1 + 4) = 0;
    }
    *(undefined4 *)(iVar2 + 8) = 0;
    *(undefined4 *)(iVar2 + 4) = 0;
    *(int *)(param_1 + 0x1c) = *(int *)(param_1 + 0x1c) + -1;
    return iVar2;
}

int FUN_0001d0c4(int param_1)

{
    int iVar1;

    iVar1 = FUN_0001d03c();
    if (iVar1 != 0) {
        memset(*(void **)(iVar1 + 0xc), 0, *(size_t *)(param_1 + 0x14));
    }
    return iVar1;
}

void FUN_0001d0f0(undefined4 *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    int iVar1;
    int iVar2;
    char acStack_810[2052];

    if (*(char *)(param_1 + 0xb) == '\0') {
        snprintf(acStack_810, 0x800,
                 "List %s can\'t %s() - do_tail is false - from %s %s() line "
                 "%d in %s %s():%d",
                 *param_1, "_k_unlink_tail", param_2, param_3, param_4,
                 "klist.c", "_k_unlink_tail", 0xb5);
        FUN_0001dbec(3, acStack_810, 1);
        FUN_0003c4b4(1);
    }
    iVar1 = param_1[4];
    if (iVar1 != 0) {
        iVar2 = *(int *)(iVar1 + 4);
        param_1[4] = iVar2;
        if (iVar2 == 0) {
            param_1[3] = 0;
        } else {
            *(undefined4 *)(iVar2 + 8) = 0;
        }
        *(undefined4 *)(iVar1 + 8) = 0;
        *(undefined4 *)(iVar1 + 4) = 0;
        param_1[7] = param_1[7] + -1;
    }
    return;
}

void FUN_0001d1b8(int *param_1, int *param_2, undefined4 param_3,
                  undefined4 param_4, undefined4 param_5)

{
    char acStack_810[2048];

    if (*param_2 != *param_1) {
        snprintf(acStack_810, 0x800,
                 "List %s can\'t %s() a %s item - from %s %s() line %d in %s "
                 "%s():%d",
                 *param_1, "_k_add_head", *param_2, param_3, param_4, param_5,
                 "klist.c", "_k_add_head", 0xcd);
        FUN_0001dbec(3, acStack_810, 1);
        FUN_0003c4b4(1);
    }
    param_2[1] = 0;
    param_2[2] = param_1[3];
    if (param_1[3] != 0) {
        *(int **)(param_1[3] + 4) = param_2;
    }
    param_1[3] = (int)param_2;
    if (((char)param_1[0xb] != '\0') && (param_1[4] == 0)) {
        param_1[4] = (int)param_2;
    }
    param_1[7] = param_1[7] + 1;
    param_1[8] = param_1[8] + 1;
    return;
}

void FUN_0001d28c(int *param_1, int *param_2, undefined4 param_3,
                  undefined4 param_4, undefined4 param_5)

{
    int iVar1;
    char acStack_818[2052];

    if (*param_2 != *param_1) {
        snprintf(acStack_818, 0x800,
                 "List %s can\'t %s() a %s item - from %s %s() line %d in %s "
                 "%s():%d",
                 *param_1, "_k_add_tail", *param_2, param_3, param_4, param_5,
                 "klist.c", "_k_add_tail", 0xec);
        FUN_0001dbec(3, acStack_818, 1);
        FUN_0003c4b4(1);
    }
    if ((char)param_1[0xb] == '\0') {
        snprintf(acStack_818, 0x800,
                 "List %s can\'t %s() - do_tail is false - from %s %s() line "
                 "%d in %s %s():%d",
                 *param_1, "_k_add_tail", param_3, param_4, param_5, "klist.c",
                 "_k_add_tail", 0xf1);
        FUN_0001dbec(3, acStack_818, 1);
        FUN_0003c4b4(1);
    }
    iVar1 = param_1[4];
    param_2[2] = 0;
    param_2[1] = iVar1;
    if (param_1[4] != 0) {
        *(int **)(param_1[4] + 8) = param_2;
    }
    param_1[4] = (int)param_2;
    if (param_1[3] == 0) {
        param_1[3] = (int)param_2;
    }
    param_1[7] = param_1[7] + 1;
    param_1[8] = param_1[8] + 1;
    return;
}

void FUN_0001d3d8(int *param_1, int *param_2, int param_3, undefined4 param_4,
                  undefined4 param_5, undefined4 param_6)

{
    char acStack_818[2052];

    if (*param_2 != *param_1) {
        snprintf(acStack_818, 0x800,
                 "List %s can\'t %s() a %s item - from %s %s() line %d in %s "
                 "%s():%d",
                 *param_1, "_k_insert_before", *param_2, param_4, param_5,
                 param_6, "klist.c", "_k_insert_before", 0x106);
        FUN_0001dbec(3, acStack_818, 1);
        FUN_0003c4b4(1);
    }
    if (param_3 == 0) {
        snprintf(acStack_818, 0x800,
                 "%s() (%s) can\'t before a null item - from %s %s() line %d "
                 "in %s %s():%d",
                 "_k_insert_before", *param_1, param_4, param_5, param_6,
                 "klist.c", "_k_insert_before", 0x10b);
        FUN_0001dbec(3, acStack_818, 1);
        FUN_0003c4b4(1);
    }
    param_2[2] = param_3;
    param_2[1] = *(int *)(param_3 + 4);
    if (*(int *)(param_3 + 4) == 0) {
        param_1[3] = (int)param_2;
    } else {
        *(int **)(*(int *)(param_3 + 4) + 8) = param_2;
    }
    *(int **)(param_3 + 4) = param_2;
    param_1[7] = param_1[7] + 1;
    param_1[8] = param_1[8] + 1;
    return;
}

void FUN_0001d520(int *param_1, int *param_2, int param_3, undefined4 param_4,
                  undefined4 param_5, undefined4 param_6)

{
    char acStack_818[2052];

    if (*param_2 != *param_1) {
        snprintf(acStack_818, 0x800,
                 "List %s can\'t %s() a %s item - from %s %s() line %d in %s "
                 "%s():%d",
                 *param_1, "_k_insert_after", *param_2, param_4, param_5,
                 param_6, "klist.c", "_k_insert_after", 0x11e);
        FUN_0001dbec(3, acStack_818, 1);
        FUN_0003c4b4(1);
    }
    if (param_3 == 0) {
        snprintf(acStack_818, 0x800,
                 "%s() (%s) can\'t after a null item - from %s %s() line %d in "
                 "%s %s():%d",
                 "_k_insert_after", *param_1, param_4, param_5, param_6,
                 "klist.c", "_k_insert_after", 0x123);
        FUN_0001dbec(3, acStack_818, 1);
        FUN_0003c4b4(1);
    }
    param_2[1] = param_3;
    param_2[2] = *(int *)(param_3 + 8);
    if (*(int *)(param_3 + 8) == 0) {
        if ((char)param_1[0xb] != '\0') {
            param_1[4] = (int)param_2;
        }
    } else {
        *(int **)(*(int *)(param_3 + 8) + 4) = param_2;
    }
    *(int **)(param_3 + 8) = param_2;
    param_1[7] = param_1[7] + 1;
    param_1[8] = param_1[8] + 1;
    return;
}

void FUN_0001d674(int *param_1, int *param_2, undefined4 param_3,
                  undefined4 param_4, undefined4 param_5)

{
    int iVar1;
    char acStack_810[2048];

    if (*param_2 != *param_1) {
        snprintf(acStack_810, 0x800,
                 "List %s can\'t %s() a %s item - from %s %s() line %d in %s "
                 "%s():%d",
                 *param_1, "_k_unlink_item", *param_2, param_3, param_4,
                 param_5, "klist.c", "_k_unlink_item", 0x138);
        FUN_0001dbec(3, acStack_810, 1);
        FUN_0003c4b4(1);
    }
    iVar1 = param_2[2];
    if (param_2[1] != 0) {
        *(int *)(param_2[1] + 8) = iVar1;
        iVar1 = param_2[2];
    }
    if (iVar1 != 0) {
        *(int *)(iVar1 + 4) = param_2[1];
    }
    if ((int *)param_1[3] == param_2) {
        param_1[3] = param_2[2];
    }
    if (((char)param_1[0xb] != '\0') && ((int *)param_1[4] == param_2)) {
        param_1[4] = param_2[1];
    }
    param_2[2] = 0;
    param_2[1] = 0;
    param_1[7] = param_1[7] + -1;
    return;
}

void FUN_0001d760(int *param_1, int *param_2, undefined4 param_3,
                  undefined4 param_4, undefined4 param_5)

{
    int iVar1;
    char acStack_818[2048];

    if (*param_1 != *param_2) {
        snprintf(acStack_818, 0x800,
                 "List %s can\'t %s() to a %s list - from %s %s() line %d in "
                 "%s %s():%d",
                 *param_1, "_k_list_transfer_to_head", *param_2, param_3,
                 param_4, param_5, "klist.c", "_k_list_transfer_to_head",
                 0x152);
        FUN_0001dbec(3, acStack_818, 1);
        FUN_0003c4b4(1);
    }
    if ((char)param_1[0xb] == '\0') {
        snprintf(acStack_818, 0x800,
                 "List %s can\'t %s() - do_tail is false - from %s %s() line "
                 "%d in %s %s():%d",
                 *param_1, "_k_list_transfer_to_head", param_3, param_4,
                 param_5, "klist.c", "_k_list_transfer_to_head", 0x157);
        FUN_0001dbec(3, acStack_818, 1);
        FUN_0003c4b4(1);
    }
    if (param_1[3] != 0) {
        if (param_2[3] == 0) {
            param_2[4] = param_1[4];
            iVar1 = 0;
        } else {
            *(int *)(param_2[3] + 4) = param_1[4];
            iVar1 = param_2[3];
        }
        *(int *)(param_1[4] + 8) = iVar1;
        param_2[3] = param_1[3];
        param_1[4] = 0;
        param_1[3] = 0;
        param_2[7] = param_2[7] + param_1[7];
        param_1[7] = 0;
        param_2[8] = param_2[8] + param_1[8];
        param_1[8] = 0;
    }
    return;
}

void FUN_0001d8d0(int *param_1, int *param_2, undefined4 param_3,
                  undefined4 param_4, undefined4 param_5)

{
    int iVar1;
    char acStack_818[2048];

    if (*param_1 != *param_2) {
        snprintf(acStack_818, 0x800,
                 "List %s can\'t %s() to a %s list - from %s %s() line %d in "
                 "%s %s():%d",
                 *param_1, "_k_list_transfer_to_tail", *param_2, param_3,
                 param_4, param_5, "klist.c", "_k_list_transfer_to_tail",
                 0x170);
        FUN_0001dbec(3, acStack_818, 1);
        FUN_0003c4b4(1);
    }
    if ((char)param_1[0xb] == '\0') {
        snprintf(acStack_818, 0x800,
                 "List %s can\'t %s() - do_tail is false - from %s %s() line "
                 "%d in %s %s():%d",
                 *param_1, "_k_list_transfer_to_tail", param_3, param_4,
                 param_5, "klist.c", "_k_list_transfer_to_tail", 0x175);
        FUN_0001dbec(3, acStack_818, 1);
        FUN_0003c4b4(1);
    }
    iVar1 = param_1[3];
    if (iVar1 != 0) {
        if (param_2[4] == 0) {
            param_2[3] = iVar1;
            iVar1 = 0;
        } else {
            *(int *)(param_2[4] + 8) = iVar1;
            iVar1 = param_2[4];
        }
        *(int *)(param_1[3] + 4) = iVar1;
        param_2[4] = param_1[4];
        param_1[4] = 0;
        param_1[3] = 0;
        param_2[7] = param_2[7] + param_1[7];
        param_1[7] = 0;
        param_2[8] = param_2[8] + param_1[8];
        param_1[8] = 0;
    }
    return;
}

undefined4 FUN_0001da3c(undefined4 *param_1, undefined4 param_2,
                        undefined4 param_3, undefined4 param_4)

{
    int iVar1;
    int iVar2;
    pthread_mutex_t *__mutex;
    char acStack_810[2052];

    if (*(char *)(param_1 + 1) != '\0') {
        snprintf(
            acStack_810, 0x800,
            "List %s can\'t %s() a store - from %s %s() line %d in %s %s():%d",
            *param_1, "_k_free_list", param_2, param_3, param_4, "klist.c",
            "_k_free_list", 400);
        FUN_0001dbec(3, acStack_810, 1);
        FUN_0003c4b4(1);
    }
    if (0 < (int)param_1[0xc]) {
        iVar2 = 0;
        do {
            iVar1 = iVar2 * 4;
            iVar2 = iVar2 + 1;
            free(*(void **)(param_1[0xd] + iVar1));
        } while (iVar2 < (int)param_1[0xc]);
    }
    free((void *)param_1[0xd]);
    if (0 < (int)param_1[0xe]) {
        iVar2 = 0;
        do {
            iVar1 = iVar2 * 4;
            iVar2 = iVar2 + 1;
            free(*(void **)(param_1[0xf] + iVar1));
        } while (iVar2 < (int)param_1[0xe]);
    }
    free((void *)param_1[0xf]);
    __mutex = (pthread_mutex_t *)param_1[2];
    pthread_rwlock_destroy((pthread_rwlock_t *)(__mutex + 1));
    pthread_mutex_destroy(__mutex);
    free((void *)param_1[2]);
    free(param_1);
    return 0;
}

undefined4 FUN_0001db58(undefined4 *param_1, undefined4 param_2,
                        undefined4 param_3, undefined4 param_4)

{
    char acStack_810[2052];

    if (*(char *)(param_1 + 1) == '\0') {
        snprintf(acStack_810, 0x800,
                 "Store %s can\'t %s() the list - from %s %s() line %d in %s "
                 "%s():%d",
                 *param_1, "_k_free_store", param_2, param_3, param_4,
                 "klist.c", "_k_free_store", 0x1a8);
        FUN_0001dbec(3, acStack_810, 1);
        FUN_0003c4b4(1);
    }
    free(param_1);
    return 0;
}

void FUN_0001dbec(uint param_1, char *param_2, undefined4 param_3)

{
    FILE *__s;
    tm *ptVar1;
    int iVar2;
    size_t sVar3;
    byte bVar4;
    uint local_6c;
    uint local_68;
    uint local_64;
    char acStack_60[64];

    local_68 = (uint)DAT_00072d88;
    if (local_68 == 0) {
        local_64 = local_68;
        FUN_00020580(&local_68);
        local_6c = local_68;
        iVar2 = (int)local_64 / 1000;
        ptVar1 = localtime((time_t *)&local_6c);
        snprintf(acStack_60, 0x40, " [%d-%02d-%02d %02d:%02d:%02d.%03d] ",
                 ptVar1->tm_year + 0x76c, ptVar1->tm_mon + 1, ptVar1->tm_mday,
                 ptVar1->tm_hour, ptVar1->tm_min, ptVar1->tm_sec, iVar2);
        iVar2 = fileno(stderr);
        iVar2 = isatty(iVar2);
        if (iVar2 == 0) {
            fprintf(stderr, "%s%s\n", acStack_60, param_2);
            fflush(stderr);
        }
        if ((DAT_000685b8 != '\0') &&
            ((DAT_000685bc != (FILE *)0x0 ||
              (DAT_000685bc =
                   fopen64((char *)&DAT_000685e0, (char *)&DAT_000685c0),
               DAT_000685bc != (FILE *)0x0)))) {
            __s = DAT_000685bc;
            sVar3 = strlen(acStack_60);
            fwrite(acStack_60, sVar3, 1, __s);
            sVar3 = strlen(param_2);
            fwrite(param_2, sVar3, 1, DAT_000685bc);
            fwrite(&DAT_0004c274, 1, 1, DAT_000685bc);
            fflush(DAT_000685bc);
        }
        if (param_1 == 3) {
            bVar4 = 0;
        } else {
            bVar4 = DAT_0007622c & 1;
        }
        if (bVar4 == 0) {
            FUN_0001ded8(acStack_60, param_2, param_3);
        }
        return;
    }
    syslog(param_1 | 0x80, "%s", param_2);
    return;
}

void FUN_0001ddcc(undefined4 param_1)

{
    int iVar1;
    int *piVar2;
    char acStack_808[2048];

    iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00074fdc);
    if (iVar1 == 0) {
        return;
    }
    piVar2 = __errno_location();
    snprintf(acStack_808, 0x800,
             "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar2,
             "logging.c", "my_log_curses", param_1);
    FUN_0001dbec(3, acStack_808, 1);
    FUN_0003c4b4(1);
    return;
}

void FUN_0001de4c(void)

{
    int iVar1;
    int *piVar2;
    char acStack_808[2052];

    iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00074fdc);
    if (iVar1 == 0) {
        return;
    }
    piVar2 = __errno_location();
    snprintf(acStack_808, 0x800,
             "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar2,
             "logging.c", "my_log_curses", 0x34);
    FUN_0001dbec(3, acStack_808, 1);
    FUN_0003c4b4(1);
    return;
}

void FUN_0001ded8(undefined4 param_1, undefined4 param_2, int param_3)

{
    if (param_3 != 0) {
        pthread_mutex_trylock((pthread_mutex_t *)&DAT_00074fdc);
        FUN_0001ddcc(0x29);
        (*DAT_0006797c)();
    }
    FUN_0001de4c();
    printf("%s%s%s", param_1, param_2, &DAT_0004c260);
    FUN_0001ddcc(0x36);
    (*DAT_0006797c)();
    return;
}

void FUN_0001e000(int param_1, undefined4 param_2)

{
    undefined4 *puVar1;
    undefined4 uVar2;
    char acStack_818[2052];

    puVar1 = (undefined4 *)calloc(1, 0x20);
    if (puVar1 == (undefined4 *)0x0) {
        snprintf(acStack_818, 0x800, "Failed to calloc dupdata in %s %s():%d",
                 "noncedup.c", "dupalloc", 0x24);
        FUN_0001dbec(3, acStack_818, 1);
        FUN_0003c4b4(1);
    }
    *puVar1 = param_2;
    uVar2 = FUN_0001cd8c("Nonces", 0x10, 0x400, 0, 1, "noncedup.c", "dupalloc",
                         0x27);
    puVar1[1] = uVar2;
    uVar2 = FUN_0001cce4();
    *(undefined4 **)(param_1 + 0x18) = puVar1;
    puVar1[2] = uVar2;
    return;
}

undefined4 FUN_0001e104(int param_1, int param_2, int param_3)

{
    bool bVar1;
    bool bVar2;
    int iVar3;
    int *piVar4;
    uint uVar5;
    int *piVar6;
    pthread_mutex_t *ppVar7;
    int iVar8;
    undefined4 uVar9;
    undefined4 extraout_s1;
    undefined4 local_830;
    undefined4 uStack_82c;
    char acStack_828[2052];

    piVar6 = *(int **)(param_1 + 0x18);
    if (piVar6 == (int *)0x0) {
        uVar9 = 0;
    } else {
        FUN_00020580(&local_830);
        uVar5 = piVar6[4];
        piVar6[4] = uVar5 + 1;
        piVar6[5] = piVar6[5] + (uint)(0xfffffffe < uVar5);
        ppVar7 = *(pthread_mutex_t **)(piVar6[1] + 8);
        iVar3 = pthread_mutex_lock(ppVar7);
        if (iVar3 != 0) {
            piVar4 = __errno_location();
            snprintf(acStack_828, 0x800,
                     "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar4,
                     "noncedup.c", "isdupnonce", 0x46);
            FUN_0001dbec(3, acStack_828, 1);
            FUN_0003c4b4(1);
        }
        iVar3 = pthread_rwlock_wrlock((pthread_rwlock_t *)(ppVar7 + 1));
        if (iVar3 != 0) {
            piVar4 = __errno_location();
            snprintf(acStack_828, 0x800,
                     "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d",
                     *piVar4, "noncedup.c", "isdupnonce", 0x46);
            FUN_0001dbec(3, acStack_828, 1);
            FUN_0003c4b4(1);
        }
        iVar3 = *(int *)(piVar6[2] + 0x10);
        bVar2 = true;
        while (true) {
            bVar1 = bVar2;
            if (iVar3 == 0) {
                bVar1 = false;
            }
            if (!bVar1)
                break;
            if ((**(int **)(iVar3 + 0xc) == *(int *)(param_2 + 0x154)) &&
                ((*(int **)(iVar3 + 0xc))[1] == param_3)) {
                if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                    (bVar2 = false, 3 < DAT_00067858)) {
                    bVar2 = false;
                    snprintf(acStack_828, 0x800, "%s%d: Duplicate nonce %08x",
                             *(undefined4 *)(*(int *)(param_1 + 4) + 8),
                             *(undefined4 *)(param_1 + 8), param_3);
                    FUN_0001dbec(4, acStack_828, 0);
                }
            } else {
                iVar3 = *(int *)(iVar3 + 4);
                bVar2 = bVar1;
            }
        }
        if (bVar2) {
            iVar3 = FUN_0001d03c(piVar6[1], "noncedup.c", "isdupnonce", 0x51);
            **(undefined4 **)(iVar3 + 0xc) = *(undefined4 *)(param_2 + 0x154);
            *(int *)(*(int *)(iVar3 + 0xc) + 4) = param_3;
            iVar8 = *(int *)(iVar3 + 0xc);
            *(undefined4 *)(iVar8 + 0xc) = uStack_82c;
            *(undefined4 *)(iVar8 + 8) = local_830;
            FUN_0001d1b8(piVar6[2], iVar3, "noncedup.c", "isdupnonce", 0x55);
        }
        iVar3 = *(int *)(piVar6[2] + 0x10);
        while ((iVar3 != 0 &&
                (uVar9 = FUN_000208ac(*(int *)(iVar3 + 0xc) + 8, &local_830),
                 (double)(longlong)*piVar6 <
                     (double)CONCAT44(extraout_s1, uVar9)))) {
            uVar9 = FUN_0001d0f0(piVar6[2], "noncedup.c", "isdupnonce", 0x59);
            FUN_0001d1b8(piVar6[1], uVar9, "noncedup.c", "isdupnonce", 0x5a);
            iVar3 = *(int *)(piVar6[2] + 0x10);
        }
        ppVar7 = *(pthread_mutex_t **)(piVar6[1] + 8);
        iVar3 = pthread_rwlock_unlock((pthread_rwlock_t *)(ppVar7 + 1));
        if (iVar3 != 0) {
            piVar4 = __errno_location();
            snprintf(acStack_828, 0x800,
                     "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d",
                     *piVar4, "noncedup.c", "isdupnonce", 0x5d);
            FUN_0001dbec(3, acStack_828, 1);
            FUN_0003c4b4(1);
        }
        iVar3 = pthread_mutex_unlock(ppVar7);
        if (iVar3 != 0) {
            piVar4 = __errno_location();
            snprintf(acStack_828, 0x800,
                     "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d",
                     *piVar4, "noncedup.c", "isdupnonce", 0x5d);
            FUN_0001dbec(3, acStack_828, 1);
            FUN_0003c4b4(1);
        }
        (*DAT_0006797c)();
        uVar9 = 0;
        if (!bVar2) {
            uVar5 = piVar6[6];
            uVar9 = 1;
            piVar6[6] = uVar5 + 1;
            piVar6[7] = piVar6[7] + (uint)(0xfffffffe < uVar5);
        }
    }
    return uVar9;
}

void FUN_0001e504(int param_1, byte *param_2, int param_3)

{
    byte *pbVar1;
    uint uVar2;
    int *piVar3;
    int *piVar4;
    int *piVar6;
    int iVar7;
    uint *puVar8;
    uint *puVar9;
    uint uVar10;
    byte *local_164;
    int local_14c;
    int local_148[7];
    uint local_12c;
    uint local_128[65];
    int *piVar5;

    if (0 < param_3) {
        local_164 = param_2;
        do {
            puVar9 = &local_12c;
            pbVar1 = local_164;
            do {
                puVar9 = puVar9 + 1;
                *puVar9 = (uint)pbVar1[1] << 0x10 | (uint)pbVar1[2] << 8 |
                          (uint)pbVar1[3] | (uint)*pbVar1 << 0x18;
                pbVar1 = pbVar1 + 4;
                puVar8 = local_128;
            } while (local_128 + 0xf != puVar9);
            do {
                uVar10 = puVar8[0xe];
                puVar9 = puVar8 + 1;
                uVar2 = *puVar9;
                puVar8[0x10] =
                    ((uVar10 >> 0x13 | uVar10 << 0xd) ^
                     (uVar10 >> 0x11 | uVar10 << 0xf) ^ uVar10 >> 10) +
                    puVar8[9] + *puVar8 +
                    ((uVar2 >> 0x12 | uVar2 << 0xe) ^
                     (uVar2 >> 7 | uVar2 << 0x19) ^ uVar2 >> 3);
                puVar8 = puVar9;
            } while (local_128 + 0x30 != puVar9);
            piVar3 = &local_14c;
            piVar4 = (int *)(param_1 + 0x88);
            piVar6 = piVar3;
            do {
                piVar5 = piVar4 + 1;
                piVar6 = piVar6 + 1;
                *piVar6 = *piVar4;
                piVar4 = piVar5;
            } while ((int *)(param_1 + 0xa8) != piVar5);
            iVar7 = 0;
            do {
                iVar7 = iVar7 + 1;
                piVar4 = (int *)(param_1 + 0x88);
            } while (iVar7 != 0x40);
            do {
                piVar3 = piVar3 + 1;
                piVar6 = piVar4 + 1;
                *piVar4 = *piVar3 + *piVar4;
                piVar4 = piVar6;
            } while (piVar5 != piVar6);
            local_164 = local_164 + 0x40;
        } while (param_2 + param_3 * 0x40 != local_164);
        return;
    }
    return;
}

void FUN_0001e700(undefined4 *param_1)

{
    undefined4 *puVar1;
    undefined4 *puVar2;
    undefined4 *puVar3;

    puVar1 = (undefined4 *)0x67958;
    puVar2 = param_1 + 0x22;
    do {
        puVar1 = puVar1 + 1;
        puVar3 = puVar2 + 1;
        *puVar2 = *puVar1;
        puVar2 = puVar3;
    } while (puVar3 != param_1 + 0x2a);
    param_1[1] = 0;
    *param_1 = 0;
    return;
}

void FUN_0001e730(int *param_1, void *param_2, uint param_3)

{
    uint __n;

    __n = 0x40 - param_1[1];
    if (param_3 <= __n) {
        __n = param_3;
    }
    memcpy((void *)((int)param_1 + param_1[1] + 8), param_2, __n);
    if (param_3 + param_1[1] < 0x40) {
        param_1[1] = param_3 + param_1[1];
        return;
    }
    param_3 = param_3 - __n;
    FUN_0001e504(param_1, param_1 + 2, 1);
    FUN_0001e504(param_1, (int)param_2 + __n, param_3 >> 6);
    memcpy(param_1 + 2, (void *)((int)param_2 + __n + (param_3 & 0xffffffc0)),
           param_3 & 0x3f);
    param_1[1] = param_3 & 0x3f;
    *param_1 = *param_1 + ((param_3 >> 6) + 1) * 0x40;
    return;
}

void FUN_0001e7dc(int *param_1, undefined1 *param_2)

{
    int iVar1;
    int iVar2;
    uint uVar3;
    int iVar4;
    int *piVar5;
    int *piVar6;
    int iVar7;
    int iVar8;
    int iVar9;
    undefined4 uVar10;
    bool bVar11;

    uVar3 = param_1[1];
    piVar5 = param_1 + 2;
    bVar11 = (uVar3 & 0x3f) < 0x38;
    if (bVar11) {
        iVar2 = 0x40;
    } else {
        iVar2 = 0x80;
    }
    if (bVar11) {
        iVar4 = 0x3c;
    } else {
        iVar4 = 0x7c;
    }
    iVar1 = (uVar3 + *param_1) * 8;
    if (bVar11) {
        iVar7 = 0x3d;
        iVar8 = 0x3e;
        iVar9 = 0x3f;
        uVar10 = 1;
    } else {
        iVar7 = 0x7d;
        iVar8 = 0x7e;
        iVar9 = 0x7f;
        uVar10 = 2;
    }
    memset((void *)((int)piVar5 + uVar3), 0, iVar2 - uVar3);
    *(undefined1 *)((int)param_1 + param_1[1] + 8) = 0x80;
    *(char *)((int)piVar5 + iVar9) = (char)iVar1;
    *(char *)((int)piVar5 + iVar8) = (char)((uint)iVar1 >> 8);
    *(char *)((int)piVar5 + iVar7) = (char)((uint)iVar1 >> 0x10);
    *(char *)((int)piVar5 + iVar4) = (char)((uint)iVar1 >> 0x18);
    FUN_0001e504(param_1, piVar5, uVar10);
    piVar5 = param_1 + 0x22;
    do {
        param_2[3] = (char)*piVar5;
        piVar6 = piVar5 + 1;
        param_2[2] = (char)((uint)*piVar5 >> 8);
        param_2[1] = (char)*(undefined2 *)((int)piVar5 + 2);
        *param_2 = *(undefined1 *)((int)piVar5 + 3);
        piVar5 = piVar6;
        param_2 = param_2 + 4;
    } while (param_1 + 0x2a != piVar6);
    return;
}

void FUN_0001e8c8(undefined4 param_1, undefined4 param_2, undefined4 param_3)

{
    undefined4 *puVar1;
    undefined4 *puVar2;
    undefined4 local_b8;
    undefined4 local_b4;
    undefined4 auStack_30[9];

    puVar2 = (undefined4 *)0x67958;
    puVar1 = auStack_30;
    do {
        puVar2 = puVar2 + 1;
        *puVar1 = *puVar2;
        puVar1 = puVar1 + 1;
    } while (puVar2 != (undefined4 *)0x67978);
    local_b8 = 0;
    local_b4 = 0;
    FUN_0001e730(&local_b8, param_1, param_2);
    FUN_0001e7dc(&local_b8, param_3);
    return;
}

undefined4 FUN_0001e928(void)

{
    return 0;
}

undefined4 FUN_0001e930(int param_1, char *param_2, int param_3)

{
    size_t sVar1;
    int iVar2;
    int *piVar3;
    uint uVar4;
    __suseconds_t *p_Var5;
    uint uVar6;
    uint uVar7;
    uint local_844;
    size_t local_83c;
    timeval local_830;
    fd_set local_828[16];

    uVar6 = *(uint *)(param_1 + 0x24c);
    if (((DAT_00072ec0 != '\0') && (DAT_000686e1 != '\0')) &&
        ((DAT_00072d88 != '\0' ||
          ((DAT_000686e0 != '\0' || (6 < DAT_00067858)))))) {
        snprintf((char *)local_828, 0x800, "SEND: %s", param_2);
        FUN_0001dbec(7, local_828, 0);
    }
    local_83c = param_3 + 1;
    sVar1 = strlen(param_2);
    (param_2 + sVar1)[0] = '\n';
    (param_2 + sVar1)[1] = '\0';
    if ((int)local_83c < 1) {
        local_844 = 0;
        iVar2 = 0;
    } else {
        uVar4 = uVar6 + 0x1f;
        if (-1 < (int)uVar6) {
            uVar4 = uVar6;
        }
        uVar7 = uVar6 & 0x1f;
        if ((int)uVar6 < 1) {
            uVar7 = -(-uVar6 & 0x1f);
        }
        local_844 = 0;
        do {
            while (true) {
                local_830.tv_usec = 0;
                local_830.tv_sec = 1;
                while (true) {
                    p_Var5 = &local_830.tv_usec;
                    do {
                        p_Var5 = p_Var5 + 1;
                        *p_Var5 = 0;
                    } while (local_828[0].fds_bits + 0x1f != p_Var5);
                    local_828[0].fds_bits[(int)uVar4 >> 5] =
                        local_828[0].fds_bits[(int)uVar4 >> 5] |
                        1 << (uVar7 & 0xff);
                    iVar2 = select(uVar6 + 1, (fd_set *)0x0, local_828,
                                   (fd_set *)0x0, &local_830);
                    if (0 < iVar2)
                        break;
                    piVar3 = __errno_location();
                    if (*piVar3 != 4) {
                        return 1;
                    }
                }
                if (*(char *)(param_1 + 0x250) == '\0')
                    break;
                iVar2 = SSL_write(*(SSL **)(param_1 + 0x254),
                                  param_2 + local_844, local_83c);
                if (-1 < iVar2)
                    goto LAB_0001ea94;
            LAB_0001eb84:
                piVar3 = __errno_location();
                if (*piVar3 != 0xb) {
                    return 2;
                }
            }
            iVar2 = send(*(int *)(param_1 + 0x24c), param_2 + local_844,
                         local_83c, 0x4000);
            if (iVar2 < 0)
                goto LAB_0001eb84;
        LAB_0001ea94:
            local_83c = local_83c - iVar2;
            local_844 = local_844 + iVar2;
        } while (0 < (int)local_83c);
        iVar2 = (int)local_844 >> 0x1f;
    }
    uVar6 = *(uint *)(param_1 + 0x1f0);
    uVar7 = *(uint *)(param_1 + 0x1f8);
    *(uint *)(param_1 + 0x1f0) = uVar6 + 1;
    uVar4 = *(uint *)(param_1 + 0x200);
    *(uint *)(param_1 + 500) =
        *(int *)(param_1 + 500) + (uint)(0xfffffffe < uVar6);
    *(uint *)(param_1 + 0x1f8) = uVar7 + local_844;
    *(uint *)(param_1 + 0x1fc) =
        *(int *)(param_1 + 0x1fc) + iVar2 + (uint)CARRY4(uVar7, local_844);
    *(uint *)(param_1 + 0x200) = uVar4 + local_844;
    *(uint *)(param_1 + 0x204) =
        *(int *)(param_1 + 0x204) + iVar2 + (uint)CARRY4(uVar4, local_844);
    return 0;
}

char FUN_0001ebc0(int param_1, int param_2, int param_3)

{
    char cVar1;
    undefined4 uVar2;
    size_t __n;
    ssize_t sVar3;
    int iVar4;
    undefined4 uVar5;
    char local_c20[1024];
    char local_820[2048];

    uVar2 = *(undefined4 *)(param_1 + 0x268);
    uVar5 = *(undefined4 *)(param_1 + 0x248);
    if (param_3 == 0) {
        snprintf(local_c20, 0x400,
                 "CONNECT %s:%s HTTP/1.1\r\nHost: %s:%s\r\n\r\n", uVar2, uVar5,
                 uVar2, uVar5);
    } else {
        snprintf(local_c20, 0x400, "CONNECT %s:%s HTTP/1.0\r\n\r\n", uVar2,
                 uVar5);
    }
    if ((DAT_000686e1 != '\0') &&
        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
          (6 < DAT_00067858)))) {
        snprintf(local_820, 0x800, "Sending proxy %s:%s - %s",
                 *(undefined4 *)(param_1 + 0x26c),
                 *(undefined4 *)(param_1 + 0x270), local_c20);
        FUN_0001dbec(7, local_820, 0);
    }
    __n = strlen(local_c20);
    send(param_2, local_c20, __n, 0);
    sVar3 = recv(param_2, local_c20, 0xc, 0);
    if (sVar3 < 1) {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (3 < DAT_00067858)) {
            snprintf(local_820, 0x800,
                     "Couldn\'t read from proxy %s:%s after sending CONNECT",
                     *(undefined4 *)(param_1 + 0x26c),
                     *(undefined4 *)(param_1 + 0x270));
            FUN_0001dbec(4, local_820, 0);
            return '\0';
        }
    } else {
        local_c20[sVar3] = '\0';
        if ((DAT_000686e1 != '\0') &&
            (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
              (6 < DAT_00067858)))) {
            snprintf(local_820, 0x800, "Received from proxy %s:%s - %s",
                     *(undefined4 *)(param_1 + 0x26c),
                     *(undefined4 *)(param_1 + 0x270), local_c20);
            FUN_0001dbec(7, local_820, 0);
        }
        iVar4 = strcmp(local_c20, "HTTP/1.1 200");
        if ((iVar4 == 0) ||
            (iVar4 = strcmp(local_c20, "HTTP/1.0 200"), iVar4 == 0)) {
            do {
                sVar3 = recv(param_2, local_820, 1, 0);
                if (sVar3 == -1) {
                    local_c20[iVar4] = -1;
                    goto LAB_0001eea8;
                }
                local_c20[iVar4] = local_820[0];
                iVar4 = iVar4 + 1;
                if (local_820[0] == -1)
                    goto LAB_0001eea8;
            } while (iVar4 != 4);
            do {
                iVar4 = strncmp(local_c20, "\r\n\r\n", 4);
                cVar1 = DAT_000686e1;
                if (iVar4 == 0) {
                    if (DAT_000686e1 == '\0') {
                        return '\x01';
                    }
                    if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                        (DAT_00067858 < 7)) {
                        return DAT_000686e1;
                    }
                    snprintf(local_820, 0x800,
                             "Success negotiating with %s:%s HTTP proxy",
                             *(undefined4 *)(param_1 + 0x26c),
                             *(undefined4 *)(param_1 + 0x270));
                    FUN_0001dbec(7, local_820, 0);
                    return cVar1;
                }
                local_c20[0] = local_c20[1];
                local_c20[1] = local_c20[2];
                local_c20[2] = local_c20[3];
                sVar3 = recv(param_2, local_820, 1, 0);
                if (sVar3 == -1) {
                    local_c20[3] = -1;
                    break;
                }
                local_c20[3] = local_820[0];
            } while (local_820[0] != -1);
        LAB_0001eea8:
            if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                (3 < DAT_00067858)) {
                snprintf(local_820, 0x800,
                         "Couldn\'t read HTTP byte from proxy %s:%s",
                         *(undefined4 *)(param_1 + 0x26c),
                         *(undefined4 *)(param_1 + 0x270));
                FUN_0001dbec(4, local_820, 0);
                return '\0';
            }
        } else if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                   (3 < DAT_00067858)) {
            snprintf(local_820, 0x800, "HTTP Error from proxy %s:%s - %s",
                     *(undefined4 *)(param_1 + 0x26c),
                     *(undefined4 *)(param_1 + 0x270), local_c20);
            FUN_0001dbec(4, local_820);
            return '\0';
        }
    }
    return '\0';
}

void FUN_0001f074(int param_1)

{
    int __fd;

    if (*(undefined1 **)(param_1 + 0x260) != (undefined1 *)0x0) {
        **(undefined1 **)(param_1 + 0x260) = 0;
    }
    __fd = *(int *)(param_1 + 0x24c);
    *(undefined1 *)(param_1 + 0x293) = 0;
    *(undefined1 *)(param_1 + 0x291) = 0;
    if (__fd != 0) {
        if ((*(char *)(param_1 + 0x250) != '\0') &&
            (*(SSL **)(param_1 + 0x254) != (SSL *)0x0)) {
            SSL_shutdown(*(SSL **)(param_1 + 0x254));
            X509_free(*(X509 **)(param_1 + 0x25c));
            SSL_CTX_free(*(SSL_CTX **)(param_1 + 600));
            SSL_free(*(SSL **)(param_1 + 0x254));
            __fd = *(int *)(param_1 + 0x24c);
        }
        close(__fd);
    }
    *(undefined4 *)(param_1 + 0x24c) = 0;
    return;
}

void FUN_0001f0f4(int param_1)

{
    uint uVar1;

    uVar1 = fcntl(param_1, 3, 0);
    fcntl(param_1, 4, uVar1 & 0xfffff7ff);
    return;
}

bool FUN_0001f11c(char *param_1, char *param_2)

{
    int iVar1;
    regex_t rStack_30;

    iVar1 = regcomp(&rStack_30, param_1, 0xb);
    if (iVar1 == 0) {
        iVar1 = regexec(&rStack_30, param_2, 0, (regmatch_t *)0x0, 0);
    }
    regfree(&rStack_30);
    return iVar1 == 0;
}

bool FUN_0001f174(uint param_1, uint param_2)

{
    int iVar1;
    __suseconds_t *p_Var2;
    uint uVar3;
    uint uVar4;
    timeval local_90;
    fd_set local_88;

    local_90.tv_sec = param_2 & ~((int)param_2 >> 0x1f);
    p_Var2 = &local_90.tv_usec;
    do {
        p_Var2 = p_Var2 + 1;
        *p_Var2 = 0;
    } while (local_88.fds_bits + 0x1f != p_Var2);
    uVar4 = param_1 + 0x1f;
    if (-1 < (int)param_1) {
        uVar4 = param_1;
    }
    local_90.tv_usec = 0;
    uVar3 = param_1 & 0x1f;
    if ((int)param_1 < 1) {
        uVar3 = -(-param_1 & 0x1f);
    }
    local_88.fds_bits[(int)uVar4 >> 5] =
        local_88.fds_bits[(int)uVar4 >> 5] | 1 << (uVar3 & 0xff);
    iVar1 =
        select(param_1 + 1, &local_88, (fd_set *)0x0, (fd_set *)0x0, &local_90);
    return 0 < iVar1;
}

undefined4 FUN_0001f208(int *param_1, uint param_2)

{
    uint uVar1;
    int *piVar2;
    undefined4 uVar3;

    if ((param_1 == (int *)0x0) || (*param_1 != 1)) {
        return 0;
    }
    uVar1 = FUN_00049030();
    if (((param_2 <= uVar1) && (piVar2 = (int *)FUN_0004904c(param_1, param_2),
                                piVar2 != (int *)0x0)) &&
        (*piVar2 == 2)) {
        uVar3 = FUN_000491f8();
        return uVar3;
    }
    return 0;
}

void FUN_0001f26c(void)

{
    int iVar1;

    iVar1 = FUN_0001f208();
    if (iVar1 == 0) {
        return;
    }
    __strdup();
    return;
}

undefined1 FUN_0001f2ec(byte *param_1, undefined4 param_2, undefined4 param_3)

{
    size_t sVar1;
    byte *pbVar2;
    uint uVar3;
    char acStack_810[2048];

    if (param_1 == (byte *)0x0) {
        if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
            (DAT_00067858 < 3)) {
            return 0;
        }
        snprintf(acStack_810, 0x800,
                 "Null string passed to valid_hex from in %s %s():%d", "util.c",
                 param_2, param_3);
    } else {
        sVar1 = strlen((char *)param_1);
        if (sVar1 == 0) {
            return 1;
        }
        uVar3 = (uint)*param_1;
        if (-1 < *(int *)(&DAT_0004c31c + uVar3 * 4)) {
            pbVar2 = param_1 + (sVar1 - 1);
            do {
                if (param_1 == pbVar2) {
                    return 1;
                }
                param_1 = param_1 + 1;
                uVar3 = (uint)*param_1;
            } while (-1 < *(int *)(&DAT_0004c31c + uVar3 * 4));
        }
        if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
            (DAT_00067858 < 3)) {
            return 0;
        }
        snprintf(acStack_810, 0x800,
                 "Invalid char 0x%x passed to valid_hex from in %s %s():%d",
                 uVar3, "util.c", param_2, param_3);
    }
    FUN_0001dbec(3, acStack_810, 0);
    return 0;
}

void FUN_0001f43c(pthread_rwlock_t *param_1, undefined4 param_2,
                  undefined4 param_3)

{
    int iVar1;
    int *piVar2;
    char acStack_810[2052];

    iVar1 = pthread_rwlock_wrlock(param_1);
    if (iVar1 == 0) {
        return;
    }
    piVar2 = __errno_location();
    snprintf(acStack_810, 0x800,
             "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d", *piVar2,
             "util.c", param_2, param_3);
    FUN_0001dbec(3, acStack_810, 1);
    FUN_0003c4b4(1);
    return;
}

void FUN_0001f4b8(pthread_rwlock_t *param_1, undefined4 param_2,
                  undefined4 param_3)

{
    int iVar1;
    int *piVar2;
    char acStack_810[2052];

    iVar1 = pthread_rwlock_unlock(param_1);
    if (iVar1 == 0) {
        return;
    }
    piVar2 = __errno_location();
    snprintf(acStack_810, 0x800,
             "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar2,
             "util.c", param_2, param_3);
    FUN_0001dbec(3, acStack_810, 1);
    FUN_0003c4b4(1);
    return;
}

void FUN_0001f534(pthread_mutex_t *param_1, undefined4 param_2,
                  undefined4 param_3)

{
    int iVar1;
    int *piVar2;
    char acStack_810[2052];

    iVar1 = pthread_mutex_unlock(param_1);
    if (iVar1 == 0) {
        return;
    }
    piVar2 = __errno_location();
    snprintf(acStack_810, 0x800,
             "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar2,
             "util.c", param_2, param_3);
    FUN_0001dbec(3, acStack_810, 1);
    FUN_0003c4b4(1);
    return;
}

void FUN_0001f5b0(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_810[2052];

    piVar1 = __errno_location();
    snprintf(acStack_810, 0x800,
             "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar1,
             "util.c", param_1, param_2);
    FUN_0001dbec(3, acStack_810, 1);
    FUN_0003c4b4(1);
    return;
}

void FUN_0001f614(int param_1)

{
    int iVar1;
    ssize_t sVar2;

    iVar1 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0x2d0));
    if (iVar1 != 0) {
        FUN_0001f5b0("clear_sock", 0x6fc);
    }
    do {
        if (*(int *)(param_1 + 0x24c) == 0)
            break;
        sVar2 = recv(*(int *)(param_1 + 0x24c), *(void **)(param_1 + 0x260),
                     0x1ffc, 0);
    } while (0 < sVar2);
    FUN_0001f534((pthread_mutex_t *)(param_1 + 0x2d0), "clear_sock", 0x705);
    (*DAT_0006797c)();
    if (*(undefined1 **)(param_1 + 0x260) != (undefined1 *)0x0) {
        **(undefined1 **)(param_1 + 0x260) = 0;
    }
    return;
}

void *FUN_0001f708(uint param_1, undefined4 param_2, undefined4 param_3,
                   undefined4 param_4)

{
    void *pvVar1;
    char acStack_818[2048];

    if ((param_1 & 3) != 0) {
        param_1 = (param_1 & 0xfffffffc) + 4;
    }
    pvVar1 = malloc(param_1);
    if (pvVar1 == (void *)0x0) {
        snprintf(acStack_818, 0x800, "Failed to malloc size %d from %s %s:%d",
                 param_1, param_2, param_3, param_4);
        FUN_0001dbec(3, acStack_818, 1);
        FUN_0003c4b4(1);
        return (void *)0x0;
    }
    return pvVar1;
}

void *FUN_0001f790(size_t param_1, uint param_2, undefined4 param_3,
                   undefined4 param_4, undefined4 param_5)

{
    void *pvVar1;
    char acStack_818[2048];

    if ((param_2 & 3) != 0) {
        param_2 = (param_2 & 0xfffffffc) + 4;
    }
    pvVar1 = calloc(param_1, param_2);
    if (pvVar1 == (void *)0x0) {
        snprintf(acStack_818, 0x800,
                 "Failed to calloc memb %d size %d from %s %s:%d", param_1,
                 param_2, param_3, param_4, param_5);
        FUN_0001dbec(3, acStack_818, 1);
        FUN_0003c4b4(1);
        return (void *)0x0;
    }
    return pvVar1;
}

void *FUN_0001f820(void *param_1, uint param_2, undefined4 param_3,
                   undefined4 param_4, undefined4 param_5)

{
    void *pvVar1;
    char acStack_818[2052];

    if ((param_2 & 3) != 0) {
        param_2 = (param_2 & 0xfffffffc) + 4;
    }
    pvVar1 = realloc(param_1, param_2);
    if (pvVar1 == (void *)0x0) {
        snprintf(acStack_818, 0x800, "Failed to realloc size %d from %s %s:%d",
                 param_2, param_3, param_4, param_5);
        FUN_0001dbec(3, acStack_818, 1);
        FUN_0003c4b4(1);
        return (void *)0x0;
    }
    return pvVar1;
}

char *FUN_0001f8b4(int param_1)

{
    char *pcVar1;
    undefined *puVar2;

    if (param_1 == 0) {
        return "http:";
    }
    pcVar1 = "http0:";
    puVar2 = &UNK_0004c738;
    do {
        if (*(int *)(puVar2 + 0xc) == param_1) {
            return pcVar1;
        }
        pcVar1 = *(char **)(puVar2 + 0x10);
        puVar2 = puVar2 + 8;
    } while (pcVar1 != (char *)0x0);
    return "invalid";
}

void FUN_0001f900(undefined1 *param_1, int param_2, int param_3)

{
    byte *pbVar1;
    undefined1 *puVar2;

    if (0 < param_3) {
        pbVar1 = (byte *)(param_2 + -1);
        puVar2 = param_1 + 2;
        do {
            pbVar1 = pbVar1 + 1;
            puVar2[-2] = "0123456789abcdefbin2hex"[*pbVar1 >> 4];
            puVar2[-1] = "0123456789abcdefbin2hex"[*pbVar1 & 0xf];
            puVar2 = puVar2 + 2;
        } while (pbVar1 != (byte *)(param_2 + param_3 + -1));
        param_1[param_3 * 2] = 0;
        return;
    }
    *param_1 = 0;
    return;
}

void FUN_0001f970(int param_1, int param_2)

{
    char *pcVar1;
    uint uVar2;
    char *pcVar3;
    byte *pbVar4;
    byte *pbVar5;
    uint uVar6;

    uVar2 = param_2 * 2 + 1;
    uVar6 = uVar2 & 3;
    if ((int)uVar2 < 1) {
        uVar6 = -(-uVar2 & 3);
    }
    pcVar3 = (char *)FUN_0001f790((4 - uVar6) + uVar2, 1, "util.c", "bin2hex",
                                  0x313);
    if (0 < param_2) {
        pbVar5 = (byte *)(param_1 + -1);
        pbVar4 = pbVar5 + param_2;
        pcVar1 = pcVar3;
        do {
            pbVar5 = pbVar5 + 1;
            *pcVar1 = "0123456789abcdefbin2hex"[*pbVar5 >> 4];
            pcVar1[1] = "0123456789abcdefbin2hex"[*pbVar5 & 0xf];
            pcVar1 = pcVar1 + 2;
        } while (pbVar5 != pbVar4);
        pcVar3 = pcVar3 + param_2 * 2;
    }
    *pcVar3 = '\0';
    return;
}

undefined4 FUN_0001fa24(byte *param_1, byte *param_2, int param_3)

{
    byte *pbVar1;
    byte *pbVar2;
    uint uVar3;
    uint uVar4;
    char local_810[20];
    undefined2 local_7fc;

    if (*param_2 == 0) {
    LAB_0001fba8:
        if (param_3 == 0) {
            return 1;
        }
    } else {
        if (param_3 == 0) {
            return 0;
        }
        if (param_2[1] == 0) {
        LAB_0001fb2c:
            if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                (2 < DAT_00067858)) {
                builtin_strncpy(local_810, "hex2bin str truncate", 0x14);
                local_7fc = 100;
                FUN_0001dbec(3, local_810, 0);
            }
        } else {
            uVar3 = *(uint *)(&DAT_0004c31c + (uint)param_2[1] * 4);
            uVar4 = *(uint *)(&DAT_0004c31c + (uint)*param_2 * 4);
            if (-1 < (int)(uVar3 | uVar4)) {
                param_2 = param_2 + 4;
                do {
                    param_3 = param_3 + -1;
                    *param_1 = (byte)uVar3 | (byte)(uVar4 << 4);
                    pbVar1 = param_2 + -2;
                    if (*pbVar1 == 0)
                        goto LAB_0001fba8;
                    if (param_3 == 0) {
                        return 0;
                    }
                    pbVar2 = param_2 + -1;
                    param_2 = param_2 + 2;
                    if (*pbVar2 == 0)
                        goto LAB_0001fb2c;
                    uVar4 = *(uint *)(&DAT_0004c31c + (uint)*pbVar1 * 4);
                    uVar3 = *(uint *)(&DAT_0004c31c + (uint)*pbVar2 * 4);
                    param_1 = param_1 + 1;
                } while (-1 < (int)(uVar4 | uVar3));
            }
            if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                (2 < DAT_00067858)) {
                builtin_strncpy(local_810, "hex2bin scan failed", 0x14);
                FUN_0001dbec(3, local_810, 0);
                return 0;
            }
        }
    }
    return 0;
}

void FUN_0001fbc8(undefined1 *param_1, char *param_2)

{
    longlong lVar1;
    size_t sVar2;
    uint uVar3;
    uint *puVar4;
    uint *puVar5;
    uint uVar6;
    byte *pbVar7;
    byte *pbVar8;
    uint uStack_38;
    undefined4 local_34;
    uint local_30[6];

    local_30[0] = 0;
    local_34 = 0;
    local_30[1] = 0;
    local_30[2] = 0;
    local_30[3] = 0;
    local_30[4] = 0;
    local_30[5] = 0;
    sVar2 = strlen(param_2);
    if (sVar2 == 0) {
        local_34._0_1_ = 0;
        uVar3 = 0;
    } else {
        pbVar8 = (byte *)(param_2 + -1);
        pbVar7 = pbVar8 + sVar2;
        uVar3 = 0;
        do {
            pbVar8 = pbVar8 + 1;
            uVar6 = *(uint *)(&DAT_0004c788 + (uint)*pbVar8 * 4);
            puVar4 = local_30 + 5;
            while (true) {
                lVar1 = (ulonglong)uVar3 * 0x3a + (ulonglong)uVar6;
                uVar6 = (uint)((ulonglong)lVar1 >> 0x20);
                puVar5 = puVar4 + -1;
                *puVar4 = (uint)lVar1;
                if (&uStack_38 == puVar5)
                    break;
                uVar3 = *puVar5;
                puVar4 = puVar5;
            }
            uVar3 = local_30[5];
        } while (pbVar7 != pbVar8);
        uVar3 = local_30[0] << 0x18 | (local_30[0] >> 8 & 0xff) << 0x10 |
                (local_30[0] >> 0x10 & 0xff) << 8 | local_30[0] >> 0x18;
    }
    puVar5 = local_30;
    *param_1 = (undefined1)local_34;
    puVar4 = (uint *)(param_1 + 1);
    while (true) {
        *puVar4 = uVar3;
        if (puVar4 + 1 == (uint *)(param_1 + 0x19))
            break;
        puVar5 = puVar5 + 1;
        uVar3 = *puVar5;
        uVar3 = uVar3 << 0x18 | (uVar3 >> 8 & 0xff) << 0x10 |
                (uVar3 >> 0x10 & 0xff) << 8 | uVar3 >> 0x18;
        puVar4 = puVar4 + 1;
    }
    return;
}

int FUN_0001fcec(uint *param_1, uint *param_2)

{
    void *__ptr;
    void *__ptr_00;
    uint *puVar1;
    uint *puVar2;
    char *pcVar3;
    int iVar4;
    uint uVar5;
    uint uVar6;
    uint uVar7;
    uint uVar8;
    uint local_858;
    uint local_854;
    uint local_850;
    uint local_84c;
    uint local_848;
    uint local_844;
    uint local_840;
    uint local_83c;
    uint local_838;
    uint local_834;
    uint local_830;
    uint local_82c;
    uint local_828;
    uint local_824;
    uint local_820;
    uint uStack_81c;
    char acStack_818[2052];

    puVar2 = param_1 + 8;
    puVar1 = param_2 + 8;
    do {
        puVar2 = puVar2 + -1;
        puVar1 = puVar1 + -1;
        if (*puVar1 < *puVar2) {
            iVar4 = 0;
            goto LAB_0001fd20;
        }
    } while ((*puVar1 <= *puVar2) && (param_1 != puVar2));
    iVar4 = 1;
LAB_0001fd20:
    if (DAT_000686e1 != '\0') {
        uVar5 = param_1[6];
        uVar6 = param_1[7];
        uVar8 = param_1[5];
        uVar7 = param_1[4];
        local_854 = uVar5 << 0x18 | (uVar5 >> 8 & 0xff) << 0x10 |
                    (uVar5 >> 0x10 & 0xff) << 8 | uVar5 >> 0x18;
        local_858 = uVar6 << 0x18 | (uVar6 >> 8 & 0xff) << 0x10 |
                    (uVar6 >> 0x10 & 0xff) << 8 | uVar6 >> 0x18;
        uVar5 = param_1[2];
        local_850 = uVar8 << 0x18 | (uVar8 >> 8 & 0xff) << 0x10 |
                    (uVar8 >> 0x10 & 0xff) << 8 | uVar8 >> 0x18;
        local_84c = uVar7 << 0x18 | (uVar7 >> 8 & 0xff) << 0x10 |
                    (uVar7 >> 0x10 & 0xff) << 8 | uVar7 >> 0x18;
        uVar6 = param_1[3];
        uVar7 = *param_1;
        uVar8 = param_1[1];
        local_844 = uVar5 << 0x18 | (uVar5 >> 8 & 0xff) << 0x10 |
                    (uVar5 >> 0x10 & 0xff) << 8 | uVar5 >> 0x18;
        local_848 = uVar6 << 0x18 | (uVar6 >> 8 & 0xff) << 0x10 |
                    (uVar6 >> 0x10 & 0xff) << 8 | uVar6 >> 0x18;
        uVar5 = param_2[7];
        local_840 = uVar8 << 0x18 | (uVar8 >> 8 & 0xff) << 0x10 |
                    (uVar8 >> 0x10 & 0xff) << 8 | uVar8 >> 0x18;
        local_83c = uVar7 << 0x18 | (uVar7 >> 8 & 0xff) << 0x10 |
                    (uVar7 >> 0x10 & 0xff) << 8 | uVar7 >> 0x18;
        local_838 = uVar5 << 0x18 | (uVar5 >> 8 & 0xff) << 0x10 |
                    (uVar5 >> 0x10 & 0xff) << 8 | uVar5 >> 0x18;
        uVar5 = param_2[6];
        uVar7 = param_2[5];
        local_834 = uVar5 << 0x18 | (uVar5 >> 8 & 0xff) << 0x10 |
                    (uVar5 >> 0x10 & 0xff) << 8 | uVar5 >> 0x18;
        uVar5 = param_2[4];
        uVar6 = param_2[3];
        local_830 = uVar7 << 0x18 | (uVar7 >> 8 & 0xff) << 0x10 |
                    (uVar7 >> 0x10 & 0xff) << 8 | uVar7 >> 0x18;
        local_82c = uVar5 << 0x18 | (uVar5 >> 8 & 0xff) << 0x10 |
                    (uVar5 >> 0x10 & 0xff) << 8 | uVar5 >> 0x18;
        uVar7 = param_2[2];
        local_828 = uVar6 << 0x18 | (uVar6 >> 8 & 0xff) << 0x10 |
                    (uVar6 >> 0x10 & 0xff) << 8 | uVar6 >> 0x18;
        uVar5 = *param_2;
        uVar6 = param_2[1];
        local_824 = uVar7 << 0x18 | (uVar7 >> 8 & 0xff) << 0x10 |
                    (uVar7 >> 0x10 & 0xff) << 8 | uVar7 >> 0x18;
        uStack_81c = uVar5 << 0x18 | (uVar5 >> 8 & 0xff) << 0x10 |
                     (uVar5 >> 0x10 & 0xff) << 8 | uVar5 >> 0x18;
        local_820 = uVar6 << 0x18 | (uVar6 >> 8 & 0xff) << 0x10 |
                    (uVar6 >> 0x10 & 0xff) << 8 | uVar6 >> 0x18;
        __ptr = (void *)FUN_0001f970(&local_858, 0x20);
        __ptr_00 = (void *)FUN_0001f970(&local_838, 0x20);
        if ((DAT_000686e1 != '\0') &&
            (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
              (6 < DAT_00067858)))) {
            pcVar3 = "YES (hash <= target)";
            if (iVar4 == 0) {
                pcVar3 = "no (false positive; hash > target)";
            }
            snprintf(acStack_818, 0x800, " Proof: %s\nTarget: %s\nTrgVal? %s",
                     __ptr, __ptr_00, pcVar3);
            FUN_0001dbec(7, acStack_818, 0);
        }
        free(__ptr);
        free(__ptr_00);
        return iVar4;
    }
    return iVar4;
}

int FUN_0001fedc(void)

{
    int iVar1;

    iVar1 = FUN_0001f790(1, 0x58, "util.c", "tq_new", 0x433);
    *(int *)iVar1 = iVar1;
    *(int *)(iVar1 + 4) = iVar1;
    pthread_mutex_init((pthread_mutex_t *)(iVar1 + 0xc),
                       (pthread_mutexattr_t *)0x0);
    pthread_cond_init((pthread_cond_t *)(iVar1 + 0x28),
                      (pthread_condattr_t *)0x0);
    return iVar1;
}

void FUN_0001ff38(int *param_1)

{
    int *piVar1;
    int *piVar2;
    int *piVar3;

    if (param_1 != (int *)0x0) {
        piVar3 = (int *)*(int *)*param_1;
        piVar2 = (int *)*param_1;
        while (piVar1 = piVar3, param_1 != piVar2) {
            piVar3 = (int *)piVar2[1];
            piVar1[1] = (int)piVar3;
            *piVar3 = (int)piVar1;
            free(piVar2 + -1);
            piVar3 = (int *)*piVar1;
            piVar2 = piVar1;
        }
        pthread_cond_destroy((pthread_cond_t *)(param_1 + 10));
        pthread_mutex_destroy((pthread_mutex_t *)(param_1 + 3));
        free(param_1);
        return;
    }
    return;
}

void FUN_0001ffa0(int param_1)

{
    int iVar1;

    iVar1 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xc));
    if (iVar1 != 0) {
        FUN_0001f5b0("tq_freezethaw", 0x452);
    }
    *(undefined1 *)(param_1 + 8) = 1;
    pthread_cond_signal((pthread_cond_t *)(param_1 + 0x28));
    FUN_0001f534((pthread_mutex_t *)(param_1 + 0xc), "tq_freezethaw", 0x455);
    (*DAT_0006797c)();
    return;
}

bool FUN_0001ffb0(int param_1, undefined4 param_2)

{
    undefined4 *__ptr;
    int iVar1;
    undefined4 *puVar2;
    undefined4 *puVar3;
    bool bVar4;

    __ptr = (undefined4 *)FUN_0001f790(1, 0xc, "util.c", "tq_push", 0x467);
    puVar3 = __ptr + 1;
    *__ptr = param_2;
    __ptr[1] = puVar3;
    __ptr[2] = puVar3;
    iVar1 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xc));
    if (iVar1 != 0) {
        FUN_0001f5b0("tq_push", 0x46b);
    }
    bVar4 = *(char *)(param_1 + 8) != '\0';
    if (bVar4) {
        free(__ptr);
    } else {
        puVar2 = *(undefined4 **)(param_1 + 4);
        *(undefined4 **)(param_1 + 4) = puVar3;
        __ptr[1] = param_1;
        __ptr[2] = puVar2;
        *puVar2 = puVar3;
    }
    pthread_cond_signal((pthread_cond_t *)(param_1 + 0x28));
    FUN_0001f534((pthread_mutex_t *)(param_1 + 0xc), "tq_push", 0x478);
    (*DAT_0006797c)();
    return !bVar4;
}

int FUN_00020084(int *param_1, timespec *param_2)

{
    int iVar1;
    int iVar2;
    int *piVar3;
    int *piVar4;
    pthread_mutex_t *__mutex;

    __mutex = (pthread_mutex_t *)(param_1 + 3);
    iVar1 = pthread_mutex_lock(__mutex);
    if (iVar1 != 0) {
        FUN_0001f5b0("tq_pop", 0x484);
    }
    piVar4 = (int *)*param_1;
    piVar3 = piVar4;
    if (param_1 == piVar4) {
        if (param_2 == (timespec *)0x0) {
            iVar1 =
                pthread_cond_wait((pthread_cond_t *)(param_1 + 10), __mutex);
        } else {
            iVar1 = pthread_cond_timedwait((pthread_cond_t *)(param_1 + 10),
                                           __mutex, param_2);
        }
        if (iVar1 != 0) {
            iVar1 = 0;
            goto LAB_000200d8;
        }
        piVar3 = (int *)*param_1;
        if (piVar4 == piVar3) {
            iVar1 = 0;
            goto LAB_000200d8;
        }
    }
    piVar4 = (int *)piVar3[1];
    iVar2 = *piVar3;
    iVar1 = piVar3[-1];
    *(int **)(iVar2 + 4) = piVar4;
    *piVar4 = iVar2;
    *piVar3 = 0;
    piVar3[1] = 0;
    free(piVar3 + -1);
LAB_000200d8:
    FUN_0001f534(__mutex, "tq_pop", 0x49e);
    (*DAT_0006797c)();
    return iVar1;
}

void FUN_00020164(int param_1)

{
    if (param_1 != 0) {
        if (*(pthread_t *)(param_1 + 0xc) != 0) {
            pthread_cancel(*(pthread_t *)(param_1 + 0xc));
            *(undefined4 *)(param_1 + 0xc) = 0;
        }
        sem_destroy((sem_t *)(param_1 + 0x10));
        return;
    }
    return;
}

void FUN_000201a0(int *param_1, int *param_2)

{
    int iVar1;
    int iVar2;
    int iVar3;

    iVar2 = *param_2;
    iVar1 = *param_1;
    *param_2 = iVar1 - iVar2;
    iVar3 = param_1[1] - param_2[1];
    param_2[1] = iVar3;
    if (iVar3 < 0) {
        *param_2 = (iVar1 - iVar2) + -1;
        param_2[1] = iVar3 + 1000000;
    }
    return;
}

void FUN_000201d4(int *param_1, int *param_2)

{
    int iVar1;
    int iVar2;
    int iVar3;

    iVar1 = *param_1;
    iVar2 = *param_2;
    *param_2 = iVar1 + iVar2;
    iVar3 = param_1[1] + param_2[1];
    param_2[1] = iVar3;
    if (999999 < iVar3) {
        *param_2 = iVar1 + iVar2 + 1;
        param_2[1] = iVar3 + -1000000;
    }
    return;
}

bool FUN_00020218(int *param_1, int *param_2)

{
    if (*param_1 != *param_2) {
        return *param_2 < *param_1;
    }
    return param_2[1] < param_1[1];
}

bool FUN_0002024c(int *param_1, int *param_2)

{
    if (*param_1 == *param_2) {
        return param_1[1] < param_2[1];
    }
    return *param_1 < *param_2;
}

void FUN_000202cc(undefined4 *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    lldiv_t local_20;

    lldiv(&local_20, CONCAT44(param_4, param_3), 1000000);
    *param_1 = (undefined4)local_20.quot;
    param_1[1] = (undefined4)local_20.rem;
    return;
}

void FUN_00020304(undefined4 *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    lldiv_t local_20;

    lldiv(&local_20, CONCAT44(param_4, param_3), 1000000);
    *param_1 = (undefined4)local_20.quot;
    param_1[1] = (int)local_20.rem * 1000;
    return;
}

void FUN_00020344(undefined4 *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    lldiv_t local_20;

    lldiv(&local_20, CONCAT44(param_4, param_3), 1000);
    *param_1 = (undefined4)local_20.quot;
    param_1[1] = (int)local_20.rem * 1000000;
    return;
}

void FUN_00020384(undefined4 *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    lldiv_t local_20;

    lldiv(&local_20, CONCAT44(param_4, param_3), 1000);
    *param_1 = (undefined4)local_20.quot;
    param_1[1] = (int)local_20.rem * 1000;
    return;
}

char *FUN_00020538(undefined4 *param_1, char *param_2)

{
    char *pcVar1;
    char *__s;

    __s = (char *)*param_1;
    if ((__s != (char *)0x0) &&
        (pcVar1 = strpbrk(__s, param_2), pcVar1 != (char *)0x0)) {
        *pcVar1 = '\0';
        *param_1 = pcVar1 + 1;
        return __s;
    }
    *param_1 = 0;
    return __s;
}

int FUN_00020580(__time_t *param_1)

{
    timespec local_10;

    clock_gettime(1, &local_10);
    *param_1 = local_10.tv_sec;
    param_1[1] = local_10.tv_nsec / 1000;
    return local_10.tv_nsec * 0x10624dd3;
}

void FUN_00020630(timespec *param_1)

{
    clock_gettime(1, param_1);
    return;
}

void FUN_0002063c(int *param_1, int param_2)

{
    int iVar1;
    int iVar2;
    bool bVar3;
    bool bVar4;
    timespec local_10;

    FUN_00020344(&local_10, param_2, param_2, param_2 >> 0x1f);
    iVar2 = local_10.tv_nsec + param_1[1];
    iVar1 = local_10.tv_sec + *param_1;
    local_10.tv_nsec = iVar2;
    local_10.tv_sec = iVar1;
    if (iVar2 < 1000000000) {
        for (; local_10.tv_nsec < 0;
             local_10.tv_nsec = local_10.tv_nsec + 1000000000) {
            local_10.tv_sec = local_10.tv_sec + -1;
        }
    } else {
        local_10.tv_sec = iVar1 + 1;
        local_10.tv_nsec = iVar2 + -1000000000;
        bVar4 = SBORROW4(local_10.tv_nsec, 999999999);
        bVar3 = local_10.tv_nsec != 999999999;
        if (999999999 < local_10.tv_nsec) {
            local_10.tv_sec = iVar1 + 2;
            local_10.tv_nsec = -2000000000;
        }
        if (bVar3 && iVar2 + -1999999999 < 0 == bVar4) {
            local_10.tv_nsec = iVar2 + local_10.tv_nsec;
        }
    }
    do {
        iVar1 = clock_nanosleep(1, 1, &local_10, (timespec *)0x0);
    } while (iVar1 == 4);
    return;
}

void FUN_000206fc(int *param_1)

{
    int iVar1;
    int iVar2;
    bool bVar3;
    bool bVar4;
    timespec local_10;

    FUN_00020304(&local_10);
    iVar2 = local_10.tv_nsec + param_1[1];
    iVar1 = local_10.tv_sec + *param_1;
    local_10.tv_nsec = iVar2;
    local_10.tv_sec = iVar1;
    if (iVar2 < 1000000000) {
        for (; local_10.tv_nsec < 0;
             local_10.tv_nsec = local_10.tv_nsec + 1000000000) {
            local_10.tv_sec = local_10.tv_sec + -1;
        }
    } else {
        local_10.tv_sec = iVar1 + 1;
        local_10.tv_nsec = iVar2 + -1000000000;
        bVar4 = SBORROW4(local_10.tv_nsec, 999999999);
        bVar3 = local_10.tv_nsec != 999999999;
        if (999999999 < local_10.tv_nsec) {
            local_10.tv_sec = iVar1 + 2;
            local_10.tv_nsec = -2000000000;
        }
        if (bVar3 && iVar2 + -1999999999 < 0 == bVar4) {
            local_10.tv_nsec = iVar2 + local_10.tv_nsec;
        }
    }
    do {
        iVar1 = clock_nanosleep(1, 1, &local_10, (timespec *)0x0);
    } while (iVar1 == 4);
    return;
}

void FUN_000207b4(undefined4 param_1)

{
    timespec tStack_10;

    clock_gettime(1, &tStack_10);
    FUN_0002063c(&tStack_10, param_1);
    return;
}

void FUN_000207e0(void)

{
    timespec tStack_18;

    clock_gettime(1, &tStack_18);
    FUN_000206fc(&tStack_18);
    return;
}

undefined4 FUN_000208ac(int *param_1, int *param_2)

{
    return SUB84((double)(longlong)(param_1[1] - param_2[1]) / 1000000.0 +
                     (double)(longlong)(*param_1 - *param_2),
                 0);
}

undefined4 FUN_000208f0(char *param_1, undefined4 *param_2, undefined4 *param_3)

{
    char *pcVar1;
    char *pcVar2;
    uint uVar3;
    undefined4 uVar4;
    char *pcVar5;
    uint uVar6;
    int iVar7;
    undefined2 local_128;
    undefined1 local_126;
    char acStack_120[260];

    *param_2 = param_1;
    pcVar1 = strstr(param_1, "//");
    if (pcVar1 != (char *)0x0) {
        param_1 = pcVar1 + 2;
    }
    pcVar2 = strchr(param_1, 0x5b);
    pcVar1 = strchr(param_1, 0x5d);
    pcVar5 = pcVar1;
    if (pcVar1 != (char *)0x0) {
        pcVar5 = (char *)0x1;
    }
    if (pcVar2 == (char *)0x0) {
        pcVar5 = (char *)0x0;
    }
    if (pcVar2 < pcVar1) {
        uVar6 = (uint)pcVar5 & 1;
    } else {
        uVar6 = 0;
    }
    if (uVar6 == 0) {
        pcVar1 = param_1;
    }
    pcVar1 = strchr(pcVar1, 0x3a);
    uVar3 = strlen(param_1);
    if (pcVar1 == (char *)0x0) {
        pcVar5 = (char *)0x0;
        iVar7 = 0;
    } else {
        iVar7 = ~((int)pcVar1 - (int)param_1) + uVar3;
        if (iVar7 < 1) {
            return 0;
        }
        pcVar5 = pcVar1 + 1;
        uVar3 = (int)pcVar1 - (int)param_1;
    }
    if ((int)uVar3 < 1) {
        return 0;
    }
    if (uVar6 != 0) {
        param_1 = param_1 + 1;
        uVar3 = uVar3 - 2;
    }
    snprintf(acStack_120, 0xfe, "%.*s", uVar3, param_1);
    if (iVar7 == 0) {
        local_128 = 0x3038;
        local_126 = 0;
    } else {
        snprintf((char *)&local_128, 6, "%.*s", iVar7, pcVar5);
        pcVar1 = strpbrk((char *)&local_128, "/#");
        if (pcVar1 != (char *)0x0) {
            *pcVar1 = '\0';
        }
    }
    uVar4 = __strdup(&local_128);
    *param_3 = uVar4;
    uVar4 = __strdup(acStack_120);
    *param_2 = uVar4;
    return 1;
}

char *FUN_00020a64(char *param_1, int param_2)

{
    int iVar1;
    char *__dest;
    char *__src;
    char *pcVar2;
    int iVar3;
    size_t __n;

    iVar3 = 0;
    pcVar2 = "http:";
    __n = 5;
    *(undefined4 *)(param_2 + 0xb8) = 0;
    while (true) {
        iVar1 = strncmp(param_1, pcVar2, __n);
        if (iVar1 == 0) {
            pcVar2 = strchr(param_1, 0x7c);
            if (pcVar2 != (char *)0x0) {
                *pcVar2 = '\0';
                __dest =
                    (char *)FUN_0001f708(pcVar2 + ((1 - __n) - (int)param_1),
                                         "util.c", "get_proxy", 0x2ec);
                __src = param_1 + __n;
                *(char **)(param_2 + 0xb8) = __dest;
                param_1 = pcVar2 + 1;
                strcpy(__dest, __src);
                FUN_000208f0(*(undefined4 *)(param_2 + 0xb8), param_2 + 0x26c,
                             param_2 + 0x270);
                *(undefined4 *)(param_2 + 0xb4) = (&DAT_0004c73c)[iVar3 * 2];
            }
            return param_1;
        }
        iVar3 = iVar3 + 1;
        pcVar2 = *(char **)(&UNK_0004c738 + iVar3 * 8);
        if (pcVar2 == (char *)0x0)
            break;
        __n = strlen(pcVar2);
    }
    return param_1;
}

undefined4 FUN_00020b3c(int param_1)

{
    undefined4 uVar1;

    if (**(char **)(param_1 + 0x260) != '\0') {
        return 1;
    }
    uVar1 = FUN_0001f174(*(undefined4 *)(param_1 + 0x24c));
    return uVar1;
}

uint FUN_00020bc8(uint param_1, uint *param_2)

{
    uint uVar1;
    uint uVar2;
    sbyte *psVar3;
    uint uVar5;
    bool bVar6;
    bool bVar7;
    sbyte local_28[24];
    sbyte *psVar4;

    uVar2 = 0;
    uVar1 = 0;
    local_28[0] = 0;
    local_28[1] = 0;
    local_28[2] = 0;
    local_28[3] = 0;
    local_28[4] = 0;
    local_28[5] = 0;
    local_28[6] = 0;
    local_28[7] = 0;
    local_28[8] = 0;
    local_28[9] = 0;
    local_28[10] = 0;
    local_28[0xb] = 0;
    local_28[0xc] = 0;
    local_28[0xd] = 0;
    local_28[0xe] = 0;
    local_28[0xf] = 0;
    local_28[0x10] = 0;
    local_28[0x11] = 0;
    local_28[0x12] = 0;
    local_28[0x13] = 0;
    local_28[0x14] = 0;
    local_28[0x15] = 0;
    local_28[0x16] = 0;
    do {
        if ((param_1 & 1 << (uVar2 & 0xff)) != 0) {
            local_28[uVar1] = (sbyte)uVar2;
            uVar1 = uVar1 + 1;
        }
        uVar2 = uVar2 + 1;
        bVar7 = 0x1e < uVar2;
        bVar6 = uVar2 == 0x1f;
        if (uVar2 < 0x20) {
            bVar7 = 0x15 < uVar1;
            bVar6 = uVar1 == 0x16;
        }
    } while (!bVar7 || bVar6);
    uVar2 = 0;
    uVar5 = *param_2;
    if (uVar1 == 0) {
        uVar2 = 0;
    } else if (0 < (int)uVar5) {
        psVar4 = local_28;
        do {
            psVar3 = psVar4 + 1;
            uVar2 = uVar2 | 1 << *psVar4;
            if (local_28 + uVar1 == psVar3)
                break;
            psVar4 = psVar3;
        } while (local_28 + uVar5 != psVar3);
    }
    if (uVar1 < uVar5) {
        *param_2 = uVar1;
    }
    return uVar2;
}

void FUN_00020c88(undefined4 *param_1, char *param_2)

{
    size_t sVar1;
    char *pcVar2;
    char *pcVar3;
    char *pcVar4;
    uint local_824;
    uint local_820;
    char local_81c[4];
    char acStack_818[3];
    char acStack_815[5];
    char acStack_810[2048];

    local_81c[0] = '0';
    local_81c[1] = '0';
    local_81c[2] = '0';
    local_81c[3] = '0';
    acStack_818[0] = '0';
    acStack_818[1] = '0';
    acStack_818[2] = '0';
    register0x00000027 = '0';
    acStack_815[1] = 0x30;
    sVar1 = strlen(param_2);
    local_824 = 0;
    local_820 = 8;
    if (sVar1 != 0) {
        pcVar4 = param_2 + -1;
        pcVar2 = pcVar4 + sVar1;
        pcVar3 = acStack_818 + (3 - sVar1);
        do {
            pcVar4 = pcVar4 + 1;
            pcVar3 = pcVar3 + 1;
            *pcVar3 = *pcVar4;
        } while (pcVar4 != pcVar2);
    }
    acStack_815[1] = 0;
    FUN_0001fa24(&local_824, local_81c, 4);
    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
        (5 < DAT_00067858)) {
        snprintf(acStack_810, 0x800,
                 "mask returned by pool is %s, swaped = 0x%x", param_2,
                 local_824);
        FUN_0001dbec(6, acStack_810, 0);
    }
    local_824 = (local_824 & 0xe0ff1f) >> 8 & 0xff00 |
                (local_824 & 0xff00) << 8 | (local_824 & 0xe0ff1f) << 0x18;
    local_824 = FUN_00020bc8(local_824, &local_820);
    if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
        (DAT_00067858 < 5)) {
        if (local_824 != 0) {
        LAB_00020e5c:
            *(undefined1 *)(param_1 + 0xa5) = 1;
            param_1[0xa7] = local_824;
            param_1[0xa6] = 1 << (local_820 & 0xff);
            return;
        }
    LAB_00020e98:
        if (DAT_00067858 < 5)
            goto LAB_00020e3c;
    } else {
        snprintf(acStack_810, 0x800, "real mask = 0x%x, bit_num = %d",
                 local_824, local_820);
        FUN_0001dbec(5, acStack_810, 0);
        if (local_824 != 0)
            goto LAB_00020e5c;
        if ((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0'))
            goto LAB_00020e98;
    }
    snprintf(acStack_810, 0x800, "Pool %d rolling mask do not match!",
             *param_1);
    FUN_0001dbec(5, acStack_810, 0);
LAB_00020e3c:
    *(undefined1 *)(param_1 + 0xa5) = 0;
    param_1[0xa6] = 1;
    param_1[0xa7] = local_824;
    return;
}

undefined1 FUN_00020ed0(undefined4 *param_1, undefined4 param_2)

{
    bool bVar1;
    int iVar2;
    int *piVar3;
    int *piVar4;
    char *__s1;
    undefined4 uVar5;
    size_t sVar6;
    int iVar7;
    undefined1 uVar8;
    undefined4 local_924[23];
    undefined1 auStack_8c8[160];
    char acStack_828[2052];

    iVar2 = FUN_00047e20(param_2, 0, local_924);
    if (iVar2 == 0) {
        if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
            (DAT_00067858 < 6)) {
            return 0;
        }
        snprintf(acStack_828, 0x800, "JSON decode failed(%d): %s", local_924[0],
                 auStack_8c8);
        FUN_0001dbec(6, acStack_828, 0);
        return 0;
    }
    piVar3 = (int *)FUN_00048cc4(iVar2, "result");
    piVar4 = (int *)FUN_00048cc4(iVar2, "error");
    if (((piVar3 != (int *)0x0) && (*piVar3 != 7)) &&
        ((piVar4 == (int *)0x0 || (*piVar4 == 7)))) {
        FUN_00048f2c(piVar3);
        __s1 = (char *)FUN_00048fac();
        if (__s1 != (char *)0x0) {
            uVar8 = 0;
            do {
                FUN_00048fc4(__s1);
                piVar4 = (int *)FUN_00048fb8();
                if (piVar4 == (int *)0x0)
                    break;
                iVar7 = strcasecmp(__s1, "version-rolling");
                if ((iVar7 == 0) && (sVar6 = strlen(__s1), sVar6 == 0xf)) {
                    if (*piVar4 != 5) {
                        if (((DAT_00072d88 != '\0') ||
                             (DAT_000686e0 != '\0')) ||
                            (4 < DAT_00067858)) {
                            snprintf(acStack_828, 0x800,
                                     "Pool %d don\'t support ab!", *param_1);
                            FUN_0001dbec(5, acStack_828, 0);
                        }
                        uVar8 = 1;
                        *(undefined1 *)(param_1 + 0xa5) = 0;
                        param_1[0xa6] = 1;
                        break;
                    }
                    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                        (4 < DAT_00067858)) {
                        snprintf(acStack_828, 0x800, "POOL %d support ab mode!",
                                 *param_1);
                        FUN_0001dbec(5, acStack_828, 0);
                    }
                } else {
                    iVar7 = strcasecmp(__s1, "version-rolling.mask");
                    if ((iVar7 == 0) && (sVar6 = strlen(__s1), sVar6 == 0x14)) {
                        uVar8 = 1;
                        uVar5 = FUN_000491f8(piVar4);
                        FUN_00020c88(param_1, uVar5);
                    } else if (((DAT_00072d88 != '\0') ||
                                (DAT_000686e0 != '\0')) ||
                               (2 < DAT_00067858)) {
                        snprintf(
                            acStack_828, 0x800,
                            "JSON-RPC unexpected mining.configure value: %s",
                            __s1);
                        FUN_0001dbec(3, acStack_828, 0);
                    }
                }
                uVar5 = FUN_00048fc4(__s1);
                FUN_00048f78(piVar3, uVar5);
                __s1 = (char *)FUN_00048fac();
            } while (__s1 != (char *)0x0);
            goto LAB_00020f44;
        }
    }
    uVar8 = 0;
LAB_00020f44:
    if (*(int *)(iVar2 + 4) != -1) {
        piVar3 = (int *)(iVar2 + 4);
        DataMemoryBarrier(0xb);
        do {
            iVar7 = *piVar3;
            bVar1 = (bool)hasExclusiveAccess(piVar3);
        } while (!bVar1);
        *piVar3 = iVar7 + -1;
        if (iVar7 + -1 == 0) {
            FUN_000495fc(iVar2);
        }
    }
    return uVar8;
}

void FUN_00021218(undefined4 *param_1)

{
    int iVar1;
    int *piVar2;
    char acStack_810[2052];

    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
        (5 < DAT_00067858)) {
        snprintf(acStack_810, 0x800, "Closing socket for stratum pool %d",
                 *param_1);
        FUN_0001dbec(6, acStack_810, 0);
    }
    iVar1 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xb4));
    if (iVar1 != 0) {
        piVar2 = __errno_location();
        snprintf(acStack_810, 0x800,
                 "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar2,
                 "util.c", "suspend_stratum", 0xd4f);
        FUN_0001dbec(3, acStack_810, 1);
        FUN_0003c4b4(1);
    }
    FUN_0001f074(param_1);
    iVar1 = pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0xb4));
    if (iVar1 != 0) {
        piVar2 = __errno_location();
        snprintf(acStack_810, 0x800,
                 "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar2,
                 "util.c", "suspend_stratum", 0xd51);
        FUN_0001dbec(3, acStack_810, 1);
        FUN_0003c4b4(1);
    }
    (*DAT_0006797c)();
    return;
}

bool FUN_0002137c(undefined4 *param_1, undefined4 param_2, undefined4 param_3)

{
    char cVar1;
    int iVar2;
    int *piVar3;
    int iVar4;
    pthread_mutex_t *__mutex;
    char local_818[28];
    undefined4 uStack_7fc;
    char local_7f8[16];
    undefined2 local_7e8;

    if (((DAT_00072ec0 != '\0') && (DAT_000686e1 != '\0')) &&
        ((DAT_00072d88 != '\0' ||
          ((DAT_000686e0 != '\0' || (6 < DAT_00067858)))))) {
        snprintf(local_818, 0x800, "SEND: %s", param_2);
        FUN_0001dbec(7, local_818, 0);
    }
    __mutex = (pthread_mutex_t *)(param_1 + 0xb4);
    iVar2 = pthread_mutex_lock(__mutex);
    if (iVar2 != 0) {
        piVar3 = __errno_location();
        snprintf(local_818, 0x800,
                 "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar3,
                 "util.c", "stratum_send", 0x6af);
        FUN_0001dbec(3, local_818, 1);
        FUN_0003c4b4(1);
    }
    if (*(char *)((int)param_1 + 0x291) == '\0') {
        iVar2 = pthread_mutex_unlock(__mutex);
        if (iVar2 == 0) {
            (*DAT_0006797c)();
            goto LAB_000214b8;
        }
        iVar2 = 3;
    LAB_000213f0:
        piVar3 = __errno_location();
        snprintf(local_818, 0x800,
                 "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar3,
                 "util.c", "stratum_send", 0x6b5);
        FUN_0001dbec(3, local_818, 1);
        FUN_0003c4b4(1);
    } else {
        iVar2 = FUN_0001e930(param_1, param_2, param_3);
        iVar4 = pthread_mutex_unlock(__mutex);
        if (iVar4 != 0)
            goto LAB_000213f0;
    }
    (*DAT_0006797c)();
    if (iVar2 == 2) {
        if ((DAT_000686e1 != '\0') &&
            (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
              (6 < DAT_00067858)))) {
            builtin_strncpy(local_818, "Failed to send in stratum_se", 0x1c);
            uStack_7fc = CONCAT13(uStack_7fc._3_1_, 0x646e);
            FUN_0001dbec(7, local_818, 0);
            FUN_00021218(param_1);
            return false;
        }
    } else {
        if (iVar2 == 3) {
        LAB_000214b8:
            cVar1 = DAT_000686e1;
            if (DAT_000686e1 != '\0') {
                if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                    (DAT_00067858 < 7)) {
                    cVar1 = '\0';
                } else {
                    builtin_strncpy(local_818, "Stratum send failed due to n",
                                    0x1c);
                    uStack_7fc._0_1_ = 'o';
                    uStack_7fc._1_1_ = ' ';
                    uStack_7fc._2_1_ = 'p';
                    uStack_7fc._3_1_ = 'o';
                    builtin_strncpy(local_7f8, "ol stratum_activ", 0x10);
                    local_7e8 = 0x65;
                    FUN_0001dbec(7, local_818, 0);
                    cVar1 = '\0';
                }
            }
            return (bool)cVar1;
        }
        if (iVar2 != 1) {
            return iVar2 == 0;
        }
        if ((DAT_000686e1 != '\0') &&
            (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
              (6 < DAT_00067858)))) {
            snprintf(local_818, 0x800, "Write select failed on pool %d sock",
                     *param_1);
            FUN_0001dbec(7, local_818, 0);
        }
    }
    FUN_00021218(param_1);
    return false;
}

char *FUN_00021730(int param_1)

{
    int iVar1;
    char cVar2;
    __time_t _Var3;
    char *pcVar4;
    size_t sVar5;
    size_t sVar6;
    int iVar7;
    int *piVar8;
    int iVar9;
    ssize_t sVar10;
    uint uVar11;
    uint uVar12;
    uint uVar13;
    char *__s;
    int iVar14;
    timespec local_2830;
    char acStack_2828[24];
    ushort local_2810;
    undefined1 local_280e;
    timespec local_2030;
    char acStack_2028[32];
    undefined4 local_2008;
    char acStack_2004[8152];

    __s = *(char **)(param_1 + 0x260);
    pcVar4 = strchr(__s, 10);
    if (pcVar4 == (char *)0x0) {
        clock_gettime(1, &local_2030);
        _Var3 = local_2030.tv_sec;
        iVar1 = local_2030.tv_nsec / 1000;
        iVar7 = FUN_0001f174(*(undefined4 *)(param_1 + 0x24c), 0x3c,
                             local_2030.tv_nsec * 0x10624dd3);
        if (iVar7 == 0) {
            if ((DAT_000686e1 != '\0') &&
                (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
                  (6 < DAT_00067858)))) {
                local_2030.tv_sec._0_1_ = 'T';
                local_2030.tv_sec._1_1_ = 'i';
                local_2030.tv_sec._2_1_ = 'm';
                local_2030.tv_sec._3_1_ = 'e';
                local_2030.tv_nsec._0_1_ = 'd';
                local_2030.tv_nsec._1_1_ = ' ';
                local_2030.tv_nsec._2_1_ = 'o';
                local_2030.tv_nsec._3_1_ = 'u';
                builtin_strncpy(acStack_2028,
                                "t waiting for data on socket_ful", 0x20);
                local_2008._0_2_ = 0x6c;
                FUN_0001dbec(7, &local_2030, 0);
            }
            goto LAB_00021aec;
        }
        while (true) {
            memset(&local_2030, 0, 0x2000);
            if (*(char *)(param_1 + 0x250) == '\0') {
                sVar10 =
                    recv(*(int *)(param_1 + 0x24c), &local_2030, 0x1ffc, 0);
            } else {
                sVar10 =
                    SSL_read(*(SSL **)(param_1 + 0x254), &local_2030, 0x1ffc);
            }
            if (sVar10 == 0)
                break;
            clock_gettime(1, &local_2830);
            iVar7 =
                (int)(longlong)((double)(longlong)(local_2830.tv_nsec / 1000 -
                                                   iVar1) /
                                    1000000.0 +
                                (double)(longlong)(local_2830.tv_sec - _Var3));
            if (sVar10 < 0) {
                piVar8 = __errno_location();
                if ((*piVar8 != 0xb) ||
                    (iVar9 = FUN_0001f174(*(undefined4 *)(param_1 + 0x24c),
                                          0x3c - iVar7),
                     iVar9 == 0)) {
                    if ((DAT_000686e1 != '\0') &&
                        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
                          (6 < DAT_00067858)))) {
                        local_2830.tv_sec._0_1_ = 'F';
                        local_2830.tv_sec._1_1_ = 'a';
                        local_2830.tv_sec._2_1_ = 'i';
                        local_2830.tv_sec._3_1_ = 'l';
                        local_2830.tv_nsec._0_1_ = 'e';
                        local_2830.tv_nsec._1_1_ = 'd';
                        local_2830.tv_nsec._2_1_ = ' ';
                        local_2830.tv_nsec._3_1_ = 't';
                        builtin_strncpy(acStack_2828,
                                        "o recv sock in recv_line", 0x18);
                        local_2810 = local_2810 & 0xff00;
                        FUN_0001dbec(7, &local_2830, 0);
                    }
                    goto LAB_00021b80;
                }
            } else {
                sVar5 = strlen((char *)&local_2030);
                pcVar4 = *(char **)(param_1 + 0x260);
                sVar6 = strlen(pcVar4);
                uVar11 = sVar5 + sVar6 + 1;
                if (*(uint *)(param_1 + 0x264) <= uVar11) {
                    iVar14 = (uVar11 & 0xffffe000) + 0x2000;
                    iVar9 = FUN_0001f820(pcVar4, iVar14, "util.c",
                                         "recalloc_sock", 0x722);
                    *(int *)(param_1 + 0x260) = iVar9;
                    memset((void *)(iVar9 + sVar6), 0, iVar14 - sVar6);
                    pcVar4 = *(char **)(param_1 + 0x260);
                    *(int *)(param_1 + 0x264) = iVar14;
                }
                strcat(pcVar4, (char *)&local_2030);
            }
            __s = *(char **)(param_1 + 0x260);
            if ((0x3b < iVar7) ||
                (pcVar4 = strchr(__s, 10), pcVar4 != (char *)0x0))
                goto LAB_0002175c;
        }
        if ((DAT_000686e1 != '\0') &&
            (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
              (6 < DAT_00067858)))) {
            local_2830.tv_sec._0_1_ = 'S';
            local_2830.tv_sec._1_1_ = 'o';
            local_2830.tv_sec._2_1_ = 'c';
            local_2830.tv_sec._3_1_ = 'k';
            local_2830.tv_nsec._0_1_ = 'e';
            local_2830.tv_nsec._1_1_ = 't';
            local_2830.tv_nsec._2_1_ = ' ';
            local_2830.tv_nsec._3_1_ = 'c';
            builtin_strncpy(acStack_2828, "losed waiting in recv_li", 0x18);
            local_2810 = 0x656e;
            local_280e = 0;
            FUN_0001dbec(7, &local_2830, 0);
        }
    LAB_00021b80:
        FUN_00021218(param_1);
        __s = *(char **)(param_1 + 0x260);
    }
LAB_0002175c:
    sVar5 = strlen(__s);
    pcVar4 = strtok(__s, "\n");
    if (pcVar4 != (char *)0x0) {
        pcVar4 = (char *)__strdup();
        sVar6 = strlen(pcVar4);
        if ((int)(sVar6 + 1) < (int)sVar5) {
            memmove(*(void **)(param_1 + 0x260),
                    (void *)((int)*(void **)(param_1 + 0x260) + sVar6 + 1),
                    (sVar5 - sVar6) + 1);
        } else {
            **(undefined1 **)(param_1 + 0x260) = 0;
        }
        uVar11 = *(uint *)(param_1 + 0x208);
        uVar12 = *(uint *)(param_1 + 0x210);
        uVar13 = *(uint *)(param_1 + 0x218);
        *(uint *)(param_1 + 0x208) = uVar11 + 1;
        *(uint *)(param_1 + 0x210) = uVar12 + sVar6;
        *(uint *)(param_1 + 0x214) =
            *(int *)(param_1 + 0x214) + (uint)CARRY4(uVar12, sVar6);
        cVar2 = DAT_00072ec0;
        *(uint *)(param_1 + 0x20c) =
            *(int *)(param_1 + 0x20c) + (uint)(0xfffffffe < uVar11);
        *(uint *)(param_1 + 0x218) = uVar13 + sVar6;
        *(uint *)(param_1 + 0x21c) =
            *(int *)(param_1 + 0x21c) + (uint)CARRY4(uVar13, sVar6);
        if (cVar2 == '\0') {
            return pcVar4;
        }
        if (DAT_000686e1 == '\0') {
            return pcVar4;
        }
        if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
            (DAT_00067858 < 7)) {
            return pcVar4;
        }
        snprintf((char *)&local_2030, 0x800, "RECVD: %s", pcVar4);
        FUN_0001dbec(7, &local_2030, 0);
        return pcVar4;
    }
    if ((DAT_000686e1 != '\0') &&
        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
          (6 < DAT_00067858)))) {
        local_2030.tv_sec._0_1_ = 'F';
        local_2030.tv_sec._1_1_ = 'a';
        local_2030.tv_sec._2_1_ = 'i';
        local_2030.tv_sec._3_1_ = 'l';
        local_2030.tv_nsec._0_1_ = 'e';
        local_2030.tv_nsec._1_1_ = 'd';
        local_2030.tv_nsec._2_1_ = ' ';
        local_2030.tv_nsec._3_1_ = 't';
        builtin_strncpy(acStack_2028, "o parse a \\n terminated string i",
                        0x20);
        local_2008._0_1_ = 'n';
        local_2008._1_1_ = ' ';
        local_2008._2_1_ = 'r';
        local_2008._3_1_ = 'e';
        builtin_strncpy(acStack_2004, "cv_line", 8);
        FUN_0001dbec(7, &local_2030, 0);
    }
LAB_00021aec:
    FUN_0001f614(param_1);
    return (char *)0x0;
}

uint FUN_00021cbc(undefined4 *param_1)

{
    bool bVar1;
    bool bVar2;
    size_t sVar3;
    int iVar4;
    undefined4 uVar5;
    void *__ptr;
    int *piVar6;
    char *pcVar7;
    int *piVar8;
    char *__s;
    uint uVar9;
    int iVar10;
    uint uVar11;
    int *piVar12;
    int iVar13;
    uint uVar14;
    int iVar15;
    undefined4 local_2924[23];
    undefined1 auStack_28c8[160];
    char local_2828[36];
    uint local_2804;
    char acStack_2800[4];
    undefined4 uStack_27fc;
    undefined2 uStack_27f8;
    undefined1 local_27f6;
    char acStack_2028[8196];

    FUN_0001f614();
    iVar13 = DAT_00072db4;
    if (param_1[0xa3] == 0) {
        DAT_00072db4 = DAT_00072db4 + 1;
        sprintf(acStack_2028,
                "{\"id\": %d, \"method\": \"mining.subscribe\", \"params\": "
                "[\"%s/%s\"]}",
                iVar13, &DAT_0006a354, &DAT_0006a254);
    } else {
        DAT_00072db4 = DAT_00072db4 + 1;
        sprintf(acStack_2028,
                "{\"id\": %d, \"method\": \"mining.subscribe\", \"params\": "
                "[\"%s/%s\", \"%s\"]}",
                iVar13, &DAT_0006a354, &DAT_0006a254, param_1[0xa3]);
    }
    iVar13 = 0;
    bVar1 = false;
LAB_00021d38:
    sVar3 = strlen(acStack_2028);
    iVar4 = FUN_0001e930(param_1, acStack_2028, sVar3);
    if (iVar4 != 0)
        goto code_r0x00021d58;
    iVar4 = FUN_0001f174(param_1[0x93], 0x3c);
    if (iVar4 == 0) {
        if (DAT_000686e1 == 0)
            goto LAB_00021d6c;
        if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
            (DAT_00067858 < 7))
            goto LAB_00022494;
        builtin_strncpy(local_2828, "Timed out waiting for response in in",
                        0x24);
        local_2804._0_1_ = 'i';
        local_2804._1_1_ = 't';
        local_2804._2_1_ = 'i';
        local_2804._3_1_ = 'a';
        builtin_strncpy(acStack_2800, "te_s", 4);
        uStack_27fc._0_1_ = 't';
        uStack_27fc._1_1_ = 'r';
        uStack_27fc._2_1_ = 'a';
        uStack_27fc._3_1_ = 't';
        uStack_27f8 = 0x6d75;
        local_27f6 = 0;
        FUN_0001dbec(7, local_2828, 0);
        goto LAB_00022110;
    }
    __ptr = (void *)FUN_00021730(param_1);
    if (__ptr == (void *)0x0)
        goto LAB_00022110;
    iVar13 = FUN_00047e20(__ptr, 0, local_2924);
    free(__ptr);
    if (iVar13 == 0) {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (5 < DAT_00067858)) {
            snprintf(local_2828, 0x800, "JSON decode failed(%d): %s",
                     local_2924[0], auStack_28c8);
            FUN_0001dbec(6, local_2828, 0);
        }
    } else {
        piVar12 = (int *)FUN_00048cc4(iVar13, "result");
        piVar6 = (int *)FUN_00048cc4(iVar13, "error");
        if ((piVar12 == (int *)0x0) || (*piVar12 == 7)) {
            if (piVar6 != (int *)0x0)
                goto LAB_000222b4;
            pcVar7 = (char *)malloc(0x11);
            if (pcVar7 != (char *)0x0) {
                builtin_strncpy(pcVar7, "(unknown reason)", 0x11);
            }
        } else {
            if ((piVar6 == (int *)0x0) || (*piVar6 == 7)) {
                piVar6 = (int *)FUN_0004904c(piVar12, 0);
                if ((piVar6 != (int *)0x0) &&
                    ((*piVar6 == 1 && (iVar4 = FUN_00049030(), 0 < iVar4)))) {
                    iVar15 = 0;
                    do {
                        piVar8 = (int *)FUN_0004904c(piVar6, iVar15);
                        if ((piVar8 == (int *)0x0) || (*piVar8 != 1))
                            break;
                        pcVar7 = (char *)FUN_0001f208(piVar8, 0);
                        if ((pcVar7 != (char *)0x0) &&
                            (iVar10 = strncasecmp(pcVar7, "mining.notify", 0xd),
                             iVar10 == 0)) {
                            pcVar7 = (char *)FUN_0001f26c(piVar8, 1);
                            if (pcVar7 != (char *)0x0)
                                goto LAB_000227cc;
                            break;
                        }
                        iVar15 = iVar15 + 1;
                    } while (iVar4 != iVar15);
                }
                pcVar7 = (char *)(uint)DAT_000686e1;
                if ((pcVar7 != (char *)0x0) &&
                    (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
                      (pcVar7 = (char *)0x0, 6 < DAT_00067858)))) {
                    pcVar7 = (char *)0x0;
                    builtin_strncpy(local_2828,
                                    "Failed to get sessionid in initiate_",
                                    0x24);
                    local_2804._0_1_ = 's';
                    local_2804._1_1_ = 't';
                    local_2804._2_1_ = 'r';
                    local_2804._3_1_ = 'a';
                    builtin_strncpy(acStack_2800, "tum", 4);
                    FUN_0001dbec(7, local_2828, 0);
                }
            LAB_000227cc:
                __s = (char *)FUN_0001f26c(piVar12, 1);
                uVar9 = FUN_0001f2ec(__s, "initiate_stratum", 0xdfb);
                if (uVar9 != 0) {
                    FUN_0004904c(piVar12, 2);
                    iVar4 = FUN_00049454();
                    if (0xe < iVar4 - 2U) {
                        if (((DAT_00072d88 != '\0') ||
                             (DAT_000686e0 != '\0')) ||
                            (5 < DAT_00067858)) {
                            builtin_strncpy(
                                local_2828,
                                "Failed to get valid n2size in initia", 0x24);
                            local_2804._0_1_ = 't';
                            local_2804._1_1_ = 'e';
                            local_2804._2_1_ = '_';
                            local_2804._3_1_ = 's';
                            builtin_strncpy(acStack_2800, "trat", 4);
                            uStack_27fc._0_3_ = 0x6d75;
                            FUN_0001dbec(6, local_2828, 0);
                        }
                        free(pcVar7);
                        free(__s);
                        goto LAB_00022310;
                    }
                    if (((pcVar7 != (char *)0x0) &&
                         ((char *)param_1[0xa3] != (char *)0x0)) &&
                        ((iVar15 = strcmp(pcVar7, (char *)param_1[0xa3]),
                          iVar15 == 0 && (((DAT_00072d88 != '\0' ||
                                            (DAT_000686e0 != '\0')) ||
                                           (4 < DAT_00067858)))))) {
                        snprintf(local_2828, 0x800,
                                 "Pool %d successfully negotiated resume with "
                                 "the same session ID",
                                 *param_1);
                        FUN_0001dbec(5, local_2828, 0);
                    }
                    iVar15 =
                        pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0x35));
                    if (iVar15 != 0) {
                        FUN_0001f5b0("initiate_stratum", 0xe0f);
                    }
                    iVar15 = pthread_rwlock_wrlock(
                        (pthread_rwlock_t *)(param_1 + 0x3b));
                    if (iVar15 != 0) {
                        piVar12 = __errno_location();
                        snprintf(
                            local_2828, 0x800,
                            "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d",
                            *piVar12, "util.c", "initiate_stratum", 0xe0f);
                        FUN_0001dbec(3, local_2828, 1);
                        FUN_0003c4b4(1);
                    }
                    free((void *)param_1[0x9d]);
                    free((void *)param_1[0xa3]);
                    param_1[0xa3] = pcVar7;
                    param_1[0x9d] = __s;
                    sVar3 = strlen(__s);
                    param_1[0x18b] = sVar3 >> 1;
                    free((void *)param_1[0x9e]);
                    uVar5 = FUN_0001f790(param_1[0x18b], 1, "util.c",
                                         "initiate_stratum", 0xe16);
                    param_1[0x9e] = uVar5;
                    FUN_0001fa24(uVar5, param_1[0x9d], param_1[0x18b]);
                    param_1[0xa2] = iVar4;
                    iVar4 = pthread_rwlock_unlock(
                        (pthread_rwlock_t *)(param_1 + 0x3b));
                    if (iVar4 != 0) {
                        piVar12 = __errno_location();
                        snprintf(local_2828, 0x800,
                                 "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s "
                                 "%s():%d",
                                 *piVar12, "util.c", "initiate_stratum", 0xe19);
                        FUN_0001dbec(3, local_2828, 1);
                        FUN_0003c4b4(1);
                    }
                    iVar4 = pthread_mutex_unlock(
                        (pthread_mutex_t *)(param_1 + 0x35));
                    if (iVar4 != 0) {
                        piVar12 = __errno_location();
                        snprintf(
                            local_2828, 0x800,
                            "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d",
                            *piVar12, "util.c", "initiate_stratum", 0xe19);
                        FUN_0001dbec(3, local_2828, 1);
                        FUN_0003c4b4(1);
                    }
                    (*DAT_0006797c)();
                    if (((pcVar7 != (char *)0x0) && (DAT_000686e1 != 0)) &&
                        ((DAT_00072d88 != '\0' ||
                          ((DAT_000686e0 != '\0' || (6 < DAT_00067858)))))) {
                        snprintf(local_2828, 0x800,
                                 "Pool %d stratum session id: %s", *param_1,
                                 param_1[0xa3]);
                        FUN_0001dbec(7, local_2828, 0);
                    }
                    *(undefined1 *)((int)param_1 + 0x291) = 1;
                    if (param_1[0x90] == 0) {
                        param_1[0x90] = param_1[0x9a];
                    }
                    uVar11 = (uint)DAT_00072ec0;
                    param_1[0x1ca] = 0;
                    param_1[0x1cb] = 0;
                    param_1[0x1cc] = 0;
                    param_1[0x1cd] = 0x3ff00000;
                    if (((uVar11 != 0) && (uVar14 = (uint)DAT_000686e1,
                                           uVar9 = uVar11, uVar14 != 0)) &&
                        ((uVar9 = uVar14,
                          DAT_00072d88 != '\0' || ((DAT_000686e0 != '\0' ||
                                                    (6 < DAT_00067858)))))) {
                        snprintf(local_2828, 0x800,
                                 "Pool %d confirmed mining.subscribe with "
                                 "extranonce1 %s extran2size %d",
                                 *param_1, param_1[0x9d], param_1[0xa2]);
                        FUN_0001dbec(7, local_2828, 0);
                    }
                    goto LAB_00022054;
                }
                if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                    (5 < DAT_00067858)) {
                    builtin_strncpy(local_2828,
                                    "Failed to get valid nonce1 in initia",
                                    0x24);
                    local_2804._0_1_ = 't';
                    local_2804._1_1_ = 'e';
                    local_2804._2_1_ = '_';
                    local_2804._3_1_ = 's';
                    builtin_strncpy(acStack_2800, "trat", 4);
                    uStack_27fc._0_3_ = 0x6d75;
                    FUN_0001dbec(6, local_2828, 0);
                }
                free(pcVar7);
                goto LAB_00022310;
            }
        LAB_000222b4:
            pcVar7 = (char *)FUN_00045c3c(piVar6, 3);
        }
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (5 < DAT_00067858)) {
            snprintf(local_2828, 0x800, "JSON-RPC decode failed: %s", pcVar7);
            FUN_0001dbec(6, local_2828, 0);
        }
        free(pcVar7);
    }
LAB_00022310:
    bVar1 = (bool)(bVar1 ^ 1);
    if (!bVar1)
        goto LAB_00022110;
    iVar4 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0x35));
    if (iVar4 != 0) {
        piVar12 = __errno_location();
        snprintf(local_2828, 0x800,
                 "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar12,
                 "util.c", "initiate_stratum", 0xe35);
        FUN_0001dbec(3, local_2828, 1);
        FUN_0003c4b4(1);
    }
    iVar4 = pthread_rwlock_wrlock((pthread_rwlock_t *)(param_1 + 0x3b));
    if (iVar4 != 0) {
        piVar12 = __errno_location();
        snprintf(local_2828, 0x800,
                 "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d", *piVar12,
                 "util.c", "initiate_stratum", 0xe35);
        FUN_0001dbec(3, local_2828, 1);
        FUN_0003c4b4(1);
    }
    free((void *)param_1[0xa3]);
    free((void *)param_1[0x9d]);
    param_1[0x9d] = 0;
    param_1[0xa3] = 0;
    iVar4 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x3b));
    if (iVar4 != 0) {
        piVar12 = __errno_location();
        snprintf(local_2828, 0x800,
                 "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar12,
                 "util.c", "initiate_stratum", 0xe39);
        FUN_0001dbec(3, local_2828, 1);
        FUN_0003c4b4(1);
    }
    iVar4 = pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0x35));
    if (iVar4 != 0) {
        piVar12 = __errno_location();
        snprintf(local_2828, 0x800,
                 "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar12,
                 "util.c", "initiate_stratum", 0xe39);
        FUN_0001dbec(3, local_2828, 1);
        FUN_0003c4b4(1);
    }
    (*DAT_0006797c)();
    if ((DAT_000686e1 != 0) &&
        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
          (6 < DAT_00067858)))) {
        builtin_strncpy(local_2828, "Failed to resume stratum, trying afr",
                        0x24);
        local_2804._0_1_ = 'e';
        local_2804._1_1_ = 's';
        local_2804._2_1_ = 'h';
        local_2804._3_1_ = '\0';
        FUN_0001dbec(7, local_2828, 0);
    }
    if ((iVar13 != 0) && (*(int *)(iVar13 + 4) != -1)) {
        piVar12 = (int *)(iVar13 + 4);
        DataMemoryBarrier(0xb);
        do {
            iVar4 = *piVar12;
            bVar2 = (bool)hasExclusiveAccess(piVar12);
        } while (!bVar2);
        *piVar12 = iVar4 + -1;
        if (iVar4 + -1 == 0) {
            FUN_000495fc(iVar13);
        }
    }
    FUN_0001f614(param_1);
    DAT_00072db4 = DAT_00072db4 + 1;
    sprintf(acStack_2028,
            "{\"id\": %d, \"method\": \"mining.subscribe\", \"params\": []}");
    goto LAB_00021d38;
code_r0x00021d58:
    if (DAT_000686e1 == 0)
        goto LAB_00021d6c;
    if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
        (DAT_00067858 < 7)) {
    LAB_00022494:
        if ((DAT_000686e0 == '\0') && (DAT_00067858 < 7))
            goto LAB_00021d6c;
    } else {
        builtin_strncpy(local_2828, "Failed to send s in initiate_stratum",
                        0x24);
        local_2804 = local_2804 & 0xffffff00;
        FUN_0001dbec(7, local_2828, 0);
    LAB_00022110:
        if (DAT_000686e1 == 0)
            goto LAB_00021d6c;
        if (DAT_00072d88 == '\0')
            goto LAB_00022494;
    }
    builtin_strncpy(local_2828, "Initiate stratum failed", 0x18);
    FUN_0001dbec(7, local_2828, 0);
LAB_00021d6c:
    if (iVar13 == 0) {
        uVar9 = 0;
    } else {
        uVar9 = 0;
    LAB_00022054:
        if (*(int *)(iVar13 + 4) != -1) {
            piVar12 = (int *)(iVar13 + 4);
            DataMemoryBarrier(0xb);
            do {
                iVar4 = *piVar12;
                bVar1 = (bool)hasExclusiveAccess(piVar12);
            } while (!bVar1);
            *piVar12 = iVar4 + -1;
            if (iVar4 + -1 == 0) {
                FUN_000495fc(iVar13);
                return uVar9;
            }
        }
    }
    return uVar9;
}

void FUN_00022a94(int param_1, undefined4 param_2)

{
    time_t tVar1;

    tVar1 = time((time_t *)0x0);
    *(undefined4 *)(param_1 + 0xf8) = param_2;
    *(time_t *)(param_1 + 0xf4) = tVar1;
    switch (param_2) {
    case 0:
        *(int *)(param_1 + 0xfc) = *(int *)(param_1 + 0xfc) + 1;
        return;
    case 1:
        *(int *)(param_1 + 0x100) = *(int *)(param_1 + 0x100) + 1;
        return;
    case 2:
        *(int *)(param_1 + 0x104) = *(int *)(param_1 + 0x104) + 1;
        return;
    case 3:
        *(int *)(param_1 + 0x108) = *(int *)(param_1 + 0x108) + 1;
        return;
    case 4:
        *(int *)(param_1 + 0x10c) = *(int *)(param_1 + 0x10c) + 1;
        return;
    case 5:
        *(int *)(param_1 + 0x110) = *(int *)(param_1 + 0x110) + 1;
        return;
    case 6:
        *(int *)(param_1 + 0x114) = *(int *)(param_1 + 0x114) + 1;
        return;
    case 7:
        *(int *)(param_1 + 0x118) = *(int *)(param_1 + 0x118) + 1;
        return;
    case 8:
        *(int *)(param_1 + 0x11c) = *(int *)(param_1 + 0x11c) + 1;
        return;
    case 9:
        *(int *)(param_1 + 0x120) = *(int *)(param_1 + 0x120) + 1;
    }
    return;
}

char *FUN_00022b84(char *param_1, char *param_2)

{
    size_t sVar1;
    char *pcVar2;
    uint uVar3;

    sVar1 = strlen(param_2);
    if (sVar1 != 0) {
        uVar3 = sVar1 + 1;
        if (param_1 == (char *)0x0) {
            if ((uVar3 & 3) != 0) {
                uVar3 = (uVar3 & 0xfffffffc) + 4;
            }
            pcVar2 =
                (char *)FUN_0001f708(uVar3, "util.c", "realloc_strcat", 0xe97);
            strcpy(pcVar2, param_2);
            return pcVar2;
        }
        sVar1 = strlen(param_1);
        uVar3 = sVar1 + uVar3;
        if ((uVar3 & 3) != 0) {
            uVar3 = (uVar3 & 0xfffffffc) + 4;
        }
        pcVar2 = (char *)FUN_0001f708(uVar3, "util.c", "realloc_strcat", 0xe97);
        sprintf(pcVar2, "%s%s", param_1, param_2);
        free(param_1);
        param_1 = pcVar2;
    }
    return param_1;
}

byte *FUN_00022c58(char *param_1)

{
    size_t sVar1;
    byte *pbVar2;
    undefined4 *puVar3;
    byte bVar4;
    byte *__s;
    byte *pbVar5;
    char acStack_818[2052];

    if (param_1 == (char *)0x0) {
        puVar3 = (undefined4 *)malloc(7);
        if (puVar3 == (undefined4 *)0x0) {
            snprintf(acStack_818, 0x800, "Failed to malloc null in %s %s():%d",
                     "util.c", "str_text", 0xeb0);
            FUN_0001dbec(3, acStack_818, 1);
            FUN_0003c4b4(1);
        } else {
            *puVar3 = 0x6c756e28;
            *(undefined2 *)(puVar3 + 1) = 0x296c;
            *(undefined1 *)((int)puVar3 + 6) = 0;
        }
    }
    sVar1 = strlen(param_1);
    pbVar2 = (byte *)FUN_0001f708(sVar1 * 4 + 5, "util.c", "str_text", 0xeb5);
    pbVar5 = (byte *)(param_1 + -1);
    __s = pbVar2;
    do {
        while (true) {
            pbVar5 = pbVar5 + 1;
            if (*pbVar5 - 0x20 < 0x5f)
                break;
            sprintf((char *)__s, "0x%02x");
            bVar4 = *pbVar5;
            __s = __s + 4;
            if (bVar4 == 0)
                goto LAB_00022ce8;
        }
        *__s = *pbVar5;
        __s = __s + 1;
        bVar4 = *pbVar5;
    } while (bVar4 != 0);
LAB_00022ce8:
    *__s = bVar4;
    return pbVar2;
}

void FUN_00022d78(undefined4 param_1)

{
    char acStack_18[20];

    snprintf(acStack_18, 0x10, "cg@%s", param_1);
    prctl(0xf, acStack_18, 0, 0, 0);
    return;
}

void FUN_00022db8(sem_t *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    int iVar1;
    int *piVar2;
    char acStack_818[2052];

    iVar1 = sem_init(param_1, 0, 0);
    if (iVar1 != 0) {
        piVar2 = __errno_location();
        snprintf(acStack_818, 0x800,
                 "Failed to sem_init ret=%d errno=%d in %s %s():%d", iVar1,
                 *piVar2, param_2, param_3, param_4);
        FUN_0001dbec(3, acStack_818, 1);
        FUN_0003c4b4(1);
    }
    return;
}

void FUN_00022e34(int param_1, pthread_attr_t *param_2,
                  __start_routine *param_3, void *param_4)

{
    FUN_00022db8(param_1 + 0x10, "util.c", "thr_info_create", 0x4a5);
    pthread_create((pthread_t *)(param_1 + 0xc), param_2, param_3, param_4);
    return;
}

void FUN_00022e7c(sem_t *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    int *piVar1;
    int iVar2;
    char acStack_818[2048];

    iVar2 = sem_post(param_1);
    if (iVar2 == 0) {
        return;
    }
    piVar1 = __errno_location();
    snprintf(acStack_818, 0x800,
             "Failed to sem_post errno=%d cgsem=0x%p in %s %s():%d", *piVar1,
             param_1, param_2, param_3, param_4);
    FUN_0001dbec(3, acStack_818, 1);
    FUN_0003c4b4(1);
    return;
}

undefined4 FUN_00022eb4(int param_1)

{
    pthread_setcanceltype(1, (int *)0x0);
    (**(code **)(param_1 + 0x10))(*(undefined4 *)(param_1 + 0x14));
    FUN_00022e7c(param_1, "util.c", "completion_thread", 0xf97);
    return 0;
}

void FUN_00022ef8(sem_t *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    int iVar1;
    int *piVar2;
    char acStack_818[2052];

    do {
        iVar1 = sem_wait(param_1);
        if (iVar1 == 0) {
            return;
        }
        piVar2 = __errno_location();
    } while (*piVar2 == 4);
    snprintf(acStack_818, 0x800,
             "Failed to sem_wait errno=%d cgsem=0x%p in %s %s():%d", *piVar2,
             param_1, param_2, param_3, param_4);
    FUN_0001dbec(3, acStack_818, 1);
    FUN_0003c4b4(1);
    return;
}

undefined4 FUN_00022f78(sem_t *param_1, int param_2, undefined4 param_3,
                        undefined4 param_4, undefined4 param_5)

{
    int *piVar1;
    int iVar2;
    int iVar3;
    timespec local_830;
    timespec local_828[256];

    clock_gettime(1, local_828);
    FUN_00020344(&local_830, local_828[0].tv_nsec / 1000, param_2,
                 param_2 >> 0x1f);
    do {
        iVar3 = (local_828[0].tv_nsec / 1000) * 1000 + local_830.tv_nsec;
        iVar2 = local_828[0].tv_sec + local_830.tv_sec;
        local_830.tv_nsec = iVar3;
        local_830.tv_sec = iVar2;
        if (iVar3 < 1000000000) {
            for (; local_830.tv_nsec < 0;
                 local_830.tv_nsec = local_830.tv_nsec + 1000000000) {
                local_830.tv_sec = local_830.tv_sec + -1;
            }
        } else {
            local_830.tv_nsec = iVar3 + -1000000000;
            local_830.tv_sec = iVar2 + 1;
            if (999999999 < local_830.tv_nsec) {
                local_830.tv_nsec = iVar3 + -2000000000;
                local_830.tv_sec = iVar2 + 2;
            }
        }
        iVar2 = sem_timedwait(param_1, &local_830);
        if (iVar2 == 0) {
            return 0;
        }
        piVar1 = __errno_location();
        iVar2 = *piVar1;
        if (iVar2 == 0x6e) {
            return 0x6e;
        }
    } while (iVar2 == 4);
    snprintf((char *)local_828, 0x800,
             "Failed to sem_timedwait errno=%d cgsem=0x%p in %s %s():%d", iVar2,
             param_1, param_3, param_4, param_5);
    FUN_0001dbec(3, local_828, 1);
    FUN_0003c4b4(1);
    return 0;
}

void FUN_000230c8(sem_t *param_1)

{
    int iVar1;
    int *piVar2;

    do {
        while (true) {
            iVar1 = sem_trywait(param_1);
            if (-1 < iVar1)
                break;
            piVar2 = __errno_location();
            if (*piVar2 != 4) {
                return;
            }
        }
    } while (iVar1 == 0);
    return;
}

bool FUN_00023100(undefined4 param_1, undefined4 param_2, undefined4 param_3)

{
    void *__arg;
    int iVar1;
    pthread_t local_1c[2];

    __arg =
        (void *)FUN_0001f708(0x18, "util.c", "cg_completion_timeout", 0xfa2);
    FUN_00022db8(__arg, "util.c", "cg_completion_timeout", 0xfa3);
    *(undefined4 *)((int)__arg + 0x10) = param_1;
    *(undefined4 *)((int)__arg + 0x14) = param_2;
    pthread_create(local_1c, (pthread_attr_t *)0x0, FUN_00022eb4, __arg);
    iVar1 =
        FUN_00022f78(__arg, param_3, "util.c", "cg_completion_timeout", 0xfa9);
    if (iVar1 != 0) {
        pthread_cancel(local_1c[0]);
        return iVar1 == 0;
    }
    pthread_join(local_1c[0], (void **)0x0);
    free(__arg);
    return true;
}

void FUN_000231cc(void *param_1, void *param_2, size_t param_3,
                  undefined4 param_4, undefined4 param_5, undefined4 param_6)

{
    char *__format;
    char acStack_810[2048];

    if ((int)(param_3 - 1) < 0) {
        if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
            (DAT_00067858 < 3)) {
            return;
        }
        __format = "ERR: Asked to memcpy %u bytes from %s %s():%d";
    } else if (param_1 == (void *)0x0) {
        if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
            (DAT_00067858 < 3)) {
            return;
        }
        __format = "ERR: Asked to memcpy %u bytes to NULL from %s %s():%d";
    } else {
        if (param_2 != (void *)0x0) {
            memcpy(param_1, param_2, param_3);
            return;
        }
        if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
            (DAT_00067858 < 3)) {
            return;
        }
        __format = "ERR: Asked to memcpy %u bytes from NULL from %s %s():%d";
    }
    snprintf(acStack_810, 0x800, __format, param_3, param_4, param_5, param_6);
    FUN_0001dbec(3, acStack_810, 0);
    return;
}

void FUN_0002333c(undefined1 *param_1)

{
    undefined4 local_24;
    undefined4 local_20;
    undefined4 local_1c;
    undefined4 local_18;
    undefined4 local_14;
    undefined4 local_10;
    undefined1 local_c;

    local_20 = 0;
    local_24 = 0;
    local_1c = 0;
    local_18 = 0;
    local_14 = 0;
    local_10 = 0;
    local_c = 0;
    FUN_0001fbc8(&local_24);
    *param_1 = 0x76;
    param_1[1] = 0xa9;
    param_1[2] = 0x14;
    FUN_000231cc(param_1 + 3, (int)&local_24 + 1, 0x14, "util.c",
                 "address_to_pubkeyhash", 0x3c4);
    param_1[0x17] = 0x88;
    param_1[0x18] = 0xac;
    return;
}

undefined1 *FUN_000233c8(char *param_1, int *param_2)

{
    size_t sVar1;
    undefined1 *puVar2;

    sVar1 = strlen(param_1);
    puVar2 =
        (undefined1 *)FUN_0001f708(sVar1 + 9, "util.c", "ser_string", 0x3e2);
    if (sVar1 < 0xfd) {
        *puVar2 = (char)sVar1;
        FUN_000231cc(puVar2 + 1, param_1, sVar1, "util.c", "ser_string", 0x3e6);
        *param_2 = sVar1 + 1;
        return puVar2;
    }
    if (0xffff < sVar1) {
        *puVar2 = 0xfe;
        *(size_t *)(puVar2 + 1) = sVar1 << 0x18 | (sVar1 >> 8 & 0xff) << 0x10 |
                                  (sVar1 >> 0x10 & 0xff) << 8 | sVar1 >> 0x18;
        FUN_000231cc(puVar2 + 5, param_1, sVar1, "util.c", "ser_string", 0x3f9);
        *param_2 = sVar1 + 5;
        return puVar2;
    }
    *puVar2 = 0xfd;
    *(ushort *)(puVar2 + 1) =
        (ushort)((sVar1 & 0xff) << 8) | (ushort)(sVar1 >> 8) & 0xff;
    FUN_000231cc(puVar2 + 3, param_1, sVar1, "util.c", "ser_string", 0x3ef);
    *param_2 = sVar1 + 3;
    return puVar2;
}

void FUN_000234dc(undefined4 param_1, undefined4 param_2)

{
    FUN_000231cc(param_1, param_2, 8, "util.c", "copy_time", 0x4d2);
    return;
}

uint FUN_00023510(undefined4 *param_1, undefined4 param_2)

{
    int *piVar1;
    int iVar2;
    char *pcVar3;
    byte *pbVar4;
    size_t sVar5;
    undefined4 uVar6;
    int iVar7;
    undefined4 *puVar8;
    void *__ptr;
    byte *pbVar9;
    byte bVar11;
    int iVar12;
    undefined *puVar13;
    int iVar14;
    uint uVar15;
    uint uVar16;
    int iVar17;
    bool bVar18;
    char *local_980[5];
    undefined4 local_96c;
    undefined1 auStack_968[4];
    char *local_964;
    char *local_960;
    int local_95c;
    undefined4 *local_958;
    pthread_mutex_t *local_954;
    char *local_950;
    char *local_94c;
    char *local_948;
    char *local_944;
    char *local_940;
    byte *local_93c;
    char *local_938;
    uint local_934;
    timeval *local_930;
    char *local_92c;
    undefined4 local_928;
    undefined4 local_924;
    undefined4 local_920;
    char *local_91c;
    char *local_918;
    char *local_914;
    timeval local_90c[28];
    char local_828[32];
    uint local_808;
    undefined4 uStack_804;
    undefined4 uStack_800;
    undefined4 uStack_7fc;
    undefined4 local_7f8;
    undefined2 uStack_7f4;
    undefined1 local_7f2;
    byte *pbVar10;

    piVar1 = (int *)FUN_0004904c(param_2, 4);
    if ((piVar1 == (int *)0x0) || (*piVar1 != 1)) {
        return 0;
    }
    iVar2 = FUN_00049030();
    if (iVar2 < 1) {
        uVar15 = 0;
    } else {
        iVar14 = 0;
        uVar15 = 0;
        do {
            memset(local_90c, 0, 0x20);
            pcVar3 = (char *)FUN_0001f26c(piVar1, iVar14);
            if (pcVar3 == (char *)0x0) {
                return uVar15;
            }
            uVar15 = FUN_0001fa24(local_90c, pcVar3, 0x20);
            if (uVar15 == 0) {
                if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                    (DAT_00067858 < 3)) {
                LAB_00023658:
                    if (DAT_00067858 < 3)
                        goto LAB_000236bc;
                    local_914 = local_828;
                } else {
                    local_980[0] = pcVar3;
                    local_914 = local_828;
                    snprintf(local_828, 0x800, "merkle %d: %s", iVar14);
                    FUN_0001dbec(3, local_828, 0);
                    if ((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0'))
                        goto LAB_00023658;
                }
                builtin_strncpy(
                    local_914,
                    "Failed to convert merkle to merkle_bin in parse_notify",
                    0x37);
                FUN_0001dbec(3, local_914, 0);
            LAB_000236bc:
                free(pcVar3);
                return 0;
            }
            iVar14 = iVar14 + 1;
            free(pcVar3);
        } while (iVar2 != iVar14);
    }
    pbVar4 = (byte *)FUN_0001f26c(param_2, 0);
    local_920 = FUN_0001f208(param_2, 1);
    local_918 = (char *)FUN_0001f26c(param_2, 2);
    local_91c = (char *)FUN_0001f26c(param_2, 3);
    local_924 = FUN_0001f208(param_2, 5);
    local_928 = FUN_0001f208(param_2, 6);
    local_92c = (char *)FUN_0001f208(param_2, 7);
    pcVar3 = (char *)strtol(local_92c, (char **)0x0, 0x10);
    if (pcVar3 == (char *)0x0) {
        bVar11 = 0;
    } else {
        bVar11 = (DAT_0006a7d5 ^ 1) & 1;
    }
    if (bVar11 != 0) {
        local_930 = local_90c;
        local_90c[0].tv_usec = 0;
        local_90c[0].tv_sec = 0;
        local_914 = pcVar3;
        gettimeofday(local_930, (__timezone_ptr_t)0x0);
        if ((uint)local_90c[0].tv_sec < local_914) {
            local_90c[0].tv_sec = (__time_t)local_914;
            settimeofday(local_930, (timezone *)0x0);
            if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                (4 < DAT_00067858)) {
                local_914 = local_828;
                builtin_strncpy(local_828, "settime notify.ntime successfuly",
                                0x20);
                local_808 = local_808 & 0xffffff00;
                FUN_0001dbec(5, local_914, 0);
            }
            DAT_0006a7d5 = 1;
        }
    }
    iVar14 = FUN_0004904c(param_2, 8);
    if (iVar14 == 0) {
        uVar16 = 0;
    } else {
        piVar1 = (int *)FUN_0004904c(param_2, 8);
        uVar16 = (uint)(*piVar1 == 5);
    }
    local_930 = (timeval *)uVar16;
    if (pbVar4 == (byte *)0x0) {
        if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
            (DAT_00067858 < 3))
            goto LAB_0002387c;
        pcVar3 = "Null string passed to valid_ascii from in %s %s():%d";
    } else {
        sVar5 = strlen((char *)pbVar4);
        pbVar10 = pbVar4;
        if (sVar5 != 0) {
            do {
                pbVar9 = pbVar10 + 1;
                if (0x5e < *pbVar10 - 0x20) {
                    if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                        (DAT_00067858 < 3))
                        goto LAB_0002387c;
                    local_980[0] = "util.c";
                    local_980[1] = "parse_notify";
                    local_980[2] = (char *)0x7eb;
                    snprintf(local_828, 0x800,
                             "Invalid char 0x%x passed to valid_ascii from in "
                             "%s %s():%d");
                    goto LAB_00023868;
                }
                pbVar10 = pbVar9;
            } while ((int)pbVar9 - (int)pbVar4 < (int)sVar5);
            iVar14 = FUN_0001f2ec(local_920, "parse_notify", 0x7eb);
            if (((iVar14 == 0) ||
                 (iVar14 = FUN_0001f2ec(local_918, "parse_notify", 0x7eb),
                  iVar14 == 0)) ||
                ((iVar14 = FUN_0001f2ec(local_91c, "parse_notify", 0x7ec),
                  iVar14 == 0 ||
                      (((iVar14 =
                             FUN_0001f2ec(local_924, "parse_notify", 0x7ec),
                         iVar14 == 0 || (iVar14 = FUN_0001f2ec(
                                             local_928, "parse_notify", 0x7ec),
                                         iVar14 == 0)) ||
                        (iVar14 =
                             FUN_0001f2ec(local_92c, "parse_notify", 0x7ed),
                         iVar14 == 0))))))
                goto LAB_0002387c;
            local_954 = (pthread_mutex_t *)(param_1 + 0x35);
            iVar14 = pthread_mutex_lock(local_954);
            if (iVar14 != 0) {
                FUN_0001f5b0("parse_notify", 0x7f6);
            }
            local_958 = param_1 + 0x3b;
            FUN_0001f43c(local_958, "parse_notify", 0x7f6);
            local_940 = (char *)(param_1 + 0x1b0);
            free((void *)param_1[0xac]);
            param_1[0xac] = pbVar4;
            snprintf((char *)(param_1 + 0x1b0), 0x41, "%s", local_920);
            sVar5 = strlen(local_918);
            local_914 = (char *)(sVar5 >> 1);
            sVar5 = strlen(local_91c);
            local_934 = sVar5 >> 1;
            local_944 = (char *)(param_1 + 0x1c1);
            snprintf(local_944, 9, "%s", local_924);
            local_948 = (char *)(param_1 + 0x1c4);
            snprintf(local_948, 9, "%s", local_928);
            local_94c = (char *)(param_1 + 0x1c7);
            snprintf(local_94c, 9, "%s", local_92c);
            *(char *)(param_1 + 0xae) = (char)uVar16;
            iVar14 = 0;
            if (0.0 < *(double *)(param_1 + 0x1ca)) {
                *(double *)(param_1 + 0x1cc) = *(double *)(param_1 + 0x1ca);
            }
            param_1[0x18e] = local_914 + param_1[0x18b];
            local_950 = local_914 + param_1[0x18b] + local_934 + param_1[0xa2];
            param_1[0x18d] = local_950;
            for (; iVar14 < (int)param_1[0x1af]; iVar14 = iVar14 + 1) {
                free(*(void **)(param_1[0xad] + iVar14 * 4));
            }
            if (iVar2 == 0) {
                param_1[0x1af] = 0;
                local_938 = &DAT_00072ec0;
            LAB_00023c40:
                uVar15 = param_1[0x5e];
                param_1[0x5e] = uVar15 + 1;
                param_1[0x5f] = param_1[0x5f] + (uint)(0xfffffffe < uVar15);
            LAB_00023c58:
                if (local_930 != (timeval *)0x0) {
                    param_1[0xa0] = 0;
                    param_1[0xa1] = 0;
                }
                local_980[3] = local_948;
                local_980[4] = "00000000";
                local_96c = DAT_00068290;
                local_980[2] = local_94c;
                local_980[1] = "00000000000000000000000000000000000000000000000"
                               "00000000000000000";
                local_980[0] = local_940;
                snprintf((char *)local_90c, 0xe1, "%s%s%s%s%s%s%s", local_944);
                iVar2 = FUN_0001fa24(param_1 + 399, local_90c, 0x70);
                if (iVar2 == 0) {
                    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                        (2 < DAT_00067858)) {
                        pcVar3 = "Failed to convert header to header_bin in "
                                 "parse_notify";
                        goto LAB_00024464;
                    }
                LAB_000243c0:
                    uVar15 = 0;
                } else {
                    iVar2 = -((uint)(local_914 + 0xe) & 0xfffffff8);
                    iVar14 = FUN_0001fa24(auStack_968 + iVar2, local_918);
                    if (iVar14 == 0) {
                        if (((DAT_00072d88 == '\0') &&
                             (DAT_000686e0 == '\0')) &&
                            (DAT_00067858 < 3))
                            goto LAB_000243c0;
                        pcVar3 =
                            "Failed to convert cb1 to cb1_bin in parse_notify";
                        uVar15 = 0;
                    } else {
                        iVar14 = -(local_934 + 0xe & 0xfffffff8);
                        uVar15 = FUN_0001fa24(auStack_968 + iVar14 + iVar2,
                                              local_91c);
                        if (uVar15 != 0) {
                            free((void *)param_1[0x18c]);
                            *(undefined4 *)((int)local_980 + iVar14 + iVar2) =
                                0x849;
                            uVar6 = FUN_0001f790(local_950, 1, "util.c",
                                                 "parse_notify");
                            param_1[0x18c] = uVar6;
                            *(undefined4 *)((int)local_980 + iVar14 + iVar2 +
                                            4) = 0x84a;
                            *(char **)((int)local_980 + iVar14 + iVar2) =
                                "parse_notify";
                            FUN_000231cc(uVar6, auStack_968 + iVar2, local_914,
                                         "util.c");
                            iVar17 = param_1[0x18b];
                            if (iVar17 != 0) {
                                iVar7 = param_1[0x18c];
                                *(undefined4 *)((int)local_980 + iVar14 +
                                                iVar2 + 4) = 0x84c;
                                pcVar3 = local_914;
                                *(char **)((int)local_980 + iVar14 + iVar2) =
                                    "parse_notify";
                                FUN_000231cc(pcVar3 + iVar7, param_1[0x9e],
                                             iVar17, "util.c");
                                iVar17 = param_1[0x18b];
                            }
                            iVar12 = param_1[0xa2];
                            iVar7 = param_1[0x18c];
                            *(char **)((int)local_980 + iVar14 + iVar2) =
                                "parse_notify";
                            pcVar3 = local_914;
                            uVar16 = local_934;
                            *(undefined4 *)((int)local_980 + iVar14 + iVar2 +
                                            4) = 0x84d;
                            FUN_000231cc(pcVar3 + iVar7 + iVar17 + iVar12,
                                         auStack_968 + iVar14 + iVar2, uVar16,
                                         "util.c");
                            uVar16 = (uint)DAT_000686e1;
                            if (uVar16 != 0) {
                                __ptr = (void *)FUN_0001f970(param_1[0x18c],
                                                             param_1[0x18d]);
                                if ((DAT_000686e1 != 0) &&
                                    (((DAT_00072d88 != '\0' ||
                                       (DAT_000686e0 != '\0')) ||
                                      (6 < DAT_00067858)))) {
                                    *(void **)((int)local_980 + iVar14 +
                                               iVar2) = __ptr;
                                    snprintf(local_828, 0x800,
                                             "Pool %d coinbase %s", *param_1);
                                    FUN_0001dbec(7, local_828, 0);
                                }
                                free(__ptr);
                                uVar15 = uVar16;
                            }
                            goto LAB_00023e10;
                        }
                        if (((DAT_00072d88 == '\0') &&
                             (DAT_000686e0 == '\0')) &&
                            (DAT_00067858 < 3))
                            goto LAB_000243c0;
                        pcVar3 =
                            "Failed to convert cb2 to cb2_bin in parse_notify";
                    }
                    local_828._0_4_ = *(undefined4 *)pcVar3;
                    local_828._4_4_ = *(undefined4 *)(pcVar3 + 4);
                    local_828._8_4_ = *(undefined4 *)(pcVar3 + 8);
                    local_828._12_4_ = *(undefined4 *)(pcVar3 + 0xc);
                    local_828._16_4_ = *(undefined4 *)(pcVar3 + 0x10);
                    local_828._20_4_ = *(undefined4 *)(pcVar3 + 0x14);
                    local_828._24_4_ = *(undefined4 *)(pcVar3 + 0x18);
                    local_828._28_4_ = *(undefined4 *)(pcVar3 + 0x1c);
                    local_808 = *(uint *)(pcVar3 + 0x20);
                    uStack_804 = *(undefined4 *)(pcVar3 + 0x24);
                    uStack_800 = *(undefined4 *)(pcVar3 + 0x28);
                    uStack_7fc = *(undefined4 *)(pcVar3 + 0x2c);
                    local_7f8 = CONCAT31(local_7f8._1_3_,
                                         (char)*(undefined4 *)(pcVar3 + 0x30));
                    FUN_0001dbec(3, local_828, 0);
                }
            } else {
                local_980[0] = (char *)0x80b;
                uVar6 = FUN_0001f820(param_1[0xad], iVar2 * 4 + 1, "util.c",
                                     "parse_notify");
                local_938 = &DAT_00072ec0;
                iVar14 = 0;
                param_1[0xad] = uVar6;
                local_960 = "util.c";
                local_964 = (char *)&DAT_000686e1;
                local_93c = pbVar4;
                do {
                    local_95c = iVar14 << 2;
                    if (iVar2 <= iVar14) {
                        param_1[0x1af] = iVar2;
                        pbVar4 = local_93c;
                        if (1 < iVar2)
                            goto LAB_00023c58;
                        goto LAB_00023c40;
                    }
                    pcVar3 = (char *)FUN_0001f26c();
                    iVar17 = param_1[0xad];
                    uVar6 =
                        FUN_0001f708(0x20, local_960, "parse_notify", 0x810);
                    *(undefined4 *)(iVar17 + iVar14 * 4) = uVar6;
                    if (((*local_938 != '\0') && (*local_964 != '\0')) &&
                        ((DAT_00072d88 != '\0' ||
                          ((DAT_000686e0 != '\0' || (6 < DAT_00067858)))))) {
                        local_980[0] = pcVar3;
                        snprintf(local_828, 0x800, "merkle %d: %s", iVar14);
                        FUN_0001dbec(7, local_828, 0);
                    }
                    iVar14 = iVar14 + 1;
                    iVar17 =
                        FUN_0001fa24(*(undefined4 *)(param_1[0xad] + local_95c),
                                     pcVar3, 0x20);
                    free(pcVar3);
                } while (iVar17 != 0);
                pbVar4 = local_93c;
                if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                    (DAT_00067858 < 3))
                    goto LAB_000243c0;
                pcVar3 =
                    "Failed to convert merkle to merkle_bin in parse_notify";
            LAB_00024464:
                uVar15 = 0;
                local_828._0_4_ = *(undefined4 *)pcVar3;
                local_828._4_4_ = *(undefined4 *)(pcVar3 + 4);
                local_828._8_4_ = *(undefined4 *)(pcVar3 + 8);
                local_828._12_4_ = *(undefined4 *)(pcVar3 + 0xc);
                local_828._16_4_ = *(undefined4 *)(pcVar3 + 0x10);
                local_828._20_4_ = *(undefined4 *)(pcVar3 + 0x14);
                local_828._24_4_ = *(undefined4 *)(pcVar3 + 0x18);
                local_828._28_4_ = *(undefined4 *)(pcVar3 + 0x1c);
                local_808 = *(uint *)(pcVar3 + 0x20);
                uStack_804 = *(undefined4 *)(pcVar3 + 0x24);
                uStack_800 = *(undefined4 *)(pcVar3 + 0x28);
                uStack_7fc = *(undefined4 *)(pcVar3 + 0x2c);
                local_7f8 = *(undefined4 *)(pcVar3 + 0x30);
                uStack_7f4 = (undefined2) * (undefined4 *)(pcVar3 + 0x34);
                local_7f2 =
                    (undefined1)((uint) * (undefined4 *)(pcVar3 + 0x34) >>
                                 0x10);
                FUN_0001dbec(3, local_828, 0);
            }
        LAB_00023e10:
            FUN_0001f4b8(local_958, "parse_notify", 0x856);
            FUN_0001f534(local_954, "parse_notify", 0x856);
            (*DAT_0006797c)();
            if (*local_938 == '\0')
                goto LAB_00024244;
            if (DAT_000686e1 == 0) {
            LAB_00024044:
                if (DAT_000686e1 == 0)
                    goto LAB_00024244;
                if (DAT_00072d88 != '\0') {
                LAB_0002408c:
                    local_914 = local_828;
                    snprintf(local_828, 0x800, "bbversion: %s", local_924);
                    FUN_0001dbec(7, local_828, 0);
                    goto LAB_000240c4;
                }
            LAB_0002406c:
                if ((DAT_000686e0 != '\0') || (6 < DAT_00067858))
                    goto LAB_0002408c;
            LAB_000240e4:
                if ((DAT_000686e0 != '\0') || (6 < DAT_00067858)) {
                    local_914 = local_828;
                LAB_00024110:
                    pcVar3 = local_914;
                    snprintf(local_914, 0x800, "nbit: %s", local_928);
                    FUN_0001dbec(7, pcVar3, 0);
                LAB_0002413c:
                    if (DAT_000686e1 == 0)
                        goto LAB_00024244;
                    if (DAT_00072d88 == '\0')
                        goto LAB_0002415c;
                LAB_00024188:
                    pcVar3 = local_914;
                    snprintf(local_914, 0x800, "ntime: %s", local_92c);
                    FUN_0001dbec(7, pcVar3, 0);
                    goto LAB_000241b4;
                }
            LAB_0002415c:
                if ((DAT_000686e0 != '\0') || (6 < DAT_00067858)) {
                    local_914 = local_828;
                    goto LAB_00024188;
                }
            LAB_000241d4:
                if ((DAT_000686e0 == '\0') && (DAT_00067858 < 7))
                    goto LAB_00024244;
                local_914 = local_828;
            } else {
                if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                    (6 < DAT_00067858)) {
                    local_914 = local_828;
                    snprintf(local_828, 0x800, "job_id: %s", pbVar4);
                    FUN_0001dbec(7, local_828, 0);
                    if (DAT_000686e1 != 0) {
                        if (DAT_00072d88 == '\0')
                            goto LAB_00023efc;
                        goto LAB_00023f28;
                    }
                LAB_000240c4:
                    if (DAT_000686e1 == 0)
                        goto LAB_00024244;
                    if (DAT_00072d88 == '\0')
                        goto LAB_000240e4;
                    goto LAB_00024110;
                }
            LAB_00023efc:
                if ((DAT_000686e0 != '\0') || (6 < DAT_00067858)) {
                    local_914 = local_828;
                LAB_00023f28:
                    pcVar3 = local_914;
                    snprintf(local_914, 0x800, "prev_hash: %s", local_920);
                    FUN_0001dbec(7, pcVar3, 0);
                    if (DAT_000686e1 != 0) {
                        if (DAT_00072d88 == '\0')
                            goto LAB_00023f74;
                        goto LAB_00023fa0;
                    }
                    goto LAB_0002413c;
                }
            LAB_00023f74:
                if ((DAT_000686e0 == '\0') && (DAT_00067858 < 7)) {
                LAB_00023fec:
                    if ((DAT_000686e0 != '\0') || (6 < DAT_00067858)) {
                        local_914 = local_828;
                    LAB_00024018:
                        pcVar3 = local_914;
                        snprintf(local_914, 0x800, "coinbase2: %s", local_91c);
                        FUN_0001dbec(7, pcVar3, 0);
                        goto LAB_00024044;
                    }
                    goto LAB_0002406c;
                }
                local_914 = local_828;
            LAB_00023fa0:
                pcVar3 = local_914;
                snprintf(local_914, 0x800, "coinbase1: %s", local_918);
                FUN_0001dbec(7, pcVar3, 0);
                if (DAT_000686e1 != 0) {
                    if (DAT_00072d88 == '\0')
                        goto LAB_00023fec;
                    goto LAB_00024018;
                }
            LAB_000241b4:
                if (DAT_000686e1 == 0)
                    goto LAB_00024244;
                if (DAT_00072d88 == '\0')
                    goto LAB_000241d4;
            }
            pcVar3 = local_914;
            puVar13 = &DAT_0004dd58;
            if (local_930 == (timeval *)0x0) {
                puVar13 = &DAT_0004dd5c;
            }
            snprintf(local_914, 0x800, "clean: %s", puVar13);
            FUN_0001dbec(7, pcVar3, 0);
        LAB_00024244:
            free(local_918);
            free(local_91c);
            param_1[0x1d] = param_1[0x1d] + 1;
            bVar18 = 0xfffffffe < DAT_00074f80;
            DAT_00074f80 = DAT_00074f80 + 1;
            DAT_00074f84 = DAT_00074f84 + (uint)bVar18;
            puVar8 = (undefined4 *)FUN_0002fe54();
            if (param_1 != puVar8) {
                return uVar15;
            }
            DAT_00076060 = 1;
            return uVar15;
        }
        if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
            (DAT_00067858 < 3))
            goto LAB_0002387c;
        pcVar3 = "Zero length string passed to valid_ascii from in %s %s():%d";
    }
    local_980[0] = "parse_notify";
    local_980[1] = (char *)0x7eb;
    snprintf(local_828, 0x800, pcVar3, "util.c");
LAB_00023868:
    FUN_0001dbec(3, local_828, 0);
LAB_0002387c:
    free(pbVar4);
    free(local_918);
    free(local_91c);
    return uVar15;
}

undefined4 FUN_00024678(int param_1, int param_2, int param_3)

{
    long lVar1;
    in_addr_t iVar2;
    ssize_t sVar3;
    size_t sVar4;
    int iVar5;
    uint uVar6;
    char *__s;
    addrinfo *local_a48;
    addrinfo aStack_a44;
    undefined2 local_a24;
    undefined1 local_a22;
    undefined1 local_a21;
    undefined4 local_a20;
    char acStack_a1c[508];
    addrinfo local_820[64];

    local_a24 = 0x104;
    lVar1 = strtol(*(char **)(param_1 + 0x248), (char **)0x0, 10);
    local_a21 = (undefined1)lVar1;
    local_a22 = (undefined1)((uint)lVar1 >> 8);
    builtin_strncpy(acStack_a1c, "CGMINER", 8);
    iVar2 = inet_addr(*(char **)(param_1 + 0x268));
    uVar6 = iVar2 << 0x18 | (iVar2 >> 8 & 0xff) << 0x10 |
            (iVar2 >> 0x10 & 0xff) << 8 | iVar2 >> 0x18;
    if (uVar6 == 0xffffffff) {
        local_a48 = &aStack_a44;
        memset(local_820, 0, 0x20);
        local_820[0].ai_family = 2;
        iVar5 = getaddrinfo(*(char **)(param_1 + 0x268), (char *)0x0, local_820,
                            &local_a48);
        if (iVar5 == 0) {
            uVar6 = *(uint *)(local_a48->ai_addr->sa_data + 2);
            freeaddrinfo(local_a48);
            uVar6 = uVar6 << 0x18 | (uVar6 >> 8 & 0xff) << 0x10 |
                    (uVar6 >> 0x10 & 0xff) << 8 | uVar6 >> 0x18;
            if (uVar6 == 0xffffffff)
                goto LAB_000248cc;
            goto LAB_000246dc;
        }
        if (param_3 == 0) {
        LAB_000248cc:
            if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                (DAT_00067858 < 4)) {
                return 0;
            }
            snprintf((char *)local_820, 0x800,
                     "Invalid IP address specified for socks4 proxy: %s",
                     *(undefined4 *)(param_1 + 0x268));
            goto LAB_00024790;
        }
        __s = *(char **)(param_1 + 0x268);
        local_a20 = 0x1000000;
        sVar4 = strlen(__s);
        if (0xfe < sVar4) {
            sVar4 = 0xff;
        }
        FUN_000231cc(acStack_a1c + 8, __s, sVar4, "util.c", "socks4_negotiate",
                     0xba5);
        acStack_a1c[sVar4 + 8] = '\0';
        send(param_2, &local_a24, sVar4 + 0x11, 0);
    } else {
    LAB_000246dc:
        local_a20._3_1_ = (undefined1)uVar6;
        local_a20._0_3_ =
            CONCAT12((char)(uVar6 >> 8),
                     CONCAT11((char)(uVar6 >> 0x10), (char)(uVar6 >> 0x18)));
        send(param_2, &local_a24, 0x10, 0);
    }
    sVar3 = recv(param_2, local_820, 1, 0);
    if (((sVar3 != -1) && ((char)local_820[0].ai_flags == '\0')) &&
        ((sVar3 = recv(param_2, local_820, 1, 0),
          sVar3 != -1 && ((char)local_820[0].ai_flags == 'Z')))) {
        iVar5 = 6;
        do {
            recv(param_2, local_820, 1, 0);
            iVar5 = iVar5 + -1;
        } while (iVar5 != 0);
        return 1;
    }
    if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
        (DAT_00067858 < 4)) {
        return 0;
    }
    snprintf((char *)local_820, 0x800, "Bad response from %s:%s SOCKS4 server",
             *(undefined4 *)(param_1 + 0x26c),
             *(undefined4 *)(param_1 + 0x270));
LAB_00024790:
    FUN_0001dbec(4, local_820, 0);
    return 0;
}

/* WARNING: Restarted to delay deadcode elimination for space: ram */

uint FUN_00024934(undefined4 *param_1)

{
    uint uVar1;
    bool bVar2;
    int iVar3;
    uint uVar4;
    uint uVar5;
    int *piVar6;
    int iVar7;
    uint uVar8;
    size_t sVar9;
    SSL_METHOD *meth;
    SSL_CTX *ctx;
    BIO_METHOD *type;
    BIO *b;
    X509 *x;
    X509_STORE *ctx_00;
    SSL *s;
    SSL_CIPHER *c;
    char *pcVar10;
    long lVar11;
    X509 *x_00;
    void *pvVar12;
    int *piVar13;
    X509_NAME *pXVar14;
    ssize_t sVar15;
    undefined4 uVar16;
    int *piVar17;
    undefined4 *puVar18;
    uint uVar19;
    timeval *__s;
    addrinfo *paVar20;
    uint uVar21;
    uint *puVar22;
    uint uVar23;
    undefined4 uVar24;
    byte *pbVar25;
    fd_set *local_28a8;
    char *local_28a4;
    char *local_28a0;
    int local_289c;
    char *local_2888;
    addrinfo *local_2880;
    socklen_t local_287c;
    uint local_2878;
    char local_2874[12];
    addrinfo aStack_2868;
    timeval local_2848[3];
    undefined4 uStack_282c;
    fd_set local_2828[8];
    uint local_23cc[233];
    uint local_2028;
    char acStack_2024[12];
    uint local_2018;
    undefined4 local_2014;
    undefined4 local_2010;
    uint local_200c;
    char acStack_2008[4];
    undefined2 uStack_2004;
    undefined1 local_2002;

    iVar3 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xb4));
    if (iVar3 != 0) {
        piVar6 = __errno_location();
        snprintf((char *)&local_2028, 0x800,
                 "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar6,
                 "util.c", "setup_stratum_socket", 0xc7b);
        FUN_0001dbec(3, &local_2028, 1);
        FUN_0003c4b4(1);
    }
    iVar3 = param_1[0x93];
    *(undefined1 *)((int)param_1 + 0x291) = 0;
    if (iVar3 != 0) {
        if ((*(char *)(param_1 + 0x94) != '\0') &&
            ((SSL *)param_1[0x95] != (SSL *)0x0)) {
            SSL_shutdown((SSL *)param_1[0x95]);
            X509_free((X509 *)param_1[0x97]);
            SSL_CTX_free((SSL_CTX *)param_1[0x96]);
            SSL_free((SSL *)param_1[0x95]);
            iVar3 = param_1[0x93];
        }
        close(iVar3);
    }
    param_1[0x93] = 0;
    iVar3 = pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0xb4));
    if (iVar3 != 0) {
        piVar6 = __errno_location();
        snprintf((char *)&local_2028, 0x800,
                 "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar6,
                 "util.c", "setup_stratum_socket", 0xc8d);
        FUN_0001dbec(3, &local_2028, 1);
        FUN_0003c4b4(1);
    }
    (*DAT_0006797c)();
    memset(&aStack_2868, 0, 0x20);
    iVar3 = DAT_0006a6a8;
    aStack_2868.ai_socktype = 1;
    if (param_1[0x2e] == 0) {
        if (DAT_0006a6a8 == 0) {
            local_28a0 = (char *)param_1[0x9a];
        } else {
            param_1[0x2e] = DAT_0006a6a8;
            FUN_000208f0(iVar3, param_1 + 0x9b, param_1 + 0x9c);
            param_1[0x2d] = 3;
            local_28a0 = (char *)param_1[0x9a];
            if (param_1[0x2e] != 0)
                goto LAB_000249cc;
        }
        local_28a4 = (char *)param_1[0x92];
    } else {
    LAB_000249cc:
        local_28a0 = (char *)param_1[0x9b];
        local_28a4 = (char *)param_1[0x9c];
    }
    iVar3 = getaddrinfo(local_28a0, local_28a4, &aStack_2868, &local_2880);
    if (iVar3 == 0) {
        if (local_2880 != (addrinfo *)0x0) {
            paVar20 = local_2880;
        LAB_00024a94:
            do {
                uVar4 = socket(paVar20->ai_family, paVar20->ai_socktype,
                               paVar20->ai_protocol);
                if (uVar4 != 0xffffffff) {
                    uVar5 = fcntl(uVar4, 3, 0);
                    fcntl(uVar4, 4, uVar5 | 0x800);
                    iVar3 =
                        connect(uVar4, paVar20->ai_addr, paVar20->ai_addrlen);
                    if (iVar3 == -1) {
                        local_2848[0].tv_sec = 1;
                        local_2848[0].tv_usec = 0;
                        piVar6 = __errno_location();
                        if (*piVar6 == 0x73) {
                            uVar5 = uVar4 + 0x1f;
                            if (-1 < (int)uVar4) {
                                uVar5 = uVar4;
                            }
                            iVar3 = (int)uVar5 >> 5;
                            uVar5 = uVar4 & 0x1f;
                            if ((int)uVar4 < 1) {
                                uVar5 = -(-uVar4 & 0x1f);
                            }
                            uVar5 = 1 << (uVar5 & 0xff);
                            while (true) {
                                puVar18 = &uStack_282c;
                                do {
                                    puVar18 = puVar18 + 1;
                                    *puVar18 = 0;
                                } while (local_2828[0].fds_bits + 0x1f !=
                                         puVar18);
                                local_2828[0].fds_bits[iVar3] =
                                    local_2828[0].fds_bits[iVar3] | uVar5;
                                iVar7 =
                                    select(uVar4 + 1, (fd_set *)0x0, local_2828,
                                           (fd_set *)0x0, local_2848);
                                if (0 < iVar7)
                                    break;
                                if ((iVar7 == 0) || (*piVar6 != 4))
                                    goto LAB_00024e54;
                            }
                            if ((uVar5 & local_2828[0].fds_bits[iVar3]) != 0) {
                                local_287c = 4;
                                iVar3 = getsockopt(uVar4, 1, 4, &local_2878,
                                                   &local_287c);
                                if ((iVar3 == 0) && (local_2878 == 0)) {
                                    if ((DAT_000686e1 != 0) &&
                                        (((DAT_00072d88 != '\0' ||
                                           (DAT_000686e0 != '\0')) ||
                                          (6 < DAT_00067858)))) {
                                        local_2028._0_1_ = 'S';
                                        local_2028._1_1_ = 'u';
                                        local_2028._2_1_ = 'c';
                                        local_2028._3_1_ = 'c';
                                        builtin_strncpy(acStack_2024,
                                                        "eeded delaye", 0xc);
                                        local_2018._0_1_ = 'd';
                                        local_2018._1_1_ = ' ';
                                        local_2018._2_1_ = 'c';
                                        local_2018._3_1_ = 'o';
                                        local_2014._0_1_ = 'n';
                                        local_2014._1_1_ = 'n';
                                        local_2014._2_1_ = 'e';
                                        local_2014._3_1_ = 'c';
                                        local_2010._0_2_ = 0x74;
                                        FUN_0001dbec(7, &local_2028, 0);
                                    }
                                    goto LAB_00024f98;
                                }
                            }
                        LAB_00024e54:
                            close(uVar4);
                            if ((DAT_000686e1 != 0) &&
                                (((DAT_00072d88 != '\0' ||
                                   (DAT_000686e0 != '\0')) ||
                                  (6 < DAT_00067858)))) {
                                local_2028._0_1_ = 'S';
                                local_2028._1_1_ = 'e';
                                local_2028._2_1_ = 'l';
                                local_2028._3_1_ = 'e';
                                acStack_2024[0] = 'c';
                                acStack_2024[1] = 't';
                                acStack_2024[2] = ' ';
                                acStack_2024[3] = 't';
                                acStack_2024[4] = 'i';
                                acStack_2024[5] = 'm';
                                acStack_2024[6] = 'e';
                                acStack_2024[7] = 'o';
                                acStack_2024[8] = 'u';
                                acStack_2024[9] = 't';
                                acStack_2024[10] = '/';
                                acStack_2024[0xb] = 'f';
                                uVar4._0_1_ = 'a';
                                uVar4._1_1_ = 'i';
                                uVar4._2_1_ = 'l';
                                uVar4._3_1_ = 'e';
                                uVar5._0_1_ = 'd';
                                uVar5._1_1_ = ' ';
                                uVar5._2_1_ = 'c';
                                uVar5._3_1_ = 'o';
                                uVar23._0_1_ = 'n';
                                uVar23._1_1_ = 'n';
                                uVar23._2_1_ = 'e';
                                uVar23._3_1_ = 'c';
                                puVar22 = &local_2018;
                                goto LAB_00024db0;
                            }
                        } else {
                            close(uVar4);
                            if ((DAT_000686e1 != 0) &&
                                (((DAT_00072d88 != '\0' ||
                                   (DAT_000686e0 != '\0')) ||
                                  (6 < DAT_00067858)))) {
                                local_2028._0_1_ = 'F';
                                local_2028._1_1_ = 'a';
                                local_2028._2_1_ = 'i';
                                local_2028._3_1_ = 'l';
                                builtin_strncpy(acStack_2024, "ed sock conn",
                                                0xc);
                                local_2018._0_1_ = 'e';
                                local_2018._1_1_ = 'c';
                                local_2018._2_1_ = 't';
                                local_2018._3_1_ = '\0';
                                FUN_0001dbec(7, &local_2028, 0);
                            }
                        }
                        goto LAB_00024b84;
                    }
                    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                        (3 < DAT_00067858)) {
                        local_2028._0_1_ = 'S';
                        local_2028._1_1_ = 'u';
                        local_2028._2_1_ = 'c';
                        local_2028._3_1_ = 'c';
                        builtin_strncpy(acStack_2024, "eeded immedi", 0xc);
                        local_2018._0_1_ = 'a';
                        local_2018._1_1_ = 't';
                        local_2018._2_1_ = 'e';
                        local_2018._3_1_ = ' ';
                        local_2014._0_1_ = 'c';
                        local_2014._1_1_ = 'o';
                        local_2014._2_1_ = 'n';
                        local_2014._3_1_ = 'n';
                        local_2010._0_1_ = 'e';
                        local_2010._1_1_ = 'c';
                        local_2010._2_1_ = 't';
                        local_2010._3_1_ = '\0';
                        FUN_0001dbec(4, &local_2028, 0);
                    }
                LAB_00024f98:
                    FUN_0001f0f4(uVar4);
                    freeaddrinfo(local_2880);
                    if (param_1[0x2e] == 0)
                        goto LAB_000250dc;
                    switch (param_1[0x2d]) {
                    case 0:
                        uVar16 = 0;
                        break;
                    case 1:
                        uVar16 = 1;
                        break;
                    case 2:
                        uVar16 = 0;
                        goto LAB_00025af8;
                    case 3:
                    case 5:
                        local_2828[0].fds_bits[0] =
                            CONCAT13(local_2828[0].fds_bits[0]._3_1_, 0x105);
                        if ((DAT_000686e1 != 0) && (((DAT_00072d88 != '\0' ||
                                                      (DAT_000686e0 != '\0')) ||
                                                     (6 < DAT_00067858)))) {
                            snprintf((char *)&local_2028, 0x800,
                                     "Attempting to negotiate with %s:%s "
                                     "SOCKS5 proxy",
                                     param_1[0x9b], param_1[0x9c]);
                            FUN_0001dbec(7, &local_2028, 0);
                        }
                        send(uVar4, local_2828, 3, 0);
                        sVar15 = recv(uVar4, &local_2028, 1, 0);
                        if (((sVar15 == -1) || ((char)local_2028 != '\x05')) ||
                            ((sVar15 = recv(uVar4, &local_2028, 1, 0),
                              sVar15 == -1 ||
                                  (((uint)local_2828[0].fds_bits[0] >> 0x10 &
                                    0xff) != (local_2028 & 0xff))))) {
                            if (((DAT_00072d88 == '\0') &&
                                 (DAT_000686e0 == '\0')) &&
                                (DAT_00067858 < 4))
                                goto LAB_00025d80;
                            uVar16 = param_1[0x9b];
                            uVar24 = param_1[0x9c];
                        LAB_00025c3c:
                            snprintf((char *)&local_2028, 0x800,
                                     "Bad response from %s:%s SOCKS5 server",
                                     uVar16, uVar24);
                            FUN_0001dbec(4, &local_2028, 0);
                        } else {
                            pcVar10 = (char *)param_1[0x9a];
                            local_2828[0].fds_bits[0] = 0x3000105;
                            sVar9 = strlen(pcVar10);
                            if (0xfe < sVar9) {
                                sVar9 = 0xff;
                            }
                            local_2828[0].fds_bits[1] = CONCAT31(
                                local_2828[0].fds_bits[1]._1_3_, (char)sVar9);
                            FUN_000231cc(
                                (undefined1 *)((int)local_2828[0].fds_bits + 5),
                                pcVar10, sVar9, "util.c", "socks5_negotiate",
                                0xb3f);
                            lVar11 =
                                strtol((char *)param_1[0x92], (char **)0x0, 10);
                            *(char *)((int)local_2828[0].fds_bits + sVar9 + 6) =
                                (char)lVar11;
                            *(char *)((int)local_2828[0].fds_bits + sVar9 + 5) =
                                (char)((uint)lVar11 >> 8);
                            send(uVar4, local_2828, sVar9 + 7, 0);
                            sVar15 = recv(uVar4, &local_2028, 1, 0);
                            if ((((sVar15 != -1) &&
                                  ((char)local_2028 == '\x05')) &&
                                 (sVar15 = recv(uVar4, &local_2028, 1, 0),
                                  sVar15 != -1)) &&
                                ((local_2028 & 0xff) == 0)) {
                                recv(uVar4, &local_2028, 1, 0);
                                sVar15 = recv(uVar4, &local_2028, 1, 0);
                                if (sVar15 == -1)
                                    goto LAB_00026120;
                                if ((local_2028 & 0xff) == 1) {
                                    iVar3 = 4;
                                    do {
                                        recv(uVar4, &local_2028, 1, 0);
                                        iVar3 = iVar3 + -1;
                                    } while (iVar3 != 0);
                                } else {
                                    if ((local_2028 & 0xff) != 3)
                                        goto LAB_00026120;
                                    sVar15 = recv(uVar4, &local_2028, 1, 0);
                                    iVar3 = 0;
                                    if (sVar15 == -1) {
                                        uVar5 = 0xffffffff;
                                    } else {
                                        uVar5 = local_2028 & 0xff;
                                    }
                                    while (iVar3 < (int)uVar5) {
                                        recv(uVar4, &local_2028, 1, 0);
                                        iVar3 = iVar3 + 1;
                                    }
                                }
                                recv(uVar4, &local_2028, 1, 0);
                                recv(uVar4, &local_2028, 1, 0);
                                if ((DAT_000686e1 != 0) &&
                                    (((DAT_00072d88 != '\0' ||
                                       (DAT_000686e0 != '\0')) ||
                                      (6 < DAT_00067858)))) {
                                    snprintf((char *)&local_2028, 0x800,
                                             "Success negotiating with %s:%s "
                                             "SOCKS5 proxy",
                                             param_1[0x9b], param_1[0x9c]);
                                    FUN_0001dbec(7, &local_2028, 0);
                                }
                            LAB_000250dc:
                                local_28a8 = local_2828;
                                if (param_1[0x98] == 0) {
                                    uVar16 = FUN_0001f790(
                                        0x2000, 1, "util.c",
                                        "setup_stratum_socket", 0xd17);
                                    param_1[0x98] = uVar16;
                                    param_1[0x99] = 0x2000;
                                }
                                param_1[0x93] = uVar4;
                                if (*(char *)(param_1 + 0x94) != '\0') {
                                    if (((DAT_00072d88 != '\0') ||
                                         (DAT_000686e0 != '\0')) ||
                                        (4 < DAT_00067858)) {
                                        local_2028._0_1_ = 's';
                                        local_2028._1_1_ = 't';
                                        local_2028._2_1_ = 'a';
                                        local_2028._3_1_ = 'r';
                                        builtin_strncpy(acStack_2024,
                                                        "t ssl connec", 0xc);
                                        local_2018 =
                                            CONCAT13(local_2018._3_1_, 0xa74);
                                        FUN_0001dbec(5, &local_2028, 0);
                                    }
                                    uVar5 = 0xb54cda56;
                                    memcpy(local_28a8, &DAT_0004cac0, 0x460);
                                    uVar23 = 0xfc3f9291;
                                    local_2878._0_1_ = 'u';
                                    local_2878._1_1_ = 'o';
                                    local_2878._2_1_ = 'h';
                                    local_2878._3_1_ = 'z';
                                    builtin_strncpy(local_2874, "oahzuhidkgna",
                                                    0xc);
                                    do {
                                        uVar1 = uVar5 >> 2;
                                        uVar21 = 0x117;
                                        puVar22 = local_23cc;
                                        do {
                                            uVar8 = uVar1 ^ uVar21;
                                            uVar19 = puVar22[-1];
                                            uVar21 = uVar21 - 1;
                                            uVar23 =
                                                *puVar22 -
                                                ((uVar19 ^
                                                  (&local_2878)[uVar8 & 3]) +
                                                     (uVar5 ^ uVar23) ^
                                                 (uVar23 << 2 ^ uVar19 >> 5) +
                                                     (uVar19 << 4 ^
                                                      uVar23 >> 3));
                                            *puVar22 = uVar23;
                                            puVar22 = puVar22 + -1;
                                        } while (uVar21 != 0);
                                        uVar21 = uVar5 ^ uVar23;
                                        uVar5 = uVar5 + 0x61c88647;
                                        uVar23 =
                                            local_2828[0].fds_bits[0] -
                                            (((&local_2878)[uVar1 & 3] ^
                                              local_23cc[0]) +
                                                 uVar21 ^
                                             (uVar23 * 4 ^ local_23cc[0] >> 5) +
                                                 (local_23cc[0] << 4 ^
                                                  uVar23 >> 3));
                                        local_2828[0].fds_bits[0] = uVar23;
                                    } while (uVar5 != 0);
                                    sVar9 = strlen((char *)local_28a8);
                                    OPENSSL_init_ssl(0, 0, 0);
                                    OPENSSL_init_crypto(0xc, 0, 0);
                                    OPENSSL_init_ssl(0x200002, 0, 0);
                                    meth = (SSL_METHOD *)TLS_client_method();
                                    ctx = SSL_CTX_new(meth);
                                    type = BIO_s_mem();
                                    b = BIO_new(type);
                                    BIO_write(b, local_28a8, sVar9 + 1);
                                    x = PEM_read_bio_X509(b, (X509 **)0x0,
                                                          (undefined1 *)0x0,
                                                          (void *)0x0);
                                    if (x == (X509 *)0x0) {
                                        if (((DAT_00072d88 != '\0') ||
                                             (DAT_000686e0 != '\0')) ||
                                            (2 < DAT_00067858)) {
                                            local_2028._0_1_ = 'u';
                                            local_2028._1_1_ = 'n';
                                            local_2028._2_1_ = 'a';
                                            local_2028._3_1_ = 'b';
                                            builtin_strncpy(acStack_2024,
                                                            "le to parse ",
                                                            0xc);
                                            local_2018._0_1_ = 'c';
                                            local_2018._1_1_ = 'e';
                                            local_2018._2_1_ = 'r';
                                            local_2018._3_1_ = 't';
                                            local_2014._0_1_ = 'i';
                                            local_2014._1_1_ = 'f';
                                            local_2014._2_1_ = 'i';
                                            local_2014._3_1_ = 'c';
                                            local_2010._0_1_ = 'a';
                                            local_2010._1_1_ = 't';
                                            local_2010._2_1_ = 'e';
                                            local_2010._3_1_ = ' ';
                                            local_200c._0_1_ = 'i';
                                            local_200c._1_1_ = 'n';
                                            local_200c._2_1_ = ' ';
                                            local_200c._3_1_ = 'm';
                                            builtin_strncpy(acStack_2008,
                                                            "emor", 4);
                                            uStack_2004 = 0xa79;
                                            local_2002 = 0;
                                            FUN_0001dbec(3, &local_2028, 0);
                                        }
                                        BIO_free(b);
                                    } else {
                                        ctx_00 = SSL_CTX_get_cert_store(ctx);
                                        X509_STORE_add_cert(ctx_00, x);
                                        BIO_free(b);
                                        s = SSL_new(ctx);
                                        SSL_set_fd(s, param_1[0x93]);
                                        iVar3 = SSL_connect(s);
                                        if (iVar3 == 1) {
                                            if (((DAT_00072d88 != '\0') ||
                                                 (DAT_000686e0 != '\0')) ||
                                                (5 < DAT_00067858)) {
                                                c = SSL_get_current_cipher(s);
                                                pcVar10 =
                                                    SSL_CIPHER_get_name(c);
                                                snprintf((char *)&local_2028,
                                                         0x800,
                                                         "Connected with %s "
                                                         "encryption\n",
                                                         pcVar10);
                                                FUN_0001dbec(6, &local_2028, 0);
                                            }
                                            lVar11 = SSL_get_verify_result(s);
                                            piVar6 =
                                                (int *)(uint)(lVar11 != 0 &&
                                                              1 < lVar11 - 9U);
                                            if (lVar11 != 9 &&
                                                (lVar11 != 0 &&
                                                 lVar11 - 9U != 1)) {
                                                if (((DAT_00072d88 == '\0') &&
                                                     (DAT_000686e0 == '\0')) &&
                                                    (DAT_00067858 < 3)) {
                                                LAB_00025dd4:
                                                    if (DAT_00067858 < 3)
                                                        goto LAB_00025e10;
                                                } else {
                                                    pcVar10 =
                                                        X509_verify_cert_error_string(
                                                            lVar11);
                                                    snprintf(
                                                        (char *)&local_2028,
                                                        0x800,
                                                        "Verify return code: "
                                                        "%ld (%s)\n",
                                                        lVar11, pcVar10);
                                                    FUN_0001dbec(3, &local_2028,
                                                                 0);
                                                    if ((DAT_00072d88 ==
                                                         '\0') &&
                                                        (DAT_000686e0 == '\0'))
                                                        goto LAB_00025dd4;
                                                }
                                                local_2028._0_1_ = 'c';
                                                local_2028._1_1_ = 'e';
                                                local_2028._2_1_ = 'r';
                                                local_2028._3_1_ = 't';
                                                builtin_strncpy(acStack_2024,
                                                                " of pool is ",
                                                                0xc);
                                                local_2018._0_1_ = 'v';
                                                local_2018._1_1_ = 'e';
                                                local_2018._2_1_ = 'r';
                                                local_2018._3_1_ = 'i';
                                                local_2014._0_1_ = 'f';
                                                local_2014._1_1_ = 'y';
                                                local_2014._2_1_ = ' ';
                                                local_2014._3_1_ = 'f';
                                                local_2010._0_1_ = 'a';
                                                local_2010._1_1_ = 'i';
                                                local_2010._2_1_ = 'l';
                                                local_2010._3_1_ = '\n';
                                                local_200c =
                                                    local_200c & 0xffffff00;
                                                FUN_0001dbec(3, &local_2028, 0);
                                            } else {
                                                x_00 =
                                                    SSL_get_peer_certificate(s);
                                                if (x_00 == (X509 *)0x0) {
                                                    if (((DAT_00072d88 !=
                                                          '\0') ||
                                                         (DAT_000686e0 !=
                                                          '\0')) ||
                                                        (2 < DAT_00067858)) {
                                                        local_2028._0_1_ = 'c';
                                                        local_2028._1_1_ = 'e';
                                                        local_2028._2_1_ = 'r';
                                                        local_2028._3_1_ = 't';
                                                        builtin_strncpy(
                                                            acStack_2024,
                                                            " of pool is ",
                                                            0xc);
                                                        local_2018._0_1_ = 'N';
                                                        local_2018._1_1_ = 'U';
                                                        local_2018._2_1_ = 'L';
                                                        local_2018._3_1_ = 'L';
                                                        local_2014._0_2_ = 10;
                                                        FUN_0001dbec(
                                                            3, &local_2028, 0);
                                                    }
                                                } else {
                                                    pvVar12 = X509_get_ext_d2i(
                                                        x_00, 0x55, piVar6,
                                                        piVar6);
                                                    iVar3 = OPENSSL_sk_num();
                                                    if (0 < iVar3) {
                                                        local_2888 =
                                                            "san dns:%s\n";
                                                        local_289c = 0;
                                                        do {
                                                            piVar13 = (int *)
                                                                OPENSSL_sk_value(
                                                                    pvVar12,
                                                                    local_289c);
                                                            if (*piVar13 == 7) {
                                                                piVar13 =
                                                                    (int *)
                                                                        piVar13
                                                                            [1];
                                                                if (((piVar13
                                                                          [1] ==
                                                                      4) &&
                                                                     (piVar13
                                                                          [2] !=
                                                                      0)) &&
                                                                    (*piVar13 ==
                                                                     4)) {
                                                                    __s =
                                                                        local_2848;
                                                                    memset(
                                                                        __s, 0,
                                                                        0x20);
                                                                    pbVar25 =
                                                                        (byte
                                                                             *)piVar13
                                                                            [2];
                                                                    sprintf(
                                                                        (char *)
                                                                            __s,
                                                                        "%d.%d."
                                                                        "%d.%d",
                                                                        (uint)*pbVar25,
                                                                        (uint)pbVar25
                                                                            [1],
                                                                        (uint)pbVar25
                                                                            [2],
                                                                        (uint)pbVar25
                                                                            [3]);
                                                                    piVar13 = (int *)
                                                                        FUN_0001f11c(
                                                                            __s,
                                                                            param_1
                                                                                [0x90]);
                                                                    if (piVar13 !=
                                                                        (int *)0x0) {
                                                                        piVar6 =
                                                                            piVar13;
                                                                    }
                                                                    if (((DAT_00072d88 !=
                                                                          '\0') ||
                                                                         (DAT_000686e0 !=
                                                                          '\0')) ||
                                                                        (5 <
                                                                         DAT_00067858)) {
                                                                        pcVar10 =
                                                                            "sa"
                                                                            "n "
                                                                            "ip"
                                                                            ":%"
                                                                            "s"
                                                                            "\n";
                                                                        goto LAB_00025ec4;
                                                                    }
                                                                }
                                                            } else if (
                                                                *piVar13 == 2) {
                                                                piVar13 =
                                                                    (int *)
                                                                        piVar13
                                                                            [1];
                                                                if (((piVar13
                                                                          [1] ==
                                                                      0x16) &&
                                                                     (piVar13
                                                                          [2] !=
                                                                      0)) &&
                                                                    ((*piVar13 !=
                                                                          0 &&
                                                                      (piVar17 = (int *)FUN_0001f11c(
                                                                           piVar13
                                                                               [2],
                                                                           param_1
                                                                               [0x90]),
                                                                       piVar17 !=
                                                                           (int *)0x0)))) {
                                                                    piVar6 =
                                                                        piVar17;
                                                                }
                                                                if (((DAT_00072d88 !=
                                                                      '\0') ||
                                                                     (DAT_000686e0 !=
                                                                      '\0')) ||
                                                                    (5 <
                                                                     DAT_00067858)) {
                                                                    __s = (timeval
                                                                               *)
                                                                        piVar13
                                                                            [2];
                                                                    pcVar10 =
                                                                        local_2888;
                                                                LAB_00025ec4:
                                                                    snprintf(
                                                                        (char
                                                                             *)&local_2028,
                                                                        0x800,
                                                                        pcVar10,
                                                                        __s);
                                                                    FUN_0001dbec(
                                                                        6,
                                                                        &local_2028,
                                                                        0);
                                                                }
                                                            }
                                                            local_289c =
                                                                local_289c + 1;
                                                        } while (iVar3 !=
                                                                 local_289c);
                                                    }
                                                    pXVar14 =
                                                        X509_get_subject_name(
                                                            x_00);
                                                    pcVar10 = X509_NAME_oneline(
                                                        pXVar14, (char *)0x0,
                                                        0);
                                                    if (((DAT_00072d88 !=
                                                          '\0') ||
                                                         (DAT_000686e0 !=
                                                          '\0')) ||
                                                        (5 < DAT_00067858)) {
                                                        snprintf(
                                                            (char *)&local_2028,
                                                            0x800, "cert: %s\n",
                                                            pcVar10);
                                                        FUN_0001dbec(
                                                            6, &local_2028, 0);
                                                    }
                                                    free(pcVar10);
                                                    pXVar14 =
                                                        X509_get_issuer_name(
                                                            x_00);
                                                    pcVar10 = X509_NAME_oneline(
                                                        pXVar14, (char *)0x0,
                                                        0);
                                                    if (((DAT_00072d88 !=
                                                          '\0') ||
                                                         (DAT_000686e0 !=
                                                          '\0')) ||
                                                        (5 < DAT_00067858)) {
                                                        snprintf(
                                                            (char *)&local_2028,
                                                            0x800,
                                                            "issuer: %s\n",
                                                            pcVar10);
                                                        FUN_0001dbec(
                                                            6, &local_2028, 0);
                                                    }
                                                    free(pcVar10);
                                                    if (piVar6 != (int *)0x0) {
                                                        param_1[0x95] = s;
                                                        param_1[0x96] = ctx;
                                                        param_1[0x97] = x;
                                                        goto LAB_000255ec;
                                                    }
                                                }
                                            }
                                        LAB_00025e10:
                                            SSL_shutdown(s);
                                        } else {
                                            if (((DAT_00072d88 == '\0') &&
                                                 (DAT_000686e0 == '\0')) &&
                                                (DAT_00067858 < 3)) {
                                            LAB_00025364:
                                                if (DAT_00067858 < 3)
                                                    goto LAB_000253a4;
                                            } else {
                                                snprintf(
                                                    (char *)&local_2028, 0x800,
                                                    "unable to connect pool by "
                                                    "ssl, connect ret %d\n",
                                                    iVar3);
                                                FUN_0001dbec(3, &local_2028, 0);
                                                if ((DAT_00072d88 == '\0') &&
                                                    (DAT_000686e0 == '\0'))
                                                    goto LAB_00025364;
                                            }
                                            iVar3 = SSL_get_error(s, iVar3);
                                            snprintf(
                                                (char *)&local_2028, 0x800,
                                                "SSL error #%d in "
                                                "accept,program terminated\n",
                                                iVar3);
                                            FUN_0001dbec(3, &local_2028, 0);
                                        }
                                    LAB_000253a4:
                                        X509_free(x);
                                        SSL_CTX_free(ctx);
                                        SSL_free(s);
                                    }
                                    close(uVar4);
                                    param_1[0x93] = 0;
                                    goto joined_r0x00024bfc;
                                }
                            LAB_000255ec:
                                local_2828[0].fds_bits[0] = 0x2d;
                                local_2028 = 0x1e;
                                local_2848[0].tv_sec = 1;
                                uVar5 = fcntl(uVar4, 3, 0);
                                fcntl(uVar4, 4, uVar5 | 0x800);
                                setsockopt(uVar4, 1, 9, local_2848, 4);
                                if (DAT_000762d8 == '\0') {
                                    fcntl(uVar4, 2, 1);
                                }
                                setsockopt(uVar4, 6, 1, local_2848, 4);
                                setsockopt(uVar4, 6, 6, local_2848, 4);
                                setsockopt(uVar4, 6, 4, local_28a8, 4);
                                setsockopt(uVar4, 6, 5, &local_2028, 4);
                                iVar3 = DAT_00072db4;
                                if (DAT_000682c4 != '\0') {
                                    DAT_00072db4 = DAT_00072db4 + 1;
                                    sprintf((char *)&local_2028,
                                            "{\"id\":%d, "
                                            "\"method\":\"mining.configure\", "
                                            "\"params\":[[\"version-rolling\"],"
                                            "{\"version-rolling.mask\":\"%"
                                            "08x\",\"version-rolling.min-bit-"
                                            "count\":%d}]}",
                                            iVar3, 0x1fffe000, 8);
                                    param_1[0xa6] = 1;
                                }
                                sVar9 = strlen((char *)&local_2028);
                                iVar3 =
                                    FUN_0001e930(param_1, &local_2028, sVar9);
                                if (iVar3 == 0) {
                                    uVar4 = FUN_0001f174(param_1[0x93], 0x3c);
                                    if (uVar4 == 0) {
                                        if (DAT_000686e1 == 0)
                                            goto LAB_00024d00;
                                        if (((DAT_00072d88 == '\0') &&
                                             (DAT_000686e0 == '\0')) &&
                                            (DAT_00067858 < 7))
                                            goto LAB_000257a4;
                                        local_2828[0].fds_bits[0]._0_1_ = 'T';
                                        local_2828[0].fds_bits[0]._1_1_ = 'i';
                                        local_2828[0].fds_bits[0]._2_1_ = 'm';
                                        local_2828[0].fds_bits[0]._3_1_ = 'e';
                                        local_2828[0].fds_bits[1]._0_1_ = 'd';
                                        local_2828[0].fds_bits[1]._1_1_ = ' ';
                                        local_2828[0].fds_bits[1]._2_1_ = 'o';
                                        local_2828[0].fds_bits[1]._3_1_ = 'u';
                                        local_2828[0].fds_bits[2]._0_1_ = 't';
                                        local_2828[0].fds_bits[2]._1_1_ = ' ';
                                        local_2828[0].fds_bits[2]._2_1_ = 'w';
                                        local_2828[0].fds_bits[2]._3_1_ = 'a';
                                        local_2828[0].fds_bits[3]._0_1_ = 'i';
                                        local_2828[0].fds_bits[3]._1_1_ = 't';
                                        local_2828[0].fds_bits[3]._2_1_ = 'i';
                                        local_2828[0].fds_bits[3]._3_1_ = 'n';
                                        local_2828[0].fds_bits[4]._0_1_ = 'g';
                                        local_2828[0].fds_bits[4]._1_1_ = ' ';
                                        local_2828[0].fds_bits[4]._2_1_ = 'f';
                                        local_2828[0].fds_bits[4]._3_1_ = 'o';
                                        local_2828[0].fds_bits[5]._0_1_ = 'r';
                                        local_2828[0].fds_bits[5]._1_1_ = ' ';
                                        local_2828[0].fds_bits[5]._2_1_ = 'r';
                                        local_2828[0].fds_bits[5]._3_1_ = 'e';
                                        local_2828[0].fds_bits[6]._0_1_ = 's';
                                        local_2828[0].fds_bits[6]._1_1_ = 'p';
                                        local_2828[0].fds_bits[6]._2_1_ = 'o';
                                        local_2828[0].fds_bits[6]._3_1_ = 'n';
                                        local_2828[0].fds_bits[7]._0_1_ = 's';
                                        local_2828[0].fds_bits[7]._1_1_ = 'e';
                                        local_2828[0].fds_bits[7]._2_1_ = ' ';
                                        local_2828[0].fds_bits[7]._3_1_ = 'i';
                                        local_2828[0].fds_bits[8]._0_1_ = 'n';
                                        local_2828[0].fds_bits[8]._1_1_ = ' ';
                                        local_2828[0].fds_bits[8]._2_1_ = 'i';
                                        local_2828[0].fds_bits[8]._3_1_ = 'n';
                                        local_2828[0].fds_bits[9]._0_1_ = 'i';
                                        local_2828[0].fds_bits[9]._1_1_ = 't';
                                        local_2828[0].fds_bits[9]._2_1_ = 'i';
                                        local_2828[0].fds_bits[9]._3_1_ = 'a';
                                        local_2828[0].fds_bits[10]._0_1_ = 't';
                                        local_2828[0].fds_bits[10]._1_1_ = 'e';
                                        local_2828[0].fds_bits[10]._2_1_ = '_';
                                        local_2828[0].fds_bits[10]._3_1_ = 's';
                                        local_2828[0].fds_bits[0xb]._0_1_ = 't';
                                        local_2828[0].fds_bits[0xb]._1_1_ = 'r';
                                        local_2828[0].fds_bits[0xb]._2_1_ = 'a';
                                        local_2828[0].fds_bits[0xb]._3_1_ = 't';
                                        local_2828[0].fds_bits[0xc]._0_2_ =
                                            0x6d75;
                                        local_2828[0].fds_bits[0xc]._2_1_ = 0;
                                        FUN_0001dbec(7, local_28a8, 0);
                                    } else {
                                        pvVar12 = (void *)FUN_00021730(param_1);
                                        if (pvVar12 != (void *)0x0) {
                                            FUN_00020ed0(param_1, pvVar12);
                                            free(pvVar12);
                                            if (param_1[0x90] == 0) {
                                                param_1[0x90] = param_1[0x9a];
                                            }
                                            *(undefined1 *)((int)param_1 +
                                                            0x291) = 1;
                                            if (DAT_00072ec0 == 0) {
                                                return uVar4;
                                            }
                                            uVar4 = (uint)DAT_000686e1;
                                            if (uVar4 == 0) {
                                                return (uint)DAT_00072ec0;
                                            }
                                            if (((DAT_00072d88 == '\0') &&
                                                 (DAT_000686e0 == '\0')) &&
                                                (DAT_00067858 < 7)) {
                                                return uVar4;
                                            }
                                            snprintf(
                                                (char *)local_28a8, 0x800,
                                                "Pool %d confirmed "
                                                "mining.subscribe with "
                                                "extranonce1 %s extran2size %d",
                                                *param_1, param_1[0x9d],
                                                param_1[0xa2]);
                                            FUN_0001dbec(7, local_28a8, 0);
                                            return uVar4;
                                        }
                                    }
                                LAB_00025790:
                                    if (DAT_000686e1 == 0)
                                        goto LAB_00024d00;
                                } else {
                                    if (DAT_000686e1 == 0)
                                        goto LAB_00024d00;
                                    if (((DAT_00072d88 != '\0') ||
                                         (DAT_000686e0 != '\0')) ||
                                        (6 < DAT_00067858)) {
                                        local_2828[0].fds_bits[0]._0_1_ = 'F';
                                        local_2828[0].fds_bits[0]._1_1_ = 'a';
                                        local_2828[0].fds_bits[0]._2_1_ = 'i';
                                        local_2828[0].fds_bits[0]._3_1_ = 'l';
                                        local_2828[0].fds_bits[1]._0_1_ = 'e';
                                        local_2828[0].fds_bits[1]._1_1_ = 'd';
                                        local_2828[0].fds_bits[1]._2_1_ = ' ';
                                        local_2828[0].fds_bits[1]._3_1_ = 't';
                                        local_2828[0].fds_bits[2]._0_1_ = 'o';
                                        local_2828[0].fds_bits[2]._1_1_ = ' ';
                                        local_2828[0].fds_bits[2]._2_1_ = 's';
                                        local_2828[0].fds_bits[2]._3_1_ = 'e';
                                        local_2828[0].fds_bits[3]._0_1_ = 'n';
                                        local_2828[0].fds_bits[3]._1_1_ = 'd';
                                        local_2828[0].fds_bits[3]._2_1_ = ' ';
                                        local_2828[0].fds_bits[3]._3_1_ = 's';
                                        local_2828[0].fds_bits[4]._0_1_ = ' ';
                                        local_2828[0].fds_bits[4]._1_1_ = 'i';
                                        local_2828[0].fds_bits[4]._2_1_ = 'n';
                                        local_2828[0].fds_bits[4]._3_1_ = ' ';
                                        local_2828[0].fds_bits[5]._0_1_ = 'i';
                                        local_2828[0].fds_bits[5]._1_1_ = 'n';
                                        local_2828[0].fds_bits[5]._2_1_ = 'i';
                                        local_2828[0].fds_bits[5]._3_1_ = 't';
                                        local_2828[0].fds_bits[6]._0_1_ = 'i';
                                        local_2828[0].fds_bits[6]._1_1_ = 'a';
                                        local_2828[0].fds_bits[6]._2_1_ = 't';
                                        local_2828[0].fds_bits[6]._3_1_ = 'e';
                                        local_2828[0].fds_bits[7]._0_1_ = '_';
                                        local_2828[0].fds_bits[7]._1_1_ = 's';
                                        local_2828[0].fds_bits[7]._2_1_ = 't';
                                        local_2828[0].fds_bits[7]._3_1_ = 'r';
                                        local_2828[0].fds_bits[8]._0_1_ = 'a';
                                        local_2828[0].fds_bits[8]._1_1_ = 't';
                                        local_2828[0].fds_bits[8]._2_1_ = 'u';
                                        local_2828[0].fds_bits[8]._3_1_ = 'm';
                                        local_2828[0].fds_bits[9] =
                                            local_2828[0].fds_bits[9] &
                                            0xffffff00;
                                        FUN_0001dbec(7, local_28a8, 0);
                                        goto LAB_00025790;
                                    }
                                }
                            LAB_000257a4:
                                bVar2 = true;
                                goto LAB_00024c98;
                            }
                        LAB_00026120:
                            if (((DAT_00072d88 != '\0') ||
                                 (DAT_000686e0 != '\0')) ||
                                (3 < DAT_00067858)) {
                                uVar24 = param_1[0x9c];
                                uVar16 = param_1[0x9b];
                                goto LAB_00025c3c;
                            }
                        }
                        goto joined_r0x00024bfc;
                    case 4:
                        uVar16 = 1;
                    LAB_00025af8:
                        iVar3 = FUN_00024678(param_1, uVar4, uVar16);
                        goto joined_r0x00025b08;
                    default:
                        if (((DAT_00072d88 != '\0') ||
                             (DAT_000686e0 != '\0')) ||
                            (3 < DAT_00067858)) {
                            snprintf((char *)&local_2028, 0x800,
                                     "Unsupported proxy type for %s:%s",
                                     param_1[0x9b], param_1[0x9c]);
                            FUN_0001dbec(4, &local_2028, 0);
                            goto joined_r0x00024bfc;
                        }
                    LAB_00025d80:
                        if (DAT_000686e1 == 0) {
                            return 0;
                        }
                        if (DAT_00067858 < 7) {
                            return 0;
                        }
                        bVar2 = false;
                        goto LAB_00024ccc;
                    }
                    iVar3 = FUN_0001ebc0(param_1, uVar4, uVar16);
                joined_r0x00025b08:
                    if (iVar3 != 0)
                        goto LAB_000250dc;
                    goto joined_r0x00024bfc;
                }
                if ((DAT_000686e1 == 0) ||
                    (((DAT_00072d88 == '\0' && (DAT_000686e0 == '\0')) &&
                      (DAT_00067858 < 7))))
                    goto LAB_00024b84;
                uVar4._0_1_ = 'F';
                uVar4._1_1_ = 'a';
                uVar4._2_1_ = 'i';
                uVar4._3_1_ = 'l';
                uVar5._0_1_ = 'e';
                uVar5._1_1_ = 'd';
                uVar5._2_1_ = ' ';
                uVar5._3_1_ = 's';
                uVar23._0_1_ = 'o';
                uVar23._1_1_ = 'c';
                uVar23._2_1_ = 'k';
                uVar23._3_1_ = 'e';
                puVar22 = &local_2028;
            LAB_00024db0:
                *puVar22 = uVar4;
                puVar22[1] = uVar5;
                puVar22[2] = uVar23;
                *(undefined2 *)(puVar22 + 3) = 0x74;
                FUN_0001dbec(7, &local_2028, 0);
                paVar20 = paVar20->ai_next;
            } while (paVar20 != (addrinfo *)0x0);
        }
    LAB_00024b94:
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (5 < DAT_00067858)) {
            snprintf((char *)&local_2028, 0x800,
                     "Failed to connect to stratum on %s:%s", local_28a0,
                     local_28a4);
            FUN_0001dbec(6, &local_2028, 0);
        }
        freeaddrinfo(local_2880);
    } else {
        if (*(char *)((int)param_1 + 99) == '\0') {
            if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                (3 < DAT_00067858)) {
                snprintf((char *)&local_2028, 0x800,
                         "Failed to resolve (?wrong URL) %s:%s", local_28a0,
                         local_28a4);
                FUN_0001dbec(4, &local_2028, 0);
            }
            *(undefined1 *)((int)param_1 + 99) = 1;
        } else if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                   (5 < DAT_00067858)) {
            snprintf((char *)&local_2028, 0x800,
                     "Failed to getaddrinfo for %s:%s", local_28a0, local_28a4);
            FUN_0001dbec(6, &local_2028, 0);
        }
        __res_init();
    }
joined_r0x00024bfc:
    if (DAT_000686e1 != 0) {
        bVar2 = false;
    LAB_00024c98:
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (6 < DAT_00067858)) {
        LAB_00024ccc:
            local_2828[0].fds_bits[0]._0_1_ = 'I';
            local_2828[0].fds_bits[0]._1_1_ = 'n';
            local_2828[0].fds_bits[0]._2_1_ = 'i';
            local_2828[0].fds_bits[0]._3_1_ = 't';
            local_2828[0].fds_bits[1]._0_1_ = 'i';
            local_2828[0].fds_bits[1]._1_1_ = 'a';
            local_2828[0].fds_bits[1]._2_1_ = 't';
            local_2828[0].fds_bits[1]._3_1_ = 'e';
            local_2828[0].fds_bits[2]._0_1_ = ' ';
            local_2828[0].fds_bits[2]._1_1_ = 's';
            local_2828[0].fds_bits[2]._2_1_ = 't';
            local_2828[0].fds_bits[2]._3_1_ = 'r';
            local_2828[0].fds_bits[3]._0_1_ = 'a';
            local_2828[0].fds_bits[3]._1_1_ = 't';
            local_2828[0].fds_bits[3]._2_1_ = 'u';
            local_2828[0].fds_bits[3]._3_1_ = 'm';
            local_2828[0].fds_bits[4]._0_1_ = ' ';
            local_2828[0].fds_bits[4]._1_1_ = 'f';
            local_2828[0].fds_bits[4]._2_1_ = 'a';
            local_2828[0].fds_bits[4]._3_1_ = 'i';
            local_2828[0].fds_bits[5]._0_1_ = 'l';
            local_2828[0].fds_bits[5]._1_1_ = 'e';
            local_2828[0].fds_bits[5]._2_1_ = 'd';
            local_2828[0].fds_bits[5]._3_1_ = '\0';
            FUN_0001dbec(7, local_2828, 0);
        }
        if (bVar2) {
        LAB_00024d00:
            FUN_00021218(param_1);
            return 0;
        }
    }
    return 0;
LAB_00024b84:
    paVar20 = paVar20->ai_next;
    if (paVar20 == (addrinfo *)0x0)
        goto LAB_00024b94;
    goto LAB_00024a94;
}

int FUN_000262e8(int param_1)

{
    int iVar1;

    if (*(char *)(param_1 + 0x291) != '\0') {
        FUN_00021218();
    }
    iVar1 = FUN_00024934(param_1);
    if ((((iVar1 == 0) || (iVar1 = FUN_00021cbc(param_1), iVar1 == 0)) ||
         ((*(char *)(param_1 + 0x244) != '\0' &&
           (iVar1 = FUN_00027338(param_1), iVar1 == 0)))) ||
        (iVar1 = FUN_00027730(param_1), iVar1 == 0)) {
        iVar1 = 0;
        FUN_000320c0(param_1);
    } else {
        FUN_00030260(param_1);
    }
    return iVar1;
}

undefined4 FUN_00026374(undefined4 *param_1, undefined4 param_2)

{
    char *__s;
    char *pcVar1;
    char *__s2;
    int iVar2;
    void *pvVar3;
    int *piVar4;
    undefined4 uVar5;
    char *pcVar6;
    int *piVar7;
    undefined1 local_a40[16];
    char acStack_a30[248];
    undefined1 auStack_938[16];
    undefined4 local_928;
    undefined4 local_924;
    char acStack_920[256];
    char acStack_820[2052];

    memset(acStack_920, 0, 0xff);
    FUN_0004904c(param_2, 0);
    __s = (char *)FUN_000491f8();
    if (__s == (char *)0x0) {
        __s = (char *)param_1[0x9a];
    LAB_000263f8:
        FUN_0004904c(param_2, 1);
        iVar2 = FUN_00049454();
        if (iVar2 == 0) {
            FUN_0004904c(param_2, 1);
            pcVar6 = (char *)FUN_000491f8();
            piVar7 = (int *)auStack_938;
            if (pcVar6 == (char *)0x0) {
                pcVar6 = (char *)param_1[0x92];
                piVar7 = (int *)auStack_938;
            }
        } else {
            pcVar6 = acStack_a30;
            sprintf(pcVar6, "%d");
            piVar7 = (int *)local_a40;
        }
        *piVar7 = (int)pcVar6;
        snprintf(acStack_920, 0xfe, "%s:%s", __s);
        iVar2 = FUN_000208f0(acStack_920, &local_928, &local_924);
        if (iVar2 != 0) {
            if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                (3 < DAT_00067858)) {
                uVar5 = *param_1;
                *piVar7 = (int)acStack_920;
                snprintf(acStack_820, 0x800,
                         "Stratum reconnect requested from pool %d to %s",
                         uVar5);
                FUN_0001dbec(4, acStack_820, 0);
            }
            FUN_00031914(param_1);
            iVar2 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xb4));
            if (iVar2 != 0) {
                piVar4 = __errno_location();
                iVar2 = *piVar4;
                *piVar7 = (int)"util.c";
                piVar7[1] = (int)"parse_reconnect";
                piVar7[2] = 0x994;
                snprintf(acStack_820, 0x800,
                         "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d",
                         iVar2);
                FUN_0001dbec(3, acStack_820, 1);
                FUN_0003c4b4(1);
            }
            FUN_0001f074(param_1);
            pvVar3 = (void *)param_1[0x9a];
            param_1[0x90] = local_928;
            param_1[0x9a] = local_928;
            free(pvVar3);
            pvVar3 = (void *)param_1[0x92];
            param_1[0x92] = local_924;
            free(pvVar3);
            iVar2 = pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0xb4));
            if (iVar2 != 0) {
                piVar4 = __errno_location();
                iVar2 = *piVar4;
                *piVar7 = (int)"util.c";
                piVar7[1] = (int)"parse_reconnect";
                piVar7[2] = 0x99d;
                snprintf(acStack_820, 0x800,
                         "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d",
                         iVar2);
                FUN_0001dbec(3, acStack_820, 1);
                FUN_0003c4b4(1);
            }
            (*DAT_0006797c)();
            uVar5 = FUN_000262e8(param_1);
            return uVar5;
        }
    } else {
        pcVar6 = (char *)param_1[0x9a];
        pcVar1 = strchr(pcVar6, 0x2e);
        if (pcVar1 == (char *)0x0) {
            if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                (DAT_00067858 < 3)) {
                return 0;
            }
            pcVar1 = "Denied stratum reconnect request for pool without domain "
                     "\'%s\'";
        } else {
            __s2 = strchr(__s, 0x2e);
            if (__s2 == (char *)0x0) {
                if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                    (DAT_00067858 < 3)) {
                    return 0;
                }
                pcVar1 = "Denied stratum reconnect request to url without "
                         "domain \'%s\'";
                pcVar6 = __s;
            } else {
                iVar2 = strcmp(pcVar1, __s2);
                if (iVar2 == 0)
                    goto LAB_000263f8;
                if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                    (DAT_00067858 < 3)) {
                    return 0;
                }
                pcVar1 = "Denied stratum reconnect request to non-matching "
                         "domain url \'%s\'";
            }
        }
        snprintf(acStack_820, 0x800, pcVar1, pcVar6);
        FUN_0001dbec(3, acStack_820, 0);
    }
    return 0;
}

uint FUN_00026748(undefined4 *param_1, undefined4 param_2)

{
    bool bVar1;
    int iVar2;
    int iVar3;
    int *piVar4;
    int *piVar5;
    char *__s1;
    uint uVar6;
    undefined4 uVar7;
    void *__ptr;
    size_t sVar8;
    int iVar9;
    char *pcVar10;
    uint uVar11;
    undefined4 *puVar12;
    double dVar13;
    double dVar14;
    undefined8 in_stack_ffffdeb0;
    undefined8 uVar15;
    undefined4 local_2134[23];
    undefined1 auStack_20d8[160];
    char local_2038[24];
    undefined4 uStack_2020;
    char acStack_201c[16];
    undefined2 uStack_200c;
    undefined1 local_200a;
    undefined4 extraout_s1;

    pcVar10 = (char *)((ulonglong)in_stack_ffffdeb0 >> 0x20);
    iVar2 = FUN_00047e20(param_2, 0, local_2134);
    if (iVar2 == 0) {
        if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
            (DAT_00067858 < 6)) {
            return 0;
        }
        snprintf(local_2038, 0x800, "JSON decode failed(%d): %s", local_2134[0],
                 auStack_20d8);
        FUN_0001dbec(6, local_2038, 0);
        return 0;
    }
    iVar3 = FUN_00048cc4(iVar2, "method");
    if (iVar3 != 0) {
        piVar4 = (int *)FUN_00048cc4(iVar2, "error");
        piVar5 = (int *)FUN_00048cc4(iVar2, "params");
        if ((piVar4 != (int *)0x0) && (*piVar4 != 7)) {
            __ptr = (void *)FUN_00045c3c(piVar4, 3);
            if ((DAT_00072d88 != '\0') ||
                ((DAT_000686e0 != '\0' || (5 < DAT_00067858)))) {
                snprintf(local_2038, 0x800, "JSON-RPC method decode failed: %s",
                         __ptr);
                FUN_0001dbec(6, local_2038, 0);
            }
            uVar11 = 0;
            free(__ptr);
            goto LAB_0002689c;
        }
        __s1 = (char *)FUN_000491f8(iVar3);
        if (__s1 != (char *)0x0) {
            iVar3 = strncasecmp(__s1, "mining.multi_version", 0x14);
            if (iVar3 == 0) {
                *(undefined1 *)(param_1 + 0xa5) = 1;
                if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                    (5 < DAT_00067858)) {
                    builtin_strncpy(local_2038, "Pool support multi versi",
                                    0x18);
                    uStack_2020._0_3_ = 0x6e6f;
                    FUN_0001dbec(6, local_2038, 0);
                }
                uVar11 = 0;
                puVar12 = param_1 + 0xa7;
                while (true) {
                    uVar6 = FUN_00049030(piVar5);
                    if (uVar6 <= uVar11)
                        break;
                    FUN_0004904c(piVar5, uVar11);
                    uVar7 = FUN_00049454();
                    *puVar12 = uVar7;
                    uVar11 = uVar11 + 1;
                    puVar12 = puVar12 + 1;
                }
                goto LAB_00026bb4;
            }
            iVar3 = strncasecmp(__s1, "mining.notify", 0xd);
            if (iVar3 == 0) {
                uVar11 = FUN_00023510(param_1, piVar5);
                if (uVar11 != 0) {
                    *(undefined1 *)((int)param_1 + 0x293) = 1;
                    goto LAB_0002689c;
                }
            } else {
                iVar3 = strncasecmp(__s1, "mining.set_version_mask", 0x17);
                if (iVar3 != 0) {
                    iVar3 = strncasecmp(__s1, "mining.set_difficulty", 0x15);
                    if (iVar3 == 0) {
                        FUN_0004904c(piVar5);
                        uVar7 = FUN_00049590();
                        dVar13 = (double)CONCAT44(extraout_s1, uVar7);
                        if (dVar13 != 0.0) {
                            iVar3 = pthread_mutex_lock(
                                (pthread_mutex_t *)(param_1 + 0x35));
                            if (iVar3 != 0) {
                                FUN_0001f5b0("parse_diff", 0x902);
                            }
                            iVar3 = pthread_rwlock_wrlock(
                                (pthread_rwlock_t *)(param_1 + 0x3b));
                            if (iVar3 != 0) {
                                piVar4 = __errno_location();
                                pcVar10 = "parse_diff";
                                snprintf(local_2038, 0x800,
                                         "WTF WRLOCK ERROR ON LOCK! errno=%d "
                                         "in %s %s():%d",
                                         *piVar4, "util.c", "parse_diff",
                                         0x902);
                                FUN_0001dbec(3, local_2038, 1);
                                FUN_0003c4b4(1);
                            }
                            dVar14 = *(double *)(param_1 + 0x1ca);
                            *(double *)(param_1 + 0x1ca) = dVar13;
                            if (dVar14 <= 0.0) {
                                dVar14 = *(double *)(param_1 + 0x1cc);
                                *(double *)(param_1 + 0x1cc) = dVar13;
                            }
                            iVar3 = pthread_rwlock_unlock(
                                (pthread_rwlock_t *)(param_1 + 0x3b));
                            if (iVar3 != 0) {
                                piVar4 = __errno_location();
                                pcVar10 = "parse_diff";
                                snprintf(local_2038, 0x800,
                                         "WTF RWLOCK ERROR ON UNLOCK! errno=%d "
                                         "in %s %s():%d",
                                         *piVar4, "util.c", "parse_diff",
                                         0x90f);
                                FUN_0001dbec(3, local_2038, 1);
                                FUN_0003c4b4(1);
                            }
                            iVar3 = pthread_mutex_unlock(
                                (pthread_mutex_t *)(param_1 + 0x35));
                            if (iVar3 != 0) {
                                piVar4 = __errno_location();
                                pcVar10 = "parse_diff";
                                snprintf(local_2038, 0x800,
                                         "WTF MUTEX ERROR ON UNLOCK! errno=%d "
                                         "in %s %s():%d",
                                         *piVar4, "util.c", "parse_diff",
                                         0x90f);
                                FUN_0001dbec(3, local_2038, 1);
                                FUN_0003c4b4(1);
                            }
                            (*DAT_0006797c)();
                            if (dVar13 == dVar14) {
                                uVar11 = (uint)DAT_000686e1;
                                if ((uVar11 != 0) &&
                                    (((DAT_00072d88 != '\0' ||
                                       (DAT_000686e0 != '\0')) ||
                                      (6 < DAT_00067858)))) {
                                    snprintf(local_2038, 0x800,
                                             "Pool %d difficulty set to %f",
                                             *param_1, dVar13);
                                    FUN_0001dbec(7, local_2038, 0);
                                    goto LAB_0002689c;
                                }
                            } else if (dVar13 ==
                                       (double)(longlong)(int)(longlong)
                                           dVar13) {
                                if (((DAT_00072d88 != '\0') ||
                                     (DAT_000686e0 != '\0')) ||
                                    (4 < DAT_00067858)) {
                                    uVar15 = CONCAT44(pcVar10,
                                                      (int)(longlong)dVar13);
                                    uVar7 = *param_1;
                                    pcVar10 =
                                        "Pool %d difficulty changed to %d";
                                LAB_00026cdc:
                                    uVar11 = 1;
                                    snprintf(local_2038, 0x800, pcVar10, uVar7,
                                             uVar15);
                                    FUN_0001dbec(5, local_2038, 0);
                                    goto LAB_0002689c;
                                }
                            } else if (((DAT_00072d88 != '\0') ||
                                        (DAT_000686e0 != '\0')) ||
                                       (4 < DAT_00067858)) {
                                snprintf(local_2038, 0x800,
                                         "Pool %d difficulty changed to %.1f",
                                         *param_1, dVar13);
                                uVar11 = 1;
                                FUN_0001dbec(5, local_2038, 0);
                                goto LAB_0002689c;
                            }
                        LAB_00026bb4:
                            uVar11 = 1;
                            goto LAB_0002689c;
                        }
                    } else {
                        iVar3 =
                            strncasecmp(__s1, "mining.set_extranonce", 0x15);
                        if (iVar3 == 0) {
                            pcVar10 = (char *)FUN_0001f26c(piVar5);
                            uVar11 = FUN_0001f2ec(pcVar10, "parse_extranonce",
                                                  0x92d);
                            if (uVar11 != 0) {
                                FUN_0004904c(piVar5, 1);
                                iVar3 = FUN_00049454();
                                if (iVar3 == 0) {
                                    if (((DAT_00072d88 != '\0') ||
                                         (DAT_000686e0 != '\0')) ||
                                        (5 < DAT_00067858)) {
                                        builtin_strncpy(
                                            local_2038,
                                            "Failed to get valid n2si", 0x18);
                                        uStack_2020._0_1_ = 'z';
                                        uStack_2020._1_1_ = 'e';
                                        uStack_2020._2_1_ = ' ';
                                        uStack_2020._3_1_ = 'i';
                                        builtin_strncpy(acStack_201c,
                                                        "n parse_extranon",
                                                        0x10);
                                        uStack_200c = 0x6563;
                                        local_200a = 0;
                                        FUN_0001dbec(6, local_2038, 0);
                                    }
                                    uVar11 = 0;
                                    free(pcVar10);
                                    goto LAB_0002689c;
                                }
                                iVar9 = pthread_mutex_lock(
                                    (pthread_mutex_t *)(param_1 + 0x35));
                                if (iVar9 != 0) {
                                    FUN_0001f5b0("parse_extranonce", 0x939);
                                }
                                iVar9 = pthread_rwlock_wrlock(
                                    (pthread_rwlock_t *)(param_1 + 0x3b));
                                if (iVar9 != 0) {
                                    piVar4 = __errno_location();
                                    snprintf(local_2038, 0x800,
                                             "WTF WRLOCK ERROR ON LOCK! "
                                             "errno=%d in %s %s():%d",
                                             *piVar4, "util.c",
                                             "parse_extranonce", 0x939);
                                    FUN_0001dbec(3, local_2038, 1);
                                    FUN_0003c4b4(1);
                                }
                                free((void *)param_1[0x9d]);
                                param_1[0x9d] = pcVar10;
                                sVar8 = strlen(pcVar10);
                                param_1[0x18b] = sVar8 >> 1;
                                free((void *)param_1[0x9e]);
                                iVar9 =
                                    FUN_0001f790(param_1[0x18b], 1, "util.c",
                                                 "parse_extranonce", 0x93e);
                                param_1[0x9e] = iVar9;
                                if (iVar9 == 0) {
                                    snprintf(local_2038, 0x800,
                                             "Failed to calloc pool->nonce1bin "
                                             "in %s %s():%d",
                                             "util.c", "parse_extranonce",
                                             0x940);
                                    FUN_0001dbec(3, local_2038, 1);
                                    FUN_0003c4b4(1);
                                }
                                FUN_0001fa24(param_1[0x9e], param_1[0x9d],
                                             param_1[0x18b]);
                                param_1[0xa2] = iVar3;
                                iVar3 = pthread_rwlock_unlock(
                                    (pthread_rwlock_t *)(param_1 + 0x3b));
                                if (iVar3 != 0) {
                                    piVar4 = __errno_location();
                                    snprintf(local_2038, 0x800,
                                             "WTF RWLOCK ERROR ON UNLOCK! "
                                             "errno=%d in %s %s():%d",
                                             *piVar4, "util.c",
                                             "parse_extranonce", 0x943);
                                    FUN_0001dbec(3, local_2038, 1);
                                    FUN_0003c4b4(1);
                                }
                                FUN_0001f534(
                                    (pthread_mutex_t *)(param_1 + 0x35),
                                    "parse_extranonce", 0x943);
                                (*DAT_0006797c)();
                                if (((DAT_00072d88 != '\0') ||
                                     (DAT_000686e0 != '\0')) ||
                                    (4 < DAT_00067858)) {
                                    snprintf(
                                        local_2038, 0x800,
                                        "Pool %d extranonce change requested",
                                        *param_1);
                                    FUN_0001dbec(5, local_2038, 0);
                                    goto LAB_0002689c;
                                }
                                goto LAB_00026bb4;
                            }
                            if (((DAT_00072d88 != '\0') ||
                                 (DAT_000686e0 != '\0')) ||
                                (5 < DAT_00067858)) {
                                builtin_strncpy(local_2038,
                                                "Failed to get valid nonc",
                                                0x18);
                                uStack_2020._0_1_ = 'e';
                                uStack_2020._1_1_ = '1';
                                uStack_2020._2_1_ = ' ';
                                uStack_2020._3_1_ = 'i';
                                builtin_strncpy(acStack_201c,
                                                "n parse_extranon", 0x10);
                                uStack_200c = 0x6563;
                                local_200a = 0;
                                FUN_0001dbec(6, local_2038, 0);
                                goto LAB_0002689c;
                            }
                        } else {
                            iVar3 = strncasecmp(__s1, "client.reconnect", 0x10);
                            if (iVar3 == 0) {
                                uVar11 = FUN_00026374(param_1, piVar5);
                                goto LAB_0002689c;
                            }
                            iVar3 =
                                strncasecmp(__s1, "client.get_version", 0x12);
                            if (iVar3 == 0) {
                                iVar3 = FUN_00048cc4(iVar2, &DAT_0004b108);
                                if (iVar3 != 0) {
                                    FUN_00048cc4(iVar2, &DAT_0004b108);
                                    uVar7 = FUN_00049454();
                                    pcVar10 =
                                        "{\"id\": %d, \"result\": "
                                        "\"cgminer/1.0.0\", \"error\": null}";
                                LAB_00026b50:
                                    sprintf(local_2038, pcVar10, uVar7);
                                    sVar8 = strlen(local_2038);
                                    uVar11 = FUN_0002137c(param_1, local_2038,
                                                          sVar8);
                                    goto LAB_0002689c;
                                }
                            } else {
                                iVar3 = strncasecmp(__s1, "client.show_message",
                                                    0x13);
                                if (iVar3 == 0) {
                                    if ((piVar5 != (int *)0x0) &&
                                        (*piVar5 == 1)) {
                                        FUN_0004904c(piVar5, 0);
                                        iVar3 = FUN_000491f8();
                                        if (iVar3 != 0) {
                                            if (((DAT_00072d88 != '\0') ||
                                                 (DAT_000686e0 != '\0')) ||
                                                (4 < DAT_00067858)) {
                                                uVar15 =
                                                    CONCAT44(pcVar10, iVar3);
                                                pcVar10 = "Pool %d message: %s";
                                                uVar7 = *param_1;
                                                goto LAB_00026cdc;
                                            }
                                            goto LAB_00026bb4;
                                        }
                                    }
                                } else {
                                    iVar3 =
                                        strncasecmp(__s1, "mining.ping", 0xb);
                                    if (iVar3 == 0) {
                                        if (((DAT_00072d88 != '\0') ||
                                             (DAT_000686e0 != '\0')) ||
                                            (5 < DAT_00067858)) {
                                            snprintf(local_2038, 0x800,
                                                     "Pool %d ping", *param_1);
                                            FUN_0001dbec(6, local_2038, 0);
                                        }
                                        iVar3 =
                                            FUN_00048cc4(iVar2, &DAT_0004b108);
                                        if (iVar3 == 0) {
                                            uVar11 = 0;
                                            goto LAB_0002689c;
                                        }
                                        FUN_00048cc4(iVar2, &DAT_0004b108);
                                        uVar7 = FUN_00049454();
                                        pcVar10 = "{\"id\": %d, \"result\": "
                                                  "\"pong\", \"error\": null}";
                                        goto LAB_00026b50;
                                    }
                                }
                            }
                        }
                    }
                    goto LAB_00026898;
                }
                uVar11 = 1;
                FUN_0004904c(piVar5);
                uVar7 = FUN_000491f8();
                FUN_00020c88(param_1, uVar7);
            }
            *(char *)((int)param_1 + 0x293) = (char)uVar11;
            goto LAB_0002689c;
        }
    }
LAB_00026898:
    uVar11 = 0;
LAB_0002689c:
    if (*(int *)(iVar2 + 4) != -1) {
        piVar4 = (int *)(iVar2 + 4);
        DataMemoryBarrier(0xb);
        do {
            iVar3 = *piVar4;
            bVar1 = (bool)hasExclusiveAccess(piVar4);
        } while (!bVar1);
        *piVar4 = iVar3 + -1;
        if (iVar3 + -1 == 0) {
            FUN_000495fc(iVar2);
        }
    }
    return uVar11;
}

undefined4 FUN_00027324(undefined4 param_1, int param_2)

{
    undefined4 uVar1;

    if (param_2 != 0) {
        uVar1 = FUN_00026748();
        return uVar1;
    }
    return 0;
}

uint FUN_00027338(undefined4 *param_1)

{
    bool bVar1;
    size_t sVar2;
    uint uVar3;
    void *__ptr;
    int iVar4;
    uint uVar5;
    int *piVar6;
    int *piVar7;
    char *pcVar8;
    int iVar9;
    undefined1 auStack_2914[252];
    char local_2818[2048];
    char acStack_2018[8192];

    DAT_00072db4 = DAT_00072db4 + 1;
    sprintf(acStack_2018, "{\"id\": %d, \"method\": "
                          "\"mining.extranonce.subscribe\", \"params\": []}");
    sVar2 = strlen(acStack_2018);
    uVar3 = FUN_0002137c(param_1, acStack_2018, sVar2);
    if (uVar3 != 0) {
        while (uVar5 = FUN_0001f174(param_1[0x93], 2), uVar5 != 0) {
            __ptr = (void *)FUN_00021730(param_1);
            if (__ptr == (void *)0x0) {
                return 0;
            }
            iVar4 = FUN_00026748(param_1, __ptr);
            if (iVar4 == 0) {
                iVar4 = FUN_00047e20(__ptr, 0, auStack_2914);
                free(__ptr);
                piVar6 = (int *)FUN_00048cc4(iVar4, "result");
                piVar7 = (int *)FUN_00048cc4(iVar4, "error");
                if ((piVar6 == (int *)0x0) || (*piVar6 == 6)) {
                    if (piVar7 != (int *)0x0)
                        goto LAB_000274f8;
                    pcVar8 = (char *)malloc(0x11);
                    if (pcVar8 != (char *)0x0) {
                        builtin_strncpy(pcVar8, "(unknown reason)", 0x11);
                    }
                } else {
                    if ((piVar7 == (int *)0x0) || (*piVar7 == 7)) {
                        if ((DAT_00072d88 != '\0') ||
                            ((DAT_000686e0 != '\0' || (5 < DAT_00067858)))) {
                            snprintf(local_2818, 0x800,
                                     "Stratum extranonce subscribe for pool %d",
                                     *param_1);
                            FUN_0001dbec(6, local_2818, 0);
                        }
                        goto LAB_0002763c;
                    }
                LAB_000274f8:
                    pcVar8 = (char *)FUN_0001f208(piVar7, 1);
                    if (((pcVar8 != (char *)0x0) ||
                         (pcVar8 = (char *)FUN_000491f8(piVar7),
                          pcVar8 != (char *)0x0)) &&
                        ((iVar9 = strcmp(pcVar8,
                                         "Method \'subscribe\' not found for "
                                         "service \'mining.extranonce\'"),
                          iVar9 == 0 ||
                              (iVar9 = strcmp(pcVar8,
                                              "Unrecognized request provided"),
                               iVar9 == 0)))) {
                        if (((DAT_00072d88 != '\0') ||
                             (DAT_000686e0 != '\0')) ||
                            (5 < DAT_00067858)) {
                            snprintf(local_2818, 0x800,
                                     "Cannot subscribe to mining.extranonce "
                                     "for pool %d",
                                     *param_1);
                            FUN_0001dbec(6, local_2818, 0);
                        }
                        goto LAB_0002763c;
                    }
                    pcVar8 = (char *)FUN_00045c3c(piVar7, 3);
                }
                if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                    (5 < DAT_00067858)) {
                    snprintf(local_2818, 0x800,
                             "Pool %d JSON extranonce subscribe failed: %s",
                             *param_1, pcVar8);
                    FUN_0001dbec(6, local_2818, 0);
                }
                uVar5 = 0;
                free(pcVar8);
            LAB_0002763c:
                if (iVar4 == 0) {
                    return uVar5;
                }
                if (*(int *)(iVar4 + 4) == -1) {
                    return uVar5;
                }
                piVar6 = (int *)(iVar4 + 4);
                DataMemoryBarrier(0xb);
                do {
                    iVar9 = *piVar6;
                    bVar1 = (bool)hasExclusiveAccess(piVar6);
                } while (!bVar1);
                *piVar6 = iVar9 + -1;
                if (iVar9 + -1 != 0) {
                    return uVar5;
                }
                FUN_000495fc(iVar4);
                return uVar5;
            }
            free(__ptr);
        }
        uVar5 = (uint)DAT_000686e1;
        if ((uVar5 != 0) &&
            (((uVar3 = uVar5, DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
              (6 < DAT_00067858)))) {
            builtin_strncpy(
                local_2818,
                "Timed out waiting for response extranonce.subscribe", 0x34);
            FUN_0001dbec(7, local_2818, 0);
        }
    }
    return uVar3;
}

int FUN_00027730(undefined4 *param_1)

{
    bool bVar1;
    size_t sVar2;
    int iVar3;
    int iVar4;
    void *__ptr;
    int *piVar5;
    int *piVar6;
    char *__ptr_00;
    int iVar7;
    undefined1 auStack_291c[252];
    char acStack_2820[2048];
    char acStack_2020[8196];

    iVar3 = DAT_00072db4;
    DAT_00072db4 = DAT_00072db4 + 1;
    sprintf(acStack_2020,
            "{\"id\": %d, \"method\": \"mining.authorize\", \"params\": "
            "[\"%s\", \"%s\"]}",
            iVar3, param_1[0x2b], param_1[0x2c]);
    sVar2 = strlen(acStack_2020);
    iVar3 = FUN_0002137c(param_1, acStack_2020, sVar2);
    if (iVar3 != 0) {
        while (__ptr = (void *)FUN_00021730(param_1), __ptr != (void *)0x0) {
            iVar4 = FUN_00026748(param_1, __ptr);
            if (iVar4 == 0) {
                iVar4 = FUN_00047e20(__ptr, 0, auStack_291c);
                free(__ptr);
                piVar5 = (int *)FUN_00048cc4(iVar4, "result");
                piVar6 = (int *)FUN_00048cc4(iVar4, "error");
                if ((piVar5 == (int *)0x0) || (*piVar5 == 6)) {
                    if (piVar6 != (int *)0x0)
                        goto LAB_00027844;
                    __ptr_00 = (char *)malloc(0x11);
                    if (__ptr_00 != (char *)0x0) {
                        builtin_strncpy(__ptr_00, "(unknown reason)", 0x11);
                    }
                } else {
                    if ((piVar6 == (int *)0x0) || (*piVar6 == 7)) {
                        if (((DAT_00072d88 != '\0') ||
                             (DAT_000686e0 != '\0')) ||
                            (5 < DAT_00067858)) {
                            snprintf(
                                acStack_2820, 0x800,
                                "Stratum authorisation success for pool %d",
                                *param_1);
                            FUN_0001dbec(6, acStack_2820, 0);
                        }
                        iVar7 = DAT_000761d8;
                        DAT_000686e2 = 1;
                        *(undefined1 *)((int)param_1 + 99) = 1;
                        if (iVar7 != 0) {
                            DAT_00072db4 = DAT_00072db4 + 1;
                            sprintf(acStack_2020,
                                    "{\"id\": %d, \"method\": "
                                    "\"mining.suggest_difficulty\", "
                                    "\"params\": [%d]}");
                            sVar2 = strlen(acStack_2020);
                            FUN_0002137c(param_1, acStack_2020, sVar2);
                        }
                        goto LAB_0002789c;
                    }
                LAB_00027844:
                    __ptr_00 = (char *)FUN_00045c3c(piVar6, 3);
                }
                if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                    (5 < DAT_00067858)) {
                    snprintf(acStack_2820, 0x800,
                             "pool %d JSON stratum auth failed: %s", *param_1,
                             __ptr_00);
                    FUN_0001dbec(6, acStack_2820, 0);
                }
                free(__ptr_00);
                FUN_00021218(param_1);
                iVar3 = 0;
            LAB_0002789c:
                if (iVar4 == 0) {
                    return iVar3;
                }
                if (*(int *)(iVar4 + 4) == -1) {
                    return iVar3;
                }
                piVar5 = (int *)(iVar4 + 4);
                DataMemoryBarrier(0xb);
                do {
                    iVar7 = *piVar5;
                    bVar1 = (bool)hasExclusiveAccess(piVar5);
                } while (!bVar1);
                *piVar5 = iVar7 + -1;
                if (iVar7 + -1 != 0) {
                    return iVar3;
                }
                FUN_000495fc(iVar4);
                return iVar3;
            }
            free(__ptr);
        }
    }
    return 0;
}

void FUN_00027a9c(int param_1, int param_2)

{
    undefined1 uVar1;
    undefined1 *puVar2;
    uint uVar3;
    undefined1 *puVar4;

    if (param_2 == 1) {
        return;
    }
    puVar4 = (undefined1 *)(param_1 + -1);
    uVar3 = 0;
    puVar2 = (undefined1 *)(param_1 + param_2);
    do {
        uVar3 = uVar3 + 1;
        puVar4 = puVar4 + 1;
        uVar1 = *puVar4;
        puVar2 = puVar2 + -1;
        *puVar4 = *puVar2;
        *puVar2 = uVar1;
    } while (uVar3 < ~uVar3 + param_2);
    return;
}

int FUN_00027adc(int param_1, uint param_2)

{
    int iVar1;
    uint uVar2;

    switch (param_1) {
    case 1:
        goto switchD_00027ae4_caseD_1;
    case 2:
        if ((param_2 & 0x80) != 0x80) {
            param_1 = 1;
        }
        return param_1;
    default:
        return 0;
    case 4:
        param_2 = param_2 & 0xc0;
        if (param_2 == 0x80) {
            return 3;
        }
        if (param_2 == 0xc0) {
            return param_1;
        }
        if (param_2 == 0x40) {
            iVar1 = 2;
        } else {
            iVar1 = 1;
        }
        return iVar1;
    case 8:
        param_2 = param_2 & 0xe0;
        if (param_2 == 0x80) {
            return 5;
        }
        if (param_2 < 0x81) {
            if (param_2 == 0x40) {
                return 3;
            }
            if (param_2 == 0x60) {
                return 4;
            }
            if (param_2 == 0x20) {
                return 2;
            }
        } else {
            if (param_2 == 0xc0) {
                return 7;
            }
            if (param_2 == 0xe0) {
                return param_1;
            }
            if (param_2 == 0xa0) {
                return 6;
            }
        }
        break;
    case 0x10:
        param_2 = param_2 & 0xf0;
        if (param_2 == 0x80) {
            return 9;
        }
        if (param_2 < 0x81) {
            if (param_2 == 0x40) {
                return 5;
            }
            if (param_2 < 0x41) {
                if (param_2 == 0x20) {
                    return 3;
                }
                if (param_2 == 0x30) {
                    return 4;
                }
                if (param_2 == 0x10) {
                    return 2;
                }
            } else {
                if (param_2 == 0x60) {
                    return 7;
                }
                if (param_2 == 0x70) {
                    return 8;
                }
                if (param_2 == 0x50) {
                    return 6;
                }
            }
        } else {
            if (param_2 == 0xc0) {
                return 0xd;
            }
            if (param_2 < 0xc1) {
                if (param_2 == 0xa0) {
                    return 0xb;
                }
                if (param_2 == 0xb0) {
                    return 0xc;
                }
                if (param_2 == 0x90) {
                    return 10;
                }
            } else {
                if (param_2 == 0xe0) {
                    return 0xf;
                }
                if (param_2 == 0xf0) {
                    return param_1;
                }
                if (param_2 == 0xd0) {
                    return 0xe;
                }
            }
        }
        break;
    case 0x20:
        uVar2 = (param_2 & 0xfffffff8) - 8 & 0xff;
        if (uVar2 < 0xf1) {
            return (int)(char)(&DAT_0004cf60)[uVar2];
        }
        break;
    case 0x40:
        uVar2 = (param_2 & 0xfffffffc) - 4 & 0xff;
        if (uVar2 < 0xf9) {
            return (int)(char)(&DAT_0004d054)[uVar2];
        }
    }
    param_1 = 1;
switchD_00027ae4_caseD_1:
    return param_1;
}

void FUN_00027dc4(int param_1, undefined1 *param_2, int param_3)

{
    uint uVar1;
    uint uVar2;
    undefined1 uVar3;
    char cVar4;
    void *__ptr;
    void *__ptr_00;
    void *__ptr_01;
    void *__ptr_02;
    void *__ptr_03;
    void *__ptr_04;
    undefined4 uVar5;
    int iVar6;
    size_t sVar7;
    undefined4 uVar8;
    char *pcVar9;
    undefined4 *puVar10;
    char *pcVar11;
    undefined1 *puVar12;
    undefined4 *puVar13;
    undefined8 uVar14;
    undefined4 uVar15;
    undefined4 local_c8c;
    undefined4 local_c88;
    undefined4 uStack_c84;
    undefined4 uStack_c80;
    undefined4 uStack_c7c;
    undefined4 local_c78;
    undefined4 uStack_c74;
    undefined4 uStack_c70;
    undefined4 uStack_c6c;
    undefined4 local_c68;
    undefined1 auStack_c64[4];
    undefined4 uStack_c60;
    undefined4 local_c5c;
    undefined4 uStack_c58;
    undefined4 local_c54;
    undefined4 local_c50;
    undefined4 local_c4c;
    undefined4 local_c48;
    undefined4 uStack_c44;
    undefined4 uStack_c40;
    undefined4 uStack_c3c;
    undefined4 local_c38;
    undefined4 uStack_c34;
    undefined4 uStack_c30;
    undefined4 uStack_c2c;
    char acStack_c28[1024];
    char acStack_828[2052];

    memset(acStack_c28, 0, 0x400);
    local_c5c = 0;
    puVar13 = &local_c68;
    uStack_c58 = 0;
    local_c54 = 0;
    local_c50 = 0;
    local_c88 = *(undefined4 *)(param_1 + 0x80);
    uStack_c84 = *(undefined4 *)(param_1 + 0x84);
    uStack_c80 = *(undefined4 *)(param_1 + 0x88);
    uStack_c7c = *(undefined4 *)(param_1 + 0x8c);
    local_c78 = *(undefined4 *)(param_1 + 0x90);
    uStack_c74 = *(undefined4 *)(param_1 + 0x94);
    uStack_c70 = *(undefined4 *)(param_1 + 0x98);
    uStack_c6c = *(undefined4 *)(param_1 + 0x9c);
    local_c4c = 0;
    puVar12 = (undefined1 *)((int)&local_c8c + 3);
    local_c68 = *(undefined4 *)(param_1 + 0x40);
    auStack_c64 = (undefined1[4]) * (undefined4 *)(param_1 + 0x44);
    uStack_c60 = *(undefined4 *)(param_1 + 0x48);
    local_c48 = *(undefined4 *)(param_1 + 0xc0);
    uStack_c44 = *(undefined4 *)(param_1 + 0xc4);
    uStack_c40 = *(undefined4 *)(param_1 + 200);
    uStack_c3c = *(undefined4 *)(param_1 + 0xcc);
    local_c38 = *(undefined4 *)(param_1 + 0xd0);
    uStack_c34 = *(undefined4 *)(param_1 + 0xd4);
    uStack_c30 = *(undefined4 *)(param_1 + 0xd8);
    uStack_c2c = *(undefined4 *)(param_1 + 0xdc);
    do {
        puVar12 = puVar12 + 1;
        uVar3 = *puVar12;
        puVar13 = (undefined4 *)((int)puVar13 + -1);
        *puVar12 = *(undefined1 *)puVar13;
        *(undefined1 *)puVar13 = uVar3;
    } while (puVar12 != (undefined1 *)((int)&uStack_c7c + 3));
    puVar10 = &local_c5c;
    puVar13 = &local_c68;
    do {
        puVar10 = (undefined4 *)((int)puVar10 + -1);
        uVar3 = *(undefined1 *)puVar13;
        *(undefined1 *)puVar13 = *(undefined1 *)puVar10;
        *(undefined1 *)puVar10 = uVar3;
        puVar13 = (undefined4 *)((int)puVar13 + 1);
    } while ((undefined4 *)(auStack_c64 + 2) != puVar10);
    pcVar11 = (char *)((int)&local_c4c + 3);
    pcVar9 = acStack_c28;
    do {
        pcVar11 = pcVar11 + 1;
        cVar4 = *pcVar11;
        pcVar9 = pcVar9 + -1;
        *pcVar11 = *pcVar9;
        *pcVar9 = cVar4;
    } while (pcVar11 != (char *)((int)&uStack_c3c + 3));
    __ptr = (void *)FUN_0001f970(param_1, 0x80);
    __ptr_00 = (void *)FUN_0001f970(&local_c88, 0x20);
    __ptr_01 = (void *)FUN_0001f970(&local_c68, 0xc);
    __ptr_02 = (void *)FUN_0001f970(param_2, 4);
    __ptr_03 = (void *)FUN_0001f970(param_2, 5);
    __ptr_04 = (void *)FUN_0001f970(&local_c48, 0x20);
    uVar14 = FUN_0002ac1c(param_1);
    uVar8 = (undefined4)((ulonglong)uVar14 >> 0x20);
    uVar5 = (undefined4)uVar14;
    pcVar9 = "o";
    if (param_3 == 0) {
        pcVar9 = "x";
    }
    uVar15 = uVar8;
    sprintf(acStack_c28,
            "%s %08x midstate %s data %s nonce %s hash %s diff %lld", pcVar9,
            *(undefined4 *)(param_1 + 0x154), __ptr_00, __ptr_01, __ptr_03,
            __ptr_04, uVar5, uVar8);
    iVar6 = strcmp(DAT_000688f0, "screen");
    if (iVar6 == 0) {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (2 < DAT_00067858)) {
            snprintf(acStack_828, 0x800, acStack_c28);
            FUN_0001dbec(3, acStack_828, 0);
        }
    } else {
        local_c8c = &DAT_00072d88;
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (2 < DAT_00067858)) {
            snprintf(acStack_828, 0x800, acStack_c28);
            FUN_0001dbec(3, acStack_828, 0);
        }
        if (DAT_0006a480 != (FILE *)0x0) {
            sprintf(acStack_c28,
                    "%s %08x work %s midstate %s data %s nonce %s hash %s diff "
                    "%lld",
                    pcVar9, *(undefined4 *)(param_1 + 0x154), __ptr, __ptr_00,
                    __ptr_01, __ptr_03, __ptr_04, uVar15, uVar5, uVar8);
            sVar7 = strlen(acStack_c28);
            fwrite(acStack_c28, sVar7, 1, DAT_0006a480);
            fwrite(&DAT_0004c274, 1, 1, DAT_0006a480);
            fflush(DAT_0006a480);
            if (param_3 != 0) {
                if (DAT_0006a47c == 1) {
                    sprintf(acStack_c28, "midstate %s data %s nonce %s hash %s",
                            __ptr_00, __ptr_01, __ptr_02, __ptr_04);
                    sVar7 = strlen(acStack_c28);
                    fwrite(acStack_c28, sVar7, 1, DAT_0006a484);
                    fwrite(&DAT_0004c274, 1, 1, DAT_0006a484);
                    fflush(DAT_0006a484);
                } else if ((DAT_0006a47c - 0x20U & 0xffffffdf) == 0) {
                    sprintf(acStack_c28, "midstate %s data %s nonce %s hash %s",
                            __ptr_00, __ptr_01, __ptr_02, __ptr_04);
                    iVar6 = FUN_00027adc(DAT_0006a47c, *param_2);
                    sVar7 = strlen(acStack_c28);
                    fwrite(acStack_c28, sVar7, 1, (&DAT_0006a484)[iVar6]);
                    fwrite(&DAT_0004c274, 1, 1, (&DAT_0006a484)[iVar6]);
                    fflush((&DAT_0006a484)[iVar6]);
                }
                if (DAT_0006a588 != '\0') {
                    iVar6 = 0;
                    do {
                        uVar1 = (uint)((ulonglong)uVar14 >> 0x21);
                        uVar2 = (uint)((byte)((ulonglong)uVar14 >> 0x20) & 1)
                                    << 0x1f |
                                (uint)uVar14 >> 1;
                        uVar14 = CONCAT44(uVar1, uVar2);
                        if (uVar2 == 0 && uVar1 == 0)
                            break;
                        iVar6 = iVar6 + 1;
                    } while (iVar6 != 0x40);
                    if ((DAT_000686e1 != '\0') &&
                        (((*local_c8c != '\0' || (DAT_000686e0 != '\0')) ||
                          (6 < DAT_00067858)))) {
                        snprintf(acStack_828, 0x800,
                                 "work diff %lld diffnum %d", uVar8, uVar5,
                                 uVar8, iVar6);
                        FUN_0001dbec(7, acStack_828, 0);
                    }
                    sprintf(acStack_c28, "midstate %s data %s nonce %s hash %s",
                            __ptr_00, __ptr_01, __ptr_02, __ptr_04);
                    sVar7 = strlen(acStack_c28);
                    fwrite(acStack_c28, sVar7, 1,
                           (FILE *)(&DAT_0006a58c)[iVar6]);
                    fwrite(&DAT_0004c274, 1, 1, (FILE *)(&DAT_0006a58c)[iVar6]);
                    fflush((FILE *)(&DAT_0006a58c)[iVar6]);
                }
            }
        }
    }
    if (__ptr != (void *)0x0) {
        free(__ptr);
    }
    if (__ptr_00 != (void *)0x0) {
        free(__ptr_00);
    }
    if (__ptr_01 != (void *)0x0) {
        free(__ptr_01);
    }
    if (__ptr_02 != (void *)0x0) {
        free(__ptr_02);
    }
    if (__ptr_03 != (void *)0x0) {
        free(__ptr_03);
    }
    if (__ptr_04 != (void *)0x0) {
        free(__ptr_04);
    }
    return;
}

undefined4 FUN_000286e0(undefined4 param_1)

{
    FUN_0003e784(param_1, &DAT_000688f8);
    return 0;
}

undefined4 FUN_00028710(char *param_1)

{
    char *__fd;
    char *__format;
    bool bVar1;
    char *local_814;
    char local_810[36];
    undefined2 local_7ec;

    local_814 = "";
    __fd = (char *)strtol(param_1, &local_814, 10);
    bVar1 = __fd == (char *)0x0;
    if (-1 < (int)__fd) {
        bVar1 = *local_814 == '\0';
    }
    if (bVar1) {
        DAT_000688fc = fdopen((int)__fd, "a");
        if ((DAT_000688fc == (FILE *)0x0) &&
            (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
              (2 < DAT_00067858)))) {
            __format = "Failed to open fd %u for share log";
        LAB_000287ec:
            DAT_000688fc = (FILE *)0x0;
            snprintf(local_810, 0x800, __format, __fd);
            FUN_0001dbec(3, local_810, 0);
            return 0;
        }
    } else if ((*param_1 == '-') && (param_1[1] == '\0')) {
        DAT_000688fc = stdout;
        if ((stdout == (FILE *)0x0) &&
            (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
              (2 < DAT_00067858)))) {
            builtin_strncpy(local_810, "Standard output missing for share lo",
                            0x24);
            local_7ec = 0x67;
            FUN_0001dbec(3, local_810, 0);
            return 0;
        }
    } else {
        DAT_000688fc = fopen64(param_1, "a");
        if ((DAT_000688fc == (FILE *)0x0) &&
            (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
              (2 < DAT_00067858)))) {
            __format = "Failed to open %s for share log";
            __fd = param_1;
            goto LAB_000287ec;
        }
    }
    return 0;
}

char *FUN_00028924(char *param_1)

{
    char cVar1;
    char *pcVar2;
    size_t sVar3;
    char *pcVar4;
    undefined4 *puVar5;
    char *pcVar6;

    sVar3 = strlen(param_1);
    pcVar4 =
        (char *)FUN_0001f708(sVar3 * 2 + 1, "cgminer.c", "json_escape", 0x1748);
    puVar5 = (undefined4 *)FUN_0001f708(8, "cgminer.c", "json_escape", 0x1749);
    *puVar5 = pcVar4;
    puVar5[1] = DAT_00068900;
    DAT_00068900 = puVar5;
    cVar1 = *param_1;
    pcVar2 = pcVar4;
    while (cVar1 != '\0') {
        pcVar6 = pcVar2 + 1;
        if (cVar1 == '\"' || cVar1 == '\\') {
            *pcVar2 = '\\';
            pcVar6 = pcVar2 + 2;
            pcVar2 = pcVar2 + 1;
        }
        *pcVar2 = *param_1;
        cVar1 = param_1[1];
        pcVar2 = pcVar6;
        param_1 = param_1 + 1;
    }
    *pcVar2 = '\0';
    return pcVar4;
}

void FUN_000289dc(undefined4 param_1)

{
    undefined4 uVar1;

    printf("%s\nBuilt with bitmain_c5 mining support.\n", &DAT_00068904);
    uVar1 = FUN_0003f720(DAT_000762f0, param_1);
    printf("%s", uVar1);
    fflush(stdout);
    /* WARNING: Subroutine does not return */
    exit(0);
}

void FUN_00028a34(int param_1)

{
    time_t tVar1;
    int iVar2;

    *(undefined1 *)(param_1 + 0x3d) = 1;
    FUN_00020580(param_1 + 0x2c);
    *(undefined4 *)(*(int *)(param_1 + 0x24) + 0x60) = 0;
    iVar2 = *(int *)(param_1 + 0x24);
    tVar1 = time((time_t *)0x0);
    *(time_t *)(iVar2 + 0xf0) = tVar1;
    return;
}

void FUN_00028a6c(int param_1)

{
    time_t tVar1;
    int iVar2;

    *(undefined1 *)(param_1 + 0x3d) = 0;
    FUN_00020580(param_1 + 0x2c);
    *(undefined4 *)(*(int *)(param_1 + 0x24) + 0x60) = 0;
    iVar2 = *(int *)(param_1 + 0x24);
    tVar1 = time((time_t *)0x0);
    *(time_t *)(iVar2 + 0xf0) = tVar1;
    return;
}

/* WARNING: Type propagation algorithm not settling */

void FUN_00028aa0(uint param_1, uint param_2, char *param_3, size_t param_4,
                  int param_5)

{
    int iVar1;
    undefined4 uVar2;
    bool bVar3;
    double dVar4;
    undefined2 local_2c[2];

    bVar3 = 0xde0b6b2 < param_2;
    local_2c[0] = 0;
    if (param_2 == 0xde0b6b3) {
        bVar3 = 0xa763fffe < param_1;
    }
    if (!bVar3 || param_2 == 0xde0b6b3 && param_1 == 0xa763ffff) {
        bVar3 = 0x38d7d < param_2;
        if (param_2 == 0x38d7e) {
            bVar3 = 0xa4c67ffe < param_1;
        }
        if (bVar3 && (param_2 != 0x38d7e || param_1 != 0xa4c67fff)) {
            iVar1 = FUN_0004ad40(param_1, param_2, 0xd4a51000, 0xe8);
            dVar4 = (double)(longlong)iVar1;
            local_2c[0] = 0x50;
        } else {
            bVar3 = 0xe7 < param_2;
            if (param_2 == 0xe8) {
                bVar3 = 0xd4a50ffe < param_1;
            }
            if (bVar3 && (param_2 != 0xe8 || param_1 != 0xd4a50fff)) {
                iVar1 = FUN_0004ad40(param_1, param_2, 1000000000, 0);
                local_2c[0] = 0x54;
            } else {
                if (param_2 == 0 && param_1 < 1000000000) {
                    if (param_2 == 0 && param_1 < 1000000) {
                        dVar4 = (double)(longlong)(int)param_1;
                        if (param_2 == 0 && param_1 < 1000) {
                            if (param_5 == 0) {
                                snprintf(param_3, param_4, "%d%s", param_1,
                                         local_2c);
                                return;
                            }
                            goto LAB_00028b74;
                        }
                        local_2c[0] = 0x4b;
                    } else {
                        iVar1 = FUN_0004ad40(param_1, param_2, 1000, 0);
                        dVar4 = (double)(longlong)iVar1;
                        local_2c[0] = 0x4d;
                    }
                    goto joined_r0x00028cd0;
                }
                iVar1 = FUN_0004ad40(param_1, param_2, 1000000, 0);
                local_2c[0] = 0x47;
            }
            dVar4 = (double)(longlong)iVar1;
        }
    } else {
        iVar1 = FUN_0004ad40(param_1, param_2, 0xa4c68000, 0x38d7e);
        dVar4 = (double)(longlong)iVar1;
        local_2c[0] = 0x45;
    }
joined_r0x00028cd0:
    dVar4 = dVar4 / 1000.0;
    if (param_5 == 0) {
        snprintf(param_3, param_4, "%.3g%s", local_2c, dVar4, local_2c);
        return;
    }
LAB_00028b74:
    if (dVar4 <= 0.0) {
        uVar2 = 3;
    } else {
        dVar4 = log10(dVar4);
        dVar4 = floor(dVar4);
        uVar2 = (undefined4)(longlong)(3.0 - dVar4);
    }
    snprintf(param_3, param_4, "%*.*f%s", param_5 + 1, uVar2);
    return;
}

void FUN_00028d58(int param_1)

{
    int extraout_r3;
    int iVar1;
    int iVar2;
    double in_d0;
    double dVar3;
    double dVar4;
    double dVar5;
    double dVar6;
    undefined8 uVar7;

    iVar2 = *(int *)(param_1 + 0x104);
    if (in_d0 == 0.0) {
        dVar5 = (double)FUN_0004acd4(*(undefined4 *)(param_1 + 0xb8),
                                     *(undefined4 *)(param_1 + 0xbc));
        dVar3 = (double)FUN_0004acd4(*(undefined4 *)(param_1 + 0xb0),
                                     *(undefined4 *)(param_1 + 0xb4));
        dVar4 = (double)FUN_0004acd4(*(undefined4 *)(param_1 + 0xa8),
                                     *(undefined4 *)(param_1 + 0xac));
        dVar6 = (double)FUN_0004acd4(*(undefined4 *)(param_1 + 0xa0),
                                     *(undefined4 *)(param_1 + 0xa4));
        dVar6 = dVar6 + dVar5 * 6.277101735386681e+57 +
                dVar3 * 3.402823669209385e+38 + dVar4 * 1.8446744073709552e+19;
        if (dVar6 == 0.0) {
            in_d0 = 2.695953529101131e+67;
            uVar7 = 0xffffffffffffffff;
        } else {
            in_d0 = 2.695953529101131e+67 / dVar6;
            dVar3 = round(in_d0);
            uVar7 =
                FUN_0004ada0(SUB84(dVar3, 0), (int)((ulonglong)dVar3 >> 0x20));
        }
        *(double *)(param_1 + 0x178) = in_d0;
    } else {
        *(double *)(param_1 + 0x178) = in_d0;
        dVar3 = round(in_d0);
        uVar7 = FUN_0004ada0(SUB84(dVar3, 0), (int)((ulonglong)dVar3 >> 0x20));
    }
    *(double *)(iVar2 + 0x1e0) = in_d0;
    FUN_00028aa0((int)uVar7, (int)((ulonglong)uVar7 >> 0x20),
                 *(int *)(param_1 + 0x104) + 0x30, 8, 0);
    dVar3 = *(double *)(iVar2 + 0x1d0);
    if (dVar3 == in_d0) {
        iVar1 = *(int *)(iVar2 + 0x1e8) + 1;
        *(int *)(iVar2 + 0x1e8) = iVar1;
    LAB_00028dc4:
        dVar3 = *(double *)(iVar2 + 0x1d8);
    } else {
        if (dVar3 <= in_d0) {
            iVar1 = extraout_r3;
            if (dVar3 != 0.0)
                goto LAB_00028dc4;
            *(double *)(iVar2 + 0x1d0) = in_d0;
            *(undefined4 *)(iVar2 + 0x1e8) = 1;
        } else {
            *(double *)(iVar2 + 0x1d0) = in_d0;
            *(undefined4 *)(iVar2 + 0x1e8) = 1;
        }
        iVar1 = 1;
        dVar3 = *(double *)(iVar2 + 0x1d8);
    }
    if (dVar3 != in_d0) {
        if (dVar3 < in_d0) {
            iVar1 = 1;
        }
        if (dVar3 < in_d0) {
            *(double *)(iVar2 + 0x1d8) = in_d0;
            *(int *)(iVar2 + 0x1ec) = iVar1;
        }
        return;
    }
    *(int *)(iVar2 + 0x1ec) = *(int *)(iVar2 + 0x1ec) + 1;
    return;
}

void FUN_00028ef8(int param_1)

{
    uint *puVar1;
    uint *puVar2;
    uint uVar3;
    undefined1 auStack_78[28];
    uint uStack_5c;
    uint local_58[20];

    puVar1 = (uint *)(param_1 + -4);
    puVar2 = &uStack_5c;
    do {
        puVar1 = puVar1 + 1;
        uVar3 = *puVar1;
        puVar2 = puVar2 + 1;
        *puVar2 = uVar3 << 0x18 | (uVar3 >> 8 & 0xff) << 0x10 |
                  (uVar3 >> 0x10 & 0xff) << 8 | uVar3 >> 0x18;
    } while (puVar2 != local_58 + 0x13);
    FUN_0001e8c8(local_58, 0x50, auStack_78);
    FUN_0001e8c8(auStack_78, 0x20, param_1 + 0xc0);
    return;
}

void FUN_00028f4c(int param_1)

{
    uint *puVar1;
    uint *puVar2;
    uint uVar3;
    uint local_f4;
    uint local_f0[16];
    undefined1 auStack_b0[136];
    undefined1 auStack_28[32];

    puVar1 = (uint *)(param_1 + -4);
    puVar2 = &local_f4;
    do {
        puVar1 = puVar1 + 1;
        uVar3 = *puVar1;
        puVar2 = puVar2 + 1;
        *puVar2 = uVar3 << 0x18 | (uVar3 >> 8 & 0xff) << 0x10 |
                  (uVar3 >> 0x10 & 0xff) << 8 | uVar3 >> 0x18;
    } while (puVar2 != local_f0 + 0xf);
    FUN_0001e700(auStack_b0);
    FUN_0001e730(auStack_b0, local_f0, 0x40);
    local_f4 = 0x8f1;
    FUN_000231cc(param_1 + 0x80, auStack_28, 0x20, "cgminer.c",
                 "calc_midstate");
    return;
}

void FUN_00028fc4(void)

{
    void *__arg;
    int iVar1;
    char acStack_820[2052];

    if (DAT_00072e58 < 1) {
        return;
    }
    iVar1 = 0;
    do {
        while (
            (__arg = *(void **)(DAT_00072efc + iVar1 * 4),
             *(char *)((int)__arg + 0x11c) != '\0' || (DAT_00068a04 != '\0'))) {
        LAB_0002900c:
            iVar1 = iVar1 + 1;
            if (DAT_00072e58 <= iVar1) {
                return;
            }
        }
        *(undefined1 *)((int)__arg + 0x11c) = 1;
        pthread_create((pthread_t *)((int)__arg + 0x118), (pthread_attr_t *)0x0,
                       FUN_00033230, __arg);
        if ((DAT_000686e1 == '\0') ||
            (((DAT_00072d88 == '\0' && (DAT_000686e0 == '\0')) &&
              (DAT_00067858 < 7))))
            goto LAB_0002900c;
        snprintf(acStack_820, 0x800, "create test_pool_thread pool[%d]\n",
                 iVar1);
        iVar1 = iVar1 + 1;
        FUN_0001dbec(7, acStack_820, 0);
        if (DAT_00072e58 <= iVar1) {
            return;
        }
    } while (true);
}

undefined4 FUN_000290f4(undefined4 *param_1)

{
    int iVar1;
    time_t tVar2;
    int iVar3;
    int iVar4;
    char acStack_820[16];
    char local_810[28];
    undefined2 uStack_7f4;
    undefined1 local_7f2;

    iVar4 = param_1[9];
    iVar3 = *(int *)(iVar4 + 4);
    snprintf(acStack_820, 0x10, "%d/Miner", *param_1);
    FUN_00022d78(acStack_820);
    FUN_00028a34(param_1);
    iVar1 = (**(code **)(iVar3 + 0x34))(param_1);
    if (iVar1 != 0) {
        if ((DAT_000686e1 != '\0') &&
            (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
              (6 < DAT_00067858)))) {
            builtin_strncpy(local_810, "Waiting on sem in miner thre", 0x1c);
            uStack_7f4 = 0x6461;
            local_7f2 = 0;
            FUN_0001dbec(7, local_810, 0);
        }
        FUN_00022ef8(param_1 + 4, "cgminer.c", "miner_thread", 0x2684);
        tVar2 = time((time_t *)0x0);
        *(time_t *)(iVar4 + 0xe8) = tVar2;
        (**(code **)(iVar3 + 0x3c))(param_1);
        (**(code **)(iVar3 + 0x58))(param_1);
        return 0;
    }
    FUN_00022a94(iVar4);
    return 0;
}

void FUN_00029230(void)

{
    pthread_t __th;

    __th = pthread_self();
    pthread_detach(__th);
    pthread_setcanceltype(1, (int *)0x0);
    sleep(7);
    /* WARNING: Subroutine does not return */
    exit(1);
}

void FUN_00029258(undefined4 *param_1)

{
    DAT_00074f1c = DAT_00074f1c + 1;
    *param_1 = 1;
    return;
}

byte FUN_00029278(int param_1)

{
    byte bVar1;

    bVar1 = *(byte *)(param_1 + 0x290);
    if ((bVar1 != 0) && (*(char *)(param_1 + 0x291) != '\0')) {
        bVar1 = *(byte *)(param_1 + 0x293) ^ 1;
    }
    return bVar1;
}

int FUN_0002929c(int param_1)

{
    int iVar1;
    int iVar2;
    int *piVar3;
    int *piVar5;
    int iVar6;
    undefined8 uVar7;
    int *piVar4;

    iVar6 = *(int *)(param_1 + 0x9c);
    if (0 < DAT_00072e58) {
        piVar5 = DAT_00072efc + DAT_00072e58;
        piVar3 = DAT_00072efc;
        do {
            piVar4 = piVar3 + 1;
            iVar1 = *piVar3;
            if ((((*(char *)(iVar1 + 0x61) == '\0') &&
                  (*(int *)(iVar1 + 100) == 1)) &&
                 (uVar7 = FUN_00029278(iVar1),
                  iVar1 = (int)((ulonglong)uVar7 >> 0x20), (int)uVar7 == 0)) &&
                (iVar2 = *(int *)(iVar1 + 0x9c), iVar2 < iVar6)) {
                param_1 = iVar1;
                iVar6 = iVar2;
            }
            piVar3 = piVar4;
        } while (piVar4 != piVar5);
        iVar6 = *(int *)(param_1 + 0x9c);
    }
    *(int *)(param_1 + 0x9c) = iVar6 + 1;
    return param_1;
}

int FUN_000293b0(int param_1)

{
    int iVar1;
    int *piVar2;
    int iVar3;
    char acStack_808[2048];

    if (DAT_00072e58 < 1) {
    LAB_00029324:
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (2 < DAT_00067858)) {
            snprintf(acStack_808, 0x800, "WTF No pool %d found!", param_1);
            FUN_0001dbec(3, acStack_808, 0);
        }
        return DAT_00072efc[param_1];
    }
    iVar1 = *DAT_00072efc;
    if (*(int *)(iVar1 + 4) != param_1) {
        iVar3 = 0;
        piVar2 = DAT_00072efc;
        do {
            iVar3 = iVar3 + 1;
            if (iVar3 == DAT_00072e58)
                goto LAB_00029324;
            piVar2 = piVar2 + 1;
            iVar1 = *piVar2;
        } while (*(int *)(iVar1 + 4) != param_1);
    }
    return iVar1;
}

char *FUN_00029418(char *param_1)

{
    int iVar1;
    int *piVar2;
    size_t sVar3;
    size_t sVar4;
    char *pcVar5;
    int iVar6;
    undefined *puVar7;
    undefined1 auStack_114[92];
    char acStack_b8[164];

    puVar7 = &DAT_000686e8;
    if (DAT_00068a08 == 0) {
        DAT_00068a08 = __strdup();
    }
    iVar6 = DAT_00068a0c + 1;
    iVar1 = DAT_00068a0c + -9;
    DAT_00068a0c = iVar6;
    if (10 < iVar6) {
        puVar7 = (undefined *)0x1a00;
    }
    if (iVar6 == 10 || iVar1 < 0 != SBORROW4(iVar6, 10)) {
        piVar2 = (int *)FUN_00048178(param_1, 0, auStack_114);
        if ((piVar2 != (int *)0x0) && (*piVar2 == 0)) {
            puVar7[0x328] = 1;
            pcVar5 = (char *)FUN_00029514(piVar2, 1);
            return pcVar5;
        }
        sVar3 = strlen(param_1);
        sVar4 = strlen(acStack_b8);
        sVar3 = sVar3 + sVar4 + 0x23;
        pcVar5 = (char *)FUN_0001f708(sVar3, "cgminer.c", "load_config", 0x86c);
        snprintf(pcVar5, sVar3, "JSON decode of file \'%s\' failed\n %s",
                 param_1, acStack_b8);
        return pcVar5;
    }
    return (char *)((uint)puVar7 & 0xffff | 0x50000);
}

undefined *FUN_00029514(undefined4 param_1, int param_2)

{
    char *__s;
    char *pcVar1;
    int *piVar2;
    int *piVar3;
    undefined4 uVar4;
    undefined *puVar5;
    int *piVar6;
    uint uVar7;
    int iVar8;
    char *pcVar9;
    uint uVar10;
    char acStack_828[2052];

    if ((param_2 != 0) && (DAT_00068adc == 0)) {
        DAT_00068adc = 1;
    }
    if (DAT_00067a84 != 0x10) {
        uVar10 = DAT_00067a84 & 8;
        piVar3 = &DAT_00067a80;
        do {
            if (uVar10 != 0) {
                /* WARNING: Subroutine does not return */
                __assert_fail("!(opt->type & OPT_SUBTABLE)", "cgminer.c", 0x7c4,
                              "parse_config");
            }
            if (*piVar3 == 0) {
                uVar10 = piVar3[8];
            } else {
                __s = (char *)__strdup();
                pcVar1 = strtok(__s, "|");
                while (pcVar1 != (char *)0x0) {
                    if ((pcVar1[1] == '-') &&
                        (piVar2 = (int *)FUN_00048cc4(param_1, pcVar1 + 2),
                         piVar2 != (int *)0x0)) {
                        iVar8 = *piVar2;
                        if ((piVar3[1] & 6U) == 0) {
                        LAB_00029620:
                            if (iVar8 - 5U < 2) {
                                if ((piVar3[1] & 1U) == 0) {
                                    if (iVar8 == 5) {
                                        FUN_0003e6a0(piVar3[5]);
                                    } else {
                                        FUN_0003e6b0();
                                    }
                                    goto LAB_000295cc;
                                }
                                pcVar9 = (char *)(*(code *)piVar3[2])();
                                goto LAB_00029710;
                            }
                            pcVar9 = "Invalid value";
                        } else {
                            if (iVar8 != 2) {
                                if (iVar8 == 1) {
                                    uVar10 = 0;
                                    iVar8 = FUN_00049030(piVar2);
                                    if (iVar8 != 0) {
                                        do {
                                            piVar6 = (int *)FUN_0004904c(
                                                piVar2, uVar10);
                                            if (piVar6 == (int *)0x0)
                                                break;
                                            if (*piVar6 == 2) {
                                                uVar4 = FUN_000491f8();
                                                pcVar9 = (char *)(*(
                                                    code *)piVar3[3])(
                                                    uVar4, piVar3[5]);
                                                if (piVar3[1] == 4) {
                                                    FUN_0003e784(uVar4,
                                                                 piVar3[5]);
                                                }
                                            LAB_00029838:
                                                if (pcVar9 != (char *)0x0)
                                                    goto joined_r0x0002963c;
                                            } else if (*piVar6 == 0) {
                                                pcVar9 = (char *)FUN_00029514();
                                                goto LAB_00029838;
                                            }
                                            uVar10 = uVar10 + 1;
                                            uVar7 = FUN_00049030(piVar2);
                                        } while (uVar10 < uVar7);
                                    }
                                    goto LAB_000295cc;
                                }
                                goto LAB_00029620;
                            }
                            uVar4 = FUN_000491f8();
                            pcVar9 =
                                (char *)(*(code *)piVar3[3])(uVar4, piVar3[5]);
                            if (piVar3[1] == 4) {
                                FUN_0003e784(uVar4, piVar3[5]);
                            }
                        LAB_00029710:
                            if (pcVar9 == (char *)0x0)
                                goto LAB_000295cc;
                        }
                    joined_r0x0002963c:
                        if (param_2 == 0) {
                            snprintf(&DAT_00068a14, 200,
                                     "Parsing JSON option %s: %s", pcVar1,
                                     pcVar9);
                            return &DAT_00068a14;
                        }
                        if (((DAT_00072d88 != '\0') ||
                             (DAT_000686e0 != '\0')) ||
                            (2 < DAT_00067858)) {
                            snprintf(acStack_828, 0x800,
                                     "Invalid config option %s: %s", pcVar1,
                                     pcVar9);
                            FUN_0001dbec(3, acStack_828, 0);
                        }
                        DAT_00068adc = -1;
                    }
                LAB_000295cc:
                    pcVar1 = strtok((char *)0x0, "|");
                }
                free(__s);
                uVar10 = piVar3[8];
            }
            if (uVar10 == 0x10)
                break;
            uVar10 = uVar10 & 8;
            piVar3 = piVar3 + 7;
        } while (true);
    }
    piVar3 = (int *)FUN_00048cc4(param_1, "include");
    if ((piVar3 != (int *)0x0) && (*piVar3 == 2)) {
        uVar4 = FUN_000491f8();
        puVar5 = (undefined *)FUN_00029418(uVar4, 0);
        return puVar5;
    }
    return (undefined *)0x0;
}

char FUN_0002989c(void)

{
    char cVar1;
    tm *ptVar2;
    int iVar3;
    int iVar4;
    char cVar5;
    time_t local_24;
    time_t local_20[3];

    FUN_00020580(local_20);
    local_24 = local_20[0];
    ptVar2 = localtime(&local_24);
    cVar1 = DAT_00076028;
    if (DAT_00076028 == '\0') {
        if (DAT_00074f34 <= ptVar2->tm_hour) {
            return ptVar2->tm_hour == DAT_00074f34 &&
                   ptVar2->tm_min < DAT_00074f30;
        }
        cVar5 = '\x01';
    } else {
        iVar4 = ptVar2->tm_min;
        iVar3 = ptVar2->tm_hour;
        cVar5 = DAT_00074f28;
        if (DAT_00074f28 == '\0') {
            if ((DAT_00076034 <= iVar3) &&
                (DAT_00076030 <= iVar4 || DAT_00076034 != iVar3)) {
                DAT_00076028 = DAT_00074f28;
                cVar5 = cVar1;
            }
        } else if ((DAT_00076034 < DAT_00074f34) ||
                   (DAT_00076030 < DAT_00074f30 &&
                    DAT_00074f34 == DAT_00076034)) {
            if ((iVar3 < DAT_00074f34) ||
                (cVar5 = iVar4 < DAT_00074f30 && DAT_00074f34 == iVar3,
                 iVar4 < DAT_00074f30 && DAT_00074f34 == iVar3)) {
                if (iVar3 < DAT_00076034) {
                    cVar5 = '\0';
                } else {
                    cVar5 = DAT_00076030 <= iVar4 || DAT_00076034 != iVar3;
                }
            }
        } else if (((iVar3 < DAT_00076034) ||
                    (iVar4 < DAT_00076030 && DAT_00076034 == iVar3)) &&
                   (DAT_00074f34 <= iVar3)) {
            cVar5 = iVar4 < DAT_00074f30 && DAT_00074f34 == iVar3;
        }
    }
    return cVar5;
}

char *FUN_00029a28(undefined4 param_1, float *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_0003e790();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    if (100.0 <= *param_2) {
        pcVar1 = (char *)0x0;
        if (250.0 < *param_2) {
            pcVar1 = "Value out of range";
        }
        return pcVar1;
    }
    return "Value out of range";
}

char *FUN_00029a80(undefined4 param_1, float *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_0003e790();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    if (125.0 <= *param_2) {
        pcVar1 = (char *)0x0;
        if (500.0 < *param_2) {
            pcVar1 = "Value out of range";
        }
        return pcVar1;
    }
    return "Value out of range";
}

void FUN_00029ad8(void)

{
    int iVar1;
    char local_808[2052];

    if (DAT_00068ae0 == 0) {
        iVar1 =
            pthread_create((pthread_t *)&DAT_00068ae0, (pthread_attr_t *)0x0,
                           FUN_0003d468, (void *)0x0);
        if ((iVar1 != 0) &&
            (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
              (2 < DAT_00067858)))) {
            builtin_strncpy(local_808, "Failed to create pool_change_thread",
                            0x24);
            FUN_0001dbec(3, local_808, 0);
        }
    } else if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
               (2 < DAT_00067858)) {
        builtin_strncpy(local_808,
                        "config too fast, pool is changing, please wait\n",
                        0x30);
        FUN_0001dbec(3, local_808, 0);
    }
    return;
}

void FUN_00029c04(int param_1, undefined4 param_2, undefined4 *param_3)

{
    char cVar1;
    int iVar2;
    char local_818[28];
    undefined2 uStack_7fc;
    undefined1 local_7fa;

    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
        (3 < DAT_00067858)) {
        snprintf(local_818, 0x800, "Thread %d being disabled", param_2);
        FUN_0001dbec(4, local_818, 0);
    }
    cVar1 = DAT_000686e1;
    iVar2 = *(int *)(param_1 + 0x24);
    *(undefined4 *)(iVar2 + 0x30) = 0;
    *(undefined4 *)(iVar2 + 0x34) = 0;
    if ((cVar1 != '\0') && (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
                             (6 < DAT_00067858)))) {
        builtin_strncpy(local_818, "Waiting on sem in miner thre", 0x1c);
        uStack_7fc = 0x6461;
        local_7fa = 0;
        FUN_0001dbec(7, local_818, 0);
    }
    FUN_00022ef8(param_1 + 0x10, "cgminer.c", "mt_disable", 0x23ef);
    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
        (3 < DAT_00067858)) {
        snprintf(local_818, 0x800, "Thread %d being re-enabled", param_2);
        FUN_0001dbec(4, local_818, 0);
    }
    (*(code *)*param_3)(param_1);
    return;
}

void FUN_00029dfc(void)

{
    int iVar1;
    code *UNRECOVERED_JUMPTABLE;
    char acStack_808[2048];

    iVar1 = nice(10);
    if (iVar1 != 0) {
        return;
    }
    if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
        (DAT_00067858 < 6)) {
        return;
    }
    builtin_strncpy(acStack_808, "Unable to set thread to low priority", 0x24);
    acStack_808[0x24] = 0;
    FUN_0001dbec(6, acStack_808, 0);
    /* WARNING: Could not recover jumptable at 0x00029df8. Too many branches */
    /* WARNING: Treating indirect jump as call */
    (*UNRECOVERED_JUMPTABLE)();
    return;
}

void FUN_00029e58(int param_1)

{
    pthread_t __th;

    __th = pthread_self();
    pthread_detach(__th);
    pthread_setcanceltype(1, (int *)0x0);
    FUN_00022d78(&DAT_0004b134);
    FUN_00029dfc();
    FUN_0001b704();
    *(undefined4 *)(param_1 + 0xc) = 0;
    return;
}

char *FUN_00029e94(undefined4 param_1)

{
    char *pcVar1;

    DAT_00068ae4 = 2;
    pcVar1 = (char *)FUN_0003e8a0(param_1, &DAT_00073f14);
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (9999 < DAT_00073f14) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_00029edc(undefined4 param_1, uint *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_0003e8a0();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (9999 < *param_2) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_00029f0c(undefined4 param_1, int *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_0003e8a0();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (0xfffe < *param_2 - 1U) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_00029f40(undefined4 param_1, int *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_0003e8a0();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (0x14 < *param_2 - 0x2aU) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_00029f70(undefined4 param_1, int *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_0003e8a0();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (0x21 < *param_2 - 0x16U) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_00029fa0(undefined4 param_1, int *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_0003e8a0();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (0x2b < *param_2 - 0x2aU) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_00029fd0(undefined4 param_1, int *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_0003e8a0();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (0x35 < *param_2 - 0x16U) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002a000(undefined4 param_1, int *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_0003e8a0();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (0x1f < *param_2 - 0x20U) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002a030(undefined4 param_1, uint *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_0003e8a0();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (4 < *param_2) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002a05c(undefined4 param_1, uint *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_0003e8a0();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (200 < *param_2) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002a088(undefined4 param_1, uint *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_0003e8a0();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (0x1e00 < *param_2) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002a0b4(undefined4 param_1, int *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_0003e8a0();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (0xfe < *param_2 - 1U) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002a0e4(undefined4 param_1, uint *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_0003e8a0();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (0xff < *param_2) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002a110(undefined4 param_1, uint *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_0003e8a0();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (100 < *param_2) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002a13c(undefined4 param_1, int *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_0003e8a0();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (9 < *param_2 - 1U) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002a16c(undefined4 param_1, uint *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_0003e8a0();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (10 < *param_2) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

void FUN_0002a334(double *param_1)

{
    double in_d0;
    double dVar1;
    double in_d1;
    double in_d2;

    dVar1 = exp(in_d1 / in_d2);
    dVar1 = 1.0 - 1.0 / dVar1;
    *param_1 = (*param_1 + (in_d0 / in_d1) * dVar1) / (dVar1 + 1.0);
    return;
}

char *FUN_0002a3a0(char *param_1)

{
    int iVar1;

    iVar1 = sscanf(param_1, "%d:%d", &DAT_00076034, &DAT_00076030);
    if (iVar1 != 2) {
        return "Invalid time set, should be HH:MM";
    }
    if ((DAT_00076034 < 0x18) && (DAT_00076030 < 0x3c)) {
        DAT_00076028 = 1;
        return (char *)0x0;
    }
    return "Invalid time set.";
}

char *FUN_0002a40c(char *param_1)

{
    int iVar1;

    iVar1 = sscanf(param_1, "%d:%d", &DAT_00074f34, &DAT_00074f30);
    if (iVar1 != 2) {
        return "Invalid time set, should be HH:MM";
    }
    if ((DAT_00074f34 < 0x18) && (DAT_00074f30 < 0x3c)) {
        DAT_00074f28 = 1;
        return (char *)0x0;
    }
    return "Invalid time set.";
}

void FUN_0002a478(char *param_1, size_t param_2, time_t *param_3)

{
    tm *ptVar1;
    int iVar2;
    time_t local_1c[2];

    iVar2 = param_3[1];
    local_1c[0] = *param_3;
    ptVar1 = localtime(local_1c);
    snprintf(param_1, param_2, "[%d-%02d-%02d %02d:%02d:%02d.%03d]",
             ptVar1->tm_year + 0x76c, ptVar1->tm_mon + 1, ptVar1->tm_mday,
             ptVar1->tm_hour, ptVar1->tm_min, ptVar1->tm_sec, iVar2 / 1000);
    return;
}

void FUN_0002a510(void)

{
    undefined4 uVar1;
    int extraout_r1;
    int extraout_r1_00;
    uint uVar2;
    uint uVar3;
    int *piVar4;
    int iVar6;
    int iVar7;
    int *piVar8;
    int *piVar9;
    char acStack_820[2052];
    int *piVar5;

    piVar8 = DAT_00072efc;
    if (DAT_00072e58 < 1) {
        uVar3 = 1;
    } else {
        uVar3 = 0xffffffff;
        piVar4 = DAT_00072efc;
        do {
            piVar5 = piVar4 + 1;
            uVar2 = *(uint *)(*piVar4 + 0x38);
            if (uVar2 != 0 && uVar2 < uVar3) {
                uVar3 = uVar2;
            }
            piVar4 = piVar5;
        } while (DAT_00072efc + DAT_00072e58 != piVar5);
        piVar4 = DAT_00072efc;
        if (uVar3 == 0xffffffff) {
            uVar3 = 1;
            iVar6 = DAT_000681b8;
        } else {
            do {
                piVar9 = piVar4 + 1;
                iVar6 = *(int *)(*piVar4 + 0x38);
                if (iVar6 != 0) {
                    FUN_0004a6fc(iVar6, uVar3);
                    iVar7 = extraout_r1;
                    while (iVar7 != 0) {
                        uVar3 = uVar3 - 1;
                        FUN_0004a6fc(iVar6, uVar3);
                        iVar7 = extraout_r1_00;
                    }
                }
                piVar4 = piVar9;
                iVar6 = DAT_000681b8;
            } while (piVar5 != piVar9);
        }
        do {
            piVar4 = piVar8 + 1;
            iVar7 = *piVar8;
            uVar1 = FUN_0004a4a0(*(int *)(iVar7 + 0x40) * iVar6, uVar3);
            *(undefined4 *)(iVar7 + 0x40) = uVar1;
            uVar1 = FUN_0004a4a0(*(undefined4 *)(iVar7 + 0x38), uVar3);
            *(undefined4 *)(iVar7 + 0x3c) = uVar1;
            piVar8 = piVar4;
        } while (piVar5 != piVar4);
    }
    DAT_000681b8 = uVar3;
    if ((DAT_000686e1 != '\0') &&
        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
          (6 < DAT_00067858)))) {
        snprintf(acStack_820, 0x800,
                 "Global quota greatest common denominator set to %lu", uVar3);
        FUN_0001dbec(7, acStack_820, 0);
    }
    return;
}

char *FUN_0002a694(undefined4 param_1, int *param_2, int param_3, int param_4)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_0003e8a0();
    if (pcVar1 == (char *)0x0) {
        pcVar1 = (char *)0x0;
        if (param_4 < *param_2 || *param_2 < param_3) {
            pcVar1 = "Value out of range";
        }
        return pcVar1;
    }
    return pcVar1;
}

void FUN_0002a6e0(char *param_1, undefined4 *param_2, undefined4 *param_3)

{
    int iVar1;

    iVar1 = sscanf(param_1, "%d-%d", param_2, param_3);
    if (iVar1 == 1) {
        *param_3 = *param_2;
    }
    return;
}

undefined4 FUN_0002a710(undefined4 *param_1, char *param_2)

{
    char cVar1;
    undefined4 uVar2;
    int iVar3;
    char *__format;
    char acStack_810[2048];

    iVar3 = FUN_000208f0(param_2, param_1 + 0x9a, param_1 + 0x92);
    if (iVar3 == 0) {
        return 0;
    }
    iVar3 = strncasecmp(param_2, "stratum+tcp://", 0xe);
    if (iVar3 == 0) {
        uVar2 = __strdup(param_2);
        param_1[0x29] = uVar2;
        cVar1 = DAT_00072d88;
        *(undefined1 *)(param_1 + 0x94) = 0;
        param_1[0x90] = param_1[0x9a];
        *(undefined1 *)(param_1 + 0xa4) = 1;
        if (((cVar1 == '\0') && (DAT_000686e0 == '\0')) && (DAT_00067858 < 5)) {
            return 1;
        }
        uVar2 = *param_1;
        __format = "Pool %d is tcp pool.";
    } else {
        iVar3 = strncasecmp(param_2, "stratum+tls://", 0xe);
        if (iVar3 != 0) {
            return 0;
        }
        uVar2 = __strdup(param_2);
        cVar1 = DAT_00072d88;
        param_1[0x29] = uVar2;
        param_1[0x90] = param_1[0x9a];
        *(undefined1 *)(param_1 + 0xa4) = 1;
        *(undefined1 *)(param_1 + 0x94) = 1;
        if (((cVar1 == '\0') && (DAT_000686e0 == '\0')) && (DAT_00067858 < 5)) {
            return 1;
        }
        uVar2 = *param_1;
        __format = "Pool %d is tls pool.";
    }
    snprintf(acStack_810, 0x800, __format, uVar2);
    FUN_0001dbec(5, acStack_810, 0);
    return 1;
}

undefined4 FUN_0002a744(int param_1, undefined4 param_2)

{
    char *__s1;
    int iVar1;
    char *__dest;

    __s1 = (char *)FUN_00020a64(param_2, param_1);
    iVar1 = FUN_0002a710(param_1, __s1);
    if (iVar1 == 0) {
        FUN_0003e784(__s1, param_1 + 0xa4);
        iVar1 = strncmp(__s1, "http://", 7);
        if ((iVar1 != 0) &&
            (iVar1 = strncmp(__s1, "https://", 8), iVar1 != 0)) {
            __dest =
                (char *)FUN_0001f708(0x100, "cgminer.c", "setup_url", 0x42c);
            builtin_strncpy(__dest, "stratum+tcp://", 0xf);
            strncat(__dest, __s1, 0xf2);
            FUN_0002a710(param_1, __dest);
        }
    }
    return *(undefined4 *)(param_1 + 0xa4);
}

char *FUN_0002a844(char *param_1, undefined4 param_2, undefined4 param_3,
                   undefined4 param_4)

{
    uint uVar1;

    uVar1 = strtol(param_1, (char **)0x0, 10);
    if (200 < uVar1) {
        return "Invalid value passed to set temp cutoff";
    }
    DAT_00068ae8 = param_4;
    return (char *)0x0;
}

void FUN_0002a880(void *param_1)

{
    free(*(void **)((int)param_1 + 0x120));
    free(*(void **)((int)param_1 + 0x134));
    free(*(void **)((int)param_1 + 0x148));
    free(*(void **)((int)param_1 + 0x140));
    memset(param_1, 0, 0x1c0);
    return;
}

void FUN_0002a8bc(int param_1, int param_2, int param_3)

{
    uint uVar1;
    undefined4 uVar2;
    uint local_1c[2];

    uVar2 = *(undefined4 *)(param_1 + 0x154);
    FUN_0002a880();
    FUN_000231cc(param_1, param_2, 0x1c0, "cgminer.c", "_copy_work", 0x1378);
    *(undefined4 *)(param_1 + 0x154) = uVar2;
    if (*(int *)(param_2 + 0x120) != 0) {
        uVar2 = __strdup();
        *(undefined4 *)(param_1 + 0x120) = uVar2;
    }
    if (*(int *)(param_2 + 0x140) != 0) {
        uVar2 = __strdup();
        *(undefined4 *)(param_1 + 0x140) = uVar2;
    }
    if (*(int *)(param_2 + 0x134) == 0) {
        if (param_3 != 0) {
            uVar1 = *(uint *)(param_1 + 0x44);
            uVar1 = param_3 + (uVar1 << 0x18 | (uVar1 >> 8 & 0xff) << 0x10 |
                               (uVar1 >> 0x10 & 0xff) << 8 | uVar1 >> 0x18);
            *(uint *)(param_1 + 0x44) =
                uVar1 * 0x1000000 | (uVar1 >> 8 & 0xff) << 0x10 |
                (uVar1 >> 0x10 & 0xff) << 8 | uVar1 >> 0x18;
        }
    } else if (param_3 == 0) {
        uVar2 = __strdup();
        *(undefined4 *)(param_1 + 0x134) = uVar2;
    } else {
        uVar1 = *(uint *)(param_1 + 0x44);
        uVar1 = param_3 + (uVar1 << 0x18 | (uVar1 >> 8 & 0xff) << 0x10 |
                           (uVar1 >> 0x10 & 0xff) << 8 | uVar1 >> 0x18);
        *(uint *)(param_1 + 0x44) = uVar1 * 0x1000000 |
                                    (uVar1 >> 8 & 0xff) << 0x10 |
                                    (uVar1 >> 0x10 & 0xff) << 8 | uVar1 >> 0x18;
        FUN_0001fa24(local_1c, *(undefined4 *)(param_2 + 0x134), 4);
        uVar1 =
            param_3 + (local_1c[0] << 0x18 | (local_1c[0] >> 8 & 0xff) << 0x10 |
                       (local_1c[0] >> 0x10 & 0xff) << 8 | local_1c[0] >> 0x18);
        local_1c[0] = uVar1 * 0x1000000 | (uVar1 >> 8 & 0xff) << 0x10 |
                      (uVar1 >> 0x10 & 0xff) << 8 | uVar1 >> 0x18;
        uVar2 = FUN_0001f970(local_1c, 4);
        *(undefined4 *)(param_1 + 0x134) = uVar2;
    }
    if (*(int *)(param_2 + 0x148) != 0) {
        uVar2 = __strdup();
        *(undefined4 *)(param_1 + 0x148) = uVar2;
    }
    *(undefined4 *)(param_1 + 0x1bc) = *(undefined4 *)(param_2 + 0x1bc);
    return;
}

void FUN_0002a9d4(undefined4 *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    void *__ptr;
    char acStack_808[2040];

    __ptr = (void *)*param_1;
    if (__ptr != (void *)0x0) {
        FUN_0002a880(__ptr);
        free(__ptr);
        *param_1 = 0;
        return;
    }
    if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
        (DAT_00067858 < 3)) {
        return;
    }
    snprintf(acStack_808, 0x800,
             "Free work called with NULL work from %s %s:%d", param_2, param_3,
             param_4);
    FUN_0001dbec(3, acStack_808, 0);
    return;
}

/* WARNING: Globals starting with '_' overlap smaller symbols at the same
 * address */

undefined4 FUN_0002aa68(int param_1)

{
    undefined4 uVar1;
    undefined4 extraout_s1;
    undefined1 auStack_10[8];
    double dVar2;

    if (*(int *)(param_1 + 0x170) == 0) {
        dVar2 = _DAT_000681c0;
        if (_DAT_000681c0 < 1.0) {
            dVar2 = 0.0;
        }
        return SUB84(dVar2, 0);
    }
    FUN_00020580(auStack_10);
    uVar1 = FUN_000208ac(auStack_10, param_1 + 0x170);
    dVar2 = (double)CONCAT44(extraout_s1, uVar1);
    if (dVar2 < 1.0) {
        dVar2 = 0.0;
    }
    return SUB84(dVar2, 0);
}

void FUN_0002aacc(void)

{
    undefined1 auStack_10[12];

    FUN_00020580(auStack_10);
    FUN_000208ac(auStack_10, &DAT_00068aec);
    return;
}

void FUN_0002aaf4(void)

{
    undefined1 auStack_10[12];

    FUN_00020580(auStack_10);
    FUN_000208ac(auStack_10, &DAT_00068af4);
    return;
}

void FUN_0002ab1c(undefined4 param_1, uint param_2)

{
    int iVar1;
    uint uVar2;
    int iVar3;
    undefined1 auStack_c08[1024];
    char acStack_808[2048];

    iVar1 = 4;
    iVar3 = 0;
    do {
        uVar2 = param_2 & 0xff;
        iVar1 = iVar1 + -1;
        param_2 = param_2 >> 8;
        iVar3 = uVar2 + iVar3 * 0x100;
    } while (iVar1 != 0);
    FUN_0001f900(auStack_c08, param_1, 0x80);
    if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
        (DAT_00067858 < 3)) {
        return;
    }
    snprintf(acStack_808, 0x800, "BENCHFILE nonce %u=0x%08x for work=%s", iVar3,
             iVar3, auStack_c08);
    FUN_0001dbec(3, acStack_808, 0);
    return;
}

undefined4 FUN_0002ac1c(int param_1)

{
    undefined4 uVar1;
    double dVar2;
    double dVar3;
    double dVar4;
    double dVar5;

    if (param_1 != 0) {
        dVar4 = (double)FUN_0004acd4(*(undefined4 *)(param_1 + 0xd8),
                                     *(undefined4 *)(param_1 + 0xdc));
        dVar2 = (double)FUN_0004acd4(*(undefined4 *)(param_1 + 0xd0),
                                     *(undefined4 *)(param_1 + 0xd4));
        dVar3 = (double)FUN_0004acd4(*(undefined4 *)(param_1 + 200),
                                     *(undefined4 *)(param_1 + 0xcc));
        dVar5 = (double)FUN_0004acd4(*(undefined4 *)(param_1 + 0xc0),
                                     *(undefined4 *)(param_1 + 0xc4));
        dVar5 = dVar5 + dVar4 * 6.277101735386681e+57 +
                dVar2 * 3.402823669209385e+38 + dVar3 * 1.8446744073709552e+19;
        if (dVar5 != 0.0) {
            dVar5 = 2.695953529101131e+67 / dVar5;
            uVar1 =
                FUN_0004ada0(SUB84(dVar5, 0), (int)((ulonglong)dVar5 >> 0x20));
            return uVar1;
        }
    }
    return 0;
}

void FUN_0002acd0(int *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    int iVar1;
    int iVar2;
    bool bVar3;
    char local_818[12];
    undefined4 uStack_80c;
    char local_808[2036];

    iVar1 = *param_1;
    if (iVar1 == 0) {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (2 < DAT_00067858)) {
            snprintf(local_818, 0x800,
                     "Discard work called with NULL work from %s %s:%d",
                     param_2, param_3, param_4);
            FUN_0001dbec(3, local_818, 0);
        }
    } else {
        if (((*(char *)(iVar1 + 0x111) == '\0') &&
             (*(int *)(iVar1 + 0xf0) == 0)) &&
            (*(char *)(iVar1 + 0x110) == '\0')) {
            iVar2 = *(int *)(iVar1 + 0x104);
            if (iVar2 != 0) {
                *(int *)(iVar2 + 0x7c) = *(int *)(iVar2 + 0x7c) + 1;
                *(int *)(*(int *)(iVar1 + 0x104) + 0x40) =
                    *(int *)(*(int *)(iVar1 + 0x104) + 0x40) + -1;
                *(int *)(*(int *)(iVar1 + 0x104) + 0x44) =
                    *(int *)(*(int *)(iVar1 + 0x104) + 0x44) + -1;
            }
            bVar3 = 0xfffffffe < DAT_00075000;
            DAT_00075000 = DAT_00075000 + 1;
            DAT_00075004 = DAT_00075004 + (uint)bVar3;
            if ((DAT_000686e1 != '\0') &&
                (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
                  (6 < DAT_00067858)))) {
                builtin_strncpy(local_818, "Discarded wo", 0xc);
                uStack_80c._0_3_ = 0x6b72;
                FUN_0001dbec(7, local_818, 0);
            }
        } else if ((DAT_000686e1 != '\0') &&
                   (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
                     (6 < DAT_00067858)))) {
            builtin_strncpy(local_818, "Discarded cl", 0xc);
            uStack_80c._0_1_ = 'o';
            uStack_80c._1_1_ = 'n';
            uStack_80c._2_1_ = 'e';
            uStack_80c._3_1_ = 'd';
            builtin_strncpy(local_808, " or rolled work", 0x10);
            FUN_0001dbec(7, local_818, 0);
        }
        FUN_0002a9d4(param_1, param_2, param_3, param_4);
    }
    return;
}

void FUN_0002af08(int *param_1)

{
    undefined4 *puVar1;
    int iVar2;
    int *piVar3;
    int iVar5;
    int iVar6;
    int iVar7;
    int iVar8;
    int *piVar9;
    int *piVar4;

    iVar7 = DAT_00072e58;
    iVar8 = DAT_00072e58 + -1;
    if (0 < DAT_00072e58) {
        piVar9 = DAT_00072efc + DAT_00072e58;
        piVar3 = DAT_00072efc;
        do {
            piVar4 = piVar3 + 1;
            iVar6 = *(int *)(*piVar3 + 4);
            if (param_1[1] < iVar6) {
                *(int *)(*piVar3 + 4) = iVar6 + -1;
            }
            piVar3 = piVar4;
        } while (piVar9 != piVar4);
    }
    iVar6 = *param_1;
    if (iVar6 < iVar8) {
        iVar5 = (iVar6 + 1) * 4;
        iVar7 = iVar6 + 1;
        while (true) {
            iVar2 = iVar7;
            iVar7 = iVar5 + -4;
            puVar1 = (undefined4 *)((int)DAT_00072efc + iVar5);
            iVar5 = iVar5 + 4;
            *(undefined4 *)((int)DAT_00072efc + iVar7) = *puVar1;
            **(int **)((int)DAT_00072efc + iVar7) = iVar6;
            iVar7 = DAT_00072e58;
            if (iVar2 == iVar8)
                break;
            iVar7 = iVar2 + 1;
            iVar6 = iVar2;
        }
    }
    *param_1 = iVar7;
    *(undefined1 *)((int)param_1 + 0x69) = 1;
    DAT_00072e58 = DAT_00072e58 + -1;
    return;
}

void FUN_0002afc4(FILE *param_1)

{
    char cVar1;
    undefined4 *puVar2;
    int iVar3;
    undefined2 *puVar4;
    undefined4 uVar5;
    char *__s;
    char *pcVar6;
    uint uVar7;
    undefined2 *puVar8;
    code *pcVar9;
    int iVar10;
    undefined4 *puVar11;
    int iVar12;
    undefined2 *puVar13;
    undefined1 *local_30;
    undefined1 *local_2c;

    fwrite(&DAT_00051d84, 1, 0xd, param_1);
    if (0 < DAT_00072e58) {
        iVar12 = 0;
        do {
            iVar3 = FUN_000293b0(iVar12);
            iVar10 = *(int *)(iVar3 + 0x38);
            if (iVar10 == 1) {
                puVar13 = (undefined2 *)&DAT_0004d488;
                if (iVar12 != 0) {
                    puVar13 = &DAT_00051e08;
                }
                puVar8 = (undefined2 *)&DAT_0004d488;
                puVar4 = (undefined2 *)&DAT_0004d488;
                if (*(int *)(iVar3 + 0xb8) == 0) {
                    local_30 = &DAT_0004d488;
                } else {
                    FUN_0001f8b4(*(undefined4 *)(iVar3 + 0xb4));
                    local_30 = (undefined1 *)FUN_00028924();
                    if (*(int *)(iVar3 + 0xb8) != 0) {
                        puVar4 = (undefined2 *)FUN_00028924();
                        puVar8 = (undefined2 *)&DAT_00051a6c;
                        if (*(int *)(iVar3 + 0xb8) == 0) {
                            puVar8 = (undefined2 *)&DAT_0004d488;
                        }
                    }
                }
                uVar5 = FUN_00028924(*(undefined4 *)(iVar3 + 0xa4));
                fprintf(param_1, "%s\n\t{\n\t\t\"url\" : \"%s%s%s%s\",",
                        puVar13, local_30, puVar4, puVar8, uVar5);
                cVar1 = *(char *)(iVar3 + 0x244);
            } else {
                puVar13 = (undefined2 *)&DAT_0004d488;
                if (iVar12 != 0) {
                    puVar13 = &DAT_00051e08;
                }
                puVar8 = (undefined2 *)&DAT_0004d488;
                if (*(int *)(iVar3 + 0xb8) == 0) {
                    puVar4 = (undefined2 *)&DAT_0004d488;
                    local_2c = &DAT_0004d488;
                } else {
                    FUN_0001f8b4(*(undefined4 *)(iVar3 + 0xb4));
                    local_2c = (undefined1 *)FUN_00028924();
                    if (*(int *)(iVar3 + 0xb8) == 0) {
                        iVar10 = *(int *)(iVar3 + 0x38);
                        puVar4 = (undefined2 *)&DAT_0004d488;
                    } else {
                        puVar4 = (undefined2 *)FUN_00028924();
                        iVar10 = *(int *)(iVar3 + 0x38);
                        puVar8 = (undefined2 *)&DAT_00051a6c;
                        if (*(int *)(iVar3 + 0xb8) == 0) {
                            puVar8 = (undefined2 *)&DAT_0004d488;
                        }
                    }
                }
                uVar5 = FUN_00028924(*(undefined4 *)(iVar3 + 0xa4));
                fprintf(param_1, "%s\n\t{\n\t\t\"quota\" : \"%s%s%s%d;%s\",",
                        puVar13, local_2c, puVar4, puVar8, iVar10, uVar5);
                cVar1 = *(char *)(iVar3 + 0x244);
            }
            if (cVar1 != '\0') {
                fwrite("\n\t\t\"extranonce-subscribe\" : true,", 1, 0x21,
                       param_1);
            }
            iVar12 = iVar12 + 1;
            uVar5 = FUN_00028924(*(undefined4 *)(iVar3 + 0xac));
            fprintf(param_1, "\n\t\t\"user\" : \"%s\",", uVar5);
            uVar5 = FUN_00028924(*(undefined4 *)(iVar3 + 0xb0));
            fprintf(param_1, "\n\t\t\"pass\" : \"%s\"\n\t}", uVar5);
        } while (iVar12 < DAT_00072e58);
    }
    fwrite(&DAT_00051e20, 1, 3, param_1);
    puVar2 = &DAT_00067a80;
    iVar12 = DAT_00067a84;
    do {
        if (iVar12 == 0x10) {
            if (DAT_00068ae4 == 4) {
                fwrite(",\n\"balance\" : true", 1, 0x12, param_1);
            }
            if (DAT_00068ae4 == 3) {
                fwrite(",\n\"load-balance\" : true", 1, 0x17, param_1);
            }
            if (DAT_00068ae4 == 1) {
                fwrite(",\n\"round-robin\" : true", 1, 0x16, param_1);
            }
            if (DAT_00068ae4 == 2) {
                fprintf(param_1, ",\n\"rotate\" : \"%d\"", DAT_00073f14);
            }
            fwrite(&DAT_00051ebc, 1, 3, param_1);
            puVar2 = DAT_00068900;
            DAT_00068900 = (undefined4 *)0x0;
            while (puVar2 != (undefined4 *)0x0) {
                puVar11 = (undefined4 *)puVar2[1];
                free((void *)*puVar2);
                free(puVar2);
                puVar2 = puVar11;
            }
            return;
        }
        __s = (char *)__strdup(*puVar2);
        pcVar6 = strtok(__s, "|");
        while (pcVar6 != (char *)0x0) {
            if ((pcVar6[1] == '-') &&
                ((undefined4 *)puVar2[6] != &DAT_000762f4)) {
                uVar7 = puVar2[1];
                if ((uVar7 & 1) != 0) {
                    pcVar9 = (code *)puVar2[2];
                    if ((pcVar9 == FUN_0003e6a0 ||
                         pcVar9 == (code *)&UNK_0003e6c0) &&
                        ((bool)*(char *)puVar2[5] ==
                         (pcVar9 == FUN_0003e6a0))) {
                        fprintf(param_1, ",\n\"%s\" : true", pcVar6 + 2);
                        goto LAB_0002b368;
                    }
                }
                if ((uVar7 & 2) == 0) {
                LAB_0002b3e4:
                    if ((((uVar7 & 6) != 0) &&
                         ((int *)puVar2[5] != (int *)&DAT_00068afc)) &&
                        (*(int *)puVar2[5] != 0)) {
                        uVar5 = FUN_00028924();
                        fprintf(param_1, ",\n\"%s\" : \"%s\"", pcVar6 + 2,
                                uVar5);
                    }
                } else {
                    pcVar9 = (code *)puVar2[3];
                    if (pcVar9 == FUN_00029f40 ||
                        (pcVar9 == FUN_00029f70 ||
                         (pcVar9 == FUN_00029fa0 ||
                          (pcVar9 == FUN_00029fd0 ||
                           (pcVar9 == FUN_0002a000 ||
                            (pcVar9 == FUN_0002a030 ||
                             (pcVar9 == FUN_0002a05c ||
                              (pcVar9 == FUN_0002a088 ||
                               (pcVar9 == FUN_0002a0b4 ||
                                (pcVar9 == FUN_0002a0e4 ||
                                 (pcVar9 == FUN_0002a110 ||
                                  (pcVar9 == FUN_0002a13c ||
                                   (pcVar9 == FUN_0002a16c ||
                                    (pcVar9 == FUN_00029f0c ||
                                     (pcVar9 == FUN_00029edc ||
                                      pcVar9 == FUN_0003e8a0))))))))))))))) {
                        fprintf(param_1, ",\n\"%s\" : \"%d\"", pcVar6 + 2,
                                *(undefined4 *)puVar2[5]);
                    } else {
                        if (pcVar9 != FUN_00029a80 && pcVar9 != FUN_00029a28)
                            goto LAB_0002b3e4;
                        fprintf(param_1, ",\n\"%s\" : \"%.1f\"", pcVar6 + 2,
                                (float *)puVar2[5],
                                (double)*(float *)puVar2[5]);
                    }
                }
            }
        LAB_0002b368:
            pcVar6 = strtok((char *)0x0, "|");
        }
        free(__s);
        iVar12 = puVar2[8];
        puVar2 = puVar2 + 7;
    } while (true);
}

void FUN_0002b5ac(void)

{
    int *piVar1;
    int iVar3;
    int *piVar4;
    int *piVar2;

    DAT_000681c8 = 0;
    DAT_000681cc = 0;
    DAT_00068b00 = 0;
    DAT_00068b04 = 0;
    FUN_00028aa0(0, 0, &DAT_000681c8, 8, 0);
    if (0 < DAT_00072e58) {
        piVar4 = DAT_00072efc + DAT_00072e58;
        piVar1 = DAT_00072efc;
        do {
            piVar2 = piVar1 + 1;
            iVar3 = *piVar1;
            *(undefined4 *)(iVar3 + 0x170) = 0;
            *(undefined4 *)(iVar3 + 0x174) = 0;
            piVar1 = piVar2;
        } while (piVar2 != piVar4);
    }
    return;
}

void FUN_0002b644(char *param_1)

{
    char *pcVar1;
    size_t sVar2;

    if ((DAT_00074ff4 != (char *)0x0) && (*DAT_00074ff4 != '\0')) {
        strcpy(param_1, DAT_00074ff4);
        return;
    }
    pcVar1 = getenv("HOME");
    if ((pcVar1 == (char *)0x0) || (pcVar1 = getenv("HOME"), *pcVar1 == '\0')) {
        *param_1 = '\0';
    } else {
        pcVar1 = getenv("HOME");
        pcVar1 = stpcpy(param_1, pcVar1);
        pcVar1[0] = '/';
        pcVar1[1] = '\0';
    }
    sVar2 = strlen(param_1);
    builtin_strncpy(param_1 + sVar2, ".bmminer/", 10);
    mkdir(param_1, 0x1ff);
    sVar2 = strlen(param_1);
    builtin_strncpy(param_1 + sVar2, "bmminer.conf", 0xd);
    return;
}

void FUN_0002b740(void)

{
    int iVar1;

    DAT_00068a08 =
        (char *)FUN_0001f708(0x1000, "cgminer.c", "load_default_config", 0x885);
    DAT_00068a0c = 0;
    FUN_0002b644();
    iVar1 = access(DAT_00068a08, 4);
    if (iVar1 != 0) {
        free(DAT_00068a08);
        DAT_00068a08 = (char *)0x0;
        return;
    }
    FUN_00029418();
    return;
}

void FUN_0002b7a4(undefined4 param_1)

{
    void *__ptr;
    double in_d0;
    double dVar1;
    double dVar2;
    undefined8 uVar3;
    undefined8 local_850;
    undefined8 local_848;
    undefined8 local_840;
    undefined8 local_838;
    char local_830[28];
    undefined2 uStack_814;
    undefined1 local_812;

    if (in_d0 == 0.0) {
        if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
            (DAT_00067858 < 3)) {
            local_850 = 0;
            local_848 = 0;
            local_840 = 0;
            uVar3 = 0xffff0000;
        } else {
            uVar3 = 0xffff0000;
            builtin_strncpy(local_830, "Diff zero passed to set_targ", 0x1c);
            uStack_814 = 0x7465;
            local_812 = 0;
            FUN_0001dbec(3, local_830, 0);
            local_850 = 0;
            local_848 = 0;
            local_840 = 0;
        }
    } else {
        dVar1 = (2.695953529101131e+67 / in_d0) * 1.5930919111324523e-58;
        uVar3 = FUN_0004ada0(SUB84(dVar1, 0), (int)((ulonglong)dVar1 >> 0x20));
        dVar1 = (double)FUN_0004acd4();
        dVar2 = 2.695953529101131e+67 / in_d0 - dVar1 * 6.277101735386681e+57;
        dVar1 = dVar2 * 2.938735877055719e-39;
        local_840 =
            FUN_0004ada0(SUB84(dVar1, 0), (int)((ulonglong)dVar1 >> 0x20));
        dVar1 = (double)FUN_0004acd4();
        dVar2 = dVar2 - dVar1 * 3.402823669209385e+38;
        dVar1 = dVar2 * 5.421010862427522e-20;
        local_848 =
            FUN_0004ada0(SUB84(dVar1, 0), (int)((ulonglong)dVar1 >> 0x20));
        dVar1 = (double)FUN_0004acd4();
        dVar2 = dVar2 - dVar1 * 1.8446744073709552e+19;
        local_850 =
            FUN_0004ada0(SUB84(dVar2, 0), (int)((ulonglong)dVar2 >> 0x20));
    }
    local_838 = uVar3;
    if (DAT_000686e1 != '\0') {
        __ptr = (void *)FUN_0001f970(&local_850, 0x20);
        if ((DAT_000686e1 != '\0') &&
            (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
              (6 < DAT_00067858)))) {
            snprintf(local_830, 0x800, "Generated target %s", __ptr);
            FUN_0001dbec(7, local_830, 0);
        }
        free(__ptr);
    }
    FUN_000231cc(param_1, &local_850, 0x20, "cgminer.c", "set_target", 0x20ad);
    return;
}

bool FUN_0002ba54(int param_1, undefined4 param_2)

{
    *(undefined4 *)(param_1 + 0x4c) = param_2;
    FUN_00028ef8();
    return *(int *)(param_1 + 0xdc) == 0;
}

uint FUN_0002ba74(int param_1, undefined4 param_2)

{
    uint uVar1;
    uint uVar2;
    uint uVar3;
    uint uVar4;
    bool bVar5;
    bool bVar6;
    double in_d0;
    longlong lVar7;

    *(undefined4 *)(param_1 + 0x4c) = param_2;
    FUN_00028ef8();
    lVar7 = FUN_0004ada0(SUB84(4294901760.0 / in_d0, 0),
                         (int)((ulonglong)(4294901760.0 / in_d0) >> 0x20));
    uVar2 = (uint)((ulonglong)lVar7 >> 0x20);
    uVar1 = (uint)lVar7;
    uVar3 = *(uint *)(param_1 + 0xd8);
    uVar4 = *(uint *)(param_1 + 0xdc);
    bVar6 = uVar2 <= uVar4;
    if (uVar4 == uVar2) {
        bVar6 = uVar1 <= uVar3;
    }
    bVar5 = uVar3 != uVar1;
    if (!bVar6 || lVar7 == *(longlong *)(param_1 + 0xd8)) {
        uVar1 = 1;
    }
    if (bVar6 && (uVar4 != uVar2 || bVar5)) {
        uVar1 = 0;
    }
    return uVar1;
}

undefined4 FUN_0002bac0(int param_1, int param_2)

{
    int iVar1;
    char acStack_808[2052];

    iVar1 = *(int *)(param_1 + 0x24);
    if (*(int *)(iVar1 + 0xec) != param_2) {
        *(int *)(iVar1 + 0xec) = param_2;
        return 1;
    }
    if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
        (DAT_00067858 < 6)) {
        return 0;
    }
    snprintf(acStack_808, 0x800, "%s %d duplicate share detected as HW error",
             *(undefined4 *)(*(int *)(iVar1 + 4) + 8),
             *(undefined4 *)(iVar1 + 8));
    FUN_0001dbec(6, acStack_808, 0);
    return 0;
}

void FUN_0002bb64(undefined4 *param_1, undefined4 param_2)

{
    void *__ptr;
    void *__ptr_00;
    void *__ptr_01;
    void *__ptr_02;
    void *__ptr_03;
    void *__ptr_04;
    void *__ptr_05;
    void *__ptr_06;
    size_t __size;
    undefined4 uVar1;
    undefined4 uVar2;
    undefined4 uVar3;
    undefined4 *puVar4;
    undefined4 *puVar5;
    undefined4 *puVar6;
    undefined4 local_4c8;
    undefined4 uStack_4c4;
    undefined4 uStack_4c0;
    undefined4 uStack_4bc;
    undefined4 local_4b8;
    undefined4 uStack_4b4;
    undefined4 uStack_4b0;
    undefined4 uStack_4ac;
    undefined4 local_4a8;
    undefined4 uStack_4a4;
    undefined4 uStack_4a0;
    undefined4 local_49c;
    undefined4 uStack_498;
    undefined4 local_494;
    undefined4 local_490;
    undefined4 local_48c;
    undefined4 local_488;
    undefined4 uStack_484;
    undefined4 uStack_480;
    undefined4 uStack_47c;
    undefined4 local_478;
    undefined4 uStack_474;
    undefined4 uStack_470;
    undefined4 uStack_46c;
    undefined4 local_468[16];
    char acStack_428[1028];

    if (DAT_00068b08 == (FILE *)0x0) {
        DAT_00068b08 = fopen64("/nvdata/worklog.txt", "wb");
    }
    memset(acStack_428, 0, 0x400);
    local_49c = 0;
    uStack_498 = 0;
    local_494 = 0;
    local_490 = 0;
    local_48c = 0;
    puVar4 = local_468;
    puVar6 = param_1;
    do {
        puVar5 = puVar6;
        puVar6 = puVar5 + 4;
        uVar1 = puVar5[1];
        uVar2 = puVar5[2];
        uVar3 = puVar5[3];
        *puVar4 = *puVar5;
        puVar4[1] = uVar1;
        puVar4[2] = uVar2;
        puVar4[3] = uVar3;
        puVar4 = puVar4 + 4;
    } while (puVar6 != param_1 + 0x10);
    local_4c8 = param_1[0x20];
    uStack_4c4 = param_1[0x21];
    uStack_4c0 = param_1[0x22];
    uStack_4bc = param_1[0x23];
    local_4b8 = param_1[0x24];
    uStack_4b4 = param_1[0x25];
    uStack_4b0 = param_1[0x26];
    uStack_4ac = param_1[0x27];
    local_4a8 = *puVar6;
    uStack_4a4 = puVar5[5];
    uStack_4a0 = puVar5[6];
    local_488 = param_1[0x30];
    uStack_484 = param_1[0x31];
    uStack_47c = param_1[0x33];
    uStack_480 = param_1[0x32];
    local_478 = param_1[0x34];
    uStack_474 = param_1[0x35];
    uStack_470 = param_1[0x36];
    uStack_46c = param_1[0x37];
    FUN_00027a9c(local_468, 0x40);
    FUN_00027a9c(&local_4c8, 0x20);
    FUN_00027a9c(&local_4a8, 0xc);
    FUN_00027a9c(&local_488, 0x20);
    __ptr = (void *)FUN_0001f970(param_1, 0x80);
    __ptr_00 = (void *)FUN_0001f970(local_468, 0x40);
    __ptr_01 = (void *)FUN_0001f970(&local_4c8, 0x20);
    __ptr_02 = (void *)FUN_0001f970(&local_4a8, 0xc);
    __ptr_03 = (void *)FUN_0001f970(param_2, 4);
    __ptr_04 = (void *)FUN_0001f970(param_2, 5);
    __ptr_05 = (void *)FUN_0001f970(&local_488, 0x20);
    __ptr_06 = (void *)FUN_0001f970(param_1 + 0x6f, 4);
    sprintf(acStack_428, "midstate %s data %s nonce %s version %s \r\n",
            __ptr_01, __ptr_02, __ptr_03, __ptr_06);
    __size = strlen(acStack_428);
    fwrite(acStack_428, __size, 1, DAT_00068b08);
    fflush(DAT_00068b08);
    if (__ptr != (void *)0x0) {
        free(__ptr);
    }
    if (__ptr_00 != (void *)0x0) {
        free(__ptr_00);
    }
    if (__ptr_01 != (void *)0x0) {
        free(__ptr_01);
    }
    if (__ptr_02 != (void *)0x0) {
        free(__ptr_02);
    }
    if (__ptr_03 != (void *)0x0) {
        free(__ptr_03);
    }
    if (__ptr_04 != (void *)0x0) {
        free(__ptr_04);
    }
    if (__ptr_05 != (void *)0x0) {
        free(__ptr_05);
    }
    if (__ptr_06 != (void *)0x0) {
        free(__ptr_06);
    }
    return;
}

void FUN_0002be18(void)

{
    FUN_0002bb64();
    return;
}

bool FUN_0002be40(int param_1, undefined4 param_2)

{
    bool bVar1;

    *(undefined4 *)(param_1 + 0x4c) = param_2;
    FUN_00028ef8();
    bVar1 = *(int *)(param_1 + 0xdc) == 0;
    if (bVar1) {
        FUN_0002bb64(param_1);
    }
    return bVar1;
}

void FUN_0002be8c(int param_1, int param_2)

{
    void *pvVar1;
    uint uVar2;
    uint uVar3;
    int iVar4;
    int *piVar5;
    uint uVar6;
    undefined4 uVar7;
    int iVar8;
    int iVar9;
    undefined4 *puVar10;
    int iVar11;
    uint local_2c;

    *(int *)(param_1 + 0x168) = *(int *)(param_1 + 0x168) + 1;
    *(int *)(param_2 + 0x16c) = param_2 + 0x154;
    *(undefined4 *)(param_2 + 0x170) = 4;
    uVar2 = *(byte *)(param_2 + 0x154) + 0x112410d +
                (uint) * (byte *)(param_2 + 0x157) * 0x1000000 +
                (uint) * (byte *)(param_2 + 0x156) * 0x10000 +
                (uint) * (byte *)(param_2 + 0x155) * 0x100 ^
            0x7f76d;
    uVar6 = 0x9f49bac6 - uVar2 ^ uVar2 << 8;
    uVar3 = (-0x112410d - uVar2) - uVar6 ^ uVar6 >> 0xd;
    uVar2 = (uVar2 - uVar6) - uVar3 ^ uVar3 >> 0xc;
    uVar6 = (uVar6 - uVar3) - uVar2 ^ uVar2 << 0x10;
    uVar3 = (uVar3 - uVar2) - uVar6 ^ uVar6 >> 5;
    uVar2 = (uVar2 - uVar6) - uVar3 ^ uVar3 >> 3;
    uVar6 = (uVar6 - uVar3) - uVar2 ^ uVar2 << 10;
    uVar2 = (uVar3 - uVar2) - uVar6 ^ uVar6 >> 0xf;
    *(uint *)(param_2 + 0x174) = uVar2;
    if (*(int *)(param_1 + 0x160) == 0) {
        *(undefined4 *)(param_2 + 0x160) = 0;
        *(undefined4 *)(param_2 + 0x15c) = 0;
        *(int *)(param_1 + 0x160) = param_2;
        pvVar1 = malloc(0x2c);
        *(void **)(param_2 + 0x158) = pvVar1;
        pvVar1 = *(void **)(*(int *)(param_1 + 0x160) + 0x158);
        if (pvVar1 == (void *)0x0)
            goto LAB_0002c2bc;
        memset(pvVar1, 0, 0x2c);
        piVar5 = (int *)(*(int *)(param_1 + 0x160) + 0x158);
        *(int **)(*piVar5 + 0x10) = piVar5;
        *(undefined4 *)(*(int *)(*(int *)(param_1 + 0x160) + 0x158) + 4) = 0x20;
        *(undefined4 *)(*(int *)(*(int *)(param_1 + 0x160) + 0x158) + 8) = 5;
        *(undefined4 *)(*(int *)(*(int *)(param_1 + 0x160) + 0x158) + 0x14) =
            0x158;
        puVar10 = *(undefined4 **)(*(int *)(param_1 + 0x160) + 0x158);
        pvVar1 = malloc(0x180);
        *puVar10 = pvVar1;
        pvVar1 = (void *)**(undefined4 **)(*(int *)(param_1 + 0x160) + 0x158);
        if (pvVar1 == (void *)0x0)
            goto LAB_0002c2bc;
        memset(pvVar1, 0, 0x180);
        *(undefined4 *)(*(int *)(*(int *)(param_1 + 0x160) + 0x158) + 0x28) =
            0xa0111fe1;
    } else {
        uVar7 = *(undefined4 *)(*(int *)(param_1 + 0x160) + 0x158);
        *(undefined4 *)(param_2 + 0x160) = 0;
        *(undefined4 *)(param_2 + 0x158) = uVar7;
        iVar4 = *(int *)(*(int *)(param_1 + 0x160) + 0x158);
        *(int *)(param_2 + 0x15c) =
            *(int *)(iVar4 + 0x10) - *(int *)(iVar4 + 0x14);
        *(int *)(*(int *)(*(int *)(*(int *)(param_1 + 0x160) + 0x158) + 0x10) +
                 8) = param_2;
        *(int *)(*(int *)(*(int *)(param_1 + 0x160) + 0x158) + 0x10) =
            param_2 + 0x158;
    }
    iVar4 = *(int *)(*(int *)(param_1 + 0x160) + 0x158);
    *(int *)(iVar4 + 0xc) = *(int *)(iVar4 + 0xc) + 1;
    piVar5 = *(int **)(*(int *)(param_1 + 0x160) + 0x158);
    iVar4 = (uVar2 & piVar5[1] - 1U) * 0xc;
    iVar8 = *piVar5 + iVar4;
    *(int *)(iVar8 + 4) = *(int *)(iVar8 + 4) + 1;
    uVar7 =
        *(undefined4 *)(**(int **)(*(int *)(param_1 + 0x160) + 0x158) + iVar4);
    *(undefined4 *)(param_2 + 0x164) = 0;
    *(undefined4 *)(param_2 + 0x168) = uVar7;
    iVar8 = **(int **)(*(int *)(param_1 + 0x160) + 0x158);
    if (*(int *)(iVar8 + iVar4) != 0) {
        *(int *)(*(int *)(iVar8 + iVar4) + 0xc) = param_2 + 0x158;
        iVar8 = **(int **)(*(int *)(param_1 + 0x160) + 0x158);
    }
    *(int *)(iVar8 + iVar4) = param_2 + 0x158;
    iVar4 = **(int **)(*(int *)(param_1 + 0x160) + 0x158) + iVar4;
    if (((uint)((*(int *)(iVar4 + 8) + 1) * 10) <= *(uint *)(iVar4 + 4)) &&
        (iVar4 = *(int *)(param_2 + 0x158), *(int *)(iVar4 + 0x24) != 1)) {
        pvVar1 = calloc(*(int *)(iVar4 + 4) * 0x18, 1);
        if (pvVar1 == (void *)0x0) {
        LAB_0002c2bc:
            /* WARNING: Subroutine does not return */
            exit(-1);
        }
        iVar8 = 0;
        *(uint *)(iVar4 + 0x18) =
            (uint)((*(int *)(iVar4 + 4) * 2 - 1U & *(uint *)(iVar4 + 0xc)) !=
                   0) +
            (*(uint *)(iVar4 + 0xc) >> (*(int *)(iVar4 + 8) + 1U & 0xff));
        *(undefined4 *)(*(int *)(param_2 + 0x158) + 0x1c) = 0;
        piVar5 = *(int **)(param_2 + 0x158);
        uVar2 = piVar5[1];
        if (uVar2 != 0) {
            local_2c = 0;
            do {
                iVar4 = *(int *)(*piVar5 + iVar8);
                if (*(int *)(*piVar5 + iVar8) != 0) {
                    while (true) {
                        iVar11 = *(int *)(iVar4 + 0x10);
                        uVar3 = uVar2 * 2 - 1 & *(uint *)(iVar4 + 0x1c);
                        uVar2 = *(int *)((int)pvVar1 + uVar3 * 0xc + 4) + 1;
                        *(uint *)((int)pvVar1 + uVar3 * 0xc + 4) = uVar2;
                        if ((uint)piVar5[6] < uVar2) {
                            piVar5[7] = piVar5[7] + 1;
                            uVar7 = FUN_0004a4a0(
                                *(undefined4 *)((int)pvVar1 + uVar3 * 0xc + 4),
                                *(undefined4 *)(*(int *)(param_2 + 0x158) +
                                                0x18));
                            *(undefined4 *)((int)pvVar1 + uVar3 * 0xc + 8) =
                                uVar7;
                        }
                        *(undefined4 *)(iVar4 + 0xc) = 0;
                        *(undefined4 *)(iVar4 + 0x10) =
                            *(undefined4 *)((int)pvVar1 + uVar3 * 0xc);
                        iVar9 = *(int *)((int)pvVar1 + uVar3 * 0xc);
                        if (iVar9 != 0) {
                            *(int *)(iVar9 + 0xc) = iVar4;
                        }
                        *(int *)((int)pvVar1 + uVar3 * 0xc) = iVar4;
                        piVar5 = *(int **)(param_2 + 0x158);
                        if (iVar11 == 0)
                            break;
                        uVar2 = piVar5[1];
                        iVar4 = iVar11;
                    }
                    uVar2 = piVar5[1];
                }
                iVar8 = iVar8 + 0xc;
                local_2c = local_2c + 1;
            } while (local_2c < uVar2);
        }
        free((void *)*piVar5);
        *(int *)(*(int *)(param_2 + 0x158) + 4) =
            *(int *)(*(int *)(param_2 + 0x158) + 4) << 1;
        *(int *)(*(int *)(param_2 + 0x158) + 8) =
            *(int *)(*(int *)(param_2 + 0x158) + 8) + 1;
        **(undefined4 **)(param_2 + 0x158) = pvVar1;
        iVar4 = *(int *)(param_2 + 0x158);
        if (*(uint *)(iVar4 + 0xc) >> 1 < *(uint *)(iVar4 + 0x1c)) {
            iVar8 = *(int *)(iVar4 + 0x20) + 1;
        } else {
            iVar8 = 0;
        }
        *(int *)(iVar4 + 0x20) = iVar8;
        if (1 < *(uint *)(*(int *)(param_2 + 0x158) + 0x20)) {
            *(undefined4 *)(*(int *)(param_2 + 0x158) + 0x24) = 1;
        }
    }
    return;
}

int FUN_0002c2c4(int param_1, void *param_2, size_t param_3, void *param_4,
                 int param_5, size_t param_6)

{
    int iVar1;
    int iVar2;

    if (param_1 != 0) {
        iVar2 = *(int *)(param_1 + 0x160);
        while (true) {
            iVar1 = memcmp((void *)(param_1 + 0x80), param_2, param_3);
            if (((iVar1 == 0) &&
                 (iVar1 = memcmp((void *)(param_1 + param_5), param_4, param_6),
                  iVar1 == 0)) ||
                (param_1 = iVar2, iVar2 == 0))
                break;
            iVar2 = *(int *)(iVar2 + 0x160);
        }
    }
    return param_1;
}

void FUN_0002c380(int param_1, int param_2)

{
    int iVar1;
    int *piVar2;
    int iVar3;
    int iVar4;
    undefined4 *puVar5;

    *(int *)(param_1 + 0x168) = *(int *)(param_1 + 0x168) + -1;
    iVar1 = *(int *)(param_2 + 0x15c);
    if (iVar1 == 0) {
        iVar4 = *(int *)(param_2 + 0x160);
        puVar5 = *(undefined4 **)(*(int *)(param_1 + 0x160) + 0x158);
        if (iVar4 == 0) {
            free((void *)*puVar5);
            free(*(void **)(*(int *)(param_1 + 0x160) + 0x158));
            *(undefined4 *)(param_1 + 0x160) = 0;
            return;
        }
        iVar3 = puVar5[5];
        if (param_2 == puVar5[4] - iVar3)
            goto LAB_0002c474;
    LAB_0002c4c0:
        *(int *)(param_1 + 0x160) = iVar4;
    } else {
        puVar5 = *(undefined4 **)(*(int *)(param_1 + 0x160) + 0x158);
        iVar3 = puVar5[5];
        if (param_2 == puVar5[4] - iVar3) {
        LAB_0002c474:
            puVar5[4] = iVar1 + iVar3;
            iVar1 = *(int *)(param_2 + 0x15c);
            if (iVar1 == 0) {
                iVar4 = *(int *)(param_2 + 0x160);
                goto LAB_0002c4c0;
            }
            iVar3 =
                *(int *)(*(int *)(*(int *)(param_1 + 0x160) + 0x158) + 0x14);
        }
        *(undefined4 *)(iVar1 + iVar3 + 8) = *(undefined4 *)(param_2 + 0x160);
        iVar4 = *(int *)(param_1 + 0x160);
    }
    piVar2 = *(int **)(iVar4 + 0x158);
    if (*(int *)(param_2 + 0x160) != 0) {
        *(undefined4 *)(*(int *)(param_2 + 0x160) + piVar2[5] + 4) =
            *(undefined4 *)(param_2 + 0x15c);
        piVar2 = *(int **)(*(int *)(param_1 + 0x160) + 0x158);
    }
    iVar1 = (piVar2[1] - 1U & *(uint *)(param_2 + 0x174)) * 0xc;
    *(int *)(*piVar2 + iVar1 + 4) = *(int *)(*piVar2 + iVar1 + 4) + -1;
    iVar4 = **(int **)(*(int *)(param_1 + 0x160) + 0x158);
    if (*(int *)(iVar4 + iVar1) == param_2 + 0x158) {
        *(undefined4 *)(iVar4 + iVar1) = *(undefined4 *)(param_2 + 0x168);
    }
    iVar1 = *(int *)(param_2 + 0x168);
    if (*(int *)(param_2 + 0x164) != 0) {
        *(int *)(*(int *)(param_2 + 0x164) + 0x10) = iVar1;
        iVar1 = *(int *)(param_2 + 0x168);
    }
    if (iVar1 != 0) {
        *(undefined4 *)(iVar1 + 0xc) = *(undefined4 *)(param_2 + 0x164);
    }
    iVar1 = *(int *)(*(int *)(param_1 + 0x160) + 0x158);
    *(int *)(iVar1 + 0xc) = *(int *)(iVar1 + 0xc) + -1;
    return;
}

void FUN_0002c508(int param_1, int param_2)

{
    int iVar1;
    pthread_t local_c[2];

    iVar1 = pthread_create(local_c, (pthread_attr_t *)0x0, FUN_00029230,
                           (void *)0x0);
    if (iVar1 == 0) {
        if (param_2 != 0) {
            FUN_0002f6fc();
        }
        if (0 < DAT_00068b0c) {
            kill(DAT_00068b0c, 0xf);
            DAT_00068b0c = 0;
        }
        pthread_cancel(local_c[0]);
        /* WARNING: Subroutine does not return */
        exit(param_1);
    }
    /* WARNING: Subroutine does not return */
    exit(1);
}

void FUN_0002c588(void)

{
    char local_808[24];
    undefined2 local_7f0;

    FUN_00023100(&LAB_0002fd2c, 0, 5000);
    builtin_strncpy(local_808, "Shutdown signal received", 0x18);
    local_7f0 = 0x2e;
    FUN_0001dbec(3, local_808, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(0, 1);
}

void FUN_0002c628(char *param_1, uint param_2, int param_3)

{
    size_t sVar1;
    size_t sVar2;
    undefined4 uVar3;
    undefined4 uVar4;
    undefined4 uVar5;
    undefined4 extraout_s1;
    double dVar6;
    undefined8 uVar7;
    undefined8 uVar8;
    undefined1 auStack_8a0[16];
    undefined1 auStack_890[16];
    char acStack_880[64];
    char acStack_840[2052];

    uVar5 = FUN_0002aa68(param_3);
    FUN_0004ace4(*(undefined4 *)(param_3 + 0xc0),
                 *(undefined4 *)(param_3 + 0xc4));
    dVar6 = *(double *)(param_3 + 0x30) * 1000000.0;
    uVar7 = FUN_0004ada0(SUB84(dVar6, 0), (int)((ulonglong)dVar6 >> 0x20));
    dVar6 =
        (*(double *)(param_3 + 0x50) / (double)CONCAT44(extraout_s1, uVar5)) *
        1000000.0;
    uVar8 = FUN_0004ada0(SUB84(dVar6, 0), (int)((ulonglong)dVar6 >> 0x20));
    FUN_00028aa0((int)uVar8, (int)((ulonglong)uVar8 >> 0x20), auStack_8a0, 0x10,
                 4);
    FUN_00028aa0((int)uVar7, (int)((ulonglong)uVar7 >> 0x20), auStack_890, 0x10,
                 4);
    snprintf(param_1, param_2, "%s%d ",
             *(undefined4 *)(*(int *)(param_3 + 4) + 8),
             *(undefined4 *)(param_3 + 8));
    (**(code **)(*(int *)(param_3 + 4) + 0x14))(param_1, param_2, param_3);
    sVar1 = strlen(param_1);
    uVar5 = *(undefined4 *)(param_3 + 0x2c);
    uVar7 = *(undefined8 *)(param_3 + 0xd0);
    uVar3 = *(undefined4 *)(param_3 + 200);
    uVar4 = *(undefined4 *)(param_3 + 0xcc);
    snprintf(acStack_880, 0x40,
             "(%ds):%s (avg):%sh/s | A:%.0f R:%.0f HW:%d WU:%.1f/m",
             DAT_000681d0, auStack_890, auStack_8a0, uVar3, uVar4, uVar7,
             uVar5);
    sVar2 = strlen(acStack_880);
    if (sVar1 + sVar2 < param_2) {
        strcat(param_1, acStack_880);
        (**(code **)(*(int *)(param_3 + 4) + 0x18))(param_1, param_2, param_3);
        return;
    }
    snprintf(acStack_840, 0x800, "tailsprintf buffer overflow in %s %s line %d",
             "cgminer.c", "get_statline", 0xc4f, uVar3, uVar4, uVar7, uVar5);
    FUN_0001dbec(3, acStack_840, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

void FUN_0002c7fc(void)

{
    char local_808[2052];

    builtin_strncpy(local_808, "Failed to create restart thread", 0x20);
    FUN_0001dbec(3, local_808, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

uint FUN_0002c840(void)

{
    int iVar1;
    void *__s;
    char *pcVar2;
    char *pcVar3;
    byte *pbVar4;
    size_t sVar5;
    long lVar6;
    int iVar7;
    uint uVar8;
    int iVar9;
    FILE *pFVar10;
    uint uVar11;
    byte **ppbVar12;
    byte *pbVar13;
    int iVar14;
    byte *apbStack_c4c[2];
    int iStack_c44;
    char *pcStack_c40;
    char *pcStack_c3c;
    byte abStack_c38[1024];
    char acStack_838[64];
    char acStack_7f8[64];
    char acStack_7b8[8];
    char acStack_7b0[1916];
    pthread_t apStack_c[2];

    FUN_00020580(&DAT_00068aec);
    iVar1 = pthread_create(apStack_c, (pthread_attr_t *)0x0, FUN_00034b34,
                           (void *)0x0);
    if (iVar1 == 0) {
        return 0;
    }
    __s = (void *)FUN_0002c7fc();
    pFVar10 = DAT_00068b10;
    if (DAT_00068b10 == (FILE *)0x0) {
        if (DAT_00072da8 == (char *)0x0) {
            builtin_strncpy(acStack_838, "BENCHFILE Invalid benchfile NULL",
                            0x20);
            acStack_838[0x20] = 0;
            FUN_0001dbec(3, acStack_838, 1);
            /* WARNING: Subroutine does not return */
            FUN_0002c508(1);
        }
        DAT_00068b10 = fopen64(DAT_00072da8, "r");
        if (DAT_00068b10 == (FILE *)0x0) {
            pcVar2 = "BENCHFILE Failed to open benchfile \'%s\'";
        } else {
            DAT_00068b14 = pFVar10;
            pcVar2 = fgets((char *)abStack_c38, 0x400, DAT_00068b10);
            if (pcVar2 != (char *)0x0)
                goto LAB_0002c8c0;
            pcVar2 = "BENCHFILE Failed to read benchfile \'%s\'";
        }
    } else {
        pcVar2 = fgets((char *)abStack_c38, 0x400, DAT_00068b10);
        pcVar3 = pcVar2;
        while (pFVar10 = DAT_00068b18, pcVar3 != (char *)0x0) {
        LAB_0002c8c0:
            DAT_00068b18 = pFVar10;
            pbVar4 = abStack_c38;
            uVar8 = (uint)abStack_c38[0];
            uVar11 = uVar8 - 0x23;
            if (uVar11 != 0) {
                uVar11 = 1;
            }
            if (uVar8 == 0) {
                uVar11 = 0;
            }
            pFVar10 = (FILE *)((int)&DAT_00068b14->_flags + 1);
            if (uVar8 == 0x2f) {
                uVar11 = 0;
            } else {
                uVar11 = uVar11 & 1;
            }
            DAT_00068b14 = pFVar10;
            if (uVar11 != 0) {
                ppbVar12 = apbStack_c4c;
                iVar1 = 0;
                apbStack_c4c[0] = pbVar4;
                goto LAB_0002ca00;
            }
            pcVar3 = fgets((char *)pbVar4, 0x400, DAT_00068b10);
            pcVar2 = (char *)0x0;
        }
        if (DAT_00068b18 != (FILE *)0x0) {
            fclose(DAT_00068b10);
            DAT_00068b10 = (FILE *)pcVar2;
            uVar8 = FUN_0002c880(__s);
            return uVar8;
        }
        pcVar2 = "BENCHFILE No work in benchfile \'%s\'";
    }
    snprintf(acStack_838, 0x800, pcVar2, DAT_00072da8);
    goto LAB_0002c960;
    while (true) {
        *pbVar4 = 0;
        pbVar4 = pbVar4 + 1;
        *ppbVar12 = pbVar4;
        iVar1 = iVar7;
        if (iVar7 == 4)
            break;
    LAB_0002ca00:
        pbVar4 = (byte *)strchr((char *)pbVar4, 0x2c);
        ppbVar12[1] = pbVar4;
        iVar7 = iVar1 + 1;
        if (pbVar4 == (byte *)0x0) {
            snprintf(acStack_838, 0x800,
                     "BENCHFILE Invalid input file line %d - field count is %d "
                     "but should be %d",
                     pFVar10, iVar7, 5);
            goto LAB_0002c960;
        }
        pbVar13 = *ppbVar12;
        ppbVar12 = ppbVar12 + 1;
        iVar14 = (&DAT_0004eb20)[iVar1 * 2];
        iVar9 = iVar14 - ((int)pbVar4 - (int)pbVar13);
        if (iVar9 != 0) {
            iVar9 = 1;
        }
        if (iVar14 == 0) {
            iVar9 = 0;
        }
        if (iVar9 != 0) {
            snprintf(acStack_838, 0x800,
                     "BENCHFILE Invalid input file line %d field %d (%s) "
                     "length is %d but should be %d",
                     pFVar10, iVar7, (&DAT_0004eb24)[iVar1 * 2],
                     (int)pbVar4 - (int)pbVar13, iVar14);
            goto LAB_0002c960;
        }
    }
    sVar5 = strlen(pcStack_c3c);
    if (9 < sVar5) {
        sprintf(acStack_838, "0000000%c", (uint)*apbStack_c4c[0]);
        sVar5 = strlen(acStack_838);
        pcVar2 = acStack_838 + sVar5;
        iVar1 = iStack_c44 + 0x38;
        do {
            iVar7 = iVar1 + -8;
            sprintf(pcVar2, "%.8s", iVar1);
            pcVar2 = pcVar2 + 8;
            iVar1 = iVar7;
        } while (iStack_c44 + -8 != iVar7);
        pcVar2 = acStack_7f8 + sVar5;
        iVar1 = (int)apbStack_c4c[1] + 0x38;
        do {
            iVar7 = iVar1 + -8;
            sprintf(pcVar2, "%.8s", iVar1);
            pcVar2 = pcVar2 + 8;
            iVar1 = iVar7;
        } while ((int)apbStack_c4c[1] + -8 != iVar7);
        lVar6 = strtol(pcStack_c3c, (char **)0x0, 10);
        sprintf(acStack_7b8 + sVar5, "%08lx", lVar6);
        strcpy(acStack_7b0 + sVar5, pcStack_c40);
        memset(__s, 0, 0x1c0);
        FUN_0001fa24(__s, acStack_838, (int)(sVar5 + 0x90) >> 1);
        FUN_00028f4c(__s);
        DAT_00068b18 = (FILE *)((int)&DAT_00068b18->_flags + 1);
        return uVar11;
    }
    snprintf(acStack_838, 0x800,
             "BENCHFILE Invalid input file line %d field %d (%s) length is %d "
             "but should be least %d",
             pFVar10, 5, "NonceTime", sVar5, 10);
LAB_0002c960:
    FUN_0001dbec(3, acStack_838, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

uint FUN_0002c880(void *param_1)

{
    char *pcVar1;
    char *pcVar2;
    byte *pbVar3;
    size_t sVar4;
    long lVar5;
    int iVar6;
    uint uVar7;
    int iVar8;
    FILE *pFVar9;
    uint uVar10;
    int iVar11;
    byte **ppbVar12;
    byte *pbVar13;
    int iVar14;
    byte *local_c3c[2];
    int local_c34;
    char *local_c30;
    char *local_c2c;
    byte local_c28[1024];
    char local_828[64];
    char acStack_7e8[64];
    char acStack_7a8[8];
    char acStack_7a0[1916];

    pFVar9 = DAT_00068b10;
    if (DAT_00068b10 == (FILE *)0x0) {
        if (DAT_00072da8 == (char *)0x0) {
            builtin_strncpy(local_828, "BENCHFILE Invalid benchfile NULL",
                            0x20);
            local_828[0x20] = 0;
            FUN_0001dbec(3, local_828, 1);
            /* WARNING: Subroutine does not return */
            FUN_0002c508(1);
        }
        DAT_00068b10 = fopen64(DAT_00072da8, "r");
        if (DAT_00068b10 == (FILE *)0x0) {
            pcVar1 = "BENCHFILE Failed to open benchfile \'%s\'";
        } else {
            DAT_00068b14 = pFVar9;
            pcVar1 = fgets((char *)local_c28, 0x400, DAT_00068b10);
            if (pcVar1 != (char *)0x0)
                goto LAB_0002c8c0;
            pcVar1 = "BENCHFILE Failed to read benchfile \'%s\'";
        }
    } else {
        pcVar1 = fgets((char *)local_c28, 0x400, DAT_00068b10);
        pcVar2 = pcVar1;
        while (pFVar9 = DAT_00068b18, pcVar2 != (char *)0x0) {
        LAB_0002c8c0:
            DAT_00068b18 = pFVar9;
            pbVar3 = local_c28;
            uVar7 = (uint)local_c28[0];
            uVar10 = uVar7 - 0x23;
            if (uVar10 != 0) {
                uVar10 = 1;
            }
            if (uVar7 == 0) {
                uVar10 = 0;
            }
            pFVar9 = (FILE *)((int)&DAT_00068b14->_flags + 1);
            if (uVar7 == 0x2f) {
                uVar10 = 0;
            } else {
                uVar10 = uVar10 & 1;
            }
            DAT_00068b14 = pFVar9;
            if (uVar10 != 0) {
                ppbVar12 = local_c3c;
                iVar11 = 0;
                local_c3c[0] = pbVar3;
                goto LAB_0002ca00;
            }
            pcVar2 = fgets((char *)pbVar3, 0x400, DAT_00068b10);
            pcVar1 = (char *)0x0;
        }
        if (DAT_00068b18 != (FILE *)0x0) {
            fclose(DAT_00068b10);
            DAT_00068b10 = (FILE *)pcVar1;
            uVar7 = FUN_0002c880(param_1);
            return uVar7;
        }
        pcVar1 = "BENCHFILE No work in benchfile \'%s\'";
    }
    snprintf(local_828, 0x800, pcVar1, DAT_00072da8);
    goto LAB_0002c960;
    while (true) {
        *pbVar3 = 0;
        pbVar3 = pbVar3 + 1;
        *ppbVar12 = pbVar3;
        iVar11 = iVar6;
        if (iVar6 == 4)
            break;
    LAB_0002ca00:
        pbVar3 = (byte *)strchr((char *)pbVar3, 0x2c);
        ppbVar12[1] = pbVar3;
        iVar6 = iVar11 + 1;
        if (pbVar3 == (byte *)0x0) {
            snprintf(local_828, 0x800,
                     "BENCHFILE Invalid input file line %d - field count is %d "
                     "but should be %d",
                     pFVar9, iVar6, 5);
            goto LAB_0002c960;
        }
        pbVar13 = *ppbVar12;
        ppbVar12 = ppbVar12 + 1;
        iVar14 = (&DAT_0004eb20)[iVar11 * 2];
        iVar8 = iVar14 - ((int)pbVar3 - (int)pbVar13);
        if (iVar8 != 0) {
            iVar8 = 1;
        }
        if (iVar14 == 0) {
            iVar8 = 0;
        }
        if (iVar8 != 0) {
            snprintf(local_828, 0x800,
                     "BENCHFILE Invalid input file line %d field %d (%s) "
                     "length is %d but should be %d",
                     pFVar9, iVar6, (&DAT_0004eb24)[iVar11 * 2],
                     (int)pbVar3 - (int)pbVar13, iVar14);
            goto LAB_0002c960;
        }
    }
    sVar4 = strlen(local_c2c);
    if (9 < sVar4) {
        sprintf(local_828, "0000000%c", (uint)*local_c3c[0]);
        sVar4 = strlen(local_828);
        pcVar1 = local_828 + sVar4;
        iVar11 = local_c34 + 0x38;
        do {
            iVar6 = iVar11 + -8;
            sprintf(pcVar1, "%.8s", iVar11);
            pcVar1 = pcVar1 + 8;
            iVar11 = iVar6;
        } while (local_c34 + -8 != iVar6);
        pcVar1 = acStack_7e8 + sVar4;
        iVar11 = (int)local_c3c[1] + 0x38;
        do {
            iVar6 = iVar11 + -8;
            sprintf(pcVar1, "%.8s", iVar11);
            pcVar1 = pcVar1 + 8;
            iVar11 = iVar6;
        } while ((int)local_c3c[1] + -8 != iVar6);
        lVar5 = strtol(local_c2c, (char **)0x0, 10);
        sprintf(acStack_7a8 + sVar4, "%08lx", lVar5);
        strcpy(acStack_7a0 + sVar4, local_c30);
        memset(param_1, 0, 0x1c0);
        FUN_0001fa24(param_1, local_828, (int)(sVar4 + 0x90) >> 1);
        FUN_00028f4c(param_1);
        DAT_00068b18 = (FILE *)((int)&DAT_00068b18->_flags + 1);
        return uVar10;
    }
    snprintf(local_828, 0x800,
             "BENCHFILE Invalid input file line %d field %d (%s) length is %d "
             "but should be least %d",
             pFVar9, 5, "NonceTime", sVar4, 10);
LAB_0002c960:
    FUN_0001dbec(3, local_828, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

void FUN_0002cc8c(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_808[2052];

    piVar1 = __errno_location();
    snprintf(acStack_808, 0x800,
             "Failed to pthread_mutex_init errno=%d in %s %s():%d", *piVar1,
             "cgminer.c", param_1, param_2);
    FUN_0001dbec(3, acStack_808, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

void FUN_0002cce8(pthread_mutex_t *param_1, undefined4 param_2,
                  undefined4 param_3)

{
    int iVar1;
    int *piVar2;
    undefined8 uVar3;
    char acStack_818[2052];
    code *pcStack_14;

    iVar1 = pthread_mutex_init(param_1, (pthread_mutexattr_t *)0x0);
    if (iVar1 == 0) {
        return;
    }
    uVar3 = FUN_0002cc8c(param_2, param_3);
    pcStack_14 = FUN_0002cd10;
    piVar2 = __errno_location();
    snprintf(acStack_818, 0x800,
             "Failed to pthread_rwlock_init errno=%d in %s %s():%d", *piVar2,
             "cgminer.c", (int)uVar3, (int)((ulonglong)uVar3 >> 0x20));
    FUN_0001dbec(3, acStack_818, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

void FUN_0002cd10(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_808[2052];

    piVar1 = __errno_location();
    snprintf(acStack_808, 0x800,
             "Failed to pthread_rwlock_init errno=%d in %s %s():%d", *piVar1,
             "cgminer.c", param_1, param_2);
    FUN_0001dbec(3, acStack_808, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

void FUN_0002cd6c(pthread_rwlock_t *param_1, undefined4 param_2,
                  undefined4 param_3)

{
    int iVar1;
    int *piVar2;
    undefined4 uVar3;
    undefined4 extraout_r2;
    undefined8 uVar4;
    char acStack_828[2052];
    code *pcStack_24;
    undefined4 uStack_20;
    undefined4 uStack_1c;

    iVar1 = pthread_rwlock_init(param_1, (pthread_rwlockattr_t *)0x0);
    if (iVar1 == 0) {
        return;
    }
    uVar4 = FUN_0002cd10(param_2, param_3);
    uVar3 = (undefined4)((ulonglong)uVar4 >> 0x20);
    uStack_20 = param_2;
    uStack_1c = param_3;
    iVar1 = pthread_mutex_init((pthread_mutex_t *)uVar4,
                               (pthread_mutexattr_t *)0x0);
    if (iVar1 == 0) {
        iVar1 = pthread_rwlock_init(
            (pthread_rwlock_t *)((pthread_mutex_t *)uVar4 + 1),
            (pthread_rwlockattr_t *)0x0);
        if (iVar1 == 0) {
            return;
        }
        FUN_0002cd10(uVar3, extraout_r2);
    }
    uVar4 = FUN_0002cc8c(uVar3, extraout_r2);
    pcStack_24 = FUN_0002cddc;
    piVar2 = __errno_location();
    snprintf(acStack_828, 0x800,
             "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d", *piVar2,
             "cgminer.c", (int)uVar4, (int)((ulonglong)uVar4 >> 0x20));
    FUN_0001dbec(3, acStack_828, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

void FUN_0002cd94(pthread_mutex_t *param_1, undefined4 param_2,
                  undefined4 param_3)

{
    int iVar1;
    int *piVar2;
    undefined8 uVar3;
    char acStack_818[2052];
    code *pcStack_14;

    iVar1 = pthread_mutex_init(param_1, (pthread_mutexattr_t *)0x0);
    if (iVar1 == 0) {
        iVar1 = pthread_rwlock_init((pthread_rwlock_t *)(param_1 + 1),
                                    (pthread_rwlockattr_t *)0x0);
        if (iVar1 == 0) {
            return;
        }
        FUN_0002cd10(param_2, param_3);
    }
    uVar3 = FUN_0002cc8c(param_2, param_3);
    pcStack_14 = FUN_0002cddc;
    piVar2 = __errno_location();
    snprintf(acStack_818, 0x800,
             "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d", *piVar2,
             "cgminer.c", (int)uVar3, (int)((ulonglong)uVar3 >> 0x20));
    FUN_0001dbec(3, acStack_818, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

void FUN_0002cddc(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_808[2052];

    piVar1 = __errno_location();
    snprintf(acStack_808, 0x800,
             "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d", *piVar1,
             "cgminer.c", param_1, param_2);
    FUN_0001dbec(3, acStack_808, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

void FUN_0002ce38(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_808[2052];

    piVar1 = __errno_location();
    snprintf(acStack_808, 0x800,
             "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar1,
             "cgminer.c", param_1, param_2);
    FUN_0001dbec(3, acStack_808, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

void FUN_0002ce94(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_808[2052];

    piVar1 = __errno_location();
    snprintf(acStack_808, 0x800,
             "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar1,
             "cgminer.c", param_1, param_2);
    FUN_0001dbec(3, acStack_808, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

undefined1 FUN_0002cef0(int param_1, undefined1 *param_2)

{
    undefined1 uVar1;
    int iVar2;

    iVar2 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xbc));
    if (iVar2 == 0) {
        uVar1 = *param_2;
        *param_2 = 1;
        iVar2 = pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0xbc));
        if (iVar2 == 0) {
            (*DAT_0006797c)();
            return uVar1;
        }
    } else {
        FUN_0002ce38("pool_tset", 0x32d);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002ce94("pool_tset", 0x332);
}

undefined1 FUN_0002cf5c(int param_1, undefined1 *param_2)

{
    undefined1 uVar1;
    int iVar2;

    iVar2 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xbc));
    if (iVar2 == 0) {
        uVar1 = *param_2;
        *param_2 = 0;
        iVar2 = pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0xbc));
        if (iVar2 == 0) {
            (*DAT_0006797c)();
            return uVar1;
        }
    } else {
        FUN_0002ce38("pool_tclear", 0x33c);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002ce94("pool_tclear", 0x341);
}

uint FUN_0002cfc4(undefined4 *param_1, int param_2)

{
    char cVar1;
    int iVar2;
    undefined4 uVar3;
    size_t __n;
    uint uVar4;
    char *pcVar5;
    undefined1 auStack_84c[8];
    undefined1 auStack_844[8];
    pthread_attr_t pStack_83c;
    undefined4 local_818;
    undefined4 uStack_814;
    undefined4 uStack_810;
    undefined4 uStack_80c;
    undefined4 local_808;
    undefined4 uStack_804;
    undefined4 uStack_800;
    undefined4 uStack_7fc;
    char local_7f8[28];
    undefined2 uStack_7dc;
    undefined1 local_7da;

    if (*(char *)(param_1 + 0xbc) == '\0') {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (5 < DAT_00067858)) {
            snprintf((char *)&local_818, 0x800, "Testing pool %s",
                     param_1[0x29]);
            FUN_0001dbec(6, &local_818, 0);
        }
    } else if ((DAT_000686e1 != '\0') &&
               (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
                 (6 < DAT_00067858)))) {
        snprintf((char *)&local_818, 0x800,
                 "Retrieving block template from pool %s", param_1[0x29]);
        FUN_0001dbec(7, &local_818, 0);
    }
    if (*(char *)(param_1 + 0xa4) == '\0') {
        uVar4 = 0;
        if (DAT_000681d4 == 0) {
            if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                (DAT_00067858 < 3)) {
                return 0;
            }
            local_818._0_1_ = 'C';
            local_818._1_1_ = 'U';
            local_818._2_1_ = 'R';
            local_818._3_1_ = 'L';
            uStack_814._0_1_ = ' ';
            uStack_814._1_1_ = 'i';
            uStack_814._2_1_ = 'n';
            uStack_814._3_1_ = 'i';
            uStack_810._0_1_ = 't';
            uStack_810._1_1_ = 'i';
            uStack_810._2_1_ = 'a';
            uStack_810._3_1_ = 'l';
            uStack_80c._0_1_ = 'i';
            uStack_80c._1_1_ = 's';
            uStack_80c._2_1_ = 'a';
            uStack_80c._3_1_ = 't';
            local_808._0_1_ = 'i';
            local_808._1_1_ = 'o';
            local_808._2_1_ = 'n';
            local_808._3_1_ = ' ';
            uStack_804._0_1_ = 'f';
            uStack_804._1_1_ = 'a';
            uStack_804._2_1_ = 'i';
            uStack_804._3_1_ = 'l';
            uStack_800 = CONCAT13(uStack_800._3_1_, 0x6465);
            FUN_0001dbec(3, &local_818, 0);
            return 0;
        }
        if (*(char *)((int)param_1 + 99) == '\0') {
            if (DAT_000686e1 == '\0') {
                *(undefined1 *)((int)param_1 + 99) = 0;
            } else if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                       (DAT_00067858 < 7)) {
                *(undefined1 *)((int)param_1 + 99) = 0;
                if (*(char *)(param_1 + 0xbc) == '\0') {
                    if (*(char *)(param_1 + 0xe5) == '\0') {
                    joined_r0x0002d738:
                        if (((DAT_00072d88 != '\0') ||
                             (DAT_000686e0 != '\0')) ||
                            (6 < DAT_00067858)) {
                            pcVar5 = "No GBT coinbase + append support found, "
                                     "pool unusable if it has no stratum";
                            __n = 0x4b;
                        LAB_0002d4c4:
                            memcpy(&local_818, pcVar5, __n);
                            FUN_0001dbec(7, &local_818, 0);
                        }
                    } else {
                    LAB_0002d480:
                        if (((DAT_00072d88 != '\0') ||
                             (DAT_000686e0 != '\0')) ||
                            (6 < DAT_00067858)) {
                            pcVar5 = "GBT coinbase without append found, "
                                     "switching to GBT solo protocol";
                            __n = 0x42;
                            goto LAB_0002d4c4;
                        }
                    }
                } else {
                LAB_0002d0ac:
                    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                        (6 < DAT_00067858)) {
                        local_818._0_1_ = 'G';
                        local_818._1_1_ = 'B';
                        local_818._2_1_ = 'T';
                        local_818._3_1_ = ' ';
                        uStack_814._0_1_ = 'c';
                        uStack_814._1_1_ = 'o';
                        uStack_814._2_1_ = 'i';
                        uStack_814._3_1_ = 'n';
                        uStack_810._0_1_ = 'b';
                        uStack_810._1_1_ = 'a';
                        uStack_810._2_1_ = 's';
                        uStack_810._3_1_ = 'e';
                        uStack_80c._0_1_ = ' ';
                        uStack_80c._1_1_ = '+';
                        uStack_80c._2_1_ = ' ';
                        uStack_80c._3_1_ = 'a';
                        local_808._0_1_ = 'p';
                        local_808._1_1_ = 'p';
                        local_808._2_1_ = 'e';
                        local_808._3_1_ = 'n';
                        uStack_804._0_1_ = 'd';
                        uStack_804._1_1_ = ' ';
                        uStack_804._2_1_ = 's';
                        uStack_804._3_1_ = 'u';
                        uStack_800._0_1_ = 'p';
                        uStack_800._1_1_ = 'p';
                        uStack_800._2_1_ = 'o';
                        uStack_800._3_1_ = 'r';
                        uStack_7fc._0_1_ = 't';
                        uStack_7fc._1_1_ = ' ';
                        uStack_7fc._2_1_ = 'f';
                        uStack_7fc._3_1_ = 'o';
                        builtin_strncpy(local_7f8,
                                        "und, switching to GBT protoc", 0x1c);
                        uStack_7dc = 0x6c6f;
                        local_7da = 0;
                        FUN_0001dbec(7, &local_818, 0);
                    }
                }
            } else {
                local_818._0_1_ = 'P';
                local_818._1_1_ = 'r';
                local_818._2_1_ = 'o';
                local_818._3_1_ = 'b';
                uStack_814._0_1_ = 'i';
                uStack_814._1_1_ = 'n';
                uStack_814._2_1_ = 'g';
                uStack_814._3_1_ = ' ';
                uStack_810._0_1_ = 'f';
                uStack_810._1_1_ = 'o';
                uStack_810._2_1_ = 'r';
                uStack_810._3_1_ = ' ';
                uStack_80c._0_1_ = 'G';
                uStack_80c._1_1_ = 'B';
                uStack_80c._2_1_ = 'T';
                uStack_80c._3_1_ = ' ';
                local_808._0_1_ = 's';
                local_808._1_1_ = 'u';
                local_808._2_1_ = 'p';
                local_808._3_1_ = 'p';
                uStack_804._0_1_ = 'o';
                uStack_804._1_1_ = 'r';
                uStack_804._2_1_ = 't';
                uStack_804._3_1_ = '\0';
                FUN_0001dbec(7, &local_818, 0);
                cVar1 = DAT_000686e1;
                *(undefined1 *)((int)param_1 + 99) = 0;
                if (*(char *)(param_1 + 0xbc) == '\0') {
                    if (*(char *)(param_1 + 0xe5) == '\0') {
                        if (cVar1 != '\0')
                            goto joined_r0x0002d738;
                    } else if (cVar1 != '\0')
                        goto LAB_0002d480;
                } else if (cVar1 != '\0')
                    goto LAB_0002d0ac;
            }
        }
        FUN_00020580(auStack_84c);
        FUN_00020580(auStack_844);
        iVar2 = param_1[0x90];
        if ((iVar2 != 0) && (DAT_00068b1c == '\0')) {
            if ((DAT_00072d88 != '\0') ||
                ((DAT_000686e0 != '\0' || (5 < DAT_00067858)))) {
                snprintf((char *)&local_818, 0x800,
                         "Testing pool %d stratum %s", *param_1, iVar2);
                FUN_0001dbec(6, &local_818, 0);
                iVar2 = param_1[0x90];
            }
            iVar2 = FUN_000208f0(iVar2, param_1 + 0x9a, param_1 + 0x92);
            if ((iVar2 != 0) && (iVar2 = FUN_00021cbc(param_1), iVar2 != 0)) {
                if ((DAT_00072d88 != '\0') ||
                    ((DAT_000686e0 != '\0' || (4 < DAT_00067858)))) {
                    snprintf((char *)&local_818, 0x800,
                             "Switching pool %d %s to %s", *param_1,
                             param_1[0x29], param_1[0x90]);
                    FUN_0001dbec(5, &local_818, 0);
                }
                if (param_1[0x29] == 0) {
                    uVar3 = __strdup(param_1[0x90]);
                    param_1[0x29] = uVar3;
                }
                *(undefined1 *)(param_1 + 0xa4) = 1;
                goto LAB_0002d2f4;
            }
        }
        if (((*(char *)(param_1 + 0xa4) == '\0') &&
             (*(char *)(param_1 + 0xe5) == '\0')) &&
            (*(char *)(param_1 + 0xbc) == '\0')) {
            if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                (3 < DAT_00067858)) {
                uVar4 = 0;
                snprintf((char *)&local_818, 0x800,
                         "No Stratum, GBT or Solo support in pool %d %s unable "
                         "to use",
                         *param_1, param_1[0x29]);
                FUN_0001dbec(4, &local_818, 0);
            }
        } else {
            if ((DAT_000686e1 != '\0') &&
                (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
                  (6 < DAT_00067858)))) {
                snprintf((char *)&local_818, 0x800,
                         "FAILED to retrieve work from pool %u %s", *param_1,
                         param_1[0x29]);
                FUN_0001dbec(7, &local_818, 0);
            }
            if (((param_2 == 0) && (*(char *)((int)param_1 + 0x61) == '\0')) &&
                ((DAT_00072d88 != '\0' ||
                  ((DAT_000686e0 != '\0' || (3 < DAT_00067858)))))) {
                snprintf((char *)&local_818, 0x800,
                         "Pool %u slow/down or URL or credentials invalid",
                         *param_1);
                uVar4 = 0;
                FUN_0001dbec(4, &local_818);
            }
        }
    } else {
    LAB_0002d2f4:
        iVar2 = FUN_0002cef0(param_1, (int)param_1 + 0x292);
        if (iVar2 == 0) {
            iVar2 = FUN_00024934(param_1);
            if ((iVar2 != 0) &&
                ((((*(char *)(param_1 + 0x91) == '\0' ||
                    (iVar2 = FUN_00027338(param_1), iVar2 != 0)) &&
                   (iVar2 = FUN_00021cbc(param_1), iVar2 != 0)) &&
                  (uVar4 = FUN_00027730(param_1), uVar4 != 0)))) {
                DAT_000762bc = 1;
                pthread_attr_init(&pStack_83c);
                pthread_attr_setstacksize(&pStack_83c, 0x100000);
                iVar2 = pthread_create(param_1 + 0xb2, &pStack_83c,
                                       FUN_00036d48, param_1);
                if (iVar2 == 0) {
                    iVar2 = pthread_create(param_1 + 0xb3, &pStack_83c,
                                           FUN_00039788, param_1);
                    if (iVar2 == 0) {
                        return uVar4;
                    }
                    pcVar5 = "Failed to create stratum rthread";
                } else {
                    pcVar5 = "Failed to create stratum sthread";
                }
                local_818 = *(undefined4 *)pcVar5;
                uStack_814 = *(undefined4 *)(pcVar5 + 4);
                uStack_810 = *(undefined4 *)(pcVar5 + 8);
                uStack_80c = *(undefined4 *)(pcVar5 + 0xc);
                local_808 = *(undefined4 *)(pcVar5 + 0x10);
                uStack_804 = *(undefined4 *)(pcVar5 + 0x14);
                uStack_800 = *(undefined4 *)(pcVar5 + 0x18);
                uStack_7fc = *(undefined4 *)(pcVar5 + 0x1c);
                local_7f8[0] = (char)*(undefined4 *)(pcVar5 + 0x20);
                FUN_0001dbec(3, &local_818, 1);
                /* WARNING: Subroutine does not return */
                FUN_0002c508(1, 1);
            }
            FUN_0002cf5c(param_1, (int)param_1 + 0x292);
            uVar4 = 0;
        } else {
            uVar4 = (uint) * (byte *)((int)param_1 + 0x291);
        }
    }
    return uVar4;
}

void FUN_0002d7a4(undefined4 param_1, undefined4 param_2)

{
    int iVar1;

    iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00072d8c);
    if (iVar1 == 0) {
        DAT_0007605c = param_1;
        DAT_000761d4 = param_2;
        iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00072d8c);
        if (iVar1 == 0) {
            (*DAT_0006797c)();
            return;
        }
    } else {
        FUN_0002ce38("inc_dev_status", 0x2280);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002ce94("inc_dev_status", 0x2283);
}

void FUN_0002d820(void)

{
    int iVar1;

    iVar1 = pthread_mutex_lock(DAT_00068b20);
    if (iVar1 == 0) {
        pthread_cond_signal((pthread_cond_t *)&DAT_00072e60);
        iVar1 = pthread_mutex_unlock(DAT_00068b20);
        if (iVar1 == 0) {
            (*DAT_0006797c)();
            return;
        }
    } else {
        FUN_0002ce38("wake_gws", 0x1519);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002ce94("wake_gws", 0x151b);
}

void FUN_0002d984(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_808[2052];

    piVar1 = __errno_location();
    snprintf(acStack_808, 0x800,
             "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar1,
             "cgminer.c", param_1, param_2);
    FUN_0001dbec(3, acStack_808, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

void FUN_0002d9e0(pthread_rwlock_t *param_1, undefined4 param_2,
                  undefined4 param_3)

{
    int iVar1;

    iVar1 = pthread_rwlock_unlock(param_1);
    if (iVar1 == 0) {
        (*DAT_0006797c)();
        return;
    }
    /* WARNING: Subroutine does not return */
    FUN_0002d984(param_2, param_3);
}

int FUN_0002da18(void)

{
    int iVar1;
    int iVar2;

    iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00076140);
    if (iVar1 == 0) {
        iVar2 = pthread_rwlock_wrlock((pthread_rwlock_t *)&DAT_00076158);
        iVar1 = DAT_00068b24;
        if (iVar2 == 0) {
            DAT_00068b24 = DAT_00068b24 + 1;
            iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00076158);
            if (iVar2 == 0) {
                iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00076140);
                if (iVar2 == 0) {
                    (*DAT_0006797c)();
                    return iVar1;
                }
                /* WARNING: Subroutine does not return */
                FUN_0002ce94("total_work_inc", 0x8fc);
            }
            goto LAB_0002daa8;
        }
    } else {
        FUN_0002ce38("total_work_inc", 0x8fa);
    }
    FUN_0002cddc("total_work_inc", 0x8fa);
LAB_0002daa8:
    /* WARNING: Subroutine does not return */
    FUN_0002d984("total_work_inc", 0x8fc);
}

void FUN_0002dac8(int param_1)

{
    undefined4 uVar1;
    uint uVar2;
    int iVar3;
    bool bVar4;
    uint local_810;
    char acStack_80c[2048];

    uVar2 = *(uint *)(param_1 + 0x44);
    uVar2 = (uVar2 << 0x18 | (uVar2 >> 8 & 0xff) << 0x10 |
             (uVar2 >> 0x10 & 0xff) << 8 | uVar2 >> 0x18) +
            1;
    bVar4 = DAT_000686e1 != '\0';
    *(uint *)(param_1 + 0x44) = uVar2 * 0x1000000 |
                                (uVar2 >> 8 & 0xff) << 0x10 |
                                (uVar2 >> 0x10 & 0xff) << 8 | uVar2 >> 0x18;
    DAT_00072f0c = DAT_00072f0c + 1;
    *(int *)(param_1 + 0xf0) = *(int *)(param_1 + 0xf0) + 1;
    *(undefined4 *)(param_1 + 0xf8) = 0;
    if ((bVar4) && (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
                     (6 < DAT_00067858)))) {
        local_810._0_1_ = 'S';
        local_810._1_1_ = 'u';
        local_810._2_1_ = 'c';
        local_810._3_1_ = 'c';
        builtin_strncpy(acStack_80c, "essfully rolled work", 0x14);
        acStack_80c[0x14] = 0;
        FUN_0001dbec(7, &local_810, 0);
    }
    iVar3 = *(int *)(param_1 + 0x134);
    if (iVar3 != 0) {
        FUN_0001fa24(&local_810, iVar3, 4);
        uVar2 = (local_810 << 0x18 | (local_810 >> 8 & 0xff) << 0x10 |
                 (local_810 >> 0x10 & 0xff) << 8 | local_810 >> 0x18) +
                1;
        local_810 = uVar2 * 0x1000000 | (uVar2 >> 8 & 0xff) << 0x10 |
                    (uVar2 >> 0x10 & 0xff) << 8 | uVar2 >> 0x18;
        FUN_0001f900(iVar3, &local_810, 4);
    }
    uVar1 = FUN_0002da18();
    *(undefined4 *)(param_1 + 0x154) = uVar1;
    return;
}

int FUN_0002dbec(void)

{
    int iVar1;
    undefined4 uVar2;
    char local_808[32];
    undefined2 uStack_7e8;
    undefined1 local_7e6;

    iVar1 = FUN_0001f790(1, 0x1c0, "cgminer.c", "make_work", 0x903);
    if (iVar1 != 0) {
        uVar2 = FUN_0002da18();
        *(undefined4 *)(iVar1 + 0x154) = uVar2;
        return iVar1;
    }
    builtin_strncpy(local_808, "Failed to calloc work in make_wo", 0x20);
    uStack_7e8 = 0x6b72;
    local_7e6 = 0;
    FUN_0001dbec(3, local_808, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

undefined4 FUN_0002dc84(undefined4 param_1, undefined4 param_2)

{
    undefined4 uVar1;

    uVar1 = FUN_0002dbec();
    FUN_0002a8bc(uVar1, param_1, param_2);
    return uVar1;
}

int FUN_0002dcac(undefined4 param_1)

{
    int iVar1;

    iVar1 = FUN_0002dbec();
    FUN_0002a8bc(iVar1, param_1, 0);
    *(undefined1 *)(iVar1 + 0x111) = 1;
    FUN_00020580(iVar1 + 0x1a0);
    *(undefined1 *)(iVar1 + 0x118) = 0;
    *(undefined1 *)(iVar1 + 0x11a) = 0;
    *(int *)(iVar1 + 0x108) = *(int *)(iVar1 + 0x108) + -1;
    return iVar1;
}

void FUN_0002dcf8(int param_1, undefined4 param_2)

{
    int iVar1;

    iVar1 = pthread_rwlock_wrlock((pthread_rwlock_t *)(param_1 + 0x140));
    if (iVar1 == 0) {
        FUN_0002be8c(param_1, param_2);
        iVar1 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x140));
        if (iVar1 == 0) {
            (*DAT_0006797c)();
            return;
        }
    } else {
        FUN_0002cddc("add_queued", 0x2517);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002d984("add_queued", 0x2519);
}

void FUN_0002dd64(int param_1, undefined4 param_2)

{
    int iVar1;
    undefined4 local_14[2];

    local_14[0] = param_2;
    iVar1 = pthread_rwlock_wrlock((pthread_rwlock_t *)(param_1 + 0x140));
    if (iVar1 == 0) {
        FUN_0002c380(param_1, local_14[0]);
        iVar1 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x140));
        if (iVar1 == 0) {
            (*DAT_0006797c)();
            FUN_0002a9d4(local_14, "cgminer.c", "work_completed", 0x25b3);
            return;
        }
    } else {
        FUN_0002cddc("work_completed", 0x25af);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002d984("work_completed", 0x25b1);
}

int FUN_0002ddf0(int param_1, undefined4 param_2, undefined4 param_3,
                 undefined4 param_4, undefined4 param_5, undefined4 param_6)

{
    int iVar1;
    int iVar2;

    iVar1 = pthread_rwlock_wrlock((pthread_rwlock_t *)(param_1 + 0x140));
    if (iVar1 == 0) {
        iVar1 = FUN_0002c2c4(*(undefined4 *)(param_1 + 0x160), param_2, param_3,
                             param_4, param_5, param_6);
        if (iVar1 != 0) {
            FUN_0002c380(param_1, iVar1);
        }
        iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x140));
        if (iVar2 == 0) {
            (*DAT_0006797c)();
            return iVar1;
        }
    } else {
        FUN_0002cddc("take_queued_work_bymidstate", 0x25bc);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002d984("take_queued_work_bymidstate", 0x25c0);
}

int FUN_0002de9c(int param_1)

{
    int iVar1;
    int iVar2;
    undefined4 uVar3;
    double in_d0;
    undefined4 extraout_s1;
    int local_34;
    undefined1 auStack_30[12];

    FUN_00020580(auStack_30);
    iVar1 = pthread_rwlock_wrlock((pthread_rwlock_t *)(param_1 + 0x140));
    if (iVar1 == 0) {
        local_34 = *(int *)(param_1 + 0x160);
        iVar1 = 0;
        if (local_34 != 0) {
            iVar2 = *(int *)(local_34 + 0x160);
            while (true) {
                uVar3 = FUN_000208ac(auStack_30, local_34 + 0x1a8);
                if (in_d0 < (double)CONCAT44(extraout_s1, uVar3)) {
                    FUN_0002c380(param_1, local_34);
                    FUN_0002a9d4(&local_34, "cgminer.c", "age_queued_work",
                                 0x25a0);
                    iVar1 = iVar1 + 1;
                }
                local_34 = iVar2;
                if (iVar2 == 0)
                    break;
                iVar2 = *(int *)(iVar2 + 0x160);
            }
        }
        iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x140));
        if (iVar2 == 0) {
            (*DAT_0006797c)();
            return iVar1;
        }
    } else {
        FUN_0002cddc("age_queued_work", 0x259a);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002d984("age_queued_work", 0x25a5);
}

void FUN_0002df98(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_808[2052];

    piVar1 = __errno_location();
    snprintf(acStack_808, 0x800,
             "WTF RDLOCK ERROR ON LOCK! errno=%d in %s %s():%d", *piVar1,
             "cgminer.c", param_1, param_2);
    FUN_0001dbec(3, acStack_808, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

int FUN_0002dff4(int param_1, int param_2)

{
    int iVar1;
    int iVar2;
    int iVar3;

    iVar1 = pthread_rwlock_rdlock((pthread_rwlock_t *)(param_1 + 0x140));
    if (iVar1 != 0) {
        FUN_0002df98("clone_queued_work_byid", 0x2580);
        goto LAB_0002e0b0;
    }
    iVar1 = *(int *)(param_1 + 0x160);
    if (iVar1 != 0) {
        iVar2 = *(int *)(iVar1 + 0x160);
        iVar3 = iVar1;
        if (param_2 != *(int *)(iVar1 + 0x154)) {
            if (iVar2 == 0) {
                iVar1 = 0;
                goto LAB_0002e060;
            }
            iVar3 = *(int *)(iVar2 + 0x160);
            while (iVar1 = iVar3, iVar3 = iVar2,
                   param_2 != *(int *)(iVar2 + 0x154)) {
                if (iVar1 == 0)
                    goto LAB_0002e060;
                iVar3 = *(int *)(iVar1 + 0x160);
                iVar2 = iVar1;
            }
        }
        iVar1 = FUN_0002dbec();
        FUN_0002a8bc(iVar1, iVar3, 0);
    }
LAB_0002e060:
    iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x140));
    if (iVar2 == 0) {
        (*DAT_0006797c)();
        return iVar1;
    }
LAB_0002e0b0:
    /* WARNING: Subroutine does not return */
    FUN_0002d984("clone_queued_work_byid", 0x2584);
}

undefined4 FUN_0002e0c0(int param_1, undefined4 param_2, undefined4 param_3,
                        undefined4 param_4, undefined4 param_5,
                        undefined4 param_6)

{
    int iVar1;
    undefined4 uVar2;

    iVar1 = pthread_rwlock_rdlock((pthread_rwlock_t *)(param_1 + 0x140));
    if (iVar1 == 0) {
        iVar1 = FUN_0002c2c4(*(undefined4 *)(param_1 + 0x160), param_2, param_3,
                             param_4, param_5, param_6);
        if (iVar1 == 0) {
            uVar2 = 0;
        } else {
            uVar2 = FUN_0002dbec();
            FUN_0002a8bc(uVar2, iVar1, 0);
        }
        iVar1 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x140));
        if (iVar1 == 0) {
            (*DAT_0006797c)();
            return uVar2;
        }
    } else {
        FUN_0002df98("clone_queued_work_bymidstate", 0x2551);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002d984("clone_queued_work_bymidstate", 0x2555);
}

int FUN_0002e17c(int param_1, int param_2)

{
    int iVar1;
    int iVar2;
    int iVar3;

    iVar1 = pthread_rwlock_rdlock((pthread_rwlock_t *)(param_1 + 0x140));
    if (iVar1 == 0) {
        iVar1 = *(int *)(param_1 + 0x160);
        if (((iVar1 != 0) && (iVar2 = *(int *)(iVar1 + 0x160),
                              param_2 != *(int *)(iVar1 + 0x154))) &&
            (iVar1 = iVar2, iVar2 != 0)) {
            for (iVar3 = *(int *)(iVar2 + 0x160);
                 (iVar1 = iVar2, param_2 != *(int *)(iVar2 + 0x154) &&
                                     (iVar1 = iVar3, iVar3 != 0));
                 iVar3 = *(int *)(iVar3 + 0x160)) {
                iVar2 = iVar3;
            }
        }
        iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x140));
        if (iVar2 == 0) {
            (*DAT_0006797c)();
            return iVar1;
        }
    } else {
        FUN_0002df98("find_queued_work_byid", 0x2574);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002d984("find_queued_work_byid", 0x2576);
}

undefined4 FUN_0002e230(int param_1, undefined4 param_2, undefined4 param_3,
                        undefined4 param_4, undefined4 param_5,
                        undefined4 param_6)

{
    int iVar1;
    undefined4 uVar2;

    iVar1 = pthread_rwlock_rdlock((pthread_rwlock_t *)(param_1 + 0x140));
    if (iVar1 == 0) {
        uVar2 = FUN_0002c2c4(*(undefined4 *)(param_1 + 0x160), param_2, param_3,
                             param_4, param_5, param_6);
        iVar1 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x140));
        if (iVar1 == 0) {
            (*DAT_0006797c)();
            return uVar2;
        }
    } else {
        FUN_0002df98("find_queued_work_bymidstate", 0x2545);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002d984("find_queued_work_bymidstate", 0x2547);
}

undefined4 FUN_0002e2cc(int param_1)

{
    int iVar1;
    undefined4 uVar2;

    iVar1 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_00074fb8);
    if (iVar1 == 0) {
        uVar2 = *(undefined4 *)(DAT_00074f60 + param_1 * 4);
        iVar1 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00074fb8);
        if (iVar1 == 0) {
            (*DAT_0006797c)();
            return uVar2;
        }
    } else {
        FUN_0002df98("get_devices", 0x27a);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002d984("get_devices", 0x27c);
}

/* WARNING: Globals starting with '_' overlap smaller symbols at the same
 * address */

void FUN_0002e340(void)

{
    int iVar1;
    char *pcVar2;
    int iVar3;
    int iVar4;
    uint uVar5;
    undefined1 *puVar6;
    int iVar7;
    uint uVar8;
    int iVar9;
    double dVar10;
    double dVar11;
    double dVar12;
    double dVar13;
    undefined1 auStack_940[256];
    undefined4 local_840;
    char acStack_83c[28];
    ushort local_820;
    undefined1 local_81e;

    dVar13 = _DAT_000681c0;
    iVar9 = DAT_00068b28 - DAT_00068b30;
    if (DAT_00068b2c - DAT_00068b34 < 0) {
        iVar9 = iVar9 + -1;
    }
    dVar10 = (double)FUN_0004ace4(DAT_00072ee8, DAT_00072eec,
                                  (iVar9 % 0xe10) * -0x77777777);
    dVar11 = (double)FUN_0004ace4(DAT_00072dc0, DAT_00072dc4);
    if (((DAT_00072d88 == 0) && (DAT_000686e0 == 0)) &&
        ((int)DAT_00067858 < 4)) {
        if ((int)DAT_00067858 < 4)
            goto LAB_0002f370;
    LAB_0002e48c:
        snprintf((char *)&local_840, 0x800, "Started at %s", &DAT_00068b38);
        FUN_0001dbec(4, &local_840, 0);
        if (DAT_00072e58 == 1) {
            if ((DAT_00072d88 == 0) && (DAT_000686e0 == 0))
                goto LAB_0002f4b0;
            goto LAB_0002f4c0;
        }
    LAB_0002e4c8:
        if ((DAT_00072d88 == 0) && (DAT_000686e0 == 0))
            goto LAB_0002f390;
    LAB_0002e4e8:
        snprintf((char *)&local_840, 0x800,
                 "Runtime: %d hrs : %d mins : %d secs", iVar9 / 0xe10,
                 (iVar9 % 0xe10) / 0x3c, iVar9 % 0x3c);
        FUN_0001dbec(4, &local_840, 0);
        dVar12 = _DAT_00072d80 / _DAT_000681c0;
        puVar6 = &DAT_00072d80;
        if ((DAT_00072d88 == 0) &&
            (puVar6 = (undefined1 *)(uint)DAT_000686e0,
             (undefined1 *)(uint)DAT_000686e0 == (undefined1 *)0x0))
            goto LAB_0002f3b0;
    LAB_0002e550:
        snprintf((char *)&local_840, 0x800, "Average hashrate: %.1f Mhash/s",
                 puVar6, dVar12);
        FUN_0001dbec(4, &local_840, 0);
        if ((DAT_00072d88 == 0) && (DAT_000686e0 == 0))
            goto LAB_0002f6b4;
    LAB_0002e598:
        snprintf((char *)&local_840, 0x800, "Solved blocks: %d", DAT_0007606c);
        FUN_0001dbec(4, &local_840, 0);
        if ((DAT_00072d88 == 0) && (DAT_000686e0 == 0))
            goto LAB_0002f6c4;
    LAB_0002e5e8:
        snprintf((char *)&local_840, 0x800, "Best share difficulty: %s",
                 &DAT_000681c8);
        FUN_0001dbec(4, &local_840, 0);
        if ((DAT_00072d88 == 0) && (DAT_000686e0 == 0))
            goto LAB_0002f504;
    LAB_0002e630:
        snprintf((char *)&local_840, 0x800, "Share submissions: %lld",
                 DAT_00072ee8 + DAT_00074fb0, DAT_00072ee8 + DAT_00074fb0,
                 DAT_00072eec + DAT_00074fb4 +
                     (uint)CARRY4(DAT_00072ee8, DAT_00074fb0));
        FUN_0001dbec(4, &local_840, 0);
        puVar6 = (undefined1 *)(uint)DAT_00072d88;
        if (((undefined1 *)(uint)DAT_00072d88 == (undefined1 *)0x0) &&
            (puVar6 = (undefined1 *)(uint)DAT_000686e0,
             (undefined1 *)(uint)DAT_000686e0 == (undefined1 *)0x0))
            goto LAB_0002f514;
    LAB_0002e698:
        snprintf((char *)&local_840, 0x800, "Accepted shares: %lld", puVar6,
                 DAT_00072ee8, DAT_00072eec);
        FUN_0001dbec(4, &local_840, 0);
        if ((DAT_00072d88 == 0) && (DAT_000686e0 == 0))
            goto LAB_0002f524;
    LAB_0002e6e4:
        snprintf((char *)&local_840, 0x800, "Rejected shares: %lld",
                 &DAT_00074fb0, DAT_00074fb0, DAT_00074fb4);
        FUN_0001dbec(4, &local_840, 0);
        if ((DAT_00072d88 == 0) && (DAT_000686e0 == 0))
            goto LAB_0002f534;
    LAB_0002e754:
        snprintf((char *)&local_840, 0x800, "Accepted difficulty shares: %1.f",
                 &DAT_00074f20, _DAT_00074f20, DAT_00074f24);
        FUN_0001dbec(4, &local_840, 0);
        if ((DAT_00072d88 == 0) && (DAT_000686e0 == 0))
            goto LAB_0002f544;
    LAB_0002e7a8:
        snprintf((char *)&local_840, 0x800, "Rejected difficulty shares: %1.f",
                 &DAT_00074fa8, _DAT_00074fa8, DAT_00074fac);
        FUN_0001dbec(4, &local_840, 0);
        uVar8 = DAT_00072ee8;
        iVar9 = DAT_00072eec;
        if (DAT_00072ee8 != 0 || DAT_00072eec != 0) {
        joined_r0x0002e7f0:
            if ((DAT_00072d88 == 0) && (DAT_000686e0 == 0))
                goto LAB_0002f560;
            goto LAB_0002e808;
        }
    LAB_0002eb94:
        if (DAT_00074fb0 != 0 || DAT_00074fb4 != 0) {
            uVar8 = 0;
            iVar9 = 0;
            goto joined_r0x0002e7f0;
        }
    LAB_0002e888:
        if ((DAT_00072d88 == 0) && (DAT_000686e0 == 0))
            goto LAB_0002f3fc;
    LAB_0002e8a8:
        snprintf((char *)&local_840, 0x800, "Hardware errors: %d",
                 DAT_00076058);
        FUN_0001dbec(4, &local_840, 0);
        puVar6 = (undefined1 *)(uint)DAT_00072d88;
        if ((((undefined1 *)(uint)DAT_00072d88 == (undefined1 *)0x0) &&
             (puVar6 = (undefined1 *)(uint)DAT_000686e0,
              (undefined1 *)(uint)DAT_000686e0 == (undefined1 *)0x0)) &&
            (puVar6 = DAT_00067858, (int)DAT_00067858 < 4))
            goto LAB_0002f418;
    LAB_0002e8fc:
        snprintf((char *)&local_840, 0x800,
                 "Utility (accepted shares / min): %.2f/min", puVar6,
                 (dVar10 / dVar13) * 60.0);
        FUN_0001dbec(4, &local_840, 0);
        puVar6 = (undefined1 *)(uint)DAT_00072d88;
        if ((((undefined1 *)(uint)DAT_00072d88 == (undefined1 *)0x0) &&
             (puVar6 = (undefined1 *)(uint)DAT_000686e0,
              (undefined1 *)(uint)DAT_000686e0 == (undefined1 *)0x0)) &&
            (puVar6 = DAT_00067858, (int)DAT_00067858 < 4))
            goto LAB_0002f428;
    LAB_0002e944:
        snprintf((char *)&local_840, 0x800,
                 "Work Utility (diff1 shares solved / min): %.2f/min\n", puVar6,
                 (dVar11 / dVar13) * 60.0);
        FUN_0001dbec(4, &local_840, 0);
        if (((DAT_00072d88 == 0) && (DAT_000686e0 == 0)) &&
            ((int)DAT_00067858 < 4))
            goto LAB_0002f438;
    LAB_0002e98c:
        snprintf((char *)&local_840, 0x800,
                 "Stale submissions discarded due to new blocks: %lld",
                 &DAT_000762c0, DAT_000762c0, DAT_000762c4);
        FUN_0001dbec(4, &local_840, 0);
        if (((DAT_00072d88 == 0) && (DAT_000686e0 == 0)) &&
            ((int)DAT_00067858 < 4))
            goto LAB_0002f448;
    LAB_0002e9e0:
        snprintf((char *)&local_840, 0x800,
                 "Unable to get work from server occasions: %d", DAT_00072f00);
        FUN_0001dbec(4, &local_840, 0);
        if (((DAT_00072d88 == 0) && (DAT_000686e0 == 0)) &&
            ((int)DAT_00067858 < 4))
            goto LAB_0002f458;
    LAB_0002ea30:
        snprintf((char *)&local_840, 0x800, "Work items generated locally: %d",
                 DAT_00072f0c);
        FUN_0001dbec(4, &local_840, 0);
        if (((DAT_00072d88 == 0) && (DAT_000686e0 == 0)) &&
            ((int)DAT_00067858 < 4))
            goto LAB_0002f468;
    LAB_0002ea80:
        snprintf((char *)&local_840, 0x800,
                 "Submitting work remotely delay occasions: %d", DAT_00072da4);
        FUN_0001dbec(4, &local_840, 0);
        if (((DAT_00072d88 == 0) && (DAT_000686e0 == 0)) &&
            ((int)DAT_00067858 < 4))
            goto LAB_0002f478;
    LAB_0002ead0:
        snprintf((char *)&local_840, 0x800,
                 "New blocks detected on network: %d\n", DAT_000761d0);
        FUN_0001dbec(4, &local_840, 0);
        if (1 < DAT_00072e58)
            goto LAB_0002eb0c;
    LAB_0002ef84:
        if ((DAT_00072d88 == 0) && (DAT_000686e0 == 0))
            goto LAB_0002f3cc;
    LAB_0002efa4:
        local_840._0_1_ = 'S';
        local_840._1_1_ = 'u';
        local_840._2_1_ = 'm';
        local_840._3_1_ = 'm';
        builtin_strncpy(acStack_83c, "ary of per device statistics", 0x1c);
        local_820 = 0xa3a;
        local_81e = 0;
        FUN_0001dbec(4, &local_840, 0);
    } else {
        local_840._0_1_ = '\n';
        local_840._1_1_ = 'S';
        local_840._2_1_ = 'u';
        local_840._3_1_ = 'm';
        builtin_strncpy(acStack_83c, "mary of runtime statistics:\n", 0x1c);
        local_820 = local_820 & 0xff00;
        FUN_0001dbec(4, &local_840, 0);
        if (((DAT_00072d88 != 0) || (DAT_000686e0 != 0)) ||
            (3 < (int)DAT_00067858))
            goto LAB_0002e48c;
    LAB_0002f370:
        if (DAT_00072e58 != 1)
            goto LAB_0002e4c8;
    LAB_0002f4b0:
        if (3 < (int)DAT_00067858) {
        LAB_0002f4c0:
            snprintf((char *)&local_840, 0x800, "Pool: %s",
                     *(undefined4 *)(*DAT_00072efc + 0xa4));
            FUN_0001dbec(4, &local_840, 0);
            goto LAB_0002e4c8;
        }
    LAB_0002f390:
        if (3 < (int)DAT_00067858)
            goto LAB_0002e4e8;
        dVar12 = _DAT_00072d80 / _DAT_000681c0;
    LAB_0002f3b0:
        puVar6 = DAT_00067858;
        if (3 < (int)DAT_00067858)
            goto LAB_0002e550;
    LAB_0002f6b4:
        if (3 < (int)DAT_00067858)
            goto LAB_0002e598;
    LAB_0002f6c4:
        if (3 < (int)DAT_00067858)
            goto LAB_0002e5e8;
    LAB_0002f504:
        if (3 < (int)DAT_00067858)
            goto LAB_0002e630;
    LAB_0002f514:
        puVar6 = DAT_00067858;
        if (3 < (int)DAT_00067858)
            goto LAB_0002e698;
    LAB_0002f524:
        if (3 < (int)DAT_00067858)
            goto LAB_0002e6e4;
    LAB_0002f534:
        if (3 < (int)DAT_00067858)
            goto LAB_0002e754;
    LAB_0002f544:
        if (3 < (int)DAT_00067858)
            goto LAB_0002e7a8;
        uVar8 = DAT_00072ee8;
        iVar9 = DAT_00072eec;
        if (DAT_00072ee8 == 0 && DAT_00072eec == 0)
            goto LAB_0002eb94;
    LAB_0002f560:
        if (3 < (int)DAT_00067858) {
        LAB_0002e808:
            iVar7 = DAT_00074fb4;
            uVar5 = DAT_00074fb0;
            iVar1 = DAT_00074fb4 * 3 +
                    (uint)CARRY4(DAT_00074fb0, DAT_00074fb0) +
                    (uint)CARRY4(DAT_00074fb0 * 2, DAT_00074fb0);
            FUN_0004ace4(
                DAT_00074fb0 * 100,
                iVar1 + (iVar1 * 0x20 | DAT_00074fb0 * 3 >> 0x1b) +
                    (uint)CARRY4(DAT_00074fb0 * 3, DAT_00074fb0 * 0x60) +
                    DAT_00074fb4 +
                    (uint)CARRY4(DAT_00074fb0 * 99, DAT_00074fb0));
            FUN_0004ace4(uVar5 + uVar8,
                         iVar7 + iVar9 + (uint)CARRY4(uVar5, uVar8));
            snprintf((char *)&local_840, 0x800, "Reject ratio: %.1f%%");
            FUN_0001dbec(4, &local_840, 0);
            goto LAB_0002e888;
        }
    LAB_0002f3fc:
        if (3 < (int)DAT_00067858)
            goto LAB_0002e8a8;
        puVar6 = DAT_00067858;
        if (3 < (int)DAT_00067858)
            goto LAB_0002e8fc;
    LAB_0002f418:
        puVar6 = DAT_00067858;
        if (3 < (int)DAT_00067858)
            goto LAB_0002e944;
    LAB_0002f428:
        if (3 < (int)DAT_00067858)
            goto LAB_0002e98c;
    LAB_0002f438:
        if (3 < (int)DAT_00067858)
            goto LAB_0002e9e0;
    LAB_0002f448:
        if (3 < (int)DAT_00067858)
            goto LAB_0002ea30;
    LAB_0002f458:
        if (3 < (int)DAT_00067858)
            goto LAB_0002ea80;
    LAB_0002f468:
        if (3 < (int)DAT_00067858)
            goto LAB_0002ead0;
    LAB_0002f478:
        if (1 < DAT_00072e58) {
        LAB_0002eb0c:
            iVar9 = 0;
            do {
                iVar7 = DAT_00072efc[iVar9];
                if (((DAT_00072d88 == 0) && (DAT_000686e0 == 0)) &&
                    ((int)DAT_00067858 < 4)) {
                    iVar1 = *(int *)(iVar7 + 0x20);
                    if (iVar1 == 0)
                        goto LAB_0002ec50;
                LAB_0002eb80:
                    if (3 < (int)DAT_00067858)
                        goto LAB_0002ec04;
                LAB_0002f218:
                    if (3 < (int)DAT_00067858)
                        goto LAB_0002ec60;
                LAB_0002f224:
                    puVar6 = DAT_00067858;
                    if (3 < (int)DAT_00067858)
                        goto LAB_0002ecbc;
                LAB_0002f234:
                    puVar6 = DAT_00067858;
                    if (3 < (int)DAT_00067858)
                        goto LAB_0002ed00;
                LAB_0002f244:
                    puVar6 = DAT_00067858;
                    if (3 < (int)DAT_00067858)
                        goto LAB_0002ed44;
                LAB_0002f254:
                    puVar6 = DAT_00067858;
                    if (3 < (int)DAT_00067858)
                        goto LAB_0002ed88;
                    uVar8 = *(uint *)(iVar7 + 8);
                    iVar1 = *(int *)(iVar7 + 0xc);
                    if (uVar8 == 0 && iVar1 == 0)
                        goto LAB_0002edc0;
                    if (3 < (int)DAT_00067858)
                        goto LAB_0002edec;
                LAB_0002f27c:
                    if (3 < (int)DAT_00067858)
                        goto LAB_0002ee90;
                LAB_0002f288:
                    if (3 < (int)DAT_00067858)
                        goto LAB_0002eed4;
                LAB_0002f298:
                    if (3 < (int)DAT_00067858)
                        goto LAB_0002ef14;
                LAB_0002f2a8:
                    if (3 < (int)DAT_00067858)
                        goto LAB_0002ef50;
                } else {
                    snprintf((char *)&local_840, 0x800, "Pool: %s",
                             *(undefined4 *)(iVar7 + 0xa4));
                    FUN_0001dbec(4, &local_840, 0);
                    iVar1 = *(int *)(iVar7 + 0x20);
                    if (iVar1 != 0) {
                        if ((DAT_00072d88 == 0) && (DAT_000686e0 == 0))
                            goto LAB_0002eb80;
                    LAB_0002ec04:
                        pcVar2 = "S";
                        if (iVar1 < 2) {
                            pcVar2 = "";
                        }
                        snprintf((char *)&local_840, 0x800,
                                 "SOLVED %d BLOCK%s!", iVar1, pcVar2);
                        FUN_0001dbec(4, &local_840, 0);
                    }
                    if (DAT_00072d88 == 0) {
                    LAB_0002ec50:
                        if (DAT_000686e0 == 0)
                            goto LAB_0002f218;
                    }
                LAB_0002ec60:
                    snprintf((char *)&local_840, 0x800,
                             " Share submissions: %lld",
                             *(int *)(iVar7 + 0xc) + *(int *)(iVar7 + 0x14) +
                                 (uint)CARRY4(*(uint *)(iVar7 + 8),
                                              *(uint *)(iVar7 + 0x10)),
                             *(uint *)(iVar7 + 8) + *(uint *)(iVar7 + 0x10));
                    FUN_0001dbec(4, &local_840, 0);
                    puVar6 = (undefined1 *)(uint)DAT_00072d88;
                    if (((undefined1 *)(uint)DAT_00072d88 ==
                         (undefined1 *)0x0) &&
                        (puVar6 = (undefined1 *)(uint)DAT_000686e0,
                         (undefined1 *)(uint)DAT_000686e0 == (undefined1 *)0x0))
                        goto LAB_0002f224;
                LAB_0002ecbc:
                    snprintf((char *)&local_840, 0x800,
                             " Accepted shares: %lld", puVar6,
                             *(undefined4 *)(iVar7 + 8));
                    FUN_0001dbec(4, &local_840, 0);
                    puVar6 = (undefined1 *)(uint)DAT_00072d88;
                    if (((undefined1 *)(uint)DAT_00072d88 ==
                         (undefined1 *)0x0) &&
                        (puVar6 = (undefined1 *)(uint)DAT_000686e0,
                         (undefined1 *)(uint)DAT_000686e0 == (undefined1 *)0x0))
                        goto LAB_0002f234;
                LAB_0002ed00:
                    snprintf((char *)&local_840, 0x800,
                             " Rejected shares: %lld", puVar6,
                             *(undefined4 *)(iVar7 + 0x10));
                    FUN_0001dbec(4, &local_840, 0);
                    puVar6 = (undefined1 *)(uint)DAT_00072d88;
                    if (((undefined1 *)(uint)DAT_00072d88 ==
                         (undefined1 *)0x0) &&
                        (puVar6 = (undefined1 *)(uint)DAT_000686e0,
                         (undefined1 *)(uint)DAT_000686e0 == (undefined1 *)0x0))
                        goto LAB_0002f244;
                LAB_0002ed44:
                    snprintf((char *)&local_840, 0x800,
                             " Accepted difficulty shares: %1.f", puVar6,
                             *(undefined4 *)(iVar7 + 0x48));
                    FUN_0001dbec(4, &local_840, 0);
                    puVar6 = (undefined1 *)(uint)DAT_00072d88;
                    if (((undefined1 *)(uint)DAT_00072d88 ==
                         (undefined1 *)0x0) &&
                        (puVar6 = (undefined1 *)(uint)DAT_000686e0,
                         (undefined1 *)(uint)DAT_000686e0 == (undefined1 *)0x0))
                        goto LAB_0002f254;
                LAB_0002ed88:
                    snprintf((char *)&local_840, 0x800,
                             " Rejected difficulty shares: %1.f", puVar6,
                             *(undefined4 *)(iVar7 + 0x50));
                    FUN_0001dbec(4, &local_840, 0);
                    uVar8 = *(uint *)(iVar7 + 8);
                    iVar1 = *(int *)(iVar7 + 0xc);
                    if (uVar8 == 0 && iVar1 == 0) {
                    LAB_0002edc0:
                        if (*(int *)(iVar7 + 0x10) != 0 ||
                            *(int *)(iVar7 + 0x14) != 0) {
                            uVar8 = 0;
                            iVar1 = 0;
                            goto LAB_0002edd4;
                        }
                    } else {
                    LAB_0002edd4:
                        if (((DAT_00072d88 == 0) && (DAT_000686e0 == 0)) &&
                            ((int)DAT_00067858 < 4))
                            goto LAB_0002f27c;
                    LAB_0002edec:
                        uVar5 = *(uint *)(iVar7 + 0x10);
                        iVar4 = *(int *)(iVar7 + 0x14);
                        iVar3 = iVar4 * 3 + (uint)CARRY4(uVar5, uVar5) +
                                (uint)CARRY4(uVar5 * 2, uVar5);
                        FUN_0004ace4(
                            uVar5 * 100,
                            iVar3 + (iVar3 * 0x20 | uVar5 * 3 >> 0x1b) +
                                (uint)CARRY4(uVar5 * 3, uVar5 * 0x60) + iVar4 +
                                (uint)CARRY4(uVar5 * 99, uVar5));
                        FUN_0004ace4(uVar5 + uVar8,
                                     iVar4 + iVar1 +
                                         (uint)CARRY4(uVar5, uVar8));
                        snprintf((char *)&local_840, 0x800,
                                 " Reject ratio: %.1f%%");
                        FUN_0001dbec(4, &local_840, 0);
                    }
                    if ((DAT_00072d88 == 0) && (DAT_000686e0 == 0))
                        goto LAB_0002f27c;
                LAB_0002ee90:
                    snprintf((char *)&local_840, 0x800, " Items worked on: %d",
                             *(undefined4 *)(iVar7 + 0x44));
                    FUN_0001dbec(4, &local_840, 0);
                    if ((DAT_00072d88 == 0) && (DAT_000686e0 == 0))
                        goto LAB_0002f288;
                LAB_0002eed4:
                    snprintf(
                        (char *)&local_840, 0x800,
                        " Stale submissions discarded due to new blocks: %d",
                        *(undefined4 *)(iVar7 + 0x78));
                    FUN_0001dbec(4, &local_840, 0);
                    if ((DAT_00072d88 == 0) && (DAT_000686e0 == 0))
                        goto LAB_0002f298;
                LAB_0002ef14:
                    snprintf((char *)&local_840, 0x800,
                             " Unable to get work from server occasions: %d",
                             *(undefined4 *)(iVar7 + 0x80));
                    FUN_0001dbec(4, &local_840, 0);
                    if ((DAT_00072d88 == 0) && (DAT_000686e0 == 0))
                        goto LAB_0002f2a8;
                LAB_0002ef50:
                    snprintf((char *)&local_840, 0x800,
                             " Submitting work remotely delay occasions: %d\n",
                             *(undefined4 *)(iVar7 + 0x84));
                    FUN_0001dbec(4, &local_840, 0);
                }
                iVar9 = iVar9 + 1;
            } while (iVar9 < DAT_00072e58);
            goto LAB_0002ef84;
        }
    LAB_0002f3cc:
        if (3 < (int)DAT_00067858)
            goto LAB_0002efa4;
    }
    if (0 < DAT_00074fd8) {
        iVar9 = 0;
        do {
            iVar7 = FUN_0002e2cc(iVar9);
            iVar9 = iVar9 + 1;
            *(undefined **)(*(int *)(iVar7 + 4) + 0x14) = &DAT_000285f0;
            *(undefined **)(*(int *)(iVar7 + 4) + 0x18) = &DAT_0002a37c;
            FUN_0002c628(auStack_940, 0xff, iVar7);
            if (((DAT_00072d88 != 0) || (DAT_000686e0 != 0)) ||
                (3 < (int)DAT_00067858)) {
                snprintf((char *)&local_840, 0x800, "%s", auStack_940);
                FUN_0001dbec(4, &local_840, 0);
            }
        } while (iVar9 < DAT_00074fd8);
    }
    puVar6 = (undefined1 *)(uint)DAT_00072d88;
    if (DAT_00068b60 == 0) {
    LAB_0002f1a8:
        if ((puVar6 == (undefined1 *)0x0) && (DAT_000686e0 == 0))
            goto LAB_0002f3e4;
    } else {
        dVar13 = (double)CONCAT44(DAT_00074f24, _DAT_00074f20);
        if (((puVar6 != (undefined1 *)0x0) ||
             (puVar6 = &DAT_000686e0, DAT_000686e0 != 0)) ||
            (3 < (int)DAT_00067858)) {
            snprintf((char *)&local_840, 0x800,
                     "Mined %.0f accepted shares of %d requested\n", puVar6,
                     dVar13, DAT_00068b60);
            FUN_0001dbec(4, &local_840, 0);
            dVar13 = (double)CONCAT44(DAT_00074f24, _DAT_00074f20);
            puVar6 = (undefined1 *)(uint)DAT_00072d88;
            if (dVar13 < (double)(longlong)DAT_00068b60) {
                if (puVar6 == (undefined1 *)0x0)
                    goto LAB_0002f154;
            LAB_0002f178:
                snprintf((char *)&local_840, 0x800,
                         "WARNING - Mined only %.0f shares of %d requested.",
                         puVar6, dVar13, DAT_00068b60);
                FUN_0001dbec(4, &local_840, 0);
                puVar6 = (undefined1 *)(uint)DAT_00072d88;
            }
            goto LAB_0002f1a8;
        }
        if (dVar13 < (double)(longlong)DAT_00068b60) {
        LAB_0002f154:
            puVar6 = (undefined1 *)(uint)DAT_000686e0;
            if (((undefined1 *)(uint)DAT_000686e0 != (undefined1 *)0x0) ||
                (puVar6 = DAT_00067858, 3 < (int)DAT_00067858))
                goto LAB_0002f178;
        }
    LAB_0002f3e4:
        if ((int)DAT_00067858 < 4)
            goto LAB_0002f1e0;
    }
    local_840._0_2_ = 0x20;
    FUN_0001dbec(4, &local_840, 0);
LAB_0002f1e0:
    fflush(stderr);
    fflush(stdout);
    return;
}

void FUN_0002f6fc(int param_1)

{
    int iVar1;
    int *piVar2;
    char *pcVar3;
    sysinfo local_850;
    char acStack_810[2052];

    iVar1 = sysinfo(&local_850);
    if (iVar1 == 0) {
        DAT_000761cc = local_850.uptime;
        FUN_00020580(&DAT_00068b28);
    } else {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (5 < DAT_00067858)) {
            piVar2 = __errno_location();
            iVar1 = *piVar2;
            pcVar3 = strerror(iVar1);
            snprintf(acStack_810, 0x800,
                     "Failed to get sysinfo, errno:%u, reason:%s\n", iVar1,
                     pcVar3);
            FUN_0001dbec(6, acStack_810, 0);
        }
        DAT_000761cc = time((time_t *)0x0);
        FUN_00020580(&DAT_00068b28);
    }
    if (((param_1 == 0) && (DAT_000761c8 == '\0')) && (DAT_000686e2 != '\0')) {
        FUN_0002e340();
        return;
    }
    return;
}

void FUN_0002f824(void)

{
    char local_810[28];
    undefined2 local_7f4;

    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
        (3 < DAT_00067858)) {
        snprintf(local_810, 0x800, "Attempting to restart %s", &DAT_00068904);
        FUN_0001dbec(4, local_810, 0);
    }
    FUN_00023100(&LAB_0002fd2c, 0, 5000);
    FUN_0002f6fc(1);
    if (0 < DAT_00068b0c) {
        kill(DAT_00068b0c, 0xf);
        DAT_00068b0c = 0;
    }
    execv(*DAT_00068b64, DAT_00068b64);
    if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
        (DAT_00067858 < 4)) {
        return;
    }
    builtin_strncpy(local_810, "Failed to restart applicatio", 0x1c);
    local_7f4 = 0x6e;
    FUN_0001dbec(4, local_810, 0);
    return;
}

undefined4 FUN_0002f964(int param_1)

{
    int iVar1;
    undefined4 uVar2;

    iVar1 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_00074f88);
    if (iVar1 == 0) {
        uVar2 = *(undefined4 *)(DAT_00073f18 + param_1 * 4);
        iVar1 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00074f88);
        if (iVar1 == 0) {
            (*DAT_0006797c)();
            return uVar2;
        }
    } else {
        FUN_0002df98("get_thread", 0x266);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002d984("get_thread", 0x268);
}

void FUN_0002f9ec(void)

{
    int iVar1;
    int iVar2;
    char local_820[20];
    undefined4 local_80c;
    char acStack_808[2024];

    if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
        (DAT_00067858 < 6)) {
        if (DAT_000686e1 == '\0')
            goto LAB_0002fab4;
    LAB_0002fcc4:
        if (DAT_00067858 < 7)
            goto LAB_0002fab4;
    } else {
        builtin_strncpy(local_820, "Received kill messag", 0x14);
        local_80c._0_2_ = 0x65;
        FUN_0001dbec(6, local_820, 1);
        if (DAT_000686e1 == '\0')
            goto LAB_0002fab4;
        if ((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0'))
            goto LAB_0002fcc4;
    }
    builtin_strncpy(local_820, "Killing off watchpoo", 0x14);
    local_80c._0_1_ = 'l';
    local_80c._1_1_ = ' ';
    local_80c._2_1_ = 't';
    local_80c._3_1_ = 'h';
    builtin_strncpy(acStack_808, "read", 5);
    FUN_0001dbec(7, local_820, 1);
LAB_0002fab4:
    FUN_00023100(FUN_00020164, DAT_00072db8 + DAT_00068b68 * 0x40, 1000);
    if ((DAT_000686e1 != '\0') &&
        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
          (6 < DAT_00067858)))) {
        builtin_strncpy(local_820, "Killing off watchdog", 0x14);
        local_80c._0_1_ = ' ';
        local_80c._1_1_ = 't';
        local_80c._2_1_ = 'h';
        local_80c._3_1_ = 'r';
        builtin_strncpy(acStack_808, "ead", 4);
        FUN_0001dbec(7, local_820, 1);
    }
    FUN_00023100(FUN_00020164, DAT_00072db8 + DAT_00068b6c * 0x40, 1000);
    if ((DAT_000686e1 != '\0') &&
        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
          (6 < DAT_00067858)))) {
        builtin_strncpy(local_820, "Shutting down mining", 0x14);
        local_80c._0_1_ = ' ';
        local_80c._1_1_ = 't';
        local_80c._2_1_ = 'h';
        local_80c._3_1_ = 'r';
        builtin_strncpy(acStack_808, "eads", 4);
        acStack_808[4] = 0;
        FUN_0001dbec(7, local_820, 1);
    }
    if (0 < DAT_00076220) {
        iVar1 = 0;
        do {
            iVar2 = iVar1 + 1;
            iVar1 = FUN_0002f964(iVar1);
            if ((iVar1 != 0) && (*(int *)(iVar1 + 0x24) != 0)) {
                *(undefined1 *)(*(int *)(iVar1 + 0x24) + 0x16c) = 1;
            }
            iVar1 = iVar2;
        } while (iVar2 < DAT_00076220);
    }
    sleep(1);
    FUN_00023100(&DAT_0002fd44, 0, 3000);
    if ((DAT_000686e1 != '\0') &&
        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
          (6 < DAT_00067858)))) {
        builtin_strncpy(local_820, "Killing off API thre", 0x14);
        local_80c._0_3_ = 0x6461;
        FUN_0001dbec(7, local_820, 1);
    }
    FUN_00023100(FUN_00020164, DAT_00072db8 + DAT_00068b70 * 0x40, 1000);
    return;
}

undefined4 FUN_0002fe54(void)

{
    undefined4 uVar1;
    int iVar2;

    iVar2 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00076140);
    if (iVar2 == 0) {
        iVar2 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_00076158);
        if (iVar2 == 0) {
            iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00076140);
            uVar1 = DAT_00068b74;
            if (iVar2 == 0) {
                iVar2 =
                    pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00076158);
                if (iVar2 == 0) {
                    (*DAT_0006797c)();
                    return uVar1;
                }
                /* WARNING: Subroutine does not return */
                FUN_0002d984("current_pool", 0x34f);
            }
            goto LAB_0002fedc;
        }
    } else {
        FUN_0002ce38("current_pool", 0x34b);
    }
    FUN_0002df98("current_pool", 0x34b);
LAB_0002fedc:
    /* WARNING: Subroutine does not return */
    FUN_0002ce94("current_pool", 0x34b);
}

void FUN_0002fefc(int param_1, int param_2, uint param_3)

{
    int iVar1;
    time_t tVar2;
    int iVar3;
    uint uVar4;
    bool bVar5;

    iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00072d8c);
    if (iVar1 == 0) {
        iVar3 = *(int *)(param_1 + 0x24);
        iVar1 = (int)param_3 >> 0x1f;
        uVar4 = *(uint *)(iVar3 + 0xc0);
        bVar5 = CARRY4(DAT_00072dc0, param_3);
        DAT_00072dc0 = DAT_00072dc0 + param_3;
        DAT_00072dc4 = DAT_00072dc4 + iVar1 + (uint)bVar5;
        *(uint *)(iVar3 + 0xc0) = uVar4 + param_3;
        *(uint *)(iVar3 + 0xc4) =
            *(int *)(iVar3 + 0xc4) + iVar1 + (uint)CARRY4(uVar4, param_3);
        if (param_2 == 0) {
            iVar3 = FUN_0002fe54();
            uVar4 = *(uint *)(iVar3 + 0x28);
            *(uint *)(iVar3 + 0x28) = uVar4 + param_3;
            *(uint *)(iVar3 + 0x2c) =
                *(int *)(iVar3 + 0x2c) + iVar1 + (uint)CARRY4(uVar4, param_3);
        } else {
            uVar4 = *(uint *)(param_2 + 0x28);
            *(uint *)(param_2 + 0x28) = uVar4 + param_3;
            *(uint *)(param_2 + 0x2c) =
                *(int *)(param_2 + 0x2c) + iVar1 + (uint)CARRY4(uVar4, param_3);
        }
        iVar1 = *(int *)(param_1 + 0x24);
        tVar2 = time((time_t *)0x0);
        *(time_t *)(iVar1 + 0xe8) = tVar2;
        iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00072d8c);
        if (iVar1 == 0) {
            /* WARNING: Could not recover jumptable at 0x0002ffac. Too many
             * branches */
            /* WARNING: Treating indirect jump as call */
            (*DAT_0006797c)();
            return;
        }
    } else {
        FUN_0002ce38("inc_work_stats", 0x22bf);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002ce94("inc_work_stats", 0x22cd);
}

undefined4 FUN_0002ffec(void)

{
    int iVar1;
    undefined4 uVar2;

    iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00076140);
    if (iVar1 == 0) {
        iVar1 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_00076158);
        if (iVar1 == 0) {
            iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00076140);
            if (iVar1 == 0) {
                uVar2 = *(undefined4 *)(DAT_00068b74 + 4);
                iVar1 =
                    pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00076158);
                if (iVar1 == 0) {
                    (*DAT_0006797c)();
                    return uVar2;
                }
                /* WARNING: Subroutine does not return */
                FUN_0002d984("cp_prio", 0x1d23);
            }
            goto LAB_00030078;
        }
    } else {
        FUN_0002ce38("cp_prio", 0x1d21);
    }
    FUN_0002df98("cp_prio", 0x1d21);
LAB_00030078:
    /* WARNING: Subroutine does not return */
    FUN_0002ce94("cp_prio", 0x1d21);
}

void FUN_00030098(undefined4 *param_1)

{
    int iVar1;
    int iVar2;
    char acStack_810[2052];

    iVar1 = DAT_00068ae4;
    param_1[7] = 0;
    if ((iVar1 == 0) &&
        (iVar2 = param_1[1], iVar1 = FUN_0002ffec(), iVar2 < iVar1)) {
        if ((DAT_00072d88 != '\0') ||
            ((DAT_000686e0 != '\0' || (3 < DAT_00067858)))) {
            snprintf(acStack_810, 0x800, "Pool %d %s alive, testing stability",
                     *param_1, param_1[0x29]);
            FUN_0001dbec(4, acStack_810, 0);
            return;
        }
    } else {
        if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
            (DAT_00067858 < 6)) {
            return;
        }
        snprintf(acStack_810, 0x800, "Pool %d %s alive", *param_1,
                 param_1[0x29]);
        FUN_0001dbec(6, acStack_810, 0);
    }
    return;
}

void FUN_00030260(undefined4 *param_1)

{
    int iVar1;
    char acStack_808[2048];

    iVar1 = FUN_0002cf5c(param_1, (int)param_1 + 0x61);
    if (iVar1 == 0) {
        return;
    }
    if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
        (DAT_00067858 < 6)) {
        FUN_00030098(param_1);
        return;
    }
    snprintf(acStack_808, 0x800, "Stratum connection to pool %d resumed",
             *param_1);
    FUN_0001dbec(6, acStack_808, 0);
    FUN_00030098(param_1);
    return;
}

undefined1 FUN_00030284(int param_1)

{
    int iVar1;
    int iVar2;

    if (*(int *)(param_1 + 100) != 1) {
        return 0;
    }
    if ((((1 < DAT_00068ae4 - 3U) &&
          (((*(char *)(param_1 + 0x290) == '\0' ||
             (*(char *)(param_1 + 0x61) == '\0')) &&
            (iVar1 = FUN_0002fe54(), param_1 != iVar1)))) &&
         (*(int *)(param_1 + 0x2ec) == 0)) &&
        ((DAT_00068ae4 != 0 || (iVar2 = *(int *)(param_1 + 4),
                                iVar1 = FUN_0002ffec(), iVar1 <= iVar2)))) {
        return DAT_00068b78;
    }
    return 1;
}

int *FUN_00030318(void)

{
    int iVar1;
    int *piVar2;
    int iVar3;
    undefined4 uVar4;
    char *__format;
    char local_820[4];
    char acStack_81c[4];
    char acStack_818[4];
    char acStack_814[4];
    char local_810[4];
    char acStack_80c[4];
    char acStack_808[4];
    char acStack_804[4];
    char local_800[4];
    char acStack_7fc[2016];

    piVar2 = (int *)FUN_0001f790(0x748, 1, "cgminer.c", "add_pool", 0x2ff);
    iVar3 = DAT_00072e58;
    *piVar2 = DAT_00072e58;
    iVar1 = DAT_00072e58;
    *(undefined1 *)(piVar2 + 0xa5) = 0;
    piVar2[1] = iVar3;
    DAT_00072efc = FUN_0001f820(DAT_00072efc, (iVar1 + 2) * 4, "cgminer.c",
                                "add_pool", 0x30b);
    iVar3 = DAT_00072e58 * 4;
    DAT_00072e58 = DAT_00072e58 + 1;
    *(int **)(DAT_00072efc + iVar3) = piVar2;
    iVar3 = pthread_mutex_init((pthread_mutex_t *)(piVar2 + 0x2f),
                               (pthread_mutexattr_t *)0x0);
    if (iVar3 == 0) {
        iVar3 = pthread_cond_init((pthread_cond_t *)(piVar2 + 0x4a),
                                  (pthread_condattr_t *)0x0);
        if (iVar3 != 0) {
            local_820[0] = 'F';
            local_820[1] = 'a';
            local_820[2] = 'i';
            local_820[3] = 'l';
            acStack_81c[0] = 'e';
            acStack_81c[1] = 'd';
            acStack_81c[2] = ' ';
            acStack_81c[3] = 't';
            acStack_818[0] = 'o';
            acStack_818[1] = ' ';
            acStack_818[2] = 'p';
            acStack_818[3] = 't';
            acStack_814[0] = 'h';
            acStack_814[1] = 'r';
            acStack_814[2] = 'e';
            acStack_814[3] = 'a';
            local_810[0] = 'd';
            local_810[1] = '_';
            local_810[2] = 'c';
            local_810[3] = 'o';
            acStack_80c[0] = 'n';
            acStack_80c[1] = 'd';
            acStack_80c[2] = '_';
            acStack_80c[3] = 'i';
            acStack_808[0] = 'n';
            acStack_808[1] = 'i';
            acStack_808[2] = 't';
            acStack_808[3] = ' ';
            acStack_804[0] = 'i';
            acStack_804[1] = 'n';
            acStack_804[2] = ' ';
            acStack_804[3] = 'a';
            local_800[0] = 'd';
            local_800[1] = 'd';
            local_800[2] = '_';
            local_800[3] = 'p';
            acStack_7fc[0] = 'o';
            acStack_7fc[1] = 'o';
            acStack_7fc[2] = 'l';
            acStack_7fc[3] = '\0';
            goto LAB_0003049c;
        }
        iVar3 = pthread_mutex_init((pthread_mutex_t *)(piVar2 + 0x35),
                                   (pthread_mutexattr_t *)0x0);
        if (iVar3 == 0) {
            iVar3 = pthread_rwlock_init((pthread_rwlock_t *)(piVar2 + 0x3b),
                                        (pthread_rwlockattr_t *)0x0);
            if (iVar3 == 0) {
                iVar3 = pthread_mutex_init((pthread_mutex_t *)(piVar2 + 0xb4),
                                           (pthread_mutexattr_t *)0x0);
                if (iVar3 == 0) {
                    iVar3 =
                        pthread_mutex_init((pthread_mutex_t *)(piVar2 + 0xbd),
                                           (pthread_mutexattr_t *)0x0);
                    if (iVar3 == 0) {
                        iVar3 = pthread_rwlock_init(
                            (pthread_rwlock_t *)(piVar2 + 0xc3),
                            (pthread_rwlockattr_t *)0x0);
                        if (iVar3 == 0) {
                            piVar2[0x22] = -1;
                            piVar2[0x2e] = 0;
                            piVar2[0x28] = (int)"{\"method\": \"getwork\", "
                                                "\"params\": [], \"id\":0}\n";
                            piVar2[0x56] = (int)(piVar2 + 0x56);
                            piVar2[0x57] = (int)(piVar2 + 0x56);
                            piVar2[0xe] = 1;
                            FUN_0002a510();
                            *(undefined1 *)(piVar2 + 0x91) = 0;
                            return piVar2;
                        }
                        piVar2 = __errno_location();
                        iVar3 = *piVar2;
                        uVar4 = 0x317;
                        goto LAB_00030474;
                    }
                    piVar2 = __errno_location();
                    iVar3 = *piVar2;
                    uVar4 = 0x317;
                    __format =
                        "Failed to pthread_mutex_init errno=%d in %s %s():%d";
                } else {
                    piVar2 = __errno_location();
                    iVar3 = *piVar2;
                    uVar4 = 0x316;
                    __format =
                        "Failed to pthread_mutex_init errno=%d in %s %s():%d";
                }
            } else {
                piVar2 = __errno_location();
                uVar4 = 0x315;
                iVar3 = *piVar2;
            LAB_00030474:
                __format =
                    "Failed to pthread_rwlock_init errno=%d in %s %s():%d";
            }
        } else {
            piVar2 = __errno_location();
            iVar3 = *piVar2;
            uVar4 = 0x315;
            __format = "Failed to pthread_mutex_init errno=%d in %s %s():%d";
        }
    } else {
        piVar2 = __errno_location();
        iVar3 = *piVar2;
        uVar4 = 0x30e;
        __format = "Failed to pthread_mutex_init errno=%d in %s %s():%d";
    }
    snprintf(local_820, 0x800, __format, iVar3, "cgminer.c", "add_pool", uVar4);
LAB_0003049c:
    FUN_0001dbec(3, local_820, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

char *FUN_00030564(undefined4 param_1)

{
    char *pcVar1;
    void *pvVar2;
    int iVar3;

    if ((DAT_00068b7c == 0) && (DAT_00068b80 == 0)) {
        DAT_00068b84 = DAT_00068b84 + 1;
        if (DAT_00072e58 < DAT_00068b84) {
            FUN_00030318();
        }
        iVar3 = *(int *)(DAT_00072efc + (DAT_00068b84 + 0x3fffffff) * 4);
        pcVar1 = (char *)__strdup(param_1);
        FUN_0003e784(param_1, iVar3 + 0xa8);
        pcVar1 = strtok(pcVar1, ":");
        *(char **)(iVar3 + 0xac) = pcVar1;
        if (pcVar1 == (char *)0x0) {
            pcVar1 = "Failed to find : delimited user info";
        } else {
            pcVar1 = strtok((char *)0x0, ":");
            *(char **)(iVar3 + 0xb0) = pcVar1;
            if (pcVar1 == (char *)0x0) {
                pvVar2 = calloc(1, 1);
                *(void **)(iVar3 + 0xb0) = pvVar2;
                pcVar1 = (char *)0x0;
            } else {
                pcVar1 = (char *)0x0;
            }
        }
    } else {
        pcVar1 = "Use only user + pass or userpass, but not both";
    }
    return pcVar1;
}

char *FUN_00030650(undefined4 param_1)

{
    if (DAT_00068b84 != 0) {
        return "Use only user + pass or userpass, but not both";
    }
    DAT_00068b7c = DAT_00068b7c + 1;
    if (DAT_00072e58 < DAT_00068b7c) {
        FUN_00030318();
    }
    FUN_0003e784(param_1,
                 *(int *)(DAT_00072efc + (DAT_00068b7c + 0x3fffffff) * 4) +
                     0xac);
    return (char *)0x0;
}

undefined4 FUN_000306cc(void)

{
    DAT_00068b88 = DAT_00068b88 + 1;
    if (DAT_00072e58 < DAT_00068b88) {
        FUN_00030318();
    }
    return *(undefined4 *)(DAT_00072efc + (DAT_00068b88 + 0x3fffffff) * 4);
}

undefined4 FUN_00030718(undefined4 param_1)

{
    undefined4 *puVar1;
    char *pcVar2;
    char *__haystack;
    char acStack_810[2052];

    puVar1 = (undefined4 *)FUN_000306cc();
    FUN_0002a744(puVar1, param_1);
    __haystack = (char *)puVar1[0x29];
    pcVar2 = strstr(__haystack, ".nicehash.com");
    if ((((pcVar2 != (char *)0x0) ||
          (pcVar2 = strstr(__haystack, "#xnsub"), pcVar2 != (char *)0x0)) &&
         (*(undefined1 *)(puVar1 + 0x91) = 1, DAT_000686e1 != '\0')) &&
        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
          (6 < DAT_00067858)))) {
        snprintf(acStack_810, 0x800, "Pool %d extranonce subscribing enabled.",
                 *puVar1);
        FUN_0001dbec(7, acStack_810, 0);
    }
    return 0;
}

char *FUN_00030804(char *param_1)

{
    char *pcVar1;
    size_t sVar2;
    size_t sVar3;
    long lVar4;
    undefined4 *puVar5;
    char acStack_818[2052];

    pcVar1 = strchr(param_1, 0x3b);
    if (pcVar1 == (char *)0x0) {
        return "No semicolon separated quota;URL pair found";
    }
    sVar2 = strlen(param_1);
    *pcVar1 = '\0';
    sVar3 = strlen(param_1);
    if (sVar3 == 0) {
        pcVar1 = "No parameter for quota found";
    } else if ((int)(sVar2 - (sVar3 + 1)) < 1) {
        pcVar1 = "No parameter for URL found";
    } else {
        lVar4 = strtol(param_1, (char **)0x0, 10);
        if (lVar4 < 0) {
            pcVar1 = "Invalid negative parameter for quota set";
        } else {
            puVar5 = (undefined4 *)FUN_000306cc(lVar4);
            FUN_0002a744(puVar5, param_1 + sVar3 + 1);
            puVar5[0xe] = lVar4;
            if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                (5 < DAT_00067858)) {
                snprintf(acStack_818, 0x800, "Setting pool %d to quota %d",
                         *puVar5, lVar4);
                FUN_0001dbec(6, acStack_818, 0);
            }
            FUN_0002a510();
            pcVar1 = (char *)0x0;
        }
    }
    return pcVar1;
}

char *FUN_00030934(undefined4 param_1)

{
    if (DAT_00068b84 != 0) {
        return "Use only user + pass or userpass, but not both";
    }
    DAT_00068b80 = DAT_00068b80 + 1;
    if (DAT_00072e58 < DAT_00068b80) {
        FUN_00030318();
    }
    FUN_0003e784(param_1,
                 *(int *)(DAT_00072efc + (DAT_00068b80 + 0x3fffffff) * 4) +
                     0xb0);
    return (char *)0x0;
}

undefined4 FUN_000309b0(void)

{
    undefined4 *puVar1;
    char acStack_808[2048];

    DAT_00068b8c = DAT_00068b8c + 1;
    if (DAT_00072e58 < DAT_00068b8c) {
        FUN_00030318();
    }
    puVar1 = *(undefined4 **)(DAT_00072efc + (DAT_00068b8c + 0x3fffffff) * 4);
    if ((DAT_000686e1 != '\0') &&
        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
          (6 < DAT_00067858)))) {
        snprintf(acStack_808, 0x800, "Enable extranonce subscribe on %d",
                 *puVar1);
        FUN_0001dbec(7, acStack_808, 0);
    }
    FUN_0003e6a0(puVar1 + 0x91);
    return 0;
}

void FUN_00030a90(int param_1)

{
    int iVar1;
    int *piVar2;
    int local_814;
    char local_810[24];
    undefined2 uStack_7f8;
    undefined1 local_7f6;

    local_814 = 0;
    if (param_1 != 0) {
        iVar1 = pthread_rwlock_trywrlock((pthread_rwlock_t *)(param_1 + 0x140));
        if (iVar1 == 0) {
            local_814 = *(int *)(param_1 + 0x164);
            *(undefined4 *)(param_1 + 0x164) = 0;
            iVar1 =
                pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x140));
            if (iVar1 != 0) {
                piVar2 = __errno_location();
                snprintf(local_810, 0x800,
                         "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d",
                         *piVar2, "cgminer.c", "flush_queue", 0x25d7);
                FUN_0001dbec(3, local_810, 1);
                /* WARNING: Subroutine does not return */
                FUN_0002c508(1);
            }
            (*DAT_0006797c)();
            if (((local_814 != 0) &&
                 (FUN_0002a9d4(&local_814, "cgminer.c", "flush_queue", 0x25db),
                  DAT_000686e1 != '\0')) &&
                ((DAT_00072d88 != '\0' ||
                  ((DAT_000686e0 != '\0' || (6 < DAT_00067858)))))) {
                builtin_strncpy(local_810, "Discarded queued work it", 0x18);
                uStack_7f8 = 0x6d65;
                local_7f6 = 0;
                FUN_0001dbec(7, local_810, 0);
            }
        }
    }
    return;
}

/* WARNING: Globals starting with '_' overlap smaller symbols at the same
 * address */

void FUN_00030c00(void)

{
    int iVar1;
    int *piVar2;
    char *pcVar3;
    int iVar4;
    int iVar5;
    undefined4 *puVar6;
    int *piVar8;
    int *piVar9;
    undefined4 uVar10;
    sysinfo local_860;
    char acStack_820[2048];
    undefined4 *puVar7;

    iVar1 = sysinfo(&local_860);
    if (iVar1 == 0) {
        DAT_0007618c = local_860.uptime;
    } else {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (5 < DAT_00067858)) {
            piVar2 = __errno_location();
            iVar1 = *piVar2;
            pcVar3 = strerror(iVar1);
            snprintf(acStack_820, 0x800,
                     "Failed to get sysinfo, errno:%u, reason:%s\n", iVar1,
                     pcVar3);
            FUN_0001dbec(6, acStack_820, 0);
        }
        DAT_0007618c = time((time_t *)0x0);
    }
    FUN_00020580(&DAT_00068b30);
    FUN_000234dc(&DAT_00068b90);
    _DAT_000761c0 = 0;
    DAT_000761c4 = 0;
    _DAT_000762d0 = 0;
    DAT_000762d4 = 0;
    _DAT_000762c8 = 0;
    DAT_000762cc = 0;
    _DAT_00072eb8 = 0;
    DAT_00072ebc = 0;
    _DAT_00072d80 = 0;
    DAT_00072d84 = 0;
    DAT_00072ec8 = 0;
    DAT_00072ecc = 0;
    puVar6 = &DAT_00068b98;
    do {
        puVar7 = puVar6 + 2;
        *puVar6 = 0;
        puVar6[1] = 0;
        puVar6 = puVar7;
    } while (puVar7 != &DAT_00068bf8);
    _DAT_000681e0 = 0;
    DAT_000681e4 = 0x3ff00000;
    _DAT_000681c0 = 0;
    DAT_000681c4 = 0x3ff00000;
    DAT_000681d8 = 0;
    DAT_000681dc = 0x3ff00000;
    DAT_00076058 = 0;
    DAT_00068bf8 = 0;
    DAT_0007605c = 0;
    DAT_000761d4 = 0;
    DAT_00072f0c = 0;
    DAT_0007606c = 0;
    DAT_00072f00 = 0;
    DAT_00072da4 = 0;
    DAT_00074f80 = 0;
    DAT_00074f84 = 0;
    DAT_00072ee8 = 0;
    DAT_00072eec = 0;
    DAT_00074fb0 = 0;
    DAT_00074fb4 = 0;
    DAT_000762c0 = 0;
    DAT_000762c4 = 0;
    DAT_00075000 = 0;
    DAT_00075004 = 0;
    DAT_00072dc0 = 0;
    DAT_00072dc4 = 0;
    _DAT_00074f20 = 0;
    DAT_00074f24 = 0;
    _DAT_00074fa8 = 0;
    DAT_00074fac = 0;
    _DAT_00072ef0 = 0;
    DAT_00072ef4 = 0;
    if (0 < DAT_00072e58) {
        piVar9 = DAT_00072efc + DAT_00072e58;
        piVar2 = DAT_00072efc;
        do {
            piVar8 = piVar2 + 1;
            iVar1 = *piVar2;
            *(undefined4 *)(iVar1 + 0x74) = 0;
            *(undefined4 *)(iVar1 + 8) = 0;
            *(undefined4 *)(iVar1 + 0xc) = 0;
            *(undefined4 *)(iVar1 + 0x10) = 0;
            *(undefined4 *)(iVar1 + 0x14) = 0;
            *(undefined4 *)(iVar1 + 0x78) = 0;
            *(undefined4 *)(iVar1 + 0x7c) = 0;
            *(undefined4 *)(iVar1 + 0x80) = 0;
            *(undefined4 *)(iVar1 + 0x84) = 0;
            *(undefined4 *)(iVar1 + 0x160) = 0;
            *(undefined4 *)(iVar1 + 0x28) = 0;
            *(undefined4 *)(iVar1 + 0x2c) = 0;
            *(undefined4 *)(iVar1 + 0x48) = 0;
            *(undefined4 *)(iVar1 + 0x4c) = 0;
            *(undefined4 *)(iVar1 + 0x50) = 0;
            *(undefined4 *)(iVar1 + 0x54) = 0;
            *(undefined4 *)(iVar1 + 0x58) = 0;
            *(undefined4 *)(iVar1 + 0x5c) = 0;
            *(undefined4 *)(iVar1 + 0x168) = 0;
            *(undefined4 *)(iVar1 + 0x16c) = 0;
            piVar2 = piVar8;
        } while (piVar9 != piVar8);
    }
    FUN_0002b5ac();
    if (0 < DAT_00074fd8) {
        iVar1 = 0;
        do {
            iVar4 = FUN_0002e2cc(iVar1);
            FUN_000234dc(iVar4 + 0x170, &DAT_00068b30);
            iVar5 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00072ed0);
            if (iVar5 != 0) {
                piVar2 = __errno_location();
                iVar1 = *piVar2;
                pcVar3 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
                uVar10 = 0x1846;
            LAB_00030f88:
                snprintf(acStack_820, 0x800, pcVar3, iVar1, "cgminer.c",
                         "zero_stats", uVar10);
                FUN_0001dbec(3, acStack_820, 1);
                /* WARNING: Subroutine does not return */
                FUN_0002c508(1);
            }
            *(undefined4 *)(iVar4 + 0x50) = 0;
            *(undefined4 *)(iVar4 + 0x54) = 0;
            *(undefined4 *)(iVar4 + 0x24) = 0;
            *(undefined4 *)(iVar4 + 0x28) = 0;
            *(undefined4 *)(iVar4 + 0x2c) = 0;
            *(undefined4 *)(iVar4 + 0x58) = 0;
            *(undefined4 *)(iVar4 + 0x5c) = 0;
            *(undefined4 *)(iVar4 + 0xdc) = 0;
            *(undefined4 *)(iVar4 + 200) = 0;
            *(undefined4 *)(iVar4 + 0xcc) = 0;
            *(undefined4 *)(iVar4 + 0xd0) = 0;
            *(undefined4 *)(iVar4 + 0xd4) = 0;
            *(undefined4 *)(iVar4 + 0xe0) = 0;
            *(undefined4 *)(iVar4 + 0xe4) = 0;
            *(undefined4 *)(iVar4 + 0xc0) = 0;
            *(undefined4 *)(iVar4 + 0xc4) = 0;
            iVar5 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00072ed0);
            if (iVar5 != 0) {
                piVar2 = __errno_location();
                iVar1 = *piVar2;
                pcVar3 = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
                uVar10 = 0x1853;
                goto LAB_00030f88;
            }
            iVar1 = iVar1 + 1;
            (*DAT_0006797c)();
            (**(code **)(*(int *)(iVar4 + 4) + 0x60))(iVar4);
        } while (iVar1 < DAT_00074fd8);
    }
    return;
}

void FUN_00031004(int param_1)

{
    int iVar1;
    int *piVar2;
    char *__format;
    code *pcVar3;
    undefined4 uVar4;
    char acStack_808[2048];

    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
        (5 < DAT_00067858)) {
        snprintf(acStack_808, 0x800, "%s %d: invalid nonce - HW error",
                 *(undefined4 *)(*(int *)(*(int *)(param_1 + 0x24) + 4) + 8),
                 *(undefined4 *)(*(int *)(param_1 + 0x24) + 8));
        FUN_0001dbec(6, acStack_808, 0);
    }
    iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00072d8c);
    if (iVar1 == 0) {
        DAT_00076058 = DAT_00076058 + 1;
        *(int *)(*(int *)(param_1 + 0x24) + 0x2c) =
            *(int *)(*(int *)(param_1 + 0x24) + 0x2c) + 1;
        iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00072d8c);
        if (iVar1 == 0) {
            (*DAT_0006797c)();
            pcVar3 = *(code **)(*(int *)(*(int *)(param_1 + 0x24) + 4) + 0x54);
            if (pcVar3 != (code *)0x0) {
                (*pcVar3)(param_1);
            }
            return;
        }
        piVar2 = __errno_location();
        iVar1 = *piVar2;
        __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
        uVar4 = 0x2268;
    } else {
        piVar2 = __errno_location();
        iVar1 = *piVar2;
        __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar4 = 0x2265;
    }
    snprintf(acStack_808, 0x800, __format, iVar1, "cgminer.c", "inc_hw_errors",
             uVar4);
    FUN_0001dbec(3, acStack_808, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

undefined8 FUN_00031320(int param_1)

{
    uint uVar1;
    int iVar2;
    int *piVar3;
    uint uVar4;
    char *__format;
    uint *puVar5;
    uint uVar6;
    bool bVar7;
    bool bVar8;
    double dVar9;
    double dVar10;
    double dVar11;
    double dVar12;
    undefined8 uVar13;
    undefined4 uVar14;
    char acStack_820[2048];

    dVar11 = (double)FUN_0004acd4(*(undefined4 *)(param_1 + 0xd8),
                                  *(undefined4 *)(param_1 + 0xdc));
    dVar9 = (double)FUN_0004acd4(*(undefined4 *)(param_1 + 0xd0),
                                 *(undefined4 *)(param_1 + 0xd4));
    dVar10 = (double)FUN_0004acd4(*(undefined4 *)(param_1 + 200),
                                  *(undefined4 *)(param_1 + 0xcc));
    dVar12 = (double)FUN_0004acd4(*(undefined4 *)(param_1 + 0xc0),
                                  *(undefined4 *)(param_1 + 0xc4));
    dVar12 = dVar12 + dVar11 * 6.277101735386681e+57 +
             dVar9 * 3.402823669209385e+38 + dVar10 * 1.8446744073709552e+19;
    if (dVar12 == 0.0) {
        dVar12 = 0.0;
    }
    dVar9 = round(2.695953529101131e+67 / dVar12);
    uVar13 = FUN_0004ada0(SUB84(dVar9, 0), (int)((ulonglong)dVar9 >> 0x20));
    uVar4 = (uint)((ulonglong)uVar13 >> 0x20);
    uVar1 = (uint)uVar13;
    iVar2 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00076140);
    if (iVar2 == 0) {
        iVar2 = pthread_rwlock_wrlock((pthread_rwlock_t *)&DAT_00076158);
        if (iVar2 == 0) {
            bVar7 = uVar4 <= DAT_00068b04;
            if (DAT_00068b04 == uVar4) {
                bVar7 = uVar1 <= DAT_00068b00;
            }
            if (!bVar7) {
                DAT_00068b00 = uVar1;
                DAT_00068b04 = uVar4;
                FUN_00028aa0(uVar1, uVar4, &DAT_000681c8, 8, 0);
            }
            puVar5 = (uint *)(*(int *)(param_1 + 0x104) + 0x170);
            uVar6 = *(uint *)(*(int *)(param_1 + 0x104) + 0x174);
            bVar8 = uVar4 <= uVar6;
            if (uVar6 == uVar4) {
                bVar8 = uVar1 <= *puVar5;
            }
            if (!bVar8) {
                *(undefined8 *)puVar5 = uVar13;
            }
            iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00076158);
            if (iVar2 == 0) {
                iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00076140);
                if (iVar2 == 0) {
                    (*DAT_0006797c)();
                    if ((!bVar7) &&
                        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
                          (5 < DAT_00067858)))) {
                        snprintf(acStack_820, 0x800, "New best share: %s",
                                 &DAT_000681c8);
                        FUN_0001dbec(6, acStack_820, 0);
                    }
                    return uVar13;
                }
                piVar3 = __errno_location();
                iVar2 = *piVar3;
                __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
                uVar14 = 0x144d;
            } else {
                piVar3 = __errno_location();
                iVar2 = *piVar3;
                __format = "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d";
                uVar14 = 0x144d;
            }
        } else {
            piVar3 = __errno_location();
            iVar2 = *piVar3;
            __format = "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d";
            uVar14 = 0x143f;
        }
    } else {
        piVar3 = __errno_location();
        iVar2 = *piVar3;
        __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar14 = 0x143f;
    }
    snprintf(acStack_820, 0x800, __format, iVar2, "cgminer.c", "share_diff",
             uVar14);
    FUN_0001dbec(3, acStack_820, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

void FUN_000315f0(int *param_1, int param_2)

{
    char cVar1;
    int iVar2;
    time_t tVar3;
    int *piVar4;
    char *__format;
    double dVar5;
    double dVar6;
    undefined8 uVar7;
    undefined4 uVar8;
    char acStack_820[2052];

    dVar6 = DAT_000681e8;
    uVar7 = FUN_00031320(param_2);
    *(undefined8 *)(param_2 + 0xe8) = uVar7;
    dVar5 = (double)FUN_0004acd4();
    cVar1 = DAT_00072d88;
    if (dVar6 <= dVar5) {
        *(undefined1 *)(param_2 + 0x11b) = 1;
        DAT_0007606c = DAT_0007606c + 1;
        *(int *)(*(int *)(param_2 + 0x104) + 0x20) =
            *(int *)(*(int *)(param_2 + 0x104) + 0x20) + 1;
        *(undefined1 *)(param_2 + 0x11a) = 1;
        if (((cVar1 != '\0') || (DAT_000686e0 != '\0')) || (4 < DAT_00067858)) {
            snprintf(acStack_820, 0x800, "Found block for pool %d!",
                     **(undefined4 **)(param_2 + 0x104));
            FUN_0001dbec(5, acStack_820, 0);
        }
    }
    iVar2 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00072d8c);
    if (iVar2 == 0) {
        dVar5 = *(double *)(param_2 + 0xe0);
        dVar6 = (double)FUN_0004ace4(DAT_00072dc0, DAT_00072dc4);
        dVar6 = dVar6 + dVar5;
        uVar7 = FUN_0004ad7c(SUB84(dVar6, 0), (int)((ulonglong)dVar6 >> 0x20));
        DAT_00072dc4 = (undefined4)((ulonglong)uVar7 >> 0x20);
        DAT_00072dc0 = (undefined4)uVar7;
        iVar2 = *param_1;
        dVar6 = (double)FUN_0004ace4(*(undefined4 *)(iVar2 + 0xc0),
                                     *(undefined4 *)(iVar2 + 0xc4));
        dVar6 = dVar6 + dVar5;
        uVar7 = FUN_0004ad7c(SUB84(dVar6, 0), (int)((ulonglong)dVar6 >> 0x20));
        *(undefined8 *)(iVar2 + 0xc0) = uVar7;
        iVar2 = *(int *)(param_2 + 0x104);
        dVar6 = (double)FUN_0004ace4(*(undefined4 *)(iVar2 + 0x28),
                                     *(undefined4 *)(iVar2 + 0x2c));
        dVar6 = dVar6 + *(double *)(param_2 + 0xe0);
        uVar7 = FUN_0004ad7c(SUB84(dVar6, 0), (int)((ulonglong)dVar6 >> 0x20));
        *(undefined8 *)(iVar2 + 0x28) = uVar7;
        iVar2 = *param_1;
        tVar3 = time((time_t *)0x0);
        *(time_t *)(iVar2 + 0xe8) = tVar3;
        iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00072d8c);
        if (iVar2 == 0) {
            (*DAT_0006797c)();
            return;
        }
        piVar4 = __errno_location();
        iVar2 = *piVar4;
        __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
        uVar8 = 0x22ba;
    } else {
        piVar4 = __errno_location();
        iVar2 = *piVar4;
        __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar8 = 0x22b5;
    }
    snprintf(acStack_820, 0x800, __format, iVar2, "cgminer.c",
             "update_work_stats", uVar8);
    FUN_0001dbec(3, acStack_820, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

int FUN_0003181c(int param_1, int param_2, undefined4 param_3,
                 undefined4 *param_4)

{
    int iVar1;
    undefined4 *puVar2;
    char local_810[16];
    undefined2 uStack_800;
    undefined1 local_7fe;

    puVar2 = param_4;
    if (param_4 != (undefined4 *)0x0) {
        puVar2 = (undefined4 *)0x0;
    }
    if (param_4 != (undefined4 *)0x0) {
        *param_4 = puVar2;
    }
    *(undefined4 *)(param_2 + 0x4c) = param_3;
    FUN_00028ef8(param_2);
    if (*(int *)(param_2 + 0xdc) == 0) {
        FUN_000315f0(param_1 + 0x24, param_2);
        iVar1 = FUN_0001fcec(param_2 + 0xc0, param_2 + 0xa0);
        if (iVar1 == 0) {
            if (param_4 != (undefined4 *)0x0) {
                *param_4 = 1;
            }
            if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                (DAT_00067858 < 6)) {
                iVar1 = 0;
            } else {
                builtin_strncpy(local_810, "Share above targ", 0x10);
                uStack_800 = 0x7465;
                local_7fe = 0;
                FUN_0001dbec(6, local_810, 0);
            }
        }
        return iVar1;
    }
    FUN_00031004(param_1);
    return 0;
}

void FUN_00031914(undefined4 *param_1)

{
    int iVar1;
    int *piVar2;
    int iVar3;
    int iVar4;
    undefined4 *puVar5;
    int iVar6;
    uint uVar7;
    char *__format;
    int iVar8;
    int iVar9;
    int iVar10;
    bool bVar11;
    undefined4 uVar12;
    int local_824;
    char acStack_820[2048];

    iVar1 = pthread_mutex_lock(DAT_00068b20);
    if (iVar1 != 0) {
        piVar2 = __errno_location();
        iVar1 = *piVar2;
        __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar12 = 0x1d0d;
        goto LAB_00031bc0;
    }
    local_824 = DAT_00068bfc;
    if (DAT_00068bfc != 0) {
        puVar5 = *(undefined4 **)(DAT_00068bfc + 0x104);
        iVar8 = 0;
        iVar1 = *(int *)(DAT_00068bfc + 0x160);
        local_824 = DAT_00068bfc;
        iVar3 = DAT_00068bfc;
        do {
            DAT_00068bfc = iVar3;
            if (puVar5 == param_1) {
                iVar10 = *(int *)(local_824 + 0x15c);
                puVar5 = *(undefined4 **)(iVar3 + 0x158);
                if (iVar10 == 0) {
                    iVar4 = *(int *)(local_824 + 0x160);
                    if (iVar4 != 0) {
                        iVar6 = puVar5[5];
                        iVar9 = iVar4;
                        DAT_00068bfc = iVar4;
                        if (local_824 == puVar5[4] - iVar6)
                            goto LAB_00031b30;
                        goto LAB_000319bc;
                    }
                    free((void *)*puVar5);
                    free(*(void **)(DAT_00068bfc + 0x158));
                    DAT_00068bfc = iVar4;
                } else {
                    iVar6 = puVar5[5];
                    if (local_824 == puVar5[4] - iVar6) {
                    LAB_00031b30:
                        DAT_00068bfc = iVar3;
                        puVar5[4] = iVar10 + iVar6;
                        iVar10 = *(int *)(local_824 + 0x15c);
                        if (iVar10 == 0) {
                            iVar4 = *(int *)(local_824 + 0x160);
                            iVar9 = iVar4;
                            DAT_00068bfc = iVar4;
                            goto LAB_000319bc;
                        }
                        iVar6 = *(int *)(*(int *)(iVar3 + 0x158) + 0x14);
                    }
                    *(undefined4 *)(iVar10 + iVar6 + 8) =
                        *(undefined4 *)(local_824 + 0x160);
                    iVar4 = iVar3;
                    iVar9 = *(int *)(local_824 + 0x160);
                LAB_000319bc:
                    piVar2 = *(int **)(iVar4 + 0x158);
                    if (iVar9 != 0) {
                        *(undefined4 *)(iVar9 + piVar2[5] + 4) =
                            *(undefined4 *)(local_824 + 0x15c);
                        piVar2 = *(int **)(iVar4 + 0x158);
                    }
                    uVar7 = piVar2[1] - 1U & *(uint *)(local_824 + 0x174);
                    iVar3 = *piVar2 + uVar7 * 0xc;
                    *(int *)(iVar3 + 4) = *(int *)(iVar3 + 4) + -1;
                    puVar5 = (undefined4 *)(iVar4 + 0x158);
                    bVar11 = *(int *)(*(int *)*puVar5 + uVar7 * 0xc) ==
                             local_824 + 0x158;
                    if (bVar11) {
                        iVar4 = *(int *)(local_824 + 0x168);
                        *(int *)(*(int *)*puVar5 + uVar7 * 0xc) = iVar4;
                    }
                    iVar3 = *(int *)(local_824 + 0x168);
                    if (bVar11) {
                        iVar4 = DAT_00068bfc;
                    }
                    if (*(int *)(local_824 + 0x164) != 0) {
                        *(int *)(*(int *)(local_824 + 0x164) + 0x10) = iVar3;
                        iVar3 = *(int *)(local_824 + 0x168);
                    }
                    if (iVar3 != 0) {
                        *(undefined4 *)(iVar3 + 0xc) =
                            *(undefined4 *)(local_824 + 0x164);
                    }
                    *(int *)(*(int *)(iVar4 + 0x158) + 0xc) =
                        *(int *)(*(int *)(iVar4 + 0x158) + 0xc) + -1;
                }
                iVar8 = iVar8 + 1;
                FUN_0002a9d4(&local_824, "cgminer.c", "clear_pool_work",
                             0x1d13);
            }
            local_824 = iVar1;
            if (iVar1 == 0)
                goto LAB_00031a74;
            puVar5 = *(undefined4 **)(iVar1 + 0x104);
            iVar1 = *(int *)(iVar1 + 0x160);
            iVar3 = DAT_00068bfc;
        } while (true);
    }
    iVar1 = pthread_mutex_unlock(DAT_00068b20);
    if (iVar1 == 0) {
        (*DAT_0006797c)();
        return;
    }
    goto LAB_00031be4;
LAB_00031a74:
    iVar1 = pthread_mutex_unlock(DAT_00068b20);
    if (iVar1 == 0) {
        (*DAT_0006797c)();
        if ((iVar8 != 0) &&
            (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
              (5 < DAT_00067858)))) {
            snprintf(
                acStack_820, 0x800,
                "Cleared %d work items due to stratum disconnect on pool %d",
                iVar8, *param_1);
            FUN_0001dbec(6, acStack_820, 0);
        }
        return;
    }
LAB_00031be4:
    piVar2 = __errno_location();
    iVar1 = *piVar2;
    __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
    uVar12 = 0x1d17;
LAB_00031bc0:
    snprintf(acStack_820, 0x800, __format, iVar1, "cgminer.c",
             "clear_pool_work", uVar12);
    FUN_0001dbec(3, acStack_820, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

void FUN_00031c3c(int *param_1)

{
    int iVar1;
    int iVar2;
    int *piVar3;
    int *piVar4;
    char *__format;
    int iVar5;
    int *piVar6;
    int iVar7;
    int iVar8;
    int *piVar9;
    undefined4 uVar10;
    undefined8 uVar11;
    char acStack_828[2052];

    iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00076140);
    if (iVar1 == 0) {
        iVar2 = pthread_rwlock_wrlock((pthread_rwlock_t *)&DAT_00076158);
        piVar4 = DAT_00072efc;
        iVar5 = DAT_00072e58;
        piVar3 = DAT_00068b74;
        iVar1 = DAT_00068ae4;
        if (iVar2 != 0) {
            piVar3 = __errno_location();
            iVar1 = *piVar3;
            __format = "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d";
            uVar10 = 0x149c;
            goto LAB_00031fa0;
        }
        iVar7 = *DAT_00068b74;
        iVar2 = 0;
        if (param_1 == (int *)0x0) {
            switch (DAT_00068ae4) {
            case 0:
            case 3:
            case 4:
            switchD_00031d10_caseD_0:
            switchD_00032094_caseD_0:
                if (0 < iVar5)
                    goto switchD_00031cf0_caseD_0;
            default:
            switchD_00032094_default:
                piVar6 = (int *)DAT_00072efc[iVar7];
                break;
            case 1:
            case 2:
            LAB_00031f04:
                iVar1 = DAT_00072e58;
                if (1 < DAT_00072e58) {
                    iVar2 = 1;
                    iVar5 = iVar7;
                    do {
                        iVar5 = iVar5 + 1;
                        if (iVar5 < iVar1) {
                            piVar6 = piVar4 + iVar5;
                        } else {
                            iVar5 = 0;
                            piVar6 = piVar4;
                        }
                        piVar6 = (int *)*piVar6;
                        if ((*(char *)((int)piVar6 + 0x61) == '\0') &&
                            (piVar6[0x19] == 1)) {
                            uVar11 = FUN_00029278(piVar6);
                            piVar4 = (int *)((ulonglong)uVar11 >> 0x20);
                            if ((int)uVar11 == 0)
                                goto LAB_00031dd0;
                        }
                        iVar2 = iVar2 + 1;
                    } while (iVar2 != iVar1);
                }
            switchD_00031cf0_default:
                piVar6 = (int *)piVar4[iVar7];
            }
        } else {
            iVar8 = param_1[1];
            if (iVar8 != 0) {
                if (DAT_00072e58 < 1) {
                    param_1[1] = 0;
                    switch (iVar1) {
                    case 0:
                    case 3:
                    case 4:
                        goto switchD_00032094_caseD_0;
                    case 1:
                    case 2:
                        goto switchD_00032094_caseD_1;
                    default:
                        goto switchD_00032094_default;
                    }
                }
                piVar9 = DAT_00072efc + DAT_00072e58;
                piVar6 = DAT_00072efc;
                while (true) {
                    iVar5 = *(int *)(*piVar6 + 4);
                    if (iVar5 < iVar8) {
                        *(int *)(*piVar6 + 4) = iVar5 + 1;
                    }
                    if (piVar9 == piVar6 + 1)
                        break;
                    iVar8 = param_1[1];
                    piVar6 = piVar6 + 1;
                }
                param_1[1] = 0;
                switch (iVar1) {
                case 0:
                case 3:
                case 4:
                    goto switchD_00031cf0_caseD_0;
                case 1:
                case 2:
                    goto switchD_00031cf0_caseD_1;
                default:
                    goto switchD_00031cf0_default;
                }
            }
            switch (DAT_00068ae4) {
            case 0:
            case 3:
            case 4:
                goto switchD_00031d10_caseD_0;
            case 1:
            case 2:
            switchD_00032094_caseD_1:
                piVar4 = DAT_00072efc;
            switchD_00031cf0_caseD_1:
                if (*(char *)((int)param_1 + 0x61) != '\0')
                    goto LAB_00031f04;
                piVar6 = (int *)piVar4[*param_1];
                break;
            default:
                goto switchD_00032094_default;
            }
        }
        goto LAB_00031dd0;
    }
    piVar3 = __errno_location();
    iVar1 = *piVar3;
    uVar10 = 0x149c;
LAB_00031f8c:
    __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
    goto LAB_00031fa0;
switchD_00031cf0_caseD_0:
    do {
        iVar1 = FUN_000293b0(iVar2);
        if ((*(char *)(iVar1 + 0x61) == '\0') && (*(int *)(iVar1 + 100) == 1)) {
            uVar11 = FUN_00029278(iVar1, iVar1);
            if ((int)uVar11 == 0) {
                piVar6 =
                    (int *)DAT_00072efc[*(int *)((ulonglong)uVar11 >> 0x20)];
                goto LAB_00031dd0;
            }
        }
        iVar2 = iVar2 + 1;
    } while (iVar2 < DAT_00072e58);
    piVar6 = (int *)DAT_00072efc[iVar7];
LAB_00031dd0:
    DAT_00068b74 = piVar6;
    iVar1 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00076158);
    if (iVar1 != 0) {
        piVar3 = __errno_location();
        iVar1 = *piVar3;
        __format = "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d";
        uVar10 = 0x14ed;
        goto LAB_00031fa0;
    }
    iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00076140);
    if (iVar1 == 0) {
        (*DAT_0006797c)();
        if ((piVar3 != piVar6) && (1 < DAT_00068ae4 - 3U)) {
            if ((DAT_00072d88 != '\0') ||
                ((DAT_000686e0 != '\0' || (3 < DAT_00067858)))) {
                snprintf(acStack_828, 0x800, "Switching to pool %d %s", *piVar6,
                         piVar6[0x29]);
                FUN_0001dbec(4, acStack_828, 0);
            }
            FUN_00031914(piVar3);
        }
        iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00068c00);
        if (iVar1 != 0) {
            piVar3 = __errno_location();
            iVar1 = *piVar3;
            uVar10 = 0x14f5;
            goto LAB_00031f8c;
        }
        pthread_cond_broadcast((pthread_cond_t *)&DAT_00068c18);
        iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00068c00);
        if (iVar1 == 0) {
            (*DAT_0006797c)();
            return;
        }
        piVar3 = __errno_location();
        iVar1 = *piVar3;
        uVar10 = 0x14f7;
    } else {
        piVar3 = __errno_location();
        iVar1 = *piVar3;
        uVar10 = 0x14ed;
    }
    __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
LAB_00031fa0:
    snprintf(acStack_828, 0x800, __format, iVar1, "cgminer.c", "switch_pools",
             uVar10);
    FUN_0001dbec(3, acStack_828, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

void FUN_000320c0(undefined4 *param_1)

{
    int iVar1;
    undefined4 *puVar2;
    char acStack_808[2048];

    iVar1 = FUN_0002cef0(param_1, (int)param_1 + 0x61);
    if (iVar1 == 0) {
        FUN_00020580(param_1 + 0x22);
        puVar2 = (undefined4 *)FUN_0002fe54();
        if (param_1 == puVar2) {
            if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                (3 < DAT_00067858)) {
                snprintf(acStack_808, 0x800, "Pool %d %s not responding!",
                         *param_1, param_1[0x29]);
                FUN_0001dbec(4, acStack_808, 0);
            }
            FUN_00031c3c(0);
            return;
        }
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (5 < DAT_00067858)) {
            snprintf(acStack_808, 0x800, "Pool %d %s failed to return work",
                     *param_1, param_1[0x29]);
            FUN_0001dbec(6, acStack_808, 0);
            return;
        }
    }
    return;
}

void FUN_000321f0(void)

{
    int *piVar1;
    uint uVar2;
    int iVar3;
    time_t tVar4;
    int *piVar5;
    int *piVar6;
    undefined4 uVar7;
    char *pcVar8;
    pthread_mutex_t *__mutex;
    undefined4 *puVar9;
    undefined4 *puVar10;
    int iVar11;
    uint uVar12;
    int iVar13;
    int iVar14;
    int *piVar15;
    char *pcVar16;
    bool bVar17;
    double dVar18;
    undefined1 auStack_850[8];
    int local_848[2];
    int local_840[2];
    char acStack_838[2052];

    pthread_setcanceltype(1, (int *)0x0);
    FUN_00022d78("Watchpool");
    FUN_00029dfc();
    iVar14 = 0;
    FUN_00020630(auStack_850);
    while (true) {
        iVar14 = iVar14 + 1;
        if (0x78 < iVar14) {
            iVar14 = 0;
        }
        FUN_00020580(local_848);
        if (0 < DAT_00072e58)
            break;
    LAB_0003237c:
        iVar11 = FUN_0002fe54();
        if (*(char *)(iVar11 + 0x61) != '\0') {
            FUN_00031c3c(0);
        }
        if ((DAT_00068ae4 == 2) &&
            (iVar11 = local_848[0] - DAT_00068c68,
             iVar11 != DAT_00073f14 * 0x3c &&
                 iVar11 + DAT_00073f14 * -0x3c < 0 ==
                     SBORROW4(iVar11, DAT_00073f14 * 0x3c))) {
            FUN_00020580(&DAT_00068c68);
            FUN_00031c3c(0);
        }
        FUN_0002063c(auStack_850, 5000);
        FUN_00020630(auStack_850);
    }
    iVar11 = 0;
LAB_000322dc:
    puVar10 = *(undefined4 **)(DAT_00072efc + iVar11 * 4);
    if ((DAT_00068c48 == '\0') && (DAT_00072da8 == 0)) {
        __mutex = (pthread_mutex_t *)(puVar10 + 0x2f);
        FUN_00020580(local_840);
        iVar3 = pthread_mutex_lock(__mutex);
        if (iVar3 != 0) {
            piVar15 = __errno_location();
            uVar7 = 0x27e9;
            pcVar8 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
            pcVar16 = "reap_curl";
            goto LAB_0003292c;
        }
        piVar5 = puVar10 + 0x56;
        piVar15 = (int *)*piVar5;
        if (piVar5 != piVar15) {
            iVar3 = puVar10[0x48];
            if (1 < iVar3) {
                iVar13 = 0;
                piVar6 = (int *)*piVar15;
                do {
                    piVar1 = piVar6;
                    if (300 < local_840[0] - piVar15[2]) {
                        puVar10[0x48] = iVar3 + -1;
                        iVar13 = iVar13 + 1;
                        iVar3 = *piVar15;
                        piVar6 = (int *)piVar15[1];
                        *(int **)(iVar3 + 4) = piVar6;
                        *piVar6 = iVar3;
                        free(piVar15 + -1);
                    }
                    if (piVar5 == piVar1) {
                        iVar3 = pthread_mutex_unlock(__mutex);
                        if (iVar3 != 0)
                            goto LAB_000329bc;
                        (*DAT_0006797c)();
                        if (((iVar13 != 0) && (DAT_000686e1 != '\0')) &&
                            ((DAT_00072d88 != '\0' ||
                              ((DAT_000686e0 != '\0' ||
                                (6 < DAT_00067858)))))) {
                            pcVar8 = "";
                            if (iVar13 != 1) {
                                pcVar8 = "s";
                            }
                            snprintf(acStack_838, 0x800,
                                     "Reaped %d curl%s from pool %d", iVar13,
                                     pcVar8, *puVar10);
                            FUN_0001dbec(7, acStack_838, 0);
                        }
                        break;
                    }
                    iVar3 = puVar10[0x48];
                    piVar6 = (int *)*piVar1;
                    piVar15 = piVar1;
                } while (1 < iVar3);
            }
        LAB_0003254c:
            tVar4 = time((time_t *)0x0);
            iVar3 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00068c4c);
            if (iVar3 != 0) {
                piVar15 = __errno_location();
                uVar7 = 0x280d;
                pcVar8 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
                pcVar16 = "prune_stratum_shares";
                goto LAB_0003292c;
            }
            uVar2 = 0;
            if (DAT_00068c64 != (int *)0x0) {
                puVar9 = *(undefined4 **)(DAT_00068c64[9] + 0x104);
                piVar6 = (int *)DAT_00068c64[2];
                piVar15 = DAT_00068c64;
                piVar5 = DAT_00068c64;
                do {
                    piVar1 = piVar6;
                    DAT_00068c64 = piVar5;
                    if ((puVar10 == puVar9) && (piVar15[0xb] + 0x78 < tVar4)) {
                        iVar3 = piVar15[1];
                        puVar9 = (undefined4 *)*piVar5;
                        if (iVar3 == 0) {
                            piVar6 = (int *)piVar15[2];
                            if (piVar6 != (int *)0x0) {
                                iVar13 = puVar9[5];
                                DAT_00068c64 = piVar6;
                                if (piVar15 == (int *)(puVar9[4] - iVar13))
                                    goto LAB_000328b8;
                                goto LAB_00032600;
                            }
                            free((void *)*puVar9);
                            free((void *)*piVar5);
                            DAT_00068c64 = piVar6;
                        } else {
                            iVar13 = puVar9[5];
                            if (piVar15 == (int *)(puVar9[4] - iVar13)) {
                            LAB_000328b8:
                                DAT_00068c64 = piVar5;
                                puVar9[4] = iVar3 + iVar13;
                                iVar3 = piVar15[1];
                                if (iVar3 == 0) {
                                    piVar6 = (int *)piVar15[2];
                                    DAT_00068c64 = piVar6;
                                    goto LAB_00032600;
                                }
                                iVar13 = *(int *)(*piVar5 + 0x14);
                            }
                            *(int *)(iVar3 + iVar13 + 8) = piVar15[2];
                            piVar6 = piVar5;
                        LAB_00032600:
                            if (piVar15[2] != 0) {
                                *(int *)(piVar15[2] + *(int *)(*piVar6 + 0x14) +
                                         4) = piVar15[1];
                            }
                            uVar12 = ((int *)*piVar6)[1] - 1U & piVar15[7];
                            iVar3 = *(int *)*piVar6 + uVar12 * 0xc;
                            *(int *)(iVar3 + 4) = *(int *)(iVar3 + 4) + -1;
                            if (*(int **)(*(int *)*piVar6 + uVar12 * 0xc) ==
                                piVar15) {
                                *(int *)(*(int *)*piVar6 + uVar12 * 0xc) =
                                    piVar15[4];
                            }
                            if (piVar15[3] != 0) {
                                *(int *)(piVar15[3] + 0x10) = piVar15[4];
                            }
                            if (piVar15[4] != 0) {
                                *(int *)(piVar15[4] + 0xc) = piVar15[3];
                            }
                            *(int *)(*piVar6 + 0xc) =
                                *(int *)(*piVar6 + 0xc) + -1;
                        }
                        uVar2 = uVar2 + 1;
                        FUN_0002a9d4(piVar15 + 9, "cgminer.c",
                                     "prune_stratum_shares", 0x2814);
                        free(piVar15);
                    }
                    if (piVar1 == (int *)0x0)
                        goto LAB_000326bc;
                    puVar9 = *(undefined4 **)(piVar1[9] + 0x104);
                    piVar6 = (int *)piVar1[2];
                    piVar15 = piVar1;
                    piVar5 = DAT_00068c64;
                } while (true);
            }
            iVar3 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00068c4c);
            if (iVar3 == 0) {
                (*DAT_0006797c)();
                goto LAB_00032300;
            }
            goto LAB_00032980;
        }
        iVar3 = pthread_mutex_unlock(__mutex);
        if (iVar3 == 0) {
            (*DAT_0006797c)();
            goto LAB_0003254c;
        }
    LAB_000329bc:
        piVar15 = __errno_location();
        pcVar16 = "reap_curl";
        uVar7 = 0x27fb;
        goto LAB_00032994;
    }
    goto LAB_00032300;
LAB_000326bc:
    iVar3 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00068c4c);
    if (iVar3 != 0) {
    LAB_00032980:
        piVar15 = __errno_location();
        pcVar16 = "prune_stratum_shares";
        uVar7 = 0x281a;
    LAB_00032994:
        pcVar8 = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
    LAB_0003292c:
        snprintf(acStack_838, 0x800, pcVar8, *piVar15, "cgminer.c", pcVar16,
                 uVar7);
        FUN_0001dbec(3, acStack_838, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002c508(1);
    }
    (*DAT_0006797c)();
    if (uVar2 != 0) {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (3 < DAT_00067858)) {
            snprintf(
                acStack_838, 0x800,
                "Lost %d shares due to no stratum share response from pool %d",
                uVar2, *puVar10);
            FUN_0001dbec(4, acStack_838, 0);
        }
        bVar17 = CARRY4(DAT_000762c0, uVar2);
        DAT_000762c0 = DAT_000762c0 + uVar2;
        puVar10[0x1e] = puVar10[0x1e] + uVar2;
        DAT_000762c4 = DAT_000762c4 + ((int)uVar2 >> 0x1f) + (uint)bVar17;
    }
LAB_00032300:
    if (iVar14 == 0x78) {
        uVar2 = puVar10[0x26];
        uVar12 = puVar10[10];
        dVar18 = (double)FUN_0004ace4(
            uVar12 - uVar2,
            puVar10[0xb] - (((int)uVar2 >> 0x1f) + (uint)(uVar12 < uVar2)));
        puVar10[0x26] = uVar12;
        dVar18 = (*(double *)(puVar10 + 0x24) + dVar18 * 0.63) / 1.63;
        *(double *)(puVar10 + 0x24) = dVar18;
        puVar10[0x27] = (int)(longlong)dVar18;
    }
    if ((puVar10[0x19] != 0) && (*(char *)(puVar10 + 0x47) == '\0')) {
        iVar3 = FUN_0002cfc4(puVar10, 1);
        if (iVar3 == 0) {
            FUN_00020580(puVar10 + 0x22);
        } else {
            iVar3 = FUN_0002cf5c(puVar10, (int)puVar10 + 0x61);
            if (iVar3 != 0) {
                FUN_00030098(puVar10);
            }
        }
        if (((*(char *)((int)puVar10 + 0x61) == '\0') && (DAT_00068ae4 == 0)) &&
            ((iVar13 = puVar10[1], iVar3 = FUN_0002ffec(),
              iVar13 < iVar3 &&
                  (DAT_000681f0 < local_848[0] - puVar10[0x22])))) {
            if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                (3 < DAT_00067858)) {
                snprintf(acStack_838, 0x800,
                         "Pool %d %s stable for >%d seconds", *puVar10,
                         puVar10[0x29], DAT_000681f0);
                FUN_0001dbec(4, acStack_838, 0);
            }
            FUN_00031c3c(0);
        }
    }
    iVar11 = iVar11 + 1;
    if (DAT_00072e58 <= iVar11)
        goto LAB_0003237c;
    goto LAB_000322dc;
}

/* WARNING: Globals starting with '_' overlap smaller symbols at the same
 * address */

void FUN_000329fc(undefined4 *param_1)

{
    int *piVar1;
    int iVar2;
    int *piVar3;
    int *piVar4;
    char *__format;
    undefined4 *puVar5;
    int iVar6;
    int *piVar7;
    uint uVar8;
    uint uVar9;
    int *piVar10;
    bool bVar11;
    double dVar12;
    undefined4 uVar13;
    char acStack_830[2052];

    iVar2 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00068c4c);
    if (iVar2 != 0) {
        piVar3 = __errno_location();
        iVar2 = *piVar3;
        __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar13 = 0x1cee;
        goto LAB_00032d04;
    }
    if (DAT_00068c64 != (int *)0x0) {
        dVar12 = 0.0;
        puVar5 = *(undefined4 **)(DAT_00068c64[9] + 0x104);
        uVar9 = 0;
        piVar7 = (int *)DAT_00068c64[2];
        piVar3 = DAT_00068c64;
        piVar4 = DAT_00068c64;
        do {
            piVar1 = piVar7;
            DAT_00068c64 = piVar4;
            if (puVar5 == param_1) {
                iVar2 = piVar3[1];
                puVar5 = (undefined4 *)*piVar4;
                if (iVar2 == 0) {
                    piVar7 = (int *)piVar3[2];
                    if (piVar7 != (int *)0x0) {
                        iVar6 = puVar5[5];
                        piVar10 = piVar7;
                        DAT_00068c64 = piVar7;
                        if (piVar3 == (int *)(puVar5[4] - iVar6))
                            goto LAB_00032c68;
                        goto LAB_00032aac;
                    }
                    free((void *)*puVar5);
                    free((void *)*piVar4);
                    DAT_00068c64 = piVar7;
                } else {
                    iVar6 = puVar5[5];
                    if (piVar3 == (int *)(puVar5[4] - iVar6)) {
                    LAB_00032c68:
                        DAT_00068c64 = piVar4;
                        puVar5[4] = iVar2 + iVar6;
                        iVar2 = piVar3[1];
                        if (iVar2 == 0) {
                            piVar7 = (int *)piVar3[2];
                            piVar10 = piVar7;
                            DAT_00068c64 = piVar7;
                            goto LAB_00032aac;
                        }
                        iVar6 = *(int *)(*piVar4 + 0x14);
                    }
                    *(int *)(iVar2 + iVar6 + 8) = piVar3[2];
                    piVar7 = (int *)piVar3[2];
                    piVar10 = piVar4;
                LAB_00032aac:
                    piVar4 = (int *)*piVar10;
                    if (piVar7 != (int *)0x0) {
                        *(int *)((int)piVar7 + piVar4[5] + 4) = piVar3[1];
                        piVar4 = (int *)*piVar10;
                    }
                    uVar8 = piVar4[1] - 1U & piVar3[7];
                    iVar2 = *piVar4 + uVar8 * 0xc;
                    *(int *)(iVar2 + 4) = *(int *)(iVar2 + 4) + -1;
                    if (*(int **)(*(int *)*piVar10 + uVar8 * 0xc) == piVar3) {
                        *(int *)(*(int *)*piVar10 + uVar8 * 0xc) = piVar3[4];
                    }
                    iVar2 = piVar3[4];
                    if (piVar3[3] != 0) {
                        *(int *)(piVar3[3] + 0x10) = iVar2;
                        iVar2 = piVar3[4];
                    }
                    if (iVar2 != 0) {
                        *(int *)(iVar2 + 0xc) = piVar3[3];
                    }
                    *(int *)(*piVar10 + 0xc) = *(int *)(*piVar10 + 0xc) + -1;
                }
                uVar9 = uVar9 + 1;
                dVar12 = dVar12 + *(double *)(piVar3[9] + 0x178);
                FUN_0002a9d4(piVar3 + 9, "cgminer.c", "clear_stratum_shares",
                             0x1cf6);
                param_1[0xbb] = param_1[0xbb] + -1;
                free(piVar3);
            }
            if (piVar1 == (int *)0x0)
                goto LAB_00032b74;
            puVar5 = *(undefined4 **)(piVar1[9] + 0x104);
            piVar7 = (int *)piVar1[2];
            piVar3 = piVar1;
            piVar4 = DAT_00068c64;
        } while (true);
    }
    iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00068c4c);
    if (iVar2 == 0) {
        (*DAT_0006797c)();
        return;
    }
    goto LAB_00032d28;
LAB_00032b74:
    iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00068c4c);
    if (iVar2 == 0) {
        (*DAT_0006797c)();
        if (uVar9 != 0) {
            if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                (3 < DAT_00067858)) {
                snprintf(acStack_830, 0x800,
                         "Lost %d shares due to stratum disconnect on pool %d",
                         uVar9, *param_1);
                FUN_0001dbec(4, acStack_830, 0);
            }
            _DAT_00072ef0 = _DAT_00072ef0 + dVar12;
            bVar11 = CARRY4(DAT_000762c0, uVar9);
            DAT_000762c0 = DAT_000762c0 + uVar9;
            DAT_000762c4 = DAT_000762c4 + ((int)uVar9 >> 0x1f) + (uint)bVar11;
            *(double *)(param_1 + 0x16) = *(double *)(param_1 + 0x16) + dVar12;
            param_1[0x1e] = param_1[0x1e] + uVar9;
        }
        return;
    }
LAB_00032d28:
    piVar3 = __errno_location();
    iVar2 = *piVar3;
    __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
    uVar13 = 0x1cfc;
LAB_00032d04:
    snprintf(acStack_830, 0x800, __format, iVar2, "cgminer.c",
             "clear_stratum_shares", uVar13);
    FUN_0001dbec(3, acStack_830, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

int FUN_00032d98(int param_1)

{
    code *pcVar1;
    int iVar2;
    int iVar3;
    undefined4 *puVar4;
    int iVar5;
    int *piVar6;
    char *__format;
    int iVar7;
    int iVar8;
    int iVar9;
    bool bVar10;
    undefined4 uVar11;
    timespec local_828;
    int local_820;
    int local_81c;
    char local_818[36];
    uint local_7f4;
    char acStack_7f0[2008];

    iVar3 = pthread_mutex_lock(DAT_00068b20);
    if (iVar3 != 0) {
        piVar6 = __errno_location();
        iVar3 = *piVar6;
        __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar11 = 0x2027;
        goto LAB_000331b4;
    }
    if ((DAT_00068bfc == 0) ||
        (*(int *)(*(int *)(DAT_00068bfc + 0x158) + 0xc) == 0)) {
        if (param_1 != 0) {
            do {
                FUN_00020580(&local_820);
                local_828.tv_nsec = local_81c * 1000;
                local_828.tv_sec = local_820 + 10;
                pthread_cond_signal((pthread_cond_t *)&DAT_00072e60);
                iVar3 = pthread_cond_timedwait(
                    (pthread_cond_t *)(DAT_00074f58 + 0x28), DAT_00068b20,
                    &local_828);
                if (((iVar3 != 0) && (DAT_00068b78 == '\0')) &&
                    ((DAT_00068b78 = '\x01',
                      DAT_00072d88 != '\0' ||
                          ((DAT_000686e0 != '\0' || (3 < DAT_00067858)))))) {
                    builtin_strncpy(local_818,
                                    "Waiting for work to be available fro",
                                    0x24);
                    local_7f4._0_1_ = 'm';
                    local_7f4._1_1_ = ' ';
                    local_7f4._2_1_ = 'p';
                    local_7f4._3_1_ = 'o';
                    builtin_strncpy(acStack_7f0, "ols.", 4);
                    acStack_7f0[4] = 0;
                    FUN_0001dbec(4, local_818, 0);
                }
            } while ((DAT_00068bfc == 0) ||
                     (*(int *)(*(int *)(DAT_00068bfc + 0x158) + 0xc) == 0));
            goto LAB_00032ec4;
        }
    } else {
    LAB_00032ec4:
        if (DAT_00068b78 != '\0') {
            if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                (3 < DAT_00067858)) {
                builtin_strncpy(local_818,
                                "Work available from pools, resuming.", 0x24);
                local_7f4 = local_7f4 & 0xffffff00;
                FUN_0001dbec(4, local_818, 0);
            }
            DAT_00068b78 = '\0';
            if (DAT_00068bfc == 0) {
            LAB_000330d0:
                /* WARNING: Does not return */
                pcVar1 = (code *)software_udf(0, 0x330d8);
                (*pcVar1)();
            }
        }
        iVar3 = DAT_00068bfc;
        puVar4 = *(undefined4 **)(DAT_00068bfc + 0x158);
        param_1 = DAT_00068bfc;
        if (((DAT_00068c70 < (int)puVar4[3]) &&
             (*(char *)(DAT_00068bfc + 0x111) == '\0')) &&
            (*(int *)(DAT_00068bfc + 0x114) != 0)) {
            iVar7 = *(int *)(DAT_00068bfc + 0x160);
            do {
                if (iVar7 == 0)
                    goto LAB_000330d0;
                param_1 = iVar7;
            } while ((*(char *)(iVar7 + 0x111) == '\0') &&
                     (piVar6 = (int *)(iVar7 + 0x114),
                      iVar7 = *(int *)(iVar7 + 0x160), *piVar6 != 0));
        }
        iVar7 = *(int *)(param_1 + 0x15c);
        if (iVar7 == 0) {
            iVar5 = *(int *)(param_1 + 0x160);
            if (iVar5 != 0) {
                iVar9 = puVar4[5];
                iVar8 = iVar5;
                iVar2 = iVar5;
                if (param_1 == puVar4[4] - iVar9)
                    goto LAB_0003310c;
                goto LAB_00032f30;
            }
            free((void *)*puVar4);
            free(*(void **)(DAT_00068bfc + 0x158));
            DAT_00068bfc = iVar5;
        } else {
            iVar9 = puVar4[5];
            if (param_1 == puVar4[4] - iVar9) {
            LAB_0003310c:
                puVar4[4] = iVar7 + iVar9;
                iVar7 = *(int *)(param_1 + 0x15c);
                if (iVar7 == 0) {
                    iVar5 = *(int *)(param_1 + 0x160);
                    iVar8 = iVar5;
                    iVar2 = iVar5;
                    goto LAB_00032f30;
                }
                iVar9 = *(int *)(*(int *)(iVar3 + 0x158) + 0x14);
            }
            iVar5 = DAT_00068bfc;
            *(undefined4 *)(iVar7 + iVar9 + 8) =
                *(undefined4 *)(param_1 + 0x160);
            iVar8 = *(int *)(param_1 + 0x160);
            iVar2 = DAT_00068bfc;
        LAB_00032f30:
            DAT_00068bfc = iVar2;
            piVar6 = *(int **)(iVar5 + 0x158);
            if (iVar8 != 0) {
                *(undefined4 *)(iVar8 + piVar6[5] + 4) =
                    *(undefined4 *)(param_1 + 0x15c);
                piVar6 = *(int **)(iVar5 + 0x158);
            }
            iVar3 = (piVar6[1] - 1U & *(uint *)(param_1 + 0x174)) * 0xc;
            *(int *)(*piVar6 + iVar3 + 4) = *(int *)(*piVar6 + iVar3 + 4) + -1;
            puVar4 = (undefined4 *)(iVar5 + 0x158);
            bVar10 = *(int *)(*(int *)*puVar4 + iVar3) == param_1 + 0x158;
            if (bVar10) {
                iVar5 = *(int *)(param_1 + 0x168);
                *(int *)(*(int *)*puVar4 + iVar3) = iVar5;
            }
            iVar3 = *(int *)(param_1 + 0x168);
            if (bVar10) {
                iVar5 = DAT_00068bfc;
            }
            if (*(int *)(param_1 + 0x164) != 0) {
                *(int *)(*(int *)(param_1 + 0x164) + 0x10) = iVar3;
                iVar3 = *(int *)(param_1 + 0x168);
            }
            if (iVar3 != 0) {
                *(undefined4 *)(iVar3 + 0xc) = *(undefined4 *)(param_1 + 0x164);
            }
            *(int *)(*(int *)(iVar5 + 0x158) + 0xc) =
                *(int *)(*(int *)(iVar5 + 0x158) + 0xc) + -1;
        }
        if ((*(char *)(param_1 + 0x111) == '\0') &&
            (*(int *)(param_1 + 0x114) != 0)) {
            DAT_00068c70 = DAT_00068c70 + -1;
        }
        pthread_cond_signal((pthread_cond_t *)&DAT_00072e60);
        pthread_cond_signal((pthread_cond_t *)(DAT_00074f58 + 0x28));
        DAT_00076078 = time((time_t *)0x0);
    }
    iVar3 = pthread_mutex_unlock(DAT_00068b20);
    if (iVar3 == 0) {
        (*DAT_0006797c)();
        return param_1;
    }
    piVar6 = __errno_location();
    iVar3 = *piVar6;
    __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
    uVar11 = 0x206f;
LAB_000331b4:
    snprintf(local_818, 0x800, __format, iVar3, "cgminer.c", "hash_pop",
             uVar11);
    FUN_0001dbec(3, local_818, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

undefined4 FUN_00033230(int *param_1)

{
    char cVar1;
    int iVar2;
    int iVar3;
    pthread_t __th;
    int *piVar4;
    char *__format;
    undefined4 uVar5;
    char acStack_810[2052];

    if (*(char *)((int)param_1 + 0x6b) == '\0') {
        __th = pthread_self();
        pthread_detach(__th);
    }
    cVar1 = *(char *)((int)param_1 + 0x69);
    while (true) {
        if (cVar1 != '\0') {
            return 0;
        }
        iVar2 = FUN_0002cfc4(param_1, 0);
        if (iVar2 != 0)
            break;
        FUN_000320c0(param_1);
        if (*(char *)((int)param_1 + 0x6b) != '\0') {
        LAB_00033328:
            *(undefined1 *)(param_1 + 0x47) = 0;
            return 0;
        }
        sleep(0x1e);
        cVar1 = *(char *)((int)param_1 + 0x69);
    }
    FUN_0002cf5c(param_1, (int)param_1 + 0x61);
    iVar2 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00076140);
    if (iVar2 == 0) {
        iVar2 = pthread_rwlock_wrlock((pthread_rwlock_t *)&DAT_00076158);
        if (iVar2 == 0) {
            iVar2 = 0;
            if (DAT_00068a04 == '\0') {
                iVar2 = *param_1;
                DAT_00068a04 = '\x01';
                DAT_00068b74 = param_1;
                if (iVar2 != 0) {
                    iVar2 = 1;
                }
            }
            iVar3 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00076158);
            if (iVar3 == 0) {
                iVar3 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00076140);
                if (iVar3 == 0) {
                    (*DAT_0006797c)();
                    if ((iVar2 != 0) &&
                        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
                          (4 < DAT_00067858)))) {
                        snprintf(acStack_810, 0x800,
                                 "Switching to pool %d %s - first alive pool",
                                 *param_1, param_1[0x29]);
                        FUN_0001dbec(5, acStack_810, 0);
                    }
                    FUN_00030098(param_1);
                    FUN_00031c3c(0);
                    goto LAB_00033328;
                }
                piVar4 = __errno_location();
                iVar2 = *piVar4;
                __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
                uVar5 = 0x2a62;
            } else {
                piVar4 = __errno_location();
                iVar2 = *piVar4;
                __format = "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d";
                uVar5 = 0x2a62;
            }
        } else {
            piVar4 = __errno_location();
            iVar2 = *piVar4;
            __format = "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d";
            uVar5 = 0x2a54;
        }
    } else {
        piVar4 = __errno_location();
        iVar2 = *piVar4;
        __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar5 = 0x2a54;
    }
    snprintf(acStack_810, 0x800, __format, iVar2, "cgminer.c",
             "test_pool_thread", uVar5);
    FUN_0001dbec(3, acStack_810, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

void FUN_000334c0(undefined4 param_1, int param_2)

{
    int iVar1;
    void *__ptr;
    void *__ptr_00;
    void *__ptr_01;
    size_t sVar2;
    int *piVar3;
    undefined4 uVar4;
    undefined4 uVar5;
    int iVar6;
    char *pcVar7;
    char acStack_c28[1023];
    undefined1 local_829;
    undefined4 local_828;
    undefined4 uStack_824;
    undefined4 uStack_820;
    undefined4 uStack_81c;
    undefined4 uStack_818;
    undefined2 local_814;

    if (DAT_000688fc == (FILE *)0x0) {
        return;
    }
    uVar4 = *(undefined4 *)(param_2 + 0x100);
    iVar1 = FUN_0002f964(uVar4);
    uVar5 = *(undefined4 *)(param_2 + 0x1b0);
    iVar1 = *(int *)(iVar1 + 0x24);
    iVar6 = *(int *)(param_2 + 0x104);
    __ptr = (void *)FUN_0001f970(param_2 + 0xa0, 0x20);
    __ptr_00 = (void *)FUN_0001f970(param_2 + 0xc0, 0x20);
    __ptr_01 = (void *)FUN_0001f970(param_2, 0x80);
    sVar2 = snprintf(acStack_c28, 0x400, "%lu,%s,%s,%s,%s%u,%u,%s,%s\n", uVar5,
                     param_1, __ptr, *(undefined4 *)(iVar6 + 0xa4),
                     *(undefined4 *)(*(int *)(iVar1 + 4) + 8),
                     *(undefined4 *)(iVar1 + 8), uVar4, __ptr_00, __ptr_01);
    free(__ptr);
    free(__ptr_00);
    free(__ptr_01);
    if ((int)sVar2 < 0x400) {
        if ((int)sVar2 < 0) {
            if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                (DAT_00067858 < 3)) {
                return;
            }
            pcVar7 = "sharelog printf error";
            goto LAB_00033644;
        }
    } else {
        local_829 = 0;
    }
    iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00068c74);
    if (iVar1 == 0) {
        sVar2 = fwrite(acStack_c28, sVar2, 1, DAT_000688fc);
        fflush(DAT_000688fc);
        iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00068c74);
        if (iVar1 == 0) {
            (*DAT_0006797c)();
            if (sVar2 == 1) {
                return;
            }
            if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                (DAT_00067858 < 3)) {
                return;
            }
            pcVar7 = "sharelog fwrite error";
        LAB_00033644:
            local_828 = *(undefined4 *)pcVar7;
            uStack_824 = *(undefined4 *)(pcVar7 + 4);
            uStack_820 = *(undefined4 *)(pcVar7 + 8);
            uStack_81c = *(undefined4 *)(pcVar7 + 0xc);
            uStack_818 = *(undefined4 *)(pcVar7 + 0x10);
            local_814 = (undefined2) * (undefined4 *)(pcVar7 + 0x14);
            FUN_0001dbec(3, &local_828, 0);
            return;
        }
        piVar3 = __errno_location();
        iVar1 = *piVar3;
        uVar4 = 0x2ad;
        pcVar7 = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
    } else {
        piVar3 = __errno_location();
        iVar1 = *piVar3;
        pcVar7 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar4 = 0x2aa;
    }
    snprintf((char *)&local_828, 0x800, pcVar7, iVar1, "cgminer.c", "sharelog",
             uVar4);
    FUN_0001dbec(3, &local_828, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

void FUN_00033768(int param_1, int param_2)

{
    int iVar1;
    int iVar2;
    time_t tVar3;
    void *__ptr;
    void *__ptr_00;
    int *piVar4;
    uint *puVar5;
    char *__format;
    uint uVar6;
    undefined4 uVar7;
    uint *puVar8;
    pthread_rwlock_t *__rwlock;
    uint local_890;
    uint uStack_88c;
    uint local_888[7];
    uint uStack_86c;
    uint local_868[8];
    undefined1 auStack_848[32];
    char acStack_828[2052];

    iVar2 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xd4));
    if (iVar2 != 0) {
        piVar4 = __errno_location();
        iVar2 = *piVar4;
        __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar7 = 0x20d9;
    LAB_00033c38:
        snprintf(acStack_828, 0x800, __format, iVar2, "cgminer.c",
                 "gen_stratum_work", uVar7);
        FUN_0001dbec(3, acStack_828, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002c508(1);
    }
    __rwlock = (pthread_rwlock_t *)(param_1 + 0xec);
    iVar2 = pthread_rwlock_wrlock(__rwlock);
    if (iVar2 != 0) {
        piVar4 = __errno_location();
        iVar2 = *piVar4;
        __format = "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar7 = 0x20d9;
        goto LAB_00033c38;
    }
    puVar8 = (uint *)(param_1 + 0x280);
    local_890 = *puVar8;
    uStack_88c = *(uint *)(param_1 + 0x284);
    FUN_000231cc(*(int *)(param_1 + 0x630) + *(int *)(param_1 + 0x638),
                 &local_890, *(undefined4 *)(param_1 + 0x288), "cgminer.c",
                 "gen_stratum_work", 0x20de);
    uVar6 = *puVar8;
    iVar2 = *(int *)(param_1 + 0x284);
    *puVar8 = uVar6 + 1;
    *(uint *)(param_1 + 0x284) = iVar2 + (uint)(0xfffffffe < uVar6);
    *(uint *)(param_2 + 0x128) = uVar6;
    *(int *)(param_2 + 300) = iVar2;
    *(undefined4 *)(param_2 + 0x130) = *(undefined4 *)(param_1 + 0x288);
    iVar2 = pthread_rwlock_unlock(__rwlock);
    if (iVar2 != 0) {
        piVar4 = __errno_location();
        iVar2 = *piVar4;
        __format = "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d";
        uVar7 = 0x20e4;
        goto LAB_00033c38;
    }
    iVar2 = pthread_rwlock_rdlock(__rwlock);
    if (iVar2 != 0) {
        piVar4 = __errno_location();
        iVar2 = *piVar4;
        __format = "WTF RDLOCK ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar7 = 0x20e4;
        goto LAB_00033c38;
    }
    iVar2 = pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0xd4));
    if (iVar2 != 0) {
        piVar4 = __errno_location();
        iVar2 = *piVar4;
        __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
        uVar7 = 0x20e4;
        goto LAB_00033c38;
    }
    FUN_0001e8c8(*(undefined4 *)(param_1 + 0x630),
                 *(undefined4 *)(param_1 + 0x634), acStack_828);
    FUN_0001e8c8(acStack_828, 0x20, local_888);
    FUN_000231cc(local_868, local_888, 0x20, "cgminer.c", "gen_stratum_work",
                 0x20e8);
    if (0 < *(int *)(param_1 + 0x6bc)) {
        iVar2 = 0;
        do {
            iVar1 = iVar2 * 4;
            iVar2 = iVar2 + 1;
            FUN_000231cc(auStack_848,
                         *(undefined4 *)(*(int *)(param_1 + 0x2b4) + iVar1),
                         0x20, "cgminer.c", "gen_stratum_work", 0x20ec);
            FUN_0001e8c8(local_868, 0x40, acStack_828);
            FUN_0001e8c8(acStack_828, 0x20, local_888);
            FUN_000231cc(local_868, local_888, 0x20, "cgminer.c",
                         "gen_stratum_work", 0x20ee);
        } while (iVar2 < *(int *)(param_1 + 0x6bc));
    }
    puVar5 = &uStack_86c;
    puVar8 = &uStack_88c;
    do {
        puVar5 = puVar5 + 1;
        uVar6 = *puVar5;
        puVar8 = puVar8 + 1;
        *puVar8 = uVar6 << 0x18 | (uVar6 >> 8 & 0xff) << 0x10 |
                  (uVar6 >> 0x10 & 0xff) << 8 | uVar6 >> 0x18;
    } while (local_868 + 7 != puVar5);
    FUN_000231cc(param_2, param_1 + 0x63c, 0x70, "cgminer.c",
                 "gen_stratum_work", 0x20f7);
    FUN_000231cc(param_2 + 0x24, local_888, 0x20, "cgminer.c",
                 "gen_stratum_work", 0x20f8);
    uVar7 = *(undefined4 *)(param_1 + 0x734);
    *(undefined4 *)(param_2 + 0x138) = *(undefined4 *)(param_1 + 0x730);
    *(undefined4 *)(param_2 + 0x13c) = uVar7;
    uVar7 = __strdup(*(undefined4 *)(param_1 + 0x2b0));
    *(undefined4 *)(param_2 + 0x120) = uVar7;
    uVar7 = __strdup(*(undefined4 *)(param_1 + 0x274));
    *(undefined4 *)(param_2 + 0x140) = uVar7;
    uVar7 = __strdup(param_1 + 0x71c);
    *(undefined4 *)(param_2 + 0x134) = uVar7;
    iVar2 = pthread_rwlock_unlock(__rwlock);
    if (iVar2 != 0) {
        piVar4 = __errno_location();
        iVar2 = *piVar4;
        __format = "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d";
        uVar7 = 0x2103;
        goto LAB_00033c38;
    }
    (*DAT_0006797c)();
    if (DAT_000686e1 == '\0')
        goto LAB_000339e4;
    __ptr = (void *)FUN_0001f970(param_2, 0x70);
    __ptr_00 = (void *)FUN_0001f970(local_888, 0x20);
    if (DAT_000686e1 != '\0') {
        if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
            (DAT_00067858 < 7)) {
        LAB_00033b30:
            if ((DAT_000686e0 == '\0') && (DAT_00067858 < 7)) {
            LAB_00033b98:
                if ((DAT_000686e0 != '\0') || (6 < DAT_00067858)) {
                LAB_00033bb8:
                    snprintf(acStack_828, 0x800,
                             "Work job_id %s nonce2 %llu ntime %s",
                             *(undefined4 *)(param_2 + 0x120),
                             *(undefined4 *)(param_2 + 0x128),
                             *(undefined4 *)(param_2 + 300),
                             *(undefined4 *)(param_2 + 0x134));
                    FUN_0001dbec(7, acStack_828, 0);
                }
            } else {
            LAB_00033b50:
                snprintf(acStack_828, 0x800, "Generated stratum header %s",
                         __ptr);
                FUN_0001dbec(7, acStack_828, 0);
                if (DAT_000686e1 != '\0') {
                    if (DAT_00072d88 == '\0')
                        goto LAB_00033b98;
                    goto LAB_00033bb8;
                }
            }
        } else {
            snprintf(acStack_828, 0x800, "Generated stratum merkle %s",
                     __ptr_00);
            FUN_0001dbec(7, acStack_828, 0);
            if (DAT_000686e1 != '\0') {
                if (DAT_00072d88 == '\0')
                    goto LAB_00033b30;
                goto LAB_00033b50;
            }
        }
    }
    free(__ptr);
    free(__ptr_00);
LAB_000339e4:
    FUN_00028f4c(param_2);
    FUN_0002b7a4((int)*(undefined8 *)(param_2 + 0x138), param_2 + 0xa0);
    DAT_00072f0c = DAT_00072f0c + 1;
    tVar3 = time((time_t *)0x0);
    if (5 < tVar3 - DAT_00068c8c) {
        DAT_00068c8c = time((time_t *)0x0);
        DAT_00068c90 = DAT_00072f0c;
    }
    uVar7 = DAT_00068c94;
    *(undefined1 *)(param_2 + 0x11c) = 1;
    *(undefined4 *)(param_2 + 0x150) = uVar7;
    *(undefined4 *)(param_2 + 0xf8) = 0;
    *(undefined1 *)(param_2 + 0x118) = 0;
    *(undefined1 *)(param_2 + 0x1b8) = 0x53;
    *(undefined4 *)(param_2 + 0xf4) = 0x3c;
    *(int *)(param_2 + 0x104) = param_1;
    FUN_00028d58((int)*(undefined8 *)(param_2 + 0x138), param_2);
    FUN_00020580(param_2 + 0x108);
    return;
}

void FUN_00033d48(undefined4 *param_1, int *param_2, int param_3,
                  undefined4 param_4, undefined4 param_5, undefined4 param_6,
                  uint param_7)

{
    undefined4 uVar1;
    int iVar2;
    undefined4 uVar3;
    char *unaff_r11;

    iVar2 = FUN_0002dbec();
    *param_2 = iVar2;
    uVar3 = *param_1;
    iVar2 = pthread_mutex_lock((pthread_mutex_t *)(param_3 + 0xd4));
    if (iVar2 == 0) {
        iVar2 = pthread_rwlock_wrlock((pthread_rwlock_t *)(param_3 + 0xec));
        if (iVar2 == 0) {
            unaff_r11 = "get_work_by_nonce2";
            param_7 = param_7 << 0x18 | (param_7 >> 8 & 0xff) << 0x10 |
                      (param_7 >> 0x10 & 0xff) << 8 | param_7 >> 0x18;
            *(undefined4 *)(param_3 + 0x280) = param_5;
            *(undefined4 *)(param_3 + 0x284) = param_6;
            FUN_000231cc(param_3 + 0x63c, &param_7, 4, "cgminer.c",
                         "get_work_by_nonce2", 0x20be);
            iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_3 + 0xec));
            if (iVar2 == 0) {
                iVar2 =
                    pthread_mutex_unlock((pthread_mutex_t *)(param_3 + 0xd4));
                if (iVar2 == 0) {
                    (*DAT_0006797c)();
                    FUN_00033768(param_3, *param_2);
                    uVar1 = DAT_00068c94;
                    *(undefined4 *)(*param_2 + 0x104) = param_4;
                    *(undefined4 *)(*param_2 + 0x100) = uVar3;
                    *(undefined4 *)(*param_2 + 0x150) = uVar1;
                    *(int *)(*(int *)(*param_2 + 0x104) + 0x44) =
                        *(int *)(*(int *)(*param_2 + 0x104) + 0x44) + 1;
                    *(undefined1 *)(*param_2 + 0x110) = 1;
                    *(uint *)(*param_2 + 0x1bc) = param_7;
                    return;
                }
                /* WARNING: Subroutine does not return */
                FUN_0002ce94("get_work_by_nonce2", 0x20bf);
            }
            goto LAB_00033e88;
        }
    } else {
        FUN_0002ce38("get_work_by_nonce2", 0x20bb);
    }
    FUN_0002cddc("get_work_by_nonce2", 0x20bb);
LAB_00033e88:
    /* WARNING: Subroutine does not return */
    FUN_0002d984(unaff_r11, 0x20bf);
}

char FUN_00033ea4(int param_1, int param_2)

{
    char cVar1;
    int iVar2;
    int iVar3;
    int *piVar4;
    int iVar5;
    pthread_rwlock_t *__rwlock;
    undefined4 uVar6;
    char *pcVar7;
    int local_830[2];
    undefined4 local_828;
    undefined4 uStack_824;
    undefined4 uStack_820;
    undefined4 uStack_81c;
    undefined4 local_818;
    undefined4 uStack_814;
    uint local_810;
    undefined4 uStack_80c;
    uint local_808;
    undefined4 uStack_804;
    undefined2 local_800;

    cVar1 = DAT_000686e1;
    if (DAT_00068c48 != '\0') {
        return '\0';
    }
    if (DAT_00072da8 != 0) {
        return '\0';
    }
    if (*(int *)(param_1 + 0x150) != DAT_00068c94) {
        if (DAT_000686e1 == '\0') {
            return '\x01';
        }
        if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
            (DAT_00067858 < 7)) {
            return DAT_000686e1;
        }
        local_828._0_1_ = 'W';
        local_828._1_1_ = 'o';
        local_828._2_1_ = 'r';
        local_828._3_1_ = 'k';
        uStack_824._0_1_ = ' ';
        uStack_824._1_1_ = 's';
        uStack_824._2_1_ = 't';
        uStack_824._3_1_ = 'a';
        uStack_820._0_1_ = 'l';
        uStack_820._1_1_ = 'e';
        uStack_820._2_1_ = ' ';
        uStack_820._3_1_ = 'd';
        uStack_81c._0_1_ = 'u';
        uStack_81c._1_1_ = 'e';
        uStack_81c._2_1_ = ' ';
        uStack_81c._3_1_ = 't';
        local_818._0_1_ = 'o';
        local_818._1_1_ = ' ';
        local_818._2_1_ = 'b';
        local_818._3_1_ = 'l';
        uStack_814._0_1_ = 'o';
        uStack_814._1_1_ = 'c';
        uStack_814._2_1_ = 'k';
        uStack_814._3_1_ = ' ';
        local_810._0_1_ = 'm';
        local_810._1_1_ = 'i';
        local_810._2_1_ = 's';
        local_810._3_1_ = 'm';
        uStack_80c._0_1_ = 'a';
        uStack_80c._1_1_ = 't';
        uStack_80c._2_1_ = 'c';
        uStack_80c._3_1_ = 'h';
        local_808 = local_808 & 0xffffff00;
        FUN_0001dbec(7, &local_828, 0);
        return cVar1;
    }
    iVar5 = *(int *)(param_1 + 0x104);
    iVar3 = *(int *)(param_1 + 0x114);
    if (*(int *)(param_1 + 0x114) <= DAT_000681f4) {
        iVar3 = DAT_000681f8;
    }
    if ((param_2 != 0) || (*(char *)(iVar5 + 0x290) == '\0')) {
    LAB_0003409c:
        iVar3 = iVar3 - (int)(longlong)(*(double *)(iVar5 + 0x1c0) * 5.0 + 1.0);
        FUN_00020580(local_830);
        cVar1 = DAT_000686e1;
        if (iVar3 < 5) {
            iVar3 = 5;
        }
        if (local_830[0] - *(int *)(param_1 + 0x108) < iVar3) {
            if (param_2 != 0 || DAT_00074f5d != '\x01') {
                return '\0';
            }
            iVar3 = FUN_0002fe54();
            if (iVar5 == iVar3) {
                return '\0';
            }
            if (*(char *)(param_1 + 0x11a) != '\0') {
                return '\0';
            }
            if (DAT_00068ae4 - 3U < 2) {
                return '\0';
            }
            if ((DAT_000686e1 != '\0') &&
                (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
                  (6 < DAT_00067858)))) {
                pcVar7 = "Work stale due to fail only pool mismatch";
            LAB_000341fc:
                cVar1 = DAT_000686e1;
                local_828 = *(undefined4 *)pcVar7;
                uStack_824 = *(undefined4 *)(pcVar7 + 4);
                uStack_820 = *(undefined4 *)(pcVar7 + 8);
                uStack_81c = *(undefined4 *)(pcVar7 + 0xc);
                local_818 = *(undefined4 *)(pcVar7 + 0x10);
                uStack_814 = *(undefined4 *)(pcVar7 + 0x14);
                local_810 = *(uint *)(pcVar7 + 0x18);
                uStack_80c = *(undefined4 *)(pcVar7 + 0x1c);
                local_808 = *(uint *)(pcVar7 + 0x20);
                uStack_804 = *(undefined4 *)(pcVar7 + 0x24);
                local_800 = (undefined2) * (undefined4 *)(pcVar7 + 0x28);
                FUN_0001dbec(7, &local_828, 0);
                return cVar1;
            }
        } else if ((DAT_000686e1 != '\0') &&
                   (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
                     (6 < DAT_00067858)))) {
            local_828._0_1_ = 'W';
            local_828._1_1_ = 'o';
            local_828._2_1_ = 'r';
            local_828._3_1_ = 'k';
            uStack_824._0_1_ = ' ';
            uStack_824._1_1_ = 's';
            uStack_824._2_1_ = 't';
            uStack_824._3_1_ = 'a';
            uStack_820._0_1_ = 'l';
            uStack_820._1_1_ = 'e';
            uStack_820._2_1_ = ' ';
            uStack_820._3_1_ = 'd';
            uStack_81c._0_1_ = 'u';
            uStack_81c._1_1_ = 'e';
            uStack_81c._2_1_ = ' ';
            uStack_81c._3_1_ = 't';
            local_818._0_1_ = 'o';
            local_818._1_1_ = ' ';
            local_818._2_1_ = 'e';
            local_818._3_1_ = 'x';
            uStack_814._0_1_ = 'p';
            uStack_814._1_1_ = 'i';
            uStack_814._2_1_ = 'r';
            uStack_814._3_1_ = 'y';
            local_810 = local_810 & 0xffffff00;
            FUN_0001dbec(7, &local_828, 0);
            return cVar1;
        }
        return '\x01';
    }
    if ((*(char *)(iVar5 + 0x291) == '\0') ||
        (*(char *)(iVar5 + 0x293) == '\0')) {
        if (DAT_000686e1 == '\0') {
            return '\x01';
        }
        if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
            (DAT_00067858 < 7)) {
            return '\x01';
        }
        local_828._0_1_ = 'W';
        local_828._1_1_ = 'o';
        local_828._2_1_ = 'r';
        local_828._3_1_ = 'k';
        uStack_824._0_1_ = ' ';
        uStack_824._1_1_ = 's';
        uStack_824._2_1_ = 't';
        uStack_824._3_1_ = 'a';
        uStack_820._0_1_ = 'l';
        uStack_820._1_1_ = 'e';
        uStack_820._2_1_ = ' ';
        uStack_820._3_1_ = 'd';
        uStack_81c._0_1_ = 'u';
        uStack_81c._1_1_ = 'e';
        uStack_81c._2_1_ = ' ';
        uStack_81c._3_1_ = 't';
        local_818._0_1_ = 'o';
        local_818._1_1_ = ' ';
        local_818._2_1_ = 's';
        local_818._3_1_ = 't';
        uStack_814._0_1_ = 'r';
        uStack_814._1_1_ = 'a';
        uStack_814._2_1_ = 't';
        uStack_814._3_1_ = 'u';
        local_810._0_1_ = 'm';
        local_810._1_1_ = ' ';
        local_810._2_1_ = 'i';
        local_810._3_1_ = 'n';
        uStack_80c._0_1_ = 'a';
        uStack_80c._1_1_ = 'c';
        uStack_80c._2_1_ = 't';
        uStack_80c._3_1_ = 'i';
        local_808 = CONCAT13(local_808._3_1_, 0x6576);
        FUN_0001dbec(7, &local_828, 0);
        return cVar1;
    }
    iVar2 = pthread_mutex_lock((pthread_mutex_t *)(iVar5 + 0xd4));
    if (iVar2 == 0) {
        __rwlock = (pthread_rwlock_t *)(iVar5 + 0xec);
        iVar2 = pthread_rwlock_rdlock(__rwlock);
        if (iVar2 != 0)
            goto LAB_00034304;
        iVar2 = pthread_mutex_unlock((pthread_mutex_t *)(iVar5 + 0xd4));
        if (iVar2 != 0) {
            piVar4 = __errno_location();
            uVar6 = 0x1402;
            pcVar7 = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
            goto LAB_00034330;
        }
        iVar2 = strcmp(*(char **)(param_1 + 0x120), *(char **)(iVar5 + 0x2b0));
        if (iVar2 == 0) {
            iVar2 = pthread_rwlock_unlock(__rwlock);
            if (iVar2 == 0) {
                (*DAT_0006797c)();
                goto LAB_0003409c;
            }
        } else {
            iVar3 = pthread_rwlock_unlock(__rwlock);
            if (iVar3 == 0) {
                (*DAT_0006797c)();
                if (DAT_000686e1 == '\0') {
                    return '\x01';
                }
                if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                    (DAT_00067858 < 7)) {
                    return '\x01';
                }
                pcVar7 = "Work stale due to stratum job_id mismatch";
                goto LAB_000341fc;
            }
        }
    } else {
        FUN_0002ce38("stale_work", 0x1402);
    LAB_00034304:
        FUN_0002df98("stale_work", 0x1402);
    }
    piVar4 = __errno_location();
    uVar6 = 0x1409;
    pcVar7 = "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d";
LAB_00034330:
    snprintf((char *)&local_828, 0x800, pcVar7, *piVar4, "cgminer.c",
             "stale_work", uVar6);
    FUN_0001dbec(3, &local_828, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

int FUN_0003438c(int param_1, undefined4 param_2)

{
    time_t tVar1;
    time_t tVar2;
    undefined *puVar3;
    int iVar4;
    char cVar5;
    int iVar6;
    int iVar7;
    double dVar8;
    double dVar9;
    int local_824;
    char local_820[2048];

    local_824 = 0;
    iVar6 = *(int *)(param_1 + 0x24);
    FUN_00028a34();
    if ((DAT_000686e1 != '\0') &&
        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
          (6 < DAT_00067858)))) {
        builtin_strncpy(local_820, "Popping work from get queue to get work",
                        0x28);
        FUN_0001dbec(7, local_820, 0);
    }
    tVar1 = time((time_t *)0x0);
    while (local_824 == 0) {
        local_824 = FUN_00032d98(1);
        iVar7 = FUN_00033ea4(local_824, 0);
        if (iVar7 != 0) {
            FUN_0002acd0(&local_824, "cgminer.c", "get_work", 0x21f5);
            FUN_0002d820();
        }
    }
    tVar2 = time((time_t *)0x0);
    iVar7 = tVar2 - tVar1;
    cVar5 = DAT_000686e1;
    if (iVar7 < 1) {
    LAB_0003451c:
        if (cVar5 != '\0') {
        LAB_0003452c:
            if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                (6 < DAT_00067858)) {
                snprintf(local_820, 0x800,
                         "Got work from get queue to get work for thread %d",
                         param_2);
                FUN_0001dbec(7, local_820, 0);
            }
        }
    } else {
        if (DAT_000686e1 != '\0') {
            if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                (6 < DAT_00067858)) {
                snprintf(local_820, 0x800, "Get work blocked for %ld seconds",
                         iVar7);
                FUN_0001dbec(7, local_820, 0);
                cVar5 = DAT_000686e1;
                *(int *)(iVar6 + 0xe8) = *(int *)(iVar6 + 0xe8) + iVar7;
                goto LAB_0003451c;
            }
            *(int *)(iVar6 + 0xe8) = *(int *)(iVar6 + 0xe8) + iVar7;
            goto LAB_0003452c;
        }
        *(int *)(iVar6 + 0xe8) = *(int *)(iVar6 + 0xe8) + iVar7;
    }
    cVar5 = DAT_00068c48;
    *(undefined4 *)(local_824 + 0x100) = param_2;
    if (cVar5 != '\0') {
        iVar7 = *(int *)(iVar6 + 0x17c) + *(int *)(iVar6 + 0x180);
        *(int *)(iVar6 + 0x17c) = iVar7;
        if (iVar7 < 1) {
            *(undefined4 *)(iVar6 + 0x180) = 1;
        } else if (0xf < iVar7) {
            iVar7 = -1;
            *(undefined4 *)(iVar6 + 0x180) = 0xffffffff;
            iVar4 = *(int *)(iVar6 + 0x178) + 1;
            if (iVar4 < 0x10) {
                iVar7 = iVar4 * 5;
            }
            if (iVar4 == 0xf ||
                *(int *)(iVar6 + 0x178) + -0xe < 0 != SBORROW4(iVar4, 0xf)) {
                *(int *)(iVar6 + 0x178) = iVar4;
                puVar3 = &DAT_00068c98 + iVar7 * 0x20;
            } else {
                puVar3 = &DAT_00068c98;
                *(undefined4 *)(iVar6 + 0x178) = 0;
            }
            FUN_000231cc(local_824, puVar3, 0xa0, "cgminer.c",
                         "set_benchmark_work", 0x21de);
            goto LAB_00034590;
        }
        FUN_000231cc(local_824, &DAT_00069698 + iVar7 * 0xa0, 0xa0, "cgminer.c",
                     "set_benchmark_work", 0x21e2);
    }
LAB_00034590:
    FUN_00028a6c(param_1);
    *(undefined1 *)(local_824 + 0x110) = 1;
    dVar9 = *(double *)(*(int *)(iVar6 + 4) + 0x68);
    if (*(double *)(local_824 + 0x178) < dVar9) {
        dVar9 = *(double *)(local_824 + 0x178);
    }
    *(double *)(local_824 + 0xe0) = dVar9;
    dVar8 = *(double *)(*(int *)(iVar6 + 4) + 0x70);
    if (dVar9 < dVar8) {
        dVar9 = dVar8;
    }
    *(double *)(local_824 + 0xe0) = dVar9;
    return local_824;
}

undefined4 FUN_000346d8(undefined4 param_1, undefined4 param_2,
                        undefined4 param_3)

{
    undefined4 uVar1;

    uVar1 = FUN_0003438c(param_1, param_3);
    FUN_0002dcf8(param_2, uVar1);
    return uVar1;
}

int FUN_00034700(int param_1)

{
    int iVar1;
    int local_c;

    local_c = *(int *)(param_1 + 0x164);
    if (local_c != 0) {
        iVar1 = FUN_00033ea4(local_c);
        if (iVar1 == 0) {
            FUN_0002be8c(param_1, local_c);
        } else {
            FUN_0002acd0(&local_c, "cgminer.c", "__get_queued", 0x24f9);
            FUN_0002d820();
        }
        *(undefined4 *)(param_1 + 0x164) = 0;
        return local_c;
    }
    return 0;
}

undefined4 FUN_00034780(int param_1)

{
    int iVar1;
    undefined4 uVar2;

    iVar1 = pthread_rwlock_wrlock((pthread_rwlock_t *)(param_1 + 0x140));
    if (iVar1 == 0) {
        uVar2 = FUN_00034700(param_1);
        iVar1 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x140));
        if (iVar1 == 0) {
            (*DAT_0006797c)();
            return uVar2;
        }
    } else {
        FUN_0002cddc("get_queued", 0x250e);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002d984("get_queued", 0x2510);
}

void FUN_000347ec(void)

{
    int iVar1;
    int iVar2;
    undefined4 *puVar3;
    int *piVar4;
    int iVar5;
    int iVar6;
    int iVar7;
    uint uVar8;
    char *__format;
    int iVar9;
    int iVar10;
    bool bVar11;
    undefined4 uVar12;
    int local_824;
    char acStack_820[2052];

    iVar1 = pthread_mutex_lock(DAT_00068b20);
    if (iVar1 != 0) {
        piVar4 = __errno_location();
        iVar1 = *piVar4;
        __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar12 = 0x1523;
        goto LAB_00034ad4;
    }
    local_824 = DAT_00068bfc;
    if (DAT_00068bfc != 0) {
        iVar9 = *(int *)(DAT_00068bfc + 0x160);
        iVar2 = FUN_00033ea4(DAT_00068bfc, 0);
        iVar1 = 0;
        iVar5 = DAT_00068bfc;
        do {
            DAT_00068bfc = iVar5;
            if (iVar2 != 0) {
                iVar2 = *(int *)(local_824 + 0x15c);
                puVar3 = *(undefined4 **)(iVar5 + 0x158);
                if (iVar2 == 0) {
                    iVar6 = *(int *)(local_824 + 0x160);
                    if (iVar6 != 0) {
                        iVar7 = puVar3[5];
                        iVar10 = iVar6;
                        DAT_00068bfc = iVar6;
                        if (local_824 == puVar3[4] - iVar7)
                            goto LAB_0003497c;
                        goto LAB_00034878;
                    }
                    free((void *)*puVar3);
                    free(*(void **)(DAT_00068bfc + 0x158));
                    DAT_00068bfc = iVar6;
                } else {
                    iVar7 = puVar3[5];
                    if (local_824 == puVar3[4] - iVar7) {
                    LAB_0003497c:
                        DAT_00068bfc = iVar5;
                        puVar3[4] = iVar2 + iVar7;
                        iVar2 = *(int *)(local_824 + 0x15c);
                        if (iVar2 == 0) {
                            iVar6 = *(int *)(local_824 + 0x160);
                            iVar10 = iVar6;
                            DAT_00068bfc = iVar6;
                            goto LAB_00034878;
                        }
                        iVar7 = *(int *)(*(int *)(iVar5 + 0x158) + 0x14);
                    }
                    *(undefined4 *)(iVar2 + iVar7 + 8) =
                        *(undefined4 *)(local_824 + 0x160);
                    iVar6 = iVar5;
                    iVar10 = *(int *)(local_824 + 0x160);
                LAB_00034878:
                    piVar4 = *(int **)(iVar6 + 0x158);
                    if (iVar10 != 0) {
                        *(undefined4 *)(iVar10 + piVar4[5] + 4) =
                            *(undefined4 *)(local_824 + 0x15c);
                        piVar4 = *(int **)(iVar6 + 0x158);
                    }
                    uVar8 = piVar4[1] - 1U & *(uint *)(local_824 + 0x174);
                    iVar5 = *piVar4 + uVar8 * 0xc;
                    *(int *)(iVar5 + 4) = *(int *)(iVar5 + 4) + -1;
                    puVar3 = (undefined4 *)(iVar6 + 0x158);
                    bVar11 = *(int *)(*(int *)*puVar3 + uVar8 * 0xc) ==
                             local_824 + 0x158;
                    if (bVar11) {
                        iVar6 = *(int *)(local_824 + 0x168);
                        *(int *)(*(int *)*puVar3 + uVar8 * 0xc) = iVar6;
                    }
                    iVar5 = *(int *)(local_824 + 0x168);
                    if (bVar11) {
                        iVar6 = DAT_00068bfc;
                    }
                    if (*(int *)(local_824 + 0x164) != 0) {
                        *(int *)(*(int *)(local_824 + 0x164) + 0x10) = iVar5;
                        iVar5 = *(int *)(local_824 + 0x168);
                    }
                    if (iVar5 != 0) {
                        *(undefined4 *)(iVar5 + 0xc) =
                            *(undefined4 *)(local_824 + 0x164);
                    }
                    *(int *)(*(int *)(iVar6 + 0x158) + 0xc) =
                        *(int *)(*(int *)(iVar6 + 0x158) + 0xc) + -1;
                }
                iVar1 = iVar1 + 1;
                FUN_0002acd0(&local_824, "cgminer.c", "discard_stale", 0x152a);
            }
            local_824 = iVar9;
            if (iVar9 == 0)
                goto LAB_0003499c;
            iVar5 = *(int *)(iVar9 + 0x160);
            iVar2 = FUN_00033ea4(iVar9, 0);
            iVar9 = iVar5;
            iVar5 = DAT_00068bfc;
        } while (true);
    }
    pthread_cond_signal((pthread_cond_t *)&DAT_00072e60);
    iVar1 = pthread_mutex_unlock(DAT_00068b20);
    if (iVar1 == 0) {
        (*DAT_0006797c)();
        return;
    }
    goto LAB_00034b00;
LAB_0003499c:
    pthread_cond_signal((pthread_cond_t *)&DAT_00072e60);
    iVar9 = pthread_mutex_unlock(DAT_00068b20);
    if (iVar9 == 0) {
        (*DAT_0006797c)();
        if (((iVar1 != 0) && (DAT_000686e1 != '\0')) &&
            ((DAT_00072d88 != '\0' ||
              ((DAT_000686e0 != '\0' || (6 < DAT_00067858)))))) {
            snprintf(acStack_820, 0x800,
                     "Discarded %d stales that didn\'t match current hash",
                     iVar1);
            FUN_0001dbec(7, acStack_820, 0);
        }
        return;
    }
LAB_00034b00:
    piVar4 = __errno_location();
    iVar1 = *piVar4;
    __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
    uVar12 = 0x1530;
LAB_00034ad4:
    snprintf(acStack_820, 0x800, __format, iVar1, "cgminer.c", "discard_stale",
             uVar12);
    FUN_0001dbec(3, acStack_820, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

undefined4 FUN_00034b34(void)

{
    pthread_t __th;
    int iVar1;
    int iVar2;
    int iVar3;
    int iVar4;

    __th = pthread_self();
    pthread_detach(__th);
    FUN_000347ec();
    iVar1 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_00074f88);
    iVar2 = DAT_00076220;
    if (iVar1 == 0) {
        iVar1 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00074f88);
        if (iVar1 == 0) {
            (*DAT_0006797c)();
            if (0 < iVar2) {
                iVar1 = 0;
                do {
                    iVar3 = *(int *)(DAT_00073f18 + iVar1 * 4);
                    iVar4 = *(int *)(iVar3 + 0x24);
                    if ((iVar4 != 0) && (*(int *)(iVar4 + 0x20) == 0)) {
                        *(undefined1 *)(iVar3 + 0x3e) = 1;
                        FUN_00030a90(iVar4);
                        iVar3 = pthread_mutex_lock(
                            (pthread_mutex_t *)&DAT_00076010);
                        if (iVar3 != 0)
                            goto LAB_00034c64;
                        (**(code **)(*(int *)(iVar4 + 4) + 0x4c))(iVar4);
                        iVar3 = pthread_mutex_unlock(
                            (pthread_mutex_t *)&DAT_00076010);
                        if (iVar3 != 0)
                            goto LAB_00034c70;
                        (*DAT_0006797c)();
                    }
                    iVar1 = iVar1 + 1;
                } while (iVar2 != iVar1);
            }
            iVar2 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00074f64);
            if (iVar2 == 0) {
                pthread_cond_broadcast((pthread_cond_t *)&DAT_00076190);
                iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00074f64);
                if (iVar2 == 0) {
                    (*DAT_0006797c)();
                    return 0;
                }
                /* WARNING: Subroutine does not return */
                FUN_0002ce94("restart_thread", 0x1582);
            }
            FUN_0002ce38("restart_thread", 0x1580);
        LAB_00034c64:
            FUN_0002ce38("restart_thread", 0x157a);
        LAB_00034c70:
            /* WARNING: Subroutine does not return */
            FUN_0002ce94("restart_thread", 0x157c);
        }
    } else {
        FUN_0002df98("restart_thread", 0x1565);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002d984("restart_thread", 0x1567);
}

/* WARNING: Heritage AFTER dead removal. Example location: s1 : 0x000354fc */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same
 * address */
/* WARNING: Restarted to delay deadcode elimination for space: register */

void FUN_00034ca4(int param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    longlong lVar1;
    longlong lVar2;
    bool bVar3;
    int iVar4;
    int *piVar5;
    int iVar6;
    undefined4 uVar7;
    char *pcVar8;
    double *pdVar9;
    int iVar10;
    byte bVar11;
    undefined4 extraout_s0;
    double in_d0;
    undefined4 uVar12;
    undefined4 uVar13;
    undefined4 in_s3;
    double dVar14;
    double dVar15;
    double dVar16;
    undefined8 uVar17;
    undefined8 uVar18;
    undefined4 local_8e8;
    undefined4 uStack_8e4;
    undefined1 auStack_8d8[16];
    undefined1 auStack_8c8[16];
    undefined1 auStack_8b8[16];
    undefined1 auStack_8a8[16];
    sysinfo local_898;
    char acStack_858[2052];

    uVar18 = CONCAT44(param_4, param_3);
    iVar4 = sysinfo(&local_898);
    if (iVar4 == 0) {
        DAT_000761cc = local_898.uptime;
    } else {
        if (((DAT_00072d88 != 0) || (DAT_000686e0 != 0)) ||
            (5 < (int)DAT_00067858)) {
            piVar5 = __errno_location();
            iVar4 = *piVar5;
            strerror(iVar4);
            snprintf(acStack_858, 0x800,
                     "Failed to get sysinfo, errno:%u, reason:%s\n", iVar4);
            FUN_0001dbec(6, acStack_858, 0);
        }
        DAT_000761cc = time((time_t *)0x0);
    }
    FUN_00020580(&DAT_00068b28);
    FUN_000208ac(&DAT_00068b28, &DAT_00068b90);
    iVar4 = DAT_00068b28;
    extraout_s0 = SUB84(in_d0, 0);
    uVar12 = (undefined4)((ulonglong)in_d0 >> 0x20);
    if (DAT_00068b28 - DAT_0006a098 < DAT_000681d0) {
        if (param_1 < 0) {
            return;
        }
        bVar11 = 0;
        FUN_000234dc(&DAT_00068b90);
    LAB_00035050:
        iVar6 = FUN_0002f964(param_1);
        iVar10 = *(int *)(iVar6 + 0x24);
        FUN_000234dc(iVar6 + 0x2c, &DAT_00068b28);
        *(int *)(iVar10 + 0xf0) = iVar4;
        FUN_000208ac(&DAT_00068b28, iVar10 + 0x8c);
        FUN_000234dc(iVar10 + 0x8c, &DAT_00068b28);
        if ((DAT_000686e1 != '\0') &&
            (((DAT_00072d88 != 0 || (DAT_000686e0 != 0)) ||
              (6 < (int)DAT_00067858)))) {
            FUN_0004acd4(param_3, param_4);
            snprintf(acStack_858, 0x800,
                     "[thread %d: %llu hashes, %.1f mhash/sec]", param_1);
            FUN_0001dbec(7, acStack_858, 0);
        }
        uVar18 = FUN_0004ad40(param_3, param_4, 1000000, 0);
        iVar4 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00072ed0);
        if (iVar4 == 0) {
            dVar16 = (double)FUN_0004acd4((int)uVar18,
                                          (int)((ulonglong)uVar18 >> 0x20));
            uVar7 = SUB84(dVar16, 0);
            *(double *)(iVar10 + 0x50) = *(double *)(iVar10 + 0x50) + dVar16;
            if (0.0 < in_d0) {
                FUN_0002a334(uVar7, uVar12, extraout_s0, in_s3,
                             SUB84((double)(longlong)DAT_000681d0, 0),
                             iVar10 + 0x30);
                FUN_0002a334(uVar7, uVar12, extraout_s0, in_s3, 0,
                             iVar10 + 0x38);
                if (0.0 < in_d0) {
                    FUN_0002a334(uVar7, uVar12, extraout_s0, in_s3, 0,
                                 iVar10 + 0x40);
                    if (0.0 < in_d0) {
                        FUN_0002a334(uVar7, uVar12, extraout_s0, in_s3, 0,
                                     iVar10 + 0x48);
                    }
                }
            }
            iVar4 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00072ed0);
            if (iVar4 != 0) {
                piVar5 = __errno_location();
                iVar4 = *piVar5;
                goto LAB_00035748;
            }
            (*DAT_0006797c)();
            if ((bVar11 & DAT_0007600c) == 0) {
                iVar4 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00072ed0);
                if (iVar4 != 0)
                    goto LAB_00035678;
                _DAT_00072d80 = _DAT_00072d80 + dVar16;
                if (bVar11 != 0)
                    goto LAB_00034f20;
                dVar15 = *(double *)(&DAT_00068b98 + DAT_00068bf8 * 2);
                bVar3 = false;
                iVar4 = DAT_00068bf8;
            LAB_000351fc:
                dVar14 = _DAT_000681e0;
                lVar1 = (longlong)DAT_000761cc;
                lVar2 = (longlong)DAT_0007618c;
                *(double *)(&DAT_00068b98 + iVar4 * 2) = dVar16 + dVar15;
                _DAT_000681c0 = (double)lVar1 - (double)lVar2;
                if (_DAT_000681c0 - dVar14 <= 86400.0) {
                    _DAT_000681e0 = _DAT_000681c0;
                    if (!bVar3)
                        goto LAB_000352e4;
                LAB_00035328:
                    dVar16 = (_DAT_00072d80 / _DAT_000681c0) * 1000000.0;
                    uVar18 = FUN_0004ada0(SUB84(dVar16, 0),
                                          (int)((ulonglong)dVar16 >> 0x20));
                    FUN_00028aa0((int)uVar18, (int)((ulonglong)uVar18 >> 0x20),
                                 auStack_8d8, 0x10);
                    DAT_0006a0a0 =
                        (double)(longlong)((int)(longlong)_DAT_000761c0 / 10) /
                        100.0;
                    uVar18 = FUN_0004ada0(
                        SUB84(_DAT_000761c0 * 1000000.0, 0),
                        (int)((ulonglong)(_DAT_000761c0 * 1000000.0) >> 0x20),
                        (int)(longlong)_DAT_000761c0 * 0x66666667);
                    FUN_00028aa0((int)uVar18, (int)((ulonglong)uVar18 >> 0x20),
                                 auStack_8c8, 0x10);
                    uVar18 = FUN_0004ada0(
                        SUB84(_DAT_000762d0 * 1000000.0, 0),
                        (int)((ulonglong)(_DAT_000762d0 * 1000000.0) >> 0x20));
                    FUN_00028aa0((int)uVar18, (int)((ulonglong)uVar18 >> 0x20),
                                 auStack_8b8, 0x10);
                    uVar18 = FUN_0004ada0(
                        SUB84(_DAT_000762c8 * 1000000.0, 0),
                        (int)((ulonglong)(_DAT_000762c8 * 1000000.0) >> 0x20));
                    FUN_00028aa0((int)uVar18, (int)((ulonglong)uVar18 >> 0x20),
                                 auStack_8a8, 0x10);
                    uVar18 = FUN_0004ada0(
                        SUB84(_DAT_00072eb8 * 1000000.0, 0),
                        (int)((ulonglong)(_DAT_00072eb8 * 1000000.0) >> 0x20));
                    FUN_00028aa0((int)uVar18, (int)((ulonglong)uVar18 >> 0x20),
                                 acStack_858, 0x10);
                    snprintf(&DAT_0006a0a8, 0x100,
                             "(%ds):%s (1m):%s (5m):%s (15m):%s (avg):%sh/s",
                             DAT_000681d0);
                    iVar4 =
                        pthread_mutex_unlock((pthread_mutex_t *)&DAT_00072ed0);
                    if (iVar4 == 0) {
                        (*DAT_0006797c)();
                        printf("%s          \r", &DAT_0006a0a8);
                        fflush(stdout);
                        return;
                    }
                } else {
                    if (((DAT_00072d88 != 0) || (DAT_000686e0 != 0)) ||
                        (2 < (int)DAT_00067858)) {
                        snprintf(acStack_858, 0x800,
                                 "cgminer time error total_secs = %f "
                                 "last_total_secs = %f");
                        FUN_0001dbec(3, acStack_858, 0);
                    }
                    iVar4 =
                        pthread_mutex_unlock((pthread_mutex_t *)&DAT_00072ed0);
                    if (iVar4 != 0) {
                        piVar5 = __errno_location();
                        iVar4 = *piVar5;
                        goto LAB_00035748;
                    }
                    (*DAT_0006797c)();
                    FUN_00030c00();
                    iVar4 =
                        pthread_mutex_lock((pthread_mutex_t *)&DAT_00072ed0);
                    if (iVar4 != 0) {
                        piVar5 = __errno_location();
                        iVar4 = *piVar5;
                        goto LAB_0003570c;
                    }
                    if (bVar3)
                        goto LAB_00035328;
                LAB_000352e4:
                    iVar4 =
                        pthread_mutex_unlock((pthread_mutex_t *)&DAT_00072ed0);
                    if (iVar4 == 0) {
                        (*DAT_0006797c)();
                        return;
                    }
                }
                piVar5 = __errno_location();
                iVar4 = *piVar5;
                pcVar8 = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
            } else {
                FUN_0002c628(acStack_858, 0x100, iVar10);
                printf("%s          \r", acStack_858);
                fflush(stdout);
                iVar4 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00072ed0);
                if (iVar4 == 0) {
                    _DAT_00072d80 = _DAT_00072d80 + dVar16;
                LAB_00034f20:
                    DAT_00068bf8 = DAT_00068bf8 + 1;
                    iVar4 = 0;
                    if (0xb < DAT_00068bf8) {
                        DAT_00068bf8 = 0;
                    }
                    uVar17 = 0;
                    pdVar9 = (double *)&DAT_00068b98;
                    do {
                        dVar15 = *pdVar9;
                        pdVar9 = pdVar9 + 1;
                        if (0.0 <= dVar15) {
                            dVar14 = (double)FUN_0004acd4(
                                (int)uVar17, (int)((ulonglong)uVar17 >> 0x20));
                            iVar4 = iVar4 + 1;
                            dVar14 = dVar14 + dVar15;
                            uVar17 =
                                FUN_0004ada0(SUB84(dVar14, 0),
                                             (int)((ulonglong)dVar14 >> 0x20));
                        }
                    } while (pdVar9 != (double *)&DAT_00068bf8);
                    if (iVar4 != 0) {
                        uVar18 = FUN_0004ad40((int)uVar17,
                                              (int)((ulonglong)uVar17 >> 0x20),
                                              iVar4, iVar4 >> 0x1f);
                    }
                    uStack_8e4 = (undefined4)((ulonglong)uVar18 >> 0x20);
                    local_8e8 = (undefined4)uVar18;
                    lVar1 = (longlong)DAT_000681d0;
                    if (0.0 < (double)lVar1) {
                        uVar7 = FUN_0004acd4(local_8e8, uStack_8e4);
                        uVar13 = SUB84((double)lVar1, 0);
                        FUN_0002a334(uVar7, uVar12, uVar13, in_s3, uVar13,
                                     &DAT_000761c0);
                    }
                    if (0.0 < in_d0) {
                        uVar7 = SUB84(dVar16, 0);
                        FUN_0002a334(uVar7, uVar12, extraout_s0, in_s3, 0,
                                     &DAT_000762d0);
                        FUN_0002a334(uVar7, uVar12, extraout_s0, in_s3, 0,
                                     &DAT_000762c8);
                        if (0.0 < in_d0) {
                            FUN_0002a334(uVar7, uVar12, extraout_s0, in_s3, 0,
                                         &DAT_00072eb8);
                        }
                    }
                    bVar3 = true;
                    uVar18 = FUN_0004ada0(
                        SUB84(_DAT_000761c0 * 1000000.0, 0),
                        (int)((ulonglong)(_DAT_000761c0 * 1000000.0) >> 0x20));
                    iVar4 = DAT_00068bf8;
                    DAT_00076184 = (undefined4)((ulonglong)uVar18 >> 0x20);
                    DAT_00076180 = (undefined4)uVar18;
                    dVar15 = 0.0;
                    *(undefined8 *)(&DAT_00068b98 + DAT_00068bf8 * 2) = 0;
                    goto LAB_000351fc;
                }
            LAB_00035678:
                piVar5 = __errno_location();
                iVar4 = *piVar5;
                pcVar8 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
            }
            snprintf(acStack_858, 0x800, pcVar8, iVar4);
            goto LAB_000356b4;
        }
        piVar5 = __errno_location();
        iVar4 = *piVar5;
    LAB_0003570c:
        pcVar8 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
    } else {
        DAT_0006a098 = DAT_00068b28;
        FUN_000234dc(&DAT_00068b90);
        if (-1 < param_1) {
            bVar11 = 1;
            goto LAB_00035050;
        }
        iVar4 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00072ed0);
        if (iVar4 != 0) {
            piVar5 = __errno_location();
            iVar4 = *piVar5;
            goto LAB_0003570c;
        }
        if (0 < DAT_00076220) {
            iVar4 = 0;
            do {
                while (true) {
                    iVar6 = FUN_0002f964(iVar4);
                    iVar6 = *(int *)(iVar6 + 0x24);
                    FUN_000208ac(&DAT_00068b28, iVar6 + 0x8c);
                    FUN_000234dc(iVar6 + 0x8c, &DAT_00068b28);
                    if (0.0 < in_d0)
                        break;
                LAB_00034dfc:
                    iVar4 = iVar4 + 1;
                    if (DAT_00076220 <= iVar4)
                        goto LAB_00034ec4;
                }
                FUN_0002a334(0, uVar12, extraout_s0, in_s3,
                             SUB84((double)(longlong)DAT_000681d0, 0),
                             iVar6 + 0x30);
                FUN_0002a334(0, uVar12, extraout_s0, in_s3, 0, iVar6 + 0x38);
                if (in_d0 <= 0.0)
                    goto LAB_00034dfc;
                FUN_0002a334(0, uVar12, extraout_s0, in_s3, 0, iVar6 + 0x40);
                if (in_d0 <= 0.0)
                    goto LAB_00034dfc;
                iVar4 = iVar4 + 1;
                FUN_0002a334(0, uVar12, extraout_s0, in_s3, 0, iVar6 + 0x48);
            } while (iVar4 < DAT_00076220);
        }
    LAB_00034ec4:
        iVar4 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00072ed0);
        if (iVar4 == 0) {
            (*DAT_0006797c)();
            iVar4 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00072ed0);
            if (iVar4 == 0) {
                dVar16 = (double)FUN_0004acd4(param_3, param_4);
                _DAT_00072d80 = _DAT_00072d80 + dVar16;
                goto LAB_00034f20;
            }
            goto LAB_00035678;
        }
        piVar5 = __errno_location();
        iVar4 = *piVar5;
    LAB_00035748:
        pcVar8 = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
    }
    snprintf(acStack_858, 0x800, pcVar8, iVar4);
LAB_000356b4:
    FUN_0001dbec(3, acStack_858, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

void FUN_000357ec(undefined4 *param_1)

{
    char cVar1;
    int iVar2;
    longlong lVar3;
    int iVar4;
    int *piVar5;
    uint uVar6;
    char *__format;
    int iVar7;
    int iVar8;
    int iVar9;
    uint uVar10;
    pthread_rwlock_t *__rwlock;
    undefined4 uVar11;
    bool bVar12;
    longlong lVar13;
    undefined4 local_83c;
    int local_838;
    int local_834;
    int iStack_830;
    int iStack_82c;
    char acStack_828[2052];

    iVar8 = param_1[9];
    local_834 = 0;
    iVar9 = *(int *)(iVar8 + 4);
    uVar11 = *param_1;
    lVar3 = 0;
    local_838 = 0;
LAB_00035824:
    cVar1 = *(char *)(iVar8 + 0x16c);
    do {
        if (cVar1 != '\0') {
        LAB_00035984:
            *(undefined4 *)(iVar8 + 0x20) = 1;
            return;
        }
        *(undefined1 *)((int)param_1 + 0x3f) = 0;
        do {
            if (*(int *)(iVar8 + 0x164) != 0)
                goto LAB_00035838;
            __rwlock = (pthread_rwlock_t *)(iVar8 + 0x140);
            local_83c = FUN_0003438c(param_1, uVar11);
            iVar4 = pthread_rwlock_wrlock(__rwlock);
            if (iVar4 != 0) {
                piVar5 = __errno_location();
                iVar8 = *piVar5;
                __format = "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d";
                uVar11 = 0x24ce;
                goto LAB_000359f8;
            }
            if (*(int *)(iVar8 + 0x164) == 0) {
                *(undefined4 *)(iVar8 + 0x164) = local_83c;
                iVar4 = pthread_rwlock_unlock(__rwlock);
                if (iVar4 != 0) {
                LAB_00035a50:
                    piVar5 = __errno_location();
                    iVar8 = *piVar5;
                    __format =
                        "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d";
                    uVar11 = 0x24d9;
                LAB_000359f8:
                    snprintf(acStack_828, 0x800, __format, iVar8, "cgminer.c",
                             "fill_queue", uVar11);
                    FUN_0001dbec(3, acStack_828, 1);
                    /* WARNING: Subroutine does not return */
                    FUN_0002c508(1);
                }
                (*DAT_0006797c)();
            } else {
                iVar4 = pthread_rwlock_unlock(__rwlock);
                if (iVar4 != 0)
                    goto LAB_00035a50;
                (*DAT_0006797c)();
                FUN_0002acd0(&local_83c, "cgminer.c", "fill_queue", 0x24dd);
            }
        LAB_00035838:
            iVar4 = (**(code **)(iVar9 + 0x48))(iVar8);
        } while (iVar4 == 0);
        lVar13 = (**(code **)(iVar9 + 0x44))(param_1);
        *(undefined1 *)((int)param_1 + 0x3e) = 0;
        if (lVar13 == -1) {
            if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                (2 < DAT_00067858)) {
                snprintf(acStack_828, 0x800, "%s %d failure, disabling!",
                         *(undefined4 *)(iVar9 + 8),
                         *(undefined4 *)(iVar8 + 8));
                FUN_0001dbec(3, acStack_828, 0);
            }
            *(undefined4 *)(iVar8 + 0x20) = 1;
            FUN_00022a94(iVar8);
            goto LAB_00035984;
        }
        lVar3 = lVar13 + lVar3;
        uVar10 = (uint)((ulonglong)lVar3 >> 0x20);
        FUN_00020580(&iStack_830);
        iVar7 = iStack_82c - local_834;
        iVar4 = iStack_830 - local_838;
        if (iVar7 < 0) {
            iVar4 = iVar4 + -1;
            iVar7 = iVar7 + 1000000;
        }
        uVar6 = (uint)lVar3 | uVar10;
        if (uVar6 == 0) {
        LAB_00035998:
            if (DAT_000681d0 <= iVar4)
                goto LAB_00035924;
            lVar13 = lVar3;
            if (*(char *)(param_1 + 0xf) == '\0')
                goto LAB_00035954;
        LAB_000359b8:
            FUN_00029c04(param_1, uVar11, iVar9 + 0x5c);
        } else {
            uVar6 = 200000;
            bVar12 = iVar7 == 200000;
            iVar2 = iVar7 + -200000;
            if (200000 >= iVar7) {
                bVar12 = iVar4 == 0;
                iVar2 = iVar4;
            }
            if (bVar12 ||
                iVar2 < 0 != (200000 < iVar7 && SBORROW4(iVar7, 200000)))
                goto LAB_00035998;
        LAB_00035924:
            FUN_00034ca4(uVar11, uVar6, (uint)lVar3, uVar10);
            FUN_000234dc(&local_838, &iStack_830);
            lVar3 = 0;
            lVar13 = 0;
            if (*(char *)(param_1 + 0xf) != '\0')
                goto LAB_000359b8;
        LAB_00035954:
            lVar3 = lVar13;
            if (*(int *)(iVar8 + 0x20) != 0)
                goto LAB_000359b8;
        }
        if (*(char *)((int)param_1 + 0x3f) == '\0')
            goto LAB_00035824;
        (**(code **)(iVar9 + 0x50))(iVar8);
        cVar1 = *(char *)(iVar8 + 0x16c);
    } while (true);
}

/* WARNING: Globals starting with '_' overlap smaller symbols at the same
 * address */

void FUN_00035b04(undefined4 *param_1)

{
    int iVar1;
    int *piVar2;
    char *pcVar3;
    int iVar4;
    int iVar5;
    undefined4 uVar6;
    longlong lVar7;
    undefined4 local_878;
    undefined4 local_874;
    undefined1 auStack_870[8];
    sysinfo local_868;
    char acStack_828[2052];

    iVar4 = param_1[9];
    local_874 = 0;
    local_878 = 0;
    iVar5 = *(int *)(iVar4 + 4);
    uVar6 = *param_1;
    if (*(char *)(iVar4 + 0x16c) == '\0') {
        do {
            *(undefined1 *)((int)param_1 + 0x3f) = 0;
            lVar7 = (**(code **)(iVar5 + 0x44))(param_1);
            *(undefined1 *)((int)param_1 + 0x3e) = 0;
            if (lVar7 == -1) {
                if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                    (2 < DAT_00067858)) {
                    snprintf(acStack_828, 0x800, "%s %d failure, disabling!",
                             *(undefined4 *)(iVar5 + 8),
                             *(undefined4 *)(iVar4 + 8));
                    FUN_0001dbec(3, acStack_828, 0);
                }
                *(undefined4 *)(iVar4 + 0x20) = 1;
                FUN_00022a94(iVar4);
                break;
            }
            FUN_00020580(auStack_870);
            iVar1 = sysinfo(&local_868);
            if (iVar1 == 0) {
                DAT_000761cc = local_868.uptime;
            } else {
                if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                    (5 < DAT_00067858)) {
                    piVar2 = __errno_location();
                    iVar1 = *piVar2;
                    pcVar3 = strerror(iVar1);
                    snprintf(acStack_828, 0x800,
                             "Failed to get sysinfo, errno:%u, reason:%s\n",
                             iVar1, pcVar3);
                    FUN_0001dbec(6, acStack_828, 0);
                }
                DAT_000761cc = time((time_t *)0x0);
            }
            _DAT_000681c0 =
                (double)(longlong)DAT_000761cc - (double)(longlong)DAT_0007618c;
            if (lVar7 == 0) {
                if (*(char *)(param_1 + 0xf) != '\0')
                    goto LAB_00035d0c;
            LAB_00035c10:
                if (*(int *)(iVar4 + 0x20) != 0)
                    goto LAB_00035d0c;
            } else {
                FUN_00034ca4(uVar6);
                FUN_000234dc(&local_878, auStack_870);
                if (*(char *)(param_1 + 0xf) == '\0')
                    goto LAB_00035c10;
            LAB_00035d0c:
                FUN_00029c04(param_1, uVar6, iVar5 + 0x5c);
            }
            if (*(char *)((int)param_1 + 0x3f) != '\0') {
                iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00076010);
                if (iVar1 != 0) {
                    piVar2 = __errno_location();
                    iVar4 = *piVar2;
                    pcVar3 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
                    uVar6 = 0x2667;
                LAB_00035dd0:
                    snprintf(acStack_828, 0x800, pcVar3, iVar4, "cgminer.c",
                             "hash_driver_work", uVar6);
                    FUN_0001dbec(3, acStack_828, 1);
                    /* WARNING: Subroutine does not return */
                    FUN_0002c508(1);
                }
                (**(code **)(iVar5 + 0x50))(iVar4);
                iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00076010);
                if (iVar1 != 0) {
                    piVar2 = __errno_location();
                    iVar4 = *piVar2;
                    pcVar3 =
                        "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
                    uVar6 = 0x2669;
                    goto LAB_00035dd0;
                }
                (*DAT_0006797c)();
            }
        } while (*(char *)(iVar4 + 0x16c) == '\0');
    }
    *(undefined4 *)(iVar4 + 0x20) = 1;
    return;
}

void FUN_00035e2c(undefined4 *param_1)

{
    char cVar1;
    longlong lVar2;
    int iVar3;
    uint uVar4;
    undefined4 uVar5;
    int iVar6;
    undefined4 uVar7;
    int iVar8;
    int iVar9;
    uint uVar10;
    int iVar11;
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;
    int iVar17;
    bool bVar18;
    double dVar19;
    longlong lVar20;
    uint local_880;
    int local_84c;
    int local_848;
    int local_844;
    int local_840;
    int local_83c;
    int local_838;
    int local_834;
    int local_830;
    int local_82c;
    timespec local_828[256];

    iVar15 = param_1[9];
    iVar6 = *(int *)(iVar15 + 4);
    iVar9 = DAT_000681d0 / 5;
    uVar7 = *param_1;
    if (iVar9 == 0) {
        iVar9 = 1;
    }
    if (param_1[1] == 0) {
        uVar10 = 1;
    } else {
        uVar10 = (uint) * (byte *)(param_1 + 2);
    }
    local_880 = (**(code **)(iVar6 + 0x30))(param_1);
    FUN_00020580(&local_848);
    FUN_00020580(&local_830);
    if (*(char *)(iVar15 + 0x16c) == '\0') {
        iVar11 = iVar9 * 1000000;
        lVar2 = 0;
        iVar12 = iVar11 + 0x3ff;
        if (-1 < iVar11) {
            iVar12 = iVar11;
        }
        iVar16 = 0;
        iVar17 = 0;
        do {
            local_84c = FUN_0003438c(param_1, uVar7);
            *(undefined1 *)((int)param_1 + 0x3e) = 0;
            *(undefined1 *)(iVar15 + 0xac) = 1;
            FUN_00020580(&local_838);
            *(undefined4 *)(local_84c + 0xf8) = 0;
            *(undefined4 *)(iVar15 + 0xa0) = 0;
            *(undefined4 *)(iVar15 + 0xa4) = 0;
            iVar3 = (**(code **)(iVar6 + 0x38))(param_1);
            if (iVar3 == 0) {
                if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                    (2 < DAT_00067858)) {
                    snprintf((char *)local_828, 0x800,
                             "work prepare failed, exiting mining thread %d",
                             uVar7);
                    FUN_0001dbec(3, local_828, 0);
                }
                break;
            }
            dVar19 = *(double *)(iVar6 + 0x68);
            if (*(double *)(local_84c + 0x178) < *(double *)(iVar6 + 0x68)) {
                dVar19 = *(double *)(local_84c + 0x178);
            }
            *(double *)(local_84c + 0xe0) = dVar19;
            if (dVar19 < *(double *)(iVar6 + 0x70)) {
                dVar19 = *(double *)(iVar6 + 0x70);
            }
            *(double *)(local_84c + 0xe0) = dVar19;
            while (true) {
                FUN_00020580(&local_840);
                FUN_000201a0(&local_840, &local_848);
                FUN_000201d4(&local_848, iVar15 + 0x128);
                iVar3 = FUN_00020218(&local_848, iVar15 + 0x130);
                if (iVar3 != 0) {
                    FUN_000234dc(iVar15 + 0x130, &local_848);
                }
                iVar3 = FUN_0002024c(&local_848, iVar15 + 0x138);
                if (iVar3 != 0) {
                    FUN_000234dc(iVar15 + 0x138, &local_848);
                }
                *(int *)(iVar15 + 0x124) = *(int *)(iVar15 + 0x124) + 1;
                iVar14 = *(int *)(local_84c + 0x104);
                FUN_000201d4(&local_848, iVar14 + 0x184);
                iVar3 = FUN_00020218(&local_848, iVar14 + 0x18c);
                if (iVar3 != 0) {
                    FUN_000234dc(iVar14 + 0x18c, &local_848);
                }
                iVar3 = FUN_0002024c(&local_848, iVar14 + 0x194);
                if (iVar3 != 0) {
                    FUN_000234dc(iVar14 + 0x194, &local_848);
                }
                *(int *)(iVar14 + 0x180) = *(int *)(iVar14 + 0x180) + 1;
                FUN_00020580(local_84c + 0x1a8);
                pthread_setcancelstate(1, (int *)0x0);
                FUN_00028a6c(param_1);
                lVar20 = (**(code **)(iVar6 + 0x40))(
                    param_1, local_84c, local_880 + *(int *)(local_84c + 0xf8),
                    0);
                iVar8 = (int)((ulonglong)lVar20 >> 0x20);
                FUN_00028a34(param_1);
                pthread_setcancelstate(0, (int *)0x0);
                pthread_testcancel();
                FUN_00020580(&local_848);
                iVar14 = local_844;
                iVar3 = local_848;
                if (lVar20 == -1)
                    break;
                iVar13 = *(int *)(iVar15 + 0xa4);
                lVar2 = lVar20 + lVar2;
                bVar18 = *(uint *)(iVar15 + 0xa0) < (uint)lVar20;
                if ((int)(iVar13 - (iVar8 + (uint)bVar18)) < 0 !=
                    (SBORROW4(iVar13, iVar8) !=
                     SBORROW4(iVar13 - iVar8, (uint)bVar18))) {
                    *(longlong *)(iVar15 + 0xa0) = lVar20;
                }
                iVar8 = local_844 - local_83c;
                bVar18 = iVar8 < 0;
                if (bVar18) {
                    iVar8 = iVar8 + 1000000;
                }
                iVar13 = local_848 - local_840;
                iVar16 = iVar16 + iVar8;
                if (bVar18) {
                    iVar13 = iVar13 + -1;
                }
                iVar17 = iVar17 + iVar13;
                if (1000000 < iVar16) {
                    iVar17 = iVar17 + 1;
                    iVar16 = iVar16 + -1000000;
                }
                iVar8 = local_848 - local_838;
                if (local_844 - local_834 < 0) {
                    iVar8 = iVar8 + -1;
                }
                if (iVar17 < iVar9) {
                    if (local_880 != 0xffffffff) {
                        iVar13 = iVar16 + 0x400;
                        if (iVar16 + 0x400 < 0) {
                            iVar13 = iVar16 + 0x7ff;
                        }
                        iVar13 = FUN_0004a718(1000000, iVar13 >> 10);
                        iVar13 = (iVar13 + 0x10) * iVar9;
                        uVar4 = FUN_0004a4a0(0xfffffc00, iVar13);
                        if (uVar4 < local_880) {
                            local_880 = 0xffffffff;
                        } else {
                            local_880 = local_880 * iVar13 >> 10;
                        }
                        goto LAB_0003616c;
                    }
                } else {
                    if (iVar9 < iVar17) {
                        local_880 = FUN_0004a4a0(iVar9 * local_880, iVar17);
                    } else if (100000 < iVar16) {
                        uVar5 = FUN_0004a718(iVar11 + iVar16, iVar12 >> 10);
                        local_880 = FUN_0004a4a0(local_880 << 10, uVar5);
                    }
                LAB_0003616c:
                    iVar14 = iVar14 - local_82c;
                    bVar18 = iVar14 < 0;
                    if (bVar18) {
                        iVar14 = iVar14 + 0xf4000;
                    }
                    iVar3 = iVar3 - local_830;
                    if (bVar18) {
                        iVar3 = iVar3 + -1;
                        iVar14 = iVar14 + 0x240;
                    }
                    if (lVar2 == 0) {
                    LAB_0003626c:
                        if (DAT_000681d0 <= iVar3)
                            goto LAB_000361a4;
                        cVar1 = *(char *)((int)param_1 + 0x3e);
                    } else {
                        bVar18 = iVar3 == 0;
                        iVar13 = iVar3;
                        if (iVar3 < 1) {
                            iVar13 = iVar14 + -200000;
                            bVar18 = iVar14 == 200000;
                        }
                        if (bVar18 || iVar13 < 0 != (iVar3 < 1 &&
                                                     SBORROW4(iVar14, 200000)))
                            goto LAB_0003626c;
                    LAB_000361a4:
                        FUN_00034ca4(uVar7, local_830, (int)lVar2,
                                     (int)((ulonglong)lVar2 >> 0x20));
                        FUN_000234dc(&local_830, &local_848);
                        cVar1 = *(char *)((int)param_1 + 0x3e);
                        lVar2 = 0;
                    }
                    if (cVar1 != '\0') {
                        if (uVar10 == 0) {
                            local_828[0].tv_nsec = param_1[1] * 250000000;
                            local_828[0].tv_sec = uVar10;
                            nanosleep(local_828, (timespec *)0x0);
                        }
                        goto LAB_00036234;
                    }
                    if ((*(char *)(param_1 + 0xf) == '\0') &&
                        (*(int *)(iVar15 + 0x20) == 0)) {
                        iVar16 = 0;
                        iVar17 = 0;
                    } else {
                        iVar16 = 0;
                        FUN_00029c04(param_1, uVar7, iVar6 + 0x5c);
                        iVar17 = iVar16;
                    }
                }
                if ((DAT_000681f4 < iVar8 ||
                     (*(int *)(iVar15 + 0xa4) != 0 ||
                      0xfffffffd < *(uint *)(iVar15 + 0xa0))) ||
                    (iVar3 = FUN_00033ea4(local_84c), iVar3 != 0))
                    goto LAB_00036234;
            }
            if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                (2 < DAT_00067858)) {
                snprintf((char *)local_828, 0x800, "%s %d failure, disabling!",
                         *(undefined4 *)(iVar6 + 8),
                         *(undefined4 *)(iVar15 + 8));
                FUN_0001dbec(3, local_828, 0);
            }
            *(undefined4 *)(iVar15 + 0x20) = 1;
            FUN_00022a94(iVar15, 1);
            *(undefined1 *)(iVar15 + 0x16c) = 1;
        LAB_00036234:
            FUN_0002a9d4(&local_84c, "cgminer.c", "hash_sole_work", 0x24b5);
        } while (*(char *)(iVar15 + 0x16c) == '\0');
    }
    *(undefined4 *)(iVar15 + 0x20) = 1;
    return;
}

void FUN_000364f0(void)

{
    char cVar1;
    int iVar2;
    time_t tVar3;
    undefined4 *puVar4;
    int *piVar5;
    undefined4 extraout_r1;
    int iVar6;
    int *piVar7;
    int iVar8;
    int *piVar9;
    int iVar10;
    int iVar11;
    undefined4 uVar12;
    int local_840[2];
    char acStack_838[8];
    char local_830[2052];

    pthread_setcanceltype(1, (int *)0x0);
    FUN_00022d78("Watchdog");
    FUN_00029dfc();
    FUN_00020580(&DAT_00068c68);
    do {
        iVar10 = 200;
        do {
            usleep(10000);
            FUN_000347ec();
            iVar10 = iVar10 + -1;
        } while (iVar10 != 0);
        FUN_00034ca4(0xffffffff, extraout_r1, 0, 0);
        FUN_00020580(local_840);
        if (DAT_00072e54 == '\0') {
            if ((DAT_00076028 != '\0') || (DAT_00074f28 != '\0')) {
                iVar10 = FUN_0002989c();
                if (iVar10 == 0) {
                    if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                        (DAT_00067858 < 4)) {
                        if (DAT_00076028 == '\0') {
                        LAB_00036c78:
                            builtin_strncpy(local_830,
                                            "Terminating execution as planned",
                                            0x20);
                            local_830[0x20] = 0;
                            FUN_0001dbec(3, local_830, 1);
                            /* WARNING: Subroutine does not return */
                            FUN_0002c508(0, 1);
                        }
                    LAB_0003696c:
                        if (3 < DAT_00067858)
                            goto LAB_00036978;
                    } else {
                        snprintf(local_830, 0x800,
                                 "Pausing execution as per stop time %02d:%02d "
                                 "scheduled",
                                 DAT_00074f34, DAT_00074f30);
                        FUN_0001dbec(4, local_830, 0);
                        if (DAT_00076028 == '\0')
                            goto LAB_00036c78;
                        if ((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0'))
                            goto LAB_0003696c;
                    LAB_00036978:
                        snprintf(
                            local_830, 0x800,
                            "Will restart execution as scheduled at %02d:%02d",
                            DAT_00076034, DAT_00076030);
                        FUN_0001dbec(4, local_830, 0);
                    }
                    DAT_00072e54 = '\x01';
                    iVar10 = pthread_rwlock_rdlock(
                        (pthread_rwlock_t *)&DAT_00074f88);
                    if (iVar10 != 0) {
                        piVar5 = __errno_location();
                        snprintf(
                            local_830, 0x800,
                            "WTF RDLOCK ERROR ON LOCK! errno=%d in %s %s():%d",
                            *piVar5, "cgminer.c", "watchdog_thread", 0x28fa);
                        goto LAB_00036cf4;
                    }
                    if (0 < DAT_00076220) {
                        piVar7 = DAT_00073f18 + DAT_00076220;
                        piVar5 = DAT_00073f18;
                        do {
                            piVar9 = piVar5 + 1;
                            *(undefined1 *)(*piVar5 + 0x3c) = 1;
                            piVar5 = piVar9;
                        } while (piVar7 != piVar9);
                    }
                    iVar10 = pthread_rwlock_unlock(
                        (pthread_rwlock_t *)&DAT_00074f88);
                    if (iVar10 != 0) {
                        piVar5 = __errno_location();
                        snprintf(local_830, 0x800,
                                 "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s "
                                 "%s():%d",
                                 *piVar5, "cgminer.c", "watchdog_thread",
                                 0x2901);
                    LAB_00036cf4:
                        FUN_0001dbec(3, local_830, 1);
                        /* WARNING: Subroutine does not return */
                        FUN_0002c508(1);
                    }
                    (*DAT_0006797c)();
                } else if (DAT_00072e54 != '\0')
                    goto LAB_000365b4;
            }
        } else {
        LAB_000365b4:
            if (((DAT_00076028 == '\0') && (DAT_00074f28 == '\0')) ||
                (iVar10 = FUN_0002989c(), iVar10 != 0)) {
                if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                    (DAT_00067858 < 4)) {
                    if (DAT_00074f28 != '\0') {
                    LAB_00036bb0:
                        if (3 < DAT_00067858)
                            goto LAB_00036bbc;
                    }
                } else {
                    snprintf(local_830, 0x800,
                             "Restarting execution as per start time %02d:%02d "
                             "scheduled",
                             DAT_00076034, DAT_00076030);
                    FUN_0001dbec(4, local_830, 0);
                    if (DAT_00074f28 != '\0') {
                        if ((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0'))
                            goto LAB_00036bb0;
                    LAB_00036bbc:
                        snprintf(
                            local_830, 0x800,
                            "Will pause execution as scheduled at %02d:%02d",
                            DAT_00074f34, DAT_00074f30);
                        FUN_0001dbec(4, local_830, 0);
                    }
                }
                iVar10 = 0;
                DAT_00072e54 = '\0';
                if (0 < DAT_00076220) {
                    do {
                        puVar4 = (undefined4 *)FUN_0002f964(iVar10);
                        cVar1 = DAT_000686e1;
                        if (*(int *)(puVar4[9] + 0x20) != 1) {
                            *(undefined1 *)(puVar4 + 0xf) = 0;
                            if ((cVar1 != '\0') && (((DAT_00072d88 != '\0' ||
                                                      (DAT_000686e0 != '\0')) ||
                                                     (6 < DAT_00067858)))) {
                                snprintf(local_830, 0x800,
                                         "Pushing sem post to thread %d",
                                         *puVar4);
                                FUN_0001dbec(7, local_830, 0);
                            }
                            FUN_00022e7c(puVar4 + 4, "cgminer.c",
                                         "watchdog_thread", 0x291c);
                        }
                        iVar10 = iVar10 + 1;
                    } while (iVar10 < DAT_00076220);
                }
            }
        }
        if (0 < DAT_00074fd8) {
            iVar10 = 0;
            do {
                iVar2 = FUN_0002e2cc(iVar10);
                iVar11 = **(int **)(iVar2 + 0x98);
                if (iVar11 != 0) {
                    (**(code **)(*(int *)(iVar2 + 4) + 0x20))();
                    uVar12 = *(undefined4 *)(iVar2 + 8);
                    snprintf(acStack_838, 8, "%s %d",
                             *(undefined4 *)(*(int *)(iVar2 + 4) + 8), uVar12);
                    cVar1 = DAT_00072d88;
                    if ((*(char *)(iVar11 + 0x3d) == '\0') &&
                        (*(int *)(iVar2 + 0x20) != 1)) {
                        iVar6 = *(int *)(iVar2 + 0x60);
                        iVar8 = local_840[0] - *(int *)(iVar11 + 0x2c);
                        if (iVar6 == 0) {
                            if (0x78 < iVar8) {
                                *(undefined8 *)(iVar2 + 0x30) = 0;
                                *(undefined4 *)(iVar2 + 0x60) = 1;
                                if (((cVar1 != '\0') ||
                                     (DAT_000686e0 != '\0')) ||
                                    (2 < DAT_00067858)) {
                                    snprintf(local_830, 0x800,
                                             "%s: Idle for more than 60 "
                                             "seconds, declaring SICK!",
                                             acStack_838, uVar12);
                                    FUN_0001dbec(3, local_830, 0);
                                }
                                FUN_00020580(iVar11 + 0x34);
                                FUN_00022a94(iVar2, 3);
                                if (DAT_000681fc != '\0') {
                                    if (((DAT_00072d88 != '\0') ||
                                         (DAT_000686e0 != '\0')) ||
                                        (2 < DAT_00067858)) {
                                        snprintf(local_830, 0x800,
                                                 "%s: Attempting to restart",
                                                 acStack_838, uVar12);
                                        FUN_0001dbec(3, local_830, 0);
                                    }
                                LAB_00036704:
                                    if (*(int *)(iVar2 + 0x20) != 1) {
                                        (**(code **)(*(int *)(iVar2 + 4) +
                                                     0x10))(iVar2);
                                    }
                                }
                            }
                        } else if (iVar8 < 0x78) {
                            if ((iVar6 != 4) && (((DAT_00072d88 != '\0' ||
                                                   (DAT_000686e0 != '\0')) ||
                                                  (2 < DAT_00067858)))) {
                                snprintf(local_830, 0x800,
                                         "%s: Recovered, declaring WELL!",
                                         acStack_838, uVar12);
                                FUN_0001dbec(3, local_830, 0);
                            }
                            *(undefined4 *)(iVar2 + 0x60) = 0;
                            tVar3 = time((time_t *)0x0);
                            *(time_t *)(iVar2 + 0xf0) = tVar3;
                        } else if (iVar6 == 1) {
                            if (iVar8 < 0x259) {
                                if (0x3c <
                                    local_840[0] - *(int *)(iVar11 + 0x34))
                                    goto LAB_000368cc;
                            } else {
                                *(undefined4 *)(iVar2 + 0x60) = 2;
                                if (((cVar1 != '\0') ||
                                     (DAT_000686e0 != '\0')) ||
                                    (2 < DAT_00067858)) {
                                    snprintf(local_830, 0x800,
                                             "%s: Not responded for more than "
                                             "10 minutes, declaring DEAD!",
                                             acStack_838, uVar12);
                                    FUN_0001dbec(3, local_830, 0);
                                }
                                FUN_00020580(iVar11 + 0x34);
                                FUN_00022a94(iVar2, 4);
                            }
                        } else if ((0x3c <
                                    local_840[0] - *(int *)(iVar11 + 0x34)) &&
                                   (iVar6 == 2)) {
                        LAB_000368cc:
                            FUN_00020580(iVar11 + 0x34);
                            if (DAT_000681fc != '\0')
                                goto LAB_00036704;
                        }
                    }
                }
                iVar10 = iVar10 + 1;
            } while (iVar10 < DAT_00074fd8);
        }
    } while (true);
}

/* WARNING: Restarted to delay deadcode elimination for space: ram */

undefined4 FUN_00036d48(undefined4 *param_1)

{
    char cVar1;
    pthread_t __th;
    int iVar2;
    int *piVar3;
    time_t tVar4;
    int iVar5;
    uint uVar6;
    size_t sVar7;
    void *pvVar8;
    int iVar9;
    int iVar10;
    uint uVar11;
    undefined4 uVar12;
    char *pcVar13;
    byte bVar14;
    int iVar15;
    uint uVar16;
    int iVar17;
    int *piVar18;
    undefined4 uVar19;
    undefined4 *puVar20;
    int iVar21;
    pthread_rwlock_t *__rwlock;
    undefined4 uVar22;
    char *pcVar23;
    bool bVar24;
    undefined1 *puVar25;
    undefined1 *puVar26;
    uint local_ca0;
    int local_c6c;
    int local_c68;
    uint local_c64;
    int local_c60;
    int iStack_c5c;
    undefined1 auStack_c58[12];
    char acStack_c4c[16];
    undefined1 auStack_c3c[20];
    char acStack_c28[1024];
    char local_828[40];
    undefined4 uStack_800;
    char acStack_7fc[4];
    undefined4 local_7f8;
    undefined2 local_7f4;

    __th = pthread_self();
    pthread_detach(__th);
    snprintf(acStack_c4c, 0x10, "%d/SStratum", *param_1);
    FUN_00022d78(acStack_c4c);
    iVar2 = FUN_0001fedc();
    param_1[0xba] = iVar2;
    if (iVar2 == 0) {
        local_828[0] = 'F';
        local_828[1] = 'a';
        local_828[2] = 'i';
        local_828[3] = 'l';
        local_828[4] = 'e';
        local_828[5] = 'd';
        local_828[6] = ' ';
        local_828[7] = 't';
        local_828[8] = 'o';
        local_828[9] = ' ';
        local_828[10] = 'c';
        local_828[0xb] = 'r';
        local_828[0xc] = 'e';
        local_828[0xd] = 'a';
        local_828[0xe] = 't';
        local_828[0xf] = 'e';
        pcVar23 = " stratum_q in stratum_sthread";
        pcVar13 = local_828 + 0x10;
    } else {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (4 < DAT_00067858)) {
            snprintf(local_828, 0x800, "in %s , pool: %d, pool_url: %s",
                     "stratum_sthread", *param_1, param_1[0x29]);
            FUN_0001dbec(5, local_828, 0);
            iVar2 = param_1[0xba];
        }
        cVar1 = *(char *)((int)param_1 + 0x69);
        iVar5 = 0;
        iVar17 = 0;
        iVar21 = 0;
        while (true) {
            if (cVar1 != '\0') {
                FUN_0001ffa0();
                return 0;
            }
            local_c68 = FUN_00020084(iVar2);
            if (local_c68 == 0)
                break;
            if (*(uint *)(local_c68 + 0x130) < 9) {
                iVar9 = *(int *)(local_c68 + 0x4c);
                iVar10 = *(int *)(local_c68 + 0x128);
                iVar15 = *(int *)(local_c68 + 300);
                local_c6c = iVar9;
                local_c60 = iVar10;
                iStack_c5c = iVar15;
                if (iVar9 == iVar5 && (iVar15 == iVar21 && iVar10 == iVar17)) {
                    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                        (5 < DAT_00067858)) {
                        snprintf(local_828, 0x800,
                                 "Filtering duplicate share to pool %d",
                                 *param_1);
                        FUN_0001dbec(6, local_828, 0);
                    }
                    FUN_0002a9d4(&local_c68, "cgminer.c", "stratum_sthread",
                                 0x1e1b);
                    iVar9 = iVar5;
                    iVar10 = iVar17;
                    iVar15 = iVar21;
                } else if (*(double *)(local_c68 + 0x138) <
                           *(double *)(param_1 + 0x1ca)) {
                    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                        (5 < DAT_00067858)) {
                        snprintf(local_828, 0x800,
                                 "Filtering high hash share to pool %d",
                                 *param_1);
                        FUN_0001dbec(6, local_828, 0);
                    }
                    FUN_0002a9d4(&local_c68, "cgminer.c", "stratum_sthread",
                                 0x1e23);
                    iVar9 = iVar5;
                    iVar10 = iVar17;
                    iVar15 = iVar21;
                } else {
                    FUN_0001f900(auStack_c58, &local_c6c, 4);
                    FUN_0001f900(auStack_c3c, &local_c60,
                                 *(undefined4 *)(local_c68 + 0x130));
                    piVar3 = (int *)FUN_0001f790(0x34, 1, "cgminer.c",
                                                 "stratum_sthread", 0x1e2c);
                    iVar2 = local_c68;
                    tVar4 = time((time_t *)0x0);
                    piVar3[0xb] = tVar4;
                    piVar3[9] = local_c68;
                    memset(acStack_c28, 0, 0x400);
                    iVar5 =
                        pthread_mutex_lock((pthread_mutex_t *)&DAT_00068c4c);
                    if (iVar5 != 0) {
                        piVar3 = __errno_location();
                        iVar2 = *piVar3;
                        uVar22 = 0x1e35;
                        pcVar13 =
                            "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
                    LAB_00037908:
                        snprintf(local_828, 0x800, pcVar13, iVar2, "cgminer.c",
                                 "stratum_sthread", uVar22);
                        FUN_0001dbec(3, local_828, 1);
                        /* WARNING: Subroutine does not return */
                        FUN_0002c508(1);
                    }
                    piVar3[10] = DAT_00072db4;
                    DAT_00072db4 = DAT_00072db4 + 1;
                    uVar6 =
                        pthread_mutex_unlock((pthread_mutex_t *)&DAT_00068c4c);
                    if (uVar6 != 0) {
                        piVar3 = __errno_location();
                        iVar2 = *piVar3;
                        uVar22 = 0x1e38;
                        pcVar13 =
                            "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
                        goto LAB_00037908;
                    }
                    (*DAT_0006797c)();
                    local_c64 = uVar6;
                    FUN_0001fa24(&local_c64, param_1 + 0x1c1);
                    if (*(char *)(param_1 + 0xa5) == '\0') {
                        uVar6 = piVar3[10];
                        puVar26 = auStack_c58;
                        puVar25 = auStack_c3c;
                        uVar22 = *(undefined4 *)(local_c68 + 0x134);
                        snprintf(acStack_c28, 0x400,
                                 "{\"params\": [\"%s\", \"%s\", \"%s\", "
                                 "\"%s\", \"%s\"], \"id\": %d, \"method\": "
                                 "\"mining.submit\"}",
                                 param_1[0x2b],
                                 *(undefined4 *)(local_c68 + 0x120), puVar25,
                                 uVar22, puVar26, uVar6);
                    } else {
                        puVar26 = auStack_c58;
                        uVar6 = *(uint *)(local_c68 + 0x1bc) & ~local_c64;
                        uVar6 = uVar6 << 0x18 | (uVar6 >> 8 & 0xff) << 0x10 |
                                (uVar6 >> 0x10 & 0xff) << 8 | uVar6 >> 0x18;
                        puVar25 = auStack_c3c;
                        uVar22 = *(undefined4 *)(local_c68 + 0x134);
                        snprintf(acStack_c28, 0x400,
                                 "{\"params\": [\"%s\", \"%s\", \"%s\", "
                                 "\"%s\", \"%s\", \"%08x\"], \"id\": %d, "
                                 "\"method\": \"mining.submit\"}",
                                 param_1[0x2b],
                                 *(undefined4 *)(local_c68 + 0x120), puVar25,
                                 uVar22, puVar26, uVar6, piVar3[10]);
                    }
                    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                        (5 < DAT_00067858)) {
                        snprintf(local_828, 0x800,
                                 "Submitting share %08lx to pool %d",
                                 *(undefined4 *)(iVar2 + 0xd8), *param_1,
                                 puVar25, uVar22, puVar26, uVar6);
                        FUN_0001dbec(6, local_828, 0);
                    }
                    while (iVar2 = piVar3[0xb], tVar4 = time((time_t *)0x0),
                           tVar4 <= iVar2 + 0x77) {
                        sVar7 = strlen(acStack_c28);
                        iVar2 = FUN_0002137c(param_1, acStack_c28, sVar7);
                        if (iVar2 != 0) {
                            iVar2 = pthread_mutex_lock(
                                (pthread_mutex_t *)&DAT_00068c4c);
                            if (iVar2 == 0) {
                                piVar3[5] = (int)(piVar3 + 10);
                                piVar18 = DAT_00068c64;
                                bVar24 = DAT_00068c64 == (int *)0x0;
                                piVar3[6] = 4;
                                uVar16 =
                                    *(byte *)(piVar3 + 10) + 0x112410d +
                                        (uint) * (byte *)((int)piVar3 + 0x2b) *
                                            0x1000000 +
                                        (uint) * (byte *)((int)piVar3 + 0x2a) *
                                            0x10000 +
                                        (uint) * (byte *)((int)piVar3 + 0x29) *
                                            0x100 ^
                                    0x7f76d;
                                uVar11 = 0x9f49bac6 - uVar16 ^ uVar16 << 8;
                                uVar6 = (-0x112410d - uVar16) - uVar11 ^
                                        uVar11 >> 0xd;
                                uVar16 =
                                    (uVar16 - uVar11) - uVar6 ^ uVar6 >> 0xc;
                                uVar11 =
                                    (uVar11 - uVar6) - uVar16 ^ uVar16 << 0x10;
                                uVar6 = (uVar6 - uVar16) - uVar11 ^ uVar11 >> 5;
                                uVar16 = (uVar16 - uVar11) - uVar6 ^ uVar6 >> 3;
                                uVar11 = (uVar11 - uVar6) - uVar16 ^ uVar16
                                                                         << 10;
                                uVar6 =
                                    (uVar6 - uVar16) - uVar11 ^ uVar11 >> 0xf;
                                piVar3[7] = uVar6;
                                if (bVar24) {
                                    piVar3[2] = 0;
                                    piVar3[1] = 0;
                                    DAT_00068c64 = piVar3;
                                    pvVar8 = malloc(0x2c);
                                    *piVar3 = (int)pvVar8;
                                    if (pvVar8 == (void *)0x0)
                                        goto LAB_00037e28;
                                    memset(pvVar8, 0, 0x2c);
                                    *(int **)(*piVar3 + 0x10) = piVar3;
                                    *(undefined4 *)(*piVar3 + 4) = 0x20;
                                    *(undefined4 *)(*piVar3 + 8) = 5;
                                    *(undefined4 *)(*piVar3 + 0x14) = 0;
                                    puVar20 = (undefined4 *)*piVar3;
                                    pvVar8 = malloc(0x180);
                                    *puVar20 = pvVar8;
                                    if (*(void **)*piVar3 == (void *)0x0)
                                        goto LAB_00037e28;
                                    memset(*(void **)*piVar3, 0, 0x180);
                                    *(undefined4 *)(*piVar3 + 0x28) =
                                        0xa0111fe1;
                                    piVar18 = piVar3;
                                } else {
                                    iVar2 = *piVar18;
                                    piVar3[2] = 0;
                                    *piVar3 = iVar2;
                                    piVar3[1] = *(int *)(*piVar18 + 0x10) -
                                                *(int *)(*piVar18 + 0x14);
                                    *(int **)(*(int *)(*piVar18 + 0x10) + 8) =
                                        piVar3;
                                    *(int **)(*piVar18 + 0x10) = piVar3;
                                }
                                *(int *)(*piVar18 + 0xc) =
                                    *(int *)(*piVar18 + 0xc) + 1;
                                uVar6 = uVar6 & ((int *)*piVar18)[1] - 1U;
                                iVar2 = uVar6 * 0xc;
                                iVar5 = *(int *)*piVar18 + iVar2;
                                *(int *)(iVar5 + 4) = *(int *)(iVar5 + 4) + 1;
                                iVar5 =
                                    *(int *)(*(int *)*piVar18 + uVar6 * 0xc);
                                piVar3[3] = 0;
                                piVar3[4] = iVar5;
                                iVar17 = *(int *)*piVar18;
                                iVar5 = *(int *)(iVar17 + uVar6 * 0xc);
                                if (iVar5 != 0) {
                                    *(int **)(iVar5 + 0xc) = piVar3;
                                    iVar17 = *(int *)*piVar18;
                                }
                                *(int **)(iVar17 + iVar2) = piVar3;
                                if (((uint)((*(int *)(*(int *)*piVar18 + iVar2 +
                                                      8) +
                                             1) *
                                            10) <=
                                     *(uint *)(*(int *)*piVar18 + iVar2 + 4)) &&
                                    (*(int *)(*piVar3 + 0x24) != 1)) {
                                    pvVar8 =
                                        calloc(*(int *)(*piVar3 + 4) * 0x18, 1);
                                    if (pvVar8 == (void *)0x0) {
                                    LAB_00037e28:
                                        /* WARNING: Subroutine does not return
                                         */
                                        exit(-1);
                                    }
                                    iVar2 = *piVar3;
                                    *(uint *)(iVar2 + 0x18) =
                                        (uint)((*(int *)(iVar2 + 4) * 2 - 1U &
                                                *(uint *)(iVar2 + 0xc)) != 0) +
                                        (*(uint *)(iVar2 + 0xc) >>
                                         (*(int *)(iVar2 + 8) + 1U & 0xff));
                                    *(undefined4 *)(*piVar3 + 0x1c) = 0;
                                    piVar18 = (int *)*piVar3;
                                    uVar6 = piVar18[1];
                                    if (uVar6 != 0) {
                                        iVar2 = 0;
                                        local_ca0 = 0;
                                        do {
                                            iVar5 = *(int *)(*piVar18 + iVar2);
                                            if (*(int *)(*piVar18 + iVar2) !=
                                                0) {
                                                while (true) {
                                                    iVar21 =
                                                        *(int *)(iVar5 + 0x10);
                                                    uVar11 =
                                                        uVar6 * 2 - 1 &
                                                        *(uint *)(iVar5 + 0x1c);
                                                    uVar6 =
                                                        *(int *)((int)pvVar8 +
                                                                 uVar11 * 0xc +
                                                                 4) +
                                                        1;
                                                    *(uint *)((int)pvVar8 +
                                                              uVar11 * 0xc +
                                                              4) = uVar6;
                                                    iVar17 = *piVar3;
                                                    if (*(uint *)(iVar17 +
                                                                  0x18) <
                                                        uVar6) {
                                                        *(int *)(iVar17 +
                                                                 0x1c) =
                                                            *(int *)(iVar17 +
                                                                     0x1c) +
                                                            1;
                                                        uVar22 = FUN_0004a4a0(
                                                            *(undefined4
                                                                  *)((int)
                                                                         pvVar8 +
                                                                     uVar11 *
                                                                         0xc +
                                                                     4),
                                                            *(undefined4
                                                                  *)(*piVar3 +
                                                                     0x18));
                                                        *(undefined4
                                                              *)((int)pvVar8 +
                                                                 uVar11 * 0xc +
                                                                 8) = uVar22;
                                                    }
                                                    *(undefined4 *)(iVar5 +
                                                                    0xc) = 0;
                                                    *(undefined4 *)(iVar5 +
                                                                    0x10) =
                                                        *(undefined4
                                                              *)((int)pvVar8 +
                                                                 uVar11 * 0xc);
                                                    iVar17 =
                                                        *(int *)((int)pvVar8 +
                                                                 uVar11 * 0xc);
                                                    if (iVar17 != 0) {
                                                        *(int *)(iVar17 + 0xc) =
                                                            iVar5;
                                                    }
                                                    *(int *)((int)pvVar8 +
                                                             uVar11 * 0xc) =
                                                        iVar5;
                                                    piVar18 = (int *)*piVar3;
                                                    if (iVar21 == 0)
                                                        break;
                                                    uVar6 = piVar18[1];
                                                    iVar5 = iVar21;
                                                }
                                                uVar6 = piVar18[1];
                                            }
                                            iVar2 = iVar2 + 0xc;
                                            local_ca0 = local_ca0 + 1;
                                        } while (local_ca0 < uVar6);
                                    }
                                    free((void *)*piVar18);
                                    *(int *)(*piVar3 + 4) =
                                        *(int *)(*piVar3 + 4) << 1;
                                    *(int *)(*piVar3 + 8) =
                                        *(int *)(*piVar3 + 8) + 1;
                                    *(void **)*piVar3 = pvVar8;
                                    iVar2 = *piVar3;
                                    if (*(uint *)(iVar2 + 0xc) >> 1 <
                                        *(uint *)(iVar2 + 0x1c)) {
                                        iVar5 = *(int *)(iVar2 + 0x20) + 1;
                                    } else {
                                        iVar5 = 0;
                                    }
                                    *(int *)(iVar2 + 0x20) = iVar5;
                                    if (1 < *(uint *)(*piVar3 + 0x20)) {
                                        *(undefined4 *)(*piVar3 + 0x24) = 1;
                                    }
                                }
                                param_1[0xbb] = param_1[0xbb] + 1;
                                iVar2 = pthread_mutex_unlock(
                                    (pthread_mutex_t *)&DAT_00068c4c);
                                if (iVar2 != 0) {
                                    piVar3 = __errno_location();
                                    iVar2 = *piVar3;
                                    uVar22 = 0x1e67;
                                    pcVar13 = "WTF MUTEX ERROR ON UNLOCK! "
                                              "errno=%d in %s %s():%d";
                                    goto LAB_00037908;
                                }
                                (*DAT_0006797c)();
                                iVar2 = FUN_0002cf5c(param_1, param_1 + 0x18);
                                if (iVar2 == 0) {
                                LAB_000373ac:
                                    if (DAT_000686e1 != 0) {
                                        if ((DAT_00072d88 == '\0') &&
                                            (DAT_000686e0 == '\0'))
                                            goto LAB_00037680;
                                    LAB_000373e4:
                                        builtin_strncpy(
                                            local_828,
                                            "Successfully submitted, adding to "
                                            "stratu",
                                            0x28);
                                        uStack_800._0_1_ = 'm';
                                        uStack_800._1_1_ = '_';
                                        uStack_800._2_1_ = 's';
                                        uStack_800._3_1_ = 'h';
                                        builtin_strncpy(acStack_7fc, "ares", 4);
                                        local_7f8._0_1_ = ' ';
                                        local_7f8._1_1_ = 'd';
                                        local_7f8._2_1_ = 'b';
                                        local_7f8._3_1_ = '\0';
                                        FUN_0001dbec(7, local_828, 0);
                                    }
                                } else {
                                    if (((DAT_00072d88 != '\0') ||
                                         (DAT_000686e0 != '\0')) ||
                                        (3 < DAT_00067858)) {
                                        snprintf(local_828, 0x800,
                                                 "Pool %d communication "
                                                 "resumed, submitting work",
                                                 *param_1);
                                        FUN_0001dbec(4, local_828, 0);
                                        goto LAB_000373ac;
                                    }
                                    if (DAT_000686e1 != 0) {
                                    LAB_00037680:
                                        if (6 < DAT_00067858)
                                            goto LAB_000373e4;
                                    }
                                }
                                tVar4 = time((time_t *)0x0);
                                bVar14 = DAT_000686e1;
                                piVar3[0xc] = tVar4;
                                if (0 < tVar4 - piVar3[0xb]) {
                                    bVar14 = bVar14 | 1;
                                }
                                if ((bVar14 != 0) &&
                                    (((DAT_00072d88 != '\0' ||
                                       (DAT_000686e0 != '\0')) ||
                                      (5 < DAT_00067858)))) {
                                    snprintf(local_828, 0x800,
                                             "Pool %d stratum share submission "
                                             "lag time %d seconds",
                                             *param_1, tVar4 - piVar3[0xb]);
                                    FUN_0001dbec(6, local_828, 0);
                                }
                                goto LAB_00037358;
                            }
                            piVar3 = __errno_location();
                            iVar2 = *piVar3;
                            uVar22 = 0x1e64;
                            pcVar13 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s "
                                      "%s():%d";
                            goto LAB_00037908;
                        }
                        iVar2 = FUN_0002cef0(param_1, param_1 + 0x18);
                        if ((iVar2 == 0) &&
                            (iVar2 = FUN_00030284(param_1), iVar2 != 0)) {
                            if ((DAT_00072d88 != '\0') ||
                                ((DAT_000686e0 != '\0' ||
                                  (3 < DAT_00067858)))) {
                                snprintf(
                                    local_828, 0x800,
                                    "Pool %d stratum share submission failure",
                                    *param_1);
                                FUN_0001dbec(4, local_828, 0);
                            }
                            DAT_00072da4 = DAT_00072da4 + 1;
                            param_1[0x21] = param_1[0x21] + 1;
                        }
                        if (DAT_00074f7c != '\0') {
                            if (DAT_000686e1 == 0)
                                goto LAB_00037b28;
                            if (((DAT_00072d88 == '\0') &&
                                 (DAT_000686e0 == '\0')) &&
                                (DAT_00067858 < 7))
                                goto LAB_00037ac0;
                            builtin_strncpy(
                                local_828,
                                "Lowmem option prevents resubmitting stra",
                                0x28);
                            uStack_800._0_1_ = 't';
                            uStack_800._1_1_ = 'u';
                            uStack_800._2_1_ = 'm';
                            uStack_800._3_1_ = ' ';
                            builtin_strncpy(acStack_7fc, "shar", 4);
                            local_7f8._0_2_ = 0x65;
                            FUN_0001dbec(7, local_828, 0);
                            break;
                        }
                        iVar2 = pthread_mutex_lock(
                            (pthread_mutex_t *)(param_1 + 0x35));
                        if (iVar2 != 0) {
                            piVar3 = __errno_location();
                            iVar2 = *piVar3;
                            uVar22 = 0x1e7d;
                            pcVar13 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s "
                                      "%s():%d";
                            goto LAB_00037908;
                        }
                        __rwlock = (pthread_rwlock_t *)(param_1 + 0x3b);
                        iVar2 = pthread_rwlock_rdlock(__rwlock);
                        if (iVar2 != 0) {
                            piVar3 = __errno_location();
                            iVar2 = *piVar3;
                            uVar22 = 0x1e7d;
                            pcVar13 = "WTF RDLOCK ERROR ON LOCK! errno=%d in "
                                      "%s %s():%d";
                            goto LAB_00037908;
                        }
                        iVar2 = pthread_mutex_unlock(
                            (pthread_mutex_t *)(param_1 + 0x35));
                        if (iVar2 != 0) {
                            piVar3 = __errno_location();
                            iVar2 = *piVar3;
                            uVar22 = 0x1e7d;
                            pcVar13 = "WTF MUTEX ERROR ON UNLOCK! errno=%d in "
                                      "%s %s():%d";
                            goto LAB_00037908;
                        }
                        if (((char *)param_1[0x9d] == (char *)0x0) ||
                            (iVar2 = strcmp(*(char **)(local_c68 + 0x140),
                                            (char *)param_1[0x9d]),
                             iVar2 != 0)) {
                            iVar2 = pthread_rwlock_unlock(__rwlock);
                            if (iVar2 != 0) {
                            LAB_00037a74:
                                piVar3 = __errno_location();
                                iVar2 = *piVar3;
                                uVar22 = 0x1e7f;
                                pcVar13 = "WTF RWLOCK ERROR ON UNLOCK! "
                                          "errno=%d in %s %s():%d";
                                goto LAB_00037908;
                            }
                            (*DAT_0006797c)();
                            if (DAT_000686e1 == 0)
                                goto LAB_00037b28;
                            if (((DAT_00072d88 == '\0') &&
                                 (DAT_000686e0 == '\0')) &&
                                (DAT_00067858 < 7))
                                goto LAB_00037ac0;
                            builtin_strncpy(
                                local_828,
                                "No matching session id for resubmitting ",
                                0x28);
                            uStack_800._0_1_ = 's';
                            uStack_800._1_1_ = 't';
                            uStack_800._2_1_ = 'r';
                            uStack_800._3_1_ = 'a';
                            builtin_strncpy(acStack_7fc, "tum ", 4);
                            local_7f8._0_1_ = 's';
                            local_7f8._1_1_ = 'h';
                            local_7f8._2_1_ = 'a';
                            local_7f8._3_1_ = 'r';
                            local_7f4 = 0x65;
                            FUN_0001dbec(7, local_828, 0);
                            break;
                        }
                        iVar2 = pthread_rwlock_unlock(__rwlock);
                        if (iVar2 != 0)
                            goto LAB_00037a74;
                        (*DAT_0006797c)();
                        sleep(2);
                    }
                    if (DAT_000686e1 != 0) {
                        if (DAT_00072d88 == '\0') {
                        LAB_00037ac0:
                            if ((DAT_000686e0 == '\0') && (DAT_00067858 < 7))
                                goto LAB_00037b28;
                        }
                        builtin_strncpy(
                            local_828,
                            "Failed to submit stratum share, discardi", 0x28);
                        uStack_800._0_3_ = 0x676e;
                        FUN_0001dbec(7, local_828, 0);
                    }
                LAB_00037b28:
                    FUN_0002a9d4(&local_c68, "cgminer.c", "stratum_sthread",
                                 0x1e8e);
                    free(piVar3);
                    param_1[0x1e] = param_1[0x1e] + 1;
                    bVar24 = 0xfffffffe < DAT_000762c0;
                    DAT_000762c0 = DAT_000762c0 + 1;
                    DAT_000762c4 = DAT_000762c4 + (uint)bVar24;
                }
            } else {
                if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                    (DAT_00067858 < 3)) {
                LAB_000377d0:
                    if (2 < DAT_00067858)
                        goto LAB_00037780;
                } else {
                    snprintf(local_828, 0x800,
                             "Pool %d asking for inappropriately long nonce2 "
                             "length %d",
                             *param_1, *(uint *)(local_c68 + 0x130));
                    FUN_0001dbec(3, local_828, 0);
                    if ((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0'))
                        goto LAB_000377d0;
                LAB_00037780:
                    builtin_strncpy(local_828,
                                    "Not attempting to submit shares", 0x20);
                    FUN_0001dbec(3, local_828, 0);
                }
                FUN_0002a9d4(&local_c68, "cgminer.c", "stratum_sthread",
                             0x1e0f);
                iVar9 = iVar5;
                iVar10 = iVar17;
                iVar15 = iVar21;
            }
        LAB_00037358:
            cVar1 = *(char *)((int)param_1 + 0x69);
            iVar2 = param_1[0xba];
            iVar5 = iVar9;
            iVar17 = iVar10;
            iVar21 = iVar15;
        }
        pcVar23 = "Stratum q returned empty work";
        pcVar13 = local_828;
        local_c68 = 0;
    }
    uVar22 = *(undefined4 *)(pcVar23 + 4);
    uVar12 = *(undefined4 *)(pcVar23 + 8);
    uVar19 = *(undefined4 *)(pcVar23 + 0xc);
    *(undefined4 *)pcVar13 = *(undefined4 *)pcVar23;
    *(undefined4 *)(pcVar13 + 4) = uVar22;
    *(undefined4 *)(pcVar13 + 8) = uVar12;
    *(undefined4 *)(pcVar13 + 0xc) = uVar19;
    uVar22 = *(undefined4 *)(pcVar23 + 0x14);
    uVar12 = *(undefined4 *)(pcVar23 + 0x18);
    uVar19 = *(undefined4 *)(pcVar23 + 0x1c);
    *(undefined4 *)(pcVar13 + 0x10) = *(undefined4 *)(pcVar23 + 0x10);
    *(undefined4 *)(pcVar13 + 0x14) = uVar22;
    *(undefined4 *)(pcVar13 + 0x18) = uVar12;
    *(short *)(pcVar13 + 0x1c) = (short)uVar19;
    FUN_0001dbec(3, local_828, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

/* WARNING: Restarted to delay deadcode elimination for space: ram */

char FUN_00037e30(int param_1)

{
    byte bVar1;
    size_t sVar2;
    byte *pbVar3;
    byte *pbVar4;
    size_t sVar5;
    tm *ptVar6;
    void *pvVar7;
    byte *pbVar8;
    undefined4 *puVar9;
    uint uVar10;
    int *piVar11;
    byte *pbVar12;
    undefined4 *puVar13;
    char *pcVar14;
    int iVar15;
    char cVar16;
    uint uVar17;
    uint uVar18;
    byte *pbVar19;
    undefined4 uVar20;
    undefined1 *puVar21;
    byte *pbVar22;
    int iVar23;
    byte *pbVar24;
    byte *pbVar25;
    int iVar26;
    uint uVar27;
    int iVar28;
    byte *pbVar29;
    byte *pbVar30;
    uint uVar31;
    byte *pbVar32;
    byte *pbVar33;
    undefined *puVar34;
    char *pcVar35;
    bool bVar36;
    double dVar37;
    undefined8 uVar38;
    int local_8ac;
    uint local_8a4;
    int local_898;
    undefined4 local_894;
    undefined4 local_890;
    undefined4 local_88c;
    undefined4 local_888;
    undefined4 local_884;
    undefined4 local_880;
    undefined4 local_87c;
    undefined4 local_878;
    byte local_874[12];
    byte local_868[56];
    time_t local_830;
    char acStack_82c[12];
    uint local_820;
    char acStack_81c[8];
    undefined4 local_814;
    char local_810[20];
    undefined2 uStack_7fc;
    undefined1 local_7fa;

    puVar9 = *(undefined4 **)(param_1 + 0x104);
    local_898 = 0;
    iVar23 = puVar9[0x18c];
    bVar1 = *(byte *)(iVar23 + 0x2a);
    if (*(char *)(param_1 + 0x11a) != '\0') {
        return *(char *)(param_1 + 0x11a);
    }
    local_890 = *(undefined4 *)(param_1 + 0x1c);
    local_894 = *(undefined4 *)(param_1 + 0x20);
    local_88c = *(undefined4 *)(param_1 + 0x18);
    local_888 = *(undefined4 *)(param_1 + 0x14);
    local_884 = *(undefined4 *)(param_1 + 0x10);
    local_880 = *(undefined4 *)(param_1 + 0xc);
    local_87c = *(undefined4 *)(param_1 + 8);
    local_878 = *(undefined4 *)(param_1 + 4);
    FUN_0001f900(local_874, &local_894, 0x20);
    if (bVar1 < 5) {
        FUN_000231cc(&local_898, iVar23 + 0x2b, bVar1, "cgminer.c",
                     "test_work_current", 0x1632);
        local_898 = local_898 + -1;
    }
    iVar23 = pthread_mutex_lock((pthread_mutex_t *)(puVar9 + 0x35));
    if (iVar23 == 0) {
        iVar23 = pthread_rwlock_wrlock((pthread_rwlock_t *)(puVar9 + 0x3b));
        if (iVar23 == 0) {
            if (*(char *)(puVar9 + 0xae) != '\0') {
                *(undefined1 *)(puVar9 + 0xae) = 0;
                *(undefined1 *)(param_1 + 0x118) = 1;
            }
            iVar23 = pthread_rwlock_unlock((pthread_rwlock_t *)(puVar9 + 0x3b));
            if (iVar23 == 0) {
                iVar23 =
                    pthread_mutex_unlock((pthread_mutex_t *)(puVar9 + 0x35));
                if (iVar23 == 0) {
                    (*DAT_0006797c)();
                    iVar23 = pthread_rwlock_wrlock(
                        (pthread_rwlock_t *)&DAT_0006a1a8);
                    if (iVar23 != 0) {
                        piVar11 = __errno_location();
                        pcVar35 = "block_exists";
                        iVar23 = *piVar11;
                        uVar20 = 0x15e8;
                        goto LAB_000391d0;
                    }
                    sVar2 = strlen((char *)local_874);
                    uVar27 = 0x9e3779b9;
                    uVar31 = sVar2;
                    if (sVar2 < 0xc) {
                        uVar17 = 0xfeedbeef;
                        pbVar3 = local_874;
                        uVar10 = uVar27;
                    } else {
                        uVar17 = 0xfeedbeef;
                        uVar10 = uVar27;
                        pbVar25 = local_868;
                        do {
                            pbVar3 = pbVar25;
                            uVar31 = uVar31 - 0xc;
                            iVar23 = (uint)pbVar3[-6] * 0x10000 +
                                     (uint)pbVar3[-7] * 0x100 +
                                     (uint)pbVar3[-8] +
                                     (uint)pbVar3[-5] * 0x1000000 + uVar10;
                            uVar17 = (uint)pbVar3[-2] * 0x10000 +
                                     (uint)pbVar3[-3] * 0x100 +
                                     (uint)pbVar3[-4] +
                                     (uint)pbVar3[-1] * 0x1000000 + uVar17;
                            uVar10 = ((((uint)pbVar3[-10] * 0x10000 +
                                        (uint)pbVar3[-0xb] * 0x100 +
                                        (uint)pbVar3[-0xc] +
                                        (uint)pbVar3[-9] * 0x1000000) -
                                       iVar23) -
                                      uVar17) +
                                         uVar27 ^
                                     uVar17 >> 0xd;
                            uVar27 = (iVar23 - uVar17) - uVar10 ^ uVar10 << 8;
                            uVar18 = (uVar17 - uVar10) - uVar27 ^ uVar27 >> 0xd;
                            uVar17 = (uVar10 - uVar27) - uVar18 ^ uVar18 >> 0xc;
                            uVar10 = (uVar27 - uVar18) - uVar17 ^ uVar17
                                                                      << 0x10;
                            uVar18 = (uVar18 - uVar17) - uVar10 ^ uVar10 >> 5;
                            uVar27 = (uVar17 - uVar10) - uVar18 ^ uVar18 >> 3;
                            uVar10 = (uVar10 - uVar18) - uVar27 ^ uVar27 << 10;
                            uVar17 = (uVar18 - uVar27) - uVar10 ^ uVar10 >> 0xf;
                            pbVar25 = pbVar3 + 0xc;
                        } while (0xb < uVar31);
                    }
                    uVar17 = sVar2 + uVar17;
                    switch (uVar31) {
                    case 0xb:
                        uVar17 = uVar17 + (uint)pbVar3[10] * 0x1000000;
                    case 10:
                        uVar17 = uVar17 + (uint)pbVar3[9] * 0x10000;
                    case 9:
                        uVar17 = uVar17 + (uint)pbVar3[8] * 0x100;
                    case 8:
                        uVar10 = uVar10 + (uint)pbVar3[7] * 0x1000000;
                    case 7:
                        uVar10 = uVar10 + (uint)pbVar3[6] * 0x10000;
                    case 6:
                        uVar10 = uVar10 + (uint)pbVar3[5] * 0x100;
                    case 5:
                        uVar10 = uVar10 + pbVar3[4];
                    case 4:
                        uVar27 = uVar27 + (uint)pbVar3[3] * 0x1000000;
                    case 3:
                        uVar27 = uVar27 + (uint)pbVar3[2] * 0x10000;
                    case 2:
                        uVar27 = uVar27 + (uint)pbVar3[1] * 0x100;
                    case 1:
                        uVar27 = uVar27 + *pbVar3;
                    }
                    uVar31 = (uVar27 - uVar10) - uVar17 ^ uVar17 >> 0xd;
                    uVar27 = (uVar10 - uVar17) - uVar31 ^ uVar31 << 8;
                    uVar17 = (uVar17 - uVar31) - uVar27 ^ uVar27 >> 0xd;
                    uVar31 = (uVar31 - uVar27) - uVar17 ^ uVar17 >> 0xc;
                    uVar10 = (uVar27 - uVar17) - uVar31 ^ uVar31 << 0x10;
                    uVar27 = (uVar17 - uVar31) - uVar10 ^ uVar10 >> 5;
                    uVar31 = (uVar31 - uVar10) - uVar27 ^ uVar27 >> 3;
                    uVar10 = (uVar10 - uVar27) - uVar31 ^ uVar31 << 10;
                    uVar31 = (uVar27 - uVar31) - uVar10 ^ uVar10 >> 0xf;
                    if (DAT_0006a1c8 != (byte *)0x0) {
                        piVar11 = *(int **)(DAT_0006a1c8 + 0x44);
                        iVar23 = *(int *)(*piVar11 +
                                          (piVar11[1] - 1U & uVar31) * 0xc);
                        if (iVar23 != 0) {
                            iVar28 = piVar11[5];
                            do {
                                iVar23 = iVar23 - iVar28;
                                if (iVar23 == 0)
                                    break;
                                if (((uVar31 == *(uint *)(iVar23 + 0x60)) &&
                                     (sVar2 == *(size_t *)(iVar23 + 0x5c))) &&
                                    (iVar15 = memcmp(*(void **)(iVar23 + 0x58),
                                                     local_874, sVar2),
                                     iVar15 == 0)) {
                                    iVar23 = pthread_rwlock_unlock(
                                        (pthread_rwlock_t *)&DAT_0006a1a8);
                                    if (iVar23 != 0)
                                        goto LAB_00039320;
                                    (*DAT_0006797c)();
                                    iVar23 =
                                        memcmp(puVar9 + 0x88, &local_894, 0x20);
                                    if (iVar23 == 0) {
                                        cVar16 = '\x01';
                                    } else {
                                        iVar23 = memcmp(&local_894,
                                                        &DAT_0006a1d4, 0x20);
                                        if (iVar23 == 0) {
                                            if (((DAT_00072d88 != '\0') ||
                                                 (DAT_000686e0 != '\0')) ||
                                                (5 < DAT_00067858)) {
                                                snprintf((char *)&local_830,
                                                         0x800,
                                                         "Pool %d now up to "
                                                         "date at height %d",
                                                         *puVar9, local_898);
                                                FUN_0001dbec(6, &local_830, 0);
                                            }
                                            FUN_000231cc(
                                                puVar9 + 0x88, &local_894, 0x20,
                                                "cgminer.c",
                                                "test_work_current", 0x1679);
                                            cVar16 = '\x01';
                                        } else {
                                            cVar16 = DAT_000686e1;
                                            if (DAT_000686e1 != '\0') {
                                                if (((DAT_00072d88 == '\0') &&
                                                     (DAT_000686e0 == '\0')) &&
                                                    (DAT_00067858 < 7)) {
                                                    cVar16 = '\0';
                                                } else {
                                                    snprintf(
                                                        (char *)&local_830,
                                                        0x800,
                                                        "Stale data from pool "
                                                        "%d at height %d",
                                                        *puVar9, local_898);
                                                    FUN_0001dbec(7, &local_830,
                                                                 0);
                                                    cVar16 = '\0';
                                                }
                                            }
                                        }
                                    }
                                    if (*(char *)(param_1 + 0x118) != '\0') {
                                        uVar31 = DAT_00068ae4 - 3;
                                        DAT_00068c94 = DAT_00068c94 + 1;
                                        *(int *)(param_1 + 0x150) =
                                            DAT_00068c94;
                                        if ((uVar31 < 2) ||
                                            (iVar28 = *(int *)(param_1 + 0x104),
                                             iVar23 = FUN_0002fe54(),
                                             iVar28 == iVar23)) {
                                            if (*(char *)(param_1 + 0x11c) ==
                                                '\0') {
                                                if (((DAT_00072d88 != '\0') ||
                                                     (DAT_000686e0 != '\0')) ||
                                                    (4 < DAT_00067858)) {
                                                    puVar21 = &DAT_0004d488;
                                                    if (*(char *)(param_1 +
                                                                  0x144) !=
                                                        '\0') {
                                                        puVar21 = &DAT_00053700;
                                                    }
                                                    snprintf(
                                                        (char *)&local_830,
                                                        0x800,
                                                        "%sLONGPOLL from pool "
                                                        "%d requested work "
                                                        "restart",
                                                        puVar21,
                                                        **(undefined4 *
                                                               *)(param_1 +
                                                                  0x104));
                                                    FUN_0001dbec(5, &local_830,
                                                                 0);
                                                }
                                            } else if (((DAT_00072d88 !=
                                                         '\0') ||
                                                        (DAT_000686e0 !=
                                                         '\0')) ||
                                                       (4 < DAT_00067858)) {
                                                snprintf(
                                                    (char *)&local_830, 0x800,
                                                    "Stratum from pool %d "
                                                    "requested work restart",
                                                    *puVar9);
                                                FUN_0001dbec(5, &local_830, 0);
                                            }
                                            FUN_0002c840();
                                        }
                                    }
                                    goto LAB_0003837c;
                                }
                                iVar23 = *(int *)(iVar23 + 0x54);
                            } while (iVar23 != 0);
                        }
                    }
                    pbVar3 = (byte *)FUN_0001f790(0x68, 1, "cgminer.c",
                                                  "block_exists", 0x15ec);
                    if (pbVar3 == (byte *)0x0) {
                        local_830._0_1_ = 'b';
                        local_830._1_1_ = 'l';
                        local_830._2_1_ = 'o';
                        local_830._3_1_ = 'c';
                        builtin_strncpy(acStack_82c, "k_exists OOM", 0xc);
                        local_820 = local_820 & 0xffffff00;
                        FUN_0001dbec(3, &local_830, 1);
                        /* WARNING: Subroutine does not return */
                        FUN_0002c508(1);
                    }
                    strcpy((char *)pbVar3, (char *)local_874);
                    pbVar25 = DAT_0006a1c8;
                    bVar36 = DAT_0006a1c8 != (byte *)0x0;
                    *(int *)(pbVar3 + 100) = DAT_000761d0;
                    DAT_000761d0 = DAT_000761d0 + 1;
                    local_8ac = 0;
                    if ((bVar36) &&
                        (3 < *(uint *)(*(int *)(pbVar25 + 0x44) + 0xc))) {
                        pbVar30 = pbVar25 + 0x44;
                        pbVar29 = (byte *)0x1;
                    LAB_0003843c:
                        pbVar32 = (byte *)0x0;
                        uVar31 = 0;
                        pbVar24 = pbVar30;
                        pbVar30 = (byte *)0x0;
                    LAB_0003844c:
                        uVar31 = uVar31 + 1;
                        pbVar4 = pbVar29;
                        if (pbVar29 == (byte *)0x0) {
                            pbVar8 = (byte *)0x0;
                            pbVar19 = pbVar24;
                        } else {
                            pbVar19 = *(byte **)(pbVar24 + 8);
                            if (pbVar19 != (byte *)0x0) {
                                pbVar19 =
                                    pbVar19 +
                                    *(int *)(*(int *)(pbVar25 + 0x44) + 0x14);
                                if (pbVar19 != (byte *)0x0) {
                                    pbVar8 = (byte *)0x1;
                                    while (pbVar4 = pbVar8, pbVar8 != pbVar29) {
                                        pbVar19 = *(byte **)(pbVar19 + 8);
                                        pbVar8 = pbVar8 + 1;
                                        pbVar4 = pbVar29;
                                        if ((pbVar19 == (byte *)0x0) ||
                                            (pbVar19 =
                                                 pbVar19 +
                                                 *(int *)(*(int *)(pbVar25 +
                                                                   0x44) +
                                                          0x14),
                                             pbVar19 == (byte *)0x0))
                                            break;
                                    }
                                    goto LAB_000384a8;
                                }
                            }
                            pbVar8 = (byte *)0x1;
                        }
                    LAB_000384a8:
                        do {
                            pbVar12 = pbVar24;
                            pbVar33 = pbVar32;
                            if (pbVar8 != (byte *)0x0)
                                goto LAB_00038528;
                        LAB_000384b0:
                            if (pbVar4 == (byte *)0x0 ||
                                pbVar19 == (byte *)0x0) {
                                pbVar24 = pbVar19;
                                if (pbVar19 != (byte *)0x0)
                                    goto LAB_0003844c;
                                if (pbVar32 != (byte *)0x0) {
                                    pbVar32[8] = 0;
                                    pbVar32[9] = 0;
                                    pbVar32[10] = 0;
                                    pbVar32[0xb] = 0;
                                }
                                if ((1 < uVar31) &&
                                    (pbVar29 = (byte *)((int)pbVar29 << 1),
                                     pbVar32 = pbVar30, pbVar30 != (byte *)0x0))
                                    goto LAB_0003843c;
                                *(byte **)(*(int *)(pbVar25 + 0x44) + 0x10) =
                                    pbVar32;
                                pbVar30 =
                                    pbVar30 +
                                    -*(int *)(*(int *)(pbVar25 + 0x44) + 0x14);
                                iVar23 = *(int *)(pbVar30 + 0x48);
                                local_8ac = *(int *)(pbVar30 + 100);
                                DAT_0006a1c8 = pbVar30;
                                if (iVar23 == 0) {
                                    pbVar25 = *(byte **)(pbVar30 + 0x4c);
                                    puVar13 = *(undefined4 **)(pbVar30 + 0x44);
                                    if (pbVar25 != (byte *)0x0) {
                                        iVar28 = puVar13[5];
                                        pbVar29 = pbVar25;
                                        DAT_0006a1c8 = pbVar25;
                                        if (pbVar30 ==
                                            (byte *)(puVar13[4] - iVar28))
                                            goto LAB_000396b8;
                                        goto LAB_00038618;
                                    }
                                    free((void *)*puVar13);
                                    free(*(void **)(pbVar30 + 0x44));
                                    DAT_0006a1c8 = (byte *)0x0;
                                } else {
                                    puVar13 = *(undefined4 **)(pbVar30 + 0x44);
                                    iVar28 = puVar13[5];
                                    if (pbVar30 ==
                                        (byte *)(puVar13[4] - iVar28)) {
                                    LAB_000396b8:
                                        DAT_0006a1c8 = pbVar30;
                                        puVar13[4] = iVar23 + iVar28;
                                        iVar23 = *(int *)(pbVar30 + 0x48);
                                        if (iVar23 == 0) {
                                            pbVar25 =
                                                *(byte **)(pbVar30 + 0x4c);
                                            pbVar29 = pbVar25;
                                            DAT_0006a1c8 = pbVar25;
                                            goto LAB_00038618;
                                        }
                                        iVar28 =
                                            *(int *)(*(int *)(pbVar30 + 0x44) +
                                                     0x14);
                                    }
                                    *(undefined4 *)(iVar23 + iVar28 + 8) =
                                        *(undefined4 *)(pbVar30 + 0x4c);
                                    pbVar25 = *(byte **)(pbVar30 + 0x4c);
                                    pbVar29 = pbVar30;
                                LAB_00038618:
                                    piVar11 = *(int **)(pbVar29 + 0x44);
                                    if (pbVar25 != (byte *)0x0) {
                                        *(undefined4 *)(pbVar25 + piVar11[5] +
                                                        4) =
                                            *(undefined4 *)(pbVar30 + 0x48);
                                        piVar11 = *(int **)(pbVar29 + 0x44);
                                    }
                                    iVar23 = (*(uint *)(pbVar30 + 0x60) &
                                              piVar11[1] - 1U) *
                                             0xc;
                                    *(int *)(*piVar11 + iVar23 + 4) =
                                        *(int *)(*piVar11 + iVar23 + 4) + -1;
                                    if (*(byte **)(**(int **)(pbVar29 + 0x44) +
                                                   iVar23) == pbVar30 + 0x44) {
                                        *(undefined4 *)(**(int **)(pbVar29 +
                                                                   0x44) +
                                                        iVar23) =
                                            *(undefined4 *)(pbVar30 + 0x54);
                                    }
                                    iVar23 = *(int *)(pbVar30 + 0x54);
                                    if (*(int *)(pbVar30 + 0x50) != 0) {
                                        *(int *)(*(int *)(pbVar30 + 0x50) +
                                                 0x10) = iVar23;
                                        iVar23 = *(int *)(pbVar30 + 0x54);
                                    }
                                    if (iVar23 != 0) {
                                        *(undefined4 *)(iVar23 + 0xc) =
                                            *(undefined4 *)(pbVar30 + 0x50);
                                    }
                                    *(int *)(*(int *)(pbVar29 + 0x44) + 0xc) =
                                        *(int *)(*(int *)(pbVar29 + 0x44) +
                                                 0xc) +
                                        -1;
                                    pbVar25 = pbVar29;
                                }
                                free(pbVar30);
                                break;
                            }
                            pbVar12 = pbVar19;
                            pbVar22 = pbVar8;
                            pbVar33 = pbVar32;
                            if (*(int *)(pbVar19 + 8) != 0) {
                                pbVar22 =
                                    (byte *)(*(int *)(pbVar19 + 8) +
                                             *(int *)(*(int *)(pbVar25 + 0x44) +
                                                      0x14));
                            }
                        LAB_000384d4:
                            pbVar19 = pbVar22;
                            pbVar4 = pbVar4 + -1;
                            if (pbVar33 == (byte *)0x0)
                                goto LAB_000390ec;
                            *(int *)(pbVar33 + 8) =
                                (int)pbVar12 -
                                *(int *)(*(int *)(pbVar25 + 0x44) + 0x14);
                            pbVar32 = pbVar12;
                            if (pbVar12 != (byte *)0x0) {
                                while (true) {
                                    iVar23 = (int)pbVar33 -
                                             *(int *)(*(int *)(pbVar25 + 0x44) +
                                                      0x14);
                                    pbVar32 = pbVar12;
                                    while (true) {
                                        *(int *)(pbVar32 + 4) = iVar23;
                                        pbVar12 = pbVar24;
                                        pbVar33 = pbVar32;
                                        if (pbVar8 == (byte *)0x0)
                                            goto LAB_000384b0;
                                    LAB_00038528:
                                        pbVar24 = pbVar12;
                                        if (pbVar19 == (byte *)0x0 ||
                                            pbVar4 == (byte *)0x0) {
                                            if ((pbVar12 != (byte *)0x0) &&
                                                (pbVar24 =
                                                     *(byte **)(pbVar12 + 8),
                                                 pbVar24 != (byte *)0x0)) {
                                                pbVar24 =
                                                    pbVar24 +
                                                    *(int *)(*(int *)(pbVar25 +
                                                                      0x44) +
                                                             0x14);
                                            }
                                        } else {
                                            iVar23 = *(int *)(*(int *)(pbVar25 +
                                                                       0x44) +
                                                              0x14);
                                            if (0 <
                                                *(int *)(pbVar12 + -iVar23 +
                                                         100) -
                                                    *(int *)(pbVar19 + -iVar23 +
                                                             100)) {
                                                pbVar22 =
                                                    *(byte **)(pbVar19 + 8);
                                                pbVar12 = pbVar19;
                                                if (pbVar22 != (byte *)0x0) {
                                                    pbVar22 = pbVar22 + iVar23;
                                                }
                                                goto LAB_000384d4;
                                            }
                                            if (pbVar12 != (byte *)0x0) {
                                                if (*(int *)(pbVar12 + 8) ==
                                                    0) {
                                                    pbVar24 = (byte *)0x0;
                                                } else {
                                                    pbVar24 =
                                                        (byte
                                                             *)(*(int *)(pbVar12 +
                                                                         8) +
                                                                iVar23);
                                                }
                                            }
                                        }
                                        pbVar8 = pbVar8 + -1;
                                        if (pbVar33 != (byte *)0x0)
                                            break;
                                    LAB_000390ec:
                                        pbVar30 = pbVar12;
                                        pbVar32 = pbVar30;
                                        if (pbVar30 == (byte *)0x0)
                                            goto LAB_000384a8;
                                        iVar23 = 0;
                                    }
                                    if (pbVar12 == (byte *)0x0)
                                        break;
                                    *(int *)(pbVar33 + 8) =
                                        (int)pbVar12 -
                                        *(int *)(*(int *)(pbVar25 + 0x44) +
                                                 0x14);
                                }
                                pbVar33[8] = 0;
                                pbVar33[9] = 0;
                                pbVar33[10] = 0;
                                pbVar33[0xb] = 0;
                                pbVar32 = pbVar12;
                            }
                        } while (true);
                    }
                    sVar5 = strlen((char *)pbVar3);
                    sVar2 = sVar5;
                    if (sVar5 < 0xc) {
                        uVar10 = 0x9e3779b9;
                        uVar27 = 0xfeedbeef;
                        uVar31 = uVar10;
                        pbVar29 = pbVar3;
                    } else {
                        uVar10 = 0x9e3779b9;
                        uVar27 = 0xfeedbeef;
                        uVar31 = uVar10;
                        pbVar30 = pbVar3;
                        do {
                            pbVar29 = pbVar30 + 0xc;
                            sVar2 = sVar2 - 0xc;
                            iVar23 = (uint)pbVar30[6] * 0x10000 +
                                     (uint)pbVar30[5] * 0x100 +
                                     (uint)pbVar30[4] +
                                     (uint)pbVar30[7] * 0x1000000 + uVar31;
                            uVar27 = (uint)pbVar30[10] * 0x10000 +
                                     (uint)pbVar30[9] * 0x100 +
                                     (uint)pbVar30[8] +
                                     (uint)pbVar30[0xb] * 0x1000000 + uVar27;
                            uVar10 =
                                ((((uint)pbVar30[2] * 0x10000 +
                                   (uint)pbVar30[1] * 0x100 + (uint)*pbVar30 +
                                   (uint)pbVar30[3] * 0x1000000) -
                                  iVar23) -
                                 uVar27) +
                                    uVar10 ^
                                uVar27 >> 0xd;
                            uVar31 = (iVar23 - uVar27) - uVar10 ^ uVar10 << 8;
                            uVar27 = (uVar27 - uVar10) - uVar31 ^ uVar31 >> 0xd;
                            uVar10 = (uVar10 - uVar31) - uVar27 ^ uVar27 >> 0xc;
                            uVar31 = (uVar31 - uVar27) - uVar10 ^ uVar10
                                                                      << 0x10;
                            uVar27 = (uVar27 - uVar10) - uVar31 ^ uVar31 >> 5;
                            uVar10 = (uVar10 - uVar31) - uVar27 ^ uVar27 >> 3;
                            uVar31 = (uVar31 - uVar27) - uVar10 ^ uVar10 << 10;
                            uVar27 = (uVar27 - uVar10) - uVar31 ^ uVar31 >> 0xf;
                            pbVar30 = pbVar29;
                        } while (0xb < sVar2);
                    }
                    uVar27 = uVar27 + sVar5;
                    switch (sVar2) {
                    case 0xb:
                        uVar27 = uVar27 + (uint)pbVar29[10] * 0x1000000;
                    case 10:
                        uVar27 = uVar27 + (uint)pbVar29[9] * 0x10000;
                    case 9:
                        uVar27 = uVar27 + (uint)pbVar29[8] * 0x100;
                    case 8:
                        uVar31 = uVar31 + (uint)pbVar29[7] * 0x1000000;
                    case 7:
                        uVar31 = uVar31 + (uint)pbVar29[6] * 0x10000;
                    case 6:
                        uVar31 = uVar31 + (uint)pbVar29[5] * 0x100;
                    case 5:
                        uVar31 = uVar31 + pbVar29[4];
                    case 4:
                        uVar10 = uVar10 + (uint)pbVar29[3] * 0x1000000;
                    case 3:
                        uVar10 = uVar10 + (uint)pbVar29[2] * 0x10000;
                    case 2:
                        uVar10 = uVar10 + (uint)pbVar29[1] * 0x100;
                    case 1:
                        uVar10 = uVar10 + *pbVar29;
                    }
                    *(byte **)(pbVar3 + 0x58) = pbVar3;
                    uVar10 = (uVar10 - uVar31) - uVar27 ^ uVar27 >> 0xd;
                    uVar31 = (uVar31 - uVar27) - uVar10 ^ uVar10 << 8;
                    uVar27 = (uVar27 - uVar10) - uVar31 ^ uVar31 >> 0xd;
                    uVar10 = (uVar10 - uVar31) - uVar27 ^ uVar27 >> 0xc;
                    uVar31 = (uVar31 - uVar27) - uVar10 ^ uVar10 << 0x10;
                    uVar27 = (uVar27 - uVar10) - uVar31 ^ uVar31 >> 5;
                    uVar10 = (uVar10 - uVar31) - uVar27 ^ uVar27 >> 3;
                    uVar31 = (uVar31 - uVar27) - uVar10 ^ uVar10 << 10;
                    uVar31 = (uVar27 - uVar10) - uVar31 ^ uVar31 >> 0xf;
                    *(uint *)(pbVar3 + 0x60) = uVar31;
                    sVar2 = strlen((char *)pbVar3);
                    *(size_t *)(pbVar3 + 0x5c) = sVar2;
                    if (pbVar25 == (byte *)0x0) {
                        pbVar3[0x4c] = 0;
                        pbVar3[0x4d] = 0;
                        pbVar3[0x4e] = 0;
                        pbVar3[0x4f] = 0;
                        pbVar3[0x48] = 0;
                        pbVar3[0x49] = 0;
                        pbVar3[0x4a] = 0;
                        pbVar3[0x4b] = 0;
                        DAT_0006a1c8 = pbVar3;
                        pvVar7 = malloc(0x2c);
                        *(void **)(pbVar3 + 0x44) = pvVar7;
                        if (pvVar7 == (void *)0x0)
                            goto LAB_00039774;
                        memset(pvVar7, 0, 0x2c);
                        *(byte **)(*(int *)(pbVar3 + 0x44) + 0x10) =
                            pbVar3 + 0x44;
                        *(undefined4 *)(*(int *)(pbVar3 + 0x44) + 4) = 0x20;
                        *(undefined4 *)(*(int *)(pbVar3 + 0x44) + 8) = 5;
                        *(undefined4 *)(*(int *)(pbVar3 + 0x44) + 0x14) = 0x44;
                        puVar13 = *(undefined4 **)(pbVar3 + 0x44);
                        pvVar7 = malloc(0x180);
                        *puVar13 = pvVar7;
                        if ((void *)**(undefined4 **)(pbVar3 + 0x44) ==
                            (void *)0x0)
                            goto LAB_00039774;
                        memset((void *)**(undefined4 **)(pbVar3 + 0x44), 0,
                               0x180);
                        *(undefined4 *)(*(int *)(pbVar3 + 0x44) + 0x28) =
                            0xa0111fe1;
                        pbVar25 = pbVar3;
                    } else {
                        uVar20 = *(undefined4 *)(pbVar25 + 0x44);
                        pbVar3[0x4c] = 0;
                        pbVar3[0x4d] = 0;
                        pbVar3[0x4e] = 0;
                        pbVar3[0x4f] = 0;
                        *(undefined4 *)(pbVar3 + 0x44) = uVar20;
                        *(int *)(pbVar3 + 0x48) =
                            *(int *)(*(int *)(pbVar25 + 0x44) + 0x10) -
                            *(int *)(*(int *)(pbVar25 + 0x44) + 0x14);
                        *(byte **)(*(int *)(*(int *)(pbVar25 + 0x44) + 0x10) +
                                   8) = pbVar3;
                        *(byte **)(*(int *)(pbVar25 + 0x44) + 0x10) =
                            pbVar3 + 0x44;
                    }
                    *(int *)(*(int *)(pbVar25 + 0x44) + 0xc) =
                        *(int *)(*(int *)(pbVar25 + 0x44) + 0xc) + 1;
                    iVar23 =
                        (uVar31 & (*(int **)(pbVar25 + 0x44))[1] - 1U) * 0xc;
                    iVar28 = **(int **)(pbVar25 + 0x44) + iVar23;
                    *(int *)(iVar28 + 4) = *(int *)(iVar28 + 4) + 1;
                    uVar20 =
                        *(undefined4 *)(**(int **)(pbVar25 + 0x44) + iVar23);
                    pbVar3[0x50] = 0;
                    pbVar3[0x51] = 0;
                    pbVar3[0x52] = 0;
                    pbVar3[0x53] = 0;
                    *(undefined4 *)(pbVar3 + 0x54) = uVar20;
                    iVar28 = **(int **)(pbVar25 + 0x44);
                    if (*(int *)(iVar28 + iVar23) != 0) {
                        *(byte **)(*(int *)(iVar28 + iVar23) + 0xc) =
                            pbVar3 + 0x44;
                        iVar28 = **(int **)(pbVar25 + 0x44);
                    }
                    *(byte **)(iVar28 + iVar23) = pbVar3 + 0x44;
                    if (((uint)((*(int *)(**(int **)(pbVar25 + 0x44) + iVar23 +
                                          8) +
                                 1) *
                                10) <=
                         *(uint *)(**(int **)(pbVar25 + 0x44) + iVar23 + 4)) &&
                        (*(int *)(*(int *)(pbVar3 + 0x44) + 0x24) != 1)) {
                        pvVar7 = calloc(
                            *(int *)(*(int *)(pbVar3 + 0x44) + 4) * 0x18, 1);
                        if (pvVar7 == (void *)0x0) {
                        LAB_00039774:
                            /* WARNING: Subroutine does not return */
                            exit(-1);
                        }
                        iVar23 = *(int *)(pbVar3 + 0x44);
                        *(uint *)(iVar23 + 0x18) =
                            (uint)((*(int *)(iVar23 + 4) * 2 - 1U &
                                    *(uint *)(iVar23 + 0xc)) != 0) +
                            (*(uint *)(iVar23 + 0xc) >>
                             (*(int *)(iVar23 + 8) + 1U & 0xff));
                        *(undefined4 *)(*(int *)(pbVar3 + 0x44) + 0x1c) = 0;
                        piVar11 = *(int **)(pbVar3 + 0x44);
                        uVar31 = piVar11[1];
                        if (uVar31 != 0) {
                            iVar23 = 0;
                            local_8a4 = 0;
                            do {
                                iVar28 = *(int *)(*piVar11 + iVar23);
                                if (*(int *)(*piVar11 + iVar23) != 0) {
                                    while (true) {
                                        iVar26 = *(int *)(iVar28 + 0x10);
                                        uVar27 = uVar31 * 2 - 1 &
                                                 *(uint *)(iVar28 + 0x1c);
                                        uVar31 = *(int *)((int)pvVar7 +
                                                          uVar27 * 0xc + 4) +
                                                 1;
                                        *(uint *)((int)pvVar7 + uVar27 * 0xc +
                                                  4) = uVar31;
                                        iVar15 = *(int *)(pbVar3 + 0x44);
                                        if (*(uint *)(iVar15 + 0x18) < uVar31) {
                                            *(int *)(iVar15 + 0x1c) =
                                                *(int *)(iVar15 + 0x1c) + 1;
                                            uVar20 = FUN_0004a4a0(
                                                *(undefined4 *)((int)pvVar7 +
                                                                uVar27 * 0xc +
                                                                4),
                                                *(undefined4
                                                      *)(*(int *)(pbVar3 +
                                                                  0x44) +
                                                         0x18));
                                            *(undefined4 *)((int)pvVar7 +
                                                            uVar27 * 0xc + 8) =
                                                uVar20;
                                        }
                                        *(undefined4 *)(iVar28 + 0xc) = 0;
                                        *(undefined4 *)(iVar28 + 0x10) =
                                            *(undefined4 *)((int)pvVar7 +
                                                            uVar27 * 0xc);
                                        iVar15 = *(int *)((int)pvVar7 +
                                                          uVar27 * 0xc);
                                        if (iVar15 != 0) {
                                            *(int *)(iVar15 + 0xc) = iVar28;
                                        }
                                        *(int *)((int)pvVar7 + uVar27 * 0xc) =
                                            iVar28;
                                        if (iVar26 == 0)
                                            break;
                                        uVar31 =
                                            *(uint *)(*(int *)(pbVar3 + 0x44) +
                                                      4);
                                        iVar28 = iVar26;
                                    }
                                    piVar11 = *(int **)(pbVar3 + 0x44);
                                    uVar31 = piVar11[1];
                                }
                                iVar23 = iVar23 + 0xc;
                                local_8a4 = local_8a4 + 1;
                            } while (local_8a4 < uVar31);
                        }
                        free((void *)*piVar11);
                        *(int *)(*(int *)(pbVar3 + 0x44) + 4) =
                            *(int *)(*(int *)(pbVar3 + 0x44) + 4) << 1;
                        *(int *)(*(int *)(pbVar3 + 0x44) + 8) =
                            *(int *)(*(int *)(pbVar3 + 0x44) + 8) + 1;
                        **(undefined4 **)(pbVar3 + 0x44) = pvVar7;
                        iVar23 = *(int *)(pbVar3 + 0x44);
                        if (*(uint *)(iVar23 + 0xc) >> 1 <
                            *(uint *)(iVar23 + 0x1c)) {
                            iVar28 = *(int *)(iVar23 + 0x20) + 1;
                        } else {
                            iVar28 = 0;
                        }
                        *(int *)(iVar23 + 0x20) = iVar28;
                        if (1 < *(uint *)(*(int *)(pbVar3 + 0x44) + 0x20)) {
                            *(undefined4 *)(*(int *)(pbVar3 + 0x44) + 0x24) = 1;
                        }
                    }
                    uVar27 = *(uint *)(param_1 + 0x48);
                    uVar31 = (0x1d - (uint) * (byte *)(param_1 + 0x48)) * 8;
                    if ((int)uVar31 < 8) {
                        uVar31 = 8;
                    }
                    dVar37 = (double)FUN_0004acd4(
                        0xffff << (uVar31 & 0xff),
                        0xffff << (uVar31 - 0x20 & 0xff) |
                            0xffffU >> (0x20 - uVar31 & 0xff));
                    dVar37 =
                        dVar37 /
                        (double)(longlong)(int)((uVar27 >> 8 & 0xff) << 0x10 |
                                                (uVar27 >> 0x10 & 0xff) << 8 |
                                                uVar27 >> 0x18);
                    if (dVar37 != DAT_000681e8) {
                        uVar38 = FUN_0004ada0(SUB84(dVar37, 0),
                                              (int)((ulonglong)dVar37 >> 0x20));
                        FUN_00028aa0((int)uVar38,
                                     (int)((ulonglong)uVar38 >> 0x20),
                                     &DAT_0006a1cc, 8, 0);
                        DAT_000681e8 = dVar37;
                        if (((DAT_00072d88 != '\0') ||
                             (DAT_000686e0 != '\0')) ||
                            (4 < DAT_00067858)) {
                            snprintf((char *)&local_830, 0x800,
                                     "Network diff set to %s", &DAT_0006a1cc);
                            FUN_0001dbec(5, &local_830, 0);
                        }
                    }
                    if (((local_8ac != 0) && (DAT_000686e1 != '\0')) &&
                        ((DAT_00072d88 != '\0' ||
                          ((DAT_000686e0 != '\0' || (6 < DAT_00067858)))))) {
                        snprintf((char *)&local_830, 0x800,
                                 "Deleted block %d from database", local_8ac);
                        FUN_0001dbec(7, &local_830, 0);
                    }
                    iVar23 = pthread_rwlock_unlock(
                        (pthread_rwlock_t *)&DAT_0006a1a8);
                    if (iVar23 == 0) {
                        (*DAT_0006797c)();
                        iVar23 = pthread_mutex_lock(
                            (pthread_mutex_t *)&DAT_00076108);
                        if (iVar23 == 0) {
                            iVar23 = pthread_rwlock_wrlock(
                                (pthread_rwlock_t *)&DAT_00076120);
                            if (iVar23 == 0) {
                                FUN_00020580(&DAT_00072dac);
                                strcpy(&DAT_000761dc, (char *)local_874);
                                FUN_000231cc(&DAT_0006a1d4, &local_894, 0x20,
                                             "cgminer.c", "set_curblock",
                                             0x15b4);
                                local_830 = DAT_00072dac;
                                iVar23 = DAT_00072db0 / 1000;
                                ptVar6 = localtime(&local_830);
                                puVar34 = (undefined *)ptVar6->tm_min;
                                snprintf(&DAT_0006a1f4, 0x20,
                                         "[%02d:%02d:%02d.%03d]",
                                         ptVar6->tm_hour, puVar34,
                                         ptVar6->tm_sec, iVar23);
                                iVar23 = pthread_rwlock_unlock(
                                    (pthread_rwlock_t *)&DAT_00076120);
                                if (iVar23 == 0) {
                                    iVar23 = pthread_mutex_unlock(
                                        (pthread_mutex_t *)&DAT_00076108);
                                    if (iVar23 == 0) {
                                        (*DAT_0006797c)();
                                        iVar23 = 0;
                                        pcVar14 = &DAT_000761dc;
                                        do {
                                            if (*pcVar14 != '0')
                                                break;
                                            iVar23 = iVar23 + 1;
                                            pcVar14 = pcVar14 + 1;
                                        } while (iVar23 != 0x39);
                                        strncpy(&DAT_0006a214,
                                                &DAT_000761dc + iVar23, 8);
                                        DAT_0006a21c = 0;
                                        if (((DAT_00072d88 != '\0') ||
                                             (DAT_000686e0 != '\0')) ||
                                            (5 < DAT_00067858)) {
                                            puVar34 = &DAT_0006a1cc;
                                            snprintf((char *)&local_830, 0x800,
                                                     "New block: %s... diff %s",
                                                     &DAT_000761dc,
                                                     &DAT_0006a1cc);
                                            FUN_0001dbec(6, &local_830, 0);
                                        }
                                        if (((local_8ac != 0) &&
                                             (DAT_000686e1 != '\0')) &&
                                            ((DAT_00072d88 != '\0' ||
                                              ((DAT_000686e0 != '\0' ||
                                                (6 < DAT_00067858)))))) {
                                            snprintf((char *)&local_830, 0x800,
                                                     "Deleted block %d from "
                                                     "database",
                                                     local_8ac, puVar34);
                                            FUN_0001dbec(7, &local_830, 0);
                                        }
                                        FUN_000231cc(puVar9 + 0x88, &local_894,
                                                     0x20, "cgminer.c",
                                                     "test_work_current",
                                                     0x1647);
                                        cVar16 = '\0';
                                        if (DAT_000761d0 == 1)
                                            goto LAB_0003837c;
                                        DAT_00068c94 = DAT_00068c94 + 1;
                                        *(int *)(param_1 + 0x150) =
                                            DAT_00068c94;
                                        if (*(char *)(param_1 + 0x118) ==
                                            '\0') {
                                            if (DAT_000762bc == '\0') {
                                                if (((*(char *)(puVar9 +
                                                                0xe5) ==
                                                      '\0') &&
                                                     (DAT_000686e1 != '\0')) &&
                                                    ((DAT_00072d88 != '\0' ||
                                                      ((DAT_000686e0 != '\0' ||
                                                        (6 <
                                                         DAT_00067858)))))) {
                                                    local_830._0_1_ = 'N';
                                                    local_830._1_1_ = 'e';
                                                    local_830._2_1_ = 'w';
                                                    local_830._3_1_ = ' ';
                                                    builtin_strncpy(
                                                        acStack_82c,
                                                        "block detect", 0xc);
                                                    local_820._0_1_ = 'e';
                                                    local_820._1_1_ = 'd';
                                                    local_820._2_1_ = ' ';
                                                    local_820._3_1_ = 'o';
                                                    builtin_strncpy(acStack_81c,
                                                                    "n networ",
                                                                    8);
                                                    local_814._0_2_ = 0x6b;
                                                    FUN_0001dbec(7, &local_830,
                                                                 0);
                                                }
                                            } else if (((*(char *)(puVar9 +
                                                                   0xe5) ==
                                                         '\0') &&
                                                        (DAT_000686e1 !=
                                                         '\0')) &&
                                                       ((DAT_00072d88 != '\0' ||
                                                         ((DAT_000686e0 !=
                                                               '\0' ||
                                                           (6 <
                                                            DAT_00067858)))))) {
                                                local_830._0_1_ = 'N';
                                                local_830._1_1_ = 'e';
                                                local_830._2_1_ = 'w';
                                                local_830._3_1_ = ' ';
                                                builtin_strncpy(acStack_82c,
                                                                "block detect",
                                                                0xc);
                                                local_820._0_1_ = 'e';
                                                local_820._1_1_ = 'd';
                                                local_820._2_1_ = ' ';
                                                local_820._3_1_ = 'o';
                                                builtin_strncpy(acStack_81c,
                                                                "n networ", 8);
                                                local_814._0_1_ = 'k';
                                                local_814._1_1_ = ' ';
                                                local_814._2_1_ = 'b';
                                                local_814._3_1_ = 'e';
                                                builtin_strncpy(
                                                    local_810,
                                                    "fore pool notificati",
                                                    0x14);
                                                uStack_7fc = 0x6e6f;
                                                local_7fa = 0;
                                                FUN_0001dbec(7, &local_830, 0);
                                            }
                                        } else if (*(char *)(param_1 + 0x11c) ==
                                                   '\0') {
                                            if ((DAT_000686e1 != '\0') &&
                                                (((DAT_00072d88 != '\0' ||
                                                   (DAT_000686e0 != '\0')) ||
                                                  (6 < DAT_00067858)))) {
                                                iVar23 =
                                                    **(int **)(param_1 + 0x104);
                                                pcVar14 =
                                                    "%sLONGPOLL from pool %d "
                                                    "detected new block";
                                                puVar21 = &DAT_0004d488;
                                                if (*(char *)(param_1 +
                                                              0x144) != '\0') {
                                                    puVar21 = &DAT_00053700;
                                                }
                                                goto LAB_00038ddc;
                                            }
                                        } else if ((DAT_000686e1 != '\0') &&
                                                   (((DAT_00072d88 != '\0' ||
                                                      (DAT_000686e0 != '\0')) ||
                                                     (6 < DAT_00067858)))) {
                                            pcVar14 =
                                                "Stratum from pool %d detected "
                                                "new block at height %d";
                                            puVar21 = (undefined1 *)*puVar9;
                                            iVar23 = local_898;
                                        LAB_00038ddc:
                                            snprintf((char *)&local_830, 0x800,
                                                     pcVar14, puVar21, iVar23);
                                            FUN_0001dbec(7, &local_830, 0);
                                        }
                                        FUN_0002c840();
                                        cVar16 = '\x01';
                                    LAB_0003837c:
                                        *(undefined1 *)(param_1 + 0x118) = 0;
                                        return cVar16;
                                    }
                                    piVar11 = __errno_location();
                                    iVar23 = *piVar11;
                                    pcVar14 = "WTF MUTEX ERROR ON UNLOCK! "
                                              "errno=%d in %s %s():%d";
                                } else {
                                    piVar11 = __errno_location();
                                    iVar23 = *piVar11;
                                    pcVar14 = "WTF RWLOCK ERROR ON UNLOCK! "
                                              "errno=%d in %s %s():%d";
                                }
                                snprintf((char *)&local_830, 0x800, pcVar14,
                                         iVar23, "cgminer.c", "set_curblock",
                                         0x15b6);
                                goto LAB_000390cc;
                            }
                            piVar11 = __errno_location();
                            iVar23 = *piVar11;
                            pcVar35 = "set_curblock";
                            uVar20 = 0x15b1;
                            pcVar14 = "WTF WRLOCK ERROR ON LOCK! errno=%d in "
                                      "%s %s():%d";
                        } else {
                            piVar11 = __errno_location();
                            iVar23 = *piVar11;
                            pcVar35 = "set_curblock";
                            uVar20 = 0x15b1;
                            pcVar14 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s "
                                      "%s():%d";
                        }
                    } else {
                    LAB_00039320:
                        piVar11 = __errno_location();
                        pcVar35 = "block_exists";
                        iVar23 = *piVar11;
                        uVar20 = 0x160e;
                        pcVar14 = "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s "
                                  "%s():%d";
                    }
                    snprintf((char *)&local_830, 0x800, pcVar14, iVar23,
                             "cgminer.c", pcVar35, uVar20);
                    goto LAB_000390cc;
                }
                piVar11 = __errno_location();
                iVar23 = *piVar11;
                pcVar14 = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
                pcVar35 = "test_work_current";
                uVar20 = 0x163f;
            } else {
                piVar11 = __errno_location();
                iVar23 = *piVar11;
                pcVar14 = "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d";
                pcVar35 = "test_work_current";
                uVar20 = 0x163f;
            }
        } else {
            piVar11 = __errno_location();
            pcVar35 = "test_work_current";
            iVar23 = *piVar11;
            uVar20 = 0x1637;
        LAB_000391d0:
            pcVar14 = "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d";
        }
    } else {
        piVar11 = __errno_location();
        iVar23 = *piVar11;
        pcVar14 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        pcVar35 = "test_work_current";
        uVar20 = 0x1637;
    }
    snprintf((char *)&local_830, 0x800, pcVar14, iVar23, "cgminer.c", pcVar35,
             uVar20);
LAB_000390cc:
    FUN_0001dbec(3, &local_830, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

/* WARNING: Globals starting with '_' overlap smaller symbols at the same
 * address */
/* WARNING: Restarted to delay deadcode elimination for space: ram */

undefined4 FUN_00039788(undefined4 *param_1)

{
    char cVar1;
    pthread_t __th;
    int iVar2;
    pthread_rwlock_t *__haystack;
    int *piVar3;
    int *piVar4;
    int iVar5;
    char *pcVar6;
    pthread_rwlock_t *ppVar7;
    time_t tVar8;
    size_t sVar9;
    undefined4 *puVar10;
    undefined4 uVar11;
    uint uVar12;
    char *__format;
    code *pcVar13;
    uint *puVar14;
    uint *puVar15;
    byte bVar16;
    uint uVar17;
    uint uVar18;
    uint extraout_r3;
    pthread_rwlock_t *__rwlock;
    undefined4 *unaff_r6;
    pthread_mutex_t *__mutex;
    int iVar19;
    int iVar20;
    uint *unaff_r11;
    bool bVar21;
    double dVar22;
    undefined4 *local_a8c;
    int *local_a80;
    int local_a78;
    code **local_a70;
    byte *local_a6c;
    pthread_rwlock_t *local_a68;
    timeval local_a64;
    char acStack_a5c[16];
    char local_a4c[20];
    ushort local_a38;
    undefined1 auStack_a36[30];
    char local_a18[4];
    undefined2 local_a14;
    undefined1 local_a12;
    undefined1 auStack_a11[29];
    char acStack_9f4[60];
    undefined4 uStack_9b8;
    fd_set local_9b4;
    undefined4 local_934[23];
    undefined1 auStack_8d8[160];
    uint local_838[8];
    char local_818[2020];

    __th = pthread_self();
    pthread_detach(__th);
    local_a8c = (undefined4 *)&DAT_000686e8;
    snprintf(acStack_a5c, 0x10, "%d/RStratum", *param_1);
    iVar19 = -0x60b6453a;
    iVar20 = -0x112410d;
    FUN_00022d78(acStack_a5c);
    do {
        cVar1 = *(char *)((int)param_1 + 0x69);
        while (true) {
            if (cVar1 != '\0') {
                FUN_00021218();
                return 0;
            }
            iVar2 = FUN_00020b3c(param_1);
            if ((iVar2 == 0) && (iVar2 = FUN_00030284(param_1), iVar2 == 0)) {
                FUN_00021218(param_1);
                FUN_000329fc(param_1);
                FUN_00031914(param_1);
                iVar2 = FUN_00030284(param_1);
                while (
                    (iVar2 == 0 &&
                     ((param_1[0x19] == 0 ||
                       ((puVar10 = (undefined4 *)FUN_0002fe54(),
                         param_1 != puVar10 && (1 < DAT_00068ae4 - 3U))))))) {
                    iVar2 =
                        pthread_mutex_lock((pthread_mutex_t *)&DAT_00068c00);
                    if (iVar2 != 0) {
                        piVar3 = __errno_location();
                        pcVar6 = "wait_lpcurrent";
                        iVar19 = *piVar3;
                        uVar11 = 0x26f4;
                        goto LAB_00039f14;
                    }
                    pthread_cond_wait((pthread_cond_t *)&DAT_00068c18,
                                      (pthread_mutex_t *)&DAT_00068c00);
                    iVar2 =
                        pthread_mutex_unlock((pthread_mutex_t *)&DAT_00068c00);
                    if (iVar2 != 0) {
                        piVar3 = __errno_location();
                        pcVar6 = "wait_lpcurrent";
                        iVar19 = *piVar3;
                        uVar11 = 0x26f6;
                        goto LAB_00039f94;
                    }
                    (*DAT_0006797c)();
                    iVar2 = FUN_00030284(param_1);
                }
                while (iVar2 = FUN_000262e8(param_1), unaff_r6 = local_a8c,
                       iVar2 == 0) {
                    FUN_000320c0(param_1);
                    if (*(char *)((int)param_1 + 0x69) != '\0') {
                        return 0;
                    }
                    FUN_000207b4(5000);
                }
            }
            puVar10 = &uStack_9b8;
            do {
                puVar10 = puVar10 + 1;
                *puVar10 = 0;
            } while (local_9b4.fds_bits + 0x1f != puVar10);
            uVar17 = param_1[0x93];
            local_a64.tv_usec = 0;
            local_a64.tv_sec = 0x5a;
            uVar12 = uVar17 + 0x1f;
            if (-1 < (int)uVar17) {
                uVar12 = uVar17;
            }
            uVar18 = uVar17 & 0x1f;
            if ((int)uVar17 < 1) {
                uVar18 = -(-uVar17 & 0x1f);
            }
            local_9b4.fds_bits[(int)uVar12 >> 5] =
                local_9b4.fds_bits[(int)uVar12 >> 5] | 1 << (uVar18 & 0xff);
            iVar2 = FUN_00020b3c(param_1);
            if ((iVar2 == 0) &&
                (iVar2 = select(param_1[0x93] + 1, &local_9b4, (fd_set *)0x0,
                                (fd_set *)0x0, &local_a64),
                 iVar2 < 1))
                break;
            __haystack = (pthread_rwlock_t *)FUN_00021730(param_1);
            if (__haystack == (pthread_rwlock_t *)0x0)
                goto LAB_000399dc;
            FUN_00030260(param_1);
            iVar2 = FUN_00027324(param_1, __haystack);
            if (iVar2 == 0) {
                iVar2 = FUN_00047e20(__haystack, 0, local_934);
                if (iVar2 == 0) {
                    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                        (5 < DAT_00067858)) {
                        unaff_r11 = local_838;
                        snprintf((char *)unaff_r11, 0x800,
                                 "JSON decode failed(%d): %s", local_934[0],
                                 auStack_8d8);
                        FUN_0001dbec(6, unaff_r11, 0);
                    }
                } else {
                    local_a80 = (int *)FUN_00048cc4(iVar2, "result");
                    piVar3 = (int *)FUN_00048cc4(iVar2, "error");
                    piVar4 = (int *)FUN_00048cc4(iVar2, &DAT_0004b108);
                    if ((piVar4 == (int *)0x0) || (*piVar4 == 7)) {
                        if (piVar3 == (int *)0x0) {
                            pcVar6 = (char *)malloc(0x11);
                            if (pcVar6 != (char *)0x0) {
                                builtin_strncpy(pcVar6, "(unknown reason)",
                                                0x11);
                            }
                        } else {
                            pcVar6 = (char *)FUN_00045c3c(piVar3, 3);
                        }
                        if (((DAT_00072d88 != '\0') ||
                             (DAT_000686e0 != '\0')) ||
                            (5 < DAT_00067858)) {
                            unaff_r11 = local_838;
                            snprintf((char *)unaff_r11, 0x800,
                                     "JSON-RPC non method decode failed: %s",
                                     pcVar6);
                            FUN_0001dbec(6, unaff_r11, 0);
                        }
                        free(pcVar6);
                        iVar5 = *(int *)(iVar2 + 4);
                    } else {
                        iVar5 = FUN_00048cc4(local_a80, "version-rolling.mask");
                        puVar14 = unaff_r11;
                        if (((iVar5 == 0) &&
                             (pcVar6 = strstr(__haystack->__size,
                                              "mining.configure"),
                              pcVar6 == (char *)0x0)) &&
                            (pcVar6 = strstr(__haystack->__size,
                                             "mining.set_version_mask"),
                             pcVar6 == (char *)0x0)) {
                            ppVar7 = (pthread_rwlock_t *)FUN_00049454(piVar4);
                            local_a68 = ppVar7;
                            iVar5 = pthread_mutex_lock(
                                (pthread_mutex_t *)&DAT_00068c4c);
                            puVar14 = DAT_00068c64;
                            if (iVar5 == 0) {
                                uVar18 = (uint)(((uint)ppVar7 & 0xff0000ff) +
                                                0x112410d +
                                                ((uint)ppVar7 & 0xff0000) +
                                                (int)((uint)ppVar7 & 0xff00)) ^
                                         0x7f76d;
                                uVar17 = iVar19 - uVar18 ^ uVar18 << 8;
                                uVar12 =
                                    (iVar20 - uVar18) - uVar17 ^ uVar17 >> 0xd;
                                uVar18 =
                                    (uVar18 - uVar17) - uVar12 ^ uVar12 >> 0xc;
                                uVar17 =
                                    (uVar17 - uVar12) - uVar18 ^ uVar18 << 0x10;
                                uVar12 =
                                    (uVar12 - uVar18) - uVar17 ^ uVar17 >> 5;
                                uVar18 =
                                    (uVar18 - uVar17) - uVar12 ^ uVar12 >> 3;
                                uVar17 = (uVar17 - uVar12) - uVar18 ^ uVar18
                                                                          << 10;
                                uVar12 =
                                    (uVar12 - uVar18) - uVar17 ^ uVar17 >> 0xf;
                                ppVar7 =
                                    (pthread_rwlock_t *)((uint)ppVar7 & 0xff00);
                                if (DAT_00068c64 != (uint *)0x0) {
                                    __rwlock =
                                        (pthread_rwlock_t *)*DAT_00068c64;
                                    local_a70 =
                                        (code **)(__rwlock->__data).__lock;
                                    pcVar13 = local_a70
                                        [((__rwlock->__data).__nr_readers - 1 &
                                          uVar12) *
                                         3];
                                    ppVar7 = __rwlock;
                                    if (pcVar13 != (code *)0x0) {
                                        local_a6c =
                                            *(byte **)(__rwlock->__size + 0x14);
                                        unaff_r6 =
                                            (undefined4 *)-(int)local_a6c;
                                        do {
                                            __mutex = (pthread_mutex_t
                                                           *)(pcVar13 +
                                                              (int)unaff_r6);
                                            if (__mutex ==
                                                (pthread_mutex_t *)0x0)
                                                break;
                                            if (((uVar12 ==
                                                  *(uint *)((int)__mutex +
                                                            0x1c)) &&
                                                 (__mutex[1].__data.__lock ==
                                                  4)) &&
                                                (iVar5 =
                                                     memcmp((__mutex->__data)
                                                                .field5_0x14,
                                                            &local_a68, 4),
                                                 iVar5 == 0)) {
                                                uVar12 =
                                                    (__mutex->__data).__count;
                                                if (uVar12 == 0)
                                                    goto LAB_0003ac54;
                                                if (__mutex !=
                                                    (pthread_mutex_t
                                                         *)((__rwlock->__data)
                                                                .__nr_readers_queued +
                                                            (int)unaff_r6))
                                                    goto LAB_0003a1b8;
                                                goto LAB_0003acac;
                                            }
                                            pcVar13 = (code *)(__mutex->__data)
                                                          .__nusers;
                                            ppVar7 = __haystack;
                                            local_a78 = iVar20;
                                        } while (pcVar13 != (code *)0x0);
                                    }
                                }
                            } else {
                                FUN_0002ce38("parse_stratum_response", 0x1ca3);
                                __haystack = ppVar7;
                                iVar19 = iVar20;
                                iVar20 = local_a78;
                                puVar14 = unaff_r11;
                            }
                            iVar5 = pthread_mutex_unlock(
                                (pthread_mutex_t *)&DAT_00068c4c);
                            if (iVar5 != 0)
                                goto LAB_0003ac7c;
                            local_a70 = &DAT_0006797c;
                            (*DAT_0006797c)();
                            if (local_a80 == (int *)0x0)
                                goto LAB_00039b98;
                            __mutex = (pthread_mutex_t *)(param_1 + 0x35);
                            iVar5 = pthread_mutex_lock(__mutex);
                            if (iVar5 == 0) {
                                __rwlock = (pthread_rwlock_t *)(param_1 + 0x3b);
                                iVar5 = pthread_rwlock_rdlock(__rwlock);
                                if (iVar5 == 0) {
                                    iVar5 = pthread_mutex_unlock(__mutex);
                                    if (iVar5 != 0) {
                                        /* WARNING: Subroutine does not return
                                         */
                                        FUN_0002ce94("parse_stratum_response",
                                                     0x1cb7);
                                    }
                                    dVar22 = *(double *)(param_1 + 0x1cc);
                                    FUN_0002d9e0(__rwlock,
                                                 "parse_stratum_response",
                                                 0x1cb9);
                                    if (*local_a80 != 5) {
                                        if (((DAT_00072d88 != '\0') ||
                                             (DAT_000686e0 != '\0')) ||
                                            (4 < DAT_00067858)) {
                                            puVar14 = local_838;
                                            snprintf(
                                                (char *)puVar14, 0x800,
                                                "Rejected untracked stratum "
                                                "share from pool %d",
                                                *param_1);
                                            FUN_0001dbec(5, puVar14, 0);
                                        }
                                        iVar5 = pthread_mutex_lock(
                                            (pthread_mutex_t *)&DAT_00072d8c);
                                        if (iVar5 == 0) {
                                            bVar21 = 0xfffffffe < DAT_00074fb0;
                                            DAT_00074fb0 = DAT_00074fb0 + 1;
                                            uVar12 = param_1[4];
                                            DAT_00074fb4 =
                                                DAT_00074fb4 + (uint)bVar21;
                                            _DAT_00074fa8 =
                                                _DAT_00074fa8 + dVar22;
                                            param_1[4] = uVar12 + 1;
                                            *(double *)(param_1 + 0x14) =
                                                *(double *)(param_1 + 0x14) +
                                                dVar22;
                                            param_1[5] =
                                                param_1[5] +
                                                (uint)(0xfffffffe < uVar12);
                                            iVar5 = pthread_mutex_unlock(
                                                (pthread_mutex_t
                                                     *)&DAT_00072d8c);
                                            if (iVar5 != 0) {
                                                /* WARNING: Subroutine does not
                                                 * return */
                                                FUN_0002ce94(
                                                    "parse_stratum_response",
                                                    0x1cd1);
                                            }
                                            goto LAB_0003aafc;
                                        }
                                        goto LAB_0003ac3c;
                                    }
                                    if (((DAT_00072d88 != '\0') ||
                                         (DAT_000686e0 != '\0')) ||
                                        (4 < DAT_00067858)) {
                                        puVar14 = local_838;
                                        snprintf((char *)puVar14, 0x800,
                                                 "Accepted untracked stratum "
                                                 "share from pool %d",
                                                 *param_1);
                                        FUN_0001dbec(5, puVar14, 0);
                                    }
                                    iVar5 = pthread_mutex_lock(
                                        (pthread_mutex_t *)&DAT_00072d8c);
                                    if (iVar5 == 0) {
                                        bVar21 = 0xfffffffe < DAT_00072ee8;
                                        DAT_00072ee8 = DAT_00072ee8 + 1;
                                        DAT_00072eec =
                                            DAT_00072eec + (uint)bVar21;
                                        uVar12 = param_1[2];
                                        _DAT_00074f20 = _DAT_00074f20 + dVar22;
                                        *(double *)(param_1 + 0x12) =
                                            *(double *)(param_1 + 0x12) +
                                            dVar22;
                                        param_1[2] = uVar12 + 1;
                                        param_1[3] =
                                            param_1[3] +
                                            (uint)(0xfffffffe < uVar12);
                                        iVar5 = pthread_mutex_unlock(
                                            (pthread_mutex_t *)&DAT_00072d8c);
                                        if (iVar5 != 0) {
                                            /* WARNING: Subroutine does not
                                             * return */
                                            FUN_0002ce94(
                                                "parse_stratum_response",
                                                0x1cc6);
                                        }
                                    LAB_0003aafc:
                                        (*DAT_0006797c)();
                                        iVar5 = *(int *)(iVar2 + 4);
                                        unaff_r11 = puVar14;
                                        goto joined_r0x00039e1c;
                                    }
                                } else {
                                    FUN_0002df98("parse_stratum_response",
                                                 0x1cb7);
                                LAB_0003ac3c:
                                    FUN_0002ce38("parse_stratum_response",
                                                 0x1ccc);
                                }
                                FUN_0002ce38("parse_stratum_response", 0x1cc1);
                                uVar12 = extraout_r3;
                            LAB_0003ac54:
                                puVar15 = (uint *)(__mutex->__data).__owner;
                                if (puVar15 == (uint *)0x0) {
                                    free(local_a70);
                                    free((void *)*puVar14);
                                    DAT_00068c64 = puVar15;
                                } else {
                                    if (__mutex ==
                                        (pthread_mutex_t
                                             *)((__rwlock->__data)
                                                    .__nr_readers_queued +
                                                (int)unaff_r6)) {
                                    LAB_0003acac:
                                        (__rwlock->__data).__nr_readers_queued =
                                            (uint)(local_a6c + uVar12);
                                        uVar12 = (__mutex->__data).__count;
                                        if (uVar12 == 0) {
                                            puVar15 = (uint *)(__mutex->__data)
                                                          .__owner;
                                        } else {
                                            __rwlock =
                                                (pthread_rwlock_t *)*puVar14;
                                        LAB_0003a1b8:
                                            *(int *)(uVar12 +
                                                     (__rwlock->__data)
                                                         .__nr_writers_queued +
                                                     8) =
                                                (__mutex->__data).__owner;
                                            puVar15 = DAT_00068c64;
                                        }
                                    }
                                    DAT_00068c64 = puVar15;
                                    puVar14 = DAT_00068c64;
                                    piVar4 = (int *)*DAT_00068c64;
                                    if ((__mutex->__data).__owner != 0) {
                                        *(uint *)((__mutex->__data).__owner +
                                                  piVar4[5] + 4) =
                                            (__mutex->__data).__count;
                                        piVar4 = (int *)*puVar14;
                                    }
                                    iVar5 = (piVar4[1] - 1U &
                                             *(uint *)((int)__mutex + 0x1c)) *
                                            0xc;
                                    *(int *)(*piVar4 + iVar5 + 4) =
                                        *(int *)(*piVar4 + iVar5 + 4) + -1;
                                    if (*(pthread_mutex_t **)(*(int *)*puVar14 +
                                                              iVar5) ==
                                        __mutex) {
                                        *(uint *)(*(int *)*puVar14 + iVar5) =
                                            (__mutex->__data).__nusers;
                                    }
                                    uVar12 = (__mutex->__data).__nusers;
                                    if ((__mutex->__data).__kind != 0) {
                                        *(uint *)((__mutex->__data).__kind +
                                                  0x10) = uVar12;
                                        uVar12 = (__mutex->__data).__nusers;
                                    }
                                    if (uVar12 != 0) {
                                        *(int *)(uVar12 + 0xc) =
                                            (__mutex->__data).__kind;
                                    }
                                    *(int *)(*puVar14 + 0xc) =
                                        *(int *)(*puVar14 + 0xc) + -1;
                                }
                                param_1[0xbb] = param_1[0xbb] + -1;
                                iVar5 = pthread_mutex_unlock(
                                    (pthread_mutex_t *)&DAT_00068c4c);
                                if (iVar5 != 0) {
                                LAB_0003ac7c:
                                    /* WARNING: Subroutine does not return */
                                    FUN_0002ce94("parse_stratum_response",
                                                 0x1cab);
                                }
                                local_a6c = &DAT_000686e1;
                                (*DAT_0006797c)();
                                ppVar7 =
                                    *(pthread_rwlock_t **)((int)__mutex + 0x24);
                                tVar8 = time((time_t *)0x0);
                                iVar5 = tVar8 - __mutex[2].__data.__lock;
                                bVar16 = DAT_000686e1;
                                if (0 < iVar5) {
                                    bVar16 = DAT_000686e1 | 1;
                                }
                                unaff_r6 = (undefined4 *)0x0;
                                if ((bVar16 != 0) &&
                                    (((DAT_00072d88 != '\0' ||
                                       (DAT_000686e0 != '\0')) ||
                                      (5 < DAT_00067858)))) {
                                    snprintf(
                                        (char *)local_838, 0x800,
                                        "Pool %d stratum share result lag time "
                                        "%d seconds",
                                        **(undefined4 **)((int)ppVar7 + 0x104),
                                        iVar5);
                                    FUN_0001dbec(6, local_838, 0);
                                }
                            } else {
                                FUN_0002ce38("parse_stratum_response", 0x1cb7);
                            }
                            unaff_r11 = local_838;
                            uVar12 = *(uint *)((int)ppVar7 + 0xdc);
                            local_838[0] =
                                uVar12 << 0x18 | (uVar12 >> 8 & 0xff) << 0x10 |
                                (uVar12 >> 0x10 & 0xff) << 8 | uVar12 >> 0x18;
                            uVar12 = *(uint *)((int)ppVar7 + 0xd8);
                            local_838[1] =
                                uVar12 << 0x18 | (uVar12 >> 8 & 0xff) << 0x10 |
                                (uVar12 >> 0x10 & 0xff) << 8 | uVar12 >> 0x18;
                            uVar12 = *(uint *)((int)ppVar7 + 0xd4);
                            local_838[2] =
                                uVar12 << 0x18 | (uVar12 >> 8 & 0xff) << 0x10 |
                                (uVar12 >> 0x10 & 0xff) << 8 | uVar12 >> 0x18;
                            uVar12 = *(uint *)((int)ppVar7 + 0xd0);
                            local_838[3] =
                                uVar12 << 0x18 | (uVar12 >> 8 & 0xff) << 0x10 |
                                (uVar12 >> 0x10 & 0xff) << 8 | uVar12 >> 0x18;
                            uVar12 = *(uint *)((int)ppVar7 + 0xcc);
                            local_838[4] =
                                uVar12 << 0x18 | (uVar12 >> 8 & 0xff) << 0x10 |
                                (uVar12 >> 0x10 & 0xff) << 8 | uVar12 >> 0x18;
                            uVar12 = *(uint *)((int)ppVar7 + 200);
                            local_838[5] =
                                uVar12 << 0x18 | (uVar12 >> 8 & 0xff) << 0x10 |
                                (uVar12 >> 0x10 & 0xff) << 8 | uVar12 >> 0x18;
                            uVar12 = *(uint *)((int)ppVar7 + 0xc4);
                            local_838[6] =
                                uVar12 << 0x18 | (uVar12 >> 8 & 0xff) << 0x10 |
                                (uVar12 >> 0x10 & 0xff) << 8 | uVar12 >> 0x18;
                            uVar12 = ppVar7[6].__data.__lock;
                            local_838[7] =
                                uVar12 << 0x18 | (uVar12 >> 8 & 0xff) << 0x10 |
                                (uVar12 >> 0x10 & 0xff) << 8 | uVar12 >> 0x18;
                            puVar14 = unaff_r11;
                            do {
                                if ((char)*puVar14 != '\0')
                                    break;
                                unaff_r6 = (undefined4 *)((int)unaff_r6 + 1);
                                puVar14 = (uint *)((int)puVar14 + 1);
                            } while (unaff_r6 != (undefined4 *)0x1d);
                            uVar12 = *(uint *)((int)local_838 + (int)unaff_r6);
                            dVar22 = round(*(double *)((int)ppVar7 + 0x178));
                            FUN_0004ada0(SUB84(dVar22, 0),
                                         (int)((ulonglong)dVar22 >> 0x20));
                            FUN_00028aa0(*(undefined4 *)((int)ppVar7 + 0xe8),
                                         *(undefined4 *)((int)ppVar7 + 0xec),
                                         local_a18, 0x10, 0);
                            pcVar6 = local_a18;
                            snprintf(acStack_9f4, 0x40, "%08lx Diff %s/%llu%s",
                                     uVar12 << 0x18 |
                                         (uVar12 >> 8 & 0xff) << 0x10 |
                                         (uVar12 >> 0x10 & 0xff) << 8 |
                                         uVar12 >> 0x18,
                                     pcVar6);
                            unaff_r6 = *(undefined4 **)((int)ppVar7 + 0x104);
                            iVar5 = FUN_0002f964(ppVar7[8].__data.__lock);
                            local_a78 = *(int *)(iVar5 + 0x24);
                            if ((local_a80 == (int *)0x0) ||
                                ((*local_a80 != 5 &&
                                  ((*(char *)((int)ppVar7 + 0x144) == '\0' ||
                                    (*local_a80 != 7)))))) {
                                iVar5 = pthread_mutex_lock(
                                    (pthread_mutex_t *)&DAT_00072d8c);
                                if (iVar5 == 0) {
                                    *(int *)(local_a78 + 0x28) =
                                        *(int *)(local_a78 + 0x28) + 1;
                                    bVar21 = 0xfffffffe < DAT_00074fb0;
                                    DAT_00074fb0 = DAT_00074fb0 + 1;
                                    uVar12 = unaff_r6[4];
                                    DAT_00074fb4 = DAT_00074fb4 + (uint)bVar21;
                                    unaff_r6[4] = uVar12 + 1;
                                    unaff_r6[5] = unaff_r6[5] +
                                                  (uint)(0xfffffffe < uVar12);
                                    *(double *)(local_a78 + 0xd0) =
                                        *(double *)(local_a78 + 0xd0) +
                                        *(double *)((int)ppVar7 + 0x178);
                                    dVar22 = *(double *)((int)ppVar7 + 0x178);
                                    _DAT_00074fa8 = _DAT_00074fa8 + dVar22;
                                    unaff_r6[6] = unaff_r6[6] + 1;
                                    *(double *)(unaff_r6 + 0x14) =
                                        *(double *)(unaff_r6 + 0x14) + dVar22;
                                    iVar5 = pthread_mutex_unlock(
                                        (pthread_mutex_t *)&DAT_00072d8c);
                                    if (iVar5 != 0) {
                                        piVar3 = __errno_location();
                                        uVar11 = 0xe30;
                                        goto LAB_0003ad38;
                                    }
                                    (*DAT_0006797c)();
                                    if ((*local_a6c != 0) &&
                                        (((DAT_00072d88 != '\0' ||
                                           (DAT_000686e0 != '\0')) ||
                                          (6 < DAT_00067858)))) {
                                        local_838[0]._0_1_ = 'P';
                                        local_838[0]._1_1_ = 'R';
                                        local_838[0]._2_1_ = 'O';
                                        local_838[0]._3_1_ = 'O';
                                        local_838[1]._0_1_ = 'F';
                                        local_838[1]._1_1_ = ' ';
                                        local_838[1]._2_1_ = 'O';
                                        local_838[1]._3_1_ = 'F';
                                        local_838[2]._0_1_ = ' ';
                                        local_838[2]._1_1_ = 'W';
                                        local_838[2]._2_1_ = 'O';
                                        local_838[2]._3_1_ = 'R';
                                        local_838[3]._0_1_ = 'K';
                                        local_838[3]._1_1_ = ' ';
                                        local_838[3]._2_1_ = 'R';
                                        local_838[3]._3_1_ = 'E';
                                        local_838[4]._0_1_ = 'S';
                                        local_838[4]._1_1_ = 'U';
                                        local_838[4]._2_1_ = 'L';
                                        local_838[4]._3_1_ = 'T';
                                        local_838[5]._0_1_ = ':';
                                        local_838[5]._1_1_ = ' ';
                                        local_838[5]._2_1_ = 'f';
                                        local_838[5]._3_1_ = 'a';
                                        local_838[6]._0_1_ = 'l';
                                        local_838[6]._1_1_ = 's';
                                        local_838[6]._2_1_ = 'e';
                                        local_838[6]._3_1_ = ' ';
                                        local_838[7]._0_1_ = '(';
                                        local_838[7]._1_1_ = 'b';
                                        local_838[7]._2_1_ = 'o';
                                        local_838[7]._3_1_ = 'o';
                                        builtin_strncpy(local_818, "ooo)", 4);
                                        local_818[4] = 0;
                                        FUN_0001dbec(7, unaff_r11, 0);
                                    }
                                    cVar1 = DAT_000761c8;
                                    if ((DAT_0007622c == '\0') &&
                                        (DAT_000761c8 == '\0')) {
                                        local_a18[0] = 'r';
                                        local_a18[1] = 'e';
                                        local_a18[2] = 'j';
                                        local_a18[3] = 'e';
                                        local_a14 = 0x7463;
                                        local_a12 = 0;
                                        memset(auStack_a11, 0, 0x1d);
                                        local_a38 = local_a38 & 0xff00;
                                        if (DAT_00072e58 < 2) {
                                            local_a4c[0] = cVar1;
                                        } else {
                                            snprintf(
                                                local_a4c, 0x14, "pool %d",
                                                **(undefined4 **)((int)ppVar7 +
                                                                  0x104));
                                        }
                                        if (*(char *)((int)ppVar7 + 0x144) ==
                                            '\0') {
                                            local_a80 = (int *)FUN_00048cc4(
                                                iVar2, "reject-reason");
                                        }
                                        if (local_a80 == (int *)0x0) {
                                            if (piVar3 == (int *)0x0) {
                                                bVar16 = 0;
                                            } else {
                                                bVar16 = *(byte *)((int)ppVar7 +
                                                                   0x11c) &
                                                         1;
                                            }
                                            if (bVar16 != 0) {
                                                iVar5 = *piVar3;
                                                if (iVar5 == 1) {
                                                    piVar3 =
                                                        (int *)FUN_0004904c(
                                                            piVar3);
                                                    if (piVar3 == (int *)0x0)
                                                        goto LAB_0003a734;
                                                    iVar5 = *piVar3;
                                                }
                                                if (iVar5 == 2) {
                                                    uVar11 =
                                                        FUN_000491f8(piVar3);
                                                    snprintf((char *)&local_a38,
                                                             0x1f, " (%s)",
                                                             uVar11);
                                                }
                                            }
                                        } else {
                                            pcVar6 = (char *)FUN_000491f8();
                                            sVar9 = strlen(pcVar6);
                                            if (0x1b < sVar9) {
                                                sVar9 = 0x1c;
                                            }
                                            local_a38 = 0x2820;
                                            FUN_000231cc(auStack_a36, pcVar6,
                                                         sVar9, "cgminer.c",
                                                         "share_result", 0xe58);
                                            auStack_a36[sVar9] = 0x29;
                                            auStack_a36[sVar9 + 1] = 0;
                                            FUN_000231cc(auStack_a11, pcVar6,
                                                         sVar9, "cgminer.c",
                                                         "share_result", 0xe5d);
                                            local_a12 = 0x3a;
                                            auStack_a11[sVar9] = 0;
                                        }
                                    LAB_0003a734:
                                        if (((DAT_00072d88 != '\0') ||
                                             (DAT_000686e0 != '\0')) ||
                                            (4 < DAT_00067858)) {
                                            snprintf(
                                                (char *)unaff_r11, 0x800,
                                                "Rejected %s %s %d %s%s %s%s "
                                                "version 0x%x",
                                                acStack_9f4,
                                                *(undefined4
                                                      *)(*(int *)(local_a78 +
                                                                  4) +
                                                         8),
                                                *(undefined4 *)(local_a78 + 8),
                                                local_a4c, &local_a38,
                                                &DAT_0004d488, &DAT_0004d488,
                                                *(undefined4 *)((int)ppVar7 +
                                                                0x1bc));
                                            FUN_0001dbec(5, unaff_r11, 0);
                                        }
                                        FUN_000334c0(local_a18, ppVar7);
                                    }
                                    iVar5 = unaff_r6[6];
                                    if ((((10 < iVar5) &&
                                          (*(char *)((int)ppVar7 + 0x119) ==
                                           '\0')) &&
                                         (DAT_00072e90 != '\0')) &&
                                        ((1 < DAT_00074f1c &&
                                          (dVar22 = (double)FUN_0004ace4(
                                               DAT_00072ee8, DAT_00072eec),
                                           (dVar22 / _DAT_000681c0) * 60.0 *
                                                   3.0 <
                                               (double)(longlong)iVar5)))) {
                                        if ((DAT_00072d88 != '\0') ||
                                            ((DAT_000686e0 != '\0' ||
                                              (3 < DAT_00067858)))) {
                                            snprintf(
                                                (char *)unaff_r11, 0x800,
                                                "Pool %d rejected %d "
                                                "sequential shares, disabling!",
                                                *unaff_r6, iVar5);
                                            FUN_0001dbec(4, unaff_r11, 0);
                                        }
                                        if (unaff_r6[0x19] == 1) {
                                            DAT_00074f1c = DAT_00074f1c + -1;
                                        }
                                        unaff_r6[0x19] = 2;
                                        puVar10 = (undefined4 *)FUN_0002fe54();
                                        if (unaff_r6 == puVar10) {
                                            FUN_00031c3c(0);
                                        }
                                        unaff_r6[6] = 0;
                                    }
                                LAB_0003a90c:
                                    FUN_0002a9d4(
                                        (undefined *)((int)__mutex + 0x24),
                                        "cgminer.c", "parse_stratum_response",
                                        0x1cd8);
                                    free(__mutex);
                                    if (*(int *)(iVar2 + 4) != -1) {
                                        DataMemoryBarrier(0xb);
                                        piVar3 = (int *)(iVar2 + 4);
                                        do {
                                            iVar5 = *piVar3;
                                            bVar21 = (bool)hasExclusiveAccess(
                                                piVar3);
                                        } while (!bVar21);
                                        *piVar3 = iVar5 + -1;
                                        if (iVar5 + -1 == 0) {
                                            FUN_000495fc(iVar2);
                                        }
                                    }
                                    goto LAB_000398dc;
                                }
                                piVar3 = __errno_location();
                                uVar11 = 0xe28;
                                pcVar6 = "WTF MUTEX ERROR ON LOCK! errno=%d in "
                                         "%s %s():%d";
                            } else {
                                iVar5 = pthread_mutex_lock(
                                    (pthread_mutex_t *)&DAT_00072d8c);
                                if (iVar5 == 0) {
                                    bVar21 = 0xfffffffe < DAT_00072ee8;
                                    DAT_00072ee8 = DAT_00072ee8 + 1;
                                    DAT_00072eec = DAT_00072eec + (uint)bVar21;
                                    *(int *)(local_a78 + 0x24) =
                                        *(int *)(local_a78 + 0x24) + 1;
                                    uVar12 = unaff_r6[2];
                                    unaff_r6[2] = uVar12 + 1;
                                    unaff_r6[3] = unaff_r6[3] +
                                                  (uint)(0xfffffffe < uVar12);
                                    *(double *)(local_a78 + 200) =
                                        *(double *)(local_a78 + 200) +
                                        *(double *)((int)ppVar7 + 0x178);
                                    _DAT_00074f20 =
                                        _DAT_00074f20 +
                                        *(double *)((int)ppVar7 + 0x178);
                                    *(double *)(unaff_r6 + 0x12) =
                                        *(double *)(unaff_r6 + 0x12) +
                                        *(double *)((int)ppVar7 + 0x178);
                                    iVar5 = pthread_mutex_unlock(
                                        (pthread_mutex_t *)&DAT_00072d8c);
                                    if (iVar5 == 0) {
                                        (*DAT_0006797c)();
                                        unaff_r6[6] = 0;
                                        *(undefined4 *)(local_a78 + 0xd8) =
                                            *unaff_r6;
                                        tVar8 = time((time_t *)0x0);
                                        bVar16 = *local_a6c;
                                        *(time_t *)(local_a78 + 0xdc) = tVar8;
                                        *(undefined8 *)(local_a78 + 0xe0) = *(
                                            undefined8 *)((int)ppVar7 + 0x178);
                                        unaff_r6[0x58] = tVar8;
                                        uVar11 = *(undefined4 *)((int)ppVar7 +
                                                                 0x17c);
                                        unaff_r6[0x5a] = *(
                                            undefined4 *)((int)ppVar7 + 0x178);
                                        unaff_r6[0x5b] = uVar11;
                                        if ((bVar16 != 0) &&
                                            (((DAT_00072d88 != '\0' ||
                                               (DAT_000686e0 != '\0')) ||
                                              (6 < DAT_00067858)))) {
                                            local_838[0]._0_1_ = 'P';
                                            local_838[0]._1_1_ = 'R';
                                            local_838[0]._2_1_ = 'O';
                                            local_838[0]._3_1_ = 'O';
                                            local_838[1]._0_1_ = 'F';
                                            local_838[1]._1_1_ = ' ';
                                            local_838[1]._2_1_ = 'O';
                                            local_838[1]._3_1_ = 'F';
                                            local_838[2]._0_1_ = ' ';
                                            local_838[2]._1_1_ = 'W';
                                            local_838[2]._2_1_ = 'O';
                                            local_838[2]._3_1_ = 'R';
                                            local_838[3]._0_1_ = 'K';
                                            local_838[3]._1_1_ = ' ';
                                            local_838[3]._2_1_ = 'R';
                                            local_838[3]._3_1_ = 'E';
                                            local_838[4]._0_1_ = 'S';
                                            local_838[4]._1_1_ = 'U';
                                            local_838[4]._2_1_ = 'L';
                                            local_838[4]._3_1_ = 'T';
                                            local_838[5]._0_1_ = ':';
                                            local_838[5]._1_1_ = ' ';
                                            local_838[5]._2_1_ = 't';
                                            local_838[5]._3_1_ = 'r';
                                            local_838[6]._0_1_ = 'u';
                                            local_838[6]._1_1_ = 'e';
                                            local_838[6]._2_1_ = ' ';
                                            local_838[6]._3_1_ = '(';
                                            local_838[7]._0_1_ = 'y';
                                            local_838[7]._1_1_ = 'a';
                                            local_838[7]._2_1_ = 'y';
                                            local_838[7]._3_1_ = '!';
                                            builtin_strncpy(local_818, "!!)",
                                                            4);
                                            FUN_0001dbec(7, unaff_r11, 0);
                                        }
                                        if ((DAT_0007622c == '\0') &&
                                            (DAT_000761c8 == '\0')) {
                                            if (DAT_00072e58 < 2) {
                                                if ((*local_a6c != 0) &&
                                                    (((DAT_00072d88 != '\0' ||
                                                       (DAT_000686e0 !=
                                                        '\0')) ||
                                                      (6 < DAT_00067858)))) {
                                                    pcVar6 = *(
                                                        char *
                                                            *)(*(int *)(local_a78 +
                                                                        4) +
                                                               8);
                                                    snprintf(
                                                        (char *)unaff_r11,
                                                        0x800,
                                                        "Accepted %s %s %d "
                                                        "%s%s",
                                                        acStack_9f4, pcVar6,
                                                        *(undefined4
                                                              *)(local_a78 + 8),
                                                        &DAT_0004d488,
                                                        &DAT_0004d488);
                                                    FUN_0001dbec(7, unaff_r11,
                                                                 0);
                                                }
                                            } else if ((*local_a6c != 0) &&
                                                       (((DAT_00072d88 !=
                                                              '\0' ||
                                                          (DAT_000686e0 !=
                                                           '\0')) ||
                                                         (6 < DAT_00067858)))) {
                                                pcVar6 = *(
                                                    char *
                                                        *)(*(int *)(local_a78 +
                                                                    4) +
                                                           8);
                                                snprintf(
                                                    (char *)unaff_r11, 0x800,
                                                    "Accepted %s %s %d pool %d "
                                                    "%s%s",
                                                    acStack_9f4, pcVar6,
                                                    *(undefined4 *)(local_a78 +
                                                                    8),
                                                    **(undefined4 *
                                                           *)((int)ppVar7 +
                                                              0x104),
                                                    &DAT_0004d488,
                                                    &DAT_0004d488);
                                                FUN_0001dbec(7, unaff_r11, 0);
                                            }
                                        }
                                        FUN_000334c0("accept", ppVar7);
                                        if ((DAT_00068b60 != 0) &&
                                            ((double)(longlong)DAT_00068b60 <=
                                             _DAT_00074f20)) {
                                            if ((DAT_00072d88 != '\0') ||
                                                ((DAT_000686e0 != '\0' ||
                                                  (3 < DAT_00067858)))) {
                                                snprintf(
                                                    (char *)unaff_r11, 0x800,
                                                    "Successfully mined %d "
                                                    "accepted shares as "
                                                    "requested and exiting.",
                                                    DAT_00068b60, pcVar6);
                                                FUN_0001dbec(4, unaff_r11, 0);
                                            }
                                            FUN_0002c588();
                                        }
                                        if (unaff_r6[0x19] == 2) {
                                            if (((DAT_00072d88 != '\0') ||
                                                 (DAT_000686e0 != '\0')) ||
                                                (3 < DAT_00067858)) {
                                                snprintf((char *)unaff_r11,
                                                         0x800,
                                                         "Rejecting pool %d "
                                                         "now accepting "
                                                         "shares, re-enabling!",
                                                         *unaff_r6);
                                                FUN_0001dbec(4, unaff_r11, 0);
                                            }
                                            if (unaff_r6[0x19] != 1) {
                                                FUN_00029258(unaff_r6 + 0x19);
                                            }
                                            FUN_00031c3c(0);
                                        }
                                        if (*(char *)((int)ppVar7 + 0x11b) !=
                                            '\0') {
                                            FUN_0002c840();
                                        }
                                        goto LAB_0003a90c;
                                    }
                                    piVar3 = __errno_location();
                                    uVar11 = 0xdf3;
                                LAB_0003ad38:
                                    pcVar6 = "WTF MUTEX ERROR ON UNLOCK! "
                                             "errno=%d in %s %s():%d";
                                } else {
                                    piVar3 = __errno_location();
                                    uVar11 = 0xde9;
                                    pcVar6 = "WTF MUTEX ERROR ON LOCK! "
                                             "errno=%d in %s %s():%d";
                                }
                            }
                            snprintf((char *)unaff_r11, 0x800, pcVar6, *piVar3,
                                     "cgminer.c", "share_result", uVar11);
                            goto LAB_00039f34;
                        }
                    LAB_00039b98:
                        iVar5 = *(int *)(iVar2 + 4);
                        unaff_r11 = puVar14;
                    }
                joined_r0x00039e1c:
                    if (iVar5 != -1) {
                        DataMemoryBarrier(0xb);
                        piVar3 = (int *)(iVar2 + 4);
                        do {
                            iVar5 = *piVar3;
                            bVar21 = (bool)hasExclusiveAccess(piVar3);
                        } while (!bVar21);
                        *piVar3 = iVar5 + -1;
                        if (iVar5 + -1 == 0) {
                            FUN_000495fc(iVar2);
                        }
                    }
                }
                iVar2 = FUN_00020ed0(param_1, __haystack);
                if (iVar2 != 0)
                    goto LAB_000398dc;
                if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                    (5 < DAT_00067858)) {
                    unaff_r11 = local_838;
                    snprintf((char *)unaff_r11, 0x800,
                             "Unknown stratum msg: %s", __haystack);
                    FUN_0001dbec(6, unaff_r11, 0);
                }
            } else {
            LAB_000398dc:
                if (*(char *)(param_1 + 0xae) != '\0') {
                    local_838[0] = FUN_0002dbec();
                    *(undefined1 *)(param_1 + 0xae) = 0;
                    FUN_00033768(param_1, local_838[0]);
                    unaff_r11 = local_838;
                    *(undefined1 *)(local_838[0] + 0x118) = 1;
                    FUN_00037e30();
                    FUN_0002a9d4(unaff_r11, "cgminer.c", "stratum_rthread",
                                 0x1dd8);
                }
            }
            free(__haystack);
            cVar1 = *(char *)((int)param_1 + 0x69);
        }
        if (DAT_000686e1 != 0) {
            if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                (DAT_00067858 < 7))
                goto LAB_00039c6c;
            unaff_r11 = local_838;
            snprintf((char *)unaff_r11, 0x800,
                     "Stratum select failed on pool %d with value %d", *param_1,
                     iVar2);
            FUN_0001dbec(7, unaff_r11, 0);
        }
    LAB_000399dc:
        if ((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) {
        LAB_00039c6c:
            if (4 < DAT_00067858)
                goto LAB_000399f8;
        } else {
        LAB_000399f8:
            unaff_r11 = local_838;
            snprintf((char *)unaff_r11, 0x800,
                     "Stratum connection to pool %d interrupted", *param_1);
            FUN_0001dbec(5, unaff_r11, 0);
        }
        param_1[0x20] = param_1[0x20] + 1;
        DAT_00072f00 = DAT_00072f00 + 1;
        iVar2 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0x35));
        if (iVar2 != 0) {
            piVar3 = __errno_location();
            pcVar6 = "supports_resume";
            iVar19 = *piVar3;
            uVar11 = 0x1d62;
        LAB_00039f14:
            __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        LAB_00039f28:
            snprintf((char *)local_838, 0x800, __format, iVar19, "cgminer.c",
                     pcVar6, uVar11);
        LAB_00039f34:
            FUN_0001dbec(3, local_838, 1);
            /* WARNING: Subroutine does not return */
            FUN_0002c508(1);
        }
        iVar2 = pthread_rwlock_rdlock((pthread_rwlock_t *)(param_1 + 0x3b));
        if (iVar2 != 0) {
            piVar3 = __errno_location();
            iVar19 = *piVar3;
            __format = "WTF RDLOCK ERROR ON LOCK! errno=%d in %s %s():%d";
            pcVar6 = "supports_resume";
            uVar11 = 0x1d62;
            goto LAB_00039f28;
        }
        iVar2 = pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0x35));
        if (iVar2 != 0) {
            piVar3 = __errno_location();
            pcVar6 = "supports_resume";
            iVar19 = *piVar3;
            uVar11 = 0x1d62;
        LAB_00039f94:
            __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
            goto LAB_00039f28;
        }
        iVar5 = param_1[0xa3];
        iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x3b));
        if (iVar2 != 0) {
            piVar3 = __errno_location();
            pcVar6 = "supports_resume";
            iVar19 = *piVar3;
            __format = "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d";
            uVar11 = 0x1d64;
            goto LAB_00039f28;
        }
        (*DAT_0006797c)();
        if ((iVar5 == 0) || (DAT_00074f7c != '\0')) {
            FUN_000329fc(param_1);
        }
        FUN_00031914(param_1);
        puVar10 = (undefined4 *)FUN_0002fe54();
        if (param_1 == puVar10) {
            FUN_0002c840();
        }
        iVar2 = FUN_000262e8(param_1);
        while (iVar2 == 0) {
            FUN_000320c0(param_1);
            if (*(char *)((int)param_1 + 0x69) != '\0') {
                return 0;
            }
            FUN_000207b4(5000);
            iVar2 = FUN_000262e8(param_1);
        }
    } while (true);
}

/* WARNING: Restarted to delay deadcode elimination for space: ram */

void FUN_0003b220(int param_1)

{
    pthread_mutex_t *__mutex;
    int iVar1;
    uint uVar2;
    void *pvVar3;
    int *piVar4;
    uint uVar5;
    int iVar6;
    int iVar7;
    int iVar8;
    char *__format;
    uint uVar9;
    undefined4 uVar10;
    int iVar11;
    undefined4 *puVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;
    int iVar17;
    int iVar18;
    int iVar19;
    bool bVar20;
    uint local_834;
    char acStack_828[2052];

    if ((DAT_000686e1 != '\0') &&
        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
          (6 < DAT_00067858)))) {
        snprintf(acStack_828, 0x800, "Pushing work from pool %d to hash queue",
                 **(undefined4 **)(param_1 + 0x104));
        FUN_0001dbec(7, acStack_828, 0);
    }
    *(undefined4 *)(param_1 + 0x150) = DAT_00068c94;
    FUN_00037e30(param_1);
    __mutex = DAT_00068b20;
    *(int *)(*(int *)(param_1 + 0x104) + 0x44) =
        *(int *)(*(int *)(param_1 + 0x104) + 0x44) + 1;
    iVar1 = pthread_mutex_lock(__mutex);
    iVar15 = DAT_00068bfc;
    if (iVar1 == 0) {
        if ((*(char *)(param_1 + 0x111) == '\0') &&
            (*(int *)(param_1 + 0x114) != 0)) {
            DAT_00068c70 = DAT_00068c70 + 1;
        }
        iVar1 = DAT_00074f58;
        if (*(char *)(DAT_00074f58 + 8) == '\0') {
            bVar20 = DAT_00068bfc == 0;
            uVar2 = *(byte *)(param_1 + 0x154) + 0x112410d +
                        (uint) * (byte *)(param_1 + 0x157) * 0x1000000 +
                        (uint) * (byte *)(param_1 + 0x156) * 0x10000 +
                        (uint) * (byte *)(param_1 + 0x155) * 0x100 ^
                    0x7f76d;
            uVar9 = 0x9f49bac6 - uVar2 ^ uVar2 << 8;
            *(int *)(param_1 + 0x16c) = param_1 + 0x154;
            uVar5 = (-0x112410d - uVar2) - uVar9 ^ uVar9 >> 0xd;
            *(undefined4 *)(param_1 + 0x170) = 4;
            uVar2 = (uVar2 - uVar9) - uVar5 ^ uVar5 >> 0xc;
            uVar9 = (uVar9 - uVar5) - uVar2 ^ uVar2 << 0x10;
            uVar5 = (uVar5 - uVar2) - uVar9 ^ uVar9 >> 5;
            uVar2 = (uVar2 - uVar9) - uVar5 ^ uVar5 >> 3;
            uVar9 = (uVar9 - uVar5) - uVar2 ^ uVar2 << 10;
            uVar2 = (uVar5 - uVar2) - uVar9 ^ uVar9 >> 0xf;
            *(uint *)(param_1 + 0x174) = uVar2;
            if (bVar20) {
                *(undefined4 *)(param_1 + 0x160) = 0;
                *(undefined4 *)(param_1 + 0x15c) = 0;
                DAT_00068bfc = param_1;
                puVar12 = (undefined4 *)malloc(0x2c);
                *(undefined4 **)(param_1 + 0x158) = puVar12;
                if (puVar12 == (undefined4 *)0x0)
                    goto LAB_0003b9e0;
                memset(puVar12 + 3, 0, 0x20);
                puVar12[1] = 0x20;
                puVar12[4] = param_1 + 0x158;
                puVar12[2] = 5;
                puVar12[5] = 0x158;
                pvVar3 = calloc(0x180, 1);
                *puVar12 = pvVar3;
                if (pvVar3 == (void *)0x0)
                    goto LAB_0003b9e0;
                puVar12[10] = 0xa0111fe1;
                iVar15 = param_1;
            } else {
                uVar10 = *(undefined4 *)(iVar15 + 0x158);
                *(undefined4 *)(param_1 + 0x160) = 0;
                *(undefined4 *)(param_1 + 0x158) = uVar10;
                *(int *)(param_1 + 0x15c) =
                    *(int *)(*(int *)(iVar15 + 0x158) + 0x10) -
                    *(int *)(*(int *)(iVar15 + 0x158) + 0x14);
                *(int *)(*(int *)(*(int *)(iVar15 + 0x158) + 0x10) + 8) =
                    param_1;
                *(int *)(*(int *)(iVar15 + 0x158) + 0x10) = param_1 + 0x158;
                puVar12 = *(undefined4 **)(iVar15 + 0x158);
            }
            puVar12[3] = puVar12[3] + 1;
            iVar1 = ((*(int **)(iVar15 + 0x158))[1] - 1U & uVar2) * 0xc;
            iVar7 = **(int **)(iVar15 + 0x158) + iVar1;
            *(int *)(iVar7 + 4) = *(int *)(iVar7 + 4) + 1;
            uVar10 = *(undefined4 *)(**(int **)(iVar15 + 0x158) + iVar1);
            *(undefined4 *)(param_1 + 0x164) = 0;
            *(undefined4 *)(param_1 + 0x168) = uVar10;
            iVar7 = **(int **)(iVar15 + 0x158);
            if (*(int *)(iVar7 + iVar1) != 0) {
                *(int *)(*(int *)(iVar7 + iVar1) + 0xc) = param_1 + 0x158;
                iVar7 = **(int **)(iVar15 + 0x158);
            }
            *(int *)(iVar7 + iVar1) = param_1 + 0x158;
            iVar1 = **(int **)(DAT_00068bfc + 0x158) + iVar1;
            iVar15 = DAT_00068bfc;
            if ((*(uint *)(iVar1 + 4) <
                 (uint)((*(int *)(iVar1 + 8) + 1) * 10)) ||
                (iVar1 = *(int *)(param_1 + 0x158),
                 *(int *)(iVar1 + 0x24) == 1)) {
            LAB_0003b660:
                iVar1 = DAT_00074f58;
                iVar11 = iVar15 + 0x158;
                iVar7 = 1;
            LAB_0003b668:
                iVar6 = 0;
                uVar2 = 0;
                iVar13 = iVar11;
                iVar11 = 0;
            LAB_0003b678:
                uVar2 = uVar2 + 1;
                iVar19 = iVar7;
                if (iVar7 == 0) {
                    iVar8 = 0;
                    iVar16 = iVar13;
                } else {
                    iVar16 = *(int *)(iVar13 + 8);
                    if (iVar16 != 0) {
                        iVar18 = *(int *)(*(int *)(iVar15 + 0x158) + 0x14);
                        iVar16 = iVar16 + iVar18;
                        if (iVar16 != 0) {
                            iVar8 = 1;
                            while (iVar19 = iVar8, iVar8 != iVar7) {
                                iVar16 = *(int *)(iVar16 + 8);
                                iVar8 = iVar8 + 1;
                                iVar19 = iVar7;
                                if ((iVar16 == 0) ||
                                    (iVar16 = iVar16 + iVar18, iVar16 == 0))
                                    break;
                            }
                            goto LAB_0003b6d4;
                        }
                    }
                    iVar8 = 1;
                }
            LAB_0003b6d4:
                do {
                    iVar18 = iVar6;
                    if (iVar8 != 0)
                        goto LAB_0003b754;
                LAB_0003b6dc:
                    if (iVar19 == 0 || iVar16 == 0) {
                        iVar13 = iVar16;
                        if (iVar16 != 0)
                            goto LAB_0003b678;
                        if (iVar6 != 0) {
                            *(undefined4 *)(iVar6 + 8) = 0;
                        }
                        if ((1 < uVar2) &&
                            (iVar7 = iVar7 << 1, iVar6 = iVar11, iVar11 != 0))
                            goto LAB_0003b668;
                        *(int *)(*(int *)(iVar15 + 0x158) + 0x10) = iVar6;
                        DAT_00068bfc =
                            iVar11 - *(int *)(*(int *)(iVar15 + 0x158) + 0x14);
                        goto LAB_0003b870;
                    }
                    iVar18 = iVar6;
                    iVar6 = iVar16;
                    iVar17 = iVar8;
                    if (*(int *)(iVar16 + 8) != 0) {
                        iVar17 = *(int *)(iVar16 + 8) +
                                 *(int *)(*(int *)(iVar15 + 0x158) + 0x14);
                    }
                LAB_0003b700:
                    iVar16 = iVar17;
                    iVar19 = iVar19 + -1;
                    if (iVar18 == 0)
                        goto LAB_0003b7c4;
                    *(int *)(iVar18 + 8) =
                        iVar6 - *(int *)(*(int *)(iVar15 + 0x158) + 0x14);
                    if (iVar6 != 0) {
                        while (true) {
                            iVar18 = iVar18 -
                                     *(int *)(*(int *)(iVar15 + 0x158) + 0x14);
                            while (true) {
                                *(int *)(iVar6 + 4) = iVar18;
                                iVar18 = iVar6;
                                if (iVar8 == 0)
                                    goto LAB_0003b6dc;
                            LAB_0003b754:
                                iVar6 = iVar13;
                                iVar13 = iVar6;
                                if (iVar16 == 0 || iVar19 == 0) {
                                    if ((iVar6 != 0) &&
                                        (iVar13 = *(int *)(iVar6 + 8),
                                         iVar13 != 0)) {
                                        iVar13 =
                                            iVar13 +
                                            *(int *)(*(int *)(iVar15 + 0x158) +
                                                     0x14);
                                    }
                                } else {
                                    iVar14 = *(int *)(*(int *)(iVar15 + 0x158) +
                                                      0x14);
                                    if (0 < *(int *)(iVar6 + -iVar14 + 0x108) -
                                                *(int *)(iVar16 + -iVar14 +
                                                         0x108)) {
                                        iVar17 = *(int *)(iVar16 + 8);
                                        iVar6 = iVar16;
                                        if (iVar17 != 0) {
                                            iVar17 = iVar17 + iVar14;
                                        }
                                        goto LAB_0003b700;
                                    }
                                    if (iVar6 != 0) {
                                        if (*(int *)(iVar6 + 8) == 0) {
                                            iVar13 = 0;
                                        } else {
                                            iVar13 =
                                                *(int *)(iVar6 + 8) + iVar14;
                                        }
                                    }
                                }
                                iVar8 = iVar8 + -1;
                                if (iVar18 != 0)
                                    break;
                            LAB_0003b7c4:
                                iVar11 = iVar6;
                                if (iVar6 == 0)
                                    goto LAB_0003b6d4;
                                iVar18 = 0;
                            }
                            if (iVar6 == 0)
                                break;
                            *(int *)(iVar18 + 8) =
                                iVar6 -
                                *(int *)(*(int *)(iVar15 + 0x158) + 0x14);
                        }
                        *(undefined4 *)(iVar18 + 8) = 0;
                    }
                } while (true);
            }
            pvVar3 = calloc(*(int *)(iVar1 + 4) * 0x18, 1);
            if (pvVar3 == (void *)0x0) {
            LAB_0003b9e0:
                /* WARNING: Subroutine does not return */
                exit(-1);
            }
            iVar15 = 0;
            *(uint *)(iVar1 + 0x18) =
                (uint)((*(int *)(iVar1 + 4) * 2 - 1U &
                        *(uint *)(iVar1 + 0xc)) != 0) +
                (*(uint *)(iVar1 + 0xc) >> (*(int *)(iVar1 + 8) + 1U & 0xff));
            *(undefined4 *)(*(int *)(param_1 + 0x158) + 0x1c) = 0;
            piVar4 = *(int **)(param_1 + 0x158);
            uVar2 = piVar4[1];
            if (uVar2 != 0) {
                local_834 = 0;
                do {
                    iVar1 = *(int *)(*piVar4 + iVar15);
                    if (iVar1 != 0) {
                        while (true) {
                            iVar7 = *(int *)(iVar1 + 0x10);
                            uVar5 = uVar2 * 2 - 1 & *(uint *)(iVar1 + 0x1c);
                            uVar2 = *(int *)((int)pvVar3 + uVar5 * 0xc + 4) + 1;
                            *(uint *)((int)pvVar3 + uVar5 * 0xc + 4) = uVar2;
                            if ((uint)piVar4[6] < uVar2) {
                                piVar4[7] = piVar4[7] + 1;
                                uVar10 = FUN_0004a4a0(
                                    *(undefined4 *)((int)pvVar3 + uVar5 * 0xc +
                                                    4),
                                    *(undefined4 *)(*(int *)(param_1 + 0x158) +
                                                    0x18));
                                *(undefined4 *)((int)pvVar3 + uVar5 * 0xc + 8) =
                                    uVar10;
                            }
                            *(undefined4 *)(iVar1 + 0xc) = 0;
                            *(undefined4 *)(iVar1 + 0x10) =
                                *(undefined4 *)((int)pvVar3 + uVar5 * 0xc);
                            iVar11 = *(int *)((int)pvVar3 + uVar5 * 0xc);
                            if (iVar11 != 0) {
                                *(int *)(iVar11 + 0xc) = iVar1;
                            }
                            *(int *)((int)pvVar3 + uVar5 * 0xc) = iVar1;
                            piVar4 = *(int **)(param_1 + 0x158);
                            if (iVar7 == 0)
                                break;
                            uVar2 = piVar4[1];
                            iVar1 = iVar7;
                        }
                        uVar2 = piVar4[1];
                    }
                    iVar15 = iVar15 + 0xc;
                    local_834 = local_834 + 1;
                } while (local_834 < uVar2);
            }
            free((void *)*piVar4);
            *(int *)(*(int *)(param_1 + 0x158) + 4) =
                *(int *)(*(int *)(param_1 + 0x158) + 4) << 1;
            *(int *)(*(int *)(param_1 + 0x158) + 8) =
                *(int *)(*(int *)(param_1 + 0x158) + 8) + 1;
            **(undefined4 **)(param_1 + 0x158) = pvVar3;
            iVar15 = DAT_00068bfc;
            iVar1 = *(int *)(param_1 + 0x158);
            if (*(uint *)(iVar1 + 0xc) >> 1 < *(uint *)(iVar1 + 0x1c)) {
                iVar7 = *(int *)(iVar1 + 0x20) + 1;
            } else {
                iVar7 = 0;
            }
            *(int *)(iVar1 + 0x20) = iVar7;
            if (1 < *(uint *)(*(int *)(param_1 + 0x158) + 0x20)) {
                *(undefined4 *)(*(int *)(param_1 + 0x158) + 0x24) = 1;
            }
            iVar1 = DAT_00074f58;
            if (iVar15 != 0)
                goto LAB_0003b660;
        }
    LAB_0003b870:
        pthread_cond_broadcast((pthread_cond_t *)(iVar1 + 0x28));
        iVar15 = pthread_mutex_unlock(DAT_00068b20);
        if (iVar15 == 0) {
            (*DAT_0006797c)();
            return;
        }
        piVar4 = __errno_location();
        iVar15 = *piVar4;
        __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
        uVar10 = 0x16c3;
    } else {
        piVar4 = __errno_location();
        iVar15 = *piVar4;
        __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar10 = 0x16b1;
    }
    snprintf(acStack_828, 0x800, __format, iVar15, "cgminer.c", "hash_push",
             uVar10);
    FUN_0001dbec(3, acStack_828, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002c508(1);
}

/* WARNING: Globals starting with '_' overlap smaller symbols at the same
 * address */

void FUN_0003b9ec(void *param_1)

{
    int iVar1;
    int *piVar2;
    char *pcVar3;
    uint uVar4;
    undefined4 *puVar5;
    int iVar6;
    bool bVar7;
    undefined4 uVar8;
    void *local_81c[2];
    pthread_t pStack_814;
    char local_810[32];
    undefined2 local_7f0;
    undefined1 uStack_7ee;

    puVar5 = *(undefined4 **)((int)param_1 + 0x104);
    local_81c[0] = param_1;
    FUN_00020580((int)param_1 + 0x1b0);
    if (DAT_00068c48 != '\0') {
        iVar1 = FUN_0002f964(*(undefined4 *)((int)local_81c[0] + 0x100));
        iVar6 = *(int *)(iVar1 + 0x24);
        iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00072d8c);
        if (iVar1 == 0) {
            *(int *)(iVar6 + 0x24) = *(int *)(iVar6 + 0x24) + 1;
            bVar7 = 0xfffffffe < DAT_00072ee8;
            DAT_00072ee8 = DAT_00072ee8 + 1;
            DAT_00072eec = DAT_00072eec + (uint)bVar7;
            uVar4 = puVar5[2];
            puVar5[2] = uVar4 + 1;
            puVar5[3] = puVar5[3] + (uint)(0xfffffffe < uVar4);
            *(double *)(iVar6 + 200) = *(double *)(iVar6 + 200) +
                                       *(double *)((int)local_81c[0] + 0x178);
            _DAT_00074f20 =
                _DAT_00074f20 + *(double *)((int)local_81c[0] + 0x178);
            *(double *)(puVar5 + 0x12) = *(double *)(puVar5 + 0x12) +
                                         *(double *)((int)local_81c[0] + 0x178);
            iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00072d8c);
            if (iVar1 == 0) {
                (*DAT_0006797c)();
                if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                    (DAT_00067858 < 5)) {
                    return;
                }
                snprintf(local_810, 0x800,
                         "Accepted %s %d benchmark share nonce %08x",
                         *(undefined4 *)(*(int *)(iVar6 + 4) + 8),
                         *(undefined4 *)(iVar6 + 8),
                         *(undefined4 *)((int)local_81c[0] + 0x4c));
                FUN_0001dbec(5, local_810, 0);
                return;
            }
            piVar2 = __errno_location();
            iVar1 = *piVar2;
            pcVar3 = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
            uVar8 = 0x2228;
        } else {
            piVar2 = __errno_location();
            iVar1 = *piVar2;
            pcVar3 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
            uVar8 = 0x2221;
        }
        snprintf(local_810, 0x800, pcVar3, iVar1, "cgminer.c",
                 "submit_work_async", uVar8);
    LAB_0003bf54:
        FUN_0001dbec(3, local_810, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002c508(1);
    }
    iVar1 = FUN_00033ea4(local_81c[0], 1);
    if (iVar1 != 0) {
        if (DAT_000681fd == '\0') {
            if (*(char *)(puVar5 + 0x1a) == '\0') {
                if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                    (4 < DAT_00067858)) {
                    snprintf(local_810, 0x800,
                             "Pool %d stale share detected, discarding",
                             *puVar5);
                    FUN_0001dbec(5, local_810, 0);
                }
                FUN_000334c0("discard", local_81c[0]);
                iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00072d8c);
                if (iVar1 == 0) {
                    puVar5[0x1e] = puVar5[0x1e] + 1;
                    bVar7 = 0xfffffffe < DAT_000762c0;
                    DAT_000762c0 = DAT_000762c0 + 1;
                    _DAT_00072ef0 =
                        _DAT_00072ef0 + *(double *)((int)local_81c[0] + 0x178);
                    DAT_000762c4 = DAT_000762c4 + (uint)bVar7;
                    *(double *)(puVar5 + 0x16) =
                        *(double *)(puVar5 + 0x16) +
                        *(double *)((int)local_81c[0] + 0x178);
                    iVar1 =
                        pthread_mutex_unlock((pthread_mutex_t *)&DAT_00072d8c);
                    if (iVar1 == 0) {
                        (*DAT_0006797c)();
                        FUN_0002a9d4(local_81c, "cgminer.c",
                                     "submit_work_async", 0x2246);
                        return;
                    }
                    piVar2 = __errno_location();
                    iVar1 = *piVar2;
                    uVar8 = 0x2244;
                    pcVar3 =
                        "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
                } else {
                    piVar2 = __errno_location();
                    iVar1 = *piVar2;
                    uVar8 = 0x223d;
                    pcVar3 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
                }
                snprintf(local_810, 0x800, pcVar3, iVar1, "cgminer.c",
                         "submit_work_async", uVar8);
                goto LAB_0003bf54;
            }
            if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                (4 < DAT_00067858)) {
                snprintf(local_810, 0x800,
                         "Pool %d stale share detected, submitting as pool "
                         "requested",
                         *puVar5);
                FUN_0001dbec(5, local_810, 0);
            }
        } else if ((DAT_000686e1 != '\0') &&
                   (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
                     (6 < DAT_00067858)))) {
            snprintf(
                local_810, 0x800,
                "Pool %d stale share detected, submitting as user requested",
                *puVar5);
            FUN_0001dbec(7, local_810, 0);
        }
        *(undefined1 *)((int)local_81c[0] + 0x119) = 1;
    }
    if (*(char *)((int)local_81c[0] + 0x11c) == '\0') {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (4 < DAT_00067858)) {
            builtin_strncpy(local_810, "Pushing submit work to work thre",
                            0x20);
            local_7f0 = 0x6461;
            uStack_7ee = 0;
            FUN_0001dbec(5, local_810, 0);
        }
        iVar1 = pthread_create(&pStack_814, (pthread_attr_t *)0x0,
                               (__start_routine *)&LAB_000290e0, local_81c[0]);
        if (iVar1 == 0) {
            return;
        }
        builtin_strncpy(local_810, "Failed to create submit_work_thr", 0x20);
        uStack_7ee = 100;
        local_7f0 = 0x6165;
        FUN_0001dbec(3, local_810, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002c508(1);
    }
    if (DAT_000686e1 == '\0') {
    LAB_0003bcc8:
        iVar1 = puVar5[0xba];
        if (iVar1 != 0) {
        LAB_0003bcd8:
            iVar1 = FUN_0001ffb0(iVar1, local_81c[0]);
            if (iVar1 != 0) {
                return;
            }
        }
        if ((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0'))
            goto LAB_0003bbd0;
    LAB_0003bd10:
        builtin_strncpy(local_810, "Discarding work from removed poo", 0x20);
        local_7f0 = 0x6c;
        FUN_0001dbec(4, local_810, 0);
        if (puVar5[0xba] != 0)
            goto LAB_0003bbec;
        if ((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0'))
            goto LAB_0003c12c;
    } else {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (6 < DAT_00067858)) {
            snprintf(local_810, 0x800, "Pushing pool %d work to stratum queue",
                     *puVar5);
            FUN_0001dbec(7, local_810, 0);
            goto LAB_0003bcc8;
        }
        iVar1 = puVar5[0xba];
        if (iVar1 != 0)
            goto LAB_0003bcd8;
    LAB_0003bbd0:
        if (3 < DAT_00067858)
            goto LAB_0003bd10;
        if (puVar5[0xba] != 0)
            goto LAB_0003bbec;
    LAB_0003c12c:
        if (DAT_00067858 < 5)
            goto LAB_0003bbec;
    }
    snprintf(local_810, 0x800, "Pushing pool %d work to stratum queue",
             *puVar5);
    FUN_0001dbec(5, local_810, 0);
LAB_0003bbec:
    FUN_0002a9d4(local_81c, "cgminer.c", "submit_work_async", 0x2254);
    return;
}

int FUN_0003c140(int param_1, int param_2)

{
    int iVar1;
    undefined4 uVar2;
    char acStack_810[2048];

    FUN_000315f0(param_1 + 0x24);
    iVar1 = FUN_0001fcec(param_2 + 0xc0, param_2 + 0xa0);
    if (iVar1 == 0) {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (5 < DAT_00067858)) {
            snprintf(
                acStack_810, 0x800, "%s %s %d: Share above target",
                "submit_tested_work",
                *(undefined4 *)(*(int *)(*(int *)(param_1 + 0x24) + 4) + 8),
                *(undefined4 *)(*(int *)(param_1 + 0x24) + 8));
            FUN_0001dbec(6, acStack_810, 0);
        }
        return 0;
    }
    uVar2 = FUN_0002dbec();
    FUN_0002a8bc(uVar2, param_2, 0);
    FUN_0003b9ec(uVar2);
    return iVar1;
}

uint FUN_0003c22c(undefined4 param_1, int param_2, undefined4 param_3)

{
    uint uVar1;
    uint uVar2;

    uVar1 = FUN_0002bac0(param_1, param_3);
    if (uVar1 != 0) {
        *(undefined4 *)(param_2 + 0x4c) = param_3;
        FUN_00028ef8(param_2);
        if (*(int *)(param_2 + 0xdc) == 0) {
            FUN_0003c140(param_1, param_2);
            if (DAT_00072da8 == 0) {
                return uVar1;
            }
            uVar2 = (uint)DAT_00072e5c;
            if (uVar2 == 0) {
                return uVar1;
            }
            FUN_0002ab1c(param_2, param_3);
            return uVar2;
        }
    }
    FUN_00031004(param_1);
    return 0;
}

void FUN_0003c2c0(undefined4 param_1)

{
    undefined4 uVar1;

    uVar1 = FUN_0002dbec();
    FUN_0002a8bc(uVar1, param_1, 0);
    FUN_0003b9ec(uVar1);
    return;
}

undefined4 FUN_0003c2e8(undefined4 param_1, int param_2, undefined4 param_3)

{
    undefined4 uVar1;

    *(undefined4 *)(param_2 + 0x4c) = param_3;
    uVar1 = FUN_0002dbec();
    FUN_0002a8bc(uVar1, param_2, 0);
    FUN_0003b9ec(uVar1);
    return 1;
}

int FUN_0003c318(int param_1, undefined4 param_2, undefined4 param_3,
                 undefined4 param_4)

{
    int iVar1;
    int local_81c;
    char acStack_818[2052];

    local_81c = FUN_0002dbec();
    FUN_0002a8bc(local_81c, param_2, param_4);
    iVar1 = local_81c;
    *(undefined4 *)(local_81c + 0x4c) = param_3;
    FUN_00028ef8(local_81c);
    if (*(int *)(iVar1 + 0xdc) != 0) {
        FUN_0002a9d4(&local_81c, "cgminer.c", "submit_noffset_nonce", 0x23c5);
        FUN_00031004(param_1);
        return 0;
    }
    FUN_000315f0(param_1 + 0x24, local_81c);
    if ((DAT_00072da8 != 0) && (DAT_00072e5c != '\0')) {
        FUN_0002ab1c(local_81c, param_3);
    }
    iVar1 = FUN_0001fcec(local_81c + 0xc0, local_81c + 0xa0);
    if (iVar1 != 0) {
        FUN_0003b9ec(local_81c);
        return iVar1;
    }
    FUN_0002a9d4(&local_81c, "cgminer.c", "submit_noffset_nonce", 0x23d5);
    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
        (5 < DAT_00067858)) {
        snprintf(acStack_818, 0x800, "%s %d: Share above target",
                 *(undefined4 *)(*(int *)(*(int *)(param_1 + 0x24) + 4) + 8),
                 *(undefined4 *)(*(int *)(param_1 + 0x24) + 8));
        FUN_0001dbec(6, acStack_818, 0);
    }
    return 1;
}

void FUN_0003c4b4(undefined4 param_1)

{
    /* WARNING: Subroutine does not return */
    FUN_0002c508(param_1, 1);
}

uint FUN_0003c4c0(void *param_1, uint param_2, undefined4 param_3,
                  char *param_4, char *param_5)

{
    undefined4 uVar1;
    size_t sVar2;
    size_t sVar3;
    char *__s;

    uVar1 = FUN_00020a64(param_3, param_1);
    *(char **)((int)param_1 + 0xac) = param_4;
    *(undefined4 *)((int)param_1 + 0xa4) = uVar1;
    *(char **)((int)param_1 + 0xb0) = param_5;
    sVar2 = strlen(param_4);
    sVar3 = strlen(param_5);
    sVar2 = sVar2 + sVar3 + 2;
    __s = (char *)FUN_0001f708(sVar2, "cgminer.c", "add_pool_details", 0x2a88);
    *(char **)((int)param_1 + 0xa8) = __s;
    snprintf(__s, sVar2, "%s:%s", *(undefined4 *)((int)param_1 + 0xac),
             *(undefined4 *)((int)param_1 + 0xb0));
    *(undefined1 *)((int)param_1 + 0x11c) = 1;
    *(byte *)((int)param_1 + 0x6b) = (byte)param_2 ^ 1;
    *(undefined1 *)((int)param_1 + 0x61) = 1;
    if (*(int *)((int)param_1 + 100) != 1) {
        FUN_00029258((int)param_1 + 100);
    }
    pthread_create((pthread_t *)((int)param_1 + 0x118), (pthread_attr_t *)0x0,
                   FUN_00033230, param_1);
    if (param_2 == 0) {
        pthread_join(*(pthread_t *)((int)param_1 + 0x118), (void **)0x0);
        param_2 = (uint)DAT_00068a04;
    }
    return param_2;
}

void FUN_0003c5b4(int param_1)

{
    if (*(int *)(param_1 + 0xc) == 0) {
        *(undefined **)(param_1 + 0xc) = &DAT_00028610;
    }
    if (*(int *)(param_1 + 0x10) == 0) {
        *(undefined **)(param_1 + 0x10) = &DAT_000285ec;
    }
    if (*(int *)(param_1 + 0x14) == 0) {
        *(undefined **)(param_1 + 0x14) = &DAT_000285f0;
    }
    if (*(int *)(param_1 + 0x18) == 0) {
        *(undefined **)(param_1 + 0x18) = &DAT_0002a37c;
    }
    if (*(int *)(param_1 + 0x20) == 0) {
        *(undefined1 **)(param_1 + 0x20) = &LAB_000285f4;
    }
    if (*(int *)(param_1 + 0x2c) == 0) {
        *(undefined1 **)(param_1 + 0x2c) = &LAB_0002a384;
    }
    if (*(int *)(param_1 + 0x34) == 0) {
        *(undefined1 **)(param_1 + 0x34) = &LAB_0002a38c;
    }
    if (*(int *)(param_1 + 0x38) == 0) {
        *(undefined1 **)(param_1 + 0x38) = &LAB_00028608;
    }
    if (*(int *)(param_1 + 0x54) == 0) {
        *(undefined **)(param_1 + 0x54) = &DAT_0002a394;
    }
    if (*(int *)(param_1 + 0x58) == 0) {
        *(undefined **)(param_1 + 0x58) = &DAT_0002a398;
    }
    if (*(int *)(param_1 + 0x5c) == 0) {
        *(undefined **)(param_1 + 0x5c) = &DAT_0002a39c;
    }
    if (*(int *)(param_1 + 0x3c) == 0) {
        *(code **)(param_1 + 0x3c) = FUN_00035e2c;
    }
    if (*(int *)(param_1 + 0x4c) == 0) {
        *(undefined **)(param_1 + 0x4c) = &DAT_000285ec;
    }
    if (*(int *)(param_1 + 0x50) == 0) {
        *(undefined **)(param_1 + 0x50) = &DAT_000285ec;
    }
    if (*(int *)(param_1 + 0x48) == 0) {
        *(undefined1 **)(param_1 + 0x48) = &LAB_000285f4;
    }
    if (*(int *)(param_1 + 0x60) == 0) {
        *(undefined1 **)(param_1 + 0x60) = &LAB_0002861c;
    }
    if (*(double *)(param_1 + 0x68) == 0.0) {
        *(undefined4 *)(param_1 + 0x68) = 0;
        *(undefined4 *)(param_1 + 0x6c) = 0x3ff00000;
    }
    return;
}

/* WARNING: Control flow encountered bad instruction data */

void FUN_0003c7fc(int *param_1)

{
    int iVar1;
    int iVar2;

    param_1[8] = 0;
    iVar1 = pthread_rwlock_wrlock((pthread_rwlock_t *)&DAT_00074fb8);
    iVar2 = DAT_00074f60;
    if (iVar1 == 0) {
        *param_1 = DAT_0006a220;
        *(int **)(iVar2 + DAT_0006a220 * 4) = param_1;
        DAT_0006a220 = DAT_0006a220 + 1;
        iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00074fb8);
        if (iVar2 == 0) {
            (*DAT_0006797c)();
            if (DAT_00075008 == '\0') {
                DAT_00076220 = param_1[0x25] + DAT_00076220;
            } else {
                DAT_0006a224 = param_1[0x25] + DAT_0006a224;
            }
            iVar2 = pthread_rwlock_init((pthread_rwlock_t *)(param_1 + 0x50),
                                        (pthread_rwlockattr_t *)0x0);
            if (iVar2 != 0) {
                FUN_0002cd10("enable_device", 0x2c2f);
                /* WARNING: Bad instruction - Truncating control flow here */
                halt_baddata();
            }
            param_1[0x58] = 0;
            return;
        }
    } else {
        FUN_0002cddc("enable_device", 0x2c22);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002d984("enable_device", 0x2c24);
}

undefined4 FUN_0003c8e8(int param_1)

{
    size_t sVar1;
    int iVar2;
    time_t tVar3;
    void *pvVar4;
    int *piVar5;
    uint uVar6;
    undefined4 uVar7;
    uint uVar8;
    uint uVar9;
    byte *pbVar10;
    uint uVar11;
    int iVar12;
    undefined4 *puVar13;
    int iVar14;
    byte *pbVar15;
    int iVar16;
    byte *pbVar17;
    undefined4 *puVar18;
    uint uVar19;
    uint local_30;

    uVar11 = 0x9e3779b9;
    pbVar10 = *(byte **)(*(int *)(param_1 + 4) + 8);
    sVar1 = strlen((char *)pbVar10);
    uVar8 = 0xfeedbeef;
    uVar6 = uVar11;
    pbVar15 = pbVar10;
    for (uVar19 = sVar1; 0xb < uVar19; uVar19 = uVar19 - 0xc) {
        iVar12 = (uint)pbVar15[6] * 0x10000 + (uint)pbVar15[5] * 0x100 +
                 (uint)pbVar15[4] + (uint)pbVar15[7] * 0x1000000 + uVar6;
        uVar8 = (uint)pbVar15[10] * 0x10000 + (uint)pbVar15[9] * 0x100 +
                (uint)pbVar15[8] + (uint)pbVar15[0xb] * 0x1000000 + uVar8;
        uVar6 = ((((uint)pbVar15[2] * 0x10000 + (uint)pbVar15[1] * 0x100 +
                   (uint)*pbVar15 + (uint)pbVar15[3] * 0x1000000) -
                  iVar12) -
                 uVar8) +
                    uVar11 ^
                uVar8 >> 0xd;
        uVar11 = (iVar12 - uVar8) - uVar6 ^ uVar6 << 8;
        uVar9 = (uVar8 - uVar6) - uVar11 ^ uVar11 >> 0xd;
        uVar8 = (uVar6 - uVar11) - uVar9 ^ uVar9 >> 0xc;
        uVar6 = (uVar11 - uVar9) - uVar8 ^ uVar8 << 0x10;
        uVar9 = (uVar9 - uVar8) - uVar6 ^ uVar6 >> 5;
        uVar11 = (uVar8 - uVar6) - uVar9 ^ uVar9 >> 3;
        uVar6 = (uVar6 - uVar9) - uVar11 ^ uVar11 << 10;
        uVar8 = (uVar9 - uVar11) - uVar6 ^ uVar6 >> 0xf;
        pbVar15 = pbVar15 + 0xc;
    }
    uVar8 = sVar1 + uVar8;
    switch (uVar19) {
    case 0xb:
        uVar8 = uVar8 + (uint)pbVar15[10] * 0x1000000;
    case 10:
        uVar8 = uVar8 + (uint)pbVar15[9] * 0x10000;
    case 9:
        uVar8 = uVar8 + (uint)pbVar15[8] * 0x100;
    case 8:
        uVar6 = uVar6 + (uint)pbVar15[7] * 0x1000000;
    case 7:
        uVar6 = uVar6 + (uint)pbVar15[6] * 0x10000;
    case 6:
        uVar6 = uVar6 + (uint)pbVar15[5] * 0x100;
    case 5:
        uVar6 = uVar6 + pbVar15[4];
    case 4:
        uVar11 = uVar11 + (uint)pbVar15[3] * 0x1000000;
    case 3:
        uVar11 = uVar11 + (uint)pbVar15[2] * 0x10000;
    case 2:
        uVar11 = uVar11 + (uint)pbVar15[1] * 0x100;
    case 1:
        uVar11 = uVar11 + *pbVar15;
    }
    uVar11 = (uVar11 - uVar6) - uVar8 ^ uVar8 >> 0xd;
    uVar6 = (uVar6 - uVar8) - uVar11 ^ uVar11 << 8;
    uVar19 = (uVar8 - uVar11) - uVar6 ^ uVar6 >> 0xd;
    uVar8 = (uVar11 - uVar6) - uVar19 ^ uVar19 >> 0xc;
    uVar11 = (uVar6 - uVar19) - uVar8 ^ uVar8 << 0x10;
    uVar19 = (uVar19 - uVar8) - uVar11 ^ uVar11 >> 5;
    uVar6 = (uVar8 - uVar11) - uVar19 ^ uVar19 >> 3;
    uVar11 = (uVar11 - uVar19) - uVar6 ^ uVar6 << 10;
    uVar11 = (uVar19 - uVar6) - uVar11 ^ uVar11 >> 0xf;
    if (DAT_0006a228 != (byte *)0x0) {
        piVar5 = *(int **)(DAT_0006a228 + 8);
        iVar12 = *(int *)(*piVar5 + (piVar5[1] - 1U & uVar11) * 0xc);
        if (iVar12 != 0) {
            iVar16 = piVar5[5];
            do {
                iVar12 = iVar12 - iVar16;
                if (iVar12 == 0)
                    break;
                if (((*(uint *)(iVar12 + 0x24) == uVar11) &&
                     (*(size_t *)(iVar12 + 0x20) == sVar1)) &&
                    (iVar2 = memcmp(*(void **)(iVar12 + 0x1c), pbVar10, sVar1),
                     iVar2 == 0)) {
                    iVar16 = *(int *)(iVar12 + 4) + 1;
                    *(int *)(iVar12 + 4) = iVar16;
                    *(int *)(param_1 + 8) = iVar16;
                    goto LAB_0003cbc4;
                }
                iVar12 = *(int *)(iVar12 + 0x18);
            } while (iVar12 != 0);
        }
    }
    pbVar10 = (byte *)FUN_0001f708(0x28, "cgminer.c", "add_cgpu", 0x2c51);
    FUN_000231cc(pbVar10, *(undefined4 *)(*(int *)(param_1 + 4) + 8), 4,
                 "cgminer.c", "add_cgpu", 0x2c52);
    pbVar10[4] = 0;
    pbVar10[5] = 0;
    pbVar10[6] = 0;
    pbVar10[7] = 0;
    *(undefined4 *)(param_1 + 8) = 0;
    sVar1 = strlen((char *)pbVar10);
    uVar11 = 0x9e3779b9;
    uVar8 = 0xfeedbeef;
    uVar6 = uVar11;
    pbVar15 = pbVar10;
    for (uVar19 = sVar1; 0xb < uVar19; uVar19 = uVar19 - 0xc) {
        iVar12 = (uint)pbVar15[6] * 0x10000 + (uint)pbVar15[5] * 0x100 +
                 (uint)pbVar15[4] + (uint)pbVar15[7] * 0x1000000 + uVar6;
        uVar8 = (uint)pbVar15[10] * 0x10000 + (uint)pbVar15[9] * 0x100 +
                (uint)pbVar15[8] + (uint)pbVar15[0xb] * 0x1000000 + uVar8;
        uVar6 = ((((uint)pbVar15[2] * 0x10000 + (uint)pbVar15[1] * 0x100 +
                   (uint)*pbVar15 + (uint)pbVar15[3] * 0x1000000) -
                  iVar12) -
                 uVar8) +
                    uVar11 ^
                uVar8 >> 0xd;
        uVar11 = (iVar12 - uVar8) - uVar6 ^ uVar6 << 8;
        uVar8 = (uVar8 - uVar6) - uVar11 ^ uVar11 >> 0xd;
        uVar9 = (uVar6 - uVar11) - uVar8 ^ uVar8 >> 0xc;
        uVar6 = (uVar11 - uVar8) - uVar9 ^ uVar9 << 0x10;
        uVar8 = (uVar8 - uVar9) - uVar6 ^ uVar6 >> 5;
        uVar11 = (uVar9 - uVar6) - uVar8 ^ uVar8 >> 3;
        uVar6 = (uVar6 - uVar8) - uVar11 ^ uVar11 << 10;
        uVar8 = (uVar8 - uVar11) - uVar6 ^ uVar6 >> 0xf;
        pbVar15 = pbVar15 + 0xc;
    }
    uVar8 = sVar1 + uVar8;
    switch (uVar19) {
    case 0xb:
        uVar8 = uVar8 + (uint)pbVar15[10] * 0x1000000;
    case 10:
        uVar8 = uVar8 + (uint)pbVar15[9] * 0x10000;
    case 9:
        uVar8 = uVar8 + (uint)pbVar15[8] * 0x100;
    case 8:
        uVar6 = uVar6 + (uint)pbVar15[7] * 0x1000000;
    case 7:
        uVar6 = uVar6 + (uint)pbVar15[6] * 0x10000;
    case 6:
        uVar6 = uVar6 + (uint)pbVar15[5] * 0x100;
    case 5:
        uVar6 = uVar6 + pbVar15[4];
    case 4:
        uVar11 = uVar11 + (uint)pbVar15[3] * 0x1000000;
    case 3:
        uVar11 = uVar11 + (uint)pbVar15[2] * 0x10000;
    case 2:
        uVar11 = uVar11 + (uint)pbVar15[1] * 0x100;
    case 1:
        uVar11 = uVar11 + *pbVar15;
    default:
        *(byte **)(pbVar10 + 0x1c) = pbVar10;
        uVar19 = (uVar11 - uVar6) - uVar8 ^ uVar8 >> 0xd;
        uVar6 = (uVar6 - uVar8) - uVar19 ^ uVar19 << 8;
        uVar11 = (uVar8 - uVar19) - uVar6 ^ uVar6 >> 0xd;
        uVar8 = (uVar19 - uVar6) - uVar11 ^ uVar11 >> 0xc;
        uVar6 = (uVar6 - uVar11) - uVar8 ^ uVar8 << 0x10;
        uVar11 = (uVar11 - uVar8) - uVar6 ^ uVar6 >> 5;
        uVar8 = (uVar8 - uVar6) - uVar11 ^ uVar11 >> 3;
        uVar6 = (uVar6 - uVar11) - uVar8 ^ uVar8 << 10;
        puVar13 = (undefined4 *)((uVar11 - uVar8) - uVar6 ^ uVar6 >> 0xf);
        *(undefined4 **)(pbVar10 + 0x24) = puVar13;
        sVar1 = strlen((char *)pbVar10);
        pbVar15 = DAT_0006a228;
        *(size_t *)(pbVar10 + 0x20) = sVar1;
        if (pbVar15 == (byte *)0x0)
            goto LAB_0003d230;
        uVar7 = *(undefined4 *)(pbVar15 + 8);
        pbVar10[0x10] = 0;
        pbVar10[0x11] = 0;
        pbVar10[0x12] = 0;
        pbVar10[0x13] = 0;
        pbVar17 = pbVar10 + 8;
        *(undefined4 *)(pbVar10 + 8) = uVar7;
        *(int *)(pbVar10 + 0xc) = *(int *)(*(int *)(pbVar15 + 8) + 0x10) -
                                  *(int *)(*(int *)(pbVar15 + 8) + 0x14);
        *(byte **)(*(int *)(*(int *)(pbVar15 + 8) + 0x10) + 8) = pbVar10;
        *(byte **)(*(int *)(pbVar15 + 8) + 0x10) = pbVar17;
    }
    do {
        *(int *)(*(int *)(pbVar15 + 8) + 0xc) =
            *(int *)(*(int *)(pbVar15 + 8) + 0xc) + 1;
        iVar12 = ((*(int **)(pbVar15 + 8))[1] - 1U & (uint)puVar13) * 0xc;
        iVar16 = **(int **)(pbVar15 + 8) + iVar12;
        *(int *)(iVar16 + 4) = *(int *)(iVar16 + 4) + 1;
        uVar7 = *(undefined4 *)(**(int **)(pbVar15 + 8) + iVar12);
        pbVar10[0x14] = 0;
        pbVar10[0x15] = 0;
        pbVar10[0x16] = 0;
        pbVar10[0x17] = 0;
        *(undefined4 *)(pbVar10 + 0x18) = uVar7;
        iVar16 = **(int **)(pbVar15 + 8);
        if (*(int *)(iVar16 + iVar12) != 0) {
            *(byte **)(*(int *)(iVar16 + iVar12) + 0xc) = pbVar17;
            iVar16 = **(int **)(pbVar15 + 8);
        }
        *(byte **)(iVar16 + iVar12) = pbVar17;
        if (((uint)((*(int *)(**(int **)(pbVar15 + 8) + iVar12 + 8) + 1) *
                    10) <= *(uint *)(**(int **)(pbVar15 + 8) + iVar12 + 4)) &&
            (*(int *)(*(int *)(pbVar10 + 8) + 0x24) != 1)) {
            pvVar4 = calloc(*(int *)(*(int *)(pbVar10 + 8) + 4) * 0x18, 1);
            if (pvVar4 == (void *)0x0) {
            LAB_0003d2e8:
                /* WARNING: Subroutine does not return */
                exit(-1);
            }
            iVar12 = *(int *)(pbVar10 + 8);
            iVar16 = 0;
            *(uint *)(iVar12 + 0x18) =
                (uint)((*(int *)(iVar12 + 4) * 2 - 1U &
                        *(uint *)(iVar12 + 0xc)) != 0) +
                (*(uint *)(iVar12 + 0xc) >> (*(int *)(iVar12 + 8) + 1U & 0xff));
            *(undefined4 *)(*(int *)(pbVar10 + 8) + 0x1c) = 0;
            piVar5 = *(int **)(pbVar10 + 8);
            uVar11 = piVar5[1];
            if (uVar11 != 0) {
                local_30 = 0;
                do {
                    iVar12 = *(int *)(*piVar5 + iVar16);
                    if (iVar12 != 0) {
                        while (true) {
                            iVar14 = *(int *)(iVar12 + 0x10);
                            uVar6 = uVar11 * 2 - 1 & *(uint *)(iVar12 + 0x1c);
                            uVar11 =
                                *(int *)((int)pvVar4 + uVar6 * 0xc + 4) + 1;
                            *(uint *)((int)pvVar4 + uVar6 * 0xc + 4) = uVar11;
                            iVar2 = *(int *)(pbVar10 + 8);
                            if (*(uint *)(iVar2 + 0x18) < uVar11) {
                                *(int *)(iVar2 + 0x1c) =
                                    *(int *)(iVar2 + 0x1c) + 1;
                                uVar7 = FUN_0004a4a0(
                                    *(undefined4 *)((int)pvVar4 + uVar6 * 0xc +
                                                    4),
                                    *(undefined4 *)(*(int *)(pbVar10 + 8) +
                                                    0x18));
                                *(undefined4 *)((int)pvVar4 + uVar6 * 0xc + 8) =
                                    uVar7;
                            }
                            *(undefined4 *)(iVar12 + 0xc) = 0;
                            *(undefined4 *)(iVar12 + 0x10) =
                                *(undefined4 *)((int)pvVar4 + uVar6 * 0xc);
                            iVar2 = *(int *)((int)pvVar4 + uVar6 * 0xc);
                            if (iVar2 != 0) {
                                *(int *)(iVar2 + 0xc) = iVar12;
                            }
                            *(int *)((int)pvVar4 + uVar6 * 0xc) = iVar12;
                            piVar5 = *(int **)(pbVar10 + 8);
                            if (iVar14 == 0)
                                break;
                            uVar11 = piVar5[1];
                            iVar12 = iVar14;
                        }
                        uVar11 = piVar5[1];
                    }
                    iVar16 = iVar16 + 0xc;
                    local_30 = local_30 + 1;
                } while (local_30 < uVar11);
            }
            free((void *)*piVar5);
            *(int *)(*(int *)(pbVar10 + 8) + 4) =
                *(int *)(*(int *)(pbVar10 + 8) + 4) << 1;
            *(int *)(*(int *)(pbVar10 + 8) + 8) =
                *(int *)(*(int *)(pbVar10 + 8) + 8) + 1;
            **(undefined4 **)(pbVar10 + 8) = pvVar4;
            iVar12 = *(int *)(pbVar10 + 8);
            if (*(uint *)(iVar12 + 0xc) >> 1 < *(uint *)(iVar12 + 0x1c)) {
                iVar16 = *(int *)(iVar12 + 0x20) + 1;
            } else {
                iVar16 = 0;
            }
            *(int *)(iVar12 + 0x20) = iVar16;
            if (1 < *(uint *)(*(int *)(pbVar10 + 8) + 0x20)) {
                *(undefined4 *)(*(int *)(pbVar10 + 8) + 0x24) = 1;
            }
        }
    LAB_0003cbc4:
        iVar12 = pthread_rwlock_wrlock((pthread_rwlock_t *)&DAT_00074fb8);
        if (iVar12 != 0) {
            FUN_0002cddc("add_cgpu", 0x2c57);
        LAB_0003d218:
            /* WARNING: Subroutine does not return */
            FUN_0002d984("add_cgpu", 0x2c59);
        }
        puVar13 = &DAT_00074fd8;
        pbVar15 = (byte *)&DAT_00074f60;
        DAT_00074f60 =
            FUN_0001f820(DAT_00074f60, (DAT_00074fd8 + DAT_0006a22c + 2) * 4,
                         "cgminer.c", "add_cgpu", 0x2c58);
        iVar12 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00074fb8);
        if (iVar12 != 0)
            goto LAB_0003d218;
        pbVar10 = (byte *)&DAT_0006797c;
        (*DAT_0006797c)();
        iVar12 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00072d8c);
        if (iVar12 == 0) {
            tVar3 = time((time_t *)0x0);
            *(time_t *)(param_1 + 0xe8) = tVar3;
            iVar12 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00072d8c);
            if (iVar12 != 0) {
                /* WARNING: Subroutine does not return */
                FUN_0002ce94("add_cgpu", 0x2c5d);
            }
            (*DAT_0006797c)();
            if (DAT_00075008 == '\0') {
                iVar12 = DAT_00074fd8;
                DAT_00074fd8 = DAT_00074fd8 + 1;
            } else {
                iVar12 = DAT_0006a22c + DAT_00074fd8;
                DAT_0006a22c = DAT_0006a22c + 1;
            }
            *(int *)(DAT_00074f60 + iVar12 * 4) = param_1;
            if (DAT_0006a230 < DAT_00074fd8 - DAT_00076064) {
                DAT_0006a230 = DAT_00074fd8 - DAT_00076064;
            }
            return 1;
        }
        FUN_0002ce38("add_cgpu", 0x2c5b);
    LAB_0003d230:
        *(byte **)(pbVar10 + 0x10) = pbVar15;
        *(byte **)(pbVar10 + 0xc) = pbVar15;
        DAT_0006a228 = pbVar10;
        pvVar4 = malloc(0x2c);
        *(void **)(pbVar10 + 8) = pvVar4;
        if (pvVar4 == (void *)0x0)
            goto LAB_0003d2e8;
        memset(pvVar4, (int)pbVar15, 0x2c);
        pbVar17 = pbVar10 + 8;
        *(byte **)(*(int *)pbVar17 + 0x10) = pbVar17;
        *(undefined4 *)(*(int *)(pbVar10 + 8) + 4) = 0x20;
        *(undefined4 *)(*(int *)(pbVar10 + 8) + 8) = 5;
        *(undefined4 *)(*(int *)(pbVar10 + 8) + 0x14) = 8;
        puVar18 = *(undefined4 **)(pbVar10 + 8);
        pvVar4 = malloc(0x180);
        *puVar18 = pvVar4;
        if ((void *)**(undefined4 **)(pbVar10 + 8) == (void *)0x0)
            goto LAB_0003d2e8;
        memset((void *)**(undefined4 **)(pbVar10 + 8), (int)pbVar15, 0x180);
        *(undefined4 *)(*(int *)(pbVar10 + 8) + 0x28) = 0xa0111fe1;
        pbVar15 = pbVar10;
    } while (true);
}

int FUN_0003d2f4(undefined4 param_1)

{
    int iVar1;

    iVar1 = FUN_0001f708(0x78, "cgminer.c", "copy_drv", 0x2c75);
    FUN_000231cc(iVar1, param_1, 0x78, "cgminer.c", "copy_drv", 0x2c76);
    *(undefined1 *)(iVar1 + 100) = 1;
    return iVar1;
}

void FUN_0003d358(void)

{
    int iVar1;
    int *piVar2;
    char *pcVar3;
    sysinfo local_948;
    char acStack_908[256];
    char acStack_808[2048];

    iVar1 = sysinfo(&local_948);
    if (iVar1 != 0) {
        piVar2 = __errno_location();
        iVar1 = *piVar2;
        pcVar3 = strerror(iVar1);
        sprintf(acStack_808, "Failed to get sysinfo, errno:%u, reason:%s\n",
                iVar1, pcVar3);
        DAT_0007618c = time((time_t *)0x0);
        DAT_000761cc = DAT_0007618c + 1;
        return;
    }
    DAT_000761cc = local_948.uptime + 1;
    DAT_0007618c = local_948.uptime;
    sprintf(
        acStack_908,
        "set_start_time_point total_tv_start_sys=%ld total_tv_end_sys=%ld\n",
        local_948.uptime, DAT_000761cc);
    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
        (4 < DAT_00067858)) {
        snprintf(acStack_808, 0x800, "%s", acStack_908);
        FUN_0001dbec(5, acStack_808, 0);
    }
    return;
}

/* WARNING: Restarted to delay deadcode elimination for space: ram */

void FUN_0003d468(void)

{
    pthread_t __th;
    size_t sVar1;
    int iVar2;
    byte bVar3;
    int iVar4;
    int iVar5;
    int iVar6;
    int iVar7;
    undefined4 *puVar8;
    bool bVar9;
    pthread_attr_t local_84c;
    char local_828[16];
    uint local_818;
    char acStack_814[8];
    ushort local_80c;
    undefined1 local_80a;

    __th = pthread_self();
    pthread_detach(__th);
    pthread_mutex_lock((pthread_mutex_t *)&DAT_0006a234);
    iVar2 = DAT_00072db8 + DAT_00068b68 * 0x40;
    bVar9 = *(int *)(iVar2 + 0xc) != 0;
    if (bVar9) {
        FUN_00023100(FUN_00020164, iVar2, 1000);
        usleep(100000);
    }
    if (DAT_00068a08 != (void *)0x0) {
        free(DAT_00068a08);
    }
    iVar2 = DAT_00072e58;
    if (0 < DAT_00072e58) {
        iVar4 = 0;
        do {
            if ((DAT_000686e1 != '\0') &&
                (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
                  (6 < DAT_00067858)))) {
                snprintf(
                    local_828, 0x800,
                    "before add pool, pool->pool_no = %d, pool->rpc_url = %s\n",
                    *(undefined4 *)DAT_00072efc[iVar4],
                    ((undefined4 *)DAT_00072efc[iVar4])[0x29]);
                FUN_0001dbec(7, local_828, 0);
            }
            iVar4 = iVar4 + 1;
        } while (iVar2 != iVar4);
    }
    FUN_0002b740();
    if (DAT_00072e58 == iVar2) {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (2 < DAT_00067858)) {
            builtin_strncpy(local_828, "Input pool error", 0x10);
            local_818._0_1_ = ',';
            local_818._1_1_ = ' ';
            local_818._2_1_ = 't';
            local_818._3_1_ = 'r';
            builtin_strncpy(acStack_814, "y again\n", 8);
            local_80c = local_80c & 0xff00;
            FUN_0001dbec(3, local_828, 0);
        }
        pthread_mutex_unlock((pthread_mutex_t *)&DAT_0006a234);
    } else {
        DAT_00068a04 = 0;
        iVar4 = DAT_00072e58;
        if (iVar2 < DAT_00072e58) {
            iVar7 = iVar2 << 2;
            iVar6 = iVar2;
            do {
                iVar5 = *(int *)((int)DAT_00072efc + iVar7);
                if (*(int *)(iVar5 + 100) != 1) {
                    FUN_00029258(iVar5 + 100);
                }
                iVar4 = DAT_00072e58;
                iVar6 = iVar6 + 1;
                *(undefined1 *)(iVar5 + 0x61) = 1;
                iVar7 = iVar7 + 4;
            } while (iVar6 < iVar4);
        }
        if ((DAT_000686e1 != '\0') &&
            (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
              (6 < DAT_00067858)))) {
            snprintf(local_828, 0x800,
                     "total_pools = %d, need to remove %d pools\n", iVar4,
                     iVar2);
            FUN_0001dbec(7, local_828, 0);
        }
        if (0 < DAT_00072e58) {
            iVar4 = 0;
            do {
                if ((DAT_000686e1 != '\0') &&
                    (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
                      (6 < DAT_00067858)))) {
                    snprintf(local_828, 0x800,
                             "after add pool, pool->pool_no = %d, "
                             "pool->rpc_url = %s\n",
                             *(undefined4 *)DAT_00072efc[iVar4],
                             ((undefined4 *)DAT_00072efc[iVar4])[0x29]);
                    FUN_0001dbec(7, local_828, 0);
                }
                iVar4 = iVar4 + 1;
            } while (iVar4 < DAT_00072e58);
        }
        if (0 < iVar2) {
            iVar4 = 0;
            do {
                iVar6 = *DAT_00072efc;
                iVar7 = FUN_0002fe54();
                if (iVar6 == iVar7) {
                    FUN_00031c3c(0);
                }
                iVar4 = iVar4 + 1;
                DAT_00074f1c = DAT_00074f1c + -1;
                DAT_00068b80 = DAT_00068b80 + -1;
                *(undefined4 *)(iVar6 + 100) = 0;
                DAT_00068b7c = DAT_00068b7c + -1;
                DAT_00068b88 = DAT_00068b88 + -1;
                FUN_0002af08(iVar6);
            } while (iVar2 != iVar4);
        }
        if ((DAT_000686e1 != '\0') &&
            (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
              (6 < DAT_00067858)))) {
            snprintf(local_828, 0x800, "total_pools after removed = %d\n",
                     DAT_00072e58);
            FUN_0001dbec(7, local_828, 0);
        }
        if (0 < DAT_00072e58) {
            iVar2 = 0;
            do {
                if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                    (4 < DAT_00067858)) {
                    snprintf(local_828, 0x800,
                             "after reload pool, pool->pool_no = %d, "
                             "pool->rpc_url = %s\n",
                             *(undefined4 *)DAT_00072efc[iVar2],
                             ((undefined4 *)DAT_00072efc[iVar2])[0x29]);
                    FUN_0001dbec(5, local_828, 0);
                }
                iVar2 = iVar2 + 1;
            } while (iVar2 < DAT_00072e58);
        }
        iVar2 = 0;
        FUN_00028fc4();
        do {
            iVar2 = iVar2 + 1;
            sleep(1);
            if (iVar2 == 8) {
                bVar3 = 0;
            } else {
                bVar3 = (DAT_00068a04 ^ 1) & 1;
            }
        } while (bVar3 != 0);
        FUN_0003d358();
        local_84c.__align = 0x6572;
        if ((DAT_000686e1 != '\0') &&
            (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
              (6 < DAT_00067858)))) {
            snprintf(local_828, 0x800, "pool change success, send %s",
                     &local_84c);
            FUN_0001dbec(7, local_828, 0);
        }
        sVar1 = strlen(local_84c.__size);
        FUN_00042848(&local_84c, sVar1);
        if (DAT_00068a04 == 0) {
            if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                (2 < DAT_00067858)) {
                builtin_strncpy(local_828, "error pool input", 0x10);
                local_818 = local_818 & 0xffffff00;
                FUN_0001dbec(3, local_828, 0);
            }
            if (0 < DAT_00072e58) {
                iVar2 = 0;
                do {
                    puVar8 = (undefined4 *)DAT_00072efc[iVar2];
                    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                        (2 < DAT_00067858)) {
                        snprintf(local_828, 0x800,
                                 "pool%d, url = %s, user = %s, pass = %s\n",
                                 *puVar8, puVar8[0x29], puVar8[0x2b],
                                 puVar8[0x2c]);
                        FUN_0001dbec(3, local_828, 0);
                    }
                    iVar2 = iVar2 + 1;
                } while (iVar2 < DAT_00072e58);
            }
        } else {
            DAT_0006a24c = 1;
        }
        DAT_0006a250 = 1;
        pthread_mutex_unlock((pthread_mutex_t *)&DAT_0006a234);
    }
    if (bVar9) {
        iVar4 = DAT_00072db8 + DAT_00068b68 * 0x40;
        pthread_attr_init(&local_84c);
        pthread_attr_setstacksize(&local_84c, 0x200000);
        iVar2 = FUN_00022e34(iVar4, &local_84c, FUN_000321f0, 0);
        if (iVar2 != 0) {
            builtin_strncpy(local_828, "watchpool thread", 0x10);
            local_818._0_1_ = ' ';
            local_818._1_1_ = 'c';
            local_818._2_1_ = 'r';
            local_818._3_1_ = 'e';
            builtin_strncpy(acStack_814, "ate fail", 8);
            local_80c = 0x6465;
            local_80a = 0;
            FUN_0001dbec(3, local_828, 1);
            /* WARNING: Subroutine does not return */
            FUN_0002c508(1, 0);
        }
        pthread_detach(*(pthread_t *)(iVar4 + 0xc));
    }
    sleep(1);
    DAT_00068ae0 = 0;
    return;
}

void FUN_0003dc58(void)

{
    FILE *__stream;
    size_t sVar1;
    char *pcVar2;
    char *pcVar3;
    char cVar4;
    char acStack_918[256];
    char acStack_818[2048];

    __stream = fopen64(DAT_000688f8, "rb");
    memset(acStack_918, 0, 0x100);
    if (__stream == (FILE *)0x0) {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (2 < DAT_00067858)) {
            snprintf(acStack_818, 0x800, "Open miner version file %s error",
                     DAT_000688f8);
            FUN_0001dbec(3, acStack_818, 0);
            goto LAB_0003de3c;
        }
    } else {
        sVar1 = fread(acStack_918, 1, 0x100, __stream);
        if ((int)sVar1 < 1) {
            if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
                (DAT_00067858 < 3))
                goto LAB_0003dea0;
            snprintf(acStack_818, 0x800, "Read miner version file %s error %d",
                     DAT_000688f8, sVar1);
            FUN_0001dbec(3, acStack_818, 0);
        } else {
            pcVar2 = strchr(acStack_918, 10);
            if (pcVar2 == (char *)0x0) {
                strcpy(&DAT_0006a254, acStack_918);
            } else {
                FUN_000231cc(&DAT_0006a254, acStack_918,
                             (int)pcVar2 - (int)acStack_918, "cgminer.c",
                             "read_version_file", 0x2d5c);
                pcVar2 = stpcpy(acStack_918, pcVar2 + 1);
                pcVar3 = strchr(acStack_918, 10);
                if (pcVar3 == (char *)0x0) {
                    memcpy(&DAT_0006a354, acStack_918,
                           (size_t)(pcVar2 + (1 - (int)acStack_918)));
                } else {
                    FUN_000231cc(&DAT_0006a354, acStack_918,
                                 (int)pcVar3 - (int)acStack_918, "cgminer.c",
                                 "read_version_file", 0x2d65);
                }
            }
            sVar1 = strlen(&DAT_0006a254);
            cVar4 = *(char *)((int)&DAT_0006a250 + sVar1 + 3);
            if (cVar4 == '\n') {
                *(undefined1 *)((int)&DAT_0006a250 + sVar1 + 3) = 0;
                sVar1 = strlen(&DAT_0006a254);
                cVar4 = *(char *)((int)&DAT_0006a250 + sVar1 + 3);
            }
            if (cVar4 == '\r') {
                *(undefined1 *)((int)&DAT_0006a250 + sVar1 + 3) = 0;
            }
            sVar1 = strlen(&DAT_0006a354);
            cVar4 = (&DAT_0006a353)[sVar1];
            if (cVar4 == '\n') {
                (&DAT_0006a353)[sVar1] = 0;
                sVar1 = strlen(&DAT_0006a354);
                cVar4 = (&DAT_0006a353)[sVar1];
            }
            if (cVar4 == '\r') {
                (&DAT_0006a353)[sVar1] = 0;
            }
        }
    LAB_0003de3c:
        if ((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0'))
            goto LAB_0003de5c;
    }
LAB_0003dea0:
    if (DAT_00067858 < 3) {
        return;
    }
LAB_0003de5c:
    snprintf(acStack_818, 0x800, "Miner compile time: %s type: %s",
             &DAT_0006a254, &DAT_0006a354);
    FUN_0001dbec(3, acStack_818, 0);
    return;
}

void FUN_0003df78(void)

{
    bool bVar1;
    int iVar2;
    int *piVar3;
    int *piVar4;
    int iVar5;
    int *piVar6;
    int *piVar7;
    undefined4 uVar8;
    uint uVar9;
    char *pcVar10;
    long lVar11;
    int iVar12;
    uint uVar13;
    char *__s2;
    int iVar14;
    undefined1 auStack_1224[92];
    undefined1 auStack_11c8[160];
    char acStack_1128[2048];
    char acStack_928[2308];

    if ((DAT_000686e1 != '\0') &&
        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
          (6 < DAT_00067858)))) {
        snprintf(acStack_928, 0x800, "START %s",
                 "load_default_config_without_restart");
        FUN_0001dbec(7, acStack_928, 0);
    }
    if (DAT_00068a08 != (char *)0x0) {
        free(DAT_00068a08);
    }
    DAT_00068a08 = (char *)FUN_0001f708(
        0x1000, "cgminer.c", "load_default_config_without_restart", 0x2e95);
    FUN_0002b644();
    iVar2 = access(DAT_00068a08, 4);
    pcVar10 = DAT_00068a08;
    if (iVar2 != 0) {
        free(DAT_00068a08);
        DAT_00068a08 = (char *)0x0;
        return;
    }
    if ((DAT_000686e1 != '\0') &&
        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
          (6 < DAT_00067858)))) {
        snprintf(acStack_928, 0x800, "start %s\n", "judge_load_config");
        FUN_0001dbec(7, acStack_928, 0);
    }
    __s2 = acStack_928;
    memset(__s2, 0, 0x900);
    if (pcVar10 == (char *)0x0) {
        if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
            (DAT_00067858 < 3)) {
            return;
        }
        snprintf(acStack_1128, 0x800, "%s: bad param", "judge_load_config");
        FUN_0001dbec(3, acStack_1128, 0);
        return;
    }
    piVar3 = (int *)FUN_00048178(pcVar10, 0, auStack_1224);
    if ((piVar3 == (int *)0x0) || (*piVar3 != 0)) {
        if ((DAT_00072d88 == '\0') &&
            ((DAT_000686e0 == '\0' && (DAT_00067858 < 3)))) {
            return;
        }
        snprintf(acStack_1128, 0x800,
                 "%s: JSON decode of file \'%s\' failed\n %s",
                 "judge_load_config", pcVar10, auStack_11c8);
        FUN_0001dbec(3, acStack_1128, 0);
        return;
    }
    if ((DAT_000686e1 != '\0') &&
        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
          (6 < DAT_00067858)))) {
        snprintf(acStack_1128, 0x800, "%s: after json_load_file\n",
                 "judge_load_config");
        FUN_0001dbec(7, acStack_1128, 0);
    }
    piVar4 = (int *)FUN_00048cc4(piVar3, "pools");
    if ((piVar4 != (int *)0x0) && (*piVar4 == 1)) {
        iVar2 = FUN_00049030();
        uVar13 = 0;
        iVar5 = FUN_00049030(piVar4);
        pcVar10 = __s2;
        if (iVar5 != 0) {
            while (((piVar6 = (int *)FUN_0004904c(piVar4, uVar13),
                     piVar6 != (int *)0x0 && (*piVar6 == 0 && uVar13 != 3)) &&
                    ((piVar7 = (int *)FUN_00048cc4(piVar6, &DAT_0004b1d4),
                      piVar7 != (int *)0x0 && (*piVar7 == 2))))) {
                uVar8 = FUN_000491f8();
                snprintf(pcVar10, 0x100, "%s", uVar8);
                piVar7 = (int *)FUN_00048cc4(piVar6, &DAT_0004b1d8);
                if ((piVar7 == (int *)0x0) || (*piVar7 != 2))
                    break;
                uVar8 = FUN_000491f8();
                snprintf(pcVar10 + 0x100, 0x100, "%s", uVar8);
                piVar6 = (int *)FUN_00048cc4(piVar6, &DAT_00054054);
                if ((piVar6 == (int *)0x0) || (*piVar6 != 2))
                    break;
                uVar8 = FUN_000491f8();
                snprintf(pcVar10 + 0x200, 0x100, "%s", uVar8);
                if ((DAT_000686e1 != '\0') &&
                    (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
                      (6 < DAT_00067858)))) {
                    snprintf(acStack_1128, 0x800, "%s\n%s\n%s\n", pcVar10,
                             pcVar10 + 0x100, pcVar10 + 0x200);
                    FUN_0001dbec(7, acStack_1128, 0);
                }
                uVar13 = uVar13 + 1;
                uVar9 = FUN_00049030(piVar4);
                pcVar10 = pcVar10 + 0x300;
                if (uVar9 <= uVar13)
                    break;
            }
        }
        if (iVar2 != DAT_00072e58) {
        LAB_0003e5b0:
            uVar13 = 1;
            goto LAB_0003e2ac;
        }
        if (0 < iVar2) {
            piVar4 = (int *)(DAT_00072efc + -4);
            iVar5 = 0;
            do {
                piVar4 = piVar4 + 1;
                iVar14 = *piVar4;
                iVar5 = iVar5 + 1;
                iVar12 = strcmp(*(char **)(iVar14 + 0xa4), __s2);
                if (iVar12 != 0)
                    goto LAB_0003e5b0;
                iVar12 = strcmp(*(char **)(iVar14 + 0xac), __s2 + 0x100);
                pcVar10 = __s2 + 0x200;
                __s2 = __s2 + 0x300;
                if ((iVar12 != 0) ||
                    (iVar12 = strcmp(*(char **)(iVar14 + 0xb0), pcVar10),
                     iVar12 != 0))
                    goto LAB_0003e5b0;
            } while (iVar2 != iVar5);
        }
    }
    uVar13 = 0;
LAB_0003e2ac:
    piVar4 = (int *)FUN_00048cc4(piVar3, "bitmain-freq-level");
    if ((piVar4 != (int *)0x0) && (*piVar4 == 2)) {
        pcVar10 = (char *)FUN_000491f8();
        lVar11 = strtol(pcVar10, (char **)0x0, 10);
        if (lVar11 != DAT_00068200) {
            uVar13 = uVar13 | 2;
            DAT_00068200 = lVar11;
        }
    }
    if (piVar3[1] != -1) {
        piVar4 = piVar3 + 1;
        DataMemoryBarrier(0xb);
        do {
            iVar2 = *piVar4;
            bVar1 = (bool)hasExclusiveAccess(piVar4);
        } while (!bVar1);
        *piVar4 = iVar2 + -1;
        if (iVar2 + -1 == 0) {
            FUN_000495fc(piVar3);
        }
    }
    if ((DAT_000686e1 != '\0') &&
        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
          (6 < DAT_00067858)))) {
        snprintf(acStack_1128, 0x800, "ret = 0x%x", uVar13);
        FUN_0001dbec(7, acStack_1128, 0);
    }
    if (uVar13 != 2) {
        if (uVar13 == 3) {
            FUN_00042848(&DAT_00068200, 4);
        } else if (uVar13 != 1) {
            return;
        }
        FUN_00029ad8();
        return;
    }
    FUN_00042848(&DAT_00068200, 4);
    return;
}

char *FUN_0003e664(char *param_1, char *param_2)

{
    size_t sVar1;
    size_t sVar2;
    char *__s;

    sVar1 = strlen(param_1);
    sVar2 = strlen(param_2);
    __s = (char *)malloc(sVar1 + sVar2);
    sprintf(__s, param_1, param_2);
    return __s;
}

undefined4 FUN_0003e6a0(undefined1 *param_1)

{
    *param_1 = 1;
    return 0;
}

undefined4 FUN_0003e6b0(undefined1 *param_1)

{
    *param_1 = 0;
    return 0;
}

char *FUN_0003e6d0(char *param_1, undefined1 *param_2)

{
    int iVar1;
    size_t sVar2;
    char *__s;

    iVar1 = strcasecmp(param_1, "yes");
    if ((iVar1 == 0) || (iVar1 = strcasecmp(param_1, "true"), iVar1 == 0)) {
        *param_2 = 1;
        return (char *)0x0;
    }
    iVar1 = strcasecmp(param_1, "no");
    if ((iVar1 != 0) && (iVar1 = strcasecmp(param_1, "false"), iVar1 != 0)) {
        sVar2 = strlen(param_1);
        __s = (char *)malloc(sVar2 + 0x16);
        sprintf(__s, "Invalid argument \'%s\'", param_1);
        return __s;
    }
    *param_2 = 0;
    return (char *)0x0;
}

void FUN_0003e764(undefined4 param_1, byte *param_2)

{
    int iVar1;

    iVar1 = FUN_0003e6d0();
    if (iVar1 == 0) {
        *param_2 = *param_2 ^ 1;
    }
    return;
}

undefined4 FUN_0003e784(undefined4 param_1, undefined4 *param_2)

{
    *param_2 = param_1;
    return 0;
}

void FUN_0003e790(char *param_1, float *param_2)

{
    int *piVar1;
    float fVar2;
    char *local_14;

    piVar1 = __errno_location();
    *piVar1 = 0;
    fVar2 = strtof(param_1, &local_14);
    *param_2 = fVar2;
    if ((*local_14 == '\0') && (*param_1 != '\0')) {
        if (*piVar1 != 0) {
            FUN_0003e664("\'%s\' is out of range", param_1);
            return;
        }
    } else {
        FUN_0003e664("\'%s\' is not a number", param_1);
    }
    return;
}

void FUN_0003e818(char *param_1, long *param_2)

{
    int *piVar1;
    long lVar2;
    char *local_14;

    piVar1 = __errno_location();
    *piVar1 = 0;
    lVar2 = strtol(param_1, &local_14, 0);
    *param_2 = lVar2;
    if ((*local_14 == '\0') && (*param_1 != '\0')) {
        if (*piVar1 != 0) {
            FUN_0003e664("\'%s\' is out of range", param_1);
            return;
        }
    } else {
        FUN_0003e664("\'%s\' is not a number", param_1);
    }
    return;
}

void FUN_0003e8a0(undefined4 param_1, undefined4 *param_2)

{
    int iVar1;
    undefined4 local_c;

    iVar1 = FUN_0003e818(param_1, &local_c);
    if (iVar1 == 0) {
        *param_2 = local_c;
    }
    return;
}

void FUN_0003e8c8(undefined4 param_1, int *param_2)

{
    int iVar1;
    int local_14[2];

    iVar1 = FUN_0003e818(param_1, local_14);
    if (iVar1 == 0) {
        if (local_14[0] < 0) {
            FUN_0003e664("\'%s\' is negative", param_1);
            return;
        }
        *param_2 = local_14[0];
    }
    return;
}

void FUN_0003e918(undefined4 param_1, int *param_2)

{
    int iVar1;
    int local_14[2];

    iVar1 = FUN_0003e818(param_1, local_14);
    if (iVar1 == 0) {
        *param_2 = local_14[0];
        if (local_14[0] < 0) {
            FUN_0003e664("\'%s\' is negative", param_1);
            return;
        }
    }
    return;
}

void FUN_0003e980(char *param_1)

{
    puts(param_1);
    fflush(stdout);
    /* WARNING: Subroutine does not return */
    exit(0);
}

void FUN_0003ea28(undefined1 *param_1, undefined4 *param_2)

{
    size_t __n;

    __n = strlen((char *)*param_2);
    *param_1 = 0x22;
    if (0x4e < __n) {
        strncpy(param_1 + 1, (char *)*param_2, 0x4e);
        param_1[0x4f] = 0x22;
        return;
    }
    strncpy(param_1 + 1, (char *)*param_2, __n);
    param_1[__n + 1] = 0x22;
    if (__n != 0x4e) {
        param_1[__n + 2] = 0;
    }
    return;
}

char *FUN_0003eb04(uint *param_1, size_t *param_2)

{
    size_t sVar1;
    char *__s;
    int iVar2;
    int *piVar3;
    uint uVar4;

    *param_1 = 0;
    if (DAT_000762e4 == 0) {
    LAB_0003eb9c:
        __s = (char *)0x0;
    } else {
        piVar3 = DAT_000762ec;
        if (DAT_000762ec[1] == 8) {
            iVar2 = 0x1c;
            uVar4 = 1;
            do {
                *param_1 = uVar4;
                if (DAT_000762e4 <= uVar4)
                    goto LAB_0003eb9c;
                piVar3 = (int *)((int)DAT_000762ec + iVar2);
                iVar2 = iVar2 + 0x1c;
                uVar4 = uVar4 + 1;
            } while (piVar3[1] == 8);
        }
        __s = (char *)(*piVar3 + 1);
        sVar1 = strcspn(__s, "|= ");
        *param_2 = sVar1;
    }
    return __s;
}

char *FUN_0003eba4(int param_1, size_t *param_2)

{
    byte bVar1;
    size_t sVar2;
    char *__s;

    bVar1 = *(byte *)(param_1 + *param_2);
    if ((bVar1 & 0xdf) == 0 || bVar1 == 0x3d) {
        __s = (char *)0x0;
    } else {
        __s = (char *)(param_1 + *param_2 + 2);
        sVar2 = strcspn(__s, "|= ");
        *param_2 = sVar2;
    }
    return __s;
}

char *FUN_0003ebec(int param_1, uint *param_2, size_t *param_3)

{
    char *pcVar1;
    size_t sVar2;
    int *piVar3;
    uint uVar4;

    uVar4 = *param_2;
    if (uVar4 < DAT_000762e4) {
        do {
            piVar3 = (int *)(DAT_000762ec + uVar4 * 0x1c);
            if (piVar3[1] != 8) {
                if (param_1 == 0) {
                    pcVar1 = (char *)(*piVar3 + 1);
                    sVar2 = strcspn(pcVar1, "|= ");
                    *param_3 = sVar2;
                    return pcVar1;
                }
                pcVar1 = (char *)FUN_0003eba4(param_1, param_3);
                if (pcVar1 != (char *)0x0) {
                    return pcVar1;
                }
                uVar4 = *param_2;
                param_1 = 0;
            }
            uVar4 = uVar4 + 1;
            *param_2 = uVar4;
        } while (uVar4 < DAT_000762e4);
    }
    return (char *)0x0;
}

void FUN_0003eca4(undefined4 *param_1)

{
    size_t sVar1;
    undefined4 *puVar2;
    undefined4 uVar3;
    undefined4 uVar4;
    uint uVar5;
    undefined4 uVar6;
    char *__s;
    int iVar7;
    undefined4 extraout_r12;
    undefined4 *puVar8;
    bool bVar9;
    size_t local_1c;

    uVar5 = param_1[1];
    bVar9 = 3 < uVar5;
    if (uVar5 != 4) {
        bVar9 = uVar5 != 1;
    }
    if (!bVar9 || (uVar5 == 4 || uVar5 == 2)) {
        if (param_1[6] != 0) {
            if (*(char *)*param_1 == '-') {
                __s = (char *)*param_1 + 1;
                local_1c = strcspn(__s, "|= ");
                while (*__s == '-') {
                    sVar1 = local_1c;
                    if (local_1c == 1)
                        goto LAB_0003edd8;
                    iVar7 = param_1[1];
                    DAT_000762dc = DAT_000762dc + 1;
                LAB_0003ed3c:
                    if ((iVar7 == 1) &&
                        (uVar3 = 1, sVar1 = local_1c,
                         __s[local_1c] == '=' || __s[local_1c] == ' '))
                        goto LAB_0003edbc;
                    __s = (char *)FUN_0003eba4(__s, &local_1c);
                    if (__s == (char *)0x0) {
                        return;
                    }
                }
                if (local_1c == 1) {
                    iVar7 = param_1[1];
                    DAT_000762e0 = DAT_000762e0 + 1;
                    if ((iVar7 - 2U & 0xfffffffd) == 0) {
                        DAT_000762e8 = DAT_000762e8 + 1;
                    }
                    goto LAB_0003ed3c;
                }
                __s = __s + -1;
                sVar1 = errx(1, "Option %s: invalid short option \'%.*s\'",
                             *param_1, local_1c + 1, __s);
                uVar3 = extraout_r12;
            LAB_0003edbc:
                sVar1 = errx(uVar3, "Option %s: does not take arguments \'%s\'",
                             *param_1, __s + sVar1 + 1);
            LAB_0003edd8:
                errx(sVar1, "Option %s: invalid long option \'--\'", *param_1);
            }
            errx(1, "Option %s: does not begin with \'-\'");
        }
        errx(1, "Option %s: description cannot be NULL");
    }
    puVar2 = (undefined4 *)errx(1, "Option %s: unknown entry type %u");
    DAT_000762ec = realloc(DAT_000762ec, (DAT_000762e4 + 1) * 0x1c);
    uVar3 = puVar2[1];
    uVar4 = puVar2[2];
    uVar6 = puVar2[3];
    puVar8 = (undefined4 *)((int)DAT_000762ec + DAT_000762e4 * 0x1c);
    DAT_000762e4 = DAT_000762e4 + 1;
    *puVar8 = *puVar2;
    puVar8[1] = uVar3;
    puVar8[2] = uVar4;
    puVar8[3] = uVar6;
    uVar3 = puVar2[5];
    uVar4 = puVar2[6];
    puVar8[4] = puVar2[4];
    puVar8[5] = uVar3;
    puVar8[6] = uVar4;
    return;
}

void FUN_0003ee18(undefined4 *param_1)

{
    undefined4 uVar1;
    undefined4 uVar2;
    undefined4 uVar3;
    undefined4 *puVar4;

    DAT_000762ec = realloc(DAT_000762ec, (DAT_000762e4 + 1) * 0x1c);
    uVar1 = param_1[1];
    uVar2 = param_1[2];
    uVar3 = param_1[3];
    puVar4 = (undefined4 *)((int)DAT_000762ec + DAT_000762e4 * 0x1c);
    DAT_000762e4 = DAT_000762e4 + 1;
    *puVar4 = *param_1;
    puVar4[1] = uVar1;
    puVar4[2] = uVar2;
    puVar4[3] = uVar3;
    uVar1 = param_1[5];
    uVar2 = param_1[6];
    puVar4[4] = param_1[4];
    puVar4[5] = uVar1;
    puVar4[6] = uVar2;
    return;
}

char *FUN_0003ee7c(undefined4 param_1, int *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_0003eb04();
    while (true) {
        if (pcVar1 == (char *)0x0) {
            return (char *)0x0;
        }
        if (*pcVar1 == '-')
            break;
        pcVar1 = (char *)FUN_0003ebec(pcVar1, param_1, param_2);
    }
    *param_2 = *param_2 + -1;
    return pcVar1 + 1;
}

char *FUN_0003eed4(undefined4 param_1, undefined4 param_2, int *param_3)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_0003ebec();
    while (true) {
        if (pcVar1 == (char *)0x0) {
            return (char *)0x0;
        }
        if (*pcVar1 == '-')
            break;
        pcVar1 = (char *)FUN_0003ebec(pcVar1, param_2, param_3);
    }
    *param_3 = *param_3 + -1;
    return pcVar1 + 1;
}

char *FUN_0003ef2c(undefined4 param_1)

{
    char *pcVar1;
    undefined4 local_14[2];

    local_14[0] = 0;
    pcVar1 = (char *)FUN_0003eb04(param_1, local_14);
    while (true) {
        if (pcVar1 == (char *)0x0) {
            return (char *)0x0;
        }
        if (*pcVar1 != '-')
            break;
        pcVar1 = (char *)FUN_0003ebec(pcVar1, param_1, local_14);
    }
    return pcVar1;
}

char *FUN_0003ef8c(undefined4 param_1, undefined4 param_2)

{
    char *pcVar1;
    undefined4 local_14[2];

    local_14[0] = 1;
    pcVar1 = (char *)FUN_0003ebec(param_1, param_2, local_14);
    while (true) {
        if (pcVar1 == (char *)0x0) {
            return (char *)0x0;
        }
        if (*pcVar1 != '-')
            break;
        pcVar1 = (char *)FUN_0003ebec(pcVar1, param_2, local_14);
    }
    return pcVar1;
}

void FUN_0003efec(undefined4 param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4, undefined4 param_5, undefined4 param_6,
                  undefined4 param_7)

{
    undefined4 local_24;
    undefined4 local_20;
    undefined4 local_1c;
    undefined4 uStack_18;
    undefined4 local_14;
    undefined4 local_10;
    undefined4 local_c;

    local_14 = param_5;
    local_10 = param_6;
    local_c = param_7;
    local_24 = param_1;
    local_20 = param_2;
    local_1c = param_3;
    uStack_18 = param_4;
    FUN_0003eca4(&local_24);
    FUN_0003ee18(&local_24);
    return;
}

void FUN_0003f030(undefined4 *param_1, int param_2)

{
    int iVar1;
    int iVar2;
    undefined4 local_34;
    undefined4 local_30;
    undefined4 local_2c;
    undefined4 local_28;
    undefined4 local_24;
    undefined4 local_20;
    int local_1c;

    iVar1 = DAT_000762e4;
    if (param_2 == 0) {
        iVar2 = param_1[1];
        if (iVar2 == 0x10) {
            return;
        }
    } else {
        local_34 = 0;
        local_2c = 0;
        local_28 = 0;
        local_24 = 0;
        local_20 = 0;
        local_30 = 8;
        local_1c = param_2;
        FUN_0003ee18(&local_34);
        iVar2 = param_1[1];
        if (iVar2 == 0x10)
            goto LAB_0003f0b8;
    }
    do {
        if (iVar2 == 8) {
            FUN_0003f030(*param_1, param_1[6]);
        } else {
            FUN_0003eca4(param_1);
            FUN_0003ee18(param_1);
        }
        iVar2 = param_1[8];
        param_1 = param_1 + 7;
    } while (iVar2 != 0x10);
    if (param_2 == 0) {
        return;
    }
LAB_0003f0b8:
    *(int *)(DAT_000762ec + iVar1 * 0x1c + 0x14) = DAT_000762e4 - iVar1;
    return;
}

bool FUN_0003f104(undefined4 param_1, undefined4 *param_2, undefined4 param_3)

{
    int iVar1;
    undefined4 local_1c[2];

    DAT_000762f0 = *param_2;
    local_1c[0] = 0;
    do {
        iVar1 = FUN_0003f270(param_1, param_2, local_1c, param_3);
    } while (iVar1 == 1);
    return iVar1 == 0;
}

void FUN_0003f160(void)

{
    free(DAT_000762ec);
    DAT_000762ec = (void *)0x0;
    return;
}

void FUN_0003f238(int *param_1, int param_2, int param_3)

{
    memmove((void *)(param_2 + param_3 * 4),
            (void *)(param_2 + param_3 * 4 + 4), (*param_1 - param_3) * 4);
    *param_1 = *param_1 + -1;
    return;
}

/* WARNING: Type propagation algorithm not settling */

undefined4 FUN_0003f270(undefined4 param_1, undefined4 *param_2, int *param_3,
                        code *param_4)

{
    char cVar1;
    int *piVar2;
    char *pcVar3;
    char *pcVar4;
    void *__ptr;
    int iVar5;
    size_t sVar6;
    int iVar7;
    int iVar8;
    int *piVar9;
    int iVar10;
    size_t sVar11;
    int iVar12;
    char *local_38;
    int local_30;
    size_t local_2c[2];

    pcVar3 = getenv("POSIXLY_CORRECT");
    pcVar4 = (char *)param_2[1];
    if (pcVar3 == (char *)0x0) {
        if (pcVar4 == (char *)0x0) {
            return 0;
        }
        if (*pcVar4 == '-') {
            piVar9 = param_2 + 1;
            iVar8 = 1;
        } else {
            iVar8 = 1;
            piVar2 = param_2 + 2;
            do {
                piVar9 = piVar2;
                pcVar4 = (char *)*piVar9;
                iVar8 = iVar8 + 1;
                if (pcVar4 == (char *)0x0) {
                    return 0;
                }
                piVar2 = piVar9 + 1;
            } while (*pcVar4 != '-');
        }
        cVar1 = pcVar4[1];
    } else {
        piVar9 = param_2 + 1;
        if (pcVar4 == (char *)0x0) {
            return 0;
        }
        if (*pcVar4 != '-') {
            return 0;
        }
        cVar1 = pcVar4[1];
        iVar8 = 1;
    }
    if (cVar1 == '-') {
        if (pcVar4[2] == '\0') {
            FUN_0003f238(param_1, param_2, iVar8);
            return 0;
        }
        if (*param_3 != 0) {
            /* WARNING: Subroutine does not return */
            __assert_fail("*offset == 0", "ccan/opt/parse.c", 0x3b,
                          "parse_one");
        }
        pcVar4 = (char *)FUN_0003ee7c(&local_30, local_2c);
        sVar6 = local_2c[0];
        while (pcVar4 != (char *)0x0) {
            iVar10 = *piVar9;
            local_2c[0] = sVar6;
            iVar5 = strncmp((char *)(iVar10 + 2), pcVar4, sVar6);
            if (iVar5 == 0) {
                sVar11 = sVar6 + 2;
                if (*(char *)(iVar10 + sVar11) == '=') {
                    iVar5 = local_30 * 0x1c;
                    iVar10 = iVar10 + sVar6 + 3;
                    local_38 = pcVar4 + -2;
                    iVar7 = DAT_000762ec + iVar5;
                    if (*(int *)(iVar7 + 4) == 1) {
                        local_2c[0] = sVar11;
                        if (iVar10 != 0) {
                            (*param_4)("%s: %.*s: %s", *param_2, sVar11,
                                       local_38, "doesn\'t allow an argument");
                            return 0xffffffff;
                        }
                        goto LAB_0003f520;
                    }
                    local_2c[0] = sVar11;
                    if (iVar10 != 0)
                        goto LAB_0003f3a8;
                } else {
                    if (*(char *)(iVar10 + sVar11) != '\0')
                        goto LAB_0003f4d0;
                    local_38 = pcVar4 + -2;
                    iVar7 = DAT_000762ec + local_30 * 0x1c;
                    local_2c[0] = sVar11;
                    if (*(int *)(iVar7 + 4) == 1)
                        goto LAB_0003f520;
                }
                local_38 = pcVar4 + -2;
                iVar5 = local_30 * 0x1c;
                iVar12 = *param_3;
                local_2c[0] = sVar11;
                goto LAB_0003f390;
            }
        LAB_0003f4d0:
            pcVar4 = (char *)FUN_0003eed4(pcVar4, &local_30, local_2c);
            sVar6 = local_2c[0];
        }
    } else {
        local_38 = (char *)FUN_0003ef2c(&local_30);
        if (local_38 != (char *)0x0) {
            iVar12 = *param_3 + 1;
            if (*local_38 != *(char *)(*piVar9 + iVar12)) {
                do {
                    local_38 = (char *)FUN_0003ef8c(local_38, &local_30);
                    if (local_38 == (char *)0x0)
                        goto LAB_0003f4e8;
                    iVar12 = *param_3 + 1;
                } while (*(char *)(*piVar9 + iVar12) != *local_38);
            }
            local_38 = local_38 + -1;
            *param_3 = iVar12;
            local_2c[0] = 2;
            iVar5 = local_30 * 0x1c;
            iVar7 = DAT_000762ec + iVar5;
            if (*(int *)(iVar7 + 4) == 1) {
            LAB_0003f520:
                iVar10 = 0;
                __ptr = (void *)(**(code **)(iVar7 + 8))(
                    *(undefined4 *)(iVar7 + 0x14));
            } else {
            LAB_0003f390:
                if ((iVar12 == 0) ||
                    (iVar10 = *piVar9 + iVar12 + 1,
                     *(char *)(*piVar9 + iVar12 + 1) == '\0')) {
                    iVar10 = param_2[iVar8 + 1];
                    if (iVar10 == 0) {
                        (*param_4)("%s: %.*s: %s", *param_2, local_2c[0],
                                   local_38, "requires an argument");
                        return 0xffffffff;
                    }
                } else {
                    *param_3 = 0;
                }
            LAB_0003f3a8:
                if (*(int *)(DAT_000762ec + iVar5 + 4) == 4) {
                    FUN_0003e784(iVar10,
                                 *(undefined4 *)(DAT_000762ec + iVar5 + 0x14));
                }
                iVar5 = DAT_000762ec + local_30 * 0x1c;
                __ptr = (void *)(**(code **)(iVar5 + 0xc))(
                    iVar10, *(undefined4 *)(iVar5 + 0x14));
            }
            if (__ptr != (void *)0x0) {
                (*param_4)("%s: %.*s: %s", *param_2, local_2c[0], local_38,
                           __ptr);
                free(__ptr);
                return 0xffffffff;
            }
            if (*param_3 != 0) {
                if (*(char *)(*piVar9 + *param_3 + 1) != '\0') {
                    return 1;
                }
                *param_3 = 0;
            }
            FUN_0003f238(param_1, param_2, iVar8);
            if ((iVar10 != 0) && (*piVar9 == iVar10)) {
                FUN_0003f238(param_1, param_2, iVar8);
            }
            return 1;
        }
    }
LAB_0003f4e8:
    pcVar4 = (char *)*piVar9;
    sVar6 = strlen(pcVar4);
    (*param_4)("%s: %.*s: %s", *param_2, sVar6, pcVar4, "unrecognized option");
    return 0xffffffff;
}

char *FUN_0003f720(char *param_1, char *param_2)

{
    size_t sVar1;
    size_t sVar2;
    size_t sVar3;
    int iVar4;
    char *pcVar5;
    int iVar6;
    uint uVar7;
    int iVar8;
    char *__s;
    undefined4 *puVar9;
    char *pcVar10;
    undefined4 *puVar11;
    char *pcVar12;
    uint uVar13;
    uint uVar14;
    char *pcVar15;
    bool bVar16;
    int local_7c[20];
    undefined4 local_2c;

    sVar1 = strlen(param_1);
    puVar9 = DAT_000762ec;
    uVar14 = DAT_000762e4;
    sVar1 = DAT_000762e0 + 0x14 + sVar1;
    if (param_2 == (char *)0x0) {
        if (DAT_000762e4 == 0) {
            param_2 = "";
            goto LAB_0003f810;
        }
        uVar13 = 0;
        puVar11 = DAT_000762ec;
        do {
            uVar13 = uVar13 + 1;
            if (((undefined *)puVar11[2] == &UNK_0003e9a0) &&
                (param_2 = (char *)puVar11[5], param_2 != (char *)0x0)) {
                sVar2 = strlen(param_2);
                sVar1 = sVar1 + sVar2;
                goto LAB_0003f77c;
            }
            puVar11 = puVar11 + 7;
        } while (uVar13 != DAT_000762e4);
        param_2 = "";
    } else {
        sVar2 = strlen(param_2);
        sVar1 = sVar1 + sVar2;
        puVar9 = DAT_000762ec;
        if (uVar14 == 0)
            goto LAB_0003f810;
    }
LAB_0003f77c:
    uVar13 = 0;
    do {
        while (true) {
            pcVar15 = (char *)puVar9[6];
            if (puVar9[1] != 8)
                break;
            uVar13 = uVar13 + 1;
            sVar2 = strlen(pcVar15);
            sVar1 = sVar2 + sVar1 + 3;
            puVar9 = puVar9 + 7;
            if (uVar14 <= uVar13)
                goto LAB_0003f810;
        }
        if (pcVar15 != (char *)&DAT_000762f4) {
            sVar2 = strlen((char *)*puVar9);
            sVar3 = strlen(pcVar15);
            iVar4 = sVar2 + sVar1 + 6 + sVar3;
            iVar8 = iVar4 + 0x76;
            if (puVar9[4] == 0) {
                iVar8 = iVar4 + 0x15;
            }
            sVar1 = iVar8 + 1;
        }
        uVar13 = uVar13 + 1;
        puVar9 = puVar9 + 7;
    } while (uVar13 < uVar14);
LAB_0003f810:
    pcVar15 = (char *)malloc(sVar1);
    if (pcVar15 != (char *)0x0) {
        iVar4 = sprintf(pcVar15, "Usage: %s", param_1);
        pcVar12 = pcVar15 + iVar4;
        builtin_strncpy(pcVar15 + iVar4, " [-", 4);
        pcVar5 = (char *)FUN_0003ef2c(local_7c);
        pcVar10 = pcVar12;
        if (pcVar5 != (char *)0x0) {
            iVar4 = 0;
            do {
                if ((undefined4 *)DAT_000762ec[local_7c[0] * 7 + 6] !=
                    &DAT_000762f4) {
                    pcVar12[iVar4 + 3] = *pcVar5;
                    iVar4 = iVar4 + 1;
                }
                pcVar5 = (char *)FUN_0003ef8c(pcVar5, local_7c);
            } while (pcVar5 != (char *)0x0);
            if (iVar4 != 0) {
                pcVar10 = pcVar12 + iVar4 + 4;
                (pcVar12 + iVar4 + 3)[0] = ']';
                (pcVar12 + iVar4 + 3)[1] = '\0';
            }
        }
        iVar4 = sprintf(pcVar10, " %s", param_2);
        pcVar5 = pcVar10 + iVar4 + 1;
        bVar16 = DAT_000762e4 != 0;
        (pcVar10 + iVar4)[0] = '\n';
        (pcVar10 + iVar4)[1] = '\0';
        if (bVar16) {
            iVar4 = 0;
            uVar14 = 0;
            do {
                puVar9 = (undefined4 *)((int)DAT_000762ec + iVar4);
                if ((undefined4 *)puVar9[6] != &DAT_000762f4) {
                    if (puVar9[1] == 8) {
                        iVar8 = sprintf(pcVar5, "%s:\n");
                        pcVar5 = pcVar5 + iVar8;
                    } else {
                        uVar7 = sprintf(pcVar5, "%s", *puVar9);
                        pcVar10 = pcVar5 + uVar7;
                        uVar13 = uVar7;
                        if (*(int *)((int)DAT_000762ec + iVar4 + 4) == 2) {
                            __s = *(char **)((int)DAT_000762ec + iVar4);
                            pcVar12 = strchr(__s, 0x20);
                            if ((pcVar12 == (char *)0x0) &&
                                (pcVar12 = strchr(__s, 0x3d),
                                 pcVar12 == (char *)0x0)) {
                                uVar13 = uVar7 + 6;
                                builtin_strncpy(pcVar5 + uVar7, " <arg>", 7);
                                pcVar10 = pcVar5 + uVar13;
                            }
                        }
                        if (uVar13 < 0x14) {
                            iVar8 = 0x14 - uVar13;
                        } else {
                            iVar8 = 1;
                        }
                        iVar8 = sprintf(pcVar10, "%.*s", iVar8,
                                        "                    ");
                        iVar6 = sprintf(
                            pcVar5 + iVar8 + uVar13, "%s",
                            *(undefined4 *)((int)DAT_000762ec + iVar4 + 0x18));
                        iVar6 = iVar6 + iVar8 + uVar13;
                        pcVar10 = pcVar5 + iVar6;
                        if (*(int *)((int)DAT_000762ec + iVar4 + 0x10) != 0) {
                            local_2c = 0x2e2e2e;
                            (**(code **)((int)DAT_000762ec + iVar4 + 0x10))(
                                local_7c, *(undefined4 *)((int)DAT_000762ec +
                                                          iVar4 + 0x14));
                            iVar8 =
                                sprintf(pcVar10, " (default: %s)", local_7c);
                            pcVar10 = pcVar5 + iVar8 + iVar6;
                        }
                        pcVar5 = pcVar10 + 1;
                        pcVar10[0] = '\n';
                        pcVar10[1] = '\0';
                    }
                }
                uVar14 = uVar14 + 1;
                iVar4 = iVar4 + 0x1c;
            } while (uVar14 < DAT_000762e4);
        }
        *pcVar5 = '\0';
    }
    return pcVar15;
}

uint *FUN_0003fb64(uint *param_1, uint param_2, uint param_3)

{
    uint *puVar1;
    uint uVar2;
    uint uVar3;
    uint uVar4;

    if (param_3 == 0) {
        return (uint *)0x0;
    }
    uVar4 = param_2 & 0xff;
    if (((uint)param_1 & 3) == 0) {
    LAB_0003fbbc:
        uVar3 = (param_2 & 0xff) << 8 | uVar4;
        uVar3 = uVar3 | uVar3 << 0x10;
        if (3 < param_3) {
            uVar2 = *param_1 ^ uVar3;
            for (uVar2 = uVar2 + 0xfefefeff & ~uVar2; (uVar2 & 0x80808080) == 0;
                 uVar2 = uVar2 + 0xfefefeff & ~uVar2) {
                param_1 = param_1 + 1;
                param_3 = param_3 - 4;
                if (param_3 < 4) {
                    if (param_3 == 0) {
                        return (uint *)0x0;
                    }
                    break;
                }
                uVar2 = *param_1 ^ uVar3;
            }
        }
        if ((byte)*param_1 == uVar4) {
            return param_1;
        }
        puVar1 = (uint *)((int)param_1 + param_3);
        while (param_1 = (uint *)((int)param_1 + 1), param_1 != puVar1) {
            if (*(byte *)param_1 == uVar4) {
                return param_1;
            }
        }
    } else {
        if ((byte)*param_1 == uVar4) {
            return param_1;
        }
        puVar1 = (uint *)((int)param_1 + 1);
        while (param_1 = puVar1, param_3 = param_3 - 1, param_3 != 0) {
            if (((uint)param_1 & 3) == 0)
                goto LAB_0003fbbc;
            puVar1 = (uint *)((int)param_1 + 1);
            if ((byte)*param_1 == uVar4) {
                return param_1;
            }
        }
    }
    return (uint *)0x0;
}

uint FUN_0003fc78(int param_1, uint param_2, int *param_3)

{
    byte bVar1;
    uint uVar2;
    uint uVar3;
    uint uVar4;
    uint uVar5;
    uint uVar6;
    int iVar7;
    int iVar8;
    int iVar9;
    uint uVar10;
    bool bVar11;

    iVar7 = 1;
    uVar2 = 0;
    iVar9 = 1;
    uVar10 = 0xffffffff;
    while (uVar6 = iVar9 + uVar2, uVar4 = uVar2, iVar9 + uVar2 < param_2) {
        while (uVar5 = uVar6, bVar1 = *(byte *)(param_1 + uVar10 + iVar9),
               *(byte *)(param_1 + uVar5) < bVar1) {
            iVar9 = 1;
            iVar7 = uVar5 - uVar10;
            uVar6 = uVar5 + 1;
            uVar4 = uVar5;
            if (param_2 <= uVar5 + 1)
                goto LAB_0003fcc8;
        }
        if (*(byte *)(param_1 + uVar5) == bVar1) {
            bVar11 = iVar9 == iVar7;
            iVar9 = iVar9 + 1;
            uVar2 = uVar4;
            if (bVar11) {
                iVar9 = 1;
                uVar2 = uVar5;
            }
        } else {
            iVar7 = 1;
            uVar2 = uVar4 + 1;
            iVar9 = iVar7;
            uVar10 = uVar4;
        }
    }
LAB_0003fcc8:
    iVar8 = 1;
    *param_3 = iVar7;
    uVar2 = 0;
    uVar6 = 0xffffffff;
    iVar9 = 1;
    while (uVar4 = iVar9 + uVar2, uVar5 = uVar2, iVar9 + uVar2 < param_2) {
        while (uVar3 = uVar4, bVar1 = *(byte *)(param_1 + uVar6 + iVar9),
               bVar1 < *(byte *)(param_1 + uVar3)) {
            iVar9 = 1;
            iVar8 = uVar3 - uVar6;
            uVar4 = uVar3 + 1;
            uVar5 = uVar3;
            if (param_2 <= uVar3 + 1)
                goto LAB_0003fd18;
        }
        if (*(byte *)(param_1 + uVar3) == bVar1) {
            bVar11 = iVar9 == iVar8;
            iVar9 = iVar9 + 1;
            uVar2 = uVar5;
            if (bVar11) {
                iVar9 = 1;
                uVar2 = uVar3;
            }
        } else {
            iVar8 = 1;
            uVar2 = uVar5 + 1;
            uVar6 = uVar5;
            iVar9 = iVar8;
        }
    }
LAB_0003fd18:
    uVar2 = uVar10 + 1;
    if (uVar10 + 1 <= uVar6 + 1) {
        *param_3 = iVar8;
        uVar2 = uVar6 + 1;
    }
    return uVar2;
}

int FUN_0003fd88(int param_1, int param_2, char *param_3, uint param_4)

{
    uint uVar1;
    int iVar2;
    int iVar3;
    uint __n;
    byte *pbVar4;
    uint uVar5;
    uint uVar6;
    uint *puVar7;
    uint uVar8;
    uint uVar9;
    uint uVar10;
    uint uVar11;
    char *pcVar12;
    char *pcVar13;
    bool bVar14;
    uint local_42c;
    uint local_428[257];

    uVar11 = param_4 - 1;
    if (param_4 < 3) {
        local_42c = 1;
        __n = uVar11;
    } else {
        __n = FUN_0003fc78(param_3, param_4, &local_42c);
    }
    uVar9 = local_42c;
    puVar7 = &local_42c;
    do {
        puVar7 = puVar7 + 1;
        *puVar7 = param_4;
    } while (puVar7 != local_428 + 0xff);
    if (param_4 != 0) {
        pbVar4 = (byte *)(param_3 + -1);
        uVar8 = uVar11;
        do {
            pbVar4 = pbVar4 + 1;
            local_428[*pbVar4] = uVar8;
            bVar14 = uVar8 != 0;
            uVar8 = uVar8 - 1;
        } while (bVar14);
    }
    iVar2 = memcmp(param_3, param_3 + local_42c, __n);
    if (iVar2 == 0) {
        uVar6 = __n - 1;
        uVar8 = 0;
        uVar10 = 0;
        do {
            while (true) {
                uVar5 = local_428[*(byte *)(param_1 + uVar8 + uVar11)];
                if (uVar5 == 0)
                    break;
                if (uVar10 != 0 && uVar5 < uVar9) {
                    uVar5 = param_4 - uVar9;
                }
                uVar8 = uVar8 + uVar5;
            LAB_0003fe68:
                uVar10 = 0;
                if (param_2 - param_4 < uVar8) {
                    return 0;
                }
            }
            uVar5 = __n;
            if (__n < uVar10) {
                uVar5 = uVar10;
            }
            if (uVar5 < uVar11) {
                pcVar13 = param_3 + uVar5;
                pcVar12 = (char *)(param_1 + uVar5 + uVar8);
                if (*(char *)(param_1 + uVar5 + uVar8) == param_3[uVar5]) {
                    do {
                        uVar5 = uVar5 + 1;
                        if (uVar11 <= uVar5)
                            goto LAB_0003fee0;
                        pcVar13 = pcVar13 + 1;
                        pcVar12 = pcVar12 + 1;
                    } while (*pcVar13 == *pcVar12);
                }
                uVar8 = uVar5 + (1 - __n) + uVar8;
                goto LAB_0003fe68;
            }
        LAB_0003fee0:
            uVar5 = __n;
            if ((uVar10 < __n) &&
                (pcVar12 = (char *)(param_1 + uVar6 + uVar8),
                 param_3[uVar6] == *(char *)(param_1 + uVar6 + uVar8))) {
                pcVar13 = param_3 + uVar6;
                uVar1 = uVar6;
                do {
                    uVar5 = uVar1;
                    if (uVar5 - 1 == uVar10 - 1)
                        break;
                    pcVar13 = pcVar13 + -1;
                    pcVar12 = pcVar12 + -1;
                    uVar1 = uVar5 - 1;
                } while (*pcVar13 == *pcVar12);
            }
            if (uVar5 < uVar10 + 1) {
                return param_1 + uVar8;
            }
            uVar8 = uVar8 + uVar9;
            uVar10 = param_4 - uVar9;
        } while (uVar8 <= param_2 - param_4);
    } else {
        iVar2 = __n - 1;
        uVar9 = param_4 - __n;
        if (param_4 - __n < __n) {
            uVar9 = __n;
        }
        uVar8 = 0;
        do {
            iVar3 = param_1 + uVar8;
            uVar10 = local_428[*(byte *)(iVar3 + uVar11)];
            if (local_428[*(byte *)(iVar3 + uVar11)] == 0) {
                if (uVar11 <= __n) {
                LAB_0004001c:
                    if (iVar2 == -1) {
                        return iVar3;
                    }
                    pcVar13 = (char *)(param_1 + iVar2 + uVar8);
                    pcVar12 = param_3 + iVar2;
                    uVar10 = uVar9 + 1;
                    if (*(char *)(param_1 + iVar2 + uVar8) == param_3[iVar2]) {
                        do {
                            if (pcVar12 == param_3) {
                                return iVar3;
                            }
                            pcVar12 = pcVar12 + -1;
                            pcVar13 = pcVar13 + -1;
                        } while (*pcVar12 == *pcVar13);
                    }
                    goto LAB_00040060;
                }
                pcVar13 = (char *)(param_1 + __n + uVar8);
                uVar10 = __n;
                pcVar12 = param_3 + __n;
                if (*(char *)(param_1 + __n + uVar8) == param_3[__n]) {
                    do {
                        uVar10 = uVar10 + 1;
                        if (uVar11 <= uVar10)
                            goto LAB_0004001c;
                        pcVar12 = pcVar12 + 1;
                        pcVar13 = pcVar13 + 1;
                    } while (*pcVar12 == *pcVar13);
                }
                uVar8 = uVar10 + (1 - __n) + uVar8;
            } else {
            LAB_00040060:
                uVar8 = uVar8 + uVar10;
            }
        } while (uVar8 <= param_2 - param_4);
    }
    return 0;
}

void *memmem(void *__haystack, size_t __haystacklen, void *__needle,
             size_t __needlelen)

{
    uint uVar1;
    void *pvVar2;
    int iVar3;
    uint uVar4;
    char *pcVar5;
    uint uVar6;
    uint uVar7;
    size_t sVar8;
    uint __n;
    uint uVar9;
    uint uVar10;
    int iVar11;
    char *pcVar12;
    int local_2c[2];

    if (__needlelen != 0) {
        if (__needlelen <= __haystacklen) {
            if (0x1f < __needlelen) {
                pvVar2 = (void *)FUN_0003fd88();
                return pvVar2;
            }
            /* WARNING: Load size is inaccurate */
            pvVar2 = (void *)FUN_0003fb64(__haystack, *__needle, __haystacklen);
            if (pvVar2 == (void *)0x0 || __needlelen == 1) {
                return pvVar2;
            }
            uVar9 = __haystacklen - ((int)pvVar2 - (int)__haystack);
            if (__needlelen <= uVar9) {
                if (__needlelen < 3) {
                    __n = __needlelen - 1;
                    local_2c[0] = 1;
                } else {
                    __n = FUN_0003fc78(__needle, __needlelen, local_2c);
                }
                iVar11 = local_2c[0];
                iVar3 = memcmp(__needle, (void *)((int)__needle + local_2c[0]),
                               __n);
                if (iVar3 == 0) {
                    uVar6 = __n - 1;
                    uVar4 = 0;
                    uVar10 = 0;
                    do {
                        uVar7 = __n;
                        if (__n < uVar10) {
                            uVar7 = uVar10;
                        }
                        if (uVar7 < __needlelen) {
                            pcVar12 = (char *)((int)__needle + uVar7);
                            pcVar5 = (char *)((int)pvVar2 + uVar7 + uVar4);
                            if (*(char *)((int)__needle + uVar7) ==
                                *(char *)((int)pvVar2 + uVar7 + uVar4)) {
                                do {
                                    uVar7 = uVar7 + 1;
                                    if (__needlelen == uVar7)
                                        goto LAB_000401cc;
                                    pcVar12 = pcVar12 + 1;
                                    pcVar5 = pcVar5 + 1;
                                } while (*pcVar12 == *pcVar5);
                            }
                            uVar4 = (1 - __n) + uVar4 + uVar7;
                            uVar10 = 0;
                        } else {
                        LAB_000401cc:
                            uVar7 = __n;
                            if ((uVar10 < __n) &&
                                (pcVar5 = (char *)((int)pvVar2 + uVar6 + uVar4),
                                 *(char *)((int)__needle + uVar6) ==
                                     *(char *)((int)pvVar2 + uVar6 + uVar4))) {
                                pcVar12 = (char *)((int)__needle + uVar6);
                                uVar1 = uVar6;
                                do {
                                    uVar7 = uVar1;
                                    if (uVar7 - 1 == uVar10 - 1)
                                        break;
                                    pcVar12 = pcVar12 + -1;
                                    pcVar5 = pcVar5 + -1;
                                    uVar1 = uVar7 - 1;
                                } while (*pcVar12 == *pcVar5);
                            }
                            if (uVar7 < uVar10 + 1) {
                                return (void *)((int)pvVar2 + uVar4);
                            }
                            uVar4 = uVar4 + iVar11;
                            uVar10 = __needlelen - iVar11;
                        }
                    } while (uVar4 <= uVar9 - __needlelen);
                } else {
                    iVar11 = __n - 1;
                    uVar4 = __needlelen - __n;
                    if (__needlelen - __n < __n) {
                        uVar4 = __n;
                    }
                    uVar10 = 0;
                    do {
                        if (__n < __needlelen) {
                            pcVar12 = (char *)((int)pvVar2 + __n + uVar10);
                            pcVar5 = (char *)((int)__needle + __n);
                            sVar8 = __n;
                            if (*(char *)((int)pvVar2 + __n + uVar10) ==
                                *(char *)((int)__needle + __n)) {
                                do {
                                    sVar8 = sVar8 + 1;
                                    if (__needlelen == sVar8)
                                        goto LAB_000402f8;
                                    pcVar5 = pcVar5 + 1;
                                    pcVar12 = pcVar12 + 1;
                                } while (*pcVar5 == *pcVar12);
                            }
                            uVar10 = (1 - __n) + uVar10 + sVar8;
                        } else {
                        LAB_000402f8:
                            if (iVar11 == -1) {
                            LAB_0004033c:
                                return (void *)((int)pvVar2 + uVar10);
                            }
                            pcVar12 = (char *)((int)pvVar2 + iVar11 + uVar10);
                            pcVar5 = (char *)((int)__needle + iVar11);
                            if (*(char *)((int)pvVar2 + iVar11 + uVar10) ==
                                *(char *)((int)__needle + iVar11)) {
                                do {
                                    if (pcVar5 == (char *)__needle)
                                        goto LAB_0004033c;
                                    pcVar5 = pcVar5 + -1;
                                    pcVar12 = pcVar12 + -1;
                                } while (*pcVar5 == *pcVar12);
                            }
                            uVar10 = uVar10 + uVar4 + 1;
                        }
                    } while (uVar10 <= uVar9 - __needlelen);
                }
            }
        }
        __haystack = (void *)0x0;
    }
    return __haystack;
}

void FUN_000403a0(int param_1)

{
    bool bVar1;
    int iVar2;
    int *piVar3;

    piVar3 = (int *)(param_1 + 4);
    DataMemoryBarrier(0xb);
    do {
        iVar2 = *piVar3;
        bVar1 = (bool)hasExclusiveAccess(piVar3);
    } while (!bVar1);
    *piVar3 = iVar2 + -1;
    if (iVar2 + -1 == 0) {
        FUN_000495fc();
        return;
    }
    return;
}

undefined4 FUN_000403c8(byte *param_1, undefined4 param_2)

{
    byte bVar1;
    byte bVar2;
    void *pvVar3;
    int iVar4;
    undefined4 uVar5;
    uint __size;
    uint __size_00;
    undefined1 auStack_9e0[252];
    undefined4 local_8e4;
    undefined4 local_8e0;
    undefined4 local_8dc;
    void *local_8c0;
    void *local_8ac;
    void *local_8a0;
    void *local_898;
    char acStack_820[2048];

    if ((DAT_000686e1 != '\0') &&
        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
          (6 < DAT_00067858)))) {
        snprintf(acStack_820, 0x800, "got nonce sz %d", param_2);
        FUN_0001dbec(7, acStack_820, 0);
    }
    bVar1 = *param_1;
    uVar5 = *(undefined4 *)(param_1 + 1);
    memcpy(auStack_9e0, param_1 + 5, 0x1c0);
    __size_00 = (uint)param_1[0x1c5];
    param_1 = param_1 + 0x1c6;
    pvVar3 = calloc(1, __size_00);
    local_8c0 = memcpy(pvVar3, param_1, __size_00);
    __size = (uint)param_1[__size_00];
    param_1 = param_1 + __size_00 + 1;
    pvVar3 = calloc(1, __size);
    local_8ac = memcpy(pvVar3, param_1, __size);
    bVar2 = param_1[__size];
    pvVar3 = calloc(1, (uint)bVar2);
    local_8a0 = memcpy(pvVar3, param_1 + __size + 1, (uint)bVar2);
    local_898 = calloc(1, 1);
    local_8dc = *(undefined4 *)(DAT_00072efc + (uint)bVar1 * 4);
    local_8e4 = *DAT_00073f18;
    local_8e0 = *(undefined4 *)*DAT_00073f18;
    iVar4 = FUN_0002bac0(*DAT_00073f18, uVar5);
    if ((iVar4 == 0) ||
        (iVar4 = FUN_0002ba54(auStack_9e0, uVar5), iVar4 == 0)) {
        FUN_00031004(*DAT_00073f18);
        FUN_0002a880(auStack_9e0);
        uVar5 = 0xffffffff;
    } else {
        FUN_0003c140(*DAT_00073f18, auStack_9e0);
        if ((DAT_00072da8 != 0) && (DAT_00072e5c != '\0')) {
            FUN_0002ab1c(auStack_9e0, uVar5);
        }
        if ((DAT_000686e1 != '\0') &&
            (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
              (6 < DAT_00067858)))) {
            snprintf(acStack_820, 0x800, "%s nonce submited",
                     "cb_bitmain_submit_nonce");
            FUN_0001dbec(7, acStack_820, 0);
        }
        FUN_0002a880(auStack_9e0);
        uVar5 = 0;
    }
    return uVar5;
}

void FUN_0004064c(undefined4 param_1)

{
    int iVar1;
    int *piVar2;
    char acStack_808[2048];

    iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000762f8);
    if (iVar1 == 0) {
        return;
    }
    piVar2 = __errno_location();
    snprintf(acStack_808, 0x800,
             "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar2,
             "socketa_api.c", "cb_bitmain_api_stats", param_1);
    FUN_0001dbec(3, acStack_808, 1);
    FUN_0003c4b4(1);
    return;
}

/* WARNING: Globals starting with '_' overlap smaller symbols at the same
 * address */
/* WARNING: Restarted to delay deadcode elimination for space: ram */

undefined4 FUN_000406c8(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    int iVar2;
    int *piVar3;
    undefined4 uVar4;
    uint uVar5;
    int *piVar6;
    int *piVar7;
    uint uVar8;
    int *piVar9;
    uint uVar10;
    uint uVar11;
    char *__s;
    undefined4 *puVar12;
    char *pcVar13;
    uint uVar14;
    bool bVar15;
    undefined4 extraout_s1;
    undefined8 uVar16;
    undefined1 auStack_924[92];
    undefined1 auStack_8c8[160];
    char acStack_828[2052];

    if ((DAT_000686e1 != '\0') &&
        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
          (6 < DAT_00067858)))) {
        snprintf(acStack_828, 0x800, "%s(%d) : %s", "cb_bitmain_api_stats",
                 param_2, param_1);
        FUN_0001dbec(7, acStack_828, 0);
    }
    piVar1 = (int *)FUN_00047e20(param_1, 0, auStack_924);
    if ((piVar1 == (int *)0x0) || (*piVar1 != 0)) {
        if ((DAT_00072d88 != '\0') ||
            ((DAT_000686e0 != '\0' || (2 < DAT_00067858)))) {
            snprintf(acStack_828, 0x800, "%s: load data is failed(%s)",
                     "cb_bitmain_api_stats", auStack_8c8);
            FUN_0001dbec(3, acStack_828, 0);
        }
        return 0xfffffffe;
    }
    iVar2 = pthread_mutex_lock((pthread_mutex_t *)&DAT_000762f8);
    if (iVar2 != 0) {
        piVar3 = __errno_location();
        snprintf(acStack_828, 0x800,
                 "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar3,
                 "socketa_api.c", "cb_bitmain_api_stats", 0x99);
        FUN_0001dbec(3, acStack_828, 1);
        FUN_0003c4b4(1);
    }
    memset(&DAT_00076310, 0, 0x1a10);
    piVar3 = (int *)FUN_00048cc4(piVar1, "inited");
    if ((piVar3 == (int *)0x0) || (*piVar3 != 3)) {
        if ((DAT_00072d88 != '\0') ||
            ((DAT_000686e0 != '\0' || (2 < DAT_00067858)))) {
            snprintf(acStack_828, 0x800, "%s: load json failed",
                     "cb_bitmain_api_stats");
            FUN_0001dbec(3, acStack_828, 0);
        }
        iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000762f8);
        if (iVar2 != 0) {
            piVar3 = __errno_location();
            snprintf(acStack_828, 0x800,
                     "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d",
                     *piVar3, "socketa_api.c", "cb_bitmain_api_stats", 0x9e);
            FUN_0001dbec(3, acStack_828, 1);
            FUN_0003c4b4(1);
        }
        (*DAT_0006797c)();
        if (piVar1[1] == -1) {
            return 0xfffffffd;
        }
        piVar3 = piVar1 + 1;
        DataMemoryBarrier(0xb);
        do {
            iVar2 = *piVar3 + -1;
            bVar15 = (bool)hasExclusiveAccess(piVar3);
        } while (!bVar15);
        *piVar3 = iVar2;
    } else {
        DAT_00076318 = FUN_00049454();
        piVar3 = (int *)FUN_00048cc4(piVar1, "chain_num");
        if ((piVar3 != (int *)0x0) && (*piVar3 == 3)) {
            DAT_00076314 = FUN_00049454();
            piVar3 = (int *)FUN_00048cc4(piVar1, "real_miner_type");
            if ((piVar3 != (int *)0x0) && (*piVar3 == 2)) {
                uVar4 = FUN_000491f8();
                snprintf(&DAT_0007631c, 0x100, "%s", uVar4);
            }
            piVar3 = (int *)FUN_00048cc4(piVar1, "rate_5s");
            if ((piVar3 == (int *)0x0) || (*piVar3 != 2)) {
                if ((DAT_00072d88 != '\0') ||
                    ((DAT_000686e0 != '\0' || (2 < DAT_00067858)))) {
                    snprintf(acStack_828, 0x800, "%s: load json failed",
                             "cb_bitmain_api_stats");
                    FUN_0001dbec(3, acStack_828, 0);
                }
                iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000762f8);
                if (iVar2 != 0) {
                    piVar3 = __errno_location();
                    snprintf(
                        acStack_828, 0x800,
                        "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d",
                        *piVar3, "socketa_api.c", "cb_bitmain_api_stats", 0xac);
                    FUN_0001dbec(3, acStack_828, 1);
                    FUN_0003c4b4(1);
                }
            } else {
                uVar4 = FUN_000491f8();
                snprintf(&DAT_0007641c, 0x10, "%s", uVar4);
                piVar3 = (int *)FUN_00048cc4(piVar1, "rate_30m");
                if ((piVar3 == (int *)0x0) || (*piVar3 != 2)) {
                    if ((DAT_00072d88 != '\0') ||
                        ((DAT_000686e0 != '\0' || (2 < DAT_00067858)))) {
                        snprintf(acStack_828, 0x800, "%s: load json failed",
                                 "cb_bitmain_api_stats");
                        FUN_0001dbec(3, acStack_828, 0);
                    }
                    uVar4 = 0xb0;
                } else {
                    uVar4 = FUN_000491f8();
                    snprintf(&DAT_0007642c, 0x10, "%s", uVar4);
                    piVar3 = (int *)FUN_00048cc4(piVar1, "rate_avg");
                    if ((piVar3 == (int *)0x0) || (*piVar3 != 2)) {
                        if ((DAT_00072d88 != '\0') ||
                            ((DAT_000686e0 != '\0' || (2 < DAT_00067858)))) {
                            snprintf(acStack_828, 0x800, "%s: load json failed",
                                     "cb_bitmain_api_stats");
                            FUN_0001dbec(3, acStack_828, 0);
                        }
                        uVar4 = 0xb4;
                    } else {
                        uVar4 = FUN_000491f8();
                        snprintf(&DAT_0007643c, 0x10, "%s", uVar4);
                        strncpy(&DAT_0006a6b0, &DAT_0007643c, 0x10);
                        piVar3 = (int *)FUN_00048cc4(piVar1, "rate_ideal");
                        if ((piVar3 == (int *)0x0) || (*piVar3 != 2)) {
                            if ((DAT_00072d88 != '\0') ||
                                ((DAT_000686e0 != '\0' ||
                                  (2 < DAT_00067858)))) {
                                snprintf(acStack_828, 0x800,
                                         "%s: load json failed",
                                         "cb_bitmain_api_stats");
                                FUN_0001dbec(3, acStack_828, 0);
                            }
                            uVar4 = 0xb9;
                        } else {
                            uVar4 = FUN_000491f8();
                            snprintf(&DAT_0007644c, 0x10, "%s", uVar4);
                            piVar3 = (int *)FUN_00048cc4(piVar1, "rate_unit");
                            if ((piVar3 == (int *)0x0) || (*piVar3 != 2)) {
                                if ((DAT_00072d88 != '\0') ||
                                    ((DAT_000686e0 != '\0' ||
                                      (2 < DAT_00067858)))) {
                                    snprintf(acStack_828, 0x800,
                                             "%s: load json failed",
                                             "cb_bitmain_api_stats");
                                    FUN_0001dbec(3, acStack_828, 0);
                                }
                                uVar4 = 0xbd;
                            } else {
                                uVar4 = FUN_000491f8();
                                snprintf(&DAT_0007645c, 8, "%s", uVar4);
                                piVar3 = (int *)FUN_00048cc4(piVar1, "fan_num");
                                if ((piVar3 == (int *)0x0) || (*piVar3 != 3)) {
                                    if ((DAT_00072d88 != '\0') ||
                                        ((DAT_000686e0 != '\0' ||
                                          (2 < DAT_00067858)))) {
                                        snprintf(acStack_828, 0x800,
                                                 "%s: load json failed",
                                                 "cb_bitmain_api_stats");
                                        FUN_0001dbec(3, acStack_828, 0);
                                    }
                                    uVar4 = 0xc1;
                                } else {
                                    DAT_00076464 = FUN_00049454();
                                    piVar3 = (int *)FUN_00048cc4(piVar1,
                                                                 &DAT_000560d8);
                                    if ((piVar3 == (int *)0x0) ||
                                        (*piVar3 != 1)) {
                                        if ((DAT_00072d88 != '\0') ||
                                            ((DAT_000686e0 != '\0' ||
                                              (2 < DAT_00067858)))) {
                                            snprintf(acStack_828, 0x800,
                                                     "%s: load json failed",
                                                     "cb_bitmain_api_stats");
                                            FUN_0001dbec(3, acStack_828, 0);
                                        }
                                        uVar4 = 0xc5;
                                    } else {
                                        puVar12 = &DAT_00076464;
                                        uVar11 = 0;
                                        while (true) {
                                            uVar5 = FUN_00049030(piVar3);
                                            if ((uVar5 <= uVar11) ||
                                                (piVar6 = (int *)FUN_0004904c(
                                                     piVar3, uVar11),
                                                 piVar6 == (int *)0x0))
                                                break;
                                            if (*piVar6 != 3) {
                                                if (((DAT_00072d88 != '\0') ||
                                                     (DAT_000686e0 != '\0')) ||
                                                    (2 < DAT_00067858)) {
                                                    snprintf(
                                                        acStack_828, 0x800,
                                                        "%s: load json failed",
                                                        "cb_bitmain_api_stats");
                                                    FUN_0001dbec(3, acStack_828,
                                                                 0);
                                                }
                                                uVar4 = 199;
                                                goto LAB_00040c90;
                                            }
                                            uVar4 = FUN_00049454();
                                            puVar12 = puVar12 + 1;
                                            *puVar12 = uVar4;
                                            uVar11 = uVar11 + 1;
                                        }
                                        piVar3 = (int *)FUN_00048cc4(piVar1,
                                                                     "chain");
                                        if ((piVar3 == (int *)0x0) ||
                                            (*piVar3 != 1)) {
                                            if (((DAT_00072d88 != '\0') ||
                                                 (DAT_000686e0 != '\0')) ||
                                                (2 < DAT_00067858)) {
                                                snprintf(
                                                    acStack_828, 0x800,
                                                    "%s: load json failed",
                                                    "cb_bitmain_api_stats");
                                                FUN_0001dbec(3, acStack_828, 0);
                                            }
                                            uVar4 = 0xcc;
                                        } else {
                                            __s = &DAT_0007666c;
                                            DAT_00076058 = 0;
                                            for (uVar11 = 0;
                                                 (uVar5 = FUN_00049030(piVar3),
                                                 uVar11 < uVar5 &&
                                                      (piVar6 =
                                                           (int *)FUN_0004904c(
                                                               piVar3, uVar11),
                                                      piVar6 != (int *)0x0 &&
                                                           uVar11 != 4));
                                                 uVar11 = uVar11 + 1) {
                                                if (*piVar6 != 0) {
                                                    if (((DAT_00072d88 !=
                                                          '\0') ||
                                                         (DAT_000686e0 !=
                                                          '\0')) ||
                                                        (2 < DAT_00067858)) {
                                                        snprintf(acStack_828,
                                                                 0x800,
                                                                 "%s: load "
                                                                 "json failed",
                                                                 "cb_bitmain_"
                                                                 "api_stats");
                                                        FUN_0001dbec(
                                                            3, acStack_828, 0);
                                                    }
                                                    uVar4 = 0xd2;
                                                    goto LAB_00040c90;
                                                }
                                                piVar7 = (int *)FUN_00048cc4(
                                                    piVar6, "index");
                                                if ((piVar7 == (int *)0x0) ||
                                                    (*piVar7 != 3)) {
                                                    if ((DAT_00072d88 !=
                                                         '\0') ||
                                                        ((DAT_000686e0 !=
                                                              '\0' ||
                                                          (2 <
                                                           DAT_00067858)))) {
                                                        snprintf(acStack_828,
                                                                 0x800,
                                                                 "%s: load "
                                                                 "json failed",
                                                                 "cb_bitmain_"
                                                                 "api_stats");
                                                        FUN_0001dbec(
                                                            3, acStack_828, 0);
                                                    }
                                                    uVar4 = 0xd5;
                                                    goto LAB_00040c90;
                                                }
                                                uVar4 = FUN_00049454();
                                                *(undefined4 *)(__s + -500) =
                                                    uVar4;
                                                piVar7 = (int *)FUN_00048cc4(
                                                    piVar6, "freq_avg");
                                                if ((piVar7 == (int *)0x0) ||
                                                    (*piVar7 != 3)) {
                                                    if ((DAT_00072d88 !=
                                                         '\0') ||
                                                        ((DAT_000686e0 !=
                                                              '\0' ||
                                                          (2 <
                                                           DAT_00067858)))) {
                                                        snprintf(acStack_828,
                                                                 0x800,
                                                                 "%s: load "
                                                                 "json failed",
                                                                 "cb_bitmain_"
                                                                 "api_stats");
                                                        FUN_0001dbec(
                                                            3, acStack_828, 0);
                                                    }
                                                    uVar4 = 0xd9;
                                                    goto LAB_00040c90;
                                                }
                                                uVar4 = FUN_00049454();
                                                *(undefined4 *)(__s + -0x1f0) =
                                                    uVar4;
                                                piVar7 = (int *)FUN_00048cc4(
                                                    piVar6, "rate_ideal");
                                                if ((piVar7 == (int *)0x0) ||
                                                    (*piVar7 != 2)) {
                                                    if ((DAT_00072d88 !=
                                                         '\0') ||
                                                        ((DAT_000686e0 !=
                                                              '\0' ||
                                                          (2 <
                                                           DAT_00067858)))) {
                                                        snprintf(acStack_828,
                                                                 0x800,
                                                                 "%s: load "
                                                                 "json failed",
                                                                 "cb_bitmain_"
                                                                 "api_stats");
                                                        FUN_0001dbec(
                                                            3, acStack_828, 0);
                                                    }
                                                    uVar4 = 0xdd;
                                                    goto LAB_00040c90;
                                                }
                                                uVar4 = FUN_000491f8();
                                                snprintf(__s + -0x1ec, 0x10,
                                                         "%s", uVar4);
                                                piVar7 = (int *)FUN_00048cc4(
                                                    piVar6, "rate_real");
                                                if ((piVar7 == (int *)0x0) ||
                                                    (*piVar7 != 2)) {
                                                    if ((DAT_00072d88 !=
                                                         '\0') ||
                                                        ((DAT_000686e0 !=
                                                              '\0' ||
                                                          (2 <
                                                           DAT_00067858)))) {
                                                        snprintf(acStack_828,
                                                                 0x800,
                                                                 "%s: load "
                                                                 "json failed",
                                                                 "cb_bitmain_"
                                                                 "api_stats");
                                                        FUN_0001dbec(
                                                            3, acStack_828, 0);
                                                    }
                                                    uVar4 = 0xe1;
                                                    goto LAB_00040c90;
                                                }
                                                uVar4 = FUN_000491f8();
                                                snprintf(__s + -0x1dc, 0x10,
                                                         "%s", uVar4);
                                                piVar7 = (int *)FUN_00048cc4(
                                                    piVar6, "asic_num");
                                                if ((piVar7 == (int *)0x0) ||
                                                    (*piVar7 != 3)) {
                                                    if ((DAT_00072d88 !=
                                                         '\0') ||
                                                        ((DAT_000686e0 !=
                                                              '\0' ||
                                                          (2 <
                                                           DAT_00067858)))) {
                                                        snprintf(acStack_828,
                                                                 0x800,
                                                                 "%s: load "
                                                                 "json failed",
                                                                 "cb_bitmain_"
                                                                 "api_stats");
                                                        FUN_0001dbec(
                                                            3, acStack_828, 0);
                                                    }
                                                    uVar4 = 0xe5;
                                                    goto LAB_00040c90;
                                                }
                                                uVar4 = FUN_00049454();
                                                *(undefined4 *)(__s + -0x1cc) =
                                                    uVar4;
                                                piVar7 = (int *)FUN_00048cc4(
                                                    piVar6, &DAT_00056108);
                                                if ((piVar7 == (int *)0x0) ||
                                                    (*piVar7 != 2)) {
                                                    if ((DAT_00072d88 !=
                                                         '\0') ||
                                                        ((DAT_000686e0 !=
                                                              '\0' ||
                                                          (2 <
                                                           DAT_00067858)))) {
                                                        snprintf(acStack_828,
                                                                 0x800,
                                                                 "%s: load "
                                                                 "json failed",
                                                                 "cb_bitmain_"
                                                                 "api_stats");
                                                        FUN_0001dbec(
                                                            3, acStack_828, 0);
                                                    }
                                                    uVar4 = 0xe9;
                                                    goto LAB_00040c90;
                                                }
                                                uVar4 = FUN_000491f8();
                                                snprintf(__s + -0x1c8, 0x100,
                                                         "%s", uVar4);
                                                piVar7 = (int *)FUN_00048cc4(
                                                    piVar6, "temp_pic");
                                                if ((piVar7 == (int *)0x0) ||
                                                    (*piVar7 != 1)) {
                                                    if ((DAT_00072d88 !=
                                                         '\0') ||
                                                        ((DAT_000686e0 !=
                                                              '\0' ||
                                                          (2 <
                                                           DAT_00067858)))) {
                                                        snprintf(acStack_828,
                                                                 0x800,
                                                                 "%s: load "
                                                                 "json failed",
                                                                 "cb_bitmain_"
                                                                 "api_stats");
                                                        FUN_0001dbec(
                                                            3, acStack_828, 0);
                                                    }
                                                    uVar4 = 0xed;
                                                    goto LAB_00040c90;
                                                }
                                                pcVar13 = __s + -0xcc;
                                                uVar5 = 0;
                                                while (uVar8 =
                                                           FUN_00049030(piVar7),
                                                       uVar5 < uVar8) {
                                                    piVar9 =
                                                        (int *)FUN_0004904c(
                                                            piVar7, uVar5);
                                                    bVar15 = uVar5 == 4;
                                                    uVar5 = uVar5 + 1;
                                                    if (piVar9 == (int *)0x0 ||
                                                        bVar15)
                                                        break;
                                                    if (*piVar9 != 3) {
                                                        if (((DAT_00072d88 !=
                                                              '\0') ||
                                                             (DAT_000686e0 !=
                                                              '\0')) ||
                                                            (2 <
                                                             DAT_00067858)) {
                                                            snprintf(
                                                                acStack_828,
                                                                0x800,
                                                                "%s: load json "
                                                                "failed",
                                                                "cb_bitmain_"
                                                                "api_stats");
                                                            FUN_0001dbec(
                                                                3, acStack_828,
                                                                0);
                                                        }
                                                        uVar4 = 0xf1;
                                                        goto LAB_00040c90;
                                                    }
                                                    uVar4 = FUN_00049454();
                                                    pcVar13 = pcVar13 + 4;
                                                    *(undefined4 *)pcVar13 =
                                                        uVar4;
                                                }
                                                piVar7 = (int *)FUN_00048cc4(
                                                    piVar6, "temp_pcb");
                                                if ((piVar7 == (int *)0x0) ||
                                                    (*piVar7 != 1)) {
                                                    if ((DAT_00072d88 !=
                                                         '\0') ||
                                                        ((DAT_000686e0 !=
                                                              '\0' ||
                                                          (2 <
                                                           DAT_00067858)))) {
                                                        snprintf(acStack_828,
                                                                 0x800,
                                                                 "%s: load "
                                                                 "json failed",
                                                                 "cb_bitmain_"
                                                                 "api_stats");
                                                        FUN_0001dbec(
                                                            3, acStack_828, 0);
                                                    }
                                                    uVar4 = 0xf6;
                                                    goto LAB_00040c90;
                                                }
                                                pcVar13 = __s + -0xbc;
                                                uVar5 = 0;
                                                while (uVar8 =
                                                           FUN_00049030(piVar7),
                                                       uVar5 < uVar8) {
                                                    piVar9 =
                                                        (int *)FUN_0004904c(
                                                            piVar7, uVar5);
                                                    bVar15 = uVar5 == 4;
                                                    uVar5 = uVar5 + 1;
                                                    if (piVar9 == (int *)0x0 ||
                                                        bVar15)
                                                        break;
                                                    if (*piVar9 != 3) {
                                                        if (((DAT_00072d88 !=
                                                              '\0') ||
                                                             (DAT_000686e0 !=
                                                              '\0')) ||
                                                            (2 <
                                                             DAT_00067858)) {
                                                            snprintf(
                                                                acStack_828,
                                                                0x800,
                                                                "%s: load json "
                                                                "failed",
                                                                "cb_bitmain_"
                                                                "api_stats");
                                                            FUN_0001dbec(
                                                                3, acStack_828,
                                                                0);
                                                        }
                                                        uVar4 = 0xfa;
                                                        goto LAB_00040c90;
                                                    }
                                                    uVar4 = FUN_00049454();
                                                    pcVar13 = pcVar13 + 4;
                                                    *(undefined4 *)pcVar13 =
                                                        uVar4;
                                                }
                                                piVar7 = (int *)FUN_00048cc4(
                                                    piVar6, "temp_chip");
                                                if ((piVar7 == (int *)0x0) ||
                                                    (*piVar7 != 1)) {
                                                    if ((DAT_00072d88 !=
                                                         '\0') ||
                                                        ((DAT_000686e0 !=
                                                              '\0' ||
                                                          (2 <
                                                           DAT_00067858)))) {
                                                        snprintf(acStack_828,
                                                                 0x800,
                                                                 "%s: load "
                                                                 "json failed",
                                                                 "cb_bitmain_"
                                                                 "api_stats");
                                                        FUN_0001dbec(
                                                            3, acStack_828, 0);
                                                    }
                                                    uVar4 = 0xff;
                                                    goto LAB_00040c90;
                                                }
                                                pcVar13 = __s + -0xac;
                                                uVar5 = 0;
                                                while (uVar8 =
                                                           FUN_00049030(piVar7),
                                                       uVar5 < uVar8) {
                                                    piVar9 =
                                                        (int *)FUN_0004904c(
                                                            piVar7, uVar5);
                                                    bVar15 = uVar5 == 4;
                                                    uVar5 = uVar5 + 1;
                                                    if (piVar9 == (int *)0x0 ||
                                                        bVar15)
                                                        break;
                                                    if (*piVar9 != 3) {
                                                        if (((DAT_00072d88 !=
                                                              '\0') ||
                                                             (DAT_000686e0 !=
                                                              '\0')) ||
                                                            (2 <
                                                             DAT_00067858)) {
                                                            snprintf(
                                                                acStack_828,
                                                                0x800,
                                                                "%s: load json "
                                                                "failed",
                                                                "cb_bitmain_"
                                                                "api_stats");
                                                            FUN_0001dbec(
                                                                3, acStack_828,
                                                                0);
                                                        }
                                                        uVar4 = 0x103;
                                                        goto LAB_00040c90;
                                                    }
                                                    uVar4 = FUN_00049454();
                                                    pcVar13 = pcVar13 + 4;
                                                    *(undefined4 *)pcVar13 =
                                                        uVar4;
                                                }
                                                piVar7 = (int *)FUN_00048cc4(
                                                    piVar6, &DAT_00056134);
                                                if ((piVar7 == (int *)0x0) ||
                                                    (*piVar7 != 3)) {
                                                    if ((DAT_00072d88 !=
                                                         '\0') ||
                                                        ((DAT_000686e0 !=
                                                              '\0' ||
                                                          (2 <
                                                           DAT_00067858)))) {
                                                        snprintf(acStack_828,
                                                                 0x800,
                                                                 "%s: load "
                                                                 "json failed",
                                                                 "cb_bitmain_"
                                                                 "api_stats");
                                                        FUN_0001dbec(
                                                            3, acStack_828, 0);
                                                    }
                                                    uVar4 = 0x108;
                                                    goto LAB_00040c90;
                                                }
                                                iVar2 = FUN_00049454();
                                                *(int *)(__s + -0x98) = iVar2;
                                                DAT_00077d14 = 0;
                                                DAT_00076058 =
                                                    DAT_00076058 + iVar2;
                                                piVar7 = (int *)FUN_00048cc4(
                                                    piVar6, "rate_array");
                                                if ((piVar7 == (int *)0x0) ||
                                                    (*piVar7 != 1)) {
                                                    if ((DAT_00072d88 !=
                                                         '\0') ||
                                                        ((DAT_000686e0 !=
                                                              '\0' ||
                                                          (2 <
                                                           DAT_00067858)))) {
                                                        snprintf(acStack_828,
                                                                 0x800,
                                                                 "%s: load "
                                                                 "json failed",
                                                                 "cb_bitmain_"
                                                                 "api_stats");
                                                        FUN_0001dbec(
                                                            3, acStack_828, 0);
                                                    }
                                                    uVar4 = 0x10e;
                                                    goto LAB_00040c90;
                                                }
                                                pcVar13 = __s + -0x98;
                                                uVar5 = 0;
                                                while (true) {
                                                    uVar8 =
                                                        FUN_00049030(piVar7);
                                                    if ((uVar8 <= uVar5) ||
                                                        (piVar9 = (int *)
                                                             FUN_0004904c(
                                                                 piVar7, uVar5),
                                                         piVar9 == (int *)0x0))
                                                        break;
                                                    if (*piVar9 != 3) {
                                                        if (((DAT_00072d88 !=
                                                              '\0') ||
                                                             (DAT_000686e0 !=
                                                              '\0')) ||
                                                            (2 <
                                                             DAT_00067858)) {
                                                            snprintf(
                                                                acStack_828,
                                                                0x800,
                                                                "%s: load json "
                                                                "failed",
                                                                "cb_bitmain_"
                                                                "api_stats");
                                                            FUN_0001dbec(
                                                                3, acStack_828,
                                                                0);
                                                        }
                                                        uVar4 = 0x110;
                                                        goto LAB_00040c90;
                                                    }
                                                    uVar4 = FUN_00049454();
                                                    pcVar13 = pcVar13 + 4;
                                                    *(undefined4 *)pcVar13 =
                                                        uVar4;
                                                    DAT_00077d14 =
                                                        DAT_00077d14 + 1;
                                                    uVar5 = uVar5 + 1;
                                                }
                                                piVar7 = (int *)FUN_00048cc4(
                                                    piVar6, "nonce");
                                                if ((piVar7 == (int *)0x0) ||
                                                    (*piVar7 != 3)) {
                                                    if (((DAT_00072d88 !=
                                                          '\0') ||
                                                         (DAT_000686e0 !=
                                                          '\0')) ||
                                                        (2 < DAT_00067858)) {
                                                        snprintf(acStack_828,
                                                                 0x800,
                                                                 "%s: load "
                                                                 "json failed",
                                                                 "cb_bitmain_"
                                                                 "api_stats");
                                                        FUN_0001dbec(
                                                            3, acStack_828, 0);
                                                    }
                                                    uVar4 = 0x116;
                                                    goto LAB_00040c90;
                                                }
                                                iVar2 = FUN_00049454();
                                                *(int *)(__s + -0x34) = iVar2;
                                                DAT_00077d10 =
                                                    DAT_00077d10 + iVar2;
                                                piVar7 = (int *)FUN_00048cc4(
                                                    piVar6, "eeprom");
                                                if ((piVar7 == (int *)0x0) ||
                                                    (1 < *piVar7 - 5U)) {
                                                    if ((DAT_00072d88 !=
                                                         '\0') ||
                                                        ((DAT_000686e0 !=
                                                              '\0' ||
                                                          (2 <
                                                           DAT_00067858)))) {
                                                        snprintf(acStack_828,
                                                                 0x800,
                                                                 "%s: load "
                                                                 "json failed",
                                                                 "cb_bitmain_"
                                                                 "api_stats");
                                                        FUN_0001dbec(
                                                            3, acStack_828, 0);
                                                    }
                                                    uVar4 = 0x11b;
                                                    goto LAB_00040c90;
                                                }
                                                __s[-0x30] = *piVar7 == 5;
                                                piVar7 = (int *)FUN_00048cc4(
                                                    piVar6, &DAT_0005614c);
                                                if ((piVar7 == (int *)0x0) ||
                                                    (*piVar7 != 2)) {
                                                    if ((DAT_00072d88 !=
                                                         '\0') ||
                                                        ((DAT_000686e0 !=
                                                              '\0' ||
                                                          (2 <
                                                           DAT_00067858)))) {
                                                        snprintf(acStack_828,
                                                                 0x800,
                                                                 "%s: load "
                                                                 "json failed",
                                                                 "cb_bitmain_"
                                                                 "api_stats");
                                                        FUN_0001dbec(
                                                            3, acStack_828, 0);
                                                    }
                                                    uVar4 = 0x11f;
                                                    goto LAB_00040c90;
                                                }
                                                uVar4 = FUN_000491f8();
                                                snprintf(__s + -0x2f, 0x20,
                                                         "%s", uVar4);
                                                piVar7 = (int *)FUN_00048cc4(
                                                    piVar6, "eeprom_vol");
                                                if ((piVar7 == (int *)0x0) ||
                                                    (*piVar7 != 3)) {
                                                    if ((DAT_00072d88 !=
                                                         '\0') ||
                                                        ((DAT_000686e0 !=
                                                              '\0' ||
                                                          (2 <
                                                           DAT_00067858)))) {
                                                        snprintf(acStack_828,
                                                                 0x800,
                                                                 "%s: load "
                                                                 "json failed",
                                                                 "cb_bitmain_"
                                                                 "api_stats");
                                                        FUN_0001dbec(
                                                            3, acStack_828, 0);
                                                    }
                                                    uVar4 = 0x123;
                                                    goto LAB_00040c90;
                                                }
                                                uVar4 = FUN_00049454();
                                                *(undefined4 *)(__s + -8) =
                                                    uVar4;
                                                piVar7 = (int *)FUN_00048cc4(
                                                    piVar6, "eeprom_freq");
                                                if ((piVar7 == (int *)0x0) ||
                                                    (*piVar7 != 3)) {
                                                    if ((DAT_00072d88 !=
                                                         '\0') ||
                                                        ((DAT_000686e0 !=
                                                              '\0' ||
                                                          (2 <
                                                           DAT_00067858)))) {
                                                        snprintf(acStack_828,
                                                                 0x800,
                                                                 "%s: load "
                                                                 "json failed",
                                                                 "cb_bitmain_"
                                                                 "api_stats");
                                                        FUN_0001dbec(
                                                            3, acStack_828, 0);
                                                    }
                                                    uVar4 = 0x127;
                                                    goto LAB_00040c90;
                                                }
                                                uVar4 = FUN_00049454();
                                                *(undefined4 *)(__s + -0xc) =
                                                    uVar4;
                                                piVar7 = (int *)FUN_00048cc4(
                                                    piVar6, "eeprom_bin");
                                                if ((piVar7 == (int *)0x0) ||
                                                    (*piVar7 != 3)) {
                                                    if ((DAT_00072d88 !=
                                                         '\0') ||
                                                        ((DAT_000686e0 !=
                                                              '\0' ||
                                                          (2 <
                                                           DAT_00067858)))) {
                                                        snprintf(acStack_828,
                                                                 0x800,
                                                                 "%s: load "
                                                                 "json failed",
                                                                 "cb_bitmain_"
                                                                 "api_stats");
                                                        FUN_0001dbec(
                                                            3, acStack_828, 0);
                                                    }
                                                    uVar4 = 299;
                                                    goto LAB_00040c90;
                                                }
                                                uVar4 = FUN_00049454();
                                                *(undefined4 *)(__s + -4) =
                                                    uVar4;
                                                piVar7 = (int *)FUN_00048cc4(
                                                    piVar6, "eeprom_ft");
                                                if ((piVar7 == (int *)0x0) ||
                                                    (*piVar7 != 2)) {
                                                    if ((DAT_00072d88 !=
                                                         '\0') ||
                                                        ((DAT_000686e0 !=
                                                              '\0' ||
                                                          (2 <
                                                           DAT_00067858)))) {
                                                        snprintf(acStack_828,
                                                                 0x800,
                                                                 "%s: load "
                                                                 "json failed",
                                                                 "cb_bitmain_"
                                                                 "api_stats");
                                                        FUN_0001dbec(
                                                            3, acStack_828, 0);
                                                    }
                                                    uVar4 = 0x12f;
                                                    goto LAB_00040c90;
                                                }
                                                uVar4 = FUN_000491f8();
                                                snprintf(__s, 0x10, "%s",
                                                         uVar4);
                                                piVar7 = (int *)FUN_00048cc4(
                                                    piVar6, "eeprom_code");
                                                if ((piVar7 == (int *)0x0) ||
                                                    (*piVar7 != 3)) {
                                                    if ((DAT_00072d88 !=
                                                         '\0') ||
                                                        ((DAT_000686e0 !=
                                                              '\0' ||
                                                          (2 <
                                                           DAT_00067858)))) {
                                                        snprintf(acStack_828,
                                                                 0x800,
                                                                 "%s: load "
                                                                 "json failed",
                                                                 "cb_bitmain_"
                                                                 "api_stats");
                                                        FUN_0001dbec(
                                                            3, acStack_828, 0);
                                                    }
                                                    uVar4 = 0x133;
                                                    goto LAB_00040c90;
                                                }
                                                uVar4 = FUN_00049454();
                                                *(undefined4 *)(__s + 0x10) =
                                                    uVar4;
                                                iVar2 = FUN_00048cc4(
                                                    piVar6, &DAT_0005618c);
                                                if (iVar2 != 0) {
                                                    uVar8 = 0;
                                                    uVar16 = FUN_00049030();
                                                    uVar5 = (uint)((ulonglong)
                                                                       uVar16 >>
                                                                   0x20);
                                                    *(int *)(__s + 0x14) =
                                                        (int)uVar16;
                                                    while ((
                                                        uVar5 = FUN_00049030(
                                                            iVar2, uVar5),
                                                        uVar8 < uVar5 &&
                                                            (piVar6 = (int *)
                                                                 FUN_0004904c(
                                                                     iVar2,
                                                                     uVar8),
                                                             piVar6 !=
                                                                 (int *)0x0))) {
                                                        if (*piVar6 != 1) {
                                                            if (((DAT_00072d88 !=
                                                                  '\0') ||
                                                                 (DAT_000686e0 !=
                                                                  '\0')) ||
                                                                (2 <
                                                                 DAT_00067858)) {
                                                                snprintf(
                                                                    acStack_828,
                                                                    0x800,
                                                                    "%s: load "
                                                                    "json "
                                                                    "failed",
                                                                    "cb_"
                                                                    "bitmain_"
                                                                    "api_"
                                                                    "stats");
                                                                FUN_0001dbec(
                                                                    3,
                                                                    acStack_828,
                                                                    0);
                                                            }
                                                            uVar4 = 0x13d;
                                                            goto LAB_00040c90;
                                                        }
                                                        uVar4 = FUN_00049030();
                                                        *(undefined4 *)(__s +
                                                                        0x18) =
                                                            uVar4;
                                                        for (uVar14 = 0;
                                                             uVar10 =
                                                                 FUN_00049030(
                                                                     piVar6),
                                                            uVar5 = uVar14,
                                                            uVar14 < uVar10;
                                                             uVar14 =
                                                                 uVar14 + 1) {
                                                            uVar16 =
                                                                FUN_0004904c(
                                                                    piVar6);
                                                            uVar5 =
                                                                (uint)((ulonglong)
                                                                           uVar16 >>
                                                                       0x20);
                                                            if ((int)uVar16 ==
                                                                0)
                                                                break;
                                                            uVar4 =
                                                                FUN_00049454();
                                                            *(undefined4
                                                                  *)(&DAT_00076310 +
                                                                     (*(int *)(__s +
                                                                               0x18) *
                                                                          uVar8 +
                                                                      uVar11 *
                                                                          0x184 +
                                                                      uVar14 +
                                                                      0xde) *
                                                                         4) =
                                                                uVar4;
                                                        }
                                                        uVar8 = uVar8 + 1;
                                                    }
                                                }
                                                __s = __s + 0x610;
                                            }
                                            piVar3 = (int *)FUN_00048cc4(
                                                piVar1, "miner_version");
                                            if ((piVar3 == (int *)0x0) ||
                                                (*piVar3 != 2)) {
                                                if ((DAT_00072d88 != '\0') ||
                                                    ((DAT_000686e0 != '\0' ||
                                                      (2 < DAT_00067858)))) {
                                                    snprintf(
                                                        acStack_828, 0x800,
                                                        "%s: load json failed",
                                                        "cb_bitmain_api_stats");
                                                    FUN_0001dbec(3, acStack_828,
                                                                 0);
                                                }
                                                uVar4 = 0x146;
                                            } else {
                                                uVar4 = FUN_000491f8();
                                                snprintf(&DAT_00077cb8, 0x30,
                                                         "%s", uVar4);
                                                iVar2 = strcmp(&DAT_00077cb8,
                                                               &DAT_0006a6c8);
                                                if (iVar2 != 0) {
                                                    strncpy(&DAT_0006a6c8,
                                                            &DAT_00077cb8,
                                                            0x100);
                                                }
                                                piVar3 = (int *)FUN_00048cc4(
                                                    piVar1, "total_hash");
                                                if ((piVar3 == (int *)0x0) ||
                                                    (*piVar3 != 4)) {
                                                    if ((DAT_00072d88 !=
                                                         '\0') ||
                                                        ((DAT_000686e0 !=
                                                              '\0' ||
                                                          (2 <
                                                           DAT_00067858)))) {
                                                        snprintf(acStack_828,
                                                                 0x800,
                                                                 "%s: load "
                                                                 "json failed",
                                                                 "cb_bitmain_"
                                                                 "api_stats");
                                                        FUN_0001dbec(
                                                            3, acStack_828, 0);
                                                    }
                                                    uVar4 = 0x14c;
                                                } else {
                                                    uVar4 = FUN_00049500();
                                                    DAT_00077ce8 =
                                                        (double)CONCAT44(
                                                            extraout_s1, uVar4);
                                                    _DAT_00072d80 =
                                                        DAT_00077ce8 * 1000.0;
                                                    piVar3 =
                                                        (int *)FUN_00048cc4(
                                                            piVar1, "miner_id");
                                                    if ((piVar3 ==
                                                         (int *)0x0) ||
                                                        (*piVar3 != 2)) {
                                                        if ((DAT_00072d88 !=
                                                             '\0') ||
                                                            ((DAT_000686e0 !=
                                                                  '\0' ||
                                                              (2 <
                                                               DAT_00067858)))) {
                                                            snprintf(
                                                                acStack_828,
                                                                0x800,
                                                                "%s: load json "
                                                                "failed",
                                                                "cb_bitmain_"
                                                                "api_stats");
                                                            FUN_0001dbec(
                                                                3, acStack_828,
                                                                0);
                                                        }
                                                        uVar4 = 0x151;
                                                    } else {
                                                        uVar4 = FUN_000491f8();
                                                        snprintf(&DAT_00077cf0,
                                                                 0x20, "%s",
                                                                 uVar4);
                                                        piVar3 =
                                                            (int *)FUN_00048cc4(
                                                                piVar1,
                                                                "error_code");
                                                        if ((piVar3 !=
                                                             (int *)0x0) &&
                                                            (*piVar3 == 3)) {
                                                            DAT_00077d18 =
                                                                FUN_00049454();
                                                            FUN_0004064c(0x158);
                                                            (*DAT_0006797c)();
                                                            if (piVar1[1] ==
                                                                -1) {
                                                                return 0;
                                                            }
                                                            FUN_000403a0(
                                                                piVar1);
                                                            return 0;
                                                        }
                                                        if (((DAT_00072d88 !=
                                                              '\0') ||
                                                             (DAT_000686e0 !=
                                                              '\0')) ||
                                                            (2 <
                                                             DAT_00067858)) {
                                                            snprintf(
                                                                acStack_828,
                                                                0x800,
                                                                "%s: load json "
                                                                "failed",
                                                                "cb_bitmain_"
                                                                "api_stats");
                                                            FUN_0001dbec(
                                                                3, acStack_828,
                                                                0);
                                                        }
                                                        uVar4 = 0x155;
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            LAB_00040c90:
                FUN_0004064c(uVar4);
            }
            (*DAT_0006797c)();
            if (piVar1[1] != -1) {
                FUN_000403a0(piVar1);
                return 0xfffffffd;
            }
            return 0xfffffffd;
        }
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (2 < DAT_00067858)) {
            snprintf(acStack_828, 0x800, "%s: load json failed",
                     "cb_bitmain_api_stats");
            FUN_0001dbec(3, acStack_828, 0);
        }
        iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000762f8);
        if (iVar2 != 0) {
            piVar3 = __errno_location();
            snprintf(acStack_828, 0x800,
                     "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d",
                     *piVar3, "socketa_api.c", "cb_bitmain_api_stats", 0xa2);
            FUN_0001dbec(3, acStack_828, 1);
            FUN_0003c4b4(1);
        }
        (*DAT_0006797c)();
        if (piVar1[1] == -1) {
            return 0xfffffffd;
        }
        piVar3 = piVar1 + 1;
        DataMemoryBarrier(0xb);
        do {
            iVar2 = *piVar3 + -1;
            bVar15 = (bool)hasExclusiveAccess(piVar3);
        } while (!bVar15);
        *piVar3 = iVar2;
    }
    if (iVar2 == 0) {
        FUN_000495fc(piVar1);
    }
    return 0xfffffffd;
}

void FUN_000426c4(undefined4 param_1, undefined4 param_2)

{
    char local_810[2048];

    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
        (4 < DAT_00067858)) {
        builtin_strncpy(local_810, "about to send detect", 0x14);
        local_810[0x14] = 0;
        FUN_0001dbec(5, local_810, 0);
    }
    FUN_00044e28(s_bitmain_api_detect_000682e0, param_1, param_2, local_810, 0,
                 0);
    return;
}

void FUN_00042848(undefined4 param_1, undefined4 param_2)

{
    char local_810[2048];

    if ((DAT_000686e1 != '\0') &&
        (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
          (6 < DAT_00067858)))) {
        builtin_strncpy(local_810, "about to send a flush api semaphore", 0x24);
        FUN_0001dbec(7, local_810, 0);
    }
    FUN_00044e28(s_bitmain_flush_api_0006846c, param_1, param_2, local_810, 0,
                 0);
    return;
}

void FUN_0004291c(undefined4 param_1, undefined4 param_2)

{
    char local_810[20];
    undefined2 uStack_7fc;
    undefined1 local_7fa;

    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
        (4 < DAT_00067858)) {
        builtin_strncpy(local_810, "about to send shutdo", 0x14);
        uStack_7fc = 0x6e77;
        local_7fa = 0;
        FUN_0001dbec(5, local_810, 0);
    }
    FUN_00044e28(s_bitmain_shutdown_000683e8, param_1, param_2, local_810, 0,
                 0);
    return;
}

uint FUN_000429e0(void)

{
    int iVar1;
    uint uVar2;
    uint uVar3;
    int *piVar4;
    char *pcVar5;
    char acStack_820[2048];

    iVar1 = pthread_mutex_init((pthread_mutex_t *)&DAT_000762f8,
                               (pthread_mutexattr_t *)0x0);
    if (iVar1 != 0) {
        piVar4 = __errno_location();
        snprintf(acStack_820, 0x800,
                 "Failed to pthread_mutex_init errno=%d in %s %s():%d", *piVar4,
                 "socketa_api.c", "cgminer_socket_init", 0x1fa);
        FUN_0001dbec(3, acStack_820, 1);
        FUN_0003c4b4(1);
    }
    iVar1 = pthread_mutex_init((pthread_mutex_t *)&DAT_00077d20,
                               (pthread_mutexattr_t *)0x0);
    if (iVar1 != 0) {
        piVar4 = __errno_location();
        snprintf(acStack_820, 0x800,
                 "Failed to pthread_mutex_init errno=%d in %s %s():%d", *piVar4,
                 "socketa_api.c", "cgminer_socket_init", 0x1fb);
        FUN_0001dbec(3, acStack_820, 1);
        FUN_0003c4b4(1);
    }
    uVar2 = FUN_00044914(&DAT_00055f1c, 2);
    if (uVar2 == 0) {
        while (true) {
            pcVar5 = s_bitmain_api_detect_000682e0;
            uVar2 = 0;
            do {
                uVar3 = FUN_00044b68(pcVar5);
                uVar2 = uVar2 | uVar3;
                if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                    (4 < DAT_00067858)) {
                    snprintf(acStack_820, 0x800, "%s reg %s return: %d",
                             "cgminer_socket_init", pcVar5, uVar2);
                    FUN_0001dbec(5, acStack_820, 0);
                }
                pcVar5 = pcVar5 + 0x84;
            } while (pcVar5 != &DAT_000684f0);
            if (uVar2 == 0)
                break;
            sleep(5);
            if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
                (2 < DAT_00067858)) {
                snprintf(acStack_820, 0x800, "%s reg failed wait 5s",
                         "cgminer_socket_init");
                FUN_0001dbec(3, acStack_820, 0);
            }
        }
    } else if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
               (2 < DAT_00067858)) {
        snprintf(acStack_820, 0x800, "%s trans init failed: %d",
                 "cgminer_socket_init", uVar2);
        FUN_0001dbec(3, acStack_820, 0);
    }
    return uVar2;
}

void FUN_00042c50(undefined4 param_1)

{
    bool bVar1;
    int *piVar2;
    undefined4 uVar3;
    int *piVar4;
    char *pcVar5;
    int iVar6;
    long lVar7;
    int iVar8;
    long lVar9;
    int iVar10;
    undefined1 auStack_99c[128];
    undefined1 auStack_91c[92];
    undefined1 auStack_8c0[160];
    char acStack_820[2052];

    memset(auStack_99c, 0, 0x80);
    FUN_0002b644(auStack_99c);
    piVar2 = (int *)FUN_00048178(auStack_99c, 0, auStack_91c);
    if ((piVar2 == (int *)0x0) || (*piVar2 != 0)) {
        if ((DAT_00072d88 == '\0') &&
            ((DAT_000686e0 == '\0' && (DAT_00067858 < 3)))) {
            lVar7 = -1;
            iVar8 = -1;
            lVar9 = lVar7;
            iVar10 = iVar8;
        } else {
            lVar7 = -1;
            iVar8 = -1;
            snprintf(acStack_820, 0x800,
                     "%s: JSON decode of file \'%s\' failed\n %s",
                     "load_conf_info", auStack_99c, auStack_8c0);
            FUN_0001dbec(3, acStack_820, 0);
            lVar9 = -1;
            iVar10 = -1;
        }
    } else {
        piVar4 = (int *)FUN_00048cc4(piVar2, "bitmain-work-mode");
        if ((piVar4 == (int *)0x0) || (*piVar4 != 2)) {
            lVar9 = -1;
            iVar10 = -1;
        } else {
            pcVar5 = (char *)FUN_000491f8();
            lVar9 = strtol(pcVar5, (char **)0x0, 10);
            iVar10 = lVar9 >> 0x1f;
        }
        piVar4 = (int *)FUN_00048cc4(piVar2, "bitmain-freq-level");
        if ((piVar4 == (int *)0x0) || (*piVar4 != 2)) {
            lVar7 = -1;
            iVar8 = -1;
        } else {
            pcVar5 = (char *)FUN_000491f8();
            lVar7 = strtol(pcVar5, (char **)0x0, 10);
            iVar8 = lVar7 >> 0x1f;
        }
        if (piVar2[1] != -1) {
            piVar4 = piVar2 + 1;
            DataMemoryBarrier(0xb);
            do {
                iVar6 = *piVar4;
                bVar1 = (bool)hasExclusiveAccess(piVar4);
            } while (!bVar1);
            *piVar4 = iVar6 + -1;
            if (iVar6 + -1 == 0) {
                FUN_000495fc(piVar2);
            }
        }
    }
    uVar3 = FUN_00049420(lVar9, iVar10);
    FUN_00049a64(param_1, "miner-mode", uVar3);
    uVar3 = FUN_00049420(lVar7, iVar8);
    FUN_00049a64(param_1, "freq-level", uVar3);
    return;
}

void FUN_00042e4c(void)

{
    int iVar1;
    char local_808[20];
    undefined2 local_7f4;

    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
        (4 < DAT_00067858)) {
        builtin_strncpy(local_808, "cgminer call shutdow", 0x14);
        local_7f4 = 0x6e;
        FUN_0001dbec(5, local_808, 0);
    }
    iVar1 = FUN_0004291c("shutdown", 8);
    if ((iVar1 != 0) && (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
                          (2 < DAT_00067858)))) {
        snprintf(local_808, 0x800, "%s: bitmain_shutdown failed.",
                 "bitmain_c5_shutdown");
        FUN_0001dbec(3, local_808, 0);
    }
    return;
}

undefined4 FUN_00042f48(void)

{
    char acStack_808[2052];

    snprintf(acStack_808, 0x800, "%s: api detect failed.",
             "bitmain_c5_prepare");
    FUN_0001dbec(3, acStack_808, 0);
    return 0;
}

undefined4 FUN_00042f90(void)

{
    tm *ptVar1;
    int iVar2;
    undefined4 uVar3;
    time_t atStack_b4[2];
    undefined1 auStack_ac[32];
    undefined1 auStack_8c[32];
    char acStack_6c[40];
    char acStack_44[60];

    memset(acStack_6c, 0, 0x28);
    memset(acStack_44, 0, 0x3b);
    memset(auStack_8c, 0, 0x20);
    FUN_00020580(atStack_b4);
    ptVar1 = localtime(atStack_b4);
    snprintf(acStack_6c, 0x28, "[%d-%02d-%02d %02d:%02d:%02d]",
             ptVar1->tm_year + 0x76c, ptVar1->tm_mon + 1, ptVar1->tm_mday,
             ptVar1->tm_hour, ptVar1->tm_min, ptVar1->tm_sec);
    snprintf(acStack_44, 0x3b, "%s%s", "BITMAIN_OPENSOURCE", acStack_6c);
    FUN_0001e8c8(acStack_44, 0x3b, auStack_8c);
    FUN_0001e8c8(auStack_8c, 0x20, auStack_ac);
    iVar2 = FUN_000426c4(auStack_ac, 0x20);
    if (iVar2 == 0) {
        FUN_0003d358();
        return 1;
    }
    if (((DAT_00072d88 == '\0') && (DAT_000686e0 == '\0')) &&
        (DAT_00067858 < 3)) {
        return 0;
    }
    uVar3 = FUN_00042f48();
    return uVar3;
}

void FUN_000430d8(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_810[2052];

    piVar1 = __errno_location();
    snprintf(acStack_810, 0x800,
             "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar1,
             "driver-btm-c5_socketa.c", param_1, param_2);
    FUN_0001dbec(3, acStack_810, 1);
    FUN_0003c4b4(1);
    return;
}

void FUN_0004313c(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_810[2052];

    piVar1 = __errno_location();
    snprintf(acStack_810, 0x800,
             "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar1,
             "driver-btm-c5_socketa.c", param_1, param_2);
    FUN_0001dbec(3, acStack_810, 1);
    FUN_0003c4b4(1);
    return;
}

void FUN_00043970(void)

{
    void *pvVar1;
    int iVar2;
    int *piVar3;
    undefined1 local_82c[4];
    char local_828[20];
    uint local_814;
    char acStack_810[4];
    undefined2 local_80c;

    pvVar1 = calloc(1, 0x188);
    if (pvVar1 == (void *)0x0) {
        /* WARNING: Subroutine does not return */
        __assert_fail("cgpu", "driver-btm-c5_socketa.c", 0x33,
                      "bitmain_c5_detect");
    }
    *(undefined **)((int)pvVar1 + 4) = &DAT_000684f0;
    *(undefined4 *)((int)pvVar1 + 0x20) = 0;
    *(undefined4 *)((int)pvVar1 + 0x94) = 1;
    iVar2 = FUN_000429e0();
    if (iVar2 == 0) {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (5 < DAT_00067858)) {
            builtin_strncpy(local_828, "cgminer socket init ", 0x14);
            local_814._0_1_ = 's';
            local_814._1_1_ = 'u';
            local_814._2_1_ = 'c';
            local_814._3_1_ = 'c';
            builtin_strncpy(acStack_810, "eeds", 4);
            local_80c = 0x2e;
            FUN_0001dbec(6, local_828, 0);
        }
    } else if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
               (2 < DAT_00067858)) {
        builtin_strncpy(local_828, "cgminer socket init ", 0x14);
        local_814._0_1_ = 'f';
        local_814._1_1_ = 'a';
        local_814._2_1_ = 'i';
        local_814._3_1_ = 'l';
        builtin_strncpy(acStack_810, "es.", 4);
        FUN_0001dbec(3, local_828, 0);
    }
    if (DAT_000688f8 != 0) {
        FUN_0003dc58();
    }
    local_82c[0] = 0;
    FUN_000207b4(2000);
    while (true) {
        FUN_00042848(local_82c, 1);
        FUN_000207b4(1000);
        iVar2 = pthread_mutex_lock((pthread_mutex_t *)&DAT_000762f8);
        if (iVar2 != 0) {
            piVar3 = __errno_location();
            snprintf(local_828, 0x800,
                     "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar3,
                     "driver-btm-c5_socketa.c", "bitmain_c5_detect", 0x4d);
            FUN_0001dbec(3, local_828, 1);
            FUN_0003c4b4(1);
        }
        if (DAT_00076318 != 0)
            break;
        iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000762f8);
        if (iVar2 != 0) {
            piVar3 = __errno_location();
            snprintf(local_828, 0x800,
                     "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d",
                     *piVar3, "driver-btm-c5_socketa.c", "bitmain_c5_detect",
                     0x53);
            FUN_0001dbec(3, local_828, 1);
            FUN_0003c4b4(1);
        }
        (*DAT_0006797c)();
    }
    iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000762f8);
    if (iVar2 != 0) {
        piVar3 = __errno_location();
        snprintf(local_828, 0x800,
                 "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar3,
                 "driver-btm-c5_socketa.c", "bitmain_c5_detect", 0x4f);
        FUN_0001dbec(3, local_828, 1);
        FUN_0003c4b4(1);
    }
    (*DAT_0006797c)();
    if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
        (4 < DAT_00067858)) {
        builtin_strncpy(local_828, "bmminer init done!!!", 0x14);
        local_814 = local_814 & 0xffffff00;
        FUN_0001dbec(5, local_828, 0);
    }
    iVar2 = FUN_0003c8e8(pvVar1);
    if (iVar2 == 0) {
        /* WARNING: Subroutine does not return */
        __assert_fail("add_cgpu(cgpu)", "driver-btm-c5_socketa.c", 0x55,
                      "bitmain_c5_detect");
    }
    return;
}

void *FUN_00043d00(void *param_1, size_t *param_2)

{
    char cVar1;
    int iVar2;
    size_t sVar3;
    size_t sVar4;
    void *__dest;
    undefined4 uVar5;
    int *piVar6;
    undefined4 uVar7;
    undefined4 *puVar8;
    int iVar9;
    undefined4 *puVar10;
    int *piVar11;
    int *piVar12;
    char *__s;
    char *__s_00;
    size_t __n;
    undefined4 uVar13;
    undefined4 local_830;
    undefined4 uStack_82c;
    char acStack_828[2052];

    local_830 = 0;
    uStack_82c = 0;
    iVar2 = pthread_mutex_lock((pthread_mutex_t *)((int)param_1 + 0xd4));
    if (iVar2 != 0) {
        piVar6 = __errno_location();
        snprintf(acStack_828, 0x800,
                 "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar6,
                 "driver-btm-c5_socketa.c", "rebuild_job_buf", 0xde);
        FUN_0001dbec(3, acStack_828, 1);
        FUN_0003c4b4(1);
    }
    iVar2 = pthread_rwlock_rdlock((pthread_rwlock_t *)((int)param_1 + 0xec));
    if (iVar2 != 0) {
        piVar6 = __errno_location();
        snprintf(acStack_828, 0x800,
                 "WTF RDLOCK ERROR ON LOCK! errno=%d in %s %s():%d", *piVar6,
                 "driver-btm-c5_socketa.c", "rebuild_job_buf", 0xde);
        FUN_0001dbec(3, acStack_828, 1);
        FUN_0003c4b4(1);
    }
    iVar2 = pthread_mutex_unlock((pthread_mutex_t *)((int)param_1 + 0xd4));
    if (iVar2 != 0) {
        piVar6 = __errno_location();
        snprintf(acStack_828, 0x800,
                 "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar6,
                 "driver-btm-c5_socketa.c", "rebuild_job_buf", 0xde);
        FUN_0001dbec(3, acStack_828, 1);
        FUN_0003c4b4(1);
    }
    __s_00 = *(char **)((int)param_1 + 0x2b0);
    iVar2 = *(int *)((int)param_1 + 0x6bc);
    __n = *(size_t *)((int)param_1 + 0x634);
    sVar3 = strlen(__s_00);
    __s = *(char **)((int)param_1 + 0x274);
    sVar4 = strlen(__s);
    sVar4 = __n + 0x75a + iVar2 * 0x20 + sVar3 + sVar4;
    __dest = calloc(1, sVar4);
    if (__dest == (void *)0x0) {
        if (((DAT_00072d88 != '\0') || (DAT_000686e0 != '\0')) ||
            (2 < DAT_00067858)) {
            snprintf(acStack_828, 0x800,
                     "malloc temp job data buf failed: %d\n", sVar4);
            FUN_0001dbec(3, acStack_828, 0);
            return (void *)0x0;
        }
    } else {
        memcpy(__dest, param_1, 0x748);
        memcpy((void *)((int)__dest + 0x748), *(void **)((int)param_1 + 0x630),
               __n);
        iVar9 = __n + 0x748;
        if (0 < iVar2) {
            piVar11 = *(int **)((int)param_1 + 0x2b4);
            puVar10 = (undefined4 *)((int)__dest + iVar9);
            piVar6 = piVar11;
            do {
                piVar12 = piVar6 + 1;
                puVar8 = (undefined4 *)*piVar6;
                uVar13 = puVar8[1];
                uVar5 = puVar8[2];
                uVar7 = puVar8[3];
                *puVar10 = *puVar8;
                puVar10[1] = uVar13;
                puVar10[2] = uVar5;
                puVar10[3] = uVar7;
                uVar13 = puVar8[5];
                uVar5 = puVar8[6];
                uVar7 = puVar8[7];
                puVar10[4] = puVar8[4];
                puVar10[5] = uVar13;
                puVar10[6] = uVar5;
                puVar10[7] = uVar7;
                puVar10 = puVar10 + 8;
                piVar6 = piVar12;
            } while (piVar11 + iVar2 != piVar12);
            iVar9 = iVar9 + iVar2 * 0x20;
        }
        sVar3 = strlen(__s_00);
        memcpy((void *)((int)__dest + iVar9), __s_00, sVar3 + 1);
        iVar9 = sVar3 + 1 + iVar9;
        sVar3 = strlen(__s);
        memcpy((void *)((int)__dest + iVar9), __s, sVar3 + 1);
        iVar9 = iVar9 + sVar3;
        iVar2 =
            pthread_rwlock_unlock((pthread_rwlock_t *)((int)param_1 + 0xec));
        if (iVar2 != 0) {
            piVar6 = __errno_location();
            snprintf(acStack_828, 0x800,
                     "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d",
                     *piVar6, "driver-btm-c5_socketa.c", "rebuild_job_buf",
                     0x102);
            FUN_0001dbec(3, acStack_828, 1);
            FUN_0003c4b4(1);
        }
        (*DAT_0006797c)();
        sscanf(&DAT_0006a6b0, "%.2lf", &local_830);
        cVar1 = DAT_000686e1;
        *(undefined4 *)((int)__dest + iVar9 + 1) = local_830;
        *(undefined4 *)((int)__dest + iVar9 + 5) = uStack_82c;
        uVar5 = DAT_000681e8._4_4_;
        *(undefined4 *)((int)__dest + iVar9 + 9) = (undefined4)DAT_000681e8;
        *(undefined4 *)((int)__dest + iVar9 + 0xd) = uVar5;
        if ((cVar1 != '\0') &&
            (((DAT_00072d88 != '\0' || (DAT_000686e0 != '\0')) ||
              (6 < DAT_00067858)))) {
            snprintf(acStack_828, 0x800, "job buf total len:%d, offset:%d\n",
                     sVar4, iVar9 + 0x11);
            FUN_0001dbec(7, acStack_828, 0);
        }
        *param_2 = sVar4;
    }
    return __dest;
}

undefined4 FUN_00044358(int param_1)

{
    pthread_t __th;
    ssize_t sVar1;
    int iVar2;
    int *__arg;
    int iVar3;
    size_t sVar4;
    int iVar5;
    char *__s2;
    int __fd;
    undefined4 local_224;
    pthread_t pStack_220;
    char local_21c[8];
    undefined4 local_214;
    undefined4 local_210;
    undefined4 local_20c;
    undefined4 local_208;
    undefined4 local_204;
    undefined4 local_200;
    undefined4 local_1fc;
    undefined4 local_1f8;
    undefined4 local_1f4;
    undefined4 local_1f0;
    undefined4 local_1ec;
    undefined4 local_1e8;
    undefined4 local_1e4;
    undefined4 local_1e0;
    undefined4 local_1dc;
    undefined4 local_1d8;
    undefined4 local_1d4;
    undefined4 local_1d0;
    pthread_attr_t pStack_1cc;
    undefined4 local_1a8;
    undefined1 auStack_1a4[124];
    undefined4 local_128;
    undefined1 auStack_124[256];

    __th = pthread_self();
    pthread_detach(__th);
    local_210 = 0;
    builtin_strncpy(local_21c, "ct_a/mai", 8);
    local_214 = 0x6e;
    prctl(0xf, local_21c);
    pthread_attr_init(&pStack_1cc);
    pthread_attr_setstacksize(&pStack_1cc, 0x100000);
    __fd = *(int *)(param_1 + 8);
    do {
        while (true) {
            while (true) {
                local_1a8 = 0;
                memset(auStack_1a4, 0, 0x7c);
                sVar1 = recv(__fd, &local_1a8, 0x80, 0);
                if (sVar1 < 1) {
                    return 0;
                }
                local_20c = 0;
                local_208 = 0;
                local_1ec = 0;
                local_1e8 = 0;
                local_224 = 0;
                local_204 = 0;
                local_200 = 0;
                local_1fc = 0;
                local_1f8 = 0;
                local_1f4 = 0;
                local_1f0 = 0;
                local_1e4 = 0;
                local_1e0 = 0;
                local_1dc = 0;
                local_1d8 = 0;
                local_1d4 = 0;
                local_1d0 = 0;
                __isoc99_sscanf(&local_1a8, "%x%s%s", &local_224, &local_1ec,
                                &local_20c);
                iVar2 = strcmp((char *)&local_1ec, "regist");
                if (iVar2 == 0)
                    break;
                iVar2 = DAT_0006a7e8 + 1;
                memcpy((void *)(DAT_0006a7e8 * 0x80 + 0x6a810), &local_1a8,
                       0x80);
                DAT_0006a7e8 = iVar2;
            }
            __arg = (int *)calloc(0x98, 1);
            iVar2 = DAT_0006a7ec;
            if (DAT_0006a7ec != 0)
                break;
        LAB_00044610:
            local_128 = 0;
            memset(auStack_124, 0, 0xfc);
            sprintf((char *)&local_128, "%x %d %s %s %s", 0x3f, 0, "reg_resp",
                    "no_name", &local_20c);
            sVar4 = strlen((char *)&local_128);
            send(__fd, &local_128, sVar4 + 1, 0);
            free(__arg);
        }
        __s2 = &DAT_0006e814;
        iVar5 = 0;
        do {
            iVar3 = strcmp((char *)&local_20c, __s2);
            __s2 = __s2 + 0x88;
            if (iVar3 == 0) {
                iVar3 = *(int *)(&DAT_0006e894 + iVar5 * 0x88);
                __arg[3] = *(int *)(&DAT_0006e810 + iVar5 * 0x88);
                __arg[0x25] = iVar3;
                break;
            }
            iVar5 = iVar5 + 1;
        } while (iVar5 != iVar2);
        if (iVar2 == iVar5)
            goto LAB_00044610;
        *__arg = DAT_00068568;
        sVar4 = strlen((char *)&local_20c);
        memcpy(__arg + 4, &local_20c, sVar4 + 1);
        __arg[0x24] = 0;
        pthread_create(&pStack_220, &pStack_1cc, FUN_0004468c, __arg);
        iVar2 = __arg[0x24];
        while (iVar2 == 0) {
            usleep(10000);
            iVar2 = __arg[0x24];
        }
        iVar2 = *__arg;
        local_128 = 0;
        if (iVar2 != DAT_00068568) {
            DAT_00068568 = iVar2;
        }
        memset(auStack_124, 0, 0xfc);
        sprintf((char *)&local_128, "%x %d %s %s %s", 0x3f, iVar2, "reg_resp",
                &DAT_00056688, &local_20c);
        sVar4 = strlen((char *)&local_128);
        send(__fd, &local_128, sVar4 + 1, 0);
        DAT_00068568 = DAT_00068568 + 1;
    } while (true);
}

undefined4 FUN_0004468c(uint *param_1)

{
    pthread_t __th;
    int iVar1;
    int iVar2;
    size_t sVar3;
    void *__buf;
    ssize_t sVar4;
    uint uVar5;
    code *pcVar6;
    undefined4 local_260;
    socklen_t local_25c;
    char local_258[16];
    sockaddr local_248;
    sockaddr sStack_238;
    char local_228[256];
    char local_128[260];

    __th = pthread_self();
    pthread_detach(__th);
    local_258[0] = '\0';
    local_258[1] = '\0';
    local_258[2] = '\0';
    local_258[3] = '\0';
    local_258[4] = '\0';
    local_258[5] = '\0';
    local_258[6] = '\0';
    local_258[7] = '\0';
    local_258[8] = '\0';
    local_258[9] = '\0';
    local_258[10] = '\0';
    local_258[0xb] = '\0';
    local_258[0xc] = '\0';
    local_258[0xd] = '\0';
    local_258[0xe] = '\0';
    local_258[0xf] = '\0';
    sprintf(local_258, "ct_a/fcb/%d", *param_1);
    prctl(0xf, local_258);
    local_248.sa_family = 2;
    local_248.sa_data._2_4_ = inet_addr("127.0.0.1");
    iVar1 = socket(2, 1, 0);
    if (iVar1 < 0) {
        perror("socket error");
        return 0;
    }
    local_260 = 1;
    iVar2 = setsockopt(iVar1, 1, 2, &local_260, 4);
    if (iVar2 < 0) {
        perror("set sockopt err");
        return 0;
    }
    uVar5 = *param_1;
    while (true) {
        local_248.sa_data._0_2_ =
            (ushort)((uVar5 & 0xff) << 8) | (ushort)(uVar5 >> 8) & 0xff;
        iVar2 = bind(iVar1, &local_248, 0x10);
        if (-1 < iVar2)
            break;
        perror("bind error");
        uVar5 = *param_1 + 1;
        *param_1 = uVar5;
    }
    iVar2 = listen(iVar1, 5);
    if (iVar2 < 0) {
        perror("listen error");
    } else {
        local_25c = 0x10;
        param_1[0x24] = 1;
        iVar1 = accept(iVar1, &sStack_238, &local_25c);
        if (-1 < iVar1) {
            local_228[0] = '\0';
            local_228[1] = '\0';
            local_228[2] = '\0';
            local_228[3] = '\0';
            memset(local_228 + 4, 0, 0xfc);
            sprintf(local_228, "%x %s\n", 0x3f, param_1 + 4);
            sVar3 = strlen(local_228);
            send(iVar1, local_228, sVar3 + 1, 0);
            sVar3 = param_1[0x25];
            __buf = malloc(sVar3);
            recv(iVar1, __buf, sVar3, 0);
            do {
                sVar4 = recv(iVar1, __buf, param_1[0x25], 0);
                if (sVar4 < 1) {
                    pcVar6 = (code *)0x0;
                } else {
                    pcVar6 = (code *)param_1[3];
                    if (pcVar6 != (code *)0x0) {
                        pcVar6 = (code *)(*pcVar6)(__buf);
                    }
                }
                local_128[0] = '\0';
                local_128[1] = '\0';
                local_128[2] = '\0';
                local_128[3] = '\0';
                memset(local_128 + 4, 0, 0xfc);
                sprintf(local_128, "%x %d %s %s", 0x3f, pcVar6, param_1 + 4,
                        &DAT_00056688);
                sVar3 = strlen(local_128);
                send(iVar1, local_128, sVar3 + 1, 0);
            } while (true);
        }
        perror("accept error");
    }
    return 0;
}

undefined4 FUN_00044914(int param_1, int param_2)

{
    void *pvVar1;
    undefined4 uVar2;
    in_addr_t iVar3;
    int __fd;
    int iVar4;
    ssize_t sVar5;
    undefined4 *__arg;
    undefined *__dest;
    void *__src;
    void *pvVar6;
    pthread_t pStack_350;
    sockaddr local_34c;
    pthread_attr_t pStack_33c;
    char local_318[20];
    uint local_304;
    undefined1 auStack_300[232];
    undefined4 local_218;
    undefined1 auStack_214[508];

    if (DAT_0006a7f0 == 0) {
        pthread_attr_init(&pStack_33c);
        pthread_attr_setstacksize(&pStack_33c, 0x100000);
        pthread_mutex_init((pthread_mutex_t *)&DAT_0006a7f4,
                           (pthread_mutexattr_t *)0x0);
        if (param_2 != 0) {
            __dest = &DAT_0006e814;
            __src = (void *)(param_1 + 4);
            do {
                pvVar1 = memcpy(__dest, __src, 0x80);
                pvVar6 = (void *)((int)__src + 0x88);
                __dest = (undefined *)((int)pvVar1 + 0x88);
                uVar2 = *(undefined4 *)((int)__src + -4);
                *(undefined4 *)((int)pvVar1 + 0x80) =
                    *(undefined4 *)((int)__src + 0x80);
                *(undefined4 *)((int)pvVar1 + -4) = uVar2;
                __src = pvVar6;
            } while ((int)pvVar6 + (param_2 * -0x88 - (param_1 + 4)) != 0);
        }
        local_34c.sa_data[4] = '\0';
        local_34c.sa_data[5] = '\0';
        local_34c.sa_data[6] = '\0';
        local_34c.sa_data[7] = '\0';
        local_34c.sa_data[8] = '\0';
        local_34c.sa_data[9] = '\0';
        local_34c.sa_data[10] = '\0';
        local_34c.sa_data[0xb] = '\0';
        local_34c.sa_data[0xc] = '\0';
        local_34c.sa_data[0xd] = '\0';
        local_34c.sa_data[0] = '\0';
        local_34c.sa_data[1] = '\0';
        local_34c.sa_data[2] = '\0';
        local_34c.sa_data[3] = '\0';
        local_34c.sa_family = 2;
        DAT_0006a7ec = param_2;
        iVar3 = inet_addr("127.0.0.1");
        local_34c.sa_data._2_2_ = SUB42(iVar3, 0);
        local_34c.sa_data._4_2_ = SUB42(iVar3 >> 0x10, 0);
        local_34c.sa_data[0] = 'V';
        local_34c.sa_data[1] = '\n';
        __fd = socket(2, 1, 0);
        if (__fd < 0) {
            uVar2 = 0xfffffffc;
            perror("socket err:");
        } else {
            while (iVar4 = connect(__fd, &local_34c, 0x10), iVar4 < 0) {
                perror("connect err:");
                sleep(1);
            }
            local_218 = 0;
            memset(auStack_214, 0, 0x1fc);
            sVar5 = recv(__fd, &local_218, 0x100, 0);
            if (0 < sVar5) {
                auStack_214[sVar5 + -4] = 0;
            }
            builtin_strncpy(local_318, "func1 func2 func3 fu", 0x14);
            local_304._0_1_ = 'n';
            local_304._1_1_ = 'c';
            local_304._2_1_ = '4';
            local_304._3_1_ = '\0';
            memset(auStack_300, 0, 0xe8);
            send(__fd, local_318, 0x18, 0);
            sVar5 = recv(__fd, &local_218, 0x100, 0);
            if (0 < sVar5) {
                auStack_214[sVar5 + -4] = 0;
            }
            builtin_strncpy(local_318, "3f heart-beats 22027", 0x14);
            local_304 = local_304 & 0xffffff00;
            send(__fd, local_318, 0x15, 0);
            DAT_0006a80c = __fd;
            __arg = (undefined4 *)malloc(0xc);
            __arg[2] = __fd;
            *__arg = 0x560a;
            pthread_create(&pStack_350, &pStack_33c, FUN_00044358, __arg);
            DAT_0006a7f0 = 1;
            uVar2 = 0;
        }
    } else {
        uVar2 = 0xffffffff;
    }
    return uVar2;
}

/* WARNING: Type propagation algorithm not settling */

undefined4 FUN_00044b68(int param_1)

{
    pthread_mutex_t *__mutex;
    size_t sVar1;
    in_addr_t iVar2;
    int iVar3;
    int iVar4;
    ssize_t sVar5;
    undefined4 uVar6;
    uint local_498[2];
    sockaddr local_490;
    undefined4 local_480;
    undefined4 local_47c;
    undefined4 local_478;
    undefined4 local_474;
    undefined4 local_470;
    undefined4 local_46c;
    undefined4 local_468;
    undefined4 local_464;
    undefined4 local_460;
    undefined4 local_45c;
    undefined4 local_458;
    undefined4 local_454;
    undefined4 local_450;
    undefined4 local_44c;
    undefined4 local_448;
    undefined4 local_444;
    undefined4 local_440;
    undefined4 local_43c;
    undefined4 local_438;
    undefined4 local_434;
    undefined4 local_430;
    undefined4 local_42c;
    undefined4 local_428;
    undefined4 local_424;
    undefined4 local_420;
    undefined1 auStack_41c[124];
    undefined4 local_3a0;
    undefined1 auStack_39c[124];
    undefined4 local_320;
    undefined1 auStack_31c[252];
    undefined4 local_220;
    undefined1 auStack_21c[512];

    if (DAT_0006a7f0 == 0) {
        uVar6 = 0xffffffff;
    } else {
        __mutex = (pthread_mutex_t *)malloc(0x24);
        pthread_mutex_init(__mutex, (pthread_mutexattr_t *)0x0);
        iVar4 = DAT_0006a80c;
        local_320 = 0;
        memset(auStack_31c, 0, 0xfc);
        sprintf((char *)&local_320, "%x regist %s", 0x3f, param_1);
        iVar3 = DAT_0006a7e8;
        sVar1 = strlen((char *)&local_320);
        send(iVar4, &local_320, sVar1 + 1, 0);
        local_420 = 0;
        memset(auStack_41c, 0, 0x7c);
        while (iVar3 == DAT_0006a7e8) {
            usleep(1000);
        }
        memcpy(&local_420, (void *)(iVar3 * 0x80 + 0x6a810), 0x80);
        local_498[0] = 0;
        local_498[1] = 0;
        local_480 = 0;
        local_47c = 0;
        local_460 = 0;
        local_45c = 0;
        local_440 = 0;
        local_43c = 0;
        local_478 = 0;
        local_474 = 0;
        local_470 = 0;
        local_46c = 0;
        local_468 = 0;
        local_464 = 0;
        local_458 = 0;
        local_454 = 0;
        local_450 = 0;
        local_44c = 0;
        local_448 = 0;
        local_444 = 0;
        local_438 = 0;
        local_434 = 0;
        local_430 = 0;
        local_42c = 0;
        local_428 = 0;
        local_424 = 0;
        __isoc99_sscanf(&local_420, "%x%d%s%s%s", local_498 + 1, local_498,
                        &local_480, &local_460, &local_440);
        if (local_498[0] == 0) {
            uVar6 = 0xfffffffc;
        } else {
            local_490.sa_family = 2;
            local_490.sa_data[0] = '\0';
            local_490.sa_data[1] = '\0';
            local_490.sa_data[2] = '\0';
            local_490.sa_data[3] = '\0';
            local_490.sa_data[4] = '\0';
            local_490.sa_data[5] = '\0';
            local_490.sa_data[6] = '\0';
            local_490.sa_data[7] = '\0';
            local_490.sa_data[8] = '\0';
            local_490.sa_data[9] = '\0';
            local_490.sa_data[10] = '\0';
            local_490.sa_data[0xb] = '\0';
            local_490.sa_data[0xc] = '\0';
            local_490.sa_data[0xd] = '\0';
            iVar2 = inet_addr("127.0.0.1");
            local_490.sa_data._2_2_ = SUB42(iVar2, 0);
            local_490.sa_data._4_2_ = SUB42(iVar2 >> 0x10, 0);
            local_490.sa_data._0_2_ = (ushort)((local_498[0] & 0xff) << 8) |
                                      (ushort)(local_498[0] >> 8) & 0xff;
            iVar3 = socket(2, 1, 0);
            if (iVar3 < 0) {
                perror("socket err:");
                uVar6 = 0xfffffffc;
            } else {
                iVar4 = connect(iVar3, &local_490, 0x10);
                if (iVar4 < 0) {
                    perror("connect err:");
                    uVar6 = 0xfffffffd;
                } else {
                    local_220 = 0;
                    memset(auStack_21c, 0, 0x1fc);
                    sVar5 = recv(iVar3, &local_220, 0x200, 0);
                    if (0 < sVar5) {
                        auStack_21c[sVar5 + -4] = 0;
                    }
                    memset(auStack_39c, 0, 0x7c);
                    local_3a0 = 0x214b4f;
                    send(iVar3, &local_3a0, 4, 0);
                    uVar6 = 0;
                    *(int *)((int)__mutex + 0x20) = iVar3;
                    *(pthread_mutex_t **)(param_1 + 0x80) = __mutex;
                    __mutex[1].__data.__lock = local_498[0];
                }
            }
        }
    }
    return uVar6;
}

undefined4 FUN_00044e28(int param_1, void *param_2, size_t param_3,
                        int *param_4)

{
    int iVar1;
    ssize_t sVar2;
    undefined4 uVar3;
    pthread_mutex_t *__mutex;
    int local_160;
    int local_15c;
    int local_158;
    int local_154;
    int local_150;
    int local_14c;
    int local_148;
    int local_144;
    int local_140;
    int local_13c;
    int local_138;
    int local_134;
    int local_130;
    int local_12c;
    int local_128;
    int local_124;
    int local_120;
    int local_11c;
    int local_118;
    undefined1 auStack_114[252];

    if (DAT_0006a7f0 == 0) {
        uVar3 = 0xffffffff;
    } else {
        __mutex = *(pthread_mutex_t **)(param_1 + 0x80);
        if (__mutex == (pthread_mutex_t *)0x0) {
            uVar3 = 0xfffffffe;
        } else {
            iVar1 = pthread_mutex_trylock(__mutex);
            if (iVar1 == 0) {
                sVar2 =
                    send(*(int *)((int)__mutex + 0x20), param_2, param_3, 0);
                if (sVar2 < 1) {
                    uVar3 = 0xfffffffc;
                    pthread_mutex_unlock(__mutex);
                } else {
                    local_118 = iVar1;
                    memset(auStack_114, 0, 0xfc);
                    sVar2 = recv(*(int *)((int)__mutex + 0x20), &local_118,
                                 0x100, 0);
                    local_160 = iVar1;
                    local_15c = iVar1;
                    local_158 = iVar1;
                    local_154 = iVar1;
                    local_150 = iVar1;
                    local_14c = iVar1;
                    local_148 = iVar1;
                    local_144 = iVar1;
                    local_140 = iVar1;
                    local_13c = iVar1;
                    local_138 = iVar1;
                    local_134 = iVar1;
                    local_130 = iVar1;
                    local_12c = iVar1;
                    local_128 = iVar1;
                    local_124 = iVar1;
                    local_120 = iVar1;
                    local_11c = iVar1;
                    if (0 < sVar2) {
                        __isoc99_sscanf(&local_118, &DAT_00056748, &local_160,
                                        &local_15c, &local_158, &local_138);
                    }
                    if (param_4 != (int *)0x0) {
                        *param_4 = local_15c;
                    }
                    pthread_mutex_unlock(__mutex);
                    uVar3 = 0;
                }
            } else {
                uVar3 = 0xfffffffd;
            }
        }
    }
    return uVar3;
}

undefined4 FUN_00044f90(void *param_1, size_t param_2, uint *param_3)

{
    uint uVar1;

    uVar1 = param_3[1] + param_2;
    if (uVar1 <= *param_3) {
        memcpy((void *)(param_3[2] + param_3[1]), param_1, param_2);
        uVar1 = param_2 + param_3[1];
    }
    param_3[1] = uVar1;
    return 0;
}

undefined4 FUN_00045024(uint param_1, int param_2, code *param_3,
                        undefined4 param_4, uint param_5)

{
    int iVar1;
    uint uVar2;
    char *pcVar3;
    undefined4 uVar4;
    uint uVar5;
    uint uVar6;
    uint local_3c;
    char acStack_38[20];

    local_3c = 0;
    iVar1 = (*param_3)(&DAT_00051eb8, 1, param_4);
    if (iVar1 == 0) {
        uVar5 = param_1;
        uVar2 = param_1;
        do {
            do {
                uVar6 = uVar2;
                if (param_1 + param_2 <= uVar6) {
                    if ((uVar5 != uVar6) &&
                        (iVar1 = (*param_3)(uVar5, uVar6 - uVar5, param_4),
                         iVar1 != 0)) {
                        return 0xffffffff;
                    }
                LAB_00045290:
                    uVar4 = (*param_3)(&DAT_00051eb8, 1, param_4);
                    return uVar4;
                }
                uVar2 =
                    FUN_00048a00(uVar6, (param_1 + param_2) - uVar6, &local_3c);
                if (uVar2 == 0) {
                    return 0xffffffff;
                }
            } while (((0x1f < (int)local_3c &&
                       (local_3c != 0x22 && local_3c != 0x5c)) &&
                      (((uint)(local_3c == 0x2f) & param_5 >> 10) == 0)) &&
                     (((uint)(0x7f < (int)local_3c) & param_5 >> 6) == 0));
            if ((uVar5 != uVar6) &&
                (iVar1 = (*param_3)(uVar5, uVar6 - uVar5, param_4),
                 iVar1 != 0)) {
                return 0xffffffff;
            }
            if (uVar6 == uVar2)
                goto LAB_00045290;
            if (local_3c == 0xc) {
                uVar4 = 2;
                pcVar3 = "\\f";
            } else if ((int)local_3c < 0xd) {
                if (local_3c == 9) {
                    uVar4 = 2;
                    pcVar3 = "\\t";
                } else if (local_3c == 10) {
                    uVar4 = 2;
                    pcVar3 = "\\n";
                } else if (local_3c == 8) {
                    uVar4 = 2;
                    pcVar3 = "\\b";
                } else {
                LAB_00045188:
                    if ((int)local_3c < 0x10000)
                        goto LAB_00045190;
                LAB_000451c8:
                    local_3c = local_3c - 0x10000;
                    snprintf(acStack_38, 0xd, "\\u%04X\\u%04X",
                             local_3c * 0x1000 >> 0x16 | 0xd800,
                             local_3c & 0x3ff | 0xdc00);
                    uVar4 = 0xc;
                    pcVar3 = acStack_38;
                }
            } else if (local_3c == 0x22) {
                uVar4 = 2;
                pcVar3 = "\\\"";
            } else if ((int)local_3c < 0x23) {
                if (local_3c == 0xd) {
                    uVar4 = 2;
                    pcVar3 = "\\r";
                } else {
                    if (0xffff < (int)local_3c)
                        goto LAB_000451c8;
                LAB_00045190:
                    snprintf(acStack_38, 0xd, "\\u%04X");
                    uVar4 = 6;
                    pcVar3 = acStack_38;
                }
            } else if (local_3c == 0x2f) {
                uVar4 = 2;
                pcVar3 = "\\/";
            } else {
                if (local_3c != 0x5c)
                    goto LAB_00045188;
                uVar4 = 2;
                pcVar3 = "\\\\";
            }
            iVar1 = (*param_3)(pcVar3, uVar4, param_4);
            uVar5 = uVar2;
        } while (iVar1 == 0);
    }
    return 0xffffffff;
}

undefined4 FUN_000452ac(uint param_1, int param_2, int param_3,
                        code *UNRECOVERED_JUMPTABLE, undefined4 param_5)

{
    int iVar1;
    undefined4 uVar2;
    uint uVar3;
    uint uVar4;

    if ((param_1 & 0x1f) == 0) {
        if ((param_3 != 0) && ((param_1 & 0x20) == 0)) {
            /* WARNING: Could not recover jumptable at 0x00045358. Too many
             * branches */
            /* WARNING: Treating indirect jump as call */
            uVar2 = (*UNRECOVERED_JUMPTABLE)(" ", 1, param_5);
            return uVar2;
        }
    } else {
        uVar3 = (param_1 & 0x1f) * param_2;
        iVar1 = (*UNRECOVERED_JUMPTABLE)(&DAT_0004c274, 1, param_5);
        if (iVar1 != 0) {
            return 0xffffffff;
        }
        for (; uVar3 != 0; uVar3 = uVar3 - uVar4) {
            uVar4 = uVar3;
            if (0x1f < uVar3) {
                uVar4 = 0x20;
            }
            iVar1 = (*UNRECOVERED_JUMPTABLE)("                                ",
                                             uVar4, param_5);
            if (iVar1 != 0) {
                return 0xffffffff;
            }
        }
    }
    return 0;
}

undefined4 FUN_0004535c(undefined4 param_1, undefined4 param_2, char *param_3)

{
    int iVar1;
    undefined4 uVar2;

    snprintf(param_3, 0xb, "%p", param_2);
    iVar1 = FUN_000466d8(param_1, param_3);
    if (iVar1 == 0) {
        uVar2 = FUN_000495f0();
        uVar2 = FUN_00046444(param_1, param_3, uVar2);
        return uVar2;
    }
    return 0xffffffff;
}

undefined4 FUN_000453b4(undefined4 *param_1, uint param_2, int param_3,
                        undefined4 param_4, code *param_5, undefined4 param_6)

{
    undefined4 uVar1;
    uint uVar2;
    undefined4 uVar3;
    int iVar4;
    char *pcVar5;
    size_t sVar6;
    int iVar7;
    void *__base;
    undefined *puVar8;
    int iVar9;
    undefined4 *puVar10;
    int iVar11;
    uint uVar12;
    uint uVar13;
    uint uVar14;
    uint uVar15;
    undefined4 *puVar16;
    undefined8 uVar17;
    char acStack_8c[104];

    if (param_1 != (undefined4 *)0x0) {
        uVar14 = param_2 & 0x10000;
        uVar13 = param_2 & 0xfffeffff;
        switch (*param_1) {
        case 0:
            puVar8 = &DAT_0004d5f4;
            if ((param_2 & 0x20) == 0) {
                uVar1 = 2;
                puVar8 = &DAT_000567bc;
            } else {
                uVar1 = 1;
            }
            iVar4 = FUN_0004535c(param_4, param_1, acStack_8c);
            if (iVar4 == 0) {
                iVar4 = FUN_00048f2c(param_1);
                if (uVar14 == 0) {
                    iVar11 = (*param_5)(&DAT_000567c8, 1, param_6);
                    if (iVar11 != 0) {
                        return 0xffffffff;
                    }
                    if (iVar4 == 0) {
                        FUN_00046738(param_4, acStack_8c);
                        uVar1 = (*param_5)("}", 1, param_6);
                        return uVar1;
                    }
                } else if (iVar4 == 0) {
                LAB_000458b4:
                    FUN_00046738(param_4, acStack_8c);
                    return 0;
                }
                iVar9 = param_3 + 1;
                iVar11 = FUN_000452ac(uVar13, iVar9, 0, param_5, param_6);
                if (iVar11 == 0) {
                    if ((param_2 & 0x80) == 0) {
                        while (true) {
                            iVar11 = FUN_00048f78(param_1, iVar4);
                            pcVar5 = (char *)FUN_00048fac(iVar4);
                            sVar6 = strlen(pcVar5);
                            FUN_00045024(pcVar5, sVar6, param_5, param_6,
                                         uVar13);
                            iVar7 = (*param_5)(puVar8, uVar1, param_6);
                            if (iVar7 != 0)
                                break;
                            uVar3 = FUN_00048fb8(iVar4);
                            iVar4 = FUN_000453b4(uVar3, uVar13, iVar9, param_4,
                                                 param_5, param_6);
                            if (iVar4 != 0) {
                                return 0xffffffff;
                            }
                            if (iVar11 == 0) {
                                iVar4 = FUN_000452ac(uVar13, param_3, 0,
                                                     param_5, param_6);
                                if (iVar4 != 0) {
                                    return 0xffffffff;
                                }
                                goto LAB_00045b3c;
                            }
                            iVar4 = (*param_5)(&DAT_00051e08, 1, param_6);
                            if (iVar4 != 0) {
                                return 0xffffffff;
                            }
                            iVar7 = FUN_000452ac(uVar13, iVar9, 1, param_5,
                                                 param_6);
                            iVar4 = iVar11;
                            if (iVar7 != 0) {
                                return 0xffffffff;
                            }
                        }
                    } else {
                        sVar6 = FUN_00048ca8(param_1);
                        __base = (void *)FUN_00048314(sVar6 << 2);
                        if (__base != (void *)0x0) {
                            puVar10 = (undefined4 *)((int)__base + -4);
                            uVar2 = 0;
                            puVar16 = puVar10;
                            do {
                                uVar15 = uVar2;
                                uVar2 = uVar15 + 1;
                                uVar3 = FUN_00048fac(iVar4);
                                puVar16 = puVar16 + 1;
                                *puVar16 = uVar3;
                                iVar4 = FUN_00048f78(param_1, iVar4);
                            } while (iVar4 != 0);
                            if (sVar6 != uVar2) {
                                /* WARNING: Subroutine does not return */
                                __assert_fail("i == size", "dump.c", 0x160,
                                              "do_dump");
                            }
                            qsort(__base, uVar2, 4,
                                  (__compar_fn_t)&LAB_00045018);
                            uVar12 = 0;
                            do {
                                puVar10 = puVar10 + 1;
                                pcVar5 = (char *)*puVar10;
                                iVar4 = FUN_00048cc4(param_1, pcVar5);
                                if (iVar4 == 0) {
                                    /* WARNING: Subroutine does not return */
                                    __assert_fail("value", "dump.c", 0x16b,
                                                  "do_dump");
                                }
                                sVar6 = strlen(pcVar5);
                                FUN_00045024(pcVar5, sVar6, param_5, param_6,
                                             uVar13);
                                iVar11 = (*param_5)(puVar8, uVar1, param_6);
                                if ((iVar11 != 0) ||
                                    (iVar4 = FUN_000453b4(iVar4, uVar13, iVar9,
                                                          param_4, param_5,
                                                          param_6),
                                     iVar4 != 0)) {
                                LAB_00045ad4:
                                    FUN_0004832c(__base);
                                    return 0xffffffff;
                                }
                                if (uVar12 < uVar15) {
                                    iVar4 =
                                        (*param_5)(&DAT_00051e08, 1, param_6);
                                    if (iVar4 != 0)
                                        goto LAB_00045ad4;
                                    iVar4 = FUN_000452ac(uVar13, iVar9, 1,
                                                         param_5, param_6);
                                } else {
                                    iVar4 = FUN_000452ac(uVar13, param_3, 0,
                                                         param_5, param_6);
                                }
                                if (iVar4 != 0)
                                    goto LAB_00045ad4;
                                uVar12 = uVar12 + 1;
                            } while (uVar12 != uVar2);
                            FUN_0004832c(__base);
                        LAB_00045b3c:
                            FUN_00046738(param_4, acStack_8c);
                            if (uVar14 == 0) {
                                uVar1 = (*param_5)("}", 1, param_6);
                                return uVar1;
                            }
                            return 0;
                        }
                    }
                }
            }
            break;
        case 1:
            iVar4 = FUN_0004535c(param_4, param_1, acStack_8c);
            if (iVar4 == 0) {
                uVar2 = FUN_00049030(param_1);
                if (uVar14 == 0) {
                    iVar4 = (*param_5)(&DAT_00051d90, 1, param_6);
                    if (iVar4 != 0) {
                        return 0xffffffff;
                    }
                    if (uVar2 == 0) {
                        FUN_00046738(param_4, acStack_8c);
                        uVar1 = (*param_5)("]", 1, param_6);
                        return uVar1;
                    }
                } else if (uVar2 == 0)
                    goto LAB_000458b4;
                iVar11 = param_3 + 1;
                iVar4 = FUN_000452ac(uVar13, iVar11, 0, param_5, param_6);
                if (iVar4 == 0) {
                    uVar15 = 0;
                    while (true) {
                        uVar1 = FUN_0004904c(param_1, uVar15);
                        iVar4 = FUN_000453b4(uVar1, uVar13, iVar11, param_4,
                                             param_5, param_6);
                        if (iVar4 != 0)
                            break;
                        if (uVar15 < uVar2 - 1) {
                            iVar4 = (*param_5)(&DAT_00051e08, 1, param_6);
                            if (iVar4 != 0) {
                                return 0xffffffff;
                            }
                            iVar4 = FUN_000452ac(uVar13, iVar11, 1, param_5,
                                                 param_6);
                        } else {
                            iVar4 = FUN_000452ac(uVar13, param_3, 0, param_5,
                                                 param_6);
                        }
                        if (iVar4 != 0) {
                            return 0xffffffff;
                        }
                        uVar15 = uVar15 + 1;
                        if (uVar2 == uVar15) {
                            FUN_00046738(param_4, acStack_8c);
                            if (uVar14 == 0) {
                                uVar1 = (*param_5)("]", 1, param_6);
                                return uVar1;
                            }
                            return 0;
                        }
                    }
                }
            }
            break;
        case 2:
            uVar1 = FUN_000491f8(param_1);
            uVar3 = FUN_00049214(param_1);
            uVar1 = FUN_00045024(uVar1, uVar3, param_5, param_6, uVar13);
            return uVar1;
        case 3:
            uVar17 = FUN_00049454(param_1);
            iVar4 = snprintf(acStack_8c, 100, "%lld");
            uVar1 = (*param_5)(acStack_8c, iVar4, param_6, param_5, uVar17);
            return uVar1;
        case 4:
            FUN_00049500(param_1);
            iVar4 = FUN_00048680(acStack_8c, 100, (uVar13 << 0x10) >> 0x1b);
            if (-1 < iVar4) {
                uVar1 = (*param_5)(acStack_8c, iVar4, param_6);
                return uVar1;
            }
            break;
        case 5:
            uVar1 = (*param_5)(&DAT_0004b53c, 4, param_6);
            return uVar1;
        case 6:
            uVar1 = (*param_5)("false", 5, param_6);
            return uVar1;
        case 7:
            uVar1 = (*param_5)(&DAT_000567c0, 4, param_6);
            return uVar1;
        }
    }
    return 0xffffffff;
}

undefined4 FUN_00045bc4(uint *param_1, undefined4 param_2, undefined4 param_3,
                        uint param_4)

{
    int iVar1;
    undefined4 uVar2;
    undefined1 auStack_34[32];

    if ((((param_4 & 0x200) == 0) &&
         ((param_1 == (uint *)0x0 || (1 < *param_1)))) ||
        (iVar1 = FUN_000463b0(auStack_34), iVar1 != 0)) {
        uVar2 = 0xffffffff;
    } else {
        uVar2 = FUN_000453b4(param_1, param_4, 0, auStack_34, param_2, param_3);
        FUN_0004642c(auStack_34);
    }
    return uVar2;
}

undefined4 FUN_00045c3c(undefined4 param_1, undefined4 param_2)

{
    int iVar1;
    undefined4 uVar2;
    undefined1 auStack_1c[12];

    iVar1 = FUN_000483e8(auStack_1c);
    if (iVar1 == 0) {
        iVar1 = FUN_00045bc4(param_1, &LAB_00044f7c, auStack_1c, param_2);
        uVar2 = 0;
        if (iVar1 == 0) {
            FUN_0004845c(auStack_1c);
            uVar2 = FUN_00048390();
        }
        FUN_0004841c(auStack_1c);
    } else {
        uVar2 = 0;
    }
    return uVar2;
}

undefined4 FUN_00045ca8(undefined4 param_1, undefined4 param_2,
                        undefined4 param_3)

{
    int iVar1;
    undefined4 local_14;
    undefined4 local_10;
    undefined4 local_c;

    local_10 = 0;
    local_14 = param_3;
    local_c = param_2;
    iVar1 = FUN_00045bc4(param_1, FUN_00044f90, &local_14);
    if (iVar1 != 0) {
        local_10 = 0;
    }
    return local_10;
}

void FUN_00045d5c(undefined4 param_1, undefined4 param_2, undefined4 param_3)

{
    undefined4 local_c[2];

    local_c[0] = param_2;
    FUN_00045bc4(param_1, &LAB_00044ff0, local_c, param_3);
    return;
}

uint FUN_00045d88(uint *param_1, uint param_2, int param_3)

{
    uint *puVar1;
    uint uVar2;
    int iVar3;
    uint uVar4;
    int iVar5;
    uint uVar6;
    int iVar7;
    uint uVar8;
    int iVar9;
    uint uVar10;

    uVar6 = param_3 + -0x21524111 + param_2;
    uVar2 = uVar6;
    uVar4 = uVar6;
    if (((uint)param_1 & 3) != 0) {
        if (((uint)param_1 & 1) != 0) {
            if (0xc < param_2) {
                puVar1 = param_1 + 3;
                do {
                    param_1 = puVar1;
                    param_2 = param_2 - 0xc;
                    uVar6 = (uint) * (byte *)((int)param_1 + -2) * 0x10000 +
                            (uint) * (byte *)((int)param_1 + -3) * 0x100 +
                            (uint)(byte)param_1[-1] +
                            (uint) * (byte *)((int)param_1 + -1) * 0x1000000 +
                            uVar6;
                    uVar8 =
                        (((uint) * (byte *)((int)param_1 + -10) * 0x10000 +
                          (uint) * (byte *)((int)param_1 + -0xb) * 0x100 +
                          (uint)(byte)param_1[-3] +
                          (uint) * (byte *)((int)param_1 + -9) * 0x1000000) -
                         uVar6) +
                            uVar2 ^
                        (uVar6 >> 0x1c | uVar6 * 0x10);
                    iVar3 = (uint) * (byte *)((int)param_1 + -6) * 0x10000 +
                            (uint) * (byte *)((int)param_1 + -7) * 0x100 +
                            (uint)(byte)param_1[-2] +
                            (uint) * (byte *)((int)param_1 + -5) * 0x1000000 +
                            uVar4;
                    iVar7 = iVar3 + uVar6;
                    uVar2 = iVar3 - uVar8 ^ (uVar8 >> 0x1a | uVar8 << 6);
                    iVar5 = uVar8 + iVar7;
                    iVar9 = uVar2 + iVar5;
                    uVar2 = iVar7 - uVar2 ^ (uVar2 >> 0x18 | uVar2 << 8);
                    iVar3 = uVar2 + iVar9;
                    uVar4 = iVar5 - uVar2 ^ (uVar2 >> 0x10 | uVar2 << 0x10);
                    uVar2 = uVar4 + iVar3;
                    uVar6 = iVar9 - uVar4 ^ (uVar4 >> 0xd | uVar4 << 0x13);
                    uVar4 = uVar6 + uVar2;
                    uVar6 = iVar3 - uVar6 ^ (uVar6 >> 0x1c | uVar6 << 4);
                    puVar1 = param_1 + 3;
                } while (0xc < param_2);
            }
            switch (param_2) {
            case 1:
                break;
            case 0xc:
                uVar6 =
                    uVar6 + (uint) * (byte *)((int)param_1 + 0xb) * 0x1000000;
            case 0xb:
                uVar6 = uVar6 + (uint) * (byte *)((int)param_1 + 10) * 0x10000;
            case 10:
                uVar6 = uVar6 + (uint) * (byte *)((int)param_1 + 9) * 0x100;
            case 9:
                uVar6 = uVar6 + (byte)param_1[2];
            case 8:
                uVar4 = uVar4 + (uint) * (byte *)((int)param_1 + 7) * 0x1000000;
            case 7:
                uVar4 = uVar4 + (uint) * (byte *)((int)param_1 + 6) * 0x10000;
            case 6:
                uVar4 = uVar4 + (uint) * (byte *)((int)param_1 + 5) * 0x100;
            case 5:
                uVar4 = uVar4 + (byte)param_1[1];
            case 4:
                uVar2 = uVar2 + (uint) * (byte *)((int)param_1 + 3) * 0x1000000;
            case 3:
                uVar2 = uVar2 + (uint) * (byte *)((int)param_1 + 2) * 0x10000;
            case 2:
                uVar2 = uVar2 + (uint) * (byte *)((int)param_1 + 1) * 0x100;
                break;
            default:
                goto switchD_00045e34_default;
            }
            goto switchD_00045e34_caseD_1;
        }
        if (0xc < param_2) {
            puVar1 = param_1 + 3;
            do {
                param_1 = puVar1;
                param_2 = param_2 - 0xc;
                uVar6 = (uint)(ushort)param_1[-1] +
                        (uint) * (ushort *)((int)param_1 + -2) * 0x10000 +
                        uVar6;
                uVar8 = (((uint)(ushort)param_1[-3] +
                          (uint) * (ushort *)((int)param_1 + -10) * 0x10000) -
                         uVar6) +
                            uVar2 ^
                        (uVar6 >> 0x1c | uVar6 * 0x10);
                iVar3 = (uint)(ushort)param_1[-2] +
                        (uint) * (ushort *)((int)param_1 + -6) * 0x10000 +
                        uVar4;
                iVar7 = iVar3 + uVar6;
                uVar2 = iVar3 - uVar8 ^ (uVar8 >> 0x1a | uVar8 << 6);
                iVar5 = uVar8 + iVar7;
                iVar9 = uVar2 + iVar5;
                uVar2 = iVar7 - uVar2 ^ (uVar2 >> 0x18 | uVar2 << 8);
                iVar3 = uVar2 + iVar9;
                uVar4 = iVar5 - uVar2 ^ (uVar2 >> 0x10 | uVar2 << 0x10);
                uVar2 = uVar4 + iVar3;
                uVar6 = iVar9 - uVar4 ^ (uVar4 >> 0xd | uVar4 << 0x13);
                uVar4 = uVar6 + uVar2;
                uVar6 = iVar3 - uVar6 ^ (uVar6 >> 0x1c | uVar6 << 4);
                puVar1 = param_1 + 3;
            } while (0xc < param_2);
        }
        switch (param_2) {
        case 1:
        switchD_00045e34_caseD_1:
            uVar2 = (byte)*param_1 + uVar2;
            break;
        case 3:
            uVar2 = uVar2 + (uint) * (byte *)((int)param_1 + 2) * 0x10000;
        case 2:
        switchD_00045e34_caseD_2:
            uVar2 = (ushort)*param_1 + uVar2;
            break;
        case 5:
            uVar4 = uVar4 + (byte)param_1[1];
        case 4:
            uVar2 = (ushort)*param_1 + uVar2 +
                    (uint) * (ushort *)((int)param_1 + 2) * 0x10000;
            break;
        case 7:
            uVar4 = uVar4 + (uint) * (byte *)((int)param_1 + 6) * 0x10000;
        case 6:
            uVar2 = (ushort)*param_1 + uVar2 +
                    (uint) * (ushort *)((int)param_1 + 2) * 0x10000;
            uVar4 = uVar4 + (ushort)param_1[1];
            break;
        case 9:
            uVar6 = uVar6 + (byte)param_1[2];
        case 8:
            uVar4 = (ushort)param_1[1] + uVar4 +
                    (uint) * (ushort *)((int)param_1 + 6) * 0x10000;
            uVar2 = (ushort)*param_1 + uVar2 +
                    (uint) * (ushort *)((int)param_1 + 2) * 0x10000;
            break;
        case 0xb:
            uVar6 = uVar6 + (uint) * (byte *)((int)param_1 + 10) * 0x10000;
        case 10:
            uVar4 = (ushort)param_1[1] + uVar4 +
                    (uint) * (ushort *)((int)param_1 + 6) * 0x10000;
            uVar2 = (ushort)*param_1 + uVar2 +
                    (uint) * (ushort *)((int)param_1 + 2) * 0x10000;
            uVar6 = uVar6 + (ushort)param_1[2];
            break;
        case 0xc:
            uVar6 = (ushort)param_1[2] + uVar6 +
                    (uint) * (ushort *)((int)param_1 + 10) * 0x10000;
            uVar4 = (ushort)param_1[1] + uVar4 +
                    (uint) * (ushort *)((int)param_1 + 6) * 0x10000;
            uVar2 = (ushort)*param_1 + uVar2 +
                    (uint) * (ushort *)((int)param_1 + 2) * 0x10000;
            break;
        default:
            goto switchD_00045e34_default;
        }
        goto LAB_000460d8;
    }
    if (0xc < param_2) {
        puVar1 = param_1 + 3;
        do {
            param_1 = puVar1;
            param_2 = param_2 - 0xc;
            uVar6 = uVar6 + param_1[-1];
            uVar2 =
                (param_1[-3] - uVar6) + uVar2 ^ (uVar6 >> 0x1c | uVar6 * 0x10);
            iVar3 = uVar4 + param_1[-2] + uVar6;
            iVar5 = uVar2 + iVar3;
            uVar2 =
                (uVar4 + param_1[-2]) - uVar2 ^ (uVar2 >> 0x1a | uVar2 << 6);
            iVar7 = uVar2 + iVar5;
            uVar2 = iVar3 - uVar2 ^ (uVar2 >> 0x18 | uVar2 << 8);
            iVar3 = uVar2 + iVar7;
            uVar4 = iVar5 - uVar2 ^ (uVar2 >> 0x10 | uVar2 << 0x10);
            uVar2 = uVar4 + iVar3;
            uVar6 = iVar7 - uVar4 ^ (uVar4 >> 0xd | uVar4 << 0x13);
            uVar4 = uVar6 + uVar2;
            uVar6 = iVar3 - uVar6 ^ (uVar6 >> 0x1c | uVar6 << 4);
            puVar1 = param_1 + 3;
        } while (0xc < param_2);
    }
    switch (param_2) {
    case 1:
        goto switchD_00045e34_caseD_1;
    case 2:
        goto switchD_00045e34_caseD_2;
    case 3:
        uVar2 = (*param_1 & 0xffffff) + uVar2;
        break;
    case 4:
        uVar2 = uVar2 + *param_1;
        break;
    case 5:
        uVar4 = uVar4 + (byte)param_1[1];
        uVar2 = uVar2 + *param_1;
        break;
    case 6:
        uVar4 = uVar4 + (ushort)param_1[1];
        uVar2 = uVar2 + *param_1;
        break;
    case 7:
        uVar2 = uVar2 + *param_1;
        uVar4 = uVar4 + (param_1[1] & 0xffffff);
        break;
    case 8:
        uVar4 = uVar4 + param_1[1];
        uVar2 = uVar2 + *param_1;
        break;
    case 9:
        uVar8 = (uint)(byte)param_1[2];
        goto LAB_00046148;
    case 10:
        uVar8 = (uint)(ushort)param_1[2];
        goto LAB_00046148;
    case 0xb:
        uVar6 = uVar6 + (param_1[2] & 0xffffff);
        uVar4 = uVar4 + param_1[1];
        uVar2 = uVar2 + *param_1;
        break;
    case 0xc:
        uVar8 = param_1[2];
    LAB_00046148:
        uVar6 = uVar6 + uVar8;
        uVar4 = uVar4 + param_1[1];
        uVar2 = uVar2 + *param_1;
        break;
    default:
        goto switchD_00045e34_default;
    }
LAB_000460d8:
    uVar6 = (uVar6 ^ uVar4) - (uVar4 >> 0x12 | uVar4 << 0xe);
    uVar8 = (uVar2 ^ uVar6) - (uVar6 >> 0x15 | uVar6 * 0x800);
    uVar10 = (uVar4 ^ uVar8) - (uVar8 >> 7 | uVar8 * 0x2000000);
    uVar2 = (uVar6 ^ uVar10) - (uVar10 >> 0x10 | uVar10 * 0x10000);
    uVar4 = (uVar8 ^ uVar2) - (uVar2 >> 0x1c | uVar2 * 0x10);
    uVar4 = (uVar10 ^ uVar4) - (uVar4 >> 0x12 | uVar4 * 0x4000);
    uVar6 = (uVar2 ^ uVar4) - (uVar4 >> 8 | uVar4 * 0x1000000);
switchD_00045e34_default:
    return uVar6;
}

int FUN_000462cc(int param_1, int *param_2, char *param_3, int param_4)

{
    int iVar1;
    int iVar2;

    iVar2 = *param_2;
    if ((iVar2 != param_1 + 0xc) || (iVar2 != param_2[1])) {
        while (true) {
            if ((*(int *)(iVar2 + 0x10) == param_4) &&
                (iVar1 = strcmp((char *)(iVar2 + 0x18), param_3), iVar1 == 0)) {
                return iVar2;
            }
            if (param_2[1] == iVar2)
                break;
            iVar2 = *(int *)(iVar2 + 4);
        }
    }
    return 0;
}

void FUN_00046340(int param_1)

{
    bool bVar1;
    int iVar2;
    int *piVar3;
    int iVar4;
    int iVar5;

    iVar4 = *(int *)(param_1 + 0x10);
    if (*(int *)(param_1 + 0x10) != param_1 + 0xc) {
        do {
            iVar2 = *(int *)(iVar4 + 0x14);
            iVar5 = *(int *)(iVar4 + 4);
            if ((iVar2 != 0) &&
                (piVar3 = (int *)(iVar2 + 4), *(int *)(iVar2 + 4) != -1)) {
                DataMemoryBarrier(0xb);
                do {
                    iVar2 = *piVar3;
                    bVar1 = (bool)hasExclusiveAccess(piVar3);
                } while (!bVar1);
                *piVar3 = iVar2 + -1;
                if (iVar2 + -1 == 0) {
                    FUN_000495fc();
                }
            }
            FUN_0004832c(iVar4);
            iVar4 = iVar5;
        } while (iVar5 != param_1 + 0xc);
        return;
    }
    return;
}

undefined4 FUN_000463b0(undefined4 *param_1)

{
    undefined4 *puVar1;
    undefined4 *puVar2;
    undefined4 *puVar3;
    undefined4 *puVar4;
    uint uVar5;

    *param_1 = 0;
    param_1[2] = 3;
    puVar1 = (undefined4 *)FUN_00048314(0x40);
    param_1[1] = puVar1;
    if (puVar1 != (undefined4 *)0x0) {
        uVar5 = param_1[2];
        puVar4 = param_1 + 3;
        param_1[4] = puVar4;
        param_1[3] = puVar4;
        param_1[6] = param_1 + 5;
        param_1[5] = param_1 + 5;
        if (1 << (uVar5 & 0xff) != 0) {
            puVar2 = puVar1;
            do {
                puVar2[1] = puVar4;
                puVar3 = puVar2 + 2;
                *puVar2 = puVar4;
                puVar2 = puVar3;
            } while (puVar3 !=
                     (undefined4 *)((int)puVar1 + (8 << (uVar5 & 0xff))));
        }
        return 0;
    }
    return 0xffffffff;
}

void FUN_0004642c(int param_1)

{
    FUN_00046340();
    FUN_0004832c(*(undefined4 *)(param_1 + 4));
    return;
}

undefined4 FUN_00046444(uint *param_1, char *param_2, uint param_3)

{
    bool bVar1;
    int *piVar2;
    size_t sVar3;
    uint uVar4;
    int iVar5;
    int iVar6;
    uint *puVar7;
    int *piVar8;
    int *piVar9;
    uint *puVar10;
    uint *puVar11;
    uint uVar12;
    uint *puVar13;

    uVar12 = param_1[2];
    if (*param_1 >> (uVar12 & 0xff) == 0) {
        piVar2 = (int *)param_1[1];
        uVar12 = ~(-1 << (uVar12 & 0xff));
    } else {
        uVar12 = uVar12 + 1;
        iVar5 = 8 << (uVar12 & 0xff);
        piVar2 = (int *)FUN_00048314(iVar5);
        if (piVar2 == (int *)0x0) {
            return 0xffffffff;
        }
        FUN_0004832c(param_1[1]);
        param_1[1] = (uint)piVar2;
        param_1[2] = uVar12;
        puVar7 = param_1 + 3;
        if (1 << (uVar12 & 0xff) != 0) {
            piVar8 = piVar2;
            do {
                piVar8[1] = (int)puVar7;
                piVar9 = piVar8 + 2;
                *piVar8 = (int)puVar7;
                piVar8 = piVar9;
            } while ((int *)(iVar5 + (int)piVar2) != piVar9);
        }
        puVar10 = (uint *)param_1[4];
        param_1[3] = (uint)puVar7;
        uVar12 = ~(-1 << (uVar12 & 0xff));
        param_1[4] = (uint)puVar7;
        if (puVar10 != puVar7) {
            do {
                while (true) {
                    puVar13 = (uint *)puVar10[1];
                    puVar11 = (uint *)piVar2[(puVar10[4] & uVar12) * 2];
                    piVar8 = piVar2 + (puVar10[4] & uVar12) * 2;
                    if ((puVar11 != puVar7) || (puVar7 != (uint *)piVar8[1]))
                        break;
                    uVar4 = param_1[3];
                    puVar10[1] = (uint)puVar7;
                    *puVar10 = uVar4;
                    *(uint **)(param_1[3] + 4) = puVar10;
                    param_1[3] = (uint)puVar10;
                    piVar8[1] = (int)puVar10;
                    *piVar8 = (int)puVar10;
                    puVar10 = puVar13;
                    if (puVar13 == puVar7)
                        goto LAB_00046554;
                }
                uVar4 = *puVar11;
                puVar10[1] = (uint)puVar11;
                *puVar10 = uVar4;
                *(uint **)(*puVar11 + 4) = puVar10;
                *puVar11 = (uint)puVar10;
                *piVar8 = (int)puVar10;
                puVar10 = puVar13;
            } while (puVar13 != puVar7);
        LAB_00046554:
            piVar2 = (int *)param_1[1];
            uVar12 = ~(-1 << (param_1[2] & 0xff));
        }
    }
    sVar3 = strlen(param_2);
    uVar4 = FUN_00045d88(param_2, sVar3, DAT_00072c10);
    piVar2 = piVar2 + (uVar12 & uVar4) * 2;
    iVar5 = FUN_000462cc(param_1, piVar2, param_2, uVar4);
    if (iVar5 != 0) {
        iVar6 = *(int *)(iVar5 + 0x14);
        if ((iVar6 != 0) && (*(int *)(iVar6 + 4) != -1)) {
            piVar2 = (int *)(iVar6 + 4);
            DataMemoryBarrier(0xb);
            do {
                iVar6 = *piVar2;
                bVar1 = (bool)hasExclusiveAccess(piVar2);
            } while (!bVar1);
            *piVar2 = iVar6 + -1;
            if (iVar6 + -1 == 0) {
                FUN_000495fc();
            }
        }
        *(uint *)(iVar5 + 0x14) = param_3;
        return 0;
    }
    puVar7 = (uint *)FUN_00048314(sVar3 + 0x19);
    if (puVar7 == (uint *)0x0) {
        return 0xffffffff;
    }
    puVar7[4] = uVar4;
    strncpy((char *)(puVar7 + 6), param_2, sVar3 + 1);
    puVar11 = (uint *)*piVar2;
    puVar10 = puVar7 + 2;
    puVar7[5] = param_3;
    puVar7[1] = (uint)puVar7;
    *puVar7 = (uint)puVar7;
    puVar7[3] = (uint)puVar10;
    puVar7[2] = (uint)puVar10;
    if ((puVar11 == param_1 + 3) && (puVar11 == (uint *)piVar2[1])) {
        *puVar7 = param_1[3];
        puVar7[1] = (uint)puVar11;
        *(uint **)(param_1[3] + 4) = puVar7;
        param_1[3] = (uint)puVar7;
        piVar2[1] = (int)puVar7;
        *piVar2 = (int)puVar7;
    } else {
        *puVar7 = *puVar11;
        puVar7[1] = (uint)puVar11;
        *(uint **)(*puVar11 + 4) = puVar7;
        *puVar11 = (uint)puVar7;
        *piVar2 = (int)puVar7;
    }
    uVar12 = param_1[5];
    uVar4 = *param_1;
    puVar7[3] = (uint)(param_1 + 5);
    puVar7[2] = uVar12;
    *(uint **)(param_1[5] + 4) = puVar10;
    param_1[5] = (uint)puVar10;
    *param_1 = uVar4 + 1;
    return 0;
}

int FUN_000466d8(int param_1, char *param_2)

{
    size_t sVar1;
    uint uVar2;
    int iVar3;

    sVar1 = strlen(param_2);
    uVar2 = FUN_00045d88(param_2, sVar1, DAT_00072c10);
    iVar3 =
        FUN_000462cc(param_1,
                     *(int *)(param_1 + 4) +
                         (uVar2 & ~(-1 << (*(uint *)(param_1 + 8) & 0xff))) * 8,
                     param_2, uVar2);
    if (iVar3 != 0) {
        iVar3 = *(int *)(iVar3 + 0x14);
    }
    return iVar3;
}

undefined4 FUN_00046738(int *param_1, char *param_2)

{
    bool bVar1;
    size_t sVar2;
    uint uVar3;
    int *piVar4;
    int iVar5;
    int iVar6;
    int *piVar7;
    uint uVar8;
    int iVar9;
    int iVar10;

    sVar2 = strlen(param_2);
    uVar3 = FUN_00045d88(param_2, sVar2, DAT_00072c10);
    iVar10 = param_1[1];
    uVar8 = uVar3 & ~(-1 << (param_1[2] & 0xffU));
    iVar9 = iVar10 + uVar8 * 8;
    piVar4 = (int *)FUN_000462cc(param_1, iVar9, param_2, uVar3);
    if (piVar4 == (int *)0x0) {
        return 0xffffffff;
    }
    iVar5 = piVar4[1];
    iVar6 = *piVar4;
    if (piVar4 == *(int **)(iVar10 + uVar8 * 8)) {
        if (piVar4 == *(int **)(iVar9 + 4)) {
            *(int **)(iVar9 + 4) = param_1 + 3;
            *(int **)(iVar10 + uVar8 * 8) = param_1 + 3;
        } else {
            *(int *)(iVar10 + uVar8 * 8) = iVar5;
        }
    } else if (piVar4 == *(int **)(iVar9 + 4)) {
        *(int *)(iVar9 + 4) = iVar6;
    }
    *(int *)(iVar6 + 4) = iVar5;
    iVar10 = piVar4[3];
    iVar9 = piVar4[5];
    *(int *)piVar4[1] = iVar6;
    iVar5 = piVar4[2];
    *(int *)(iVar5 + 4) = iVar10;
    *(int *)piVar4[3] = iVar5;
    if ((iVar9 != 0) && (*(int *)(iVar9 + 4) != -1)) {
        piVar7 = (int *)(iVar9 + 4);
        DataMemoryBarrier(0xb);
        do {
            iVar9 = *piVar7;
            bVar1 = (bool)hasExclusiveAccess(piVar7);
        } while (!bVar1);
        *piVar7 = iVar9 + -1;
        if (iVar9 + -1 == 0) {
            FUN_000495fc();
        }
    }
    FUN_0004832c(piVar4);
    *param_1 = *param_1 + -1;
    return 0;
}

void FUN_00046858(undefined4 *param_1)

{
    uint uVar1;
    undefined4 *puVar2;
    undefined4 *puVar3;
    undefined4 *puVar4;
    undefined4 *puVar5;

    FUN_00046340();
    puVar2 = param_1 + 3;
    uVar1 = param_1[2];
    if (1 << (uVar1 & 0xff) != 0) {
        puVar3 = (undefined4 *)param_1[1];
        puVar4 = puVar3;
        do {
            puVar4[1] = puVar2;
            puVar5 = puVar4 + 2;
            *puVar4 = puVar2;
            puVar4 = puVar5;
        } while (puVar5 != (undefined4 *)((int)puVar3 + (8 << (uVar1 & 0xff))));
    }
    param_1[4] = puVar2;
    param_1[3] = puVar2;
    param_1[6] = param_1 + 5;
    param_1[5] = param_1 + 5;
    *param_1 = 0;
    return;
}

int FUN_000468b4(int param_1)

{
    int iVar1;

    iVar1 = *(int *)(param_1 + 0x18);
    if (iVar1 == param_1 + 0x14) {
        iVar1 = 0;
    }
    return iVar1;
}

int FUN_000468cc(int param_1, char *param_2)

{
    size_t sVar1;
    uint uVar2;
    int iVar3;

    sVar1 = strlen(param_2);
    uVar2 = FUN_00045d88(param_2, sVar1, DAT_00072c10);
    iVar3 =
        FUN_000462cc(param_1,
                     *(int *)(param_1 + 4) +
                         (uVar2 & ~(-1 << (*(uint *)(param_1 + 8) & 0xff))) * 8,
                     param_2, uVar2);
    if (iVar3 != 0) {
        iVar3 = iVar3 + 8;
    }
    return iVar3;
}

int FUN_0004692c(int param_1, int param_2)

{
    int iVar1;

    iVar1 = *(int *)(param_2 + 4);
    if (iVar1 == param_1 + 0x14) {
        iVar1 = 0;
    }
    return iVar1;
}

int FUN_00046944(int param_1)

{
    return param_1 + 0x10;
}

undefined4 FUN_0004694c(int param_1)

{
    return *(undefined4 *)(param_1 + 0xc);
}

void FUN_00046954(int param_1, undefined4 param_2)

{
    bool bVar1;
    int iVar2;
    int *piVar3;

    iVar2 = *(int *)(param_1 + 0xc);
    if ((iVar2 != 0) && (*(int *)(iVar2 + 4) != -1)) {
        piVar3 = (int *)(iVar2 + 4);
        DataMemoryBarrier(0xb);
        do {
            iVar2 = *piVar3;
            bVar1 = (bool)hasExclusiveAccess(piVar3);
        } while (!bVar1);
        *piVar3 = iVar2 + -1;
        if (iVar2 + -1 == 0) {
            FUN_000495fc();
            *(undefined4 *)(param_1 + 0xc) = param_2;
            return;
        }
    }
    *(undefined4 *)(param_1 + 0xc) = param_2;
    return;
}

void FUN_000469c0(uint param_1)

{
    bool bVar1;
    char cVar2;
    int __fd;
    ssize_t sVar3;
    timeval local_20;

    cVar2 = DAT_00072c14;
    if (DAT_00072c10 != 0) {
        return;
    }
    do {
        bVar1 = (bool)hasExclusiveAccess(0x72c14);
    } while (!bVar1);
    DAT_00072c14 = 1;
    if (cVar2 != '\0') {
        do {
            sched_yield();
            DataMemoryBarrier(0xb);
        } while (DAT_00072c10 == 0);
        return;
    }
    if (param_1 != 0)
        goto LAB_00046a10;
    __fd = open64("/dev/urandom", 0);
    if (__fd == -1) {
    LAB_00046a94:
        gettimeofday(&local_20, (__timezone_ptr_t)0x0);
        param_1 = getpid();
        param_1 = param_1 ^ local_20.tv_usec ^ local_20.tv_sec;
    } else {
        sVar3 = read(__fd, &local_20, 4);
        close(__fd);
        if (sVar3 != 4)
            goto LAB_00046a94;
        param_1 = CONCAT31(CONCAT21(CONCAT11((undefined1)local_20.tv_sec,
                                             local_20.tv_sec._1_1_),
                                    local_20.tv_sec._2_1_),
                           local_20.tv_sec._3_1_);
    }
    if (param_1 == 0) {
        param_1 = 1;
    }
LAB_00046a10:
    DataMemoryBarrier(0xb);
    DAT_00072c10 = param_1;
    return;
}

void FUN_00046b60(int param_1, int param_2, int param_3, char *param_4)

{
    char *pcVar1;
    undefined4 uVar2;
    undefined4 uVar3;
    undefined4 uVar4;
    char acStack_168[159];
    undefined1 local_c9;
    char acStack_c8[159];
    undefined1 local_29;

    if (param_1 == 0) {
        return;
    }
    vsnprintf(acStack_168, 0xa0, param_4, &stack0x00000000);
    local_c9 = 0;
    if (param_2 == 0) {
        uVar2 = 0xffffffff;
        pcVar1 = acStack_168;
        uVar3 = 0xffffffff;
        uVar4 = 0;
    } else {
        pcVar1 = (char *)FUN_0004845c(param_2 + 0x28);
        uVar3 = *(undefined4 *)(param_2 + 0x18);
        uVar2 = *(undefined4 *)(param_2 + 0x1c);
        uVar4 = *(undefined4 *)(param_2 + 0x24);
        if ((pcVar1 == (char *)0x0) || (*pcVar1 == '\0')) {
            if (param_3 == 8) {
                param_3 = 6;
            }
            if (*(int *)(param_2 + 0x14) != -2) {
                snprintf(acStack_c8, 0xa0, "%s near end of file", acStack_168);
                pcVar1 = acStack_c8;
                local_29 = 0;
                goto LAB_00046bf4;
            }
        } else if (*(uint *)(param_2 + 0x2c) < 0x15) {
            snprintf(acStack_c8, 0xa0, "%s near \'%s\'", acStack_168, pcVar1);
            pcVar1 = acStack_c8;
            local_29 = 0;
            goto LAB_00046bf4;
        }
        pcVar1 = acStack_168;
    }
LAB_00046bf4:
    FUN_0004a3ec(param_1, uVar3, uVar2, uVar4, param_3, "%s", pcVar1);
    return;
}

void FUN_00046c90(int param_1)

{
    if (*(int *)(param_1 + 0x3c) != 0x100) {
        FUN_0004841c(param_1 + 0x28);
        return;
    }
    FUN_0004832c(*(undefined4 *)(param_1 + 0x40));
    *(undefined4 *)(param_1 + 0x40) = 0;
    *(undefined4 *)(param_1 + 0x44) = 0;
    FUN_0004841c(param_1 + 0x28);
    return;
}

uint FUN_00046cd0(int *param_1)

{
    ssize_t sVar1;
    uint uVar2;
    byte local_9[5];

    sVar1 = read(*param_1, local_9, 1);
    if (sVar1 == 1) {
        uVar2 = (uint)local_9[0];
    } else {
        uVar2 = 0xffffffff;
    }
    return uVar2;
}

int FUN_00046cfc(byte *param_1)

{
    int iVar1;
    uint uVar2;
    byte *pbVar3;

    if (*param_1 != 0x75) {
        /* WARNING: Subroutine does not return */
        __assert_fail("str[0] == \'u\'", "load.c", 0x135,
                      "decode_unicode_escape");
    }
    iVar1 = 0;
    pbVar3 = param_1 + 4;
    do {
        param_1 = param_1 + 1;
        uVar2 = (uint)*param_1;
        iVar1 = iVar1 * 0x10;
        if ((uVar2 - 0x30 & 0xff) < 10) {
            iVar1 = (uVar2 - 0x30) + iVar1;
        } else if (uVar2 - 0x61 < 0x1a) {
            iVar1 = (uVar2 - 0x57) + iVar1;
        } else {
            if (0x19 < uVar2 - 0x41) {
                return -1;
            }
            iVar1 = (uVar2 - 0x37) + iVar1;
        }
    } while (param_1 != pbVar3);
    return iVar1;
}

void FUN_00046d90(int param_1, uint param_2)

{
    int iVar1;

    if (param_2 + 2 < 2) {
        return;
    }
    *(int *)(param_1 + 0x24) = *(int *)(param_1 + 0x24) + -1;
    if (param_2 == 10) {
        *(int *)(param_1 + 0x18) = *(int *)(param_1 + 0x18) + -1;
        *(undefined4 *)(param_1 + 0x1c) = *(undefined4 *)(param_1 + 0x20);
    } else {
        iVar1 = FUN_000488ac(param_2 & 0xff);
        if (iVar1 != 0) {
            *(int *)(param_1 + 0x1c) = *(int *)(param_1 + 0x1c) + -1;
        }
    }
    if (*(int *)(param_1 + 0x10) != 0) {
        iVar1 = *(int *)(param_1 + 0x10) + -1;
        *(int *)(param_1 + 0x10) = iVar1;
        if (*(byte *)(param_1 + iVar1 + 8) == param_2) {
            return;
        }
        /* WARNING: Subroutine does not return */
        __assert_fail("stream->buffer[stream->buffer_pos] == c", "load.c", 0xf0,
                      "stream_unget");
    }
    /* WARNING: Subroutine does not return */
    __assert_fail("stream->buffer_pos > 0", "load.c", 0xee, "stream_unget");
}

uint FUN_00046e4c(undefined4 *param_1, undefined4 param_2)

{
    undefined1 uVar1;
    int iVar2;
    int iVar3;
    undefined4 uVar4;
    undefined4 *puVar5;
    uint uVar6;
    undefined1 *puVar7;
    undefined1 *puVar8;

    puVar5 = (undefined4 *)((int)param_1 + param_1[4]);
    if (*(char *)(puVar5 + 2) == '\0') {
        iVar3 = (*(code *)*param_1)(param_1[1]);
        if (iVar3 == -1) {
            param_1[5] = 0xffffffff;
            return 0xffffffff;
        }
        param_1[4] = 0;
        *(char *)(param_1 + 2) = (char)iVar3;
        if (iVar3 - 0x80U < 0x80) {
            uVar6 = FUN_000488ac();
            if (uVar6 != 0) {
                if (uVar6 < 2) {
                    /* WARNING: Subroutine does not return */
                    __assert_fail("count >= 2", "load.c", 0xbd, "stream_get");
                }
                puVar7 = (undefined1 *)((int)param_1 + 9);
                do {
                    uVar1 = (*(code *)*param_1)(param_1[1]);
                    puVar8 = puVar7 + 1;
                    *puVar7 = uVar1;
                    puVar7 = puVar8;
                } while ((undefined1 *)((int)(param_1 + 2) + uVar6) != puVar8);
                iVar2 = FUN_00048918(param_1 + 2, uVar6, 0);
                if (iVar2 != 0) {
                    *(undefined1 *)((int)param_1 + uVar6 + 8) = 0;
                    iVar3 = param_1[4] + 1;
                    puVar5 = (undefined4 *)((int)param_1 + param_1[4]);
                    goto LAB_00046eb4;
                }
            }
            param_1[5] = 0xfffffffe;
            FUN_00046b60(param_2, param_1, 5, "unable to decode byte 0x%x",
                         iVar3);
            return 0xfffffffe;
        }
        iVar3 = 1;
        *(undefined1 *)((int)param_1 + 9) = 0;
        puVar5 = param_1;
    } else {
        iVar3 = param_1[4] + 1;
    }
LAB_00046eb4:
    param_1[4] = iVar3;
    uVar6 = (uint) * (byte *)(puVar5 + 2);
    param_1[9] = param_1[9] + 1;
    if (uVar6 != 10) {
        iVar3 = FUN_000488ac(uVar6);
        if (iVar3 != 0) {
            param_1[7] = param_1[7] + 1;
        }
        return uVar6;
    }
    uVar4 = param_1[7];
    param_1[7] = 0;
    param_1[6] = param_1[6] + 1;
    param_1[8] = uVar4;
    return 10;
}

uint FUN_00046fd4(int param_1)

{
    uint uVar1;

    uVar1 = *(uint *)(param_1 + 0x14);
    if (uVar1 == 0) {
        uVar1 = FUN_00046e4c();
    }
    if (1 < uVar1 + 2) {
        FUN_00048544(param_1 + 0x28, uVar1 & 0xff);
    }
    return uVar1;
}

void FUN_00047014(int param_1, int param_2)

{
    int iVar1;

    if (param_2 + 2U < 2) {
        return;
    }
    FUN_00046d90();
    iVar1 = FUN_00048568(param_1 + 0x28);
    if (iVar1 == param_2) {
        return;
    }
    /* WARNING: Subroutine does not return */
    __assert_fail("c == d", "load.c", 0x11a, "lex_unget_unsave");
}

uint FUN_00047060(int param_1, undefined4 param_2)

{
    char cVar1;
    char *pcVar2;
    int *piVar3;
    byte *pbVar4;
    byte *pbVar5;
    byte bVar6;
    int iVar7;
    uint uVar8;
    uint uVar9;
    byte *pbVar10;
    int iVar11;
    bool bVar12;
    bool bVar13;
    longlong lVar14;
    char *local_30;
    undefined4 uStack_2c;

    iVar11 = param_1 + 0x28;
    FUN_00048448(iVar11);
    if (*(int *)(param_1 + 0x3c) == 0x100) {
        FUN_0004832c(*(undefined4 *)(param_1 + 0x40));
        *(undefined4 *)(param_1 + 0x40) = 0;
        *(undefined4 *)(param_1 + 0x44) = 0;
    }
    do {
        uVar9 = *(uint *)(param_1 + 0x14);
        if (uVar9 == 0) {
            uVar9 = FUN_00046e4c(param_1, param_2);
        }
        bVar12 = 0x1f < uVar9;
        if (uVar9 != 0x20) {
            bVar12 = uVar9 != 9;
        }
    } while ((!bVar12 || (uVar9 == 0x20 || uVar9 == 10)) || (uVar9 == 0xd));
    if (uVar9 == 0xffffffff) {
        *(undefined4 *)(param_1 + 0x3c) = 0;
        return 0;
    }
    if (uVar9 == 0xfffffffe) {
    LAB_000471a8:
        *(undefined4 *)(param_1 + 0x3c) = 0xffffffff;
        return 0xffffffff;
    }
    FUN_00048544(iVar11, uVar9 & 0xff);
    if ((((uVar9 & 0xffffffdf) - 0x5b & 0xfffffffd) == 0) ||
        (uVar9 == 0x2c || uVar9 == 0x3a)) {
    LAB_000471d4:
        *(uint *)(param_1 + 0x3c) = uVar9;
        return uVar9;
    }
    if (uVar9 == 0x22) {
        *(undefined4 *)(param_1 + 0x40) = 0;
        *(undefined4 *)(param_1 + 0x3c) = 0xffffffff;
    LAB_00047210:
        do {
            uVar9 = FUN_00046fd4(param_1, param_2);
            while (true) {
                if (uVar9 == 0x22) {
                    pbVar4 = (byte *)FUN_00048314(*(int *)(param_1 + 0x2c) + 1);
                    if (pbVar4 == (byte *)0x0)
                        goto LAB_0004729c;
                    *(byte **)(param_1 + 0x40) = pbVar4;
                    iVar11 = FUN_0004845c(iVar11);
                    pbVar10 = (byte *)(iVar11 + 1);
                    goto LAB_00047544;
                }
                if (uVar9 == 0xfffffffe)
                    goto LAB_0004729c;
                if (uVar9 == 0xffffffff) {
                    FUN_00046b60(param_2, param_1, 6, "premature end of input");
                    goto LAB_0004729c;
                }
                if (uVar9 < 0x20) {
                    FUN_00047014(param_1, uVar9);
                    if (uVar9 == 10) {
                        FUN_00046b60(param_2, param_1, 8, "unexpected newline");
                    } else {
                        FUN_00046b60(param_2, param_1, 8,
                                     "control character 0x%x", uVar9);
                    }
                    goto LAB_0004729c;
                }
                if (uVar9 != 0x5c)
                    goto LAB_00047210;
                uVar9 = FUN_00046fd4(param_1, param_2);
                if (uVar9 != 0x75)
                    break;
                uVar9 = FUN_00046fd4(param_1, param_2);
                iVar7 = 4;
                do {
                    uVar8 = (uVar9 & 0xffffffdf) - 0x41;
                    bVar13 = 4 < uVar8;
                    bVar12 = uVar8 == 5;
                    if (5 < uVar8) {
                        bVar13 = 8 < uVar9 - 0x30;
                        bVar12 = uVar9 - 0x30 == 9;
                    }
                    if (bVar13 && !bVar12)
                        goto LAB_00047284;
                    uVar9 = FUN_00046fd4(param_1, param_2);
                    iVar7 = iVar7 + -1;
                } while (iVar7 != 0);
            }
        } while (((uVar9 == 0x5c || (uVar9 & 0xffffffbf) == 0x22) ||
                  (uVar9 == 0x2f)) ||
                 (((uVar9 & 0xfffffff7) == 0x66 ||
                   ((uVar9 - 0x72 & 0xfffffffd) == 0))));
    LAB_00047284:
        FUN_00046b60(param_2, param_1, 8, "invalid escape");
    LAB_0004729c:
        FUN_0004832c(*(undefined4 *)(param_1 + 0x40));
        *(undefined4 *)(param_1 + 0x40) = 0;
        *(undefined4 *)(param_1 + 0x44) = 0;
        return *(uint *)(param_1 + 0x3c);
    }
    bVar12 = 0x2c < uVar9;
    if (uVar9 != 0x2d) {
        bVar12 = 8 < uVar9 - 0x30;
    }
    if (bVar12 && (uVar9 != 0x2d && uVar9 - 0x30 != 9)) {
        if ((uVar9 & 0xffffffdf) - 0x41 < 0x1a) {
            do {
                uVar9 = FUN_00046fd4(param_1, param_2);
            } while ((uVar9 & 0xffffffdf) - 0x41 < 0x1a);
            FUN_00047014(param_1, uVar9);
            pcVar2 = (char *)FUN_0004845c(iVar11);
            iVar11 = strcmp(pcVar2, "true");
            if (iVar11 == 0) {
                *(undefined4 *)(param_1 + 0x3c) = 0x103;
                return 0x103;
            }
            iVar11 = strcmp(pcVar2, "false");
            if (iVar11 == 0) {
                uVar9 = 0x104;
                goto LAB_000471d4;
            }
            iVar11 = strcmp(pcVar2, "null");
            if (iVar11 == 0) {
                *(undefined4 *)(param_1 + 0x3c) = 0x105;
                return 0x105;
            }
        } else {
            cVar1 = *(char *)(param_1 + *(int *)(param_1 + 0x10) + 8);
            while (cVar1 != '\0') {
                FUN_00048544(iVar11);
                iVar7 = *(int *)(param_1 + 0x10) + 1;
                *(int *)(param_1 + 0x10) = iVar7;
                *(int *)(param_1 + 0x24) = *(int *)(param_1 + 0x24) + 1;
                cVar1 = *(char *)(param_1 + iVar7 + 8);
            }
        }
        goto LAB_000471a8;
    }
    *(undefined4 *)(param_1 + 0x3c) = 0xffffffff;
    if (uVar9 == 0x2d) {
        uVar9 = FUN_00046fd4(param_1, param_2);
        if (uVar9 == 0x30)
            goto LAB_00047640;
        if (uVar9 - 0x30 < 10)
            goto LAB_000472d0;
    LAB_0004765c:
        FUN_00047014(param_1, uVar9);
        uVar9 = *(uint *)(param_1 + 0x3c);
    } else {
        if (uVar9 == 0x30) {
        LAB_00047640:
            uVar9 = FUN_00046fd4(param_1, param_2);
            if (uVar9 - 0x30 < 10)
                goto LAB_0004765c;
        } else {
        LAB_000472d0:
            do {
                uVar9 = FUN_00046fd4(param_1, param_2);
            } while (uVar9 - 0x30 < 10);
        }
        if (((*(uint *)(param_1 + 0x34) & 8) == 0) &&
            (uVar9 != 0x2e && uVar9 != 0x45)) {
            if (uVar9 != 0x65) {
                FUN_00047014(param_1, uVar9);
                pcVar2 = (char *)FUN_0004845c(iVar11);
                piVar3 = __errno_location();
                *piVar3 = 0;
                lVar14 = strtoll(pcVar2, &local_30, 10);
                if (*piVar3 == 0x22) {
                    if (lVar14 < 0) {
                        pcVar2 = "too big negative integer";
                    } else {
                        pcVar2 = "too big integer";
                    }
                    FUN_00046b60(param_2, param_1, 0xf, pcVar2);
                    return *(uint *)(param_1 + 0x3c);
                }
                if (local_30 == pcVar2 + *(int *)(param_1 + 0x2c)) {
                    *(longlong *)(param_1 + 0x40) = lVar14;
                    *(undefined4 *)(param_1 + 0x3c) = 0x101;
                    return 0x101;
                }
                /* WARNING: Subroutine does not return */
                __assert_fail("end == saved_text + lex->saved_text.length",
                              "load.c", 0x21d, "lex_scan_number");
            }
        LAB_000473fc:
            uVar9 = FUN_00046fd4(param_1, param_2);
            if ((uVar9 - 0x2b & 0xfffffffd) == 0) {
                uVar9 = FUN_00046fd4(param_1, param_2);
            }
            if (9 < uVar9 - 0x30)
                goto LAB_0004765c;
            do {
                uVar9 = FUN_00046fd4(param_1, param_2);
            } while (uVar9 - 0x30 < 10);
        } else {
            if (uVar9 == 0x2e) {
                uVar9 = *(uint *)(param_1 + 0x14);
                if (uVar9 == 0) {
                    uVar9 = FUN_00046e4c(param_1, param_2);
                }
                if (9 < uVar9 - 0x30) {
                    FUN_00046d90(param_1);
                    return *(uint *)(param_1 + 0x3c);
                }
                FUN_00048544(iVar11, uVar9 & 0xff);
                do {
                    uVar9 = FUN_00046fd4(param_1, param_2);
                } while (uVar9 - 0x30 < 10);
            }
            if ((uVar9 & 0xffffffdf) == 0x45)
                goto LAB_000473fc;
        }
        FUN_00047014(param_1, uVar9);
        iVar11 = FUN_00048590(iVar11, &local_30);
        if (iVar11 == 0) {
            uVar9 = 0x102;
            *(undefined4 *)(param_1 + 0x3c) = 0x102;
            *(char **)(param_1 + 0x40) = local_30;
            *(undefined4 *)(param_1 + 0x44) = uStack_2c;
        } else {
            FUN_00046b60(param_2, param_1, 0xf, "real number overflow");
            uVar9 = *(uint *)(param_1 + 0x3c);
        }
    }
    return uVar9;
LAB_00047544:
    while (true) {
        bVar6 = *pbVar10;
        if (bVar6 == 0x22) {
            *pbVar4 = 0;
            *(undefined4 *)(param_1 + 0x3c) = 0x100;
            *(int *)(param_1 + 0x44) = (int)pbVar4 - *(int *)(param_1 + 0x40);
            return 0x100;
        }
        if (bVar6 == 0x5c)
            break;
        *pbVar4 = bVar6;
        pbVar4 = pbVar4 + 1;
        pbVar10 = pbVar10 + 1;
    }
    bVar6 = pbVar10[1];
    if (bVar6 == 0x75) {
        iVar11 = FUN_00046cfc();
        pbVar5 = pbVar10;
        if (iVar11 < 0) {
        LAB_0004776c:
            FUN_00046b60(param_2, param_1, 8, "invalid Unicode escape \'%.6s\'",
                         pbVar5);
            goto LAB_0004729c;
        }
        pbVar5 = pbVar10 + 6;
        if (iVar11 - 0xd800U < 0x400) {
            if ((pbVar10[6] == 0x5c) && (pbVar10[7] == 0x75)) {
                iVar7 = FUN_00046cfc(pbVar10 + 7);
                if (iVar7 < 0)
                    goto LAB_0004776c;
                pbVar5 = pbVar10 + 0xc;
                if (0x3ff < iVar7 - 0xdc00U) {
                    FUN_00046b60(param_2, param_1, 8,
                                 "invalid Unicode \'\\u%04X\\u%04X\'", iVar11,
                                 iVar7);
                    goto LAB_0004729c;
                }
                iVar11 =
                    (iVar7 - 0xdc00U) + (iVar11 - 0xd800U) * 0x400 + 0x10000;
            LAB_0004761c:
                iVar11 = FUN_000487c0(iVar11, pbVar4, &local_30);
                if (iVar11 != 0) {
                    /* WARNING: Subroutine does not return */
                    __assert_fail("0", "load.c", 0x1c4, "lex_scan_string");
                }
                pbVar4 = pbVar4 + (int)local_30;
                pbVar10 = pbVar5;
                goto LAB_00047544;
            }
        } else if (0x3ff < iVar11 - 0xdc00U)
            goto LAB_0004761c;
        FUN_00046b60(param_2, param_1, 8, "invalid Unicode \'\\u%04X\'",
                     iVar11);
        goto LAB_0004729c;
    }
    if (bVar6 == 0x62) {
        *pbVar4 = 8;
    } else if (bVar6 < 99) {
        if (((bVar6 != 0x2f) && (bVar6 != 0x5c)) && (bVar6 != 0x22))
            goto LAB_000476d0;
    LAB_000476a8:
        *pbVar4 = bVar6;
    } else if (bVar6 == 0x6e) {
        *pbVar4 = 10;
    } else {
        if (bVar6 < 0x6f) {
            if (bVar6 != 0x66) {
            LAB_000476d0:
                /* WARNING: Subroutine does not return */
                __assert_fail("0", "load.c", 0x1d0, "lex_scan_string");
            }
            bVar6 = 0xc;
            goto LAB_000476a8;
        }
        if (bVar6 == 0x72) {
            *pbVar4 = 0xd;
        } else {
            if (bVar6 != 0x74)
                goto LAB_000476d0;
            *pbVar4 = 9;
        }
    }
    pbVar4 = pbVar4 + 1;
    pbVar10 = pbVar10 + 2;
    goto LAB_00047544;
}

int FUN_00047878(int param_1, uint param_2, undefined4 param_3)

{
    bool bVar1;
    void *pvVar2;
    int iVar3;
    uint uVar4;
    int iVar5;
    int *piVar6;
    void *pvVar7;
    size_t sVar8;

    uVar4 = *(int *)(param_1 + 0x38) + 1;
    *(uint *)(param_1 + 0x38) = uVar4;
    if (0x800 < uVar4) {
        FUN_00046b60(param_3, param_1, 2, "maximum parsing depth reached");
        return 0;
    }
    iVar5 = *(int *)(param_1 + 0x3c);
    if (iVar5 == 0x101) {
        iVar5 = FUN_00049420(*(undefined4 *)(param_1 + 0x40),
                             *(undefined4 *)(param_1 + 0x44));
    } else if (iVar5 < 0x102) {
        if (iVar5 == 0x5b) {
            iVar5 = FUN_00048fd0();
            if (iVar5 == 0) {
                return 0;
            }
            FUN_00047060(param_1, param_3);
            iVar3 = *(int *)(param_1 + 0x3c);
            if (iVar3 != 0x5d) {
                while (iVar3 != 0) {
                    iVar3 = FUN_00047878(param_1, param_2, param_3);
                    if ((iVar3 == 0) ||
                        (iVar3 = FUN_00049f24(iVar5), iVar3 != 0))
                        goto LAB_00047ba0;
                    FUN_00047060(param_1, param_3);
                    if (*(int *)(param_1 + 0x3c) != 0x2c) {
                        if (*(int *)(param_1 + 0x3c) == 0x5d)
                            goto LAB_000478e0;
                        break;
                    }
                    FUN_00047060(param_1, param_3);
                    iVar3 = *(int *)(param_1 + 0x3c);
                }
                FUN_00046b60(param_3, param_1, 8, "\']\' expected");
            LAB_00047ba0:
                if (*(int *)(iVar5 + 4) == -1) {
                    return 0;
                }
                piVar6 = (int *)(iVar5 + 4);
                DataMemoryBarrier(0xb);
                do {
                    iVar3 = *piVar6 + -1;
                    bVar1 = (bool)hasExclusiveAccess(piVar6);
                } while (!bVar1);
                *piVar6 = iVar3;
            LAB_00047bc8:
                if (iVar3 == 0) {
                    FUN_000495fc(iVar5);
                    return 0;
                }
                return 0;
            }
            goto LAB_000478e0;
        }
        if (iVar5 < 0x5c) {
            if (iVar5 == -1) {
                FUN_00046b60(param_3, param_1, 8, "invalid token");
                return 0;
            }
        LAB_00047be0:
            FUN_00046b60(param_3, param_1, 8, "unexpected token");
            return 0;
        }
        if (iVar5 == 0x7b) {
            iVar5 = FUN_00048c40();
            if (iVar5 == 0) {
                return 0;
            }
            FUN_00047060(param_1, param_3);
            if (*(int *)(param_1 + 0x3c) != 0x7d) {
                if (*(int *)(param_1 + 0x3c) == 0x100) {
                    pvVar7 = *(void **)(param_1 + 0x40);
                    sVar8 = *(size_t *)(param_1 + 0x44);
                    *(undefined4 *)(param_1 + 0x40) = 0;
                    *(undefined4 *)(param_1 + 0x44) = 0;
                    if (pvVar7 == (void *)0x0) {
                        return 0;
                    }
                    while (true) {
                        pvVar2 = memchr(pvVar7, 0, sVar8);
                        if (pvVar2 != (void *)0x0) {
                            FUN_0004832c(pvVar7);
                            FUN_00046b60(
                                param_3, param_1, 0xd,
                                "NUL byte in object key not supported");
                            goto LAB_00047aa8;
                        }
                        if (((param_2 & 1) != 0) &&
                            (iVar3 = FUN_00048cc4(iVar5, pvVar7), iVar3 != 0)) {
                            FUN_0004832c(pvVar7);
                            FUN_00046b60(param_3, param_1, 0xe,
                                         "duplicate object key");
                            goto LAB_00047aa8;
                        }
                        FUN_00047060(param_1, param_3);
                        if (*(int *)(param_1 + 0x3c) != 0x3a) {
                            FUN_0004832c(pvVar7, param_3);
                            FUN_00046b60(param_3, param_1, 8, "\':\' expected");
                            goto LAB_00047aa8;
                        }
                        FUN_00047060(param_1);
                        iVar3 = FUN_00047878(param_1, param_2, param_3);
                        if (iVar3 == 0) {
                            FUN_0004832c(pvVar7, pvVar7);
                            goto LAB_00047aa8;
                        }
                        iVar3 = FUN_000498bc(iVar5);
                        if (iVar3 != 0) {
                            FUN_0004832c(pvVar7);
                            goto LAB_00047aa8;
                        }
                        FUN_0004832c(pvVar7);
                        FUN_00047060(param_1, param_3);
                        if (*(int *)(param_1 + 0x3c) != 0x2c)
                            break;
                        FUN_00047060(param_1, param_3);
                        if (*(int *)(param_1 + 0x3c) != 0x100)
                            goto LAB_00047c60;
                        pvVar7 = *(void **)(param_1 + 0x40);
                        sVar8 = *(size_t *)(param_1 + 0x44);
                        *(undefined4 *)(param_1 + 0x40) = 0;
                        *(undefined4 *)(param_1 + 0x44) = 0;
                        if (pvVar7 == (void *)0x0) {
                            return 0;
                        }
                    }
                    if (*(int *)(param_1 + 0x3c) == 0x7d)
                        goto LAB_000478e0;
                    FUN_00046b60(param_3, param_1, 8, "\'}\' expected");
                } else {
                LAB_00047c60:
                    FUN_00046b60(param_3, param_1, 8,
                                 "string or \'}\' expected");
                }
            LAB_00047aa8:
                if (*(int *)(iVar5 + 4) == -1) {
                    return 0;
                }
                piVar6 = (int *)(iVar5 + 4);
                DataMemoryBarrier(0xb);
                do {
                    iVar3 = *piVar6 + -1;
                    bVar1 = (bool)hasExclusiveAccess(piVar6);
                } while (!bVar1);
                *piVar6 = iVar3;
                goto LAB_00047bc8;
            }
            goto LAB_000478e0;
        }
        if (iVar5 != 0x100)
            goto LAB_00047be0;
        pvVar7 = *(void **)(param_1 + 0x40);
        sVar8 = *(size_t *)(param_1 + 0x44);
        if (((param_2 & 0x10) == 0) &&
            (pvVar2 = memchr(pvVar7, 0, sVar8), pvVar2 != (void *)0x0)) {
            FUN_00046b60(param_3, param_1, 0xb,
                         "\\u0000 is not allowed without JSON_ALLOW_NUL");
            return 0;
        }
        iVar5 = FUN_00049188(pvVar7, sVar8);
        *(undefined4 *)(param_1 + 0x40) = 0;
        *(undefined4 *)(param_1 + 0x44) = 0;
    } else if (iVar5 == 0x103) {
        iVar5 = FUN_000495d8();
    } else if (iVar5 < 0x103) {
        iVar5 = FUN_000494a4((int)*(undefined8 *)(param_1 + 0x40));
    } else if (iVar5 == 0x104) {
        iVar5 = FUN_000495e4();
    } else {
        if (iVar5 != 0x105)
            goto LAB_00047be0;
        iVar5 = FUN_000495f0();
    }
    if (iVar5 == 0) {
        return 0;
    }
LAB_000478e0:
    *(int *)(param_1 + 0x38) = *(int *)(param_1 + 0x38) + -1;
    return iVar5;
}

int FUN_00047d1c(int param_1, uint param_2, int param_3)

{
    bool bVar1;
    int iVar2;
    int iVar3;
    int *piVar4;

    *(undefined4 *)(param_1 + 0x38) = 0;
    FUN_00047060(param_1, param_3);
    if (((param_2 & 4) == 0) &&
        ((*(uint *)(param_1 + 0x3c) & 0xffffffdf) != 0x5b)) {
        FUN_00046b60(param_3, param_1, 8, "\'[\' or \'{\' expected");
        return 0;
    }
    iVar2 = FUN_00047878(param_1, param_2, param_3);
    if (iVar2 != 0) {
        if (((param_2 & 2) != 0) ||
            (FUN_00047060(param_1, param_3), *(int *)(param_1 + 0x3c) == 0)) {
            if (param_3 == 0) {
                return iVar2;
            }
            *(undefined4 *)(param_3 + 8) = *(undefined4 *)(param_1 + 0x24);
            return iVar2;
        }
        FUN_00046b60(param_3, param_1, 7, "end of file expected");
        if (*(int *)(iVar2 + 4) != -1) {
            piVar4 = (int *)(iVar2 + 4);
            DataMemoryBarrier(0xb);
            do {
                iVar3 = *piVar4;
                bVar1 = (bool)hasExclusiveAccess(piVar4);
            } while (!bVar1);
            *piVar4 = iVar3 + -1;
            if (iVar3 + -1 == 0) {
                FUN_000495fc(iVar2);
                return 0;
            }
        }
    }
    return 0;
}

undefined4 FUN_00047e20(int param_1, undefined4 param_2, undefined4 param_3)

{
    int iVar1;
    undefined4 uVar2;
    int local_68[2];
    undefined1 *local_60;
    undefined1 *local_5c;
    undefined1 local_58;
    undefined4 local_50;
    undefined4 local_4c;
    undefined4 local_48;
    undefined4 local_44;
    undefined4 local_3c;
    undefined1 auStack_38[12];
    undefined4 local_2c;
    undefined4 local_24;

    FUN_0004a39c(param_3, "<string>");
    if (param_1 == 0) {
        FUN_00046b60(param_3, 0, 4, "wrong arguments");
        uVar2 = 0;
    } else {
        uVar2 = 0;
        local_60 = &LAB_00046abc;
        local_68[1] = 0;
        local_58 = 0;
        local_50 = 0;
        local_4c = 0;
        local_44 = 0;
        local_3c = 0;
        local_48 = 1;
        local_68[0] = param_1;
        local_5c = (undefined1 *)local_68;
        iVar1 = FUN_000483e8(auStack_38);
        if (iVar1 == 0) {
            local_24 = 0xffffffff;
            local_2c = param_2;
            uVar2 = FUN_00047d1c(&local_60, param_2, param_3);
            FUN_00046c90(&local_60);
        }
    }
    return uVar2;
}

undefined4 FUN_00047ee8(int param_1, undefined4 param_2, undefined4 param_3,
                        undefined4 param_4)

{
    int iVar1;
    undefined4 uVar2;
    int local_6c;
    undefined4 local_68;
    undefined4 local_64;
    undefined1 *local_60;
    int *local_5c;
    undefined1 local_58;
    undefined4 local_50;
    undefined4 local_4c;
    undefined4 local_48;
    undefined4 local_44;
    undefined4 local_3c;
    undefined1 auStack_38[12];
    undefined4 local_2c;
    undefined4 local_24;

    FUN_0004a39c(param_4, "<buffer>");
    if (param_1 == 0) {
        FUN_00046b60(param_4, 0, 4, "wrong arguments");
        uVar2 = 0;
    } else {
        uVar2 = 0;
        local_5c = &local_6c;
        local_60 = &LAB_00046ae0;
        local_64 = 0;
        local_58 = 0;
        local_50 = 0;
        local_4c = 0;
        local_44 = 0;
        local_3c = 0;
        local_48 = 1;
        local_6c = param_1;
        local_68 = param_2;
        iVar1 = FUN_000483e8(auStack_38);
        if (iVar1 == 0) {
            local_24 = 0xffffffff;
            local_2c = param_3;
            uVar2 = FUN_00047d1c(&local_60, param_3, param_4);
            FUN_00046c90(&local_60);
        }
    }
    return uVar2;
}

undefined4 FUN_00047fbc(int param_1, undefined4 param_2, undefined4 param_3)

{
    int iVar1;
    undefined4 uVar2;
    char *pcVar3;
    code *local_60;
    int local_5c;
    undefined1 local_58;
    undefined4 local_50;
    undefined4 local_4c;
    undefined4 local_48;
    undefined4 local_44;
    undefined4 local_3c;
    undefined1 auStack_38[12];
    undefined4 local_2c;
    undefined4 local_24;

    pcVar3 = "<stdin>";
    if (stdin != param_1) {
        pcVar3 = "<stream>";
    }
    FUN_0004a39c(param_3, pcVar3);
    if (param_1 == 0) {
        FUN_00046b60(param_3, 0, 4, "wrong arguments");
        uVar2 = 0;
    } else {
        uVar2 = 0;
        local_60 = fgetc;
        local_58 = 0;
        local_50 = 0;
        local_4c = 0;
        local_44 = 0;
        local_3c = 0;
        local_48 = 1;
        local_5c = param_1;
        iVar1 = FUN_000483e8(auStack_38);
        if (iVar1 == 0) {
            local_24 = 0xffffffff;
            local_2c = param_2;
            uVar2 = FUN_00047d1c(&local_60, param_2, param_3);
            FUN_00046c90(&local_60);
        }
    }
    return uVar2;
}

undefined4 FUN_00048178(char *param_1, undefined4 param_2, undefined4 param_3)

{
    FILE *__stream;
    undefined4 uVar1;
    int *piVar2;
    char *pcVar3;

    FUN_0004a39c(param_3, param_1);
    if (param_1 == (char *)0x0) {
        FUN_00046b60(param_3, 0, 4, "wrong arguments");
        uVar1 = 0;
    } else {
        __stream = fopen64(param_1, "rb");
        if (__stream == (FILE *)0x0) {
            piVar2 = __errno_location();
            pcVar3 = strerror(*piVar2);
            FUN_00046b60(param_3, 0, 3, "unable to open %s: %s", param_1,
                         pcVar3);
            uVar1 = 0;
        } else {
            uVar1 = FUN_00047fbc(__stream, param_2, param_3);
            fclose(__stream);
        }
    }
    return uVar1;
}

undefined4 FUN_00048230(int param_1, undefined4 param_2, undefined4 param_3,
                        undefined4 param_4)

{
    int iVar1;
    undefined4 uVar2;
    undefined1 *local_470;
    undefined1 *local_46c;
    undefined1 local_468;
    undefined4 local_460;
    undefined4 local_45c;
    undefined4 local_458;
    undefined4 local_454;
    undefined4 local_44c;
    undefined1 auStack_448[12];
    undefined4 local_43c;
    undefined4 local_434;
    undefined1 auStack_428[1032];
    int local_20;
    undefined4 local_1c;

    memset(auStack_428, 0, 0x410);
    local_20 = param_1;
    local_1c = param_2;
    FUN_0004a39c(param_4, "<callback>");
    if (param_1 == 0) {
        FUN_00046b60(param_4, 0, 4, "wrong arguments");
        uVar2 = 0;
    } else {
        uVar2 = 0;
        local_46c = auStack_428;
        local_470 = &LAB_00046b04;
        local_468 = 0;
        local_460 = 0;
        local_45c = 0;
        local_454 = 0;
        local_44c = 0;
        local_458 = 1;
        iVar1 = FUN_000483e8(auStack_448);
        if (iVar1 == 0) {
            local_434 = 0xffffffff;
            local_43c = param_3;
            uVar2 = FUN_00047d1c(&local_470, param_3, param_4);
            FUN_00046c90(&local_470);
        }
    }
    return uVar2;
}

void FUN_00048314(int param_1)

{
    if (param_1 == 0) {
        return;
    }
    /* WARNING: Could not recover jumptable at 0x00048328. Too many branches */
    /* WARNING: Treating indirect jump as call */
    (*DAT_0006856c)();
    return;
}

void FUN_0004832c(int param_1)

{
    if (param_1 == 0) {
        return;
    }
    (*DAT_00068570)();
    return;
}

void *FUN_00048344(void *param_1, size_t param_2)

{
    void *__dest;

    __dest = (void *)(param_2 + 1);
    if ((__dest != (void *)0x0) &&
        (__dest = (void *)(*DAT_0006856c)(__dest), __dest != (void *)0x0)) {
        memcpy(__dest, param_1, param_2);
        *(undefined1 *)((int)__dest + param_2) = 0;
    }
    return __dest;
}

void FUN_00048390(char *param_1)

{
    size_t sVar1;

    sVar1 = strlen(param_1);
    FUN_00048344(param_1, sVar1);
    return;
}

undefined4 FUN_000483e8(undefined4 *param_1)

{
    undefined1 *puVar1;
    undefined4 uVar2;

    param_1[2] = 0x10;
    param_1[1] = 0;
    puVar1 = (undefined1 *)FUN_00048314();
    *param_1 = puVar1;
    if (puVar1 == (undefined1 *)0x0) {
        uVar2 = 0xffffffff;
    } else {
        *puVar1 = 0;
        uVar2 = 0;
    }
    return uVar2;
}

void FUN_0004841c(int *param_1)

{
    if (*param_1 != 0) {
        FUN_0004832c();
    }
    param_1[2] = 0;
    param_1[1] = 0;
    *param_1 = 0;
    return;
}

void FUN_00048448(undefined4 *param_1)

{
    param_1[1] = 0;
    *(undefined1 *)*param_1 = 0;
    return;
}

undefined4 FUN_0004845c(undefined4 *param_1)

{
    return *param_1;
}

undefined4 FUN_00048478(int *param_1, void *param_2, size_t param_3)

{
    uint uVar1;
    uint uVar2;
    int iVar3;
    void *__dest;

    iVar3 = param_1[2];
    uVar1 = param_1[1];
    if (param_3 < iVar3 - uVar1) {
        __dest = (void *)*param_1;
    LAB_0004850c:
        memcpy((void *)((int)__dest + uVar1), param_2, param_3);
        iVar3 = param_1[1];
        param_1[1] = param_3 + iVar3;
        *(undefined1 *)(*param_1 + param_3 + iVar3) = 0;
        return 0;
    }
    if ((param_3 != 0xffffffff && -1 < iVar3) && (uVar1 <= -param_3 - 2)) {
        uVar2 = param_3 + 1 + uVar1;
        if (uVar2 < (uint)(iVar3 << 1)) {
            uVar2 = iVar3 << 1;
        }
        __dest = (void *)FUN_00048314(uVar2);
        if (__dest != (void *)0x0) {
            memcpy(__dest, (void *)*param_1, param_1[1]);
            FUN_0004832c(*param_1);
            uVar1 = param_1[1];
            *param_1 = (int)__dest;
            param_1[2] = uVar2;
            goto LAB_0004850c;
        }
    }
    return 0xffffffff;
}

void FUN_00048544(undefined4 param_1, undefined1 param_2)

{
    undefined1 local_9[5];

    local_9[0] = param_2;
    FUN_00048478(param_1, local_9, 1);
    return;
}

undefined1 FUN_00048568(int *param_1)

{
    undefined1 uVar1;
    int iVar2;

    if (param_1[1] == 0) {
        uVar1 = 0;
    } else {
        iVar2 = param_1[1] + -1;
        param_1[1] = iVar2;
        uVar1 = *(undefined1 *)(*param_1 + iVar2);
        *(undefined1 *)(*param_1 + iVar2) = 0;
    }
    return uVar1;
}

undefined4 FUN_00048590(int *param_1, double *param_2)

{
    char cVar1;
    lconv *plVar2;
    char *pcVar3;
    int *piVar4;
    undefined4 uVar5;
    char *__s;
    double dVar6;
    char *local_1c[2];

    plVar2 = localeconv();
    __s = (char *)*param_1;
    cVar1 = *plVar2->decimal_point;
    if ((cVar1 != '.') && (pcVar3 = strchr(__s, 0x2e), pcVar3 != (char *)0x0)) {
        *pcVar3 = cVar1;
        __s = (char *)*param_1;
    }
    piVar4 = __errno_location();
    *piVar4 = 0;
    dVar6 = strtod(__s, local_1c);
    if (local_1c[0] == (char *)(*param_1 + param_1[1])) {
        if (((dVar6 <= 1.79769313486232e+308) &&
             (-1.79769313486232e+308 <= dVar6)) ||
            (*piVar4 != 0x22)) {
            uVar5 = 0;
            *param_2 = dVar6;
        } else {
            uVar5 = 0xffffffff;
        }
        return uVar5;
    }
    /* WARNING: Subroutine does not return */
    __assert_fail("end == strbuffer->value + strbuffer->length", "strconv.c",
                  0x4e, "jsonp_strtod");
}

uint FUN_00048680(char *param_1, uint param_2, int param_3)

{
    char cVar1;
    uint uVar2;
    lconv *plVar3;
    char *pcVar4;
    char *pcVar5;
    size_t __n;

    if (param_3 == 0) {
        param_3 = 0x11;
    }
    uVar2 = snprintf(param_1, param_2, "%.*g", param_3);
    if (param_2 <= uVar2) {
        return 0xffffffff;
    }
    plVar3 = localeconv();
    if (((byte)*plVar3->decimal_point != 0x2e) &&
        (pcVar4 = strchr(param_1, (uint)(byte)*plVar3->decimal_point),
         pcVar4 != (char *)0x0)) {
        *pcVar4 = '.';
    }
    pcVar5 = strchr(param_1, 0x2e);
    pcVar4 = strchr(param_1, 0x65);
    if (pcVar5 == (char *)0x0) {
        if (pcVar4 != (char *)0x0)
            goto LAB_0004870c;
        if (param_2 <= uVar2 + 3) {
            return 0xffffffff;
        }
        pcVar4 = param_1 + uVar2;
        *pcVar4 = '.';
        uVar2 = uVar2 + 2;
        pcVar4[1] = '0';
        param_1[uVar2] = '\0';
        pcVar4 = strchr(param_1, 0x65);
    }
    if (pcVar4 == (char *)0x0) {
        return uVar2;
    }
LAB_0004870c:
    pcVar5 = pcVar4 + 2;
    cVar1 = pcVar4[2];
    if (pcVar4[1] == '-') {
        pcVar4 = pcVar5;
        if (cVar1 == '0')
            goto LAB_0004872c;
    } else {
        pcVar4 = pcVar4 + 1;
        while (cVar1 == '0') {
        LAB_0004872c:
            pcVar5 = pcVar5 + 1;
            cVar1 = *pcVar5;
        }
        if (pcVar5 != pcVar4) {
            __n = uVar2 - ((int)pcVar5 - (int)param_1);
            uVar2 = uVar2 - ((int)pcVar5 - (int)pcVar4);
            memmove(pcVar4, pcVar5, __n);
        }
    }
    return uVar2;
}

undefined4 FUN_000487c0(int param_1, byte *param_2, undefined4 *param_3)

{
    byte bVar1;

    if (param_1 < 0) {
        return 0xffffffff;
    }
    bVar1 = (byte)param_1;
    if (param_1 < 0x80) {
        *param_2 = bVar1;
        *param_3 = 1;
        return 0;
    }
    if (param_1 < 0x800) {
        *param_2 = (char)(param_1 >> 6) - 0x40;
        param_2[1] = (bVar1 & 0x3f) + 0x80;
        *param_3 = 2;
        return 0;
    }
    if (0xffff < param_1) {
        if (param_1 < 0x110000) {
            *param_2 = (char)(param_1 >> 0x12) - 0x10;
            param_2[1] = (byte)((uint)(param_1 << 0xe) >> 0x1a) + 0x80;
            param_2[2] = (byte)((uint)(param_1 << 0x14) >> 0x1a) + 0x80;
            param_2[3] = (bVar1 & 0x3f) + 0x80;
            *param_3 = 4;
            return 0;
        }
        return 0xffffffff;
    }
    *param_2 = (char)(param_1 >> 0xc) - 0x20;
    param_2[1] = (byte)((uint)(param_1 << 0x14) >> 0x1a) + 0x80;
    param_2[2] = (bVar1 & 0x3f) + 0x80;
    *param_3 = 3;
    return 0;
}

undefined4 FUN_000488ac(uint param_1)

{
    undefined4 uVar1;

    if ((param_1 & 0x80) == 0) {
        return 1;
    }
    if ((param_1 ^ 0x80) < 0x42) {
        return 0;
    }
    if ((param_1 + 0x3e & 0xff) < 0x1e) {
        return 2;
    }
    if ((param_1 + 0x20 & 0xff) < 0x10) {
        return 3;
    }
    if ((param_1 + 0x10 & 0xff) < 5) {
        uVar1 = 4;
    } else {
        uVar1 = 0;
    }
    return uVar1;
}

undefined4 FUN_00048918(byte *param_1, uint param_2, uint *param_3)

{
    uint uVar1;
    uint uVar2;
    uint uVar3;
    bool bVar4;

    uVar3 = (uint)*param_1;
    if (param_2 == 2) {
        uVar3 = uVar3 & 0x1f;
    } else if (param_2 == 3) {
        uVar3 = uVar3 & 0xf;
    } else {
        if (param_2 != 4) {
            return 0;
        }
        uVar3 = uVar3 & 7;
    }
    uVar1 = (uint)param_1[1];
    if ((uVar1 ^ 0x80) < 0x40) {
        param_1 = param_1 + 1;
        uVar2 = 1;
        do {
            uVar2 = uVar2 + 1;
            uVar3 = (uVar1 & 0x3f) + uVar3 * 0x40;
            if (param_2 <= uVar2) {
                if (0x10ffff < (int)uVar3) {
                    return 0;
                }
                if (uVar3 - 0xd800 < 0x800) {
                    return 0;
                }
                bVar4 = uVar3 == 0x7f;
                if ((int)uVar3 < 0x80) {
                    bVar4 = param_2 == 2;
                }
                if (bVar4) {
                    return 0;
                }
                if ((int)uVar3 < 0x800 && param_2 == 3) {
                    return 0;
                }
                if ((int)uVar3 < 0x10000 && param_2 == 4) {
                    return 0;
                }
                if (param_3 != (uint *)0x0) {
                    *param_3 = uVar3;
                }
                return 1;
            }
            param_1 = param_1 + 1;
            uVar1 = (uint)*param_1;
        } while ((uVar1 ^ 0x80) < 0x40);
    }
    return 0;
}

undefined1 *FUN_00048a00(undefined1 *param_1, int param_2, undefined4 *param_3)

{
    undefined4 uVar1;
    uint uVar2;
    int iVar3;
    undefined4 extraout_r2;
    undefined8 uVar4;
    undefined4 local_14;

    if (param_2 == 0) {
        return param_1;
    }
    uVar4 = FUN_000488ac(*param_1);
    uVar2 = (uint)uVar4;
    if ((uVar2 != 0) &&
        ((uVar1 = extraout_r2,
          uVar2 == 1 || ((uVar2 <= (uint)((ulonglong)uVar4 >> 0x20) &&
                          (iVar3 = FUN_00048918(param_1, uVar2, &local_14),
                           uVar1 = local_14, iVar3 != 0)))))) {
        local_14 = uVar1;
        if (param_3 != (undefined4 *)0x0) {
            *param_3 = local_14;
        }
        return param_1 + uVar2;
    }
    return (undefined1 *)0x0;
}

undefined4 FUN_00048a7c(int param_1, uint param_2)

{
    uint uVar1;
    uint uVar2;
    uint uVar3;
    undefined8 uVar4;

    if (param_2 != 0) {
        uVar3 = 0;
        uVar2 = param_2;
        do {
            uVar1 = FUN_000488ac(*(undefined1 *)(param_1 + uVar3), uVar2);
            if (uVar1 == 0) {
                return 0;
            }
            uVar2 = uVar1;
            if (1 < uVar1) {
                if (param_2 - uVar3 < uVar1) {
                    return 0;
                }
                uVar4 = FUN_00048918(param_1 + uVar3, uVar1, 0);
                uVar2 = (uint)((ulonglong)uVar4 >> 0x20);
                uVar3 = (uVar1 + uVar3) - 1;
                if ((int)uVar4 == 0) {
                    return 0;
                }
            }
            uVar3 = uVar3 + 1;
        } while (uVar3 < param_2);
    }
    return 1;
}

void *FUN_00048b48(int param_1, int param_2, int param_3)

{
    void *__dest;
    void *__src;
    uint uVar1;
    uint uVar2;

    uVar2 = *(uint *)(param_1 + 8);
    __src = *(void **)(param_1 + 0x10);
    if (uVar2 < (uint)(param_2 + *(int *)(param_1 + 0xc))) {
        uVar1 = uVar2 << 1;
        if (uVar1 < uVar2 + param_2) {
            uVar1 = uVar2 + param_2;
        }
        __dest = (void *)FUN_00048314(uVar1 << 2);
        if (__dest == (void *)0x0) {
            __src = (void *)0x0;
        } else {
            *(uint *)(param_1 + 8) = uVar1;
            *(void **)(param_1 + 0x10) = __dest;
            if (param_3 != 0) {
                memcpy(__dest, __src, *(int *)(param_1 + 0xc) << 2);
                FUN_0004832c(__src);
                return *(void **)(param_1 + 0x10);
            }
        }
    }
    return __src;
}

undefined4 *FUN_00048bd4(int param_1, undefined4 param_2, int param_3)

{
    undefined4 *puVar1;

    if ((param_1 != 0) &&
        ((param_3 != 0 || (param_1 = FUN_00048344(), param_1 != 0)))) {
        puVar1 = (undefined4 *)FUN_00048314(0x10);
        if (puVar1 != (undefined4 *)0x0) {
            puVar1[2] = param_1;
            puVar1[3] = param_2;
            *puVar1 = 2;
            puVar1[1] = 1;
            return puVar1;
        }
        FUN_0004832c(param_1);
        return (undefined4 *)0x0;
    }
    return (undefined4 *)0x0;
}

undefined4 *FUN_00048c40(void)

{
    undefined4 *puVar1;
    int iVar2;

    puVar1 = (undefined4 *)FUN_00048314(0x24);
    if (puVar1 != (undefined4 *)0x0) {
        if (DAT_00072c10 == 0) {
            FUN_000469c0();
        }
        puVar1[1] = 1;
        *puVar1 = 0;
        iVar2 = FUN_000463b0(puVar1 + 2);
        if (iVar2 != 0) {
            FUN_0004832c(puVar1);
            puVar1 = (undefined4 *)0x0;
        }
    }
    return puVar1;
}

int FUN_00048ca8(int *param_1)

{
    int iVar1;

    if (param_1 != (int *)0x0) {
        if (*param_1 == 0) {
            iVar1 = param_1[2];
        } else {
            iVar1 = 0;
        }
        return iVar1;
    }
    return 0;
}

undefined4 FUN_00048cc4(int *param_1, int param_2)

{
    undefined4 uVar1;

    if ((param_1 != (int *)0x0 && param_2 != 0) && (*param_1 == 0)) {
        uVar1 = FUN_000466d8(param_1 + 2);
        return uVar1;
    }
    return 0;
}

bool FUN_00048cec(int *param_1, int *param_2)

{
    int iVar1;
    int iVar2;
    int iVar3;
    uint uVar4;
    uint uVar5;

    iVar3 = *param_1;
    if (iVar3 != *param_2) {
        return false;
    }
    if (param_1 == param_2) {
        return true;
    }
    switch (iVar3) {
    case 0:
        if (param_1[2] == param_2[2]) {
            iVar3 = FUN_000468b4(param_1 + 2);
            if (iVar3 != 0) {
                while (iVar3 = FUN_00046944(), iVar3 != 0) {
                    iVar1 = FUN_0004694c(iVar3 + -0x10);
                    if (iVar1 == 0) {
                        return true;
                    }
                    iVar2 = FUN_00048cc4(param_2, iVar3);
                    if (iVar2 == 0) {
                        return false;
                    }
                    iVar1 = FUN_00048cec(iVar1);
                    if (iVar1 == 0) {
                        return false;
                    }
                    if (*param_1 != 0) {
                        return true;
                    }
                    iVar3 = FUN_0004692c(param_1 + 2, iVar3 + -0x10);
                    if (iVar3 == 0) {
                        return true;
                    }
                }
            }
            return true;
        }
        break;
    case 1:
        uVar5 = param_1[3];
        if (uVar5 == param_2[3]) {
            if (uVar5 == 0) {
                return true;
            }
            uVar4 = 0;
            iVar1 = iVar3;
            while (true) {
                if ((iVar1 == 1) && (uVar4 < (uint)param_1[3])) {
                    iVar1 = *(int *)(param_1[4] + uVar4 * 4);
                } else {
                    iVar1 = 0;
                }
                if (iVar3 != 1) {
                    return false;
                }
                if ((uint)param_2[3] <= uVar4) {
                    return false;
                }
                if (*(int *)(param_2[4] + uVar4 * 4) == 0 || iVar1 == 0)
                    break;
                iVar3 = FUN_00048cec();
                if (iVar3 == 0) {
                    return false;
                }
                uVar4 = uVar4 + 1;
                if (uVar5 == uVar4) {
                    return true;
                }
                iVar1 = *param_1;
                iVar3 = *param_2;
            }
            return false;
        }
        break;
    case 2:
        if ((param_1[3] == param_2[3]) &&
            (iVar3 = memcmp((void *)param_1[2], (void *)param_2[2], param_1[3]),
             iVar3 == 0)) {
            return true;
        }
        break;
    case 3:
        return param_1[3] == param_2[3] && param_1[2] == param_2[2];
    case 4:
        return *(double *)(param_1 + 2) == *(double *)(param_2 + 2);
    }
    return false;
}

undefined4 FUN_00048f2c(int *param_1)

{
    undefined4 uVar1;

    if ((param_1 != (int *)0x0) && (*param_1 == 0)) {
        uVar1 = FUN_000468b4(param_1 + 2);
        return uVar1;
    }
    return 0;
}

undefined4 FUN_00048f78(int *param_1, int param_2)

{
    undefined4 uVar1;

    if ((param_1 != (int *)0x0) && (*param_1 == 0 && param_2 != 0)) {
        uVar1 = FUN_0004692c(param_1 + 2);
        return uVar1;
    }
    return 0;
}

void FUN_00048fac(int param_1)

{
    if (param_1 == 0) {
        return;
    }
    FUN_00046944();
    return;
}

void FUN_00048fb8(int param_1)

{
    if (param_1 == 0) {
        return;
    }
    FUN_0004694c();
    return;
}

int FUN_00048fc4(int param_1)

{
    if (param_1 != 0) {
        param_1 = param_1 + -0x10;
    }
    return param_1;
}

undefined4 *FUN_00048fd0(void)

{
    undefined4 *puVar1;
    int iVar2;

    puVar1 = (undefined4 *)FUN_00048314(0x14);
    if (puVar1 != (undefined4 *)0x0) {
        *puVar1 = 1;
        puVar1[1] = 1;
        puVar1[3] = 0;
        puVar1[2] = 8;
        iVar2 = FUN_00048314(0x20);
        puVar1[4] = iVar2;
        if (iVar2 == 0) {
            FUN_0004832c(puVar1);
            puVar1 = (undefined4 *)0x0;
        }
    }
    return puVar1;
}

int FUN_00049030(int *param_1)

{
    int iVar1;

    if (param_1 != (int *)0x0) {
        if (*param_1 == 1) {
            iVar1 = param_1[3];
        } else {
            iVar1 = 0;
        }
        return iVar1;
    }
    return 0;
}

undefined4 FUN_0004904c(int *param_1, uint param_2)

{
    if (param_1 == (int *)0x0) {
        return 0;
    }
    if ((*param_1 == 1) && (param_2 < (uint)param_1[3])) {
        return *(undefined4 *)(param_1[4] + param_2 * 4);
    }
    return 0;
}

undefined4 FUN_00049080(int *param_1, int *param_2)

{
    bool bVar1;
    int iVar2;
    size_t __n;
    void *__src;
    int *piVar3;
    uint uVar4;

    if ((((param_1 != (int *)0x0) &&
          (*param_1 == 1 && param_2 != (int *)0x0)) &&
         (*param_2 == 1)) &&
        (iVar2 = FUN_00048b48(param_1, param_2[3]), iVar2 != 0)) {
        __n = param_2[3];
        __src = (void *)param_2[4];
        if (__n != 0) {
            uVar4 = 0;
            do {
                iVar2 = *(int *)((int)__src + uVar4 * 4);
                if ((iVar2 != 0) &&
                    (piVar3 = (int *)(iVar2 + 4), *(int *)(iVar2 + 4) != -1)) {
                    do {
                        bVar1 = (bool)hasExclusiveAccess(piVar3);
                    } while (!bVar1);
                    *piVar3 = *piVar3 + 1;
                    DataMemoryBarrier(0xb);
                    __n = param_2[3];
                    __src = (void *)param_2[4];
                }
                uVar4 = uVar4 + 1;
            } while (uVar4 < __n);
            __n = __n << 2;
        }
        memcpy((void *)(param_1[4] + param_1[3] * 4), __src, __n);
        param_1[3] = param_1[3] + param_2[3];
        return 0;
    }
    return 0xffffffff;
}

void FUN_00049188(undefined4 param_1, undefined4 param_2)

{
    FUN_00048bd4(param_1, param_2, 1);
    return;
}

undefined4 FUN_00049190(int param_1, undefined4 param_2)

{
    int iVar1;
    undefined4 uVar2;

    if (param_1 == 0) {
        return 0;
    }
    iVar1 = FUN_00048a7c();
    if (iVar1 != 0) {
        uVar2 = FUN_00048bd4(param_1, param_2, 0);
        return uVar2;
    }
    return 0;
}

void FUN_000491d4(char *param_1)

{
    size_t sVar1;

    if (param_1 == (char *)0x0) {
        return;
    }
    sVar1 = strlen(param_1);
    FUN_00049190(param_1, sVar1);
    return;
}

int FUN_000491f8(int *param_1)

{
    int iVar1;

    if (param_1 != (int *)0x0) {
        if (*param_1 == 2) {
            iVar1 = param_1[2];
        } else {
            iVar1 = 0;
        }
        return iVar1;
    }
    return 0;
}

int FUN_00049214(int *param_1)

{
    int iVar1;

    if (param_1 != (int *)0x0) {
        if (*param_1 == 2) {
            iVar1 = param_1[3];
        } else {
            iVar1 = 0;
        }
        return iVar1;
    }
    return 0;
}

undefined4 FUN_00049230(int *param_1, int param_2, int param_3)

{
    int iVar1;

    if (((param_1 != (int *)0x0) && (*param_1 == 2 && param_2 != 0)) &&
        (iVar1 = FUN_00048344(param_2, param_3), iVar1 != 0)) {
        FUN_0004832c(param_1[2]);
        param_1[2] = iVar1;
        param_1[3] = param_3;
        return 0;
    }
    return 0xffffffff;
}

undefined4 FUN_00049294(undefined4 param_1, char *param_2)

{
    size_t sVar1;
    undefined4 uVar2;

    if (param_2 != (char *)0x0) {
        sVar1 = strlen(param_2);
        uVar2 = FUN_00049230(param_1, param_2, sVar1);
        return uVar2;
    }
    return 0xffffffff;
}

undefined4 FUN_000492c8(undefined4 param_1, int param_2, undefined4 param_3)

{
    int iVar1;
    undefined4 uVar2;

    if ((param_2 != 0) &&
        (iVar1 = FUN_00048a7c(param_2, param_3), iVar1 != 0)) {
        uVar2 = FUN_00049230(param_1, param_2, param_3);
        return uVar2;
    }
    return 0xffffffff;
}

undefined4 FUN_0004930c(undefined4 param_1, char *param_2)

{
    size_t sVar1;
    undefined4 uVar2;

    if (param_2 != (char *)0x0) {
        sVar1 = strlen(param_2);
        uVar2 = FUN_000492c8(param_1, param_2, sVar1);
        return uVar2;
    }
    return 0xffffffff;
}

undefined4 FUN_00049340(char *param_1, __gnuc_va_list param_2)

{
    int iVar1;
    char *__s;
    int iVar2;
    undefined4 uVar3;

    iVar1 = vsnprintf((char *)0x0, 0, param_1, param_2);
    if (iVar1 != 0) {
        __s = (char *)FUN_00048314(iVar1 + 1U);
        if (__s == (char *)0x0) {
            uVar3 = 0;
        } else {
            vsnprintf(__s, iVar1 + 1U, param_1, param_2);
            iVar2 = FUN_00048a7c(__s, iVar1);
            if (iVar2 == 0) {
                FUN_0004832c(__s);
                uVar3 = 0;
            } else {
                uVar3 = FUN_00048bd4(__s, iVar1, 1);
            }
        }
        return uVar3;
    }
    uVar3 = FUN_00049190(&DAT_0004d488, 0);
    return uVar3;
}

void FUN_000493f0(undefined4 param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    undefined4 uStack_c;
    undefined4 uStack_8;
    undefined4 uStack_4;

    uStack_c = param_2;
    uStack_8 = param_3;
    uStack_4 = param_4;
    FUN_00049340(param_1, &uStack_c);
    return;
}

void FUN_00049420(undefined4 param_1, undefined4 param_2)

{
    undefined4 *puVar1;

    puVar1 = (undefined4 *)FUN_00048314(0x10);
    if (puVar1 == (undefined4 *)0x0) {
        return;
    }
    puVar1[2] = param_1;
    puVar1[3] = param_2;
    *puVar1 = 3;
    puVar1[1] = 1;
    return;
}

undefined8 FUN_00049454(int *param_1)

{
    if ((param_1 != (int *)0x0) && (*param_1 == 3)) {
        return *(undefined8 *)(param_1 + 2);
    }
    return 0;
}

undefined4 *FUN_000494a4(undefined4 param_1, undefined4 param_2)

{
    undefined4 *puVar1;

    if ((!NAN((double)CONCAT44(param_2, param_1)) &&
         !NAN((double)CONCAT44(param_2, param_1))) &&
        (ABS((double)CONCAT44(param_2, param_1)) <= 1.79769313486232e+308)) {
        puVar1 = (undefined4 *)FUN_00048314(0x10);
        if (puVar1 != (undefined4 *)0x0) {
            puVar1[2] = param_1;
            puVar1[3] = param_2;
            *puVar1 = 4;
            puVar1[1] = 1;
        }
        return puVar1;
    }
    return (undefined4 *)0x0;
}

undefined4 FUN_00049500(int *param_1)

{
    if ((param_1 != (int *)0x0) && (*param_1 == 4)) {
        return (int)*(undefined8 *)(param_1 + 2);
    }
    return 0;
}

undefined4 FUN_00049590(int *param_1)

{
    undefined4 uVar1;

    if (param_1 != (int *)0x0) {
        if (*param_1 == 3) {
            uVar1 = FUN_0004ace4(param_1[2], param_1[3]);
            return uVar1;
        }
        if (*param_1 == 4) {
            return (int)*(undefined8 *)(param_1 + 2);
        }
    }
    return 0;
}

undefined *FUN_000495d8(void)

{
    return &DAT_00068574;
}

undefined *FUN_000495e4(void)

{
    return &DAT_0006857c;
}

undefined *FUN_000495f0(void)

{
    return &DAT_00068584;
}

void FUN_000495fc(undefined4 *param_1)

{
    bool bVar1;
    int iVar2;
    uint uVar3;
    int *piVar4;
    int iVar5;
    uint uVar6;

    if (param_1 == (undefined4 *)0x0) {
        return;
    }
    switch (*param_1) {
    case 0:
        FUN_0004642c(param_1 + 2);
        FUN_0004832c(param_1);
        return;
    case 1:
        uVar3 = param_1[3];
        iVar2 = param_1[4];
        if (uVar3 != 0) {
            uVar6 = 0;
            do {
                iVar5 = *(int *)(iVar2 + uVar6 * 4);
                if ((iVar5 != 0) &&
                    (piVar4 = (int *)(iVar5 + 4), *(int *)(iVar5 + 4) != -1)) {
                    DataMemoryBarrier(0xb);
                    do {
                        iVar2 = *piVar4;
                        bVar1 = (bool)hasExclusiveAccess(piVar4);
                    } while (!bVar1);
                    *piVar4 = iVar2 + -1;
                    if (iVar2 + -1 == 0) {
                        FUN_000495fc(iVar5);
                    }
                    iVar2 = param_1[4];
                    uVar3 = param_1[3];
                }
                uVar6 = uVar6 + 1;
            } while (uVar6 < uVar3);
        }
        break;
    case 2:
        iVar2 = param_1[2];
        break;
    case 3:
    case 4:
        goto switchD_00049610_caseD_3;
    default:
        return;
    }
    FUN_0004832c(iVar2);
switchD_00049610_caseD_3:
    FUN_0004832c(param_1);
    return;
}

undefined4 FUN_000496c8(int *param_1)

{
    bool bVar1;
    int iVar2;
    uint uVar3;
    int *piVar4;
    uint uVar5;

    if ((param_1 != (int *)0x0) && (*param_1 == 1)) {
        uVar3 = param_1[3];
        if (uVar3 != 0) {
            uVar5 = 0;
            do {
                iVar2 = *(int *)(param_1[4] + uVar5 * 4);
                if ((iVar2 != 0) &&
                    (piVar4 = (int *)(iVar2 + 4), *(int *)(iVar2 + 4) != -1)) {
                    DataMemoryBarrier(0xb);
                    do {
                        iVar2 = *piVar4;
                        bVar1 = (bool)hasExclusiveAccess(piVar4);
                    } while (!bVar1);
                    *piVar4 = iVar2 + -1;
                    if (iVar2 + -1 == 0) {
                        FUN_000495fc();
                    }
                    uVar3 = param_1[3];
                }
                uVar5 = uVar5 + 1;
            } while (uVar5 < uVar3);
        }
        param_1[3] = 0;
        return 0;
    }
    return 0xffffffff;
}

undefined4 FUN_000497f0(int *param_1, uint param_2)

{
    bool bVar1;
    int iVar2;
    int *piVar3;
    uint uVar4;
    uint uVar5;

    if (((param_1 != (int *)0x0) && (*param_1 == 1)) &&
        (uVar5 = param_1[3], param_2 < uVar5)) {
        iVar2 = *(int *)(param_1[4] + param_2 * 4);
        if ((iVar2 != 0) && (*(int *)(iVar2 + 4) != -1)) {
            piVar3 = (int *)(iVar2 + 4);
            DataMemoryBarrier(0xb);
            do {
                iVar2 = *piVar3;
                bVar1 = (bool)hasExclusiveAccess(piVar3);
            } while (!bVar1);
            *piVar3 = iVar2 + -1;
            if (iVar2 + -1 == 0) {
                FUN_000495fc();
            }
            uVar5 = param_1[3];
        }
        uVar4 = uVar5 - 1;
        if (param_2 < uVar4) {
            memmove((void *)(param_1[4] + param_2 * 4),
                    (void *)(param_1[4] + param_2 * 4 + 4),
                    (~param_2 + uVar5) * 4);
            uVar4 = param_1[3] - 1;
        }
        param_1[3] = uVar4;
        return 0;
    }
    return 0xffffffff;
}

undefined4 FUN_000498bc(int *param_1, int param_2, int *param_3)

{
    bool bVar1;
    int iVar2;
    int *piVar3;

    if (param_3 != (int *)0x0) {
        if ((param_1 == (int *)0x0 || param_2 == 0) ||
            (*param_1 != 0 || param_3 == param_1)) {
            if (param_3[1] == -1) {
                return 0xffffffff;
            }
            piVar3 = param_3 + 1;
            DataMemoryBarrier(0xb);
            do {
                iVar2 = *piVar3 + -1;
                bVar1 = (bool)hasExclusiveAccess(piVar3);
            } while (!bVar1);
            *piVar3 = iVar2;
        } else {
            iVar2 = FUN_00046444(param_1 + 2);
            if (iVar2 == 0) {
                return 0;
            }
            if (param_3[1] == -1) {
                return 0xffffffff;
            }
            piVar3 = param_3 + 1;
            DataMemoryBarrier(0xb);
            do {
                iVar2 = *piVar3 + -1;
                bVar1 = (bool)hasExclusiveAccess(piVar3);
            } while (!bVar1);
            *piVar3 = iVar2;
        }
        if (iVar2 == 0) {
            FUN_000495fc(param_3);
            return 0xffffffff;
        }
    }
    return 0xffffffff;
}

undefined4 FUN_00049978(int *param_1, int *param_2)

{
    bool bVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    int *piVar5;

    if (((param_1 == (int *)0x0) || (*param_1 != 0 || param_2 == (int *)0x0)) ||
        (*param_2 != 0)) {
        return 0xffffffff;
    }
    iVar2 = FUN_000468b4(param_2 + 2);
    if (iVar2 != 0) {
        while (iVar2 = FUN_00046944(), iVar2 != 0) {
            iVar3 = FUN_0004694c(iVar2 + -0x10);
            if (iVar3 == 0) {
                return 0;
            }
            iVar4 = FUN_00048cc4(param_1, iVar2);
            if (iVar4 == 0) {
                piVar5 = (int *)(iVar3 + 4);
                if (*(int *)(iVar3 + 4) != -1) {
                    do {
                        bVar1 = (bool)hasExclusiveAccess(piVar5);
                    } while (!bVar1);
                    *piVar5 = *piVar5 + 1;
                    DataMemoryBarrier(0xb);
                }
                FUN_000498bc(param_1, iVar2, iVar3);
            }
            if (*param_2 != 0) {
                return 0;
            }
            iVar2 = FUN_0004692c(param_2 + 2, iVar2 + -0x10);
            if (iVar2 == 0) {
                return 0;
            }
        }
    }
    return 0;
}

undefined4 FUN_00049a64(undefined4 param_1, char *param_2, int param_3)

{
    bool bVar1;
    size_t sVar2;
    int iVar3;
    undefined4 uVar4;
    int *piVar5;

    if (param_2 != (char *)0x0) {
        sVar2 = strlen(param_2);
        iVar3 = FUN_00048a7c(param_2, sVar2);
        if (iVar3 != 0) {
            uVar4 = FUN_000498bc(param_1, param_2, param_3);
            return uVar4;
        }
    }
    if ((param_3 != 0) && (*(int *)(param_3 + 4) != -1)) {
        piVar5 = (int *)(param_3 + 4);
        DataMemoryBarrier(0xb);
        do {
            iVar3 = *piVar5;
            bVar1 = (bool)hasExclusiveAccess(piVar5);
        } while (!bVar1);
        *piVar5 = iVar3 + -1;
        if (iVar3 + -1 == 0) {
            FUN_000495fc(param_3);
            return 0xffffffff;
        }
    }
    return 0xffffffff;
}

undefined4 FUN_00049af8(int *param_1, int *param_2)

{
    bool bVar1;
    int iVar2;
    int iVar3;
    int *piVar4;

    if (((param_1 == (int *)0x0) || (*param_1 != 0 || param_2 == (int *)0x0)) ||
        (*param_2 != 0)) {
        return 0xffffffff;
    }
    iVar2 = FUN_000468b4(param_2 + 2);
    if (iVar2 != 0) {
        while (iVar2 = FUN_00046944(), iVar2 != 0) {
            iVar3 = FUN_0004694c(iVar2 + -0x10);
            piVar4 = (int *)(iVar3 + 4);
            if (iVar3 == 0) {
                return 0;
            }
            if (*(int *)(iVar3 + 4) != -1) {
                do {
                    bVar1 = (bool)hasExclusiveAccess(piVar4);
                } while (!bVar1);
                *piVar4 = *piVar4 + 1;
                DataMemoryBarrier(0xb);
            }
            iVar3 = FUN_000498bc(param_1, iVar2);
            if (iVar3 != 0) {
                return 0xffffffff;
            }
            if (*param_2 != 0) {
                return 0;
            }
            iVar2 = FUN_0004692c(param_2 + 2, iVar2 + -0x10);
            if (iVar2 == 0) {
                return 0;
            }
        }
    }
    return 0;
}

undefined4 FUN_00049bd8(int *param_1, int *param_2)

{
    bool bVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    int *piVar5;

    if (((param_1 == (int *)0x0) || (*param_1 != 0 || param_2 == (int *)0x0)) ||
        (*param_2 != 0)) {
        return 0xffffffff;
    }
    iVar2 = FUN_000468b4(param_2 + 2);
    if (iVar2 != 0) {
        while (iVar2 = FUN_00046944(), iVar2 != 0) {
            iVar4 = FUN_0004694c(iVar2 + -0x10);
            if (iVar4 == 0) {
                return 0;
            }
            iVar3 = FUN_00048cc4(param_1, iVar2);
            if (iVar3 != 0) {
                piVar5 = (int *)(iVar4 + 4);
                if (*(int *)(iVar4 + 4) != -1) {
                    do {
                        bVar1 = (bool)hasExclusiveAccess(piVar5);
                    } while (!bVar1);
                    *piVar5 = *piVar5 + 1;
                    DataMemoryBarrier(0xb);
                }
                FUN_000498bc(param_1, iVar2, iVar4);
            }
            if (*param_2 != 0) {
                return 0;
            }
            iVar2 = FUN_0004692c(param_2 + 2, iVar2 + -0x10);
            if (iVar2 == 0) {
                return 0;
            }
        }
    }
    return 0;
}

undefined4 FUN_00049cc8(int *param_1, uint param_2, int *param_3)

{
    bool bVar1;
    void *__src;
    void *__dest;
    int iVar2;
    int *piVar3;
    size_t __n;

    if (param_3 != (int *)0x0) {
        if (((param_1 == (int *)0x0) ||
             (*param_1 != 1 || param_3 == param_1)) ||
            ((uint)param_1[3] < param_2)) {
            if (param_3[1] == -1) {
                return 0xffffffff;
            }
            piVar3 = param_3 + 1;
            DataMemoryBarrier(0xb);
            do {
                iVar2 = *piVar3 + -1;
                bVar1 = (bool)hasExclusiveAccess(piVar3);
            } while (!bVar1);
            *piVar3 = iVar2;
        } else {
            __src = (void *)FUN_00048b48(param_1, 1);
            if (__src != (void *)0x0) {
                __dest = (void *)param_1[4];
                iVar2 = (param_2 + 1) * 4;
                __n = iVar2 - 4;
                if (__dest == __src) {
                    memmove((void *)((int)__dest + iVar2),
                            (void *)((int)__src + __n),
                            (param_1[3] - param_2) * 4);
                } else {
                    memcpy(__dest, __src, __n);
                    memcpy((void *)(param_1[4] + iVar2),
                           (void *)((int)__src + __n),
                           (param_1[3] - param_2) * 4);
                    FUN_0004832c(__src);
                }
                iVar2 = param_1[3];
                *(int **)(param_1[4] + __n) = param_3;
                param_1[3] = iVar2 + 1;
                return 0;
            }
            if (param_3[1] == -1) {
                return 0xffffffff;
            }
            piVar3 = param_3 + 1;
            DataMemoryBarrier(0xb);
            do {
                iVar2 = *piVar3 + -1;
                bVar1 = (bool)hasExclusiveAccess(piVar3);
            } while (!bVar1);
            *piVar3 = iVar2;
        }
        if (iVar2 == 0) {
            FUN_000495fc(param_3);
            return 0xffffffff;
        }
    }
    return 0xffffffff;
}

undefined4 FUN_00049f24(int *param_1, int *param_2)

{
    bool bVar1;
    int iVar2;
    int *piVar3;

    if (param_2 != (int *)0x0) {
        if ((param_1 == (int *)0x0) || (*param_1 != 1 || param_2 == param_1)) {
            if (param_2[1] == -1) {
                return 0xffffffff;
            }
            piVar3 = param_2 + 1;
            DataMemoryBarrier(0xb);
            do {
                iVar2 = *piVar3 + -1;
                bVar1 = (bool)hasExclusiveAccess(piVar3);
            } while (!bVar1);
            *piVar3 = iVar2;
        } else {
            iVar2 = FUN_00048b48(param_1, 1);
            if (iVar2 != 0) {
                iVar2 = param_1[3];
                *(int **)(param_1[4] + iVar2 * 4) = param_2;
                param_1[3] = iVar2 + 1;
                return 0;
            }
            if (param_2[1] == -1) {
                return 0xffffffff;
            }
            piVar3 = param_2 + 1;
            DataMemoryBarrier(0xb);
            do {
                iVar2 = *piVar3 + -1;
                bVar1 = (bool)hasExclusiveAccess(piVar3);
            } while (!bVar1);
            *piVar3 = iVar2;
        }
        if (iVar2 == 0) {
            FUN_000495fc(param_2);
            return 0xffffffff;
        }
    }
    return 0xffffffff;
}

int *FUN_0004a018(int *param_1)

{
    bool bVar1;
    int *piVar2;
    int *piVar3;
    uint uVar4;
    int iVar5;
    int iVar6;
    uint uVar7;

    if (param_1 != (int *)0x0) {
        switch (*param_1) {
        case 0:
            piVar2 = (int *)FUN_00048c40();
            if (piVar2 != (int *)0x0) {
                if (*param_1 != 0) {
                    return piVar2;
                }
                iVar5 = FUN_000468b4(param_1 + 2);
                if (iVar5 == 0) {
                    return piVar2;
                }
                while (true) {
                    iVar5 = FUN_00046944();
                    if (iVar5 == 0) {
                        return piVar2;
                    }
                    iVar6 = FUN_0004694c(iVar5 + -0x10);
                    piVar3 = (int *)(iVar6 + 4);
                    if (iVar6 == 0)
                        break;
                    if (*(int *)(iVar6 + 4) != -1) {
                        do {
                            bVar1 = (bool)hasExclusiveAccess(piVar3);
                        } while (!bVar1);
                        *piVar3 = *piVar3 + 1;
                        DataMemoryBarrier(0xb);
                    }
                    FUN_000498bc(piVar2, iVar5);
                    if (*param_1 != 0) {
                        return piVar2;
                    }
                    iVar5 = FUN_0004692c(param_1 + 2, iVar5 + -0x10);
                    if (iVar5 == 0) {
                        return piVar2;
                    }
                }
                return piVar2;
            }
            break;
        case 1:
            piVar2 = (int *)FUN_00048fd0();
            if (piVar2 != (int *)0x0) {
                if (*param_1 != 1) {
                    return piVar2;
                }
                uVar4 = param_1[3];
                if (uVar4 == 0) {
                    return piVar2;
                }
                uVar7 = 0;
                while (true) {
                    iVar5 = 0;
                    if (uVar7 < uVar4) {
                        iVar5 = *(int *)(param_1[4] + uVar7 * 4);
                        piVar3 = (int *)(iVar5 + 4);
                        if ((iVar5 != 0) && (*(int *)(iVar5 + 4) != -1)) {
                            do {
                                bVar1 = (bool)hasExclusiveAccess(piVar3);
                            } while (!bVar1);
                            *piVar3 = *piVar3 + 1;
                            DataMemoryBarrier(0xb);
                        }
                    }
                    FUN_00049f24(piVar2, iVar5);
                    if (*param_1 != 1)
                        break;
                    uVar4 = param_1[3];
                    uVar7 = uVar7 + 1;
                    if (uVar4 <= uVar7) {
                        return piVar2;
                    }
                }
                return piVar2;
            }
            break;
        case 2:
            piVar2 = (int *)FUN_00048bd4(param_1[2], param_1[3], 0);
            return piVar2;
        case 3:
            if ((param_1 == (int *)0x0) || (*param_1 != 3)) {
                iVar5 = 0;
                iVar6 = 0;
            } else {
                iVar5 = param_1[2];
                iVar6 = param_1[3];
            }
            piVar2 = (int *)FUN_00048314(0x10);
            if (piVar2 != (int *)0x0) {
                piVar2[2] = iVar5;
                piVar2[3] = iVar6;
                *piVar2 = 3;
                piVar2[1] = 1;
                return piVar2;
            }
            return (int *)0x0;
        case 4:
            piVar2 = (int *)FUN_000494a4((int)*(undefined8 *)(param_1 + 2));
            return piVar2;
        case 5:
        case 6:
        case 7:
            return param_1;
        }
    }
    return (int *)0x0;
}

int *FUN_0004a1d4(int *param_1)

{
    undefined4 uVar1;
    undefined4 uVar2;
    int *piVar3;
    uint uVar4;
    int iVar5;
    int iVar6;
    uint uVar7;

    if (param_1 != (int *)0x0) {
        switch (*param_1) {
        case 0:
            piVar3 = (int *)FUN_00048c40();
            if (piVar3 != (int *)0x0) {
                if (*param_1 != 0) {
                    return piVar3;
                }
                iVar5 = FUN_000468b4(param_1 + 2);
                while (true) {
                    if (iVar5 == 0) {
                        return piVar3;
                    }
                    uVar2 = FUN_00046944(iVar5);
                    FUN_0004694c(iVar5);
                    uVar1 = FUN_0004a1d4();
                    FUN_000498bc(piVar3, uVar2, uVar1);
                    if (*param_1 != 0)
                        break;
                    iVar5 = FUN_0004692c(param_1 + 2, iVar5);
                }
                return piVar3;
            }
            break;
        case 1:
            piVar3 = (int *)FUN_00048fd0();
            if (piVar3 != (int *)0x0) {
                if (*param_1 != 1) {
                    return piVar3;
                }
                uVar4 = param_1[3];
                if (uVar4 == 0) {
                    return piVar3;
                }
                uVar7 = 0;
                while (true) {
                    uVar2 = 0;
                    if (uVar7 < uVar4) {
                        uVar2 = *(undefined4 *)(param_1[4] + uVar7 * 4);
                    }
                    uVar2 = FUN_0004a1d4(uVar2);
                    FUN_00049f24(piVar3, uVar2);
                    if (*param_1 != 1)
                        break;
                    uVar4 = param_1[3];
                    uVar7 = uVar7 + 1;
                    if (uVar4 <= uVar7) {
                        return piVar3;
                    }
                }
                return piVar3;
            }
            break;
        case 2:
            piVar3 = (int *)FUN_00048bd4(param_1[2], param_1[3], 0);
            return piVar3;
        case 3:
            if ((param_1 == (int *)0x0) || (*param_1 != 3)) {
                iVar5 = 0;
                iVar6 = 0;
            } else {
                iVar5 = param_1[2];
                iVar6 = param_1[3];
            }
            piVar3 = (int *)FUN_00048314(0x10);
            if (piVar3 == (int *)0x0) {
                return (int *)0x0;
            }
            piVar3[2] = iVar5;
            piVar3[3] = iVar6;
            *piVar3 = 3;
            piVar3[1] = 1;
            return piVar3;
        case 4:
            piVar3 = (int *)FUN_000494a4((int)*(undefined8 *)(param_1 + 2));
            return piVar3;
        case 5:
        case 6:
        case 7:
            return param_1;
        }
    }
    return (int *)0x0;
}

void FUN_0004a39c(undefined4 *param_1, char *param_2)

{
    size_t sVar1;

    if (param_1 == (undefined4 *)0x0) {
        return;
    }
    *(undefined1 *)(param_1 + 0x17) = 0;
    param_1[2] = 0;
    *param_1 = 0xffffffff;
    param_1[1] = 0xffffffff;
    if (param_2 == (char *)0x0) {
        *(undefined1 *)(param_1 + 3) = 0;
        return;
    }
    sVar1 = strlen(param_2);
    if (0x4f < sVar1) {
        *(undefined2 *)(param_1 + 3) = 0x2e2e;
        *(undefined1 *)((int)param_1 + 0xe) = 0x2e;
        strncpy((char *)((int)param_1 + 0xf), param_2 + (sVar1 - 0x4c), 0x4d);
        return;
    }
    strncpy((char *)(param_1 + 3), param_2, sVar1 + 1);
    return;
}

void FUN_0004a3ec(undefined4 *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4, undefined1 param_5, char *param_6)

{
    if ((param_1 != (undefined4 *)0x0) && (*(char *)(param_1 + 0x17) == '\0')) {
        *param_1 = param_2;
        param_1[1] = param_3;
        param_1[2] = param_4;
        vsnprintf((char *)(param_1 + 0x17), 0x9f, param_6, &stack0x00000008);
        *(undefined1 *)((int)param_1 + 0xfa) = 0;
        *(undefined1 *)((int)param_1 + 0xfb) = param_5;
        return;
    }
    return;
}

void FUN_0004a450(undefined4 *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4, undefined1 param_5, char *param_6,
                  __gnuc_va_list param_7)

{
    if (param_1 == (undefined4 *)0x0) {
        return;
    }
    if (*(char *)(param_1 + 0x17) != '\0') {
        return;
    }
    *param_1 = param_2;
    param_1[1] = param_3;
    param_1[2] = param_4;
    vsnprintf((char *)(param_1 + 0x17), 0x9f, param_6, param_7);
    *(undefined1 *)((int)param_1 + 0xfa) = 0;
    *(undefined1 *)((int)param_1 + 0xfb) = param_5;
    return;
}

ulonglong FUN_0004a4a0(uint param_1, uint param_2)

{
    uint uVar1;
    ulonglong uVar2;

    if (param_2 - 1 == 0) {
        return CONCAT44(param_2, param_1);
    }
    if (param_2 == 0) {
        uVar1 = raise(8);
        return (ulonglong)uVar1;
    }
    if (param_1 <= param_2) {
        return CONCAT44(param_2, (uint)(param_1 == param_2));
    }
    if ((param_2 & param_2 - 1) == 0) {
        return CONCAT44(param_2, param_1 >> (0x1fU - LZCOUNT(param_2) & 0xff));
    }
    /* WARNING: Could not recover jumptable at 0x0004a4d0. Too many branches */
    /* WARNING: Treating indirect jump as call */
    uVar2 = (*(code *)(&UNK_0004a4d8 +
                       (0x1f - (LZCOUNT(param_2) - LZCOUNT(param_1))) * 0x10))(
        param_1, param_2, 0);
    return uVar2;
}

void FUN_0004a6fc(undefined4 param_1, int param_2)

{
    if (param_2 != 0) {
        FUN_0004a4a0();
        return;
    }
    raise(8);
    return;
}

ulonglong FUN_0004a718(uint param_1, uint param_2)

{
    uint uVar1;
    uint uVar2;
    uint uVar3;
    ulonglong uVar4;

    if (param_2 == 0) {
        uVar2 = raise(8);
        return (ulonglong)uVar2;
    }
    uVar3 = param_1 ^ param_2;
    uVar2 = param_2;
    if ((int)param_2 < 0) {
        uVar2 = -param_2;
    }
    if (uVar2 - 1 == 0) {
        if ((int)param_2 < 0) {
            param_1 = -param_1;
        }
        return CONCAT44(uVar2, param_1);
    }
    uVar1 = param_1;
    if ((int)param_1 < 0) {
        uVar1 = -param_1;
    }
    if (uVar1 <= uVar2) {
        if (uVar1 < uVar2) {
            param_1 = 0;
        }
        if (uVar1 == uVar2) {
            param_1 = (int)uVar3 >> 0x1f | 1;
        }
        return CONCAT44(uVar2, param_1);
    }
    if ((uVar2 & uVar2 - 1) == 0) {
        uVar1 = uVar1 >> (0x1fU - LZCOUNT(uVar2) & 0xff);
        if ((int)uVar3 < 0) {
            uVar1 = -uVar1;
        }
        return CONCAT44(uVar2, uVar1);
    }
    /* WARNING: Could not recover jumptable at 0x0004a758. Too many branches */
    /* WARNING: Treating indirect jump as call */
    uVar4 = (*(code *)(&UNK_0004a760 +
                       (0x1f - (LZCOUNT(uVar2) - LZCOUNT(uVar1))) * 0x10))(0);
    return uVar4;
}

ulonglong FUN_0004acd4(uint param_1, uint param_2)

{
    byte bVar1;
    uint uVar2;
    uint uVar3;
    uint uVar4;
    int iVar5;
    uint uVar6;
    int iVar7;
    uint uVar8;
    bool bVar9;
    bool bVar10;
    bool bVar11;

    if (param_1 == 0 && param_2 == 0) {
        return CONCAT44(param_2, param_1);
    }
    iVar7 = 0x432;
    uVar8 = param_2 >> 0x16;
    if (uVar8 != 0) {
        iVar7 = 3;
        if (param_2 >> 0x19 != 0) {
            iVar7 = 6;
        }
        if (param_2 >> 0x1c != 0) {
            iVar7 = iVar7 + 3;
        }
        uVar4 = iVar7 - ((int)param_2 >> 0x1f);
        uVar8 = param_1 << (0x20 - uVar4 & 0xff);
        param_1 = param_1 >> (uVar4 & 0xff) | param_2 << (0x20 - uVar4 & 0xff);
        param_2 = param_2 >> (uVar4 & 0xff);
        iVar7 = uVar4 + 0x432;
    }
    if (0xfffff < param_2) {
        if (0x1fffff < param_2) {
            uVar4 = param_2 & 1;
            param_2 = param_2 >> 1;
            bVar1 = (byte)param_1;
            param_1 = (uint)(uVar4 != 0) << 0x1f | param_1 >> 1;
            uVar8 = (uint)(bVar1 & 1) << 0x1f | uVar8 >> 1;
            iVar7 = iVar7 + 1;
            if (0xffbfffff < (uint)(iVar7 * 0x200000)) {
                return 0x7ff0000000000000;
            }
        }
    LAB_0004aae0:
        bVar10 = 0x7fffffff < uVar8;
        if (uVar8 == 0x80000000) {
            bVar10 = (param_1 & 1) != 0;
        }
        return CONCAT44(param_2 + iVar7 * 0x100000 +
                            (uint)CARRY4(param_1, (uint)bVar10),
                        param_1 + bVar10);
    }
    bVar9 = (uVar8 & 0x80000000) != 0;
    uVar8 = uVar8 << 1;
    uVar4 = param_1 * 2;
    bVar10 = CARRY4(param_1, param_1);
    param_1 = param_1 * 2 + (uint)bVar9;
    param_2 = param_2 * 2 + (uint)(bVar10 || CARRY4(uVar4, (uint)bVar9));
    iVar7 = iVar7 + -1;
    if ((param_2 & 0x100000) != 0)
        goto LAB_0004aae0;
    uVar2 = param_1;
    uVar4 = param_2;
    if (param_2 == 0) {
        uVar2 = 0;
        uVar4 = param_1;
    }
    iVar5 = LZCOUNT(uVar4);
    if (param_2 == 0) {
        iVar5 = iVar5 + 0x20;
    }
    uVar6 = iVar5 - 0xb;
    bVar11 = SBORROW4(uVar6, 0x20);
    uVar3 = iVar5 - 0x2b;
    bVar10 = (int)uVar3 < 0;
    bVar9 = uVar3 == 0;
    if ((int)uVar6 < 0x20) {
        bVar11 = SCARRY4(uVar3, 0xc);
        iVar5 = iVar5 + -0x1f;
        bVar10 = iVar5 < 0;
        bVar9 = iVar5 == 0;
        uVar3 = uVar6;
        if (!bVar9 && bVar10 == bVar11) {
            uVar2 = uVar4 << (uVar6 & 0xff);
            uVar4 = uVar4 >> (0xcU - iVar5 & 0xff);
            goto LAB_0004ab58;
        }
    }
    if (bVar9 || bVar10 != bVar11) {
        uVar8 = 0x20 - uVar3;
    }
    uVar4 = uVar4 << (uVar3 & 0xff);
    if (bVar9 || bVar10 != bVar11) {
        uVar4 = uVar4 | uVar2 >> (uVar8 & 0xff);
        uVar2 = uVar2 << (uVar3 & 0xff);
    }
LAB_0004ab58:
    if ((int)uVar6 <= iVar7) {
        return CONCAT44(uVar4 + (iVar7 - uVar6) * 0x100000, uVar2);
    }
    uVar8 = ~(iVar7 - uVar6);
    if (0x1e < (int)uVar8) {
        return (ulonglong)(uVar4 >> (uVar8 - 0x1f & 0xff));
    }
    iVar7 = uVar8 - 0x13;
    if (iVar7 == 0 || iVar7 < 0 != SCARRY4(uVar8 - 0x1f, 0xc)) {
        uVar8 = uVar8 + 1;
        return CONCAT44(uVar4 >> (uVar8 & 0xff),
                        uVar2 >> (uVar8 & 0xff) | uVar4
                                                      << (0x20 - uVar8 & 0xff));
    }
    return (ulonglong)(uVar2 >> (0x20 - (0xcU - iVar7) & 0xff) |
                       uVar4 << (0xcU - iVar7 & 0xff));
}

ulonglong FUN_0004ace4(uint param_1, uint param_2)

{
    byte bVar1;
    uint uVar2;
    uint uVar3;
    uint uVar4;
    int iVar5;
    uint uVar6;
    int iVar7;
    uint uVar8;
    uint uVar9;
    bool bVar10;
    bool bVar11;
    bool bVar12;

    if (param_1 == 0 && param_2 == 0) {
        return CONCAT44(param_2, param_1);
    }
    uVar8 = param_2 & 0x80000000;
    uVar3 = param_2;
    if ((int)uVar8 < 0) {
        bVar11 = param_1 != 0;
        param_1 = -param_1;
        uVar3 = -param_2 - (uint)bVar11;
    }
    iVar7 = 0x432;
    uVar9 = uVar3 >> 0x16;
    if (uVar9 != 0) {
        iVar7 = 3;
        if (uVar3 >> 0x19 != 0) {
            iVar7 = 6;
        }
        if (uVar3 >> 0x1c != 0) {
            iVar7 = iVar7 + 3;
        }
        uVar4 = iVar7 - ((int)uVar3 >> 0x1f);
        uVar9 = param_1 << (0x20 - uVar4 & 0xff);
        param_1 = param_1 >> (uVar4 & 0xff) | uVar3 << (0x20 - uVar4 & 0xff);
        uVar3 = uVar3 >> (uVar4 & 0xff);
        iVar7 = uVar4 + 0x432;
    }
    if (0xfffff < uVar3) {
        if (0x1fffff < uVar3) {
            uVar4 = uVar3 & 1;
            uVar3 = uVar3 >> 1;
            bVar1 = (byte)param_1;
            param_1 = (uint)(uVar4 != 0) << 0x1f | param_1 >> 1;
            uVar9 = (uint)(bVar1 & 1) << 0x1f | uVar9 >> 1;
            iVar7 = iVar7 + 1;
            if (0xffbfffff < (uint)(iVar7 * 0x200000)) {
                return (ulonglong)(uVar8 | 0x7ff00000) << 0x20;
            }
        }
    LAB_0004aae0:
        bVar11 = 0x7fffffff < uVar9;
        if (uVar9 == 0x80000000) {
            bVar11 = (param_1 & 1) != 0;
        }
        return CONCAT44(uVar3 + iVar7 * 0x100000 +
                                (uint)CARRY4(param_1, (uint)bVar11) |
                            uVar8,
                        param_1 + bVar11);
    }
    bVar10 = (uVar9 & 0x80000000) != 0;
    uVar9 = uVar9 << 1;
    uVar4 = param_1 * 2;
    bVar11 = CARRY4(param_1, param_1);
    param_1 = param_1 * 2 + (uint)bVar10;
    uVar3 = uVar3 * 2 + (uint)(bVar11 || CARRY4(uVar4, (uint)bVar10));
    iVar7 = iVar7 + -1;
    if ((uVar3 & 0x100000) != 0)
        goto LAB_0004aae0;
    uVar2 = param_1;
    uVar4 = uVar3;
    if (uVar3 == 0) {
        uVar2 = 0;
        uVar4 = param_1;
    }
    iVar5 = LZCOUNT(uVar4);
    if (uVar3 == 0) {
        iVar5 = iVar5 + 0x20;
    }
    uVar6 = iVar5 - 0xb;
    bVar12 = SBORROW4(uVar6, 0x20);
    uVar3 = iVar5 - 0x2b;
    bVar11 = (int)uVar3 < 0;
    bVar10 = uVar3 == 0;
    if ((int)uVar6 < 0x20) {
        bVar12 = SCARRY4(uVar3, 0xc);
        iVar5 = iVar5 + -0x1f;
        bVar11 = iVar5 < 0;
        bVar10 = iVar5 == 0;
        uVar3 = uVar6;
        if (!bVar10 && bVar11 == bVar12) {
            uVar2 = uVar4 << (uVar6 & 0xff);
            uVar4 = uVar4 >> (0xcU - iVar5 & 0xff);
            goto LAB_0004ab58;
        }
    }
    if (bVar10 || bVar11 != bVar12) {
        uVar9 = 0x20 - uVar3;
    }
    uVar4 = uVar4 << (uVar3 & 0xff);
    if (bVar10 || bVar11 != bVar12) {
        uVar4 = uVar4 | uVar2 >> (uVar9 & 0xff);
        uVar2 = uVar2 << (uVar3 & 0xff);
    }
LAB_0004ab58:
    if ((int)uVar6 <= iVar7) {
        return CONCAT44(uVar4 + (iVar7 - uVar6) * 0x100000 | uVar8, uVar2);
    }
    uVar3 = ~(iVar7 - uVar6);
    if (0x1e < (int)uVar3) {
        return CONCAT44(param_2, uVar4 >> (uVar3 - 0x1f & 0xff)) &
               0x80000000ffffffff;
    }
    iVar7 = uVar3 - 0x13;
    if (iVar7 == 0 || iVar7 < 0 != SCARRY4(uVar3 - 0x1f, 0xc)) {
        uVar3 = uVar3 + 1;
        return CONCAT44(uVar8 | uVar4 >> (uVar3 & 0xff),
                        uVar2 >> (uVar3 & 0xff) | uVar4
                                                      << (0x20 - uVar3 & 0xff));
    }
    return CONCAT44(param_2, uVar2 >> (0x20 - (0xcU - iVar7) & 0xff) |
                                 uVar4 << (0xcU - iVar7 & 0xff)) &
           0x80000000ffffffff;
}

void FUN_0004ad40(undefined4 param_1, undefined4 param_2, int param_3,
                  int param_4)

{
    if ((param_4 == 0) && (param_3 == 0)) {
        raise(8);
        return;
    }
    FUN_0004ade0();
    return;
}

int FUN_0004ad7c(undefined4 param_1, uint param_2, undefined4 param_3,
                 undefined4 param_4)

{
    int iVar1;

    if (-1 < (int)((uint)((double)CONCAT44(param_2, param_1) < 0.0) << 0x1f)) {
        iVar1 = FUN_0004ada0();
        return iVar1;
    }
    iVar1 =
        FUN_0004ada0(param_1, param_2 ^ 0x80000000, param_3, param_4, param_4);
    return -iVar1;
}

undefined8 FUN_0004ada0(undefined4 param_1, undefined4 param_2)

{
    uint uVar1;
    double dVar2;

    dVar2 = (double)CONCAT44(param_2, param_1) * 2.3283064365386963e-10;
    uVar1 = (uint)(0.0 < dVar2) * (int)(longlong)dVar2;
    dVar2 = (double)CONCAT44(param_2, param_1) - (double)uVar1 * 4294967296.0;
    return CONCAT44(uVar1, (uint)(0.0 < dVar2) * (int)(longlong)dVar2);
}

undefined8 FUN_0004ade0(uint param_1, uint param_2, uint param_3, uint param_4,
                        uint *param_5)

{
    uint uVar1;
    uint uVar2;
    int iVar3;
    uint uVar4;
    uint uVar5;
    uint uVar6;
    uint uVar7;
    uint uVar8;
    uint uVar9;
    int iVar10;
    uint uVar11;
    bool bVar12;

    bVar12 = param_4 <= param_2;
    if (param_2 == param_4) {
        bVar12 = param_3 <= param_1;
    }
    if (bVar12) {
        iVar10 = LZCOUNT(param_4);
        if (param_4 == 0) {
            iVar10 = LZCOUNT(param_3) + 0x20;
        }
        iVar3 = LZCOUNT(param_2);
        if (param_2 == 0) {
            iVar3 = LZCOUNT(param_1) + 0x20;
        }
        uVar11 = iVar10 - iVar3;
        uVar8 = uVar11 - 0x20;
        uVar9 = 0x20 - uVar11;
        uVar5 = param_3 << (uVar11 & 0xff);
        uVar6 = param_4 << (uVar11 & 0xff) | param_3 << (uVar8 & 0xff) |
                param_3 >> (uVar9 & 0xff);
        bVar12 = uVar6 <= param_2;
        if (param_2 == uVar6) {
            bVar12 = uVar5 <= param_1;
        }
        if (bVar12) {
            bVar12 = param_1 < uVar5;
            param_1 = param_1 - uVar5;
            uVar1 = 1 << (uVar11 & 0xff);
            param_2 = (param_2 - uVar6) - (uint)bVar12;
            uVar2 = 1 << (uVar8 & 0xff) | 1U >> (uVar9 & 0xff);
        } else {
            uVar1 = 0;
            uVar2 = uVar1;
        }
        if (uVar11 != 0) {
            uVar7 = uVar6 >> 1;
            uVar6 = (uint)((uVar6 & 1) != 0) << 0x1f | uVar5 >> 1;
            uVar5 = uVar11;
            do {
                while (true) {
                    bVar12 = uVar7 <= param_2;
                    if (param_2 == uVar7) {
                        bVar12 = uVar6 <= param_1;
                    }
                    if (bVar12)
                        break;
                    bVar12 = CARRY4(param_1, param_1);
                    param_1 = param_1 * 2;
                    param_2 = param_2 * 2 + (uint)bVar12;
                    uVar5 = uVar5 - 1;
                    uVar4 = param_2;
                    if (uVar5 == 0)
                        goto LAB_0004ae8a;
                }
                bVar12 = param_1 < uVar6;
                uVar4 = param_1 - uVar6;
                param_1 = uVar4 * 2 + 1;
                param_2 = ((param_2 - uVar7) - (uint)bVar12) * 2 +
                          (uint)CARRY4(uVar4, uVar4) +
                          (uint)(0xfffffffe < uVar4 * 2);
                uVar5 = uVar5 - 1;
                uVar4 = param_2;
            } while (uVar5 != 0);
        LAB_0004ae8a:
            param_2 = uVar4 >> (uVar11 & 0xff);
            bVar12 = CARRY4(uVar1, param_1);
            uVar5 = uVar1 + param_1;
            param_1 = param_1 >> (uVar11 & 0xff) | uVar4 << (uVar9 & 0xff) |
                      uVar4 >> (uVar8 & 0xff);
            uVar6 = param_1 << (uVar11 & 0xff);
            uVar1 = uVar5 - uVar6;
            uVar2 = ((uVar4 + uVar2 + bVar12) -
                     (param_2 << (uVar11 & 0xff) |
                      param_1 << (uVar11 - 0x20 & 0xff) |
                      param_1 >> (0x20 - uVar11 & 0xff))) -
                    (uint)(uVar5 < uVar6);
        }
    } else {
        uVar1 = 0;
        uVar2 = uVar1;
    }
    if (param_5 != (uint *)0x0) {
        *param_5 = param_1;
        param_5[1] = param_2;
    }
    return CONCAT44(uVar2, uVar1);
}

void FUN_0004aef8(undefined4 param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    int iVar1;
    undefined **ppuVar2;

    _DT_INIT();
    iVar1 = 0;
    ppuVar2 = &__DT_INIT_ARRAY;
    do {
        iVar1 = iVar1 + 1;
        (*(code *)*ppuVar2)(param_1, param_2, param_3, *ppuVar2, param_4);
        ppuVar2 = ppuVar2 + 1;
    } while (iVar1 != 1);
    return;
}

void _DT_FINI(void)

{
    return;
}
