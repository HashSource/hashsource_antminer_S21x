// Decompiled: cgminer_7b34b37e650c203a

void _DT_INIT(void)

{
    FUN_00015a70();
    return;
}

/* WARNING: Restarted to delay deadcode elimination for space: ram */

void FUN_000125f8(int param_1, char *param_2)

{
    undefined2 uVar1;
    uint *puVar2;
    char cVar3;
    int *piVar4;
    FILE *pFVar5;
    char *pcVar6;
    size_t sVar7;
    ushort **ppuVar8;
    long lVar9;
    undefined4 uVar10;
    char *pcVar11;
    char *__src;
    void *pvVar12;
    int *piVar13;
    size_t sVar14;
    __sighandler_t p_Var15;
    __sighandler_t p_Var16;
    __pid_t _Var17;
    pthread_mutex_t *__mutex;
    undefined4 *puVar18;
    code *extraout_r2;
    code *pcVar19;
    int *piVar20;
    code *pcVar21;
    byte bVar22;
    code **extraout_r3;
    code **ppcVar23;
    code *pcVar24;
    uint uVar25;
    int iVar26;
    int iVar27;
    int iVar28;
    undefined *puVar29;
    char **ppcVar30;
    byte *pbVar31;
    undefined4 *puVar32;
    uint uVar33;
    byte *pbVar34;
    char **ppcVar35;
    int iVar36;
    undefined *puVar37;
    uint uVar38;
    uint uVar39;
    bool bVar40;
    undefined8 uVar41;
    char acStack_2a38[4104];
    char local_1a30[4088];
    byte *local_a38;
    int *local_a28;
    char *local_a24;
    int *local_a20;
    int *local_a1c;
    int local_a18;
    int *local_a14;
    char **local_a10;
    int *local_a0c;
    char *local_a08;
    int *local_a04;
    byte *local_a00;
    char *local_9fc;
    int *local_9f8;
    char *local_9f4;
    undefined *local_9f0;
    int local_9ec;
    int local_9e8;
    char acStack_9e4[32];
    _union_1051 local_9c4;
    sigset_t sStack_9c0;
    char *local_940;
    byte abStack_938[256];
    code *local_838;
    int local_834;
    char acStack_830[8];
    code *local_828;
    undefined4 local_824;
    char local_820[8];
    undefined4 local_818;
    uint local_814;
    uint local_810;
    undefined2 uStack_80c;
    undefined1 local_80a;
    undefined2 local_808;
    undefined1 local_7fe[1994];

    DAT_00068aac = 0;
    pbVar34 = *(byte **)param_2;
    local_a04 = (int *)&DAT_00068aac;
    local_9e8 = 0;
    local_9f4 = param_2;
    local_9ec = param_1;
    memset(abStack_938, 0, 0x100);
    memset(&local_9c4, 0, 0x40);
    snprintf((char *)&local_9c4, 0x40, "pidof %s", pbVar34);
    pFVar5 = popen((char *)&local_9c4, "r");
    if (pFVar5 != (FILE *)0x0) {
    LAB_000126a4:
        do {
            pcVar6 = fgets((char *)abStack_938, 0x100, pFVar5);
            if (pcVar6 == (char *)0x0)
                goto LAB_000127a8;
            if (DAT_00068bd5 != '\0') {
                if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                    (DAT_00067db4 < 7)) {
                LAB_00012750:
                    if ((DAT_00068bd4 == '\0') && (DAT_00067db4 < 7))
                        goto LAB_000126a4;
                } else {
                    local_a38 = abStack_938;
                    snprintf((char *)&local_838, 0x800,
                             "pidof %s command result is: %s\n", pbVar34);
                    FUN_00020f58(7, &local_838, 0);
                    if (DAT_00068bd5 == '\0')
                        goto LAB_000126a4;
                    if (DAT_00074500 == '\0')
                        goto LAB_00012750;
                }
                sVar7 = strlen((char *)abStack_938);
                snprintf((char *)&local_838, 0x800, "strlen is: %d\n", sVar7);
                FUN_00020f58(7, &local_838, 0);
            }
        } while (true);
    }
    if ((DAT_00068bd5 != '\0') &&
        (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
          (6 < DAT_00067db4)))) {
        snprintf((char *)&local_838, 0x800, " app-service:%s Not Found!!!",
                 pbVar34);
        FUN_00020f58(7, &local_838, 0);
    }
LAB_000129f0:
    DAT_00068adc._0_1_ = 'l';
    DAT_00068adc._1_1_ = 'o';
    DAT_00068adc._2_1_ = 'g';
    DAT_00068adc._3_1_ = '\0';
    DAT_00068ab6 = 0;
    DAT_00068ad4._0_1_ = 'b';
    DAT_00068ad4._1_1_ = 'm';
    DAT_00068ad4._2_1_ = 'm';
    DAT_00068ad4._3_1_ = 'i';
    DAT_00068ad8._0_1_ = 'n';
    DAT_00068ad8._1_1_ = 'e';
    DAT_00068ad8._2_1_ = 'r';
    DAT_00068ad8._3_1_ = '.';
    DAT_00068ab4 = 0x2b61;
    local_a0c = (int *)&DAT_00068ab4;
    lVar9 = sysconf(0x54);
    pcVar19 = extraout_r2;
    ppcVar23 = extraout_r3;
    if (lVar9 == 1) {
        ppcVar23 = &DAT_00067ed8;
        pcVar19 = sched_yield;
    }
    if (lVar9 == 1) {
        *ppcVar23 = pcVar19;
    }
    local_9f0 = &DAT_00068bd8;
    iVar36 =
        FUN_000229bc((local_9ec + 1) * 4, "cgminer.c", &DAT_0004ef8c, 0x2e2b);
    DAT_00069054 = iVar36;
    if (0 < local_9ec) {
        puVar32 = (undefined4 *)(iVar36 + -4);
        iVar26 = 0;
        pcVar6 = local_9f4 + -4;
        do {
            pcVar6 = pcVar6 + 4;
            iVar26 = iVar26 + 1;
            uVar10 = __strdup(*(undefined4 *)pcVar6);
            puVar32 = puVar32 + 1;
            *puVar32 = uVar10;
        } while (iVar26 < local_9ec);
    }
    *(undefined4 *)(iVar36 + local_9ec * 4) = 0;
    FUN_0002ee90(&DAT_00076838, &DAT_0004ef8c, 0x2e34);
    FUN_0002ee90(&DAT_000767c8, &DAT_0004ef8c, 0x2e35);
    FUN_0002ee90(&DAT_000766e4, &DAT_0004ef8c, 0x2e36);
    FUN_0002ef3c(&DAT_0007453c, &DAT_0004ef8c, 0x2e37);
    FUN_0002ee90(&DAT_000766c4, &DAT_0004ef8c, 0x2e38);
    local_9fc = &DAT_0006abd0;
    FUN_0002ee90(&DAT_0006918c, &DAT_0004ef8c, 0x2e39);
    FUN_0002ef3c(&DAT_00074504, &DAT_0004ef8c, 0x2e3a);
    FUN_0002ee90(&DAT_000690f0, &DAT_0004ef8c, 0x2e3b);
    FUN_0002ef14(&DAT_0006a6c0, &DAT_0004ef8c, 0x2e3c);
    FUN_0002ef14(&DAT_000755a0, &DAT_0004ef8c, 0x2e3d);
    FUN_0002ef14(&DAT_000744a8, &DAT_0004ef8c, 0x2e3e);
    FUN_0002ef14(&DAT_0007680c, &DAT_0004ef8c, 0x2e3f);
    FUN_0002ee90(&DAT_0006910c, &DAT_0004ef8c, 0x2e41);
    iVar36 = pthread_cond_init((pthread_cond_t *)&DAT_00069128,
                               (pthread_condattr_t *)0x0);
    if (iVar36 != 0) {
        local_838 = (code *)0x6c696146;
        local_834._0_1_ = 'e';
        local_834._1_1_ = 'd';
        local_834._2_1_ = ' ';
        local_834._3_1_ = 't';
        builtin_strncpy(acStack_830, "o pthrea", 8);
        local_828 = (code *)0x6f635f64;
        local_824._0_1_ = 'n';
        local_824._1_1_ = 'd';
        local_824._2_1_ = '_';
        local_824._3_1_ = 'i';
        builtin_strncpy(local_820, "nit lp_c", 8);
        local_818._0_1_ = 'o';
        local_818._1_1_ = 'n';
        local_818._2_1_ = 'd';
        local_818._3_1_ = '\0';
        FUN_00020f58(3, &local_838, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002e6b0(1, 0);
    }
    FUN_0002ee90(&DAT_000767f4, &DAT_0004ef8c, 0x2e48);
    iVar36 = pthread_cond_init((pthread_cond_t *)&DAT_00076700,
                               (pthread_condattr_t *)0x0);
    if (iVar36 != 0) {
        local_838 = (code *)0x6c696146;
        local_834._0_1_ = 'e';
        local_834._1_1_ = 'd';
        local_834._2_1_ = ' ';
        local_834._3_1_ = 't';
        builtin_strncpy(acStack_830, "o pthrea", 8);
        local_828 = (code *)0x6f635f64;
        local_824._0_1_ = 'n';
        local_824._1_1_ = 'd';
        local_824._2_1_ = '_';
        local_824._3_1_ = 'i';
        builtin_strncpy(local_820, "nit rest", 8);
        local_818._0_1_ = 'a';
        local_818._1_1_ = 'r';
        local_818._2_1_ = 't';
        local_818._3_1_ = '_';
        local_814._0_1_ = 'c';
        local_814._1_1_ = 'o';
        local_814._2_1_ = 'n';
        local_814._3_1_ = 'd';
        local_810 = local_810 & 0xffffff00;
        FUN_00020f58(3, &local_838, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002e6b0(1, 0);
    }
    local_a08 = (char *)pthread_cond_init((pthread_cond_t *)&DAT_000744d0,
                                          (pthread_condattr_t *)0x0);
    if (local_a08 != (char *)0x0) {
        local_838 = (code *)0x6c696146;
        local_834._0_1_ = 'e';
        local_834._1_1_ = 'd';
        local_834._2_1_ = ' ';
        local_834._3_1_ = 't';
        builtin_strncpy(acStack_830, "o pthrea", 8);
        local_828 = (code *)0x6f635f64;
        local_824._0_1_ = 'n';
        local_824._1_1_ = 'd';
        local_824._2_1_ = '_';
        local_824._3_1_ = 'i';
        builtin_strncpy(local_820, "nit gws_", 8);
        local_818._0_1_ = 'c';
        local_818._1_1_ = 'o';
        local_818._2_1_ = 'n';
        local_818._3_1_ = 'd';
        local_814 = local_814 & 0xffffff00;
        FUN_00020f58(3, &local_838, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002e6b0(1, 0);
    }
    DAT_000755e0 = FUN_00023300();
    if (DAT_000755e0 == 0) {
        local_838 = (code *)0x6c696146;
        local_834._0_1_ = 'e';
        local_834._1_1_ = 'd';
        local_834._2_1_ = ' ';
        local_834._3_1_ = 't';
        builtin_strncpy(acStack_830, "o create", 8);
        local_828 = (code *)0x74656720;
        local_824 = CONCAT22(local_824._2_2_, 0x71);
        FUN_00020f58(3, &local_838, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002e6b0(1, 0);
    }
    local_a38 = (byte *)0x55aa8;
    *(int *)(local_9f0 + 0x438) = DAT_000755e0 + 0xc;
    snprintf(&DAT_00068df4, 0x100, "%s %s", "cgminer");
    local_9c4.sa_handler = (__sighandler_t)&DAT_0002e78c;
    local_940 = local_a08;
    local_a10 = &DAT_000755c4;
    sigemptyset(&sStack_9c0);
    sigaction(0xf, (sigaction *)&local_9c4, (sigaction *)&DAT_000755f8);
    sigaction(2, (sigaction *)&local_9c4, (sigaction *)&DAT_00076730);
    sigaction(6, (sigaction *)&local_9c4, (sigaction *)&DAT_000733d0);
    DAT_000755c4 = local_1a30;
    DAT_0007557c = acStack_2a38;
    builtin_strncpy(local_1a30, "/usr/bin", 8);
    iVar36 = 0x24;
    local_1a30[8] = 0;
    local_a14 = (int *)0x51dd8;
    pcVar11 = (char *)__strdup(*(undefined4 *)local_9f4);
    pcVar6 = DAT_0007557c;
    __src = dirname(pcVar11);
    strcpy(pcVar6, __src);
    free(pcVar11);
    pcVar6 = DAT_0007557c;
    sVar7 = strlen(DAT_0007557c);
    (pcVar6 + sVar7)[0] = '/';
    (pcVar6 + sVar7)[1] = '\0';
    local_9fc[-0xffffffff00000284] = '\t';
    local_9fc[-0xffffffff00000283] = '\0';
    local_9fc[-0xffffffff00000282] = '\0';
    local_9fc[-0xffffffff00000281] = '\0';
    pbVar34 = (byte *)FUN_00022a44(0x68, 1, "cgminer.c", &DAT_0004ef8c, 0x2e77);
    do {
        sVar7 = strlen((char *)pbVar34);
        iVar36 = iVar36 + -1;
        (pbVar34 + sVar7)[0] = '0';
        (pbVar34 + sVar7)[1] = '\0';
    } while (iVar36 != 0);
    uVar33 = 0x9e3779b9;
    uVar38 = 0xfeedbeef;
    local_9f8 = (int *)(sVar7 + 1);
    uVar25 = uVar33;
    pbVar31 = pbVar34;
    for (piVar20 = local_9f8; (int *)0xb < piVar20; piVar20 = piVar20 + -3) {
        iVar36 = (uint)pbVar31[6] * 0x10000 + (uint)pbVar31[5] * 0x100 +
                 (uint)pbVar31[4] + (uint)pbVar31[7] * 0x1000000 + uVar25;
        uVar38 = (uint)pbVar31[10] * 0x10000 + (uint)pbVar31[9] * 0x100 +
                 (uint)pbVar31[8] + (uint)pbVar31[0xb] * 0x1000000 + uVar38;
        uVar25 = ((((uint)pbVar31[2] * 0x10000 + (uint)pbVar31[1] * 0x100 +
                    (uint)*pbVar31 + (uint)pbVar31[3] * 0x1000000) -
                   iVar36) -
                  uVar38) +
                     uVar33 ^
                 uVar38 >> 0xd;
        uVar33 = (iVar36 - uVar38) - uVar25 ^ uVar25 << 8;
        uVar39 = (uVar38 - uVar25) - uVar33 ^ uVar33 >> 0xd;
        uVar25 = (uVar25 - uVar33) - uVar39 ^ uVar39 >> 0xc;
        uVar38 = (uVar33 - uVar39) - uVar25 ^ uVar25 << 0x10;
        uVar39 = (uVar39 - uVar25) - uVar38 ^ uVar38 >> 5;
        uVar33 = (uVar25 - uVar38) - uVar39 ^ uVar39 >> 3;
        uVar25 = (uVar38 - uVar39) - uVar33 ^ uVar33 << 10;
        uVar38 = (uVar39 - uVar33) - uVar25 ^ uVar25 >> 0xf;
        pbVar31 = pbVar31 + 0xc;
        local_a00 = pbVar34;
    }
    uVar38 = uVar38 + (int)local_9f8;
    switch (piVar20) {
    case (int *)0xb:
        uVar38 = uVar38 + (uint)pbVar31[10] * 0x1000000;
    case (int *)0xa:
        uVar38 = uVar38 + (uint)pbVar31[9] * 0x10000;
    case (int *)0x9:
        uVar38 = uVar38 + (uint)pbVar31[8] * 0x100;
    case (int *)0x8:
        uVar25 = uVar25 + (uint)pbVar31[7] * 0x1000000;
    case (int *)0x7:
        uVar25 = uVar25 + (uint)pbVar31[6] * 0x10000;
    case (int *)0x6:
        uVar25 = uVar25 + (uint)pbVar31[5] * 0x100;
    case (int *)0x5:
        uVar25 = uVar25 + pbVar31[4];
    case (int *)0x4:
        uVar33 = uVar33 + (uint)pbVar31[3] * 0x1000000;
    case (int *)0x3:
        uVar33 = uVar33 + (uint)pbVar31[2] * 0x10000;
    case (int *)0x2:
        uVar33 = uVar33 + (uint)pbVar31[1] * 0x100;
    case (int *)0x1:
        uVar33 = uVar33 + *pbVar31;
    }
    *(byte **)(pbVar34 + 0x58) = pbVar34;
    uVar33 = (uVar33 - uVar25) - uVar38 ^ uVar38 >> 0xd;
    uVar39 = (uVar25 - uVar38) - uVar33 ^ uVar33 << 8;
    uVar25 = (uVar38 - uVar33) - uVar39 ^ uVar39 >> 0xd;
    uVar38 = (uVar33 - uVar39) - uVar25 ^ uVar25 >> 0xc;
    uVar33 = (uVar39 - uVar25) - uVar38 ^ uVar38 << 0x10;
    uVar25 = (uVar25 - uVar38) - uVar33 ^ uVar33 >> 5;
    uVar38 = (uVar38 - uVar33) - uVar25 ^ uVar25 >> 3;
    uVar33 = (uVar33 - uVar25) - uVar38 ^ uVar38 << 10;
    uVar33 = (uVar25 - uVar38) - uVar33 ^ uVar33 >> 0xf;
    *(uint *)(pbVar34 + 0x60) = uVar33;
    sVar7 = strlen((char *)pbVar34);
    *(size_t *)(pbVar34 + 0x5c) = sVar7;
    iVar36 = *(int *)(local_9fc + -0x4f0);
    if (iVar36 == 0) {
        pbVar34[0x4c] = 0;
        pbVar34[0x4d] = 0;
        pbVar34[0x4e] = 0;
        pbVar34[0x4f] = 0;
        pbVar34[0x48] = 0;
        pbVar34[0x49] = 0;
        pbVar34[0x4a] = 0;
        pbVar34[0x4b] = 0;
        *(byte **)(local_9fc + -0x4f0) = pbVar34;
        pvVar12 = malloc(0x2c);
        *(void **)(pbVar34 + 0x44) = pvVar12;
        if (pvVar12 == (void *)0x0)
            goto LAB_00013d20;
        memset(pvVar12, 0, 0x2c);
        *(byte **)(*(int *)(pbVar34 + 0x44) + 0x10) = pbVar34 + 0x44;
        *(undefined4 *)(*(int *)(pbVar34 + 0x44) + 4) = 0x20;
        *(undefined4 *)(*(int *)(pbVar34 + 0x44) + 8) = 5;
        *(undefined4 *)(*(int *)(pbVar34 + 0x44) + 0x14) = 0x44;
        puVar32 = *(undefined4 **)(pbVar34 + 0x44);
        pvVar12 = malloc(0x180);
        *puVar32 = pvVar12;
        if ((void *)**(undefined4 **)(pbVar34 + 0x44) == (void *)0x0)
            goto LAB_00013d20;
        memset((void *)**(undefined4 **)(pbVar34 + 0x44), 0, 0x180);
        *(undefined4 *)(*(int *)(pbVar34 + 0x44) + 0x28) = 0xa0111fe1;
    } else {
        uVar10 = *(undefined4 *)(iVar36 + 0x44);
        pbVar34[0x4c] = 0;
        pbVar34[0x4d] = 0;
        pbVar34[0x4e] = 0;
        pbVar34[0x4f] = 0;
        *(undefined4 *)(pbVar34 + 0x44) = uVar10;
        *(int *)(pbVar34 + 0x48) = *(int *)(*(int *)(iVar36 + 0x44) + 0x10) -
                                   *(int *)(*(int *)(iVar36 + 0x44) + 0x14);
        *(byte **)(*(int *)(*(int *)(iVar36 + 0x44) + 0x10) + 8) = pbVar34;
        *(byte **)(*(int *)(iVar36 + 0x44) + 0x10) = pbVar34 + 0x44;
    }
    iVar26 = *(int *)(local_9fc + -0x4f0);
    *(int *)(*(int *)(iVar26 + 0x44) + 0xc) =
        *(int *)(*(int *)(iVar26 + 0x44) + 0xc) + 1;
    iVar27 = (uVar33 & (*(int **)(iVar26 + 0x44))[1] - 1U) * 0xc;
    iVar36 = **(int **)(iVar26 + 0x44) + iVar27;
    *(int *)(iVar36 + 4) = *(int *)(iVar36 + 4) + 1;
    uVar10 = *(undefined4 *)(**(int **)(iVar26 + 0x44) + iVar27);
    pbVar34[0x50] = 0;
    pbVar34[0x51] = 0;
    pbVar34[0x52] = 0;
    pbVar34[0x53] = 0;
    *(undefined4 *)(pbVar34 + 0x54) = uVar10;
    piVar20 = *(int **)(iVar26 + 0x44);
    if (*(int *)(*piVar20 + iVar27) != 0) {
        *(byte **)(*(int *)(*piVar20 + iVar27) + 0xc) = pbVar34 + 0x44;
        piVar20 = *(int **)(iVar26 + 0x44);
    }
    *(byte **)(*piVar20 + iVar27) = pbVar34 + 0x44;
    iVar27 = **(int **)(iVar26 + 0x44) + iVar27;
    if ((*(int *)(iVar27 + 8) * 10 + 10U <= *(uint *)(iVar27 + 4)) &&
        (*(int *)(*(int *)(pbVar34 + 0x44) + 0x24) != 1)) {
        pvVar12 = calloc(*(int *)(*(int *)(pbVar34 + 0x44) + 4) * 0x18, 1);
        if (pvVar12 == (void *)0x0) {
        LAB_00013d20:
            /* WARNING: Subroutine does not return */
            exit(-1);
        }
        iVar36 = *(int *)(pbVar34 + 0x44);
        local_a00 = (byte *)0x0;
        *(uint *)(iVar36 + 0x18) =
            (uint)((*(int *)(iVar36 + 4) * 2 - 1U & *(uint *)(iVar36 + 0xc)) !=
                   0) +
            (*(uint *)(iVar36 + 0xc) >> (*(int *)(iVar36 + 8) + 1U & 0xff));
        *(undefined4 *)(*(int *)(pbVar34 + 0x44) + 0x1c) = 0;
        puVar32 = *(undefined4 **)(pbVar34 + 0x44);
        for (; local_a00 < (byte *)puVar32[1]; local_a00 = local_a00 + 1) {
            iVar36 = *(int *)((int)*puVar32 + (int)local_a00 * 0xc);
            piVar20 = local_9f8;
            while (iVar36 != 0) {
                iVar28 = *(int *)(iVar36 + 0x10);
                uVar33 = puVar32[1] * 2 - 1U & *(uint *)(iVar36 + 0x1c);
                local_9f8 = (int *)((int)pvVar12 + uVar33 * 0xc);
                iVar27 = local_9f8[1];
                local_9f8[1] = iVar27 + 1U;
                iVar26 = *(int *)(pbVar34 + 0x44);
                if (*(uint *)(iVar26 + 0x18) < iVar27 + 1U) {
                    *(int *)(iVar26 + 0x1c) = *(int *)(iVar26 + 0x1c) + 1;
                    iVar26 = FUN_000498d8(
                        local_9f8[1],
                        *(undefined4 *)(*(int *)(pbVar34 + 0x44) + 0x18));
                    local_9f8[2] = iVar26;
                    piVar20 = local_9f8;
                }
                local_9f8 = piVar20;
                *(undefined4 *)(iVar36 + 0xc) = 0;
                *(undefined4 *)(iVar36 + 0x10) =
                    *(undefined4 *)((int)pvVar12 + uVar33 * 0xc);
                iVar26 = *(int *)((int)pvVar12 + uVar33 * 0xc);
                if (iVar26 != 0) {
                    *(int *)(iVar26 + 0xc) = iVar36;
                }
                *(int *)((int)pvVar12 + uVar33 * 0xc) = iVar36;
                puVar32 = *(undefined4 **)(pbVar34 + 0x44);
                iVar36 = iVar28;
                piVar20 = local_9f8;
            }
            local_9f8 = piVar20;
        }
        free((void *)*puVar32);
        *(int *)(*(int *)(pbVar34 + 0x44) + 4) =
            *(int *)(*(int *)(pbVar34 + 0x44) + 4) << 1;
        *(int *)(*(int *)(pbVar34 + 0x44) + 8) =
            *(int *)(*(int *)(pbVar34 + 0x44) + 8) + 1;
        **(undefined4 **)(pbVar34 + 0x44) = pvVar12;
        iVar36 = *(int *)(pbVar34 + 0x44);
        if (*(uint *)(iVar36 + 0xc) >> 1 < *(uint *)(iVar36 + 0x1c)) {
            iVar26 = *(int *)(iVar36 + 0x20) + 1;
        } else {
            iVar26 = 0;
        }
        *(int *)(iVar36 + 0x20) = iVar26;
        if (1 < *(uint *)(*(int *)(pbVar34 + 0x44) + 0x20)) {
            *(undefined4 *)(*(int *)(pbVar34 + 0x44) + 0x24) = 1;
        }
    }
    strcpy(&DAT_00073324, (char *)pbVar34);
    DAT_000767c0 = &DAT_000767c0;
    DAT_000767c4 = &DAT_000767c0;
    FUN_000409f8(&DAT_00067fe0,
                 "Options for both config file and command line");
    FUN_000409f8(&DAT_00068760, "Options for command line only");
    FUN_00040acc(&local_9ec, local_9f4, &DAT_0002aa90);
    if (local_9ec != 1) {
        local_838 = (code *)0x78656e55;
        local_834._0_1_ = 'p';
        local_834._1_1_ = 'e';
        local_834._2_1_ = 'c';
        local_834._3_1_ = 't';
        builtin_strncpy(acStack_830, "ed extra", 8);
        local_828 = (code *)0x6d6f6320;
        local_824._0_1_ = 'm';
        local_824._1_1_ = 'a';
        local_824._2_1_ = 'n';
        local_824._3_1_ = 'd';
        builtin_strncpy(local_820, "line arg", 8);
        local_818._0_1_ = 'u';
        local_818._1_1_ = 'm';
        local_818._2_1_ = 'e';
        local_818._3_1_ = 'n';
        puVar2 = &local_814;
        local_814 = CONCAT22(local_814._2_2_, 0x7374);
        goto LAB_00013890;
    }
    if (local_9f0[0x324] == '\0') {
        FUN_0002d8f0();
    }
    local_a00 = (byte *)&DAT_000766c0;
    if ((local_9f0[0x5a4] != '\0') || (DAT_000766c0 != 0)) {
        iVar36 = FUN_000324b8();
        puVar32 = (undefined4 *)FUN_000229bc(0xff, "cgminer.c", &DAT_0004ef8c,
                                             0x2e9b);
        *(undefined4 **)(iVar36 + 0xa4) = puVar32;
        if (*(int *)local_a00 == 0) {
            pcVar6 = "Benchmark";
        } else {
            pcVar6 = "Benchfile";
        }
        uVar10 = *(undefined4 *)(pcVar6 + 4);
        uVar1 = *(undefined2 *)(pcVar6 + 8);
        *puVar32 = *(undefined4 *)pcVar6;
        puVar32[1] = uVar10;
        *(undefined2 *)(puVar32 + 2) = uVar1;
        uVar10 = *(undefined4 *)(iVar36 + 0xa4);
        *(undefined4 *)(iVar36 + 0xac) = uVar10;
        *(undefined4 *)(iVar36 + 0xb0) = uVar10;
        *(undefined4 *)(iVar36 + 0xa8) = uVar10;
        *(undefined4 *)(iVar36 + 600) = uVar10;
        strncpy((char *)(iVar36 + 0x30), "?", 7);
        *(undefined1 *)(iVar36 + 0x37) = 0;
        if (*(int *)(iVar36 + 100) != 1) {
            FUN_0002b664(iVar36 + 100);
        }
        iVar26 = 0;
        *(undefined1 *)(iVar36 + 0x61) = 0;
        puVar29 = &DAT_00069bb0;
        DAT_00068bd6 = 1;
        puVar37 = &DAT_000691b0;
        do {
            FUN_00022cd8(
                puVar37,
                "000000029c6bf469abe4ad37605c097a860cff3cf5c1ef4377618f74000000"
                "000000000082b1514e7b6565941e5824f084292164ec5f97e7ea20c494bd96"
                "e524d478977b536dd2261900896c8b10020000000080000000000000000000"
                "00000000000000000000000000000000000000000000000000000000000000"
                "8002000064e4e3becc01064d808269b330f40f4de82dc92e894d635025daa3"
                "e2e2c410b4" +
                    iVar26);
            pcVar6 = "00000002c01f502cb3e9fdb053230ec12a4954c1021a6b35862b5e290"
                     "00000000000000084d1b83ae44057025e8c5b5756b44f04df5fffe4a7"
                     "a30e5c12d12a97a7a4c2ea536dce431900896cb6d60e0000000080000"
                     "000000000000000000000000000000000000000000000000000000000"
                     "0000000000000000000080020000d08f7e14c50dad77dc238b4db2901"
                     "a0578e657b1954779ab9cd82a73829edf7f" +
                     iVar26;
            iVar26 = iVar26 + 0x144;
            FUN_00022cd8(puVar29, pcVar6, 0xa0);
            puVar29 = puVar29 + 0xa0;
            puVar37 = puVar37 + 0xa0;
        } while (iVar26 != 0x1440);
        FUN_0002d950(0, &DAT_0006a950);
    }
    if (*(int *)(local_9f0 + 0x210) != 0) {
        FUN_0003fb54();
    }
    puVar37 = local_9f0;
    pcVar6 = *(char **)(local_9f0 + 0x200);
    if (pcVar6 == (char *)0x0) {
    LAB_00013928:
        iVar36 = *(int *)(local_9f0 + 0x208);
        if (iVar36 == 0) {
            local_9f4 = &DAT_00068bd4;
        } else {
        LAB_00013938:
            memset(abStack_938, 0, 0x100);
            pcVar6 = *(char **)(local_9f0 + 0x204);
            if (pcVar6 == (char *)0x0) {
                local_9f4 = &DAT_00068bd4;
                if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                    (2 < DAT_00067db4)) {
                    snprintf((char *)&local_838, 0x800, "Log work path: %s",
                             iVar36);
                    FUN_00020f58(3, &local_838, 0);
                }
            } else {
                if (*pcVar6 == '\0') {
                    pcVar6 = "Log work asic num empty";
                    ppcVar23 = &local_838;
                LAB_00013db4:
                    pcVar19 = *(code **)(pcVar6 + 4);
                    pcVar21 = *(code **)(pcVar6 + 8);
                    pcVar24 = *(code **)(pcVar6 + 0xc);
                    *ppcVar23 = *(code **)pcVar6;
                    ppcVar23[1] = pcVar19;
                    ppcVar23[2] = pcVar21;
                    ppcVar23[3] = pcVar24;
                    pcVar19 = *(code **)(pcVar6 + 0x14);
                    ppcVar23[4] = *(code **)(pcVar6 + 0x10);
                    ppcVar23[5] = pcVar19;
                    ppcVar23 = &local_838;
                    goto LAB_00013dd0;
                }
                lVar9 = strtol(pcVar6, (char **)0x0, 10);
                *(long *)(local_9fc + -0x260) = lVar9;
                if (lVar9 != 1 && (lVar9 - 0x20U & 0xffffffdf) != 0) {
                    local_838 = (code *)0x20676f4c;
                    local_834._0_1_ = 'w';
                    local_834._1_1_ = 'o';
                    local_834._2_1_ = 'r';
                    local_834._3_1_ = 'k';
                    builtin_strncpy(acStack_830, " asic nu", 8);
                    local_828 = (code *)0x756d206d;
                    local_824._0_1_ = 's';
                    local_824._1_1_ = 't';
                    local_824._2_1_ = ' ';
                    local_824._3_1_ = 'b';
                    builtin_strncpy(local_820, "e 1, 32,", 8);
                    local_818._0_1_ = ' ';
                    local_818._1_1_ = '6';
                    local_818._2_1_ = '4';
                    local_818._3_1_ = '\0';
                    FUN_00020f58(3, &local_838, 1);
                    /* WARNING: Subroutine does not return */
                    FUN_0002e6b0(1);
                }
                local_9f4 = &DAT_00068bd4;
                if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                    (2 < DAT_00067db4)) {
                    snprintf((char *)&local_838, 0x800,
                             "Log work path: %s Asic num: %s",
                             *(undefined4 *)(local_9f0 + 0x208),
                             *(undefined4 *)(local_9f0 + 0x204));
                    FUN_00020f58(3, &local_838, 0);
                }
            }
            sprintf((char *)abStack_938, "%s.txt",
                    *(undefined4 *)(local_9f0 + 0x208));
            pFVar5 = fopen64((char *)abStack_938, "a+");
            bVar40 = DAT_00074500 != '\0';
            *(FILE **)(local_9fc + -0x25c) = pFVar5;
            if (((bVar40) || (*local_9f4 != '\0')) || (2 < DAT_00067db4)) {
                snprintf((char *)&local_838, 0x800, "Log work open file %s",
                         abStack_938);
                FUN_00020f58(3, &local_838, 0);
            }
            pcVar6 = local_9fc;
            if (*(int *)(local_9fc + -0x260) == 1) {
                sprintf((char *)abStack_938, "%s%02d.txt",
                        *(undefined4 *)(local_9f0 + 0x208));
                pFVar5 = fopen64((char *)abStack_938, "a+");
                bVar40 = DAT_00074500 != '\0';
                *(FILE **)(local_9fc + -600) = pFVar5;
                if (((bVar40) || (*local_9f4 != '\0')) || (2 < DAT_00067db4)) {
                    snprintf((char *)&local_838, 0x800,
                             "Log work open asic %d file %s",
                             *(undefined4 *)(local_9fc + -0x260), abStack_938);
                    FUN_00020f58(3, &local_838, 0);
                }
            } else if ((*(int *)(local_9fc + -0x260) - 0x20U & 0xffffffdf) ==
                       0) {
                local_9f8 = (int *)&DAT_0005406c;
                for (iVar36 = 0;
                     iVar26 = *(int *)(pcVar6 + -0x260), iVar36 <= iVar26;
                     iVar36 = iVar36 + 1) {
                    sprintf((char *)abStack_938, "%s%02d_%02d.txt",
                            *(undefined4 *)(local_9f0 + 0x208), iVar26, iVar36);
                    pFVar5 = fopen64((char *)abStack_938, (char *)local_9f8);
                    cVar3 = DAT_00074500;
                    (&DAT_0006a978)[iVar36] = pFVar5;
                    if (((cVar3 != '\0') || (*local_9f4 != '\0')) ||
                        (2 < DAT_00067db4)) {
                        snprintf((char *)&local_838, 0x800,
                                 "Log work open asic %d file %s",
                                 *(undefined4 *)(pcVar6 + -0x260), abStack_938);
                        FUN_00020f58(3, &local_838, 0);
                    }
                }
            }
            if (local_9fc[-0x154] != '\0') {
                puVar32 = (undefined4 *)&DAT_0006aa7c;
                iVar36 = 0;
                local_9f8 = (int *)0x542b0;
                do {
                    sprintf((char *)abStack_938, "%s_diff_%02d.txt",
                            *(undefined4 *)(local_9f0 + 0x208), iVar36);
                    pFVar5 = fopen64((char *)abStack_938, "a+");
                    cVar3 = DAT_00074500;
                    puVar32 = puVar32 + 1;
                    *puVar32 = pFVar5;
                    if (((cVar3 != '\0') || (*local_9f4 != '\0')) ||
                        (2 < DAT_00067db4)) {
                        snprintf((char *)&local_838, 0x800, (char *)local_9f8,
                                 abStack_938);
                        FUN_00020f58(3, &local_838, 0);
                    }
                    iVar36 = iVar36 + 1;
                } while (iVar36 != 0x41);
            }
        }
        if ((DAT_00074500 == '\0') && (*local_9f4 == '\0'))
            goto LAB_000134e8;
    LAB_00013c54:
        snprintf((char *)&local_838, 0x800, "Started %s", &DAT_00068df4);
        FUN_00020f58(4, &local_838, 0);
        if (*(int *)(local_9f0 + 0x31c) != 0) {
            if ((DAT_00074500 == '\0') && (*local_9f4 == '\0'))
                goto LAB_00013504;
        LAB_00013518:
            snprintf((char *)&local_838, 0x800, "Loaded configuration file %s");
            FUN_00020f58(5, &local_838, 0);
            iVar36 = *(int *)(local_9f0 + 0x3f0);
            if (iVar36 == -1) {
                if (DAT_00074500 == '\0') {
                LAB_00013fb4:
                    if ((*local_9f4 != '\0') || (3 < DAT_00067db4))
                        goto LAB_00014048;
                    if (DAT_00074488 == '\0')
                        goto LAB_000135d0;
                LAB_00013fec:
                    if (3 < DAT_00067db4) {
                    LAB_00014000:
                        local_838 = (code *)0x72617453;
                        local_834._0_1_ = 't';
                        local_834._1_1_ = ' ';
                        local_834._2_1_ = 'c';
                        local_834._3_1_ = 'g';
                        builtin_strncpy(acStack_830, "miner wi", 8);
                        local_828 = (code *)0x2d206874;
                        local_824._0_1_ = 'T';
                        local_824._1_1_ = ' ';
                        local_824._2_1_ = 't';
                        local_824._3_1_ = 'o';
                        builtin_strncpy(local_820, " see wha", 8);
                        local_818._0_1_ = 't';
                        local_818._1_1_ = ' ';
                        local_818._2_1_ = 'f';
                        local_818._3_1_ = 'a';
                        local_814._0_1_ = 'i';
                        local_814._1_1_ = 'l';
                        local_814._2_1_ = 'e';
                        local_814._3_1_ = 'd';
                        local_810._0_1_ = ' ';
                        local_810._1_1_ = 't';
                        local_810._2_1_ = 'o';
                        local_810._3_1_ = ' ';
                        local_80a = 0x61;
                        uStack_80c = 0x6f6c;
                        local_808 = 0x2e;
                        FUN_00020f58(4, &local_838, 0);
                    }
                } else {
                LAB_00014048:
                    local_838 = (code *)0x6f727245;
                    local_834._0_1_ = 'r';
                    local_834._1_1_ = ' ';
                    local_834._2_1_ = 'i';
                    local_834._3_1_ = 'n';
                    builtin_strncpy(acStack_830, " configu", 8);
                    local_828 = (code *)0x69746172;
                    local_824._0_1_ = 'o';
                    local_824._1_1_ = 'n';
                    local_824._2_1_ = ' ';
                    local_824._3_1_ = 'f';
                    builtin_strncpy(local_820, "ile, par", 8);
                    local_818._0_1_ = 't';
                    local_818._1_1_ = 'i';
                    local_818._2_1_ = 'a';
                    local_818._3_1_ = 'l';
                    local_814._0_1_ = 'l';
                    local_814._1_1_ = 'y';
                    local_814._2_1_ = ' ';
                    local_814._3_1_ = 'l';
                    local_810._0_1_ = 'o';
                    local_810._1_1_ = 'a';
                    local_810._2_1_ = 'd';
                    local_810._3_1_ = 'e';
                    uStack_80c = 0x2e64;
                    local_80a = 0;
                    FUN_00020f58(4, &local_838, 0);
                    if (DAT_00074488 != '\0') {
                        if ((DAT_00074500 == '\0') && (*local_9f4 == '\0'))
                            goto LAB_00013fec;
                        goto LAB_00014000;
                    }
                }
            } else {
            LAB_0001354c:
                if (iVar36 == 0) {
                    if (((DAT_00074500 == '\0') && (*local_9f4 == '\0')) &&
                        (DAT_00067db4 < 4)) {
                    LAB_00013584:
                        if (DAT_00067db4 < 4)
                            goto LAB_000135d0;
                    } else {
                        local_838 = (code *)0x61746146;
                        local_834._0_1_ = 'l';
                        local_834._1_1_ = ' ';
                        local_834._2_1_ = 'J';
                        local_834._3_1_ = 'S';
                        builtin_strncpy(acStack_830, "ON error", 8);
                        local_828 = (code *)0x206e6920;
                        local_824._0_1_ = 'c';
                        local_824._1_1_ = 'o';
                        local_824._2_1_ = 'n';
                        local_824._3_1_ = 'f';
                        builtin_strncpy(local_820, "iguratio", 8);
                        local_818._0_1_ = 'n';
                        local_818._1_1_ = ' ';
                        local_818._2_1_ = 'f';
                        local_818._3_1_ = 'i';
                        local_814._0_1_ = 'l';
                        local_814._1_1_ = 'e';
                        local_814._2_1_ = '.';
                        local_814._3_1_ = '\0';
                        FUN_00020f58(4, &local_838, 0);
                        if ((DAT_00074500 == '\0') && (*local_9f4 == '\0'))
                            goto LAB_00013584;
                    }
                    local_838 = (code *)0x666e6f43;
                    local_834._0_1_ = 'i';
                    local_834._1_1_ = 'g';
                    local_834._2_1_ = 'u';
                    local_834._3_1_ = 'r';
                    builtin_strncpy(acStack_830, "ation fi", 8);
                    local_828 = (code *)0x6320656c;
                    local_824._0_1_ = 'o';
                    local_824._1_1_ = 'u';
                    local_824._2_1_ = 'l';
                    local_824._3_1_ = 'd';
                    builtin_strncpy(local_820, " not be ", 8);
                    local_818._0_1_ = 'u';
                    local_818._1_1_ = 's';
                    local_818._2_1_ = 'e';
                    local_818._3_1_ = 'd';
                    /* WARNING: Ignoring partial resolution of indirect */
                    local_814._0_2_ = 0x2e;
                    FUN_00020f58(4, &local_838, 0);
                }
            }
        LAB_000135d0:
            puVar37 = local_9f0;
            free(*(void **)(local_9f0 + 0x31c));
            *(undefined4 *)(puVar37 + 0x31c) = 0;
        }
    } else {
        *(char *)local_a04 = '\x01';
        strcpy((char *)&DAT_00068ad4, pcVar6);
        if (*(char **)(puVar37 + 0x20c) != (char *)0x0) {
            strcpy((char *)&DAT_00068ab4, *(char **)(puVar37 + 0x20c));
        }
        if (((DAT_00074500 != '\0') ||
             (local_9f4 = &DAT_00068bd4, DAT_00068bd4 != '\0')) ||
            (2 < DAT_00067db4)) {
            snprintf((char *)&local_838, 0x800,
                     "Log file path: %s Open flag: %s", &DAT_00068ad4,
                     local_a0c);
            FUN_00020f58(3, &local_838, 0);
            goto LAB_00013928;
        }
        iVar36 = *(int *)(local_9f0 + 0x208);
        if (iVar36 != 0)
            goto LAB_00013938;
    LAB_000134e8:
        if (3 < DAT_00067db4)
            goto LAB_00013c54;
        if (*(int *)(local_9f0 + 0x31c) != 0) {
        LAB_00013504:
            if (4 < DAT_00067db4)
                goto LAB_00013518;
            iVar36 = *(int *)(local_9f0 + 0x3f0);
            if (iVar36 == -1)
                goto LAB_00013fb4;
            goto LAB_0001354c;
        }
    }
    pcVar6 = *local_a10;
    sVar7 = strlen(pcVar6);
    *(short *)(pcVar6 + sVar7) = (short)*local_a14;
    if (DAT_00073388 == '\0') {
        if (*local_9f4 != '\0')
            goto LAB_00013620;
        setlogmask(0x3f);
    } else {
        *local_9f4 = '\x01';
    LAB_00013620:
        setlogmask(0xff);
    }
    if (DAT_00068754 < 0) {
        DAT_00068754 = 0x3c;
    }
    local_9fc[-0xffffffff0000004c] = '\b';
    local_9fc[-0xffffffff0000004b] = '\0';
    local_9fc[-0xffffffff0000004a] = '\0';
    local_9fc[-0xffffffff00000049] = '\0';
    local_a04 = &DAT_00075598;
    DAT_00075598 = FUN_00022a44(8, 0x40, "cgminer.c", &DAT_0004ef8c, 0x2f3d);
    FUN_0003eca0(&DAT_00073268);
    FUN_0003eca0(&DAT_000731f0);
    FUN_0003eca0(&DAT_00073110);
    piVar20 = &DAT_00075588;
    local_9f8 = &DAT_00075588;
    FUN_0003eca0(&DAT_000689c8);
    (*DAT_00073274)(0);
    (*DAT_000731fc)(0);
    (*DAT_0007311c)(0);
    (*DAT_000689d4)(0);
    DAT_00075588 = 0;
    for (iVar36 = 0; iVar36 < DAT_000755c0; iVar36 = iVar36 + 1) {
        FUN_0003eee8(*(undefined4 *)(DAT_0007346c + iVar36 * 4));
    }
    if (DAT_000755c0 == 0) {
        local_838 = (code *)0x206c6c41;
        local_834._0_1_ = 'd';
        local_834._1_1_ = 'e';
        local_834._2_1_ = 'v';
        local_834._3_1_ = 'i';
        acStack_830[0] = 'c';
        acStack_830[1] = 'e';
        acStack_830[2] = 's';
        acStack_830[3] = ' ';
        acStack_830[4] = 'd';
        acStack_830[5] = 'i';
        acStack_830[6] = 's';
        acStack_830[7] = 'a';
        local_828 = (code *)0x64656c62;
        local_824._0_1_ = ',';
        local_824._1_1_ = ' ';
        local_824._2_1_ = 'c';
        local_824._3_1_ = 'a';
        local_820[0] = 'n';
        local_820[1] = 'n';
        local_820[2] = 'o';
        local_820[3] = 't';
        local_820[4] = ' ';
        local_820[5] = 'm';
        local_820[6] = 'i';
        local_820[7] = 'n';
        puVar2 = &local_818;
        local_818 = CONCAT22(local_818._2_2_, 0x2174);
    LAB_00013890:
        *(undefined1 *)((int)puVar2 + 2) = 0;
        FUN_00020f58(3, &local_838, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002e6b0(1, 0);
    }
    pcVar6 = *(char **)(local_9f0 + 0x3fc);
    *(int *)(local_9fc + -0x488) = DAT_000755c0;
    if (pcVar6 == (char *)0x0) {
        iVar27 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_0007680c);
        iVar26 = DAT_000755c0;
        iVar36 = DAT_0007346c;
        if (iVar27 == 0) {
            local_a14 = &DAT_0007346c;
            iVar27 = 0;
            while (iVar27 < iVar26) {
                iVar28 = *(int *)(iVar36 + iVar27 * 4);
                iVar27 = iVar27 + 1;
                if (*(int *)(iVar28 + 0xb8) == 0) {
                    *(undefined4 *)(iVar28 + 0xb8) = 0x5f;
                }
            }
            FUN_0002fb80(&DAT_0007680c, "load_temp_cutoffs", 0x548);
            goto LAB_00014214;
        }
        FUN_00030138("load_temp_cutoffs", 0x53f);
        ppcVar23 = (code **)&DAT_0007346c;
    LAB_00014ad0:
        pcVar19 = (code *)FUN_00030138("load_temp_cutoffs", 0x538);
    LAB_00014adc:
        iVar36 = close((int)pcVar19);
        if (iVar36 < 0) {
            perror("close - failed to close read end of pipe for --monitor");
            /* WARNING: Subroutine does not return */
            exit(1);
        }
    } else {
        piVar20 = (int *)0x0;
        uVar33 = 0;
        ppcVar23 = &DAT_00067ed8;
        pcVar6 = strtok(pcVar6, ",");
        while (pcVar6 != (char *)0x0) {
            if (DAT_000755c0 <= (int)piVar20) {
                local_838 = (code *)0x206f6f54;
                local_834._0_1_ = 'm';
                local_834._1_1_ = 'a';
                local_834._2_1_ = 'n';
                local_834._3_1_ = 'y';
                builtin_strncpy(acStack_830, " values ", 8);
                local_828 = (code *)0x73736170;
                local_824._0_1_ = 'e';
                local_824._1_1_ = 'd';
                local_824._2_1_ = ' ';
                local_824._3_1_ = 't';
                builtin_strncpy(local_820, "o set te", 8);
                local_818._0_1_ = 'm';
                local_818._1_1_ = 'p';
                local_818._2_1_ = ' ';
                local_818._3_1_ = 'c';
                local_814._0_1_ = 'u';
                local_814._1_1_ = 't';
                local_814._2_1_ = 'o';
                local_814._3_1_ = 'f';
                local_810 = CONCAT22(local_810._2_2_, 0x66);
                FUN_00020f58(3, &local_838, 1);
                /* WARNING: Subroutine does not return */
                FUN_0002e6b0(1);
            }
            uVar33 = strtol(pcVar6, (char **)0x0, 10);
            if (200 < uVar33) {
                local_838 = (code *)0x61766e49;
                local_834._0_1_ = 'l';
                local_834._1_1_ = 'i';
                local_834._2_1_ = 'd';
                local_834._3_1_ = ' ';
                acStack_830[0] = 'v';
                acStack_830[1] = 'a';
                acStack_830[2] = 'l';
                acStack_830[3] = 'u';
                acStack_830[4] = 'e';
                acStack_830[5] = ' ';
                acStack_830[6] = 'p';
                acStack_830[7] = 'a';
                pcVar6 = "ssed to set temp cutoff";
                ppcVar23 = &local_828;
                goto LAB_00013db4;
            }
            iVar36 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_0007680c);
            if (iVar36 != 0)
                goto LAB_00014ad0;
            *(uint *)(*(int *)(DAT_0007346c + (int)piVar20 * 4) + 0xb8) =
                uVar33;
            piVar13 =
                (int *)pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_0007680c);
            if (piVar13 != (int *)0x0) {
                piVar20 = __errno_location();
                snprintf((char *)&local_838, 0x800,
                         "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d",
                         *piVar20, "cgminer.c", "load_temp_cutoffs", 0x53a);
                ppcVar23 = &local_838;
                goto LAB_00013dd0;
            }
            piVar20 = (int *)((int)piVar20 + 1);
            local_a0c = piVar13;
            (*DAT_00067ed8)();
            pcVar6 = strtok((char *)local_a0c, ",");
        }
        if ((int)piVar20 < 2) {
            iVar27 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_0007680c);
            iVar26 = DAT_000755c0;
            iVar36 = DAT_0007346c;
            if (iVar27 != 0) {
                FUN_00030138("load_temp_cutoffs", 0x54f);
                goto LAB_00014b60;
            }
            local_a14 = &DAT_0007346c;
            for (; (int)piVar20 < iVar26; piVar20 = (int *)((int)piVar20 + 1)) {
                *(uint *)(*(int *)(iVar36 + (int)piVar20 * 4) + 0xb8) = uVar33;
            }
            FUN_0002fb80(&DAT_0007680c, "load_temp_cutoffs", 0x555);
        } else {
            local_a14 = &DAT_0007346c;
        }
    LAB_00014214:
        iVar36 = DAT_000755c0;
        iVar27 = *local_a14;
        for (iVar26 = 0; iVar26 < iVar36; iVar26 = iVar26 + 1) {
            *(undefined4 *)(*(int *)(iVar27 + iVar26 * 4) + 0x138) = 99999999;
        }
        piVar20 = &DAT_000733cc;
        if (DAT_000756b0 == '\0') {
            *(int *)(local_9fc + -0x284) =
                *(int *)(local_9fc + -0x284) + *(int *)(local_9fc + -0x488);
        }
        if (DAT_000733cc == 0) {
            if (((DAT_00074500 != '\0') || (*local_9f4 != '\0')) ||
                (3 < DAT_00067db4)) {
                local_838 = (code *)0x6465654e;
                local_834._0_1_ = ' ';
                local_834._1_1_ = 't';
                local_834._2_1_ = 'o';
                local_834._3_1_ = ' ';
                builtin_strncpy(acStack_830, "specify ", 8);
                local_828 = (code *)0x6c207461;
                local_824._0_1_ = 'e';
                local_824._1_1_ = 'a';
                local_824._2_1_ = 's';
                local_824._3_1_ = 't';
                builtin_strncpy(local_820, " one poo", 8);
                local_818._0_1_ = 'l';
                local_818._1_1_ = ' ';
                local_818._2_1_ = 's';
                local_818._3_1_ = 'e';
                local_814._0_1_ = 'r';
                local_814._1_1_ = 'v';
                local_814._2_1_ = 'e';
                local_814._3_1_ = 'r';
                local_810 = CONCAT22(local_810._2_2_, 0x2e);
                FUN_00020f58(4, &local_838, 0);
            }
            local_838 = (code *)0x6c6f6f50;
            local_834._0_1_ = ' ';
            local_834._1_1_ = 's';
            local_834._2_1_ = 'e';
            local_834._3_1_ = 't';
            builtin_strncpy(acStack_830, "up faile", 8);
            /* WARNING: Ignoring partial resolution of indirect */
            local_828._0_2_ = 100;
            FUN_00020f58(3, &local_838, 1);
            /* WARNING: Subroutine does not return */
            FUN_0002e6b0(1, 0);
        }
        local_a0c = &DAT_000744c8;
        local_a10 = (char **)0x518c4;
        for (iVar36 = 0; iVar36 < DAT_000733cc; iVar36 = iVar36 + 1) {
            iVar26 = ((undefined4 *)*local_a0c)[iVar36];
            *(undefined4 *)(iVar26 + 0x194) = 99999999;
            *(undefined4 *)(iVar26 + 0x1b8) = 99999999;
            if (*(int *)(iVar26 + 0xa8) == 0) {
                if (*(int *)(iVar26 + 0xb0) == 0) {
                    pvVar12 = calloc(1, 1);
                    *(void **)(iVar26 + 0xb0) = pvVar12;
                }
                if (*(char **)(iVar26 + 0xac) == (char *)0x0) {
                    snprintf((char *)&local_838, 0x800,
                             "No login credentials supplied for pool %u %s",
                             iVar36, *(undefined4 *)(iVar26 + 0xa4));
                    FUN_00020f58(3, &local_838, 1);
                    /* WARNING: Subroutine does not return */
                    FUN_0002e6b0(1, 0);
                }
                sVar7 = strlen(*(char **)(iVar26 + 0xac));
                sVar14 = strlen(*(char **)(iVar26 + 0xb0));
                sVar7 = sVar7 + sVar14 + 2;
                pcVar6 = (char *)FUN_000229bc(sVar7, local_a10, &DAT_0004ef8c,
                                              0x2fab);
                *(char **)(iVar26 + 0xa8) = pcVar6;
                snprintf(pcVar6, sVar7, "%s:%s", *(undefined4 *)(iVar26 + 0xac),
                         *(undefined4 *)(iVar26 + 0xb0));
            }
        }
        bVar40 = DAT_00074500 != '\0';
        *(undefined4 *)(local_9f0 + 0x488) = *(undefined4 *)*local_a0c;
        if (bVar40) {
            openlog("cgminer", 1, 8);
        }
        ppcVar23 = &local_838;
        if (*(int *)(local_9fc + -0x48) != 0) {
            iVar36 = pipe((int *)ppcVar23);
            if (iVar36 < 0) {
            LAB_00014b60:
                perror("pipe - failed to create pipe for --monitor");
                /* WARNING: Subroutine does not return */
                exit(1);
            }
            fflush(stderr);
            iVar36 = dup2(local_834, 2);
            if (iVar36 < 0) {
                perror("dup2 - failed to alias stderr to write end of pipe for "
                       "--monitor");
                /* WARNING: Subroutine does not return */
                exit(1);
            }
            iVar36 = close(local_834);
            if (iVar36 < 0) {
                perror(
                    "close - failed to close write end of pipe for --monitor");
                /* WARNING: Subroutine does not return */
                exit(1);
            }
            p_Var15 = signal(0xd, (__sighandler_t)0x1);
            p_Var16 = signal(0xd, (__sighandler_t)0x1);
            if (p_Var15 == (__sighandler_t)0xffffffff ||
                p_Var16 == (__sighandler_t)0xffffffff) {
                perror("signal - failed to edit signal mask for --monitor");
                /* WARNING: Subroutine does not return */
                exit(1);
            }
            _Var17 = fork();
            *(__pid_t *)(local_9f0 + 0x424) = _Var17;
            if (_Var17 < 0) {
                perror("fork - failed to fork child process for --monitor");
                /* WARNING: Subroutine does not return */
                exit(1);
            }
            pcVar19 = local_838;
            if (_Var17 == 0) {
                iVar36 = dup2((int)local_838, 0);
                if (iVar36 < 0) {
                    perror("dup2 - in child, failed to alias read end of pipe "
                           "to stdin for --monitor");
                    /* WARNING: Subroutine does not return */
                    exit(1);
                }
                close((int)local_838);
                execl("/bin/bash", "/bin/bash", &DAT_000545c8,
                      *(undefined4 *)(local_9fc + -0x48), 0);
                perror("execl - in child failed to exec user specified command "
                       "for --monitor");
                /* WARNING: Subroutine does not return */
                exit(1);
            }
            goto LAB_00014adc;
        }
    }
    local_a1c = &DAT_000744a4;
    iVar36 = FUN_00022a44(*local_9f8, 4, "cgminer.c", &DAT_0004ef8c, 0x2fbc);
    local_a10 = (char **)&DAT_000755c0;
    DAT_000744a4 = iVar36;
    for (iVar26 = 0; ppcVar35 = local_a10, iVar26 < *local_9f8;
         iVar26 = iVar26 + 1) {
        iVar27 = *local_a1c;
        iVar36 = FUN_00022a44(1, 0x40, "cgminer.c", &DAT_0004ef8c, 0x2fc0);
        *(int *)(iVar27 + iVar26 * 4) = iVar36;
    }
    local_a10 = (char **)0x0;
    local_a24 = &DAT_00068bd5;
    local_a20 = (int *)&DAT_00074500;
    local_a28 = piVar20;
    for (local_a18 = 0;
         piVar13 = local_a20, piVar20 = local_a28, local_a18 < (int)*ppcVar35;
         local_a18 = local_a18 + 1) {
        iVar27 = *(int *)(*local_a14 + local_a18 * 4);
        iVar36 = FUN_000229bc((*(int *)(iVar27 + 0x94) + 1) * 4, "cgminer.c",
                              &DAT_0004ef8c, 0x2fc9);
        *(int *)(iVar27 + 0x98) = iVar36;
        *(undefined4 *)(iVar36 + *(int *)(iVar27 + 0x94) * 4) = 0;
        *(undefined4 *)(iVar27 + 0x60) = 4;
        for (iVar26 = 0; ppcVar30 = (char **)((int)local_a10 + iVar26),
            iVar26 < *(int *)(iVar27 + 0x94);
             iVar26 = iVar26 + 1) {
            puVar32 = (undefined4 *)FUN_00031b04(ppcVar30);
            *puVar32 = ppcVar30;
            puVar32[9] = iVar27;
            puVar32[1] = iVar26;
            iVar36 = (**(code **)(*(int *)(iVar27 + 4) + 0x2c))();
            if (iVar36 != 0) {
                iVar36 = FUN_00025164(puVar32, 0, FUN_0002b500, puVar32);
                if (iVar36 != 0) {
                    snprintf((char *)ppcVar23, 0x800, "thread %d create failed",
                             *puVar32);
                    FUN_00020f58(3, ppcVar23, 1);
                    /* WARNING: Subroutine does not return */
                    FUN_0002e6b0(1, 0);
                }
                *(undefined4 **)(*(int *)(iVar27 + 0x98) + iVar26 * 4) =
                    puVar32;
                iVar36 = 0;
                if (*(int *)(iVar27 + 0x20) != 1) {
                    if ((*local_a24 != '\0') &&
                        ((((char)*local_a20 != '\0' || (*local_9f4 != '\0')) ||
                          (6 < DAT_00067db4)))) {
                        snprintf((char *)ppcVar23, 0x800,
                                 "Pushing sem post to thread %d", *puVar32);
                        FUN_00020f58(7, ppcVar23, 0);
                    }
                    iVar36 = FUN_000251ac(puVar32 + 4, "cgminer.c",
                                          &DAT_0004ef8c, 0x2fe5);
                }
            }
        }
        local_a10 = ppcVar30;
    }
    if ((local_9f0[0x5a4] == '\0') && (*(int *)local_a00 == 0)) {
        for (iVar26 = 0; iVar26 < *piVar20; iVar26 = iVar26 + 1) {
            iVar27 = *(int *)(*local_a0c + iVar26 * 4);
            iVar36 = iVar27 + 100;
            if (*(int *)(iVar27 + 100) != 1) {
                iVar36 = FUN_0002b664();
            }
            *(undefined1 *)(iVar27 + 0x61) = 1;
        }
        if ((((char)*piVar13 != '\0') || (*local_9f4 != '\0')) ||
            (4 < DAT_00067db4)) {
            *ppcVar23 = (code *)0x626f7250;
            ppcVar23[1] = (code *)0x20676e69;
            ppcVar23[2] = (code *)0x20726f66;
            ppcVar23[3] = (code *)0x61206e61;
            ppcVar23[4] = (code *)0x6576696c;
            ppcVar23[5] = (code *)0x6f6f7020;
            *(undefined2 *)(ppcVar23 + 6) = 0x6c;
            iVar36 = FUN_00020f58(5, ppcVar23, 0);
        }
        iVar26 = 0;
        FUN_0002b41c(iVar36);
        do {
            iVar26 = iVar26 + 1;
            sleep(1);
            pcVar6 = local_9f4;
            if (iVar26 == 0xb4) {
                bVar22 = 0;
            } else {
                bVar22 = (local_9f0[0x598] ^ 1) & 1;
            }
        } while (bVar22 != 0);
        bVar40 = false;
        local_a10 = ppcVar35;
        while (ppcVar35 = local_a10, local_9f0[0x598] == '\0') {
            if (bVar40) {
            LAB_000155fc:
                if (DAT_00074488 == '\0') {
                LAB_0001580c:
                    *ppcVar23 = (code *)0x73206f4e;
                    ppcVar23[1] = (code *)0x65767265;
                    ppcVar23[2] = (code *)0x63207372;
                    ppcVar23[3] = (code *)0x646c756f;
                    ppcVar23[4] = (code *)0x20656220;
                    ppcVar23[5] = (code *)0x64657375;
                    ppcVar23[6] = (code *)0x78452021;
                    ppcVar23[7] = (code *)0x6e697469;
                    *(undefined2 *)(ppcVar23 + 8) = 0x2e67;
                    *(undefined1 *)((int)ppcVar23 + 0x22) = 0;
                    FUN_00020f58(3, ppcVar23, 1);
                    /* WARNING: Subroutine does not return */
                    FUN_0002e6b0(0);
                }
            } else {
                if ((((char)*piVar13 == '\0') && (*pcVar6 == '\0')) &&
                    (DAT_00067db4 < 3)) {
                LAB_00015a1c:
                    if (2 < DAT_00067db4)
                        goto LAB_000158d8;
                LAB_00015a28:
                    if (2 < DAT_00067db4)
                        goto LAB_00015914;
                } else {
                    *ppcVar23 = (code *)0x73206f4e;
                    ppcVar23[1] = (code *)0x65767265;
                    ppcVar23[2] = (code *)0x77207372;
                    ppcVar23[3] = (code *)0x20657265;
                    ppcVar23[4] = (code *)0x6e756f66;
                    ppcVar23[5] = (code *)0x68742064;
                    ppcVar23[6] = (code *)0x63207461;
                    ppcVar23[7] = (code *)0x646c756f;
                    ppcVar23[8] = (code *)0x20656220;
                    ppcVar23[9] = (code *)0x64657375;
                    ppcVar23[10] = (code *)0x206f7420;
                    ppcVar23[0xb] = (code *)0x20746567;
                    ppcVar23[0xc] = (code *)0x6b726f77;
                    ppcVar23[0xd] = (code *)0x6f726620;
                    *(undefined2 *)(ppcVar23 + 0xe) = 0x2e6d;
                    *(undefined1 *)((int)ppcVar23 + 0x3a) = 0;
                    FUN_00020f58(3, ppcVar23, 0);
                    if (((char)*piVar13 == '\0') && (*pcVar6 == '\0'))
                        goto LAB_00015a1c;
                LAB_000158d8:
                    memcpy(ppcVar23,
                           "Please check the details from the list below of "
                           "the servers you have input",
                           0x4b);
                    FUN_00020f58(3, ppcVar23, 0);
                    if (((char)*piVar13 == '\0') && (*pcVar6 == '\0'))
                        goto LAB_00015a28;
                LAB_00015914:
                    memcpy(
                        ppcVar23,
                        "Most likely you have input the wrong URL, forgotten "
                        "to add a port, or have not set up workers",
                        0x5e);
                    FUN_00020f58(3, ppcVar23, 0);
                }
                for (iVar36 = 0; iVar36 < *piVar20; iVar36 = iVar36 + 1) {
                    iVar26 = *(int *)(*local_a0c + iVar36 * 4);
                    if ((((char)*piVar13 != '\0') || (*pcVar6 != '\0')) ||
                        (3 < DAT_00067db4)) {
                        snprintf((char *)ppcVar23, 0x800,
                                 "Pool: %d  URL: %s  User: %s  Password: %s",
                                 iVar36, *(undefined4 *)(iVar26 + 0xa4),
                                 *(undefined4 *)(iVar26 + 0xac),
                                 *(undefined4 *)(iVar26 + 0xb0));
                        FUN_00020f58(4, ppcVar23, 0);
                    }
                }
                if (DAT_00074488 == '\0')
                    goto LAB_0001580c;
                if ((((char)*piVar13 != '\0') || (*pcVar6 != '\0')) ||
                    (2 < DAT_00067db4)) {
                    memcpy(ppcVar23,
                           "Press any key to exit, or cgminer will wait "
                           "indefinitely for an alive pool.",
                           0x4c);
                    FUN_00020f58(3, ppcVar23, 0);
                    goto LAB_000155fc;
                }
            }
            bVar40 = true;
        }
    }
    DAT_000756a8._0_4_ = 0;
    DAT_000756a8._4_4_ = 0;
    puVar32 = &DAT_00069088;
    do {
        puVar18 = puVar32 + 2;
        *puVar32 = 0;
        puVar32[1] = 0;
        puVar32 = puVar18;
    } while (puVar18 != &DAT_000690e8);
    pcVar11 = *ppcVar35;
    iVar36 = *local_a14;
    *(undefined4 *)(local_9f0 + 0x510) = 0;
    for (pcVar6 = local_a08; (int)pcVar6 < (int)pcVar11; pcVar6 = pcVar6 + 1) {
        iVar26 = *(int *)(iVar36 + (int)pcVar6 * 4);
        *(undefined4 *)(iVar26 + 0x50) = 0;
        *(undefined4 *)(iVar26 + 0x54) = 0;
        *(undefined4 *)(iVar26 + 0x30) = 0;
        *(undefined4 *)(iVar26 + 0x34) = 0;
    }
    FUN_000239a4(&DAT_00069020);
    FUN_000239a4(&DAT_00069018);
    FUN_000239a4(&DAT_0006907c);
    FUN_0002c610(&DAT_00069028, 0x28);
    iVar26 = *local_a04;
    *(undefined4 *)(local_9f0 + 0x480) = 2;
    iVar36 = FUN_00025164(iVar26 + 0x80, 0, FUN_00034df4);
    if (iVar36 != 0) {
        *ppcVar23 = (code *)0x63746177;
        ppcVar23[1] = (code *)0x6f6f7068;
        ppcVar23[2] = (code *)0x6874206c;
        ppcVar23[3] = (code *)0x64616572;
        ppcVar23[4] = (code *)0x65726320;
        ppcVar23[5] = (code *)0x20657461;
        ppcVar23[6] = (code *)0x6c696166;
        *(undefined2 *)(ppcVar23 + 7) = 0x6465;
        *(undefined1 *)((int)ppcVar23 + 0x1e) = 0;
        FUN_00020f58(3, ppcVar23, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002e6b0(1, 0);
    }
    pthread_detach(*(pthread_t *)(iVar26 + 0x8c));
    iVar26 = *local_a04;
    *(undefined4 *)(local_9f0 + 0x484) = 3;
    iVar36 = FUN_00025164(iVar26 + 0xc0, 0, FUN_00038d3c, 0);
    if (iVar36 != 0) {
        *ppcVar23 = (code *)0x63746177;
        ppcVar23[1] = (code *)0x676f6468;
        ppcVar23[2] = (code *)0x72687420;
        ppcVar23[3] = (code *)0x20646165;
        ppcVar23[4] = (code *)0x61657263;
        ppcVar23[5] = (code *)0x66206574;
        ppcVar23[6] = (code *)0x656c6961;
        *(undefined2 *)(ppcVar23 + 7) = 100;
        FUN_00020f58(3, ppcVar23, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002e6b0(1, 0);
    }
    pthread_detach(*(pthread_t *)(iVar26 + 0xcc));
    iVar36 = *local_a04;
    *(undefined4 *)(local_9f0 + 0x3f4) = 5;
    iVar36 = FUN_00025164(iVar36 + 0x140, 0, FUN_0002c1a4);
    if (iVar36 != 0) {
        *ppcVar23 = (code *)0x20495041;
        ppcVar23[1] = (code *)0x65726874;
        ppcVar23[2] = (code *)0x63206461;
        ppcVar23[3] = (code *)0x74616572;
        ppcVar23[4] = (code *)0x61662065;
        ppcVar23[5] = (code *)0x64656c69;
        *(undefined1 *)(ppcVar23 + 6) = 0;
        FUN_00020f58(3, ppcVar23, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002e6b0(1, 0);
    }
    if (*(int *)(local_9fc + -0x4c) != 8) {
        snprintf((char *)ppcVar23, 0x800,
                 "incorrect total_control_threads (%d) should be 8");
        FUN_00020f58(3, ppcVar23, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002e6b0(1, 0);
    }
    iVar36 = nice(-10);
    if (((iVar36 == 0) && (DAT_00068bd5 != '\0')) &&
        (((char)*piVar13 != '\0' ||
          ((*local_9f4 != '\0' || (6 < DAT_00067db4)))))) {
        *ppcVar23 = (code *)0x62616e55;
        ppcVar23[1] = (code *)0x7420656c;
        ppcVar23[2] = (code *)0x6573206f;
        ppcVar23[3] = (code *)0x68742074;
        ppcVar23[4] = (code *)0x64616572;
        ppcVar23[5] = (code *)0x206f7420;
        ppcVar23[6] = (code *)0x68676968;
        ppcVar23[7] = (code *)0x69727020;
        ppcVar23[8] = (code *)0x7469726f;
        *(undefined2 *)(ppcVar23 + 9) = 0x79;
        FUN_00020f58(7, ppcVar23, 0);
    }
    pcVar6 = local_9fc;
    piVar4 = local_a0c;
    local_a08 = &DAT_000767f0;
    local_a04 = piVar13;
    local_9fc = &DAT_000755d4;
LAB_00014c54:
    if (*local_a08 != '\0') {
        if ((((char)*local_a04 != '\0') || (*local_9f4 != '\0')) ||
            (5 < DAT_00067db4)) {
            *ppcVar23 = (code *)0x6b726f57;
            ppcVar23[1] = (code *)0x64707520;
            ppcVar23[2] = (code *)0x20657461;
            ppcVar23[3] = (code *)0x7373656d;
            ppcVar23[4] = (code *)0x20656761;
            ppcVar23[5] = (code *)0x65636572;
            ppcVar23[6] = (code *)0x64657669;
            *(undefined1 *)(ppcVar23 + 7) = 0;
            FUN_00020f58(6, ppcVar23, 0);
        }
        FUN_000239a4(&DAT_00068fe0);
        iVar36 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_000744a8);
        if (iVar36 != 0) {
            piVar20 = __errno_location();
            uVar10 = 0x1583;
            pcVar11 = "signal_work_update";
            pcVar6 = "WTF RDLOCK ERROR ON LOCK! errno=%d in %s %s():%d";
            goto LAB_00015310;
        }
        iVar26 = *local_9f8;
        iVar27 = *local_a1c;
        for (iVar36 = 0; iVar36 < iVar26; iVar36 = iVar36 + 1) {
            *(undefined1 *)(*(int *)(iVar27 + iVar36 * 4) + 0x3f) = 1;
        }
        iVar36 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_000744a8);
        if (iVar36 != 0) {
            piVar20 = __errno_location();
            pcVar11 = "signal_work_update";
            uVar10 = 0x158a;
            pcVar6 = "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d";
            goto LAB_00015310;
        }
        (*DAT_00067ed8)();
    }
    __mutex = *(pthread_mutex_t **)(local_9f0 + 0x438);
    *local_a08 = '\0';
    iVar36 = pthread_mutex_lock(__mutex);
    puVar37 = local_9f0;
    if (iVar36 != 0) {
        piVar20 = __errno_location();
        uVar10 = 0x308b;
        pcVar6 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        goto LAB_00015304;
    }
    if ((*(int *)(local_9f0 + 0x514) != 0) &&
        (1 < *(int *)(*(int *)(*(int *)(local_9f0 + 0x514) + 0x158) + 0xc))) {
        pthread_cond_wait((pthread_cond_t *)&DAT_000744d0,
                          *(pthread_mutex_t **)(local_9f0 + 0x438));
        iVar36 = *(int *)(puVar37 + 0x514);
        if (iVar36 != 0) {
            iVar26 = *(int *)(*(int *)(iVar36 + 0x158) + 0xc);
            iVar36 =
                pthread_mutex_unlock(*(pthread_mutex_t **)(puVar37 + 0x438));
            if (iVar36 != 0)
                goto LAB_000152e4;
            (*DAT_00067ed8)();
            if (iVar26 < 2)
                goto LAB_00014cc8;
            local_9e8 = FUN_000355fc(0);
            if (local_9e8 != 0) {
                FUN_0002cea0(&local_9e8, "cgminer.c", &DAT_0004ef8c, 0x30a2);
            }
            goto LAB_00014c54;
        }
    }
    iVar36 = pthread_mutex_unlock(*(pthread_mutex_t **)(local_9f0 + 0x438));
    if (iVar36 == 0) {
        (*DAT_00067ed8)();
    LAB_00014cc8:
        if (local_9e8 != 0) {
            FUN_0002cea0(&local_9e8, "cgminer.c", &DAT_0004ef8c, 0x30aa);
        }
        local_a0c = (int *)0x548c8;
        local_9e8 = FUN_0002fd8c();
        pthread_mutex_lock((pthread_mutex_t *)&DAT_00069158);
    LAB_00014e60:
        puVar32 = (undefined4 *)FUN_00031ff4();
        if (*(int *)(local_9f0 + 0x3f8) == 4) {
            puVar32 = (undefined4 *)FUN_0002b6a8();
        } else if (*(int *)(local_9f0 + 0x3f8) == 3) {
            iVar26 = *piVar20;
            iVar36 = *piVar4;
            for (iVar27 = 0; iVar27 < iVar26; iVar27 = iVar27 + 1) {
                iVar28 = *(int *)(iVar36 + iVar27 * 4);
                if (*(int *)(iVar28 + 0x40) < *(int *)(iVar28 + 0x3c))
                    goto LAB_00014ed8;
            }
            for (iVar27 = 0; iVar27 < iVar26; iVar27 = iVar27 + 1) {
                *(undefined4 *)(*(int *)(iVar36 + iVar27 * 4) + 0x40) = 0;
            }
            iVar36 = *(int *)(pcVar6 + -0x44) + 1;
            if (iVar26 <= iVar36) {
                iVar36 = 0;
            }
            *(int *)(pcVar6 + -0x44) = iVar36;
        LAB_00014ed8:
            iVar36 = 0;
            while (true) {
                puVar18 = (undefined4 *)*piVar20;
                iVar26 = iVar36 + 1;
                if ((int)puVar18 <= iVar36)
                    break;
                iVar36 = *(int *)(*piVar4 + *(int *)(pcVar6 + -0x44) * 4);
                iVar27 = *(int *)(iVar36 + 0x40);
                *(int *)(iVar36 + 0x40) = iVar27 + 1;
                if (iVar27 < *(int *)(iVar36 + 0x3c)) {
                    if ((*(char *)(iVar36 + 0x61) == '\0') &&
                        (*(int *)(iVar36 + 100) == 1)) {
                        uVar41 = FUN_0002b684(iVar36);
                        puVar18 = (undefined4 *)((ulonglong)uVar41 >> 0x20);
                        if ((int)uVar41 == 0)
                            goto LAB_00015000;
                    }
                    if (*local_9fc != '\0') {
                        iVar36 = FUN_0002b7bc(0);
                        *(int *)(iVar36 + 0x40) = *(int *)(iVar36 + 0x40) + -1;
                    }
                }
                iVar28 = *(int *)(pcVar6 + -0x44);
                iVar27 = *piVar20;
                *(int *)(pcVar6 + -0x44) = iVar28 + 1;
                iVar36 = iVar26;
                if (iVar27 <= iVar28 + 1) {
                    pcVar6[-0xffffffff00000044] = '\0';
                    pcVar6[-0xffffffff00000043] = '\0';
                    pcVar6[-0xffffffff00000042] = '\0';
                    pcVar6[-0xffffffff00000041] = '\0';
                }
            }
            for (iVar36 = 0; iVar36 < *piVar20; iVar36 = iVar36 + 1) {
                puVar18 = (undefined4 *)FUN_0002b7bc(iVar36, puVar18);
                if ((*(char *)((int)puVar18 + 0x61) == '\0') &&
                    (puVar18[0x19] == 1)) {
                    uVar41 = FUN_0002b684();
                    puVar18 = (undefined4 *)((ulonglong)uVar41 >> 0x20);
                    if ((int)uVar41 == 0)
                        goto LAB_00015000;
                }
            }
        }
        puVar18 = puVar32;
        if (DAT_00068bd5 != '\0')
            goto LAB_00014d38;
        goto LAB_00014d90;
    }
LAB_000152e4:
    piVar20 = __errno_location();
    uVar10 = 0x3096;
    pcVar6 = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
LAB_00015304:
    pcVar11 = "main";
LAB_00015310:
    snprintf((char *)ppcVar23, 0x800, pcVar6, *piVar20, "cgminer.c", pcVar11,
             uVar10);
LAB_00013dd0:
    FUN_00020f58(3, ppcVar23, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
LAB_000127a8:
    pclose(pFVar5);
    uVar33 = 0;
    iVar36 = 0;
    pbVar31 = abStack_938;
    for (uVar25 = 1; sVar7 = strlen((char *)abStack_938), uVar25 <= sVar7;
         uVar25 = uVar25 + 1) {
        memset(acStack_9e4, 0, 0x20);
        ppuVar8 = __ctype_b_loc();
        if (((*ppuVar8)[*pbVar31] & 0x2000) != 0) {
            strncpy(acStack_9e4, (char *)(abStack_938 + uVar33),
                    (uVar25 - uVar33) - 1);
            lVar9 = strtol(acStack_9e4, (char **)0x0, 10);
            uVar33 = uVar25;
            if (((0 < lVar9) && (iVar36 = iVar36 + 1, DAT_00068bd5 != '\0')) &&
                ((DAT_00074500 != '\0' ||
                  ((DAT_00068bd4 != '\0' || (6 < DAT_00067db4)))))) {
                snprintf((char *)&local_838, 0x800, "Parsed proc id is: %d\n");
                FUN_00020f58(7, &local_838, 0);
            }
        }
        pbVar31 = pbVar31 + 1;
    }
    if (iVar36 != 0) {
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (2 < DAT_00067db4)) {
            local_a38 = pbVar34;
            snprintf((char *)&local_838, 0x800,
                     " %d instance of %s is  already Running on this machine",
                     iVar36);
            FUN_00020f58(3, &local_838, 0);
        }
        if (iVar36 != 1) {
            snprintf((char *)&local_838, 0x800,
                     "%s is forbidden to start twice, will exit immediately!",
                     *(undefined4 *)local_9f4);
            FUN_00020f58(3, &local_838, 1);
            /* WARNING: Subroutine does not return */
            FUN_0002e6b0(0xffffffff, 0);
        }
    }
    goto LAB_000129f0;
LAB_00015000:
    if (DAT_00068bd5 == '\0') {
    LAB_0001500c:
        iVar36 = FUN_0002b684(puVar18);
        if (iVar36 == 0)
            goto code_r0x0001501c;
    } else {
    LAB_00014d38:
        if ((((char)*local_a04 != '\0') || (*local_9f4 != '\0')) ||
            (6 < DAT_00067db4)) {
            snprintf((char *)ppcVar23, 0x800, (char *)local_a0c, *puVar18);
            FUN_00020f58(7, ppcVar23, 0);
        }
    LAB_00014d90:
        if ((*(char *)((int)puVar18 + 0x61) == '\0') && (puVar18[0x19] == 1))
            goto LAB_0001500c;
    }
    FUN_00034178(0);
    puVar32 = (undefined4 *)FUN_00031ff4();
    if (*(int *)(local_9f0 + 0x3f8) == 4) {
        puVar32 = (undefined4 *)FUN_0002b6a8();
    } else if (*(int *)(local_9f0 + 0x3f8) == 3) {
        puVar18 = (undefined4 *)*piVar20;
        iVar36 = *piVar4;
        for (iVar26 = 0; iVar26 < (int)puVar18; iVar26 = iVar26 + 1) {
            iVar27 = *(int *)(iVar36 + iVar26 * 4);
            if (*(int *)(iVar27 + 0x40) < *(int *)(iVar27 + 0x3c))
                goto LAB_000151a0;
        }
        for (iVar26 = 0; iVar26 < (int)puVar18; iVar26 = iVar26 + 1) {
            *(undefined4 *)(*(int *)(iVar36 + iVar26 * 4) + 0x40) = 0;
        }
        iVar36 = *(int *)(pcVar6 + -0x44) + 1;
        if ((int)puVar18 <= iVar36) {
            iVar36 = 0;
        }
        *(int *)(pcVar6 + -0x44) = iVar36;
    LAB_000151a0:
        iVar36 = 0;
        while (iVar26 = iVar36 + 1, iVar36 < *piVar20) {
            puVar18 = *(undefined4 **)(*piVar4 + *(int *)(pcVar6 + -0x44) * 4);
            iVar36 = puVar18[0x10];
            puVar18[0x10] = iVar36 + 1;
            if (iVar36 < (int)puVar18[0xf]) {
                if ((*(char *)((int)puVar18 + 0x61) == '\0') &&
                    (puVar18[0x19] == 1)) {
                    uVar41 = FUN_0002b684(puVar18);
                    puVar18 = (undefined4 *)((ulonglong)uVar41 >> 0x20);
                    if ((int)uVar41 == 0)
                        goto LAB_00015284;
                }
                if (*local_9fc != '\0') {
                    uVar41 = FUN_0002b7bc(0);
                    puVar18 = (undefined4 *)((ulonglong)uVar41 >> 0x20);
                    *(int *)((int)uVar41 + 0x40) =
                        *(int *)((int)uVar41 + 0x40) + -1;
                }
            }
            iVar28 = *(int *)(pcVar6 + -0x44);
            iVar27 = *piVar20;
            *(int *)(pcVar6 + -0x44) = iVar28 + 1;
            iVar36 = iVar26;
            if (iVar27 <= iVar28 + 1) {
                pcVar6[-0xffffffff00000044] = '\0';
                pcVar6[-0xffffffff00000043] = '\0';
                pcVar6[-0xffffffff00000042] = '\0';
                pcVar6[-0xffffffff00000041] = '\0';
            }
        }
        for (iVar36 = 0; iVar36 < *piVar20; iVar36 = iVar36 + 1) {
            puVar18 = (undefined4 *)FUN_0002b7bc(iVar36, puVar18);
            if ((*(char *)((int)puVar18 + 0x61) == '\0') &&
                (puVar18[0x19] == 1)) {
                uVar41 = FUN_0002b684();
                puVar18 = (undefined4 *)((ulonglong)uVar41 >> 0x20);
                if ((int)uVar41 == 0)
                    goto LAB_00015284;
            }
        }
    }
    puVar18 = puVar32;
    if (DAT_00068bd5 != '\0')
        goto LAB_00014de8;
LAB_00014e40:
    if ((*(char *)((int)puVar18 + 0x61) != '\0') || (puVar18[0x19] != 1))
        goto LAB_00014e58;
    goto LAB_00015294;
code_r0x0001501c:
    pthread_mutex_unlock((pthread_mutex_t *)&DAT_00069158);
    if (*(char *)(puVar18 + 0xa0) != '\0') {
        FUN_000360b0(puVar18, local_9e8);
        if ((DAT_00068bd5 != '\0') &&
            ((((char)*local_a04 != '\0' || (*local_9f4 != '\0')) ||
              (6 < DAT_00067db4)))) {
            *ppcVar23 = (code *)0x656e6547;
            ppcVar23[1] = (code *)0x65746172;
            ppcVar23[2] = (code *)0x74732064;
            ppcVar23[3] = (code *)0x75746172;
            ppcVar23[4] = (code *)0x6f77206d;
            *(undefined2 *)(ppcVar23 + 5) = 0x6b72;
            *(undefined1 *)((int)ppcVar23 + 0x16) = 0;
            FUN_00020f58(7, ppcVar23, 0);
        }
        FUN_0003d93c(local_9e8);
        local_9e8 = 0;
        pthread_mutex_unlock((pthread_mutex_t *)&DAT_00069158);
        goto LAB_00014c54;
    }
    pthread_mutex_unlock((pthread_mutex_t *)&DAT_00069158);
    iVar36 = local_9e8;
    local_a0c = *(int **)local_a00;
    if (local_a0c == (int *)0x0) {
        if (local_9f0[0x5a4] == '\0')
            goto LAB_00014c54;
        *(undefined8 *)(local_9e8 + 0x178) = 0x4040000000000000;
        iVar26 = local_9e8 + 400;
        FUN_000254e8(local_9e8 + 0xa0, &DAT_0006a950, 0x20, "cgminer.c",
                     "get_benchmark_work", 0x10a9);
        puVar32 = (undefined4 *)*piVar4;
        *(undefined1 *)(iVar36 + 0x11a) = 1;
        *(int **)(iVar36 + 0xf4) = local_a0c;
        *(undefined4 *)(iVar36 + 0x104) = *puVar32;
        FUN_000239a4(iVar26);
        FUN_000257f8(iVar36 + 0x198, iVar26);
        cVar3 = DAT_00068bd5;
        *(undefined1 *)(iVar36 + 0x1b8) = 0x42;
        if ((cVar3 == '\0') ||
            ((((char)*local_a04 == '\0' && (*local_9f4 == '\0')) &&
              (DAT_00067db4 < 7))))
            goto LAB_00015138;
        pcVar11 = "Generated benchmark work";
    } else {
        iVar26 = local_9e8 + 400;
        FUN_0002ea28(local_9e8);
        puVar32 = (undefined4 *)*piVar4;
        *(undefined1 *)(iVar36 + 0x11a) = 1;
        *(undefined4 *)(iVar36 + 0x104) = *puVar32;
        FUN_000239a4(iVar26);
        FUN_000257f8(iVar36 + 0x198, iVar26);
        *(undefined1 *)(iVar36 + 0x1b8) = 0x42;
        FUN_0002b1b0(0, iVar36);
        if ((DAT_00068bd5 == '\0') ||
            ((((char)*local_a04 == '\0' && (*local_9f4 == '\0')) &&
              (DAT_00067db4 < 7))))
            goto LAB_00015138;
        pcVar11 = "Generated benchfile work";
    }
    pcVar19 = *(code **)((int)pcVar11 + 4);
    pcVar21 = *(code **)((int)pcVar11 + 8);
    pcVar24 = *(code **)((int)pcVar11 + 0xc);
    *ppcVar23 = *(code **)pcVar11;
    ppcVar23[1] = pcVar19;
    ppcVar23[2] = pcVar21;
    ppcVar23[3] = pcVar24;
    pcVar19 = *(code **)((int)pcVar11 + 0x14);
    iVar36 = *(int *)((int)pcVar11 + 0x18);
    ppcVar23[4] = *(code **)((int)pcVar11 + 0x10);
    ppcVar23[5] = pcVar19;
    *(char *)(ppcVar23 + 6) = (char)iVar36;
    FUN_00020f58(7, ppcVar23, 0);
LAB_00015138:
    FUN_0003d93c(local_9e8);
    local_9e8 = 0;
    goto LAB_00014c54;
LAB_00015284:
    if (DAT_00068bd5 != '\0') {
    LAB_00014de8:
        if ((((char)*local_a04 != '\0') || (*local_9f4 != '\0')) ||
            (6 < DAT_00067db4)) {
            snprintf((char *)ppcVar23, 0x800, (char *)local_a0c, *puVar18);
            FUN_00020f58(7, ppcVar23, 0);
        }
        goto LAB_00014e40;
    }
LAB_00015294:
    iVar36 = FUN_0002b684(puVar18);
    if (iVar36 == 0)
        goto LAB_00014e60;
LAB_00014e58:
    FUN_00023b9c(0xb);
    goto LAB_00014e60;
}

void entry(undefined4 param_1)

{
    undefined4 in_stack_00000000;

    __libc_start_main(FUN_000125f8, in_stack_00000000, &stack0x00000004,
                      0x4a331, &DAT_0004a36d, param_1);
    /* WARNING: Subroutine does not return */
    abort();
}

/* WARNING: Removing unreachable block (ram,0x00015a84) */

void FUN_00015a70(void)

{
    __gmon_start__();
    return;
}

/* WARNING: Removing unreachable block (ram,0x00015aa8) */
/* WARNING: Removing unreachable block (ram,0x00015ab2) */

void FUN_00015a94(void)

{
    return;
}

/* WARNING: Removing unreachable block (ram,0x00015ad4) */
/* WARNING: Removing unreachable block (ram,0x00015ade) */

void FUN_00015ab8(void)

{
    return;
}

void _FINI_0(void)

{
    if (DAT_00068a78 == '\0') {
        FUN_00015a94();
        DAT_00068a78 = '\x01';
    }
    return;
}

undefined4 FUN_00015b00(uint *param_1, char *param_2)

{
    size_t sVar1;
    void *pvVar2;
    void *__dest;
    uint uVar3;
    size_t __size;
    int iVar4;
    float fVar5;

    sVar1 = strlen(param_2);
    __dest = (void *)param_1[2];
    iVar4 = (int)__dest - (int)param_1[1];
    uVar3 = iVar4 + 0xc + sVar1;
    if (*param_1 < uVar3) {
        __size = *param_1 + 0x20000;
        if (__size < uVar3) {
            fVar5 = (float)FixedToFP(uVar3, 0x20, 0x20, 0x10, 1, 0);
            __size = ((uint)(0.0 < fVar5) * (int)fVar5 + 2) * 0x10000;
        }
        pvVar2 = realloc((void *)param_1[1], __size);
        __dest = (void *)((int)pvVar2 + iVar4);
        *param_1 = __size;
        param_1[1] = (uint)pvVar2;
        param_1[2] = (uint)__dest;
    }
    memcpy(__dest, param_2, sVar1 + 1);
    param_1[2] = param_1[2] + sVar1;
    return 1;
}

void FUN_00015b94(int param_1, undefined4 param_2, undefined4 param_3,
                  int param_4)

{
    char *pcVar1;
    undefined1 *puVar2;

    puVar2 = *(undefined1 **)(param_1 + 4);
    if (param_4 == 0) {
        pcVar1 = "BYE";
        *(undefined1 **)(param_1 + 8) = puVar2;
    } else {
        pcVar1 = "{\"STATUS\":\"BYE\"";
        *(undefined1 **)(param_1 + 8) = puVar2;
    }
    *puVar2 = 0;
    *(undefined1 *)(param_1 + 0xd) = 0;
    FUN_00015b00(param_1, pcVar1);
    DAT_00068a7c = 1;
    DAT_00068a7d = 1;
    return;
}

void FUN_00015be0(int param_1, undefined4 param_2, undefined4 param_3,
                  int param_4)

{
    char *pcVar1;
    undefined1 *puVar2;

    puVar2 = *(undefined1 **)(param_1 + 4);
    if (param_4 == 0) {
        pcVar1 = "RESTART";
        *(undefined1 **)(param_1 + 8) = puVar2;
    } else {
        pcVar1 = "{\"STATUS\":\"RESTART\"";
        *(undefined1 **)(param_1 + 8) = puVar2;
    }
    *puVar2 = 0;
    *(undefined1 *)(param_1 + 0xd) = 0;
    FUN_00015b00(param_1, pcVar1);
    DAT_00068a7c = 1;
    DAT_00068a7e = 1;
    return;
}

byte *FUN_00015c2c(byte *param_1, int param_2)

{
    size_t sVar1;
    byte *pbVar2;
    byte *pbVar3;
    byte *pbVar4;
    byte bVar5;
    byte bVar6;
    int iVar7;
    char acStack_818[2048];

    bVar6 = *param_1;
    if (bVar6 != 0) {
        iVar7 = 0;
        pbVar3 = param_1;
        bVar5 = bVar6;
    LAB_00015c78:
        do {
            if (bVar5 == 0x3d) {
            LAB_00015c94:
                if (param_2 != 0) {
                LAB_00015c9c:
                    pbVar3 = pbVar3 + 1;
                    bVar5 = *pbVar3;
                    if (bVar5 == 0)
                        break;
                    goto LAB_00015c78;
                }
            LAB_00015c68:
                iVar7 = iVar7 + 1;
            } else {
                if (0x3d < bVar5) {
                    if (bVar5 != 0x5c) {
                        if (bVar5 != 0x7c)
                            goto LAB_00015c6c;
                        goto LAB_00015c94;
                    }
                    goto LAB_00015c68;
                }
                if (bVar5 == 0x22) {
                    if (param_2 != 0)
                        goto LAB_00015c68;
                } else if (bVar5 == 0x2c) {
                    if (param_2 == 0)
                        goto LAB_00015c68;
                    goto LAB_00015c9c;
                }
            }
        LAB_00015c6c:
            pbVar3 = pbVar3 + 1;
            bVar5 = *pbVar3;
        } while (bVar5 != 0);
        if (iVar7 != 0) {
            sVar1 = strlen((char *)param_1);
            sVar1 = sVar1 + iVar7 + 1;
            pbVar2 = (byte *)malloc(sVar1);
            pbVar3 = pbVar2;
            if (pbVar2 == (byte *)0x0) {
                snprintf(acStack_818, 0x800,
                         "Failed to malloc escape buf %d in %s %s():%d", sVar1,
                         "api.c", "escape_string", 0x344);
                FUN_00020f58(3, acStack_818, 1);
                FUN_0003eba0(1);
                bVar6 = *param_1;
            }
            do {
                if (bVar6 == 0) {
                    *pbVar3 = 0;
                    return pbVar2;
                }
                if (bVar6 == 0x3d) {
                LAB_00015d64:
                    pbVar4 = pbVar3 + 1;
                    if (param_2 == 0) {
                        pbVar4 = pbVar3 + 2;
                        *pbVar3 = 0x5c;
                        pbVar3 = pbVar3 + 1;
                    }
                    *pbVar3 = bVar6;
                } else if (bVar6 < 0x3e) {
                    if (bVar6 != 0x22) {
                        if (bVar6 != 0x2c)
                            goto LAB_00015d90;
                        goto LAB_00015d64;
                    }
                    pbVar4 = pbVar3 + 1;
                    if (param_2 != 0) {
                        pbVar4 = pbVar3 + 2;
                        *pbVar3 = 0x5c;
                        pbVar3 = pbVar3 + 1;
                    }
                    *pbVar3 = 0x22;
                } else if (bVar6 == 0x5c) {
                    pbVar4 = pbVar3 + 2;
                    *pbVar3 = 0x5c;
                    pbVar3[1] = 0x5c;
                } else {
                    if (bVar6 == 0x7c)
                        goto LAB_00015d64;
                LAB_00015d90:
                    *pbVar3 = bVar6;
                    pbVar4 = pbVar3 + 1;
                }
                param_1 = param_1 + 1;
                bVar6 = *param_1;
                pbVar3 = pbVar4;
            } while (true);
        }
    }
    return param_1;
}

void FUN_00015e08(undefined4 param_1, void *param_2, int param_3, char *param_4)

{
    void *__ptr;

    if (*param_4 == '\0') {
        if (param_3 == 0)
            goto LAB_00015e30;
        FUN_00015b00(param_1, &DAT_00051d10);
        __ptr = (void *)FUN_00015c2c(param_2, 1);
    } else {
        if (param_3 == 0) {
            *param_4 = '\0';
        LAB_00015e30:
            __ptr = (void *)FUN_00015c2c(param_2, param_3);
            FUN_00015b00(param_1, &DAT_0004a4a4);
            FUN_00015b00(param_1, __ptr);
            FUN_00015b00(param_1, &DAT_0004a4ac);
            goto joined_r0x00015e70;
        }
        FUN_00015b00(param_1, &DAT_0004a4a0);
        *param_4 = '\0';
        __ptr = (void *)FUN_00015c2c(param_2, 1);
    }
    FUN_00015b00(param_1, &DAT_00051dc0);
    FUN_00015b00(param_1, __ptr);
    FUN_00015b00(param_1, &DAT_0004ad7c);
joined_r0x00015e70:
    if (param_2 != __ptr) {
        free(__ptr);
        return;
    }
    return;
}

void FUN_00015f14(void)

{
    char acStack_808[2048];

    if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
        (4 < DAT_00067db4)) {
        snprintf(acStack_808, 0x800,
                 "<<<<<<<<<<<<<<<<<<<<exec %s start>>>>>>>>>>>>>>>>",
                 "pool_change");
        FUN_00020f58(5, acStack_808, 0);
    }
    FUN_0003fe74();
    if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
        (DAT_00067db4 < 5)) {
        return;
    }
    snprintf(acStack_808, 0x800,
             "<<<<<<<<<<<<<<<<<<<<exec %s end>>>>>>>>>>>>>>>>>>",
             "pool_change");
    FUN_00020f58(5, acStack_808, 0);
    return;
}

char FUN_00015ff8(sockaddr *param_1, undefined4 *param_2, byte *param_3)

{
    char *__host;
    __int32_t **pp_Var1;
    byte *pbVar2;
    byte *pbVar3;
    byte *pbVar4;
    char cVar5;
    byte *pbVar6;
    int iVar7;
    int local_50;
    int local_4c;
    int local_48;
    int local_44;
    char acStack_40[36];

    __host = (char *)malloc(0x2e);
    *param_2 = __host;
    getnameinfo(param_1, 0x80, __host, 0x2e, (char *)0x0, 0, 1);
    if (param_1->sa_family == 2) {
        sprintf(acStack_40, "::ffff:%s", *param_2);
        inet_pton(10, acStack_40, &local_50);
    } else {
        inet_pton(10, (char *)*param_2, &local_50);
    }
    pp_Var1 = __ctype_toupper_loc();
    *param_3 = (byte)(*pp_Var1)[0x52];
    cVar5 = DAT_000767bc;
    if (DAT_0006acc8 == 0) {
        if (DAT_000767bc == '\0') {
            iVar7 = strcmp((char *)*param_2, "127.0.0.1");
            if (iVar7 == 0) {
                cVar5 = '\x01';
            } else if (((local_50 == 0) && (local_4c == 0)) &&
                       (local_48 == 0)) {
                cVar5 = local_44 == 0x1000000;
            }
        }
        return cVar5;
    }
    if (0 < DAT_00068a84) {
        iVar7 = 0;
        pbVar6 = (byte *)(DAT_00068a80 + 0xf);
        do {
            pbVar4 = pbVar6 + -0x10;
            pbVar2 = (byte *)&local_50;
            pbVar3 = pbVar6;
            while (true) {
                pbVar3 = pbVar3 + 1;
                pbVar4 = pbVar4 + 1;
                if (*pbVar4 != (*pbVar2 & *pbVar3))
                    break;
                pbVar2 = pbVar2 + 1;
                if (pbVar4 == pbVar6) {
                    *param_3 = pbVar6[0x11];
                    return '\x01';
                }
            }
            iVar7 = iVar7 + 1;
            pbVar6 = pbVar6 + 0x24;
        } while (iVar7 != DAT_00068a84);
    }
    return '\0';
}

void FUN_000161a0(void)

{
    int iVar1;
    int iVar2;
    int *piVar3;
    char *pcVar4;
    time_t tVar5;
    time_t tVar6;
    size_t sVar7;
    char *__s;
    uint uVar8;
    int iVar9;
    long lVar10;
    ssize_t sVar11;
    uint uVar12;
    sockaddr *psVar13;
    uint __n;
    addrinfo *paVar14;
    char *pcVar15;
    int local_111c;
    char *local_1118;
    undefined1 uStack_10fd;
    socklen_t local_10fc;
    char *local_10f8;
    addrinfo *local_10f4;
    undefined4 local_10f0;
    char local_10ec[12];
    char acStack_10e0[12];
    char acStack_10d4[12];
    addrinfo aStack_10c8;
    sockaddr asStack_10a8[7];
    char acStack_1029[10];
    char acStack_101f[1015];
    undefined4 local_c28;
    undefined4 local_c24;
    undefined4 uStack_c20;
    undefined4 uStack_c1c;
    undefined4 local_c18;
    char local_828[28];
    undefined4 local_80c;
    undefined2 uStack_808;
    undefined1 local_806;

    pcVar4 = acStack_1029 + 1;
    builtin_strncpy(local_10ec, "bmminer-", 8);
    local_10ec[8] = 0;
    sprintf(acStack_10e0, "%d", DAT_00068804);
    memset(&aStack_10c8, 0, 0x20);
    iVar1 = getaddrinfo(DAT_00068810, acStack_10e0, &aStack_10c8, &local_10f4);
    if (iVar1 != 0) {
        builtin_strncpy(local_828, "Invalid API Multicast Addres", 0x1c);
        local_80c._0_2_ = 0x73;
        FUN_00020f58(3, local_828, 1);
        FUN_0003eba0(1);
    }
    paVar14 = local_10f4;
    if (local_10f4 == (addrinfo *)0x0) {
    LAB_0001636c:
        freeaddrinfo(local_10f4);
        paVar14 = (addrinfo *)0x0;
        iVar1 = -1;
        builtin_strncpy(local_828, "API mcast could not open soc", 0x1c);
        local_80c._0_1_ = 'k';
        local_80c._1_1_ = 'e';
        local_80c._2_1_ = 't';
        local_80c._3_1_ = '\0';
        FUN_00020f58(3, local_828, 1);
        FUN_0003eba0(1);
    } else {
        do {
            iVar1 = socket(local_10f4->ai_family, 2, 0);
            if (0 < iVar1)
                goto LAB_0001629c;
            paVar14 = paVar14->ai_next;
        } while (paVar14 != (addrinfo *)0x0);
        if (iVar1 == -1)
            goto LAB_0001636c;
    }
LAB_0001629c:
    local_10f0 = 1;
    iVar2 = setsockopt(iVar1, 1, 2, &local_10f0, 4);
    if (iVar2 < 0) {
        if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
            (DAT_00067db4 < 3))
            goto LAB_0001634c;
        piVar3 = __errno_location();
        pcVar4 = strerror(*piVar3);
        snprintf(local_828, 0x800,
                 "API mcast setsockopt SO_REUSEADDR failed (%s)%s", pcVar4,
                 " - API multicast listener will not be available");
    } else {
        tVar5 = time((time_t *)0x0);
        while (iVar2 = bind(iVar1, paVar14->ai_addr, paVar14->ai_addrlen),
               iVar2 < 0) {
            piVar3 = __errno_location();
            pcVar15 = strerror(*piVar3);
            tVar6 = time((time_t *)0x0);
            if (0x3d < tVar6 - tVar5) {
                if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                    (DAT_00067db4 < 3))
                    goto LAB_0001634c;
                snprintf(local_828, 0x800,
                         "API mcast bind to port %d failed (%s)%s",
                         DAT_00068804, pcVar15,
                         " - API multicast listener will not be available");
                goto LAB_00016338;
            }
            FUN_00023b9c(30000);
        }
        if (paVar14->ai_family == 2) {
            local_c24 = 0;
            local_c28 = *(undefined4 *)(paVar14->ai_addr->sa_data + 2);
            iVar2 = setsockopt(iVar1, 0, 0x23, &local_c28, 8);
        } else {
            if (paVar14->ai_family != 10)
                goto LAB_0001647c;
            psVar13 = paVar14->ai_addr;
            local_c28 = *(undefined4 *)(psVar13->sa_data + 6);
            local_c24 = *(undefined4 *)(psVar13->sa_data + 10);
            uStack_c20._0_2_ = psVar13[1].sa_family;
            uStack_c20._2_1_ = psVar13[1].sa_data[0];
            uStack_c20._3_1_ = psVar13[1].sa_data[1];
            uStack_c1c = *(undefined4 *)(psVar13[1].sa_data + 2);
            local_c18 = 0;
            iVar2 = setsockopt(iVar1, 0x29, 0x14, &local_c28, 0x14);
        }
        if (-1 < iVar2) {
        LAB_0001647c:
            local_1118 = (char *)&local_c28;
            freeaddrinfo(local_10f4);
            pcVar15 = DAT_0006880c;
            sVar7 = strlen(DAT_0006880c);
            __n = sVar7 + 9;
            __s = (char *)malloc(sVar7 + 10);
            if (__s == (char *)0x0) {
                builtin_strncpy(local_828, "Failed to malloc mcast expec",
                                0x1c);
                local_80c._0_1_ = 't';
                local_80c._1_1_ = '_';
                local_80c._2_1_ = 'c';
                local_80c._3_1_ = 'o';
                uStack_808 = 0x6564;
                local_806 = 0;
                FUN_00020f58(3, local_828, 1);
                FUN_0003eba0(1);
                pcVar15 = DAT_0006880c;
            }
            local_111c = -1;
            iVar2 = 0;
            snprintf(__s, sVar7 + 10, "%s%s-", local_10ec, pcVar15);
        LAB_00016558:
            do {
                do {
                    while (true) {
                        iVar2 = iVar2 + 1;
                        FUN_00023b9c(1000);
                        local_10fc = 0x80;
                        uVar8 = recvfrom(iVar1, pcVar4, 0x3ff, 0, asStack_10a8,
                                         &local_10fc);
                        if (-1 < (int)uVar8)
                            break;
                        if ((DAT_00068bd5 != '\0') &&
                            (((DAT_00074500 != '\0' ||
                               (DAT_00068bd4 != '\0')) ||
                              (6 < DAT_00067db4)))) {
                            piVar3 = __errno_location();
                            pcVar15 = strerror(*piVar3);
                            snprintf(local_828, 0x800,
                                     "API mcast failed count=%d (%s) (%d)",
                                     iVar2, pcVar15, iVar1);
                            FUN_00020f58(7, local_828, 0);
                        }
                    }
                    iVar9 =
                        FUN_00015ff8(asStack_10a8, &local_10f8, &uStack_10fd);
                    if ((DAT_00068bd5 != '\0') &&
                        (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                          (6 < DAT_00067db4)))) {
                        pcVar15 = "Ignored";
                        if (iVar9 != 0) {
                            pcVar15 = "Accepted";
                        }
                        snprintf(local_828, 0x800, "API mcast from %s - %s",
                                 local_10f8, pcVar15);
                        FUN_00020f58(7, local_828, 0);
                    }
                } while (iVar9 == 0);
                pcVar4[uVar8] = '\0';
                if (uVar8 == 0)
                    goto LAB_00016824;
                uVar12 = uVar8 - 1;
                if (pcVar4[uVar12] == '\n') {
                    pcVar4[uVar12] = '\0';
                    uVar8 = uVar12;
                }
                getnameinfo(asStack_10a8, local_10fc, (char *)0x0, 0,
                            acStack_10d4, 10, 1);
                if (DAT_00068bd5 != '\0')
                    goto LAB_00016858;
            } while ((uVar8 <= __n) ||
                     (iVar9 = memcmp(pcVar4, __s, __n), iVar9 != 0));
            goto LAB_000166b0;
        }
        if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
            (DAT_00067db4 < 3))
            goto LAB_0001634c;
        piVar3 = __errno_location();
        pcVar4 = strerror(*piVar3);
        snprintf(local_828, 0x800, "API mcast join failed (%s)%s", pcVar4,
                 " - API multicast listener will not be available");
    }
LAB_00016338:
    FUN_00020f58(3, local_828, 0);
LAB_0001634c:
    close(iVar1);
    return;
LAB_00016824:
    getnameinfo(asStack_10a8, local_10fc, (char *)0x0, 0, acStack_10d4, 10, 1);
    if (DAT_00068bd5 != '\0') {
    LAB_00016858:
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (6 < DAT_00067db4)) {
            snprintf(local_828, 0x800,
                     "API mcast request rep=%d (%s) from [%s]:%s", uVar8,
                     pcVar4, local_10f8, acStack_10d4);
            FUN_00020f58(7, local_828, 0);
        }
        if ((__n < uVar8) && (iVar9 = memcmp(pcVar4, __s, __n), iVar9 == 0)) {
        LAB_000166b0:
            pcVar15 = pcVar4 + __n;
            lVar10 = strtol(pcVar15, (char **)0x0, 10);
            if (0xfffe < lVar10 - 1U) {
                if ((DAT_00068bd5 != '\0') &&
                    (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                      (6 < DAT_00067db4)))) {
                    snprintf(local_828, 0x800,
                             "API mcast request ignored - invalid port (%s)",
                             pcVar15);
                    FUN_00020f58(7, local_828, 0);
                }
                goto LAB_00016558;
            }
            if ((DAT_00068bd5 != '\0') &&
                (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                  (6 < DAT_00067db4)))) {
                snprintf(local_828, 0x800, "API mcast request OK port %s=%d",
                         pcVar15, lVar10);
                FUN_00020f58(7, local_828, 0);
            }
            iVar9 = getaddrinfo(local_10f8, pcVar15, &aStack_10c8, &local_10f4);
            paVar14 = local_10f4;
            if (iVar9 == 0) {
                while ((paVar14 != (addrinfo *)0x0 &&
                        (local_111c = socket(local_10f4->ai_family, 2, 0),
                         iVar1 < 1))) {
                    paVar14 = paVar14->ai_next;
                }
                if (local_111c != -1) {
                    snprintf(local_1118, 0x400, "cgm-FTW-%d-%s", DAT_00068818,
                             DAT_00068808);
                    sVar7 = strlen(local_1118);
                    sVar11 = sendto(local_111c, local_1118, sVar7 + 1, 0,
                                    paVar14->ai_addr, paVar14->ai_addrlen);
                    freeaddrinfo(local_10f4);
                    if (sVar11 < 0) {
                        if ((DAT_00068bd5 != '\0') &&
                            (((DAT_00074500 != '\0' ||
                               (DAT_00068bd4 != '\0')) ||
                              (6 < DAT_00067db4)))) {
                            piVar3 = __errno_location();
                            pcVar15 = strerror(*piVar3);
                            snprintf(local_828, 0x800,
                                     "API mcast send reply failed (%s) (%d)",
                                     pcVar15, local_111c);
                            FUN_00020f58(7, local_828, 0);
                        }
                    } else if ((DAT_00068bd5 != '\0') &&
                               (((DAT_00074500 != '\0' ||
                                  (DAT_00068bd4 != '\0')) ||
                                 (6 < DAT_00067db4)))) {
                        snprintf(
                            local_828, 0x800,
                            "API mcast send reply (%s) succeeded (%d) (%d)",
                            local_1118, sVar11, local_111c);
                        FUN_00020f58(7, local_828, 0);
                    }
                    close(local_111c);
                    goto LAB_00016558;
                }
                freeaddrinfo(local_10f4);
                if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                    (DAT_00067db4 < 3))
                    goto LAB_00016558;
                pcVar15 = "API mcast could not open socket to client %s";
            } else {
                if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                    (DAT_00067db4 < 3))
                    goto LAB_00016558;
                pcVar15 = "Invalid client address %s";
            }
            snprintf(local_828, 0x800, pcVar15, local_10f8);
            FUN_00020f58(3, local_828, 0);
            goto LAB_00016558;
        }
        if ((DAT_00068bd5 != '\0') &&
            (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
              (6 < DAT_00067db4)))) {
            builtin_strncpy(local_828, "API mcast request was no goo", 0x1c);
            local_80c._0_2_ = 100;
            FUN_00020f58(7, local_828, 0);
        }
    }
    goto LAB_00016558;
}

void FUN_00016d60(int param_1)

{
    pthread_t __th;

    __th = pthread_self();
    pthread_detach(__th);
    pthread_setcanceltype(1, (int *)0x0);
    FUN_000250a8("APIMcast");
    FUN_000161a0();
    *(undefined4 *)(param_1 + 0xc) = 0;
    return;
}

void FUN_00016d98(int param_1, int param_2)

{
    if (*(char *)(param_1 + 0xd) == '\0') {
        if (param_2 == 0) {
            return;
        }
    } else {
        FUN_00015b00(param_1, "]");
        *(undefined1 *)(param_1 + 0xd) = 0;
        if (param_2 == 0) {
            return;
        }
    }
    FUN_00015b00(param_1, &DAT_0004a7fc);
    FUN_00015b00(param_1, "]");
    return;
}

void FUN_00016dfc(int *param_1, char *param_2)

{
    size_t sVar1;
    undefined4 *puVar2;
    void *__ptr;
    int iVar3;
    int iVar4;
    char acStack_820[2048];

    puVar2 = (undefined4 *)*param_1;
    sVar1 = strlen(param_2);
    iVar3 = puVar2[1];
    __ptr = (void *)*puVar2;
    if ((uint)puVar2[2] < iVar3 + 1 + sVar1) {
        iVar4 = (sVar1 + 0x1001) - (sVar1 + 1 & 0xfff);
        __ptr = realloc(__ptr, puVar2[2] + iVar4);
        *(void **)*param_1 = __ptr;
        if (__ptr == (void *)0x0) {
            snprintf(acStack_820, 0x800,
                     "OOM buf siz=%d tot=%d ext=%d in %s %s():%d", sVar1,
                     *(undefined4 *)(*param_1 + 8), iVar4, "api.c",
                     "add_item_buf", 0x498);
            FUN_00020f58(3, acStack_820, 1);
            FUN_0003eba0(1);
        }
        *(int *)(*param_1 + 8) = *(int *)(*param_1 + 8) + iVar4;
    }
    memcpy((void *)((int)__ptr + iVar3), param_2, sVar1 + 1);
    *(size_t *)(*param_1 + 4) = *(int *)(*param_1 + 4) + sVar1;
    return;
}

void FUN_00016f14(char *param_1, int param_2, uint param_3, int param_4)

{
    size_t sVar1;
    int iVar2;
    size_t sVar3;
    int *piVar4;
    char *pcVar5;
    size_t sVar6;
    uint uVar7;
    undefined2 *puVar8;
    uint uVar9;
    __suseconds_t *p_Var10;
    int iVar11;
    int iVar12;
    timeval local_8b0;
    fd_set local_8a8;
    char acStack_828[2052];

    sVar1 = strlen(param_1);
    sVar6 = sVar1;
    if (param_2 != 0) {
        sVar6 = sVar1 + 1;
        (param_1 + sVar1)[0] = ']';
        (param_1 + sVar1)[1] = '\0';
    }
    if (param_4 != 0) {
        builtin_strncpy(param_1 + sVar6, ",\"id\":1}", 9);
        sVar6 = strlen(param_1);
    }
    sVar1 = sVar6 + 1;
    if ((DAT_00068bd5 != '\0') &&
        (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
          (6 < DAT_00067db4)))) {
        puVar8 = (undefined2 *)&DAT_0004d5c8;
        if (10 < sVar6) {
            puVar8 = &DAT_0004a834;
        }
        snprintf(acStack_828, 0x800, "API: send reply: (%d) \'%.10s%s\'", sVar1,
                 param_1, puVar8);
        FUN_00020f58(7, acStack_828, 0);
    }
    uVar9 = param_3 + 0x1f;
    if (-1 < (int)param_3) {
        uVar9 = param_3;
    }
    uVar7 = param_3 & 0x1f;
    if ((int)param_3 < 1) {
        uVar7 = -(-param_3 & 0x1f);
    }
    iVar11 = 0;
    iVar12 = 0;
    sVar6 = sVar1;
    while (true) {
        if ((int)sVar6 < 1 || 4 < iVar12) {
            return;
        }
        p_Var10 = &local_8b0.tv_usec;
        local_8b0.tv_sec = 0;
        local_8b0.tv_usec = 50000;
        do {
            p_Var10 = p_Var10 + 1;
            *p_Var10 = 0;
        } while (local_8a8.fds_bits + 0x1f != p_Var10);
        local_8a8.fds_bits[(int)uVar9 >> 5] =
            local_8a8.fds_bits[(int)uVar9 >> 5] | 1 << (uVar7 & 0xff);
        iVar2 = select(param_3 + 1, (fd_set *)0x0, &local_8a8, (fd_set *)0x0,
                       &local_8b0);
        if (iVar2 < 1) {
            if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                (DAT_00067db4 < 4)) {
                return;
            }
            snprintf(acStack_828, 0x800, "API: send select failed (%d)", iVar2);
            FUN_00020f58(4, acStack_828, 0);
            return;
        }
        sVar3 = send(param_3, param_1, sVar6, 0);
        iVar11 = iVar11 + 1;
        if ((int)sVar3 < 0)
            break;
        if (iVar11 == 1) {
            if (sVar6 != sVar3) {
                if ((DAT_00068bd5 != '\0') &&
                    (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                      (6 < DAT_00067db4)))) {
                    snprintf(acStack_828, 0x800, "API: sent %d of %d first go",
                             sVar3, sVar6);
                    FUN_00020f58(7, acStack_828, 0);
                }
                goto LAB_00017158;
            }
            if ((DAT_00068bd5 != '\0') &&
                (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                  (6 < DAT_00067db4)))) {
                snprintf(acStack_828, 0x800, "API: sent all of %d first go",
                         sVar6);
                FUN_00020f58(7, acStack_828, 0);
            }
        LAB_000172fc:
            sVar6 = sVar6 - sVar3;
            param_1 = param_1 + sVar3;
        } else if (sVar6 == sVar3) {
            if ((DAT_00068bd5 == '\0') ||
                (((DAT_00074500 == '\0' && (DAT_00068bd4 == '\0')) &&
                  (DAT_00067db4 < 7))))
                goto LAB_000172fc;
            snprintf(acStack_828, 0x800,
                     "API: sent all of remaining %d (sendc=%d)", sVar6, iVar11);
            sVar6 = sVar6 - sVar3;
            FUN_00020f58(7, acStack_828, 0);
            param_1 = param_1 + sVar3;
        } else {
            if ((DAT_00068bd5 != '\0') &&
                (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                  (6 < DAT_00067db4)))) {
                snprintf(acStack_828, 0x800,
                         "API: sent %d of remaining %d (sendc=%d)", sVar3,
                         sVar6, iVar11);
                FUN_00020f58(7, acStack_828, 0);
            }
        LAB_00017158:
            sVar6 = sVar6 - sVar3;
            param_1 = param_1 + sVar3;
            if (sVar3 == 0) {
            LAB_00017168:
                iVar12 = iVar12 + 1;
            }
        }
    }
    piVar4 = __errno_location();
    if (*piVar4 != 0xb) {
        if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
            (DAT_00067db4 < 4)) {
            return;
        }
        pcVar5 = strerror(*piVar4);
        snprintf(acStack_828, 0x800, "API: send (%d:%d) failed: %s", sVar1,
                 sVar1 - sVar6, pcVar5);
        FUN_00020f58(4, acStack_828, 0);
        return;
    }
    goto LAB_00017168;
}

void FUN_00017420(undefined4 *param_1, undefined4 *param_2)

{
    char cVar1;
    char *pcVar2;
    char *pcVar3;
    undefined1 *puVar4;

    pcVar2 = (char *)*param_1;
    cVar1 = *pcVar2;
    do {
        if (cVar1 == '\0') {
        LAB_00017488:
            puVar4 = (undefined1 *)*param_2;
            *param_2 = puVar4 + 1;
            *puVar4 = 0;
            return;
        }
        if (cVar1 == ',') {
            *param_1 = pcVar2 + 1;
            goto LAB_00017488;
        }
        if ((cVar1 == '\\') && (pcVar2[1] != '\0')) {
            pcVar2 = pcVar2 + 1;
        }
        *param_1 = pcVar2 + 1;
        pcVar3 = (char *)*param_2;
        *param_2 = pcVar3 + 1;
        *pcVar3 = *pcVar2;
        pcVar2 = (char *)*param_1;
        cVar1 = *pcVar2;
    } while (true);
}

undefined4 FUN_000174a0(char *param_1, undefined4 *param_2, undefined4 *param_3,
                        undefined4 *param_4)

{
    size_t sVar1;
    void *__ptr;
    undefined1 local_824[8];
    void *local_81c;
    char local_818[2048];

    sVar1 = strlen(param_1);
    __ptr = malloc(sVar1 + 1);
    local_81c = __ptr;
    if (__ptr == (void *)0x0) {
        builtin_strncpy(local_818, "Failed to malloc pooldetails buf", 0x20);
        local_818[0x20] = 0;
        FUN_00020f58(3, local_818, 1);
        FUN_0003eba0(1);
    }
    *param_2 = local_81c;
    FUN_00017420(local_824, &local_81c);
    if (*param_1 != '\0') {
        *param_3 = local_81c;
        FUN_00017420(local_824, &local_81c);
        if (*param_1 != '\0') {
            *param_4 = local_81c;
            FUN_00017420(local_824, &local_81c);
            return 1;
        }
    }
    free(__ptr);
    return 0;
}

void FUN_000175a0(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_810[2052];

    piVar1 = __errno_location();
    snprintf(acStack_810, 0x800,
             "WTF RDLOCK ERROR ON LOCK! errno=%d in %s %s():%d", *piVar1,
             "api.c", param_1, param_2);
    FUN_00020f58(3, acStack_810, 1);
    FUN_0003eba0(1);
    return;
}

void FUN_00017604(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_810[2052];

    piVar1 = __errno_location();
    snprintf(acStack_810, 0x800,
             "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar1,
             "api.c", param_1, param_2);
    FUN_00020f58(3, acStack_810, 1);
    FUN_0003eba0(1);
    return;
}

void FUN_00017668(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_810[2052];

    piVar1 = __errno_location();
    snprintf(acStack_810, 0x800,
             "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar1,
             "api.c", param_1, param_2);
    FUN_00020f58(3, acStack_810, 1);
    FUN_0003eba0(1);
    return;
}

void FUN_000176cc(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_810[2052];

    piVar1 = __errno_location();
    snprintf(acStack_810, 0x800,
             "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar1,
             "api.c", param_1, param_2);
    FUN_00020f58(3, acStack_810, 1);
    FUN_0003eba0(1);
    return;
}

int FUN_00017730(void)

{
    int iVar1;
    int iVar2;
    int *piVar3;
    int *piVar4;

    iVar1 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_0007680c);
    if (iVar1 != 0) {
        FUN_000175a0("numascs", 0x565);
    }
    if (DAT_000755c0 < 1) {
        iVar1 = 0;
    } else {
        iVar1 = 0;
        piVar3 = DAT_0007346c;
        do {
            piVar4 = piVar3 + 1;
            if ((**(int **)(*piVar3 + 4) == 2) ||
                (**(int **)(*piVar3 + 4) == 3)) {
                iVar1 = iVar1 + 1;
            }
            piVar3 = piVar4;
        } while (piVar4 != DAT_0007346c + DAT_000755c0);
    }
    iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_0007680c);
    if (iVar2 != 0) {
        FUN_000176cc("numascs", 0x56a);
    }
    (*DAT_00067ed8)();
    return iVar1;
}

int FUN_000177ec(int param_1)

{
    int iVar1;
    int *piVar2;
    int iVar3;

    iVar1 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_0007680c);
    if (iVar1 != 0) {
        FUN_000175a0("ascdevice", 0x573);
    }
    if (0 < DAT_000755c0) {
        iVar3 = 0;
        iVar1 = 0;
        piVar2 = (int *)(DAT_0007346c + -4);
        do {
            piVar2 = piVar2 + 1;
            if ((**(int **)(*piVar2 + 4) == 2) ||
                (**(int **)(*piVar2 + 4) == 3)) {
                iVar1 = iVar1 + 1;
            }
            if (iVar1 == param_1 + 1) {
                iVar1 =
                    pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_0007680c);
                if (iVar1 != 0) {
                    FUN_000176cc("ascdevice", 0x580);
                }
                (*DAT_00067ed8)();
                return iVar3;
            }
            iVar3 = iVar3 + 1;
        } while (DAT_000755c0 != iVar3);
    }
    iVar1 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_0007680c);
    if (iVar1 != 0) {
        FUN_000176cc("ascdevice", 0x57b);
    }
    (*DAT_00067ed8)();
    return -1;
}

void FUN_00017900(int *param_1)

{
    int *piVar1;
    int iVar2;
    int *__ptr;
    int *piVar3;

    iVar2 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00068a88);
    if (iVar2 != 0) {
        FUN_00017604("tidyup", 0x119e);
    }
    DAT_00068a7c = 1;
    if (*param_1 != -1) {
        shutdown(*param_1, 2);
        close(*param_1);
        *param_1 = -1;
    }
    if (DAT_00068a80 != (void *)0x0) {
        free(DAT_00068a80);
        DAT_00068a80 = (void *)0x0;
    }
    piVar1 = DAT_00068aa0;
    __ptr = DAT_00068aa0;
    if (DAT_00068aa0 != (int *)0x0) {
        do {
            piVar3 = (int *)__ptr[2];
            free(*(void **)(*__ptr + 4));
            free((void *)*__ptr);
            free(__ptr);
            __ptr = piVar3;
        } while (piVar1 != piVar3);
        DAT_00068aa0 = (int *)0x0;
    }
    iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00068a88);
    if (iVar2 != 0) {
        FUN_00017668("tidyup", 0x11b3);
    }
    (*DAT_00067ed8)();
    return;
}

undefined4 FUN_000179f4(void)

{
    int iVar1;
    int *piVar2;
    char local_808[2052];

    iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00068a88);
    if (iVar1 == 0) {
        iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00068a88);
    } else {
        piVar2 = __errno_location();
        snprintf(local_808, 0x800,
                 "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar2,
                 "api.c", "quit_thread", 0x12db);
        FUN_00020f58(3, local_808, 1);
        FUN_0003eba0(1);
        iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00068a88);
    }
    if (iVar1 != 0) {
        piVar2 = __errno_location();
        snprintf(local_808, 0x800,
                 "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar2,
                 "api.c", "quit_thread", 0x12dc);
        FUN_00020f58(3, local_808, 1);
        FUN_0003eba0(1);
    }
    (*DAT_00067ed8)();
    if ((DAT_00068bd5 != '\0') &&
        (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
          (6 < DAT_00067db4)))) {
        builtin_strncpy(local_808, "API: killing bmminer", 0x14);
        local_808[0x14] = 0;
        FUN_00020f58(7, local_808, 0);
    }
    FUN_0002e730();
    return 0;
}

undefined4 FUN_00017b7c(void)

{
    int iVar1;
    int *piVar2;
    char local_808[2052];

    iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00068a88);
    if (iVar1 == 0) {
        iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00068a88);
    } else {
        piVar2 = __errno_location();
        snprintf(local_808, 0x800,
                 "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar2,
                 "api.c", "restart_thread", 0x12e9);
        FUN_00020f58(3, local_808, 1);
        FUN_0003eba0(1);
        iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00068a88);
    }
    if (iVar1 != 0) {
        piVar2 = __errno_location();
        snprintf(local_808, 0x800,
                 "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar2,
                 "api.c", "restart_thread", 0x12ea);
        FUN_00020f58(3, local_808, 1);
        FUN_0003eba0(1);
    }
    (*DAT_00067ed8)();
    if ((DAT_00068bd5 != '\0') &&
        (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
          (6 < DAT_00067db4)))) {
        builtin_strncpy(local_808, "API: restarting bmminer", 0x18);
        FUN_00020f58(7, local_808, 0);
    }
    FUN_000319c4();
    return 0;
}

undefined4 FUN_00017d00(undefined4 param_1, undefined4 *param_2, int param_3,
                        int param_4)

{
    int iVar1;
    int iVar2;
    void *__ptr;
    char *pcVar3;
    float *pfVar4;
    undefined4 *__ptr_00;
    pthread_mutex_t *ppVar5;
    int *piVar6;
    void *local_874;
    char acStack_870[64];
    char acStack_830[2052];

    ppVar5 = *(pthread_mutex_t **)(DAT_00068aa4 + 8);
    iVar1 = pthread_mutex_lock(ppVar5);
    if (iVar1 == 0) {
        iVar1 = pthread_rwlock_wrlock((pthread_rwlock_t *)(ppVar5 + 1));
    } else {
        piVar6 = __errno_location();
        snprintf(acStack_830, 0x800,
                 "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar6,
                 "api.c", "print_data", 0x4a9);
        FUN_00020f58(3, acStack_830, 1);
        FUN_0003eba0(1);
        iVar1 = pthread_rwlock_wrlock((pthread_rwlock_t *)(ppVar5 + 1));
    }
    if (iVar1 != 0) {
        piVar6 = __errno_location();
        snprintf(acStack_830, 0x800,
                 "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d", *piVar6,
                 "api.c", "print_data", 0x4a9);
        FUN_00020f58(3, acStack_830, 1);
        FUN_0003eba0(1);
    }
    iVar1 = FUN_000203a8(DAT_00068aa4, "api.c", "print_data", 0x4aa);
    ppVar5 = *(pthread_mutex_t **)(DAT_00068aa4 + 8);
    iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)(ppVar5 + 1));
    if (iVar2 == 0) {
        iVar2 = pthread_mutex_unlock(ppVar5);
    } else {
        piVar6 = __errno_location();
        snprintf(acStack_830, 0x800,
                 "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar6,
                 "api.c", "print_data", 0x4ab);
        FUN_00020f58(3, acStack_830, 1);
        FUN_0003eba0(1);
        iVar2 = pthread_mutex_unlock(ppVar5);
    }
    if (iVar2 != 0) {
        piVar6 = __errno_location();
        snprintf(acStack_830, 0x800,
                 "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar6,
                 "api.c", "print_data", 0x4ab);
        FUN_00020f58(3, acStack_830, 1);
        FUN_0003eba0(1);
    }
    (*DAT_00067ed8)();
    piVar6 = (int *)(iVar1 + 0xc);
    *(undefined4 *)(*piVar6 + 4) = 0;
    if (param_4 != 0) {
        FUN_00016dfc(piVar6, &DAT_00051d10);
    }
    if (param_3 == 0) {
        if (param_2 != (undefined4 *)0x0) {
        LAB_00017de0:
            if (param_3 != 0)
                goto LAB_00017f18;
        LAB_00017e08:
            FUN_00016dfc(piVar6, param_2[1]);
            FUN_00016dfc(piVar6, &DAT_0004ab00);
            switch (*param_2) {
            case 0:
                local_874 = (void *)param_2[2];
                __ptr = (void *)FUN_00015c2c(local_874, 0);
                FUN_00016dfc(piVar6, __ptr);
                break;
            case 1:
            case 2:
                goto switchD_00017e28_caseD_1;
            case 3:
                goto switchD_00017e28_caseD_3;
            case 4:
                goto switchD_00017e28_caseD_4;
            case 5:
                goto switchD_00017e28_caseD_5;
            case 6:
                goto switchD_00017e28_caseD_6;
            case 7:
            case 8:
                goto switchD_00017e28_caseD_7;
            case 9:
                goto switchD_00017e28_caseD_9;
            case 10:
                goto switchD_00017e28_caseD_a;
            case 0xb:
                goto switchD_00017e28_caseD_b;
            case 0xc:
                goto switchD_00017e28_caseD_c;
            case 0xd:
                goto switchD_00017e28_caseD_d;
            case 0xe:
                goto switchD_00017e28_caseD_e;
            case 0xf:
                goto switchD_00017e28_caseD_f;
            case 0x10:
                goto switchD_00017e28_caseD_10;
            case 0x11:
            case 0x14:
            case 0x15:
                goto switchD_00017e28_caseD_11;
            case 0x12:
                goto switchD_00017e28_caseD_12;
            case 0x13:
                goto switchD_00017e28_caseD_13;
            case 0x16:
            case 0x1a:
                goto switchD_00017e28_caseD_16;
            case 0x17:
                goto switchD_00017e28_caseD_17;
            case 0x18:
                goto switchD_00017e28_caseD_18;
            case 0x19:
                goto switchD_00017e28_caseD_19;
            default:
                goto switchD_00017e28_default;
            }
        LAB_000184ac:
            __ptr_00 = param_2;
            if (local_874 != __ptr) {
                free(__ptr);
            }
        LAB_00017ec8:
            free((void *)__ptr_00[1]);
            if (*(char *)(__ptr_00 + 3) == '\0') {
                param_2 = (undefined4 *)__ptr_00[5];
            } else {
                free((void *)__ptr_00[2]);
                param_2 = (undefined4 *)__ptr_00[5];
            }
            if (param_2 == __ptr_00) {
                free(__ptr_00);
                if (param_3 == 0)
                    goto LAB_00017ffc;
                goto LAB_000180c0;
            }
            iVar2 = __ptr_00[4];
            param_2[4] = iVar2;
            *(undefined4 **)(iVar2 + 0x14) = param_2;
            free(__ptr_00);
            FUN_00016dfc(piVar6, &DAT_00051d10);
            if (param_3 == 0)
                goto LAB_00017e08;
        LAB_00017f18:
            FUN_00016dfc(piVar6, &DAT_00051dc0);
            FUN_00016dfc(piVar6, param_2[1]);
            FUN_00016dfc(piVar6, &DAT_00051dc0);
            FUN_00016dfc(piVar6, &DAT_0004d734);
            switch (*param_2) {
            case 0:
                goto switchD_00017f5c_caseD_0;
            case 1:
            case 2:
                if (param_3 != 0) {
                    FUN_00016dfc(piVar6, &DAT_00051dc0);
                    pcVar3 = (char *)param_2[2];
                    goto LAB_00018528;
                }
            switchD_00017e28_caseD_1:
                FUN_00016dfc(piVar6, param_2[2]);
                __ptr_00 = param_2;
                goto LAB_00017ec8;
            case 3:
            switchD_00017e28_caseD_3:
                snprintf(acStack_870, 0x40, "%u", (uint) * (byte *)param_2[2]);
                break;
            case 4:
            switchD_00017e28_caseD_4:
                snprintf(acStack_870, 0x40, "%d", (int)*(short *)param_2[2]);
                break;
            case 5:
            switchD_00017e28_caseD_5:
                snprintf(acStack_870, 0x40, "%u",
                         (uint) * (ushort *)param_2[2]);
                break;
            case 6:
            switchD_00017e28_caseD_6:
                snprintf(acStack_870, 0x40, "%d", *(undefined4 *)param_2[2]);
                break;
            case 7:
            case 8:
            switchD_00017e28_caseD_7:
                snprintf(acStack_870, 0x40, "%u", *(undefined4 *)param_2[2]);
                break;
            case 9:
                if (param_3 == 0) {
                switchD_00017e28_caseD_9:
                    snprintf(acStack_870, 0x40, "0x%08x",
                             *(undefined4 *)param_2[2]);
                    FUN_00016dfc(piVar6, acStack_870);
                    __ptr_00 = param_2;
                } else {
                    FUN_00016dfc(piVar6, &DAT_00051dc0);
                    snprintf(acStack_870, 0x40, "0x%08x",
                             *(undefined4 *)param_2[2]);
                    pcVar3 = acStack_870;
                LAB_00018528:
                    FUN_00016dfc(piVar6, pcVar3);
                    FUN_00016dfc(piVar6, &DAT_00051dc0);
                    __ptr_00 = param_2;
                }
                goto LAB_00017ec8;
            case 10:
            switchD_00017e28_caseD_a:
                snprintf(acStack_870, 0x40, "%llu", (undefined4 *)param_2[2],
                         *(undefined4 *)param_2[2]);
                break;
            case 0xb:
            switchD_00017e28_caseD_b:
                snprintf(acStack_870, 0x40, "%lld", (undefined4 *)param_2[2],
                         *(undefined4 *)param_2[2]);
                break;
            case 0xc:
            switchD_00017e28_caseD_c:
                snprintf(acStack_870, 0x40, "%f", (undefined8 *)param_2[2],
                         *(undefined8 *)param_2[2]);
                break;
            case 0xd:
            switchD_00017e28_caseD_d:
                snprintf(acStack_870, 0x40, "%.0f", (undefined8 *)param_2[2],
                         *(undefined8 *)param_2[2]);
                break;
            case 0xe:
            switchD_00017e28_caseD_e:
                pcVar3 = "false";
                if (*(char *)param_2[2] != '\0') {
                    pcVar3 = "true";
                }
                snprintf(acStack_870, 0x40, "%s", pcVar3);
                break;
            case 0xf:
            switchD_00017e28_caseD_f:
                snprintf(acStack_870, 0x40, "%ld.%06ld",
                         *(undefined4 *)param_2[2],
                         ((undefined4 *)param_2[2])[1]);
                break;
            case 0x10:
            switchD_00017e28_caseD_10:
                snprintf(acStack_870, 0x40, "%lu", *(undefined4 *)param_2[2]);
                break;
            case 0x11:
            case 0x14:
            case 0x15:
            switchD_00017e28_caseD_11:
                snprintf(acStack_870, 0x40, "%.2f", (undefined8 *)param_2[2],
                         *(undefined8 *)param_2[2]);
                break;
            case 0x12:
            switchD_00017e28_caseD_12:
                snprintf(acStack_870, 0x40, "%.4f", (undefined8 *)param_2[2],
                         *(undefined8 *)param_2[2]);
                break;
            case 0x13:
            switchD_00017e28_caseD_13:
                pfVar4 = (float *)param_2[2];
                pcVar3 = "%.2f";
                goto LAB_000181a4;
            case 0x16:
            case 0x1a:
            switchD_00017e28_caseD_16:
                pfVar4 = (float *)param_2[2];
                pcVar3 = "%.3f";
            LAB_000181a4:
                snprintf(acStack_870, 0x40, pcVar3, pfVar4, (double)*pfVar4);
                break;
            case 0x17:
            switchD_00017e28_caseD_17:
                snprintf(acStack_870, 0x40, "%.15f", (undefined8 *)param_2[2],
                         *(undefined8 *)param_2[2]);
                break;
            case 0x18:
            switchD_00017e28_caseD_18:
                snprintf(acStack_870, 0x40, "%.8f", (undefined8 *)param_2[2],
                         *(undefined8 *)param_2[2]);
                break;
            case 0x19:
            switchD_00017e28_caseD_19:
                snprintf(acStack_870, 0x40, "%.4f", (double *)param_2[2],
                         *(double *)param_2[2] * 100.0);
                break;
            default:
            switchD_00017e28_default:
                if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                    (2 < DAT_00067db4)) {
                    snprintf(acStack_830, 0x800,
                             "API: unknown2 data type %d ignored");
                    FUN_00020f58(3, acStack_830, 0);
                }
                if (param_3 != 0) {
                    FUN_00016dfc(piVar6, &DAT_00051dc0);
                    pcVar3 = "Unknown";
                    goto LAB_00018528;
                }
                FUN_00016dfc(piVar6, "Unknown");
                __ptr_00 = param_2;
                goto LAB_00017ec8;
            }
            FUN_00016dfc(piVar6, acStack_870);
            __ptr_00 = param_2;
            goto LAB_00017ec8;
        }
    LAB_00017ffc:
        FUN_00016dfc(piVar6, &DAT_0004a4ac);
    } else {
        FUN_00016dfc(piVar6, &DAT_0004a4a0);
        if (param_2 != (undefined4 *)0x0)
            goto LAB_00017de0;
    LAB_000180c0:
        FUN_00016dfc(piVar6, "}");
    }
    FUN_00015b00(param_1, **(undefined4 **)(iVar1 + 0xc));
    ppVar5 = *(pthread_mutex_t **)(DAT_00068aa4 + 8);
    iVar2 = pthread_mutex_lock(ppVar5);
    if (iVar2 == 0) {
        iVar2 = pthread_rwlock_wrlock((pthread_rwlock_t *)(ppVar5 + 1));
    } else {
        piVar6 = __errno_location();
        snprintf(acStack_830, 0x800,
                 "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar6,
                 "api.c", "print_data", 0x555);
        FUN_00020f58(3, acStack_830, 1);
        FUN_0003eba0(1);
        iVar2 = pthread_rwlock_wrlock((pthread_rwlock_t *)(ppVar5 + 1));
    }
    if (iVar2 != 0) {
        piVar6 = __errno_location();
        snprintf(acStack_830, 0x800,
                 "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d", *piVar6,
                 "api.c", "print_data", 0x555);
        FUN_00020f58(3, acStack_830, 1);
        FUN_0003eba0(1);
    }
    FUN_00020524(DAT_00068aa4, iVar1, "api.c", "print_data", 0x556);
    ppVar5 = *(pthread_mutex_t **)(DAT_00068aa4 + 8);
    iVar1 = pthread_rwlock_unlock((pthread_rwlock_t *)(ppVar5 + 1));
    if (iVar1 == 0) {
        iVar1 = pthread_mutex_unlock(ppVar5);
    } else {
        piVar6 = __errno_location();
        snprintf(acStack_830, 0x800,
                 "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar6,
                 "api.c", "print_data", 0x557);
        FUN_00020f58(3, acStack_830, 1);
        FUN_0003eba0(1);
        iVar1 = pthread_mutex_unlock(ppVar5);
    }
    if (iVar1 != 0) {
        piVar6 = __errno_location();
        snprintf(acStack_830, 0x800,
                 "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar6,
                 "api.c", "print_data", 0x557);
        FUN_00020f58(3, acStack_830, 1);
        FUN_0003eba0(1);
    }
    (*DAT_00067ed8)();
    return 0;
switchD_00017f5c_caseD_0:
    local_874 = (void *)param_2[2];
    __ptr = (void *)FUN_00015c2c(local_874, 1);
    FUN_00016dfc(piVar6, &DAT_00051dc0);
    FUN_00016dfc(piVar6, __ptr);
    FUN_00016dfc(piVar6, &DAT_00051dc0);
    goto LAB_000184ac;
}

undefined4 *FUN_00018850(undefined4 *param_1, undefined4 param_2,
                         undefined4 param_3, char *param_4, char param_5)

{
    char cVar1;
    undefined2 uVar2;
    undefined4 *puVar3;
    undefined4 *puVar4;
    undefined4 uVar5;
    undefined2 *puVar6;
    char *pcVar7;
    undefined4 *puVar8;
    size_t sVar9;
    void *__dest;
    undefined4 uVar10;
    int extraout_r3;
    int iVar11;
    char acStack_820[2052];

    puVar4 = (undefined4 *)malloc(0x18);
    uVar5 = __strdup(param_2);
    puVar4[1] = uVar5;
    puVar3 = puVar4;
    iVar11 = extraout_r3;
    if (param_1 != (undefined4 *)0x0) {
        iVar11 = param_1[4];
        puVar4[5] = param_1;
        param_1[4] = puVar4;
        puVar4[4] = iVar11;
        puVar3 = param_1;
    }
    *puVar4 = param_3;
    if (param_1 != (undefined4 *)0x0) {
        *(undefined4 **)(iVar11 + 0x14) = puVar4;
    } else {
        puVar4[4] = puVar4;
        puVar4[5] = puVar4;
    }
    *(char *)(puVar4 + 3) = param_5;
    if (param_4 == (char *)0x0) {
        *(undefined1 *)(puVar4 + 3) = 0;
        param_4 = "(null)";
        *puVar4 = 2;
    } else if (param_5 != '\0') {
        switch (param_3) {
        case 0:
        case 1:
        case 2:
            sVar9 = strlen(param_4);
            __dest = malloc(sVar9 + 1);
            puVar4[2] = __dest;
            memcpy(__dest, param_4, sVar9 + 1);
            return puVar3;
        case 3:
            pcVar7 = (char *)malloc(4);
            cVar1 = *param_4;
            puVar4[2] = pcVar7;
            *pcVar7 = cVar1;
            return puVar3;
        case 4:
        case 5:
            puVar6 = (undefined2 *)malloc(4);
            uVar2 = *(undefined2 *)param_4;
            puVar4[2] = puVar6;
            *puVar6 = uVar2;
            return puVar3;
        case 6:
        case 7:
        case 8:
        case 9:
        case 0x10:
            puVar8 = (undefined4 *)malloc(4);
            uVar5 = *(undefined4 *)param_4;
            puVar4[2] = puVar8;
            *puVar8 = uVar5;
            return puVar3;
        case 10:
        case 0xb:
            puVar8 = (undefined4 *)malloc(8);
            uVar5 = *(undefined4 *)param_4;
            uVar10 = *(undefined4 *)(param_4 + 4);
            puVar4[2] = puVar8;
            *puVar8 = uVar5;
            puVar8[1] = uVar10;
            return puVar3;
        case 0xc:
        case 0xd:
        case 0xf:
        case 0x11:
        case 0x12:
        case 0x14:
        case 0x15:
        case 0x17:
        case 0x18:
        case 0x19:
            puVar8 = (undefined4 *)malloc(8);
            uVar10 = *(undefined4 *)(param_4 + 4);
            uVar5 = *(undefined4 *)param_4;
            puVar4[2] = puVar8;
            *puVar8 = uVar5;
            puVar8[1] = uVar10;
            return puVar3;
        case 0xe:
            pcVar7 = (char *)malloc(1);
            cVar1 = *param_4;
            puVar4[2] = pcVar7;
            *pcVar7 = cVar1;
            return puVar3;
        case 0x13:
        case 0x16:
        case 0x1a:
            puVar8 = (undefined4 *)malloc(4);
            uVar5 = *(undefined4 *)param_4;
            puVar4[2] = puVar8;
            *puVar8 = uVar5;
            return puVar3;
        }
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (2 < DAT_00067db4)) {
            snprintf(acStack_820, 0x800, "API: unknown1 data type %d ignored",
                     param_3);
            FUN_00020f58(3, acStack_820, 0);
        }
        puVar4[2] = "Unknown";
        *puVar4 = 1;
        *(undefined1 *)(puVar4 + 3) = 0;
        return puVar3;
    }
    puVar4[2] = param_4;
    return puVar3;
}

void FUN_00018ad4(undefined4 param_1, int param_2, int param_3,
                  undefined4 param_4, char param_5)

{
    int *piVar1;
    int iVar2;
    undefined4 uVar3;
    int iVar4;
    undefined4 *puVar5;
    int iVar6;
    char *pcVar7;
    int local_202c;
    undefined1 local_2028;
    undefined1 local_2027;
    undefined4 local_2024;
    char acStack_2020[8196];

    local_202c = param_2;
    if (param_5 != '\0') {
        FUN_00015b00(param_1, "{\"STATUS\":[");
    }
    if (DAT_00067298 == 4) {
    LAB_00018b54:
        uVar3 = FUN_00018850(0, "STATUS", 1, &DAT_0004ab64, 0);
        uVar3 = FUN_00018850(uVar3, &DAT_0004ab44, 0x10, &DAT_00068aa8, 0);
        local_2024 = 0xffffffff;
        uVar3 = FUN_00018850(uVar3, &DAT_0004ab4c, 6, &local_2024, 0);
        sprintf(acStack_2020, "%d", local_202c);
    } else {
        if (DAT_0006729c == local_202c) {
            iVar2 = 0;
            iVar4 = DAT_00067298;
        } else {
            iVar2 = 0;
            puVar5 = &DAT_00067298;
            do {
                iVar4 = puVar5[4];
                iVar2 = iVar2 + 1;
                if (iVar4 == 4)
                    goto LAB_00018b54;
                piVar1 = puVar5 + 5;
                puVar5 = puVar5 + 4;
            } while (*piVar1 != local_202c);
        }
        if (iVar4 == 2) {
            local_2028 = 0x49;
        } else if (iVar4 == 3) {
            local_2028 = 0x53;
        } else {
            iVar6 = DAT_0006729c;
            if (iVar4 == 1) {
                iVar6 = 0x57;
            }
            local_2028 = (undefined1)iVar6;
            if (iVar4 != 1) {
                local_2028 = 0x45;
            }
        }
        local_2027 = 0;
        switch ((&DAT_000672a0)[iVar2 * 4]) {
        case 0:
        case 1:
        case 2:
        case 0xe:
            snprintf(acStack_2020, 0x1fff, (char *)(&DAT_000672a4)[iVar2 * 4],
                     param_3);
            break;
        default:
            strcpy(acStack_2020, (char *)(&DAT_000672a4)[iVar2 * 4]);
            break;
        case 4:
            iVar4 = FUN_00017730();
            snprintf(acStack_2020, 0x1fff, (char *)(&DAT_000672a4)[iVar2 * 4],
                     param_3, iVar4 + -1);
            break;
        case 5:
            snprintf(acStack_2020, 0x1fff, (char *)(&DAT_000672a4)[iVar2 * 4],
                     DAT_000733cc);
            break;
        case 6:
            snprintf(acStack_2020, 0x1fff, (char *)(&DAT_000672a4)[iVar2 * 4],
                     param_3, DAT_000733cc + -1);
            break;
        case 7:
            uVar3 = FUN_00017730();
            snprintf(acStack_2020, 0x1fff, (char *)(&DAT_000672a4)[iVar2 * 4],
                     uVar3);
            break;
        case 8:
            snprintf(acStack_2020, 0x1fff, (char *)(&DAT_000672a4)[iVar2 * 4],
                     "command");
            break;
        case 9:
            snprintf(
                acStack_2020, 0x1fff, (char *)(&DAT_000672a4)[iVar2 * 4],
                param_3,
                *(undefined4 *)(*(int *)(DAT_000744c8 + param_3 * 4) + 0xa4));
            break;
        case 10:
            snprintf(acStack_2020, 0x1fff, (char *)(&DAT_000672a4)[iVar2 * 4],
                     param_4);
            break;
        case 0xb:
            snprintf(acStack_2020, 0x1fff, (char *)(&DAT_000672a4)[iVar2 * 4],
                     param_3, param_4);
            break;
        case 0xc:
            pcVar7 = "false";
            if (param_3 != 0) {
                pcVar7 = "true";
            }
            snprintf(acStack_2020, 0x1fff, (char *)(&DAT_000672a4)[iVar2 * 4],
                     pcVar7);
            break;
        case 0xd:
            snprintf(acStack_2020, 0x1fff, (char *)(&DAT_000672a4)[iVar2 * 4],
                     param_4, param_3);
        }
        uVar3 = FUN_00018850(0, "STATUS", 1, &local_2028, 0);
        uVar3 = FUN_00018850(uVar3, &DAT_0004ab44, 0x10, &DAT_00068aa8, 0);
        uVar3 = FUN_00018850(uVar3, &DAT_0004ab4c, 6, &local_202c, 0);
    }
    uVar3 = FUN_00018850(uVar3, &DAT_0004ab54, 0, acStack_2020, 0);
    uVar3 = FUN_00018850(uVar3, "Description", 0, DAT_0006881c, 0);
    FUN_00017d00(param_1, uVar3, param_5, 0);
    if (param_5 != '\0') {
        FUN_00015b00(param_1, "]");
    }
    return;
}

void FUN_00018f04(undefined4 param_1, undefined4 param_2, char *param_3,
                  undefined4 param_4)

{
    FILE *__stream;
    char *pcVar1;
    char acStack_1018[4096];

    if ((param_3 == (char *)0x0) || (*param_3 == '\0')) {
        FUN_0002d7f4(acStack_1018);
        param_3 = acStack_1018;
    }
    __stream = fopen64(param_3, "w");
    if (__stream == (FILE *)0x0) {
        pcVar1 = (char *)FUN_00015c2c(param_3, param_4);
        FUN_00018ad4(param_1, 0x2b, 0, pcVar1, param_4);
        if (param_3 != pcVar1) {
            free(pcVar1);
            return;
        }
    } else {
        FUN_0002d174();
        fclose(__stream);
        pcVar1 = (char *)FUN_00015c2c(param_3, param_4);
        FUN_00018ad4(param_1, 0x2c, 0, pcVar1, param_4);
        if (param_3 != pcVar1) {
            free(pcVar1);
        }
    }
    return;
}

void FUN_00018ffc(undefined4 param_1, undefined4 param_2, char *param_3,
                  undefined4 param_4)

{
    int iVar1;
    char *pcVar2;
    long lVar3;
    undefined4 uVar4;
    code *pcVar5;
    char *__s;
    int iVar6;
    undefined1 auStack_2020[8192];

    iVar1 = FUN_00017730();
    if (iVar1 == 0) {
        FUN_00018ad4(param_1, 0x69, 0, 0, param_4);
        return;
    }
    if ((param_3 == (char *)0x0) || (*param_3 == '\0')) {
        FUN_00018ad4(param_1, 0xf, 0, 0, param_4);
        return;
    }
    pcVar2 = strchr(param_3, 0x2c);
    if (pcVar2 != (char *)0x0) {
        __s = pcVar2 + 1;
        *pcVar2 = '\0';
        if ((__s != (char *)0x0) && (pcVar2[1] != '\0')) {
            lVar3 = strtol(param_3, (char **)0x0, 10);
            if (iVar1 <= lVar3 || lVar3 < 0) {
                FUN_00018ad4(param_1, 0x6b, lVar3, 0, param_4);
                return;
            }
            iVar1 = FUN_000177ec();
            if (-1 < iVar1) {
                iVar1 = FUN_0003046c();
                iVar6 = *(int *)(iVar1 + 4);
                pcVar2 = strchr(__s, 0x2c);
                if (pcVar2 != (char *)0x0) {
                    *pcVar2 = '\0';
                    pcVar2 = pcVar2 + 1;
                }
                pcVar5 = *(code **)(iVar6 + 0x28);
                if (pcVar5 != (code *)0x0) {
                    iVar1 = (*pcVar5)(iVar1, __s, pcVar2, auStack_2020);
                    if (iVar1 != 0) {
                        iVar6 = strcasecmp(__s, "help");
                        if (iVar6 == 0) {
                            uVar4 = 0x76;
                        } else {
                            uVar4 = 0x78;
                        }
                        FUN_00018ad4(param_1, uVar4, lVar3, iVar1, param_4);
                        return;
                    }
                    FUN_00018ad4(param_1, 0x77, lVar3, 0, param_4);
                    return;
                }
                FUN_00018ad4(param_1, 0x75, lVar3, 0, param_4);
                return;
            }
            FUN_00018ad4(param_1, 0x6b, lVar3, 0, param_4);
            return;
        }
    }
    FUN_00018ad4(param_1, 0x74, 0, 0, param_4);
    return;
}

void FUN_000191f0(undefined4 param_1, undefined4 param_2, char *param_3)

{
    int iVar1;
    long lVar2;
    code *pcVar3;

    iVar1 = FUN_00017730();
    if (iVar1 == 0) {
        FUN_00018ad4(param_1, 0x69, 0, 0);
        return;
    }
    if ((param_3 == (char *)0x0) || (*param_3 == '\0')) {
        FUN_00018ad4(param_1, 0xf, 0);
        return;
    }
    lVar2 = strtol(param_3, (char **)0x0, 10);
    if (iVar1 <= lVar2 || lVar2 < 0) {
        FUN_00018ad4(param_1, 0x6b, lVar2, 0);
        return;
    }
    iVar1 = FUN_000177ec();
    if (-1 < iVar1) {
        iVar1 = FUN_0003046c();
        pcVar3 = *(code **)(*(int *)(iVar1 + 4) + 0x24);
        if (pcVar3 == (code *)0x0) {
            FUN_00018ad4(param_1, 0x72, lVar2);
            return;
        }
        (*pcVar3)();
        FUN_00018ad4(param_1, 0x71, lVar2, 0);
        return;
    }
    FUN_00018ad4(param_1, 0x6b, lVar2, 0);
    return;
}

void FUN_00019310(undefined4 param_1, undefined4 param_2, char *param_3,
                  undefined4 param_4)

{
    int iVar1;
    long lVar2;
    int iVar3;
    char acStack_818[2048];

    iVar1 = FUN_00017730();
    if (iVar1 == 0) {
        FUN_00018ad4(param_1, 0x69, 0, 0, param_4);
        return;
    }
    if ((param_3 == (char *)0x0) || (*param_3 == '\0')) {
        FUN_00018ad4(param_1, 0xf, 0, 0, param_4);
    } else {
        lVar2 = strtol(param_3, (char **)0x0, 10);
        if (iVar1 <= lVar2 || lVar2 < 0) {
            FUN_00018ad4(param_1, 0x6b, lVar2, 0, param_4);
            return;
        }
        iVar1 = FUN_000177ec();
        if (iVar1 < 0) {
            FUN_00018ad4(param_1, 0x6b, lVar2, 0, param_4);
        } else {
            iVar3 = FUN_0003046c();
            if ((DAT_00068bd5 != '\0') &&
                (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                  (6 < DAT_00067db4)))) {
                snprintf(acStack_818, 0x800,
                         "API: request to ascdisable ascid %d device %d %s%u",
                         lVar2, iVar1, *(undefined4 *)(*(int *)(iVar3 + 4) + 8),
                         *(undefined4 *)(iVar3 + 8));
                FUN_00020f58(7, acStack_818, 0);
            }
            if (*(int *)(iVar3 + 0x20) == 1) {
                FUN_00018ad4(param_1, 0x6d, lVar2, 0, param_4);
            } else {
                *(undefined4 *)(iVar3 + 0x20) = 1;
                FUN_00018ad4(param_1, 0x6f, lVar2, 0, param_4);
            }
        }
    }
    return;
}

void FUN_000194d4(undefined4 param_1, undefined4 param_2, char *param_3,
                  undefined4 param_4)

{
    int iVar1;
    long lVar2;
    int iVar3;
    undefined4 *puVar4;
    int iVar5;
    int iVar6;
    bool bVar7;
    char acStack_828[2052];

    iVar1 = FUN_00017730();
    if (iVar1 == 0) {
        FUN_00018ad4(param_1, 0x69, 0, 0, param_4);
        return;
    }
    if ((param_3 == (char *)0x0) || (*param_3 == '\0')) {
        FUN_00018ad4(param_1, 0xf, 0, 0, param_4);
    } else {
        lVar2 = strtol(param_3, (char **)0x0, 10);
        if (iVar1 <= lVar2 || lVar2 < 0) {
            FUN_00018ad4(param_1, 0x6b, lVar2, 0, param_4);
            return;
        }
        iVar1 = FUN_000177ec();
        if (iVar1 < 0) {
            FUN_00018ad4(param_1, 0x6b, lVar2, 0, param_4);
        } else {
            iVar3 = FUN_0003046c();
            if ((DAT_00068bd5 != '\0') &&
                (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                  (6 < DAT_00067db4)))) {
                snprintf(acStack_828, 0x800,
                         "API: request to ascenable ascid %d device %d %s%u",
                         lVar2, iVar1, *(undefined4 *)(*(int *)(iVar3 + 4) + 8),
                         *(undefined4 *)(iVar3 + 8));
                FUN_00020f58(7, acStack_828, 0);
            }
            if (*(int *)(iVar3 + 0x20) == 1) {
                if (0 < DAT_00075588) {
                    iVar5 = 0;
                    do {
                        iVar6 = iVar5 + 1;
                        puVar4 = (undefined4 *)FUN_00031b04(iVar5);
                        if (iVar1 == *(int *)puVar4[9]) {
                            bVar7 = DAT_00068bd5 != '\0';
                            *(undefined4 *)(iVar3 + 0x20) = 0;
                            if ((bVar7) && (((DAT_00074500 != '\0' ||
                                              (DAT_00068bd4 != '\0')) ||
                                             (6 < DAT_00067db4)))) {
                                snprintf(acStack_828, 0x800,
                                         "API: Pushing sem post to thread %d",
                                         *puVar4);
                                FUN_00020f58(7, acStack_828, 0);
                            }
                            FUN_000251ac(puVar4 + 4, "api.c", "ascenable",
                                         0xfa1);
                        }
                        iVar5 = iVar6;
                    } while (iVar6 < DAT_00075588);
                }
                FUN_00018ad4(param_1, 0x6e, lVar2, 0, param_4);
            } else {
                FUN_00018ad4(param_1, 0x6c, lVar2, 0, param_4);
            }
        }
    }
    return;
}

void FUN_0001a2dc(undefined4 param_1, undefined4 param_2, char *param_3,
                  undefined4 param_4)

{
    int iVar1;
    char *__ptr;
    undefined4 *puVar2;
    void *__ptr_00;
    void *local_24;
    undefined4 local_20;
    undefined4 local_1c;

    if ((param_3 == (char *)0x0) || (*param_3 == '\0')) {
        FUN_00018ad4(param_1, 0x34, 0, 0, param_4);
    } else {
        iVar1 = FUN_000174a0(param_3, &local_24, &local_20, &local_1c);
        if (iVar1 == 0) {
            __ptr = (char *)FUN_00015c2c(param_3, param_4);
            FUN_00018ad4(param_1, 0x35, 0, __ptr, param_4);
            if (param_3 != __ptr) {
                free(__ptr);
            }
        } else {
            puVar2 = (undefined4 *)FUN_000324b8();
            FUN_0002c8a8(puVar2, local_24);
            FUN_0003ebac(puVar2, 1, local_24, local_20, local_1c);
            __ptr_00 = (void *)FUN_00015c2c(local_24, param_4);
            FUN_00018ad4(param_1, 0x37, *puVar2, __ptr_00, param_4);
            if (local_24 != __ptr_00) {
                free(__ptr_00);
            }
        }
    }
    return;
}

void FUN_0001a3e4(undefined4 param_1, undefined4 param_2, char *param_3)

{
    long lVar1;
    int iVar2;
    int iVar3;

    if (DAT_000733cc == 0) {
        FUN_00018ad4(param_1, 8, 0);
        return;
    }
    if ((param_3 != (char *)0x0) && (*param_3 != '\0')) {
        lVar1 = strtol(param_3, (char **)0x0, 10);
        iVar2 = pthread_mutex_lock((pthread_mutex_t *)&DAT_0007453c);
        if (iVar2 != 0) {
            FUN_00017604("switchpool", 0xb5b);
        }
        iVar2 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_00074554);
        if (iVar2 != 0) {
            FUN_000175a0("switchpool", 0xb5b);
        }
        iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_0007453c);
        if (iVar2 != 0) {
            FUN_00017668("switchpool", 0xb5b);
        }
        if ((-1 < lVar1) && (lVar1 < DAT_000733cc)) {
            iVar3 = *(int *)(DAT_000744c8 + lVar1 * 4);
            *(undefined4 *)(iVar3 + 100) = 1;
            iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00074554);
            if (iVar2 != 0) {
                FUN_000176cc("switchpool", 0xb65);
            }
            (*DAT_00067ed8)();
            FUN_00034178(iVar3);
            FUN_00018ad4(param_1, 0x1b, lVar1, 0);
            return;
        }
        iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00074554);
        if (iVar2 != 0) {
            FUN_000176cc("switchpool", 0xb5e);
        }
        (*DAT_00067ed8)();
        FUN_00018ad4(param_1, 0x1a, lVar1, 0);
        return;
    }
    FUN_00018ad4(param_1, 0x19, 0);
    return;
}

void FUN_0001a598(int param_1, undefined4 param_2, undefined4 param_3,
                  int param_4)

{
    int iVar1;
    undefined4 uVar2;
    undefined4 local_14;

    local_14 = 0;
    local_14 = FUN_00017730();
    FUN_00018ad4(param_1, 0x68, 0, 0, param_4);
    if (param_4 == 0) {
        FUN_00015b00(param_1, "ASCS,");
        uVar2 = FUN_00018850(0, "Count", 6, &local_14, 0);
        FUN_00017d00(param_1, uVar2, 0, 0);
        return;
    }
    iVar1 = FUN_00015b00(param_1, ",\"ASCS\":[");
    uVar2 = FUN_00018850(0, "Count", 6, &local_14, 0);
    FUN_00017d00(param_1, uVar2, 1, 0);
    if (iVar1 != 0) {
        *(undefined1 *)(param_1 + 0xd) = 1;
    }
    return;
}

void FUN_0001a678(int param_1, undefined4 param_2, byte *param_3, int param_4)

{
    byte bVar1;
    __int32_t **pp_Var2;
    int iVar3;
    undefined4 uVar4;
    byte *pbVar5;

    if (param_3 == (byte *)0x0)
        goto switchD_0001a6ac_caseD_65;
    pp_Var2 = __ctype_tolower_loc();
    bVar1 = *(byte *)(*pp_Var2 + *param_3);
    *param_3 = bVar1;
    switch (bVar1) {
    case 100:
        DAT_00068bd4 = DAT_00068bd5 ^ 1;
        DAT_00068bd5 = DAT_00068bd4;
        if (DAT_00068bd4 == 0)
            break;
        goto LAB_0001a72c;
    case 0x6e:
        DAT_00068bd4 = 0;
        DAT_00068bd5 = 0;
        DAT_00073378 = 0;
        DAT_00073398 = 0;
        DAT_00073388 = 0;
        DAT_0007449c = 0;
        break;
    case 0x70:
        DAT_00068bd4 = DAT_00073388 ^ 1;
        DAT_00073388 = DAT_00068bd4;
        break;
    case 0x71:
        DAT_00073378 = DAT_00073378 ^ 1;
        break;
    case 0x72:
        pbVar5 = &DAT_00073398;
        goto LAB_0001aa04;
    case 0x73:
        DAT_0007559c = 1;
        break;
    case 0x76:
        pbVar5 = &DAT_00068bd4;
    LAB_0001aa04:
        bVar1 = *pbVar5;
        *pbVar5 = bVar1 ^ 1;
        if ((bVar1 ^ 1) != 0) {
        LAB_0001a72c:
            DAT_00073378 = 0;
        }
        break;
    case 0x77:
        DAT_0007449c = DAT_0007449c ^ 1;
    }
switchD_0001a6ac_caseD_65:
    FUN_00018ad4(param_1, 0x4f, 0, 0, param_4);
    if (param_4 == 0) {
        FUN_00015b00(param_1, "DEBUG,");
        uVar4 = FUN_00018850(0, "Silent", 0xe, &DAT_0007559c, 0);
        uVar4 = FUN_00018850(uVar4, "Quiet", 0xe, &DAT_00073378, 0);
        uVar4 = FUN_00018850(uVar4, "Verbose", 0xe, &DAT_00068bd4, 0);
        uVar4 = FUN_00018850(uVar4, "Debug", 0xe, &DAT_00068bd5, 0);
        uVar4 = FUN_00018850(uVar4, "RPCProto", 0xe, &DAT_00073398, 0);
        uVar4 = FUN_00018850(uVar4, "PerDevice", 0xe, &DAT_00073388, 0);
        uVar4 = FUN_00018850(uVar4, "WorkTime", 0xe, &DAT_0007449c, 0);
        FUN_00017d00(param_1, uVar4, 0, 0);
        return;
    }
    iVar3 = FUN_00015b00(param_1, ",\"DEBUG\":[");
    uVar4 = FUN_00018850(0, "Silent", 0xe, &DAT_0007559c, 0);
    uVar4 = FUN_00018850(uVar4, "Quiet", 0xe, &DAT_00073378, 0);
    uVar4 = FUN_00018850(uVar4, "Verbose", 0xe, &DAT_00068bd4, 0);
    uVar4 = FUN_00018850(uVar4, "Debug", 0xe, &DAT_00068bd5, 0);
    uVar4 = FUN_00018850(uVar4, "RPCProto", 0xe, &DAT_00073398, 0);
    uVar4 = FUN_00018850(uVar4, "PerDevice", 0xe, &DAT_00073388, 0);
    uVar4 = FUN_00018850(uVar4, "WorkTime", 0xe, &DAT_0007449c, 0);
    FUN_00017d00(param_1, uVar4, 1, 0);
    if (iVar3 != 0) {
        *(undefined1 *)(param_1 + 0xd) = 1;
    }
    return;
}

void FUN_0001aa3c(int param_1, undefined4 param_2, char *param_3, uint param_4,
                  byte param_5)

{
    int iVar1;
    __int32_t **pp_Var2;
    char *pcVar3;
    uint uVar4;
    undefined4 uVar5;
    __int32_t *p_Var6;
    undefined *puVar7;
    int *piVar8;
    char acStack_7c[100];

    if ((param_3 == (char *)0x0) || (*param_3 == '\0')) {
        FUN_00018ad4(param_1, 0x47, 0, 0, param_4);
        return;
    }
    if (DAT_000677c8 == (char *)0x0) {
        FUN_00018ad4(param_1, 0x48, 0, 0, param_4);
    } else {
        piVar8 = (int *)&DAT_000677c8;
        pcVar3 = DAT_000677c8;
        do {
            iVar1 = strcmp(pcVar3, param_3);
            if (iVar1 == 0) {
                sprintf(acStack_7c, "|%s|", param_3);
                pp_Var2 = __ctype_toupper_loc();
                p_Var6 = *pp_Var2;
                if ((p_Var6[param_5] != p_Var6[0x57]) &&
                    (pcVar3 = strstr(
                         *(char **)(&DAT_00073188 +
                                    (p_Var6[param_5] - p_Var6[0x41]) * 4),
                         acStack_7c),
                     pcVar3 == (char *)0x0)) {
                    FUN_00018ad4(param_1, 0x48, 0, 0, param_4);
                    if (param_4 == 0) {
                        uVar4 = FUN_00015b00(param_1, "CHECK,");
                        puVar7 = &DAT_0004aca0;
                    } else {
                        uVar4 = FUN_00015b00(param_1, ",\"CHECK\":[");
                        puVar7 = &DAT_0004aca0;
                    }
                    goto LAB_0001abe4;
                }
                FUN_00018ad4(param_1, 0x48, 0, 0, param_4);
                if (param_4 == 0) {
                    uVar4 = FUN_00015b00(param_1, "CHECK,");
                } else {
                    uVar4 = FUN_00015b00(param_1, ",\"CHECK\":[");
                }
                uVar5 = FUN_00018850(0, "Exists", 2, &DAT_0004aca0, 0);
                puVar7 = &DAT_0004aca0;
                goto LAB_0001ab4c;
            }
            piVar8 = piVar8 + 3;
            pcVar3 = (char *)*piVar8;
        } while (pcVar3 != (char *)0x0);
        FUN_00018ad4(param_1, 0x48, 0, 0, param_4);
    }
    if (param_4 == 0) {
        uVar4 = FUN_00015b00(param_1, "CHECK,");
        puVar7 = &DAT_0004aca4;
    } else {
        uVar4 = FUN_00015b00(param_1, ",\"CHECK\":[");
        puVar7 = &DAT_0004aca4;
    }
LAB_0001abe4:
    uVar5 = FUN_00018850(0, "Exists", 2, puVar7, 0);
    puVar7 = &DAT_0004aca4;
LAB_0001ab4c:
    uVar5 = FUN_00018850(uVar5, "Access", 2, puVar7, 0);
    FUN_00017d00(param_1, uVar5, param_4, 0);
    if ((param_4 & uVar4) != 0) {
        *(undefined1 *)(param_1 + 0xd) = 1;
    }
    return;
}

void FUN_0001acb4(int param_1, undefined4 param_2, undefined4 param_3,
                  int param_4)

{
    int iVar1;
    int iVar2;
    undefined1 *puVar3;
    undefined4 uVar4;
    int local_2c[2];

    if (DAT_000755c0 == 0) {
        FUN_00018ad4(param_1, 10, 0, 0, param_4);
        return;
    }
    FUN_00018ad4(param_1, 0x45, 0, 0, param_4);
    if (param_4 == 0) {
        if (DAT_000755c0 < 1) {
            return;
        }
        iVar2 = 0;
    } else {
        iVar2 = FUN_00015b00(param_1, ",\"DEVDETAILS\":[");
        if (DAT_000755c0 < 1)
            goto LAB_0001ae38;
    }
    local_2c[0] = 0;
    uVar4 = 0;
    do {
        iVar1 = FUN_0003046c(local_2c[0]);
        uVar4 = FUN_00018850(uVar4, "DEVDETAILS", 6, local_2c, 0);
        uVar4 = FUN_00018850(uVar4, &DAT_0004acf0, 1,
                             *(undefined4 *)(*(int *)(iVar1 + 4) + 8), 0);
        uVar4 = FUN_00018850(uVar4, &DAT_0004acf8, 6, iVar1 + 8, 0);
        uVar4 = FUN_00018850(uVar4, "Driver", 1,
                             *(undefined4 *)(*(int *)(iVar1 + 4) + 4), 0);
        puVar3 = *(undefined1 **)(iVar1 + 0xa8);
        if (*(undefined1 **)(iVar1 + 0xa8) == (undefined1 *)0x0) {
            puVar3 = &DAT_0004d5c8;
        }
        uVar4 = FUN_00018850(uVar4, "Kernel", 2, puVar3, 0);
        puVar3 = *(undefined1 **)(iVar1 + 0xc);
        if (*(undefined1 **)(iVar1 + 0xc) == (undefined1 *)0x0) {
            puVar3 = &DAT_0004d5c8;
        }
        uVar4 = FUN_00018850(uVar4, "Model", 2, puVar3, 0);
        puVar3 = *(undefined1 **)(iVar1 + 0x10);
        if (*(undefined1 **)(iVar1 + 0x10) == (undefined1 *)0x0) {
            puVar3 = &DAT_0004d5c8;
        }
        uVar4 = FUN_00018850(uVar4, "Device Path", 2, puVar3, 0);
        iVar1 = param_4;
        if (param_4 != 0) {
            if (local_2c[0] < 1) {
                iVar1 = 0;
            } else {
                iVar1 = 1;
            }
        }
        uVar4 = FUN_00017d00(param_1, uVar4, param_4, iVar1);
        local_2c[0] = local_2c[0] + 1;
    } while (local_2c[0] < DAT_000755c0);
LAB_0001ae38:
    if (iVar2 != 0) {
        *(undefined1 *)(param_1 + 0xd) = 1;
    }
    return;
}

void FUN_0001ae90(int param_1, undefined4 param_2, undefined4 param_3,
                  int param_4)

{
    int iVar1;
    undefined4 uVar2;
    undefined4 local_14;

    local_14 = 0;
    FUN_00018ad4(param_1, 0x3b, 0, 0, param_4);
    if (param_4 == 0) {
        FUN_00015b00(param_1, "PGAS,");
        uVar2 = FUN_00018850(0, "Count", 6, &local_14, 0);
        FUN_00017d00(param_1, uVar2, 0, 0);
        return;
    }
    iVar1 = FUN_00015b00(param_1, ",\"PGAS\":[");
    uVar2 = FUN_00018850(0, "Count", 6, &local_14, 0);
    FUN_00017d00(param_1, uVar2, 1, 0);
    if (iVar1 != 0) {
        *(undefined1 *)(param_1 + 0xd) = 1;
    }
    return;
}

void FUN_0001af64(int param_1, undefined4 param_2, undefined4 param_3,
                  int param_4)

{
    int iVar1;
    undefined4 uVar2;

    FUN_00018ad4(param_1, 0x10, 0, 0, param_4);
    if (param_4 == 0) {
        FUN_00015b00(param_1, "NONCENUM,");
        uVar2 = FUN_00018850(0, "10min nonce", 1, &DAT_000756b4, 0);
        uVar2 = FUN_00018850(uVar2, "30min nonce", 1, &DAT_0007457c, 0);
        uVar2 = FUN_00018850(uVar2, "60min nonce", 1, &DAT_00073484, 0);
        FUN_00017d00(param_1, uVar2, 0, 0);
        return;
    }
    iVar1 = FUN_00015b00(param_1, ",\"NONCENUM\":[");
    uVar2 = FUN_00018850(0, "10min nonce", 1, &DAT_000756b4, 0);
    uVar2 = FUN_00018850(uVar2, "30min nonce", 1, &DAT_0007457c, 0);
    uVar2 = FUN_00018850(uVar2, "60min nonce", 1, &DAT_00073484, 0);
    FUN_00017d00(param_1, uVar2, 1, 0);
    if (iVar1 != 0) {
        *(undefined1 *)(param_1 + 0xd) = 1;
    }
    return;
}

void FUN_0001b0ac(int param_1, undefined4 param_2, undefined4 param_3,
                  uint param_4)

{
    uint uVar1;
    undefined4 uVar2;
    char *pcVar3;
    undefined4 local_20;
    undefined4 local_1c;

    local_20 = 0;
    local_1c = 0;
    local_20 = FUN_00017730();
    FUN_00018ad4(param_1, 0x21, 0, 0, param_4);
    pcVar3 = ",\"CONFIG\":[";
    if (param_4 == 0) {
        pcVar3 = "CONFIG,";
    }
    uVar1 = FUN_00015b00(param_1, pcVar3);
    uVar2 = FUN_00018850(0, "ASC Count", 6, &local_20, 0);
    uVar2 = FUN_00018850(uVar2, "PGA Count", 6, &local_1c, 0);
    uVar2 = FUN_00018850(uVar2, "Pool Count", 6, &DAT_000733cc, 0);
    uVar2 = FUN_00018850(uVar2, "Strategy", 2,
                         (&PTR_s_Failover_00068828)[DAT_00068fd0], 0);
    uVar2 = FUN_00018850(uVar2, "Log Interval", 6, &DAT_00068730, 0);
    uVar2 = FUN_00018850(uVar2, "Device Code", 2, &DAT_0004d5c8, 0);
    uVar2 = FUN_00018850(uVar2, &DAT_0004addc, 2, "Linux", 0);
    uVar2 = FUN_00018850(uVar2, "Failover-Only", 0xe, &DAT_000755d4, 0);
    uVar2 = FUN_00018850(uVar2, "ScanTime", 6, &DAT_00068754, 0);
    uVar2 = FUN_00018850(uVar2, "Queue", 6, &DAT_00068824, 0);
    uVar2 = FUN_00018850(uVar2, "Expiry", 6, &DAT_00068758, 0);
    uVar2 = FUN_00018850(uVar2, "Hotplug", 2, &DAT_0004ae0c, 0);
    FUN_00017d00(param_1, uVar2, param_4, 0);
    if ((param_4 & uVar1) != 0) {
        *(undefined1 *)(param_1 + 0xd) = 1;
    }
    return;
}

void FUN_0001b294(int param_1, undefined4 param_2, undefined4 param_3,
                  int param_4)

{
    int iVar1;
    undefined4 uVar2;

    FUN_00018ad4(param_1, 0x16, 0, 0, param_4);
    if (param_4 == 0) {
        FUN_00015b00(param_1, "VERSION,");
        uVar2 = FUN_00018850(0, "BMMiner", 1, "1.0.0", 0);
        uVar2 = FUN_00018850(uVar2, &DAT_0004ae38, 2, &DAT_0004ae34, 0);
        uVar2 = FUN_00018850(uVar2, "Miner", 1, &DAT_0006abc0, 0);
        uVar2 = FUN_00018850(uVar2, "CompileTime", 1, &DAT_0006a74c, 0);
        uVar2 = FUN_00018850(uVar2, &DAT_0004ae50, 1, &DAT_0006a84c, 0);
        FUN_00017d00(param_1, uVar2, 0, 0);
        return;
    }
    iVar1 = FUN_00015b00(param_1, ",\"VERSION\":[");
    uVar2 = FUN_00018850(0, "BMMiner", 1, "1.0.0", 0);
    uVar2 = FUN_00018850(uVar2, &DAT_0004ae38, 2, &DAT_0004ae34, 0);
    uVar2 = FUN_00018850(uVar2, "Miner", 1, &DAT_0006abc0, 0);
    uVar2 = FUN_00018850(uVar2, "CompileTime", 1, &DAT_0006a74c, 0);
    uVar2 = FUN_00018850(uVar2, &DAT_0004ae50, 1, &DAT_0006a84c, 0);
    FUN_00017d00(param_1, uVar2, 1, 0);
    if (iVar1 != 0) {
        *(undefined1 *)(param_1 + 0xd) = 1;
    }
    return;
}

void FUN_0001b44c(int param_1, undefined4 param_2, undefined4 param_3,
                  uint param_4)

{
    uint uVar1;
    undefined4 uVar2;
    int iVar3;
    char *pcVar4;

    FUN_00018ad4(param_1, 0x4e, 0, 0, param_4);
    pcVar4 = ",\"COIN\":[";
    if (param_4 == 0) {
        pcVar4 = "COIN,";
    }
    uVar1 = FUN_00015b00(param_1, pcVar4);
    uVar2 = FUN_00018850(0, "Hash Method", 2, "sha256", 0);
    iVar3 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00074504);
    if (iVar3 == 0) {
        iVar3 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_0007451c);
    } else {
        FUN_00017604("minecoin", 0xe31);
        iVar3 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_0007451c);
    }
    if (iVar3 != 0) {
        FUN_000175a0("minecoin", 0xe31);
    }
    iVar3 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00074504);
    if (iVar3 != 0) {
        FUN_00017668("minecoin", 0xe31);
    }
    uVar2 = FUN_00018850(uVar2, "Current Block Time", 0xf, &DAT_000755f0, 1);
    uVar2 = FUN_00018850(uVar2, "Current Block Hash", 1, &DAT_00073324, 1);
    iVar3 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_0007451c);
    if (iVar3 != 0) {
        FUN_000176cc("minecoin", 0xe34);
    }
    (*DAT_00067ed8)();
    uVar2 = FUN_00018850(uVar2, &DAT_0004aeb4, 0xe, &DAT_00074502, 0);
    uVar2 = FUN_00018850(uVar2, "Network Difficulty", 0x18, &DAT_00068748, 1);
    FUN_00017d00(param_1, uVar2, param_4, 0);
    if ((param_4 & uVar1) != 0) {
        *(undefined1 *)(param_1 + 0xd) = 1;
    }
    return;
}

void FUN_0001b610(undefined4 param_1, uint param_2, undefined4 param_3,
                  undefined4 param_4)

{
    int iVar1;
    undefined *puVar2;
    uint uVar3;
    char *pcVar4;
    int iVar5;
    int iVar6;
    undefined4 uVar7;
    undefined4 extraout_s1;
    double dVar8;
    uint local_7c;
    float local_78;
    undefined4 local_74;
    double local_70;
    double local_68;
    undefined4 local_60;
    undefined4 uStack_5c;
    undefined4 local_58;
    undefined4 uStack_54;
    char acStack_4c[32];

    local_7c = param_2;
    iVar1 = FUN_00017730();
    if ((-1 < (int)local_7c &&
         (int)(local_7c & ~((int)local_7c >> 0x1f)) < iVar1) &&
        (iVar1 = FUN_000177ec(local_7c), -1 < iVar1)) {
        iVar1 = FUN_0003046c();
        local_78 = (float)*(double *)(iVar1 + 0xb0);
        uVar7 = FUN_0002cc3c();
        local_70 = (double)CONCAT44(extraout_s1, uVar7);
        puVar2 = &DAT_0004aca0;
        if (*(int *)(iVar1 + 0x20) == 1) {
            puVar2 = &DAT_0004aca4;
        }
        *(double *)(iVar1 + 0x58) =
            ((double)(longlong) * (int *)(iVar1 + 0x24) / local_70) * 60.0;
        switch (*(undefined4 *)(iVar1 + 0x60)) {
        case 0:
            pcVar4 = "Alive";
            break;
        case 1:
            pcVar4 = "Sick";
            break;
        case 2:
            pcVar4 = "Dead";
            break;
        case 3:
            pcVar4 = "NoStart";
            break;
        case 4:
            pcVar4 = "Initialising";
            break;
        default:
            pcVar4 = "Unknown";
        }
        uVar7 = FUN_00018850(0, &DAT_0004aefc, 6, &local_7c, 0);
        uVar7 = FUN_00018850(uVar7, &DAT_0004acf0, 1,
                             *(undefined4 *)(*(int *)(iVar1 + 4) + 8), 0);
        uVar7 = FUN_00018850(uVar7, &DAT_0004acf8, 6, iVar1 + 8, 0);
        uVar7 = FUN_00018850(uVar7, "Enabled", 1, puVar2, 0);
        uVar7 = FUN_00018850(uVar7, "Status", 1, pcVar4, 0);
        uVar7 = FUN_00018850(uVar7, "Temperature", 0x13, &local_78, 0);
        local_68 = *(double *)(iVar1 + 0x50) / local_70;
        uVar7 = FUN_00018850(uVar7, "MHS av", 0x11, &local_68, 0);
        sprintf(acStack_4c, "MHS %ds", DAT_00068730);
        uVar7 = FUN_00018850(uVar7, acStack_4c, 0x11, iVar1 + 0x30, 0);
        uVar7 = FUN_00018850(uVar7, "Accepted", 6, iVar1 + 0x24, 0);
        uVar7 = FUN_00018850(uVar7, "Rejected", 6, iVar1 + 0x28, 0);
        uVar7 = FUN_00018850(uVar7, "Hardware Errors", 6, iVar1 + 0x2c, 0);
        uVar7 = FUN_00018850(uVar7, "Utility", 0x14, iVar1 + 0x58, 0);
        if (*(int *)(iVar1 + 0xdc) < 1) {
            local_74 = 0xffffffff;
        } else {
            local_74 = *(undefined4 *)(iVar1 + 0xd8);
        }
        uVar7 = FUN_00018850(uVar7, "Last Share Pool", 6, &local_74, 0);
        uVar7 = FUN_00018850(uVar7, "Last Share Time", 0x10, iVar1 + 0xdc, 0);
        uVar7 = FUN_00018850(uVar7, "Total MH", 0x12, iVar1 + 0x50, 0);
        uVar7 = FUN_00018850(uVar7, "Diff1 Work", 0xb, iVar1 + 0xc0, 0);
        uVar7 =
            FUN_00018850(uVar7, "Difficulty Accepted", 0x18, iVar1 + 200, 0);
        uVar7 =
            FUN_00018850(uVar7, "Difficulty Rejected", 0x18, iVar1 + 0xd0, 0);
        uVar7 =
            FUN_00018850(uVar7, "Last Share Difficulty", 0x18, iVar1 + 0xe0, 0);
        uVar7 = FUN_00018850(uVar7, "Last Valid Work", 0x10, iVar1 + 0xe8, 0);
        uVar3 = *(uint *)(iVar1 + 0x2c);
        iVar5 = *(uint *)(iVar1 + 0xc0) + uVar3;
        iVar6 = *(int *)(iVar1 + 0xc4) + ((int)uVar3 >> 0x1f) +
                (uint)CARRY4(*(uint *)(iVar1 + 0xc0), uVar3);
        if (iVar5 == 0 && iVar6 == 0) {
            dVar8 = 0.0;
        } else {
            dVar8 = (double)FUN_0004a11c(iVar5, iVar6);
            dVar8 = (double)(longlong)(int)uVar3 / dVar8;
        }
        uStack_5c = (undefined4)((ulonglong)dVar8 >> 0x20);
        local_60 = SUB84(dVar8, 0);
        uVar7 = FUN_00018850(uVar7, "Device Hardware%", 0x19, &local_60, 0);
        if (*(int *)(iVar1 + 0xc0) == 0 && *(int *)(iVar1 + 0xc4) == 0) {
            dVar8 = 0.0;
        } else {
            dVar8 = (double)FUN_0004a11c();
            dVar8 = *(double *)(iVar1 + 0xd0) / dVar8;
        }
        uStack_54 = (undefined4)((ulonglong)dVar8 >> 0x20);
        local_58 = SUB84(dVar8, 0);
        uVar7 = FUN_00018850(uVar7, "Device Rejected%", 0x19, &local_58, 0);
        uVar7 = FUN_00018850(uVar7, "Device Elapsed", 0xd, &local_70, 0);
        FUN_00017d00(param_1, uVar7, param_3, param_4);
    }
    return;
}

void FUN_0001ba60(int param_1, undefined4 param_2, char *param_3, int param_4)

{
    int iVar1;
    long lVar2;

    iVar1 = FUN_00017730();
    if (iVar1 == 0) {
        FUN_00018ad4(param_1, 0x69, 0, 0);
        return;
    }
    if ((param_3 == (char *)0x0) || (*param_3 == '\0')) {
        FUN_00018ad4(param_1, 0xf, 0);
        return;
    }
    lVar2 = strtol(param_3, (char **)0x0, 10);
    if (iVar1 <= lVar2 || lVar2 < 0) {
        FUN_00018ad4(param_1, 0x6b, lVar2, 0);
        return;
    }
    FUN_00018ad4(param_1, 0x6a, lVar2, 0, param_4);
    if (param_4 != 0) {
        iVar1 = FUN_00015b00(param_1, ",\"ASC\":[");
        FUN_0001b610(param_1, lVar2, 1, 0);
        if (iVar1 != 0) {
            *(undefined1 *)(param_1 + 0xd) = 1;
        }
        return;
    }
    FUN_0001b610(param_1, lVar2, 0, 0);
    return;
}

void FUN_0001bb94(int param_1, undefined4 param_2, undefined4 param_3,
                  uint param_4)

{
    int iVar1;
    int iVar2;
    uint uVar3;
    int iVar4;
    int iVar5;

    iVar1 = FUN_00017730();
    if (iVar1 == 0) {
        FUN_00018ad4(param_1, 10, 0, 0);
        return;
    }
    FUN_00018ad4(param_1, 9, 0, 0, param_4);
    if (param_4 == 0) {
        if (iVar1 < 1) {
            return;
        }
        iVar2 = 0;
    } else {
        iVar2 = FUN_00015b00(param_1, ",\"DEVS\":[");
        if (iVar1 < 1)
            goto LAB_0001bc08;
    }
    iVar4 = 0;
    do {
        if (iVar4 < 1) {
            uVar3 = 0;
        } else {
            uVar3 = param_4 & 1;
        }
        iVar5 = iVar4 + 1;
        FUN_0001b610(param_1, iVar4, param_4, uVar3);
        iVar4 = iVar5;
    } while (iVar5 < iVar1);
LAB_0001bc08:
    if (iVar2 != 0) {
        *(undefined1 *)(param_1 + 0xd) = 1;
    }
    return;
}

void FUN_0001bc5c(int param_1, undefined4 param_2, undefined4 param_3,
                  uint param_4)

{
    int iVar1;
    int iVar2;
    uint uVar3;
    int iVar4;
    int iVar5;

    iVar1 = FUN_00017730();
    if (iVar1 == 0) {
        FUN_00018ad4(param_1, 10, 0, 0);
        return;
    }
    FUN_00018ad4(param_1, 9, 0, 0, param_4);
    if (param_4 == 0) {
        if (iVar1 < 1) {
            return;
        }
        iVar2 = 0;
    } else {
        iVar2 = FUN_00015b00(param_1, ",\"DEVS\":[");
        if (iVar1 < 1)
            goto LAB_0001bcd0;
    }
    iVar4 = 0;
    do {
        if (iVar4 < 1) {
            uVar3 = 0;
        } else {
            uVar3 = param_4 & 1;
        }
        iVar5 = iVar4 + 1;
        FUN_0001b610(param_1, iVar4, param_4, uVar3);
        iVar4 = iVar5;
    } while (iVar5 < iVar1);
LAB_0001bcd0:
    if (iVar2 != 0) {
        *(undefined1 *)(param_1 + 0xd) = 1;
    }
    return;
}

void FUN_0001bd24(int param_1, undefined4 param_2, undefined4 param_3,
                  int param_4)

{
    time_t tVar1;
    undefined4 uVar2;
    int iVar3;
    int iVar4;
    undefined *puVar5;
    undefined4 uVar6;
    uint uVar7;
    uint uVar8;
    double dVar9;
    double dVar10;
    char *local_15c;
    int local_14c;
    int local_144;
    undefined4 local_140;
    undefined4 local_13c;
    undefined4 local_138;
    undefined4 local_134;
    undefined2 local_130[130];

    memset(local_130, 0, 0x100);
    if (DAT_000733cc == 0) {
        FUN_00018ad4(param_1, 8, 0, 0, param_4);
        return;
    }
    FUN_00018ad4(param_1, 7, 0, 0, param_4);
    if (param_4 == 0) {
        if (DAT_000733cc < 1) {
            return;
        }
        local_14c = 0;
    } else {
        local_14c = FUN_00015b00(param_1, ",\"POOLS\":[");
        if (DAT_000733cc < 1)
            goto LAB_0001c29c;
    }
    local_144 = 0;
    uVar6 = 0;
    do {
        iVar4 = *(int *)(DAT_000744c8 + local_144 * 4);
        if (*(char *)(iVar4 + 0x69) == '\0') {
            iVar3 = *(int *)(iVar4 + 100);
            if (iVar3 == 1) {
                local_15c = "Alive";
                if (*(char *)(iVar4 + 0x61) != '\0') {
                    local_15c = "Dead";
                }
            } else if (iVar3 == 0) {
                local_15c = "Disabled";
            } else {
                local_15c = "Rejecting";
                if (iVar3 != 2) {
                    local_15c = "Unknown";
                }
            }
            puVar5 = &DAT_0004aca4;
            if (*(int *)(iVar4 + 0x6c) != 0) {
                puVar5 = &DAT_0004aca0;
            }
            if (*(int *)(iVar4 + 0x160) < 1) {
                local_130[0] = 0x30;
            } else {
                tVar1 = time((time_t *)0x0);
                uVar8 = tVar1 - *(int *)(iVar4 + 0x160);
                uVar8 = uVar8 & ~((int)uVar8 >> 0x1f);
                uVar7 = uVar8 % 0xe10;
                sprintf((char *)local_130, "%d:%02d:%02d", uVar8 / 0xe10,
                        uVar7 / 0x3c, uVar7 % 0x3c);
            }
            uVar6 = FUN_00018850(uVar6, &DAT_0004b05c, 6, &local_144, 0);
            uVar6 =
                FUN_00018850(uVar6, "URL", 0, *(undefined4 *)(iVar4 + 0xa4), 0);
            uVar6 = FUN_00018850(uVar6, "Status", 1, local_15c, 0);
            uVar6 = FUN_00018850(uVar6, "Priority", 6, iVar4 + 4, 0);
            uVar6 = FUN_00018850(uVar6, "Quota", 6, iVar4 + 0x38, 0);
            uVar6 = FUN_00018850(uVar6, "Long Poll", 1, puVar5, 0);
            uVar6 = FUN_00018850(uVar6, "Getworks", 7, iVar4 + 0x74, 0);
            uVar6 = FUN_00018850(uVar6, "Accepted", 0xb, iVar4 + 8, 0);
            uVar6 = FUN_00018850(uVar6, "Rejected", 0xb, iVar4 + 0x10, 0);
            uVar6 = FUN_00018850(uVar6, "Discarded", 7, iVar4 + 0x7c, 0);
            uVar6 = FUN_00018850(uVar6, "Stale", 7, iVar4 + 0x78, 0);
            uVar6 = FUN_00018850(uVar6, "Get Failures", 7, iVar4 + 0x80, 0);
            uVar6 = FUN_00018850(uVar6, "Remote Failures", 7, iVar4 + 0x84, 0);
            uVar6 = FUN_00018850(uVar6, &DAT_0004b0c4, 0,
                                 *(undefined4 *)(iVar4 + 0xac), 0);
            uVar6 = FUN_00018850(uVar6, "Last Share Time", 1, local_130, 0);
            uVar6 = FUN_00018850(uVar6, &DAT_0004b0cc, 1, iVar4 + 0x30, 0);
            uVar6 = FUN_00018850(uVar6, "Diff1 Shares", 0xb, iVar4 + 0x28, 0);
            if (*(int *)(iVar4 + 0xb8) == 0) {
                uVar6 = FUN_00018850(uVar6, "Proxy Type", 2, &DAT_0004d5c8, 0);
                uVar6 = FUN_00018850(uVar6, "Proxy", 2, &DAT_0004d5c8, 0);
            } else {
                uVar2 = FUN_00022b68(*(undefined4 *)(iVar4 + 0xb4));
                uVar6 = FUN_00018850(uVar6, "Proxy Type", 2, uVar2, 0);
                uVar6 = FUN_00018850(uVar6, "Proxy", 0,
                                     *(undefined4 *)(iVar4 + 0xb8), 0);
            }
            uVar6 = FUN_00018850(uVar6, "Difficulty Accepted", 0x18,
                                 iVar4 + 0x48, 0);
            uVar6 = FUN_00018850(uVar6, "Difficulty Rejected", 0x18,
                                 iVar4 + 0x50, 0);
            uVar6 =
                FUN_00018850(uVar6, "Difficulty Stale", 0x18, iVar4 + 0x58, 0);
            uVar6 = FUN_00018850(uVar6, "Last Share Difficulty", 0x18,
                                 iVar4 + 0x168, 0);
            uVar6 = FUN_00018850(uVar6, "Has Stratum", 0xe, iVar4 + 0x280, 0);
            uVar6 =
                FUN_00018850(uVar6, "Stratum Active", 0xe, iVar4 + 0x281, 0);
            if (*(char *)(iVar4 + 0x281) == '\0') {
                uVar6 = FUN_00018850(uVar6, "Stratum URL", 2, &DAT_0004d5c8, 0);
            } else {
                uVar6 = FUN_00018850(uVar6, "Stratum URL", 0,
                                     *(undefined4 *)(iVar4 + 0x240), 0);
            }
            uVar6 = FUN_00018850(uVar6, "Has GBT", 0xe, iVar4 + 0x2e0, 0);
            uVar6 = FUN_00018850(uVar6, "Best Share", 10, iVar4 + 0x170, 1);
            dVar10 = *(double *)(iVar4 + 0x50) + *(double *)(iVar4 + 0x48) +
                     *(double *)(iVar4 + 0x58);
            dVar9 = 0.0;
            if (dVar10 != 0.0) {
                dVar9 = *(double *)(iVar4 + 0x50) / dVar10;
            }
            local_13c = (undefined4)((ulonglong)dVar9 >> 0x20);
            local_140 = SUB84(dVar9, 0);
            uVar6 = FUN_00018850(uVar6, "Pool Rejected%", 0x19, &local_140, 0);
            dVar10 = *(double *)(iVar4 + 0x48) + *(double *)(iVar4 + 0x50) +
                     *(double *)(iVar4 + 0x58);
            dVar9 = 0.0;
            if (dVar10 != 0.0) {
                dVar9 = *(double *)(iVar4 + 0x58) / dVar10;
            }
            local_134 = (undefined4)((ulonglong)dVar9 >> 0x20);
            local_138 = SUB84(dVar9, 0);
            uVar6 = FUN_00018850(uVar6, "Pool Stale%", 0x19, &local_138, 0);
            uVar6 = FUN_00017d00(param_1, uVar6, param_4);
        }
        local_144 = local_144 + 1;
    } while (local_144 < DAT_000733cc);
LAB_0001c29c:
    if (local_14c != 0) {
        *(undefined1 *)(param_1 + 0xd) = 1;
    }
    return;
}

void FUN_0001c34c(int param_1, undefined4 param_2, undefined4 param_3,
                  int param_4)

{
    int iVar1;
    undefined4 uVar2;
    int iVar3;
    double local_c8;
    undefined2 local_c0[16];
    char acStack_a0[32];
    char acStack_80[32];
    undefined2 local_60;
    undefined1 local_5e;
    undefined2 local_40;
    undefined1 local_3e;

    memset(local_c0, 0, 0x20);
    memset(acStack_a0, 0, 0x20);
    memset(acStack_80, 0, 0x20);
    memset(&local_60, 0, 0x20);
    memset(&local_40, 0, 0x20);
    iVar1 = FUN_00031ff4();
    FUN_00018ad4(param_1, 7, 0, 0, param_4);
    if (param_4 == 0) {
        iVar3 = 0;
    } else {
        iVar3 = FUN_00015b00(param_1, ",\"POOLS\":[");
    }
    local_c0[0] = 0x30;
    local_c8 = ((DAT_000756a8 - DAT_00076830) / 1000.0) /
               (DAT_00068720 - DAT_00068738);
    uVar2 = FUN_00018850(0, &DAT_0004b164, 1, local_c0, 0);
    uVar2 = FUN_00018850(uVar2, "GHS5s", 0x11, &DAT_0006a5b8, 0);
    uVar2 = FUN_00018850(uVar2, "GHSavg", 0x11, &local_c8, 0);
    sprintf(acStack_a0, "%d", DAT_00075580);
    uVar2 = FUN_00018850(uVar2, &DAT_0004b178, 1, acStack_a0, 0);
    sprintf(acStack_80, "%d", DAT_00075584);
    uVar2 = FUN_00018850(uVar2, &DAT_0004b17c, 1, acStack_80, 0);
    if (iVar1 == 0) {
        local_60 = 0x6f6e;
        local_5e = 0;
        local_40 = local_60;
        local_3e = local_5e;
        uVar2 = FUN_00018850(uVar2, &DAT_0004b188, 1, &local_60, 0);
        uVar2 = FUN_00018850(uVar2, &DAT_0004b190, 1, &local_40, 0);
    } else {
        uVar2 = FUN_00018850(uVar2, &DAT_0004b188, 1,
                             *(undefined4 *)(iVar1 + 0xa4), 0);
        uVar2 = FUN_00018850(uVar2, &DAT_0004b190, 1,
                             *(undefined4 *)(iVar1 + 0xac), 0);
    }
    FUN_00017d00(param_1, uVar2, param_4, param_4);
    if (iVar3 != 0) {
        *(undefined1 *)(param_1 + 0xd) = 1;
    }
    return;
}

int FUN_0001c5d0(undefined4 param_1, int param_2, undefined4 param_3,
                 int param_4, int param_5, undefined1 param_6)

{
    undefined4 uVar1;
    int iVar2;
    double *pdVar3;
    int iVar4;
    int local_34;
    double local_30;
    double dStack_28;

    local_30 = ((DAT_000756a8 - DAT_00076830) / 1000.0) /
               (DAT_00068720 - DAT_00068738);
    local_34 = param_2;
    uVar1 = FUN_00018850(0, "STATS", 6, &local_34, 0);
    uVar1 = FUN_00018850(uVar1, &DAT_0004acf8, 1, param_3, 0);
    dStack_28 = (double)(longlong)DAT_0006aba0 + DAT_00068720;
    uVar1 = FUN_00018850(uVar1, "Elapsed", 0xd, &dStack_28, 0);
    uVar1 = FUN_00018850(uVar1, "Calls", 8, param_4, 0);
    uVar1 = FUN_00018850(uVar1, &DAT_0004b1b0, 0xf, param_4 + 4, 0);
    uVar1 = FUN_00018850(uVar1, &DAT_0004b1b8, 0xf, param_4 + 0xc, 0);
    uVar1 = FUN_00018850(uVar1, &DAT_0004b1bc, 0xf, param_4 + 0x14, 0);
    if ((char)DAT_0006aba4 == '\0') {
        sprintf((char *)&DAT_0006aba4, "%.2f", 0, 0);
    }
    uVar1 = FUN_00018850(uVar1, "GHS 5s", 1, &DAT_0006aba4, 0);
    uVar1 = FUN_00018850(uVar1, "GHS av", 0x11, &local_30, 0);
    pdVar3 = &DAT_0006abb8;
    if (DAT_0006abb8 < 0.01) {
        pdVar3 = &local_30;
    }
    uVar1 = FUN_00018850(uVar1, "GHS 30m", 0x11, pdVar3, 0);
    iVar2 = FUN_00018850(uVar1, &DAT_0004b1d8, 6, &DAT_000687f4, 0);
    iVar4 = iVar2;
    if ((param_5 != 0) && (iVar4 = param_5, iVar2 != 0)) {
        iVar4 = *(int *)(param_5 + 0x10);
        *(undefined4 *)(param_5 + 0x10) = *(undefined4 *)(iVar2 + 0x10);
        *(int *)(*(int *)(iVar2 + 0x10) + 0x14) = param_5;
        *(int *)(iVar4 + 0x14) = iVar2;
        *(int *)(iVar2 + 0x10) = iVar4;
        iVar4 = iVar2;
    }
    FUN_00017d00(param_1, iVar4, param_6, 1);
    return local_34 + 1;
}

void FUN_0001c820(int param_1, undefined4 param_2, undefined4 param_3,
                  int param_4)

{
    int iVar1;
    int iVar2;
    int iVar3;
    code *pcVar4;
    undefined4 uVar5;
    int local_44;
    char acStack_3c[24];

    FUN_00018ad4(param_1, 0x46, 0, 0, param_4);
    if (param_4 == 0) {
        if (DAT_000755c0 < 1) {
            return;
        }
        local_44 = 0;
    } else {
        local_44 = FUN_00015b00(param_1, ",\"STATS\":[");
        if (DAT_000755c0 < 1)
            goto LAB_0001c8ec;
    }
    iVar3 = 0;
    uVar5 = 0;
    do {
        iVar1 = FUN_0003046c(iVar3);
        if ((iVar1 != 0) && (iVar2 = *(int *)(iVar1 + 4), iVar2 != 0)) {
            pcVar4 = *(code **)(iVar2 + 0x1c);
            if (pcVar4 != (code *)0x0) {
                pcVar4 = (code *)(*pcVar4)();
                iVar2 = *(int *)(iVar1 + 4);
            }
            sprintf(acStack_3c, "%s%d", *(undefined4 *)(iVar2 + 8),
                    *(undefined4 *)(iVar1 + 8));
            uVar5 = FUN_0001c5d0(param_1, uVar5, acStack_3c, iVar1 + 0x124,
                                 pcVar4, param_4);
        }
        iVar3 = iVar3 + 1;
    } while (iVar3 < DAT_000755c0);
LAB_0001c8ec:
    if (local_44 != 0) {
        *(undefined1 *)(param_1 + 0xd) = 1;
    }
    return;
}

void FUN_0001c930(int param_1, undefined4 param_2, undefined4 param_3,
                  int param_4)

{
    undefined4 uVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    code *pcVar5;
    int local_44;
    char acStack_3c[24];

    FUN_00018ad4(param_1, 0x46, 0, 0, param_4);
    if (param_4 == 0) {
        uVar1 = FUN_00018850(0, "BMMiner", 1, "1.0.0", 0);
        uVar1 = FUN_00018850(uVar1, "Miner", 1, &DAT_0006abc0, 0);
        uVar1 = FUN_00018850(uVar1, "CompileTime", 1, &DAT_0006a74c, 0);
        uVar1 = FUN_00018850(uVar1, &DAT_0004ae50, 1, &DAT_0006a84c, 0);
        FUN_00017d00(param_1, uVar1, 0, 0);
        if (DAT_000755c0 < 1) {
            return;
        }
        local_44 = 0;
    } else {
        local_44 = FUN_00015b00(param_1, ",\"STATS\":[");
        uVar1 = FUN_00018850(0, "BMMiner", 1, "1.0.0", 0);
        uVar1 = FUN_00018850(uVar1, "Miner", 1, &DAT_0006abc0, 0);
        uVar1 = FUN_00018850(uVar1, "CompileTime", 1, &DAT_0006a74c, 0);
        uVar1 = FUN_00018850(uVar1, &DAT_0004ae50, 1, &DAT_0006a84c, 0);
        FUN_00017d00(param_1, uVar1, 1, 0);
        if (DAT_000755c0 < 1)
            goto LAB_0001ca84;
    }
    iVar4 = 0;
    uVar1 = 0;
    do {
        iVar2 = FUN_0003046c(iVar4);
        if ((iVar2 != 0) && (iVar3 = *(int *)(iVar2 + 4), iVar3 != 0)) {
            pcVar5 = *(code **)(iVar3 + 0x1c);
            if (pcVar5 != (code *)0x0) {
                pcVar5 = (code *)(*pcVar5)();
                iVar3 = *(int *)(iVar2 + 4);
            }
            sprintf(acStack_3c, "%s%d", *(undefined4 *)(iVar3 + 8),
                    *(undefined4 *)(iVar2 + 8));
            uVar1 = FUN_0001c5d0(param_1, uVar1, acStack_3c, iVar2 + 0x124,
                                 pcVar5, param_4);
        }
        iVar4 = iVar4 + 1;
    } while (iVar4 < DAT_000755c0);
LAB_0001ca84:
    if (local_44 != 0) {
        *(undefined1 *)(param_1 + 0xd) = 1;
    }
    return;
}

/* WARNING: Globals starting with '_' overlap smaller symbols at the same
 * address */
/* WARNING: Restarted to delay deadcode elimination for space: ram */

void FUN_0001cb54(int param_1, undefined4 param_2, undefined4 param_3,
                  uint param_4)

{
    bool bVar1;
    longlong lVar2;
    uint uVar3;
    int iVar4;
    undefined4 uVar5;
    char *pcVar6;
    double *pdVar7;
    double dVar8;
    double unaff_d10;
    undefined8 uVar9;
    double local_80;
    double local_78;
    double local_70;
    double local_68;
    undefined4 local_60;
    undefined4 uStack_5c;
    undefined4 local_58;
    undefined4 uStack_54;
    undefined4 local_50;
    undefined4 uStack_4c;
    double dStack_48;

    FUN_00018ad4(param_1, 0xb, 0, 0, param_4);
    pcVar6 = "SUMMARY,";
    if (param_4 != 0) {
        pcVar6 = ",\"SUMMARY\":[";
    }
    uVar3 = FUN_00015b00(param_1, pcVar6);
    iVar4 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00076838);
    if (iVar4 != 0) {
        FUN_00017604("summary", 0xae4);
    }
    dVar8 = _DAT_00073370 + _DAT_00073390 + DAT_000766b8;
    uVar9 = FUN_0004a1b4(SUB84(dVar8, 0), (int)((ulonglong)dVar8 >> 0x20));
    iVar4 = (int)((ulonglong)uVar9 >> 0x20);
    DAT_00076850 = (uint)uVar9;
    DAT_00076854 = iVar4;
    local_80 = (double)FUN_0004a11c(DAT_000755d8, DAT_000755dc);
    local_68 = DAT_00068720;
    bVar1 = DAT_00068720 == 0.0;
    if (!bVar1) {
        local_80 = local_80 / DAT_00068720;
    }
    if (!bVar1) {
        unaff_d10 = DAT_00068720;
    }
    if (bVar1) {
        unaff_d10 = 1.0;
    }
    local_80 = local_80 * 60.0;
    local_78 = ((DAT_000756a8 - DAT_00076830) / 1000.0) /
               (DAT_00068720 - DAT_00068738);
    dVar8 = (double)FUN_0004a11c((uint)uVar9, iVar4);
    local_68 = (double)(longlong)DAT_0006aba0 + local_68;
    local_70 = (dVar8 / unaff_d10) * 60.0;
    uVar5 = FUN_00018850(0, "Elapsed", 0xd, &local_68, 1);
    if ((char)DAT_0006aba4 == '\0') {
        sprintf((char *)&DAT_0006aba4, "%.2f", 0, 0);
    }
    uVar5 = FUN_00018850(uVar5, "GHS 5s", 1, &DAT_0006aba4, 0);
    uVar5 = FUN_00018850(uVar5, "GHS av", 0x11, &local_78, 0);
    pdVar7 = &DAT_0006abb8;
    if (DAT_0006abb8 < 0.01) {
        pdVar7 = &local_78;
    }
    uVar5 = FUN_00018850(uVar5, "GHS 30m", 0x11, pdVar7, 0);
    uVar5 = FUN_00018850(uVar5, "Found Blocks", 7, &DAT_0007345c, 1);
    uVar5 = FUN_00018850(uVar5, "Getworks", 0xb, &DAT_000755e8, 1);
    uVar5 = FUN_00018850(uVar5, "Accepted", 0xb, &DAT_000755d8, 1);
    uVar5 = FUN_00018850(uVar5, "Rejected", 0xb, &DAT_000767e8, 1);
    uVar5 = FUN_00018850(uVar5, "Hardware Errors", 6, &DAT_00073368, 1);
    uVar5 = FUN_00018850(uVar5, "Utility", 0x14, &local_80, 0);
    uVar5 = FUN_00018850(uVar5, "Discarded", 0xb, &DAT_00073380, 1);
    uVar5 = FUN_00018850(uVar5, "Stale", 0xb, &DAT_00073318, 1);
    uVar5 = FUN_00018850(uVar5, "Get Failures", 7, &DAT_000755d0, 1);
    uVar5 = FUN_00018850(uVar5, "Local Work", 7, &DAT_000767e0, 1);
    uVar5 = FUN_00018850(uVar5, "Remote Failures", 7, &DAT_00074494, 1);
    uVar5 = FUN_00018850(uVar5, "Network Blocks", 7, &DAT_000766dc, 1);
    uVar5 = FUN_00018850(uVar5, "Total MH", 0x12, &DAT_000756a8, 1);
    uVar5 = FUN_00018850(uVar5, "Work Utility", 0x14, &local_70, 0);
    uVar5 = FUN_00018850(uVar5, "Difficulty Accepted", 0x18, &DAT_00073370, 1);
    uVar5 = FUN_00018850(uVar5, "Difficulty Rejected", 0x18, &DAT_00073390, 1);
    uVar5 = FUN_00018850(uVar5, "Difficulty Stale", 0x18, &DAT_000766b8, 1);
    uVar5 = FUN_00018850(uVar5, "Best Share", 10, &DAT_00068ff0, 1);
    iVar4 = DAT_00076854 + ((int)DAT_00073368 >> 0x1f) +
            (uint)CARRY4(DAT_00076850, DAT_00073368);
    if (DAT_00076850 + DAT_00073368 == 0 && iVar4 == 0) {
        dVar8 = 0.0;
    } else {
        lVar2 = (longlong)(int)DAT_00073368;
        dVar8 = (double)FUN_0004a11c(DAT_00076850 + DAT_00073368, iVar4);
        dVar8 = (double)lVar2 / dVar8;
    }
    uStack_5c = (undefined4)((ulonglong)dVar8 >> 0x20);
    local_60 = SUB84(dVar8, 0);
    uVar5 = FUN_00018850(uVar5, "Device Hardware%", 0x19, &local_60, 0);
    if (DAT_00076850 == 0 && DAT_00076854 == 0) {
        dVar8 = 0.0;
    } else {
        dVar8 = (double)FUN_0004a11c();
        dVar8 = _DAT_00073390 / dVar8;
    }
    uStack_54 = (undefined4)((ulonglong)dVar8 >> 0x20);
    local_58 = SUB84(dVar8, 0);
    uVar5 = FUN_00018850(uVar5, "Device Rejected%", 0x19, &local_58, 0);
    dVar8 = _DAT_00073390 + _DAT_00073370 + DAT_000766b8;
    if (dVar8 == 0.0) {
        dVar8 = 0.0;
    } else {
        dVar8 = _DAT_00073390 / dVar8;
    }
    uStack_4c = (undefined4)((ulonglong)dVar8 >> 0x20);
    local_50 = SUB84(dVar8, 0);
    uVar5 = FUN_00018850(uVar5, "Pool Rejected%", 0x19, &local_50, 0);
    dStack_48 = _DAT_00073370 + _DAT_00073390 + DAT_000766b8;
    if (dStack_48 == 0.0) {
        dStack_48 = 0.0;
    } else {
        dStack_48 = DAT_000766b8 / dStack_48;
    }
    uVar5 = FUN_00018850(uVar5, "Pool Stale%", 0x19, &dStack_48, 0);
    uVar5 = FUN_00018850(uVar5, "Last getwork", 0x10, &DAT_000744a0, 0);
    iVar4 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00076838);
    if (iVar4 != 0) {
        FUN_00017668("summary", 0xb1c);
    }
    (*DAT_00067ed8)();
    FUN_00017d00(param_1, uVar5, param_4, 0);
    if ((param_4 & uVar3) != 0) {
        *(undefined1 *)(param_1 + 0xd) = 1;
    }
    return;
}

void FUN_0001d184(undefined4 param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    FUN_00018850(param_1, param_2, 0, param_3, param_4);
    return;
}

undefined4 FUN_0001d4e4(void)

{
    return SUB84(((DAT_000756a8 - DAT_00076830) / 1000.0) /
                     (DAT_00068720 - DAT_00068738),
                 0);
}

void FUN_0001d538(undefined4 *param_1)

{
    undefined4 uVar1;
    undefined4 local_850;
    undefined4 local_84c;
    undefined8 local_848;
    undefined4 local_840;
    undefined4 uStack_83c;
    undefined4 local_838;
    undefined4 uStack_834;
    char acStack_830[2052];

    local_840 = 0;
    uStack_83c = 0;
    local_838 = 0;
    uStack_834 = 0;
    local_848 = 0;
    local_850 = 0;
    local_84c = 0;
    uVar1 = FUN_00018850(*param_1, "Elapsed", 0xd, &DAT_00068720, 1);
    *param_1 = uVar1;
    uVar1 = FUN_00018850(uVar1, "GHS 5s", 1, "14189.74", 0);
    *param_1 = uVar1;
    local_848 = 0x40cbe14147ae147b;
    uVar1 = FUN_00018850(uVar1, "GHS av", 0x11, &local_848, 1);
    *param_1 = uVar1;
    uVar1 = FUN_00018850(uVar1, "Found Blocks", 7, &local_850, 1);
    *param_1 = uVar1;
    local_840 = 0x14;
    uStack_83c = 0;
    uVar1 = FUN_00018850(uVar1, "Getworks", 0xb, &local_840, 1);
    *param_1 = uVar1;
    local_840 = 0x52;
    uStack_83c = 0;
    uVar1 = FUN_00018850(uVar1, "Accepted", 0xb, &local_840, 1);
    *param_1 = uVar1;
    local_840 = 0;
    uStack_83c = 0;
    uVar1 = FUN_00018850(uVar1, "Rejected", 0xb, &local_840, 1);
    *param_1 = uVar1;
    uVar1 = FUN_00018850(uVar1, "Hardware Errors", 6, &local_84c, 1);
    *param_1 = uVar1;
    local_848 = 0x4017a3d70a3d70a4;
    uVar1 = FUN_00018850(uVar1, "Utility", 0x14, &local_848, 0);
    *param_1 = uVar1;
    local_840 = 0;
    uStack_83c = 0;
    uVar1 = FUN_00018850(uVar1, "Discarded", 0xb, &local_840, 1);
    *param_1 = uVar1;
    local_840 = 0;
    uStack_83c = 0;
    uVar1 = FUN_00018850(uVar1, "Stale", 0xb, &local_840, 1);
    *param_1 = uVar1;
    uVar1 = FUN_00018850(uVar1, "Get Failures", 7, &local_850, 1);
    *param_1 = uVar1;
    uVar1 = FUN_00018850(uVar1, "Local Work", 7, &DAT_000767e0, 1);
    *param_1 = uVar1;
    uVar1 = FUN_00018850(uVar1, "Remote Failures", 7, &local_850, 1);
    *param_1 = uVar1;
    uVar1 = FUN_00018850(uVar1, "Network Blocks", 7, &DAT_000766dc, 1);
    *param_1 = uVar1;
    uVar1 = FUN_00018850(uVar1, "Total MH", 0x12, &DAT_000756a8, 1);
    *param_1 = uVar1;
    local_848 = 0;
    uVar1 = FUN_00018850(uVar1, "Work Utility", 0x14, &local_848, 0);
    *param_1 = uVar1;
    local_848 = 0x4134800000000000;
    uVar1 = FUN_00018850(uVar1, "Difficulty Accepted", 0x18, &local_848, 1);
    *param_1 = uVar1;
    local_848 = 0x40d0000000000000;
    uVar1 = FUN_00018850(uVar1, "Difficulty Rejected", 0x18, &local_848, 1);
    *param_1 = uVar1;
    uVar1 = FUN_00018850(uVar1, "Difficulty Stale", 0x18, &DAT_000766b8, 1);
    *param_1 = uVar1;
    local_838 = 0x34621d;
    uStack_834 = 0;
    uVar1 = FUN_00018850(uVar1, "Best Share", 10, &local_838, 1);
    *param_1 = uVar1;
    local_848 = 0;
    uVar1 = FUN_00018850(uVar1, "Device Hardware%", 0x19, &local_848, 0);
    *param_1 = uVar1;
    uVar1 = FUN_00018850(uVar1, "Device Rejected%", 0x19, &local_848, 0);
    *param_1 = uVar1;
    uVar1 = FUN_00018850(uVar1, "Pool Rejected%", 0x19, &local_848, 0);
    *param_1 = uVar1;
    uVar1 = FUN_00018850(uVar1, "Pool Stale%", 0x19, &local_848, 0);
    *param_1 = uVar1;
    uVar1 = FUN_00018850(uVar1, "Last getwork", 0x10, &DAT_000744a0, 0);
    *param_1 = uVar1;
    if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
        (DAT_00067db4 < 5)) {
        return;
    }
    snprintf(acStack_830, 0x800, "root %d", uVar1);
    FUN_00020f58(5, acStack_830, 0);
    return;
}

void FUN_0001d990(undefined4 param_1, int param_2, int param_3,
                  undefined4 param_4)

{
    undefined4 uVar1;
    char *pcVar2;
    int local_1c;

    if (*(int *)(param_3 + 0xf4) == 0) {
        pcVar2 = "None";
    } else if (*(uint *)(param_3 + 0xf8) < 9) {
        pcVar2 =
            (&PTR_s_Thread_failed_to_init_0004a418)[*(uint *)(param_3 + 0xf8)];
    } else {
        pcVar2 = "Unknown reason - code bug";
    }
    local_1c = param_2;
    uVar1 = FUN_00018850(0, "NOTIFY", 6, &local_1c, 0);
    uVar1 = FUN_00018850(uVar1, &DAT_0004acf0, 1,
                         *(undefined4 *)(*(int *)(param_3 + 4) + 8), 0);
    uVar1 = FUN_00018850(uVar1, &DAT_0004acf8, 6, param_3 + 8, 0);
    uVar1 = FUN_00018850(uVar1, "Last Well", 0x10, param_3 + 0xf0, 0);
    uVar1 = FUN_00018850(uVar1, "Last Not Well", 0x10, param_3 + 0xf4, 0);
    uVar1 = FUN_00018850(uVar1, "Reason Not Well", 1, pcVar2, 0);
    uVar1 = FUN_00018850(uVar1, "*Thread Fail Init", 6, param_3 + 0xfc, 0);
    uVar1 = FUN_00018850(uVar1, "*Thread Zero Hash", 6, param_3 + 0x100, 0);
    uVar1 = FUN_00018850(uVar1, "*Thread Fail Queue", 6, param_3 + 0x104, 0);
    uVar1 = FUN_00018850(uVar1, "*Dev Sick Idle 60s", 6, param_3 + 0x108, 0);
    uVar1 = FUN_00018850(uVar1, "*Dev Dead Idle 600s", 6, param_3 + 0x10c, 0);
    uVar1 = FUN_00018850(uVar1, "*Dev Nostart", 6, param_3 + 0x110, 0);
    uVar1 = FUN_00018850(uVar1, "*Dev Over Heat", 6, param_3 + 0x114, 0);
    uVar1 = FUN_00018850(uVar1, "*Dev Thermal Cutoff", 6, param_3 + 0x118, 0);
    uVar1 = FUN_00018850(uVar1, "*Dev Comms Error", 6, param_3 + 0x11c, 0);
    uVar1 = FUN_00018850(uVar1, "*Dev Throttle", 6, param_3 + 0x120, 0);
    FUN_00017d00(param_1, uVar1, param_4);
    return;
}

void FUN_0001db9c(int param_1, undefined4 param_2, undefined4 param_3,
                  int param_4, undefined1 param_5)

{
    undefined4 uVar1;
    int iVar2;
    int iVar3;
    int iVar4;

    if (DAT_000755c0 == 0) {
        FUN_00018ad4(param_1, 10, 0, 0);
        return;
    }
    FUN_00018ad4(param_1, 0x3c, 0, 0, param_4);
    if (param_4 == 0) {
        if (DAT_000755c0 < 1) {
            return;
        }
        iVar2 = 0;
    } else {
        iVar2 = FUN_00015b00(param_1, ",\"NOTIFY\":[");
        if (DAT_000755c0 < 1)
            goto LAB_0001dc24;
    }
    iVar3 = 0;
    do {
        uVar1 = FUN_0003046c(iVar3);
        iVar4 = iVar3 + 1;
        FUN_0001d990(param_1, iVar3, uVar1, param_4, param_5);
        iVar3 = iVar4;
    } while (iVar4 < DAT_000755c0);
LAB_0001dc24:
    if (iVar2 != 0) {
        *(undefined1 *)(param_1 + 0xd) = 1;
    }
    return;
}

void FUN_0001dc74(void)

{
    void *pvVar1;
    int iVar2;
    char local_808[24];
    undefined4 uStack_7f0;
    undefined2 uStack_7ec;
    undefined1 local_7ea;

    pvVar1 = calloc(1, 0x40);
    if (pvVar1 == (void *)0x0) {
        builtin_strncpy(local_808, "Failed to calloc mcast t", 0x18);
        uStack_7f0 = CONCAT13(uStack_7f0._3_1_, 0x7268);
        FUN_00020f58(3, local_808, 1);
        FUN_0003eba0(1);
    }
    iVar2 = FUN_00025164(pvVar1, 0, FUN_00016d60, pvVar1);
    if (iVar2 != 0) {
        builtin_strncpy(local_808, "API mcast thread create ", 0x18);
        uStack_7f0._0_1_ = 'f';
        uStack_7f0._1_1_ = 'a';
        uStack_7f0._2_1_ = 'i';
        uStack_7f0._3_1_ = 'l';
        uStack_7ec = 0x6465;
        local_7ea = 0;
        FUN_00020f58(3, local_808, 1);
        FUN_0003eba0(1);
    }
    return;
}

/* WARNING: Restarted to delay deadcode elimination for space: ram */

void FUN_0001dd84(void)

{
    bool bVar1;
    undefined4 *puVar2;
    char cVar3;
    int *__ptr;
    undefined4 *puVar4;
    undefined1 *puVar5;
    undefined4 *puVar6;
    int iVar7;
    size_t sVar8;
    byte *pbVar9;
    char *pcVar10;
    __int32_t **pp_Var11;
    char *pcVar12;
    ushort **ppuVar13;
    byte *pbVar14;
    int *piVar15;
    time_t tVar16;
    time_t tVar17;
    ssize_t sVar18;
    int iVar19;
    undefined1 uVar20;
    undefined4 uVar21;
    byte *extraout_r2;
    __int32_t *p_Var22;
    byte *pbVar23;
    int iVar24;
    byte bVar25;
    bool bVar26;
    void *__buf;
    undefined1 *puVar27;
    addrinfo *paVar28;
    int unaff_r5;
    int iVar29;
    uint uVar30;
    char *unaff_r7;
    uint uVar31;
    char *pcVar32;
    byte *pbVar33;
    char **ppcVar34;
    bool bVar35;
    undefined8 uVar36;
    byte *pbStack_16484;
    char *pcStack_16478;
    int *piStack_16470;
    short sStack_16464;
    char *pcStack_16440;
    char *pcStack_16438;
    byte bStack_16422;
    undefined1 uStack_16421;
    undefined4 uStack_16420;
    socklen_t sStack_1641c;
    addrinfo *paStack_16418;
    undefined4 uStack_16414;
    char acStack_16410[12];
    char acStack_16404[32];
    addrinfo aStack_163e4;
    undefined1 auStack_163c4[12];
    pthread_t pStack_163b8;
    char cStack_16384;
    char acStack_16383[99];
    char acStack_16320[100];
    sockaddr asStack_162bc[8];
    undefined1 auStack_1623c[252];
    __pthread_unwind_buf_t a_Stack_16140[6];
    char acStack_16028[2048];
    char acStack_15828[2048];
    char acStack_15028[2048];
    char acStack_14828[2048];
    char acStack_14028[2048];
    char acStack_13828[2048];
    char acStack_13028[2048];
    char acStack_12828[2048];
    char acStack_12028[2048];
    char acStack_11828[2048];
    char acStack_11028[2048];
    char acStack_10828[2048];
    char acStack_10028[2048];
    char acStack_f828[2048];
    char acStack_f028[2048];
    char acStack_e828[2048];
    char acStack_e028[2048];
    char acStack_d828[2048];
    char local_d028[2048];
    char local_c828[44];
    undefined2 uStack_c7fc;
    undefined1 local_c7fa;
    char acStack_c028[2048];
    char local_b828[28];
    undefined2 local_b80c;
    char acStack_b028[2048];
    char acStack_a828[2048];
    char acStack_a028[2048];
    char acStack_9828[2048];
    char acStack_9028[2048];
    char acStack_8828[2048];
    char local_8028[2048];
    char local_7828[40];
    undefined2 local_7800;
    char local_7028[28];
    undefined2 local_700c;
    char local_6828[24];
    undefined2 local_6810;
    char local_6028[8192];
    char acStack_4028[8192];
    undefined2 local_2028;

    uVar21 = DAT_00068818;
    piStack_16470 = (int *)0x0;
    bVar1 = false;
    __ptr = (int *)malloc(4);
    cVar3 = DAT_00075685;
    *__ptr = -1;
    if (cVar3 == '\0') {
        if ((DAT_00068bd5 != '\0') &&
            (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
              (6 < DAT_00067db4)))) {
            snprintf(acStack_16028, 0x800, "API not running%s",
                     " - API will not be available");
            FUN_00020f58(7, acStack_16028, 0);
        }
    LAB_0001de3c:
        free(__ptr);
        return;
    }
    puVar4 = (undefined4 *)malloc(0x10);
    puVar5 = (undefined1 *)malloc(0x10000);
    puVar4[1] = puVar5;
    *puVar5 = 0;
    *(undefined1 *)((int)puVar4 + 0xd) = 0;
    puVar4[2] = puVar5;
    *puVar4 = 0x10000;
    *(undefined1 *)(puVar4 + 3) = 1;
    puVar6 = (undefined4 *)malloc(0xc);
    *puVar6 = puVar4;
    puVar2 = DAT_00068aa0;
    if (DAT_00068aa0 == (undefined4 *)0x0) {
        puVar6[1] = puVar6;
        puVar6[2] = puVar6;
        DAT_00068aa0 = puVar6;
    } else {
        puVar6[2] = DAT_00068aa0;
        puVar6[1] = puVar2[1];
        puVar2[1] = puVar6;
        *(undefined4 **)(puVar6[1] + 8) = puVar6;
    }
    iVar7 = pthread_mutex_init((pthread_mutex_t *)&DAT_00068a88,
                               (pthread_mutexattr_t *)0x0);
    if (iVar7 != 0) {
        piVar15 = __errno_location();
        snprintf(acStack_c028, 0x800,
                 "Failed to pthread_mutex_init errno=%d in %s %s():%d",
                 *piVar15, "api.c", &DAT_0004a43c, 0x144f);
        FUN_00020f58(3, acStack_c028, 1);
        FUN_0003eba0(1);
    }
    iVar7 = __sigsetjmp(a_Stack_16140, 0);
    if (iVar7 != 0) {
        FUN_00017900(__ptr);
        __pthread_unwind_next(a_Stack_16140);
    LAB_0001f448:
        freeaddrinfo(paStack_16418);
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (2 < DAT_00067db4)) {
            snprintf(acStack_13028, 0x800, "API bind to port %d failed (%s)%s",
                     unaff_r5, unaff_r7, " - API will not be available");
            FUN_00020f58(3, acStack_13028, 0);
        }
        goto LAB_0001de3c;
    }
    __pthread_register_cancel(a_Stack_16140);
    pcVar10 = DAT_000732e0;
    if (DAT_000732e0 == (char *)0x0) {
        sVar8 = 1;
        pcVar10 = "";
    } else {
        sVar8 = strlen(DAT_000732e0);
        sVar8 = sVar8 + 1;
    }
    pbVar9 = (byte *)malloc(sVar8);
    if (pbVar9 == (byte *)0x0) {
        builtin_strncpy(local_b828, "Failed to malloc ipgroups bu", 0x1c);
        local_b80c = 0x66;
        FUN_00020f58(3, local_b828, 1);
        FUN_0003eba0(1);
    }
    strcpy((char *)pbVar9, pcVar10);
    bVar25 = *pbVar9;
    pbVar23 = pbVar9;
    while (bVar25 != 0) {
        pcVar10 = strchr((char *)pbVar23, 0x2c);
        pbStack_16484 = extraout_r2;
        if (pcVar10 != (char *)0x0) {
            pbStack_16484 = (byte *)(pcVar10 + 1);
            *pcVar10 = '\0';
        }
        if (pcVar10 == (char *)0x0) {
            pbStack_16484 = (byte *)0x0;
        }
        if (pbVar23[1] != 0x3a) {
            pcVar10 = strchr((char *)pbVar23, 0x3a);
            if (pcVar10 != (char *)0x0) {
                *pcVar10 = '\0';
            }
            snprintf(acStack_b028, 0x800, "API invalid group name \'%s\'",
                     pbVar23);
            FUN_00020f58(3, acStack_b028, 1);
            FUN_0003eba0(1);
        }
        pp_Var11 = __ctype_toupper_loc();
        p_Var22 = *pp_Var11;
        uVar31 = (uint) * (byte *)(p_Var22 + *pbVar23);
        if ((p_Var22[uVar31] < p_Var22[0x41]) ||
            (p_Var22[0x5a] < p_Var22[uVar31])) {
            snprintf(acStack_a828, 0x800, "API invalid group name \'%c\'");
            FUN_00020f58(3, acStack_a828, 1);
            FUN_0003eba0(1);
            p_Var22 = *pp_Var11;
        }
        if (uVar31 == p_Var22[0x57]) {
            snprintf(acStack_a028, 0x800, "API group name can\'t be \'%c\'",
                     uVar31);
            FUN_00020f58(3, acStack_a028, 1);
            FUN_0003eba0(1);
            p_Var22 = *pp_Var11;
        }
        if (uVar31 == p_Var22[0x52]) {
            snprintf(acStack_9828, 0x800, "API group name can\'t be \'%c\'",
                     uVar31);
            FUN_00020f58(3, acStack_9828, 1);
            FUN_0003eba0(1);
            p_Var22 = *pp_Var11;
        }
        if (*(int *)(&DAT_00073188 + (p_Var22[uVar31] - p_Var22[0x41]) * 4) !=
            0) {
            snprintf(acStack_9028, 0x800, "API duplicate group name \'%c\'",
                     (uint)*pbVar23);
            FUN_00020f58(3, acStack_9028, 1);
            FUN_0003eba0(1);
        }
        local_2028 = 0x7c;
        if ((pbVar23 + 2 != (byte *)0x0) && (pbVar23[2] != 0)) {
            bVar26 = false;
            pcStack_16478 = (char *)((int)&local_2028 + 1);
            pbVar23 = pbVar23 + 2;
            do {
                pcVar10 = strchr((char *)pbVar23, 0x3a);
                if (pcVar10 == (char *)0x0) {
                    pbVar33 = (byte *)0x0;
                } else {
                    pbVar33 = (byte *)(pcVar10 + 1);
                    *pcVar10 = '\0';
                }
                if ((*pbVar23 == 0x2a) && (pbVar23[1] == 0)) {
                    bVar26 = true;
                } else {
                    if (DAT_000677c8 != (char *)0x0) {
                        ppcVar34 = &DAT_000677c8;
                        iVar7 = 0;
                        pcVar10 = DAT_000677c8;
                        do {
                            iVar29 = strcasecmp((char *)pbVar23, pcVar10);
                            if (iVar29 == 0) {
                                sprintf(acStack_16320, "|%s|", pcVar10);
                                pcVar10 =
                                    strstr((char *)&local_2028, acStack_16320);
                                if (pcVar10 == (char *)0x0) {
                                    pcVar10 = (&DAT_000677c8)[iVar7 * 3];
                                    strcpy(pcStack_16478, pcVar10);
                                    sVar8 = strlen(pcVar10);
                                    pcVar10 = pcStack_16478 + sVar8;
                                    pcStack_16478 = pcVar10 + 1;
                                    pcVar10[1] = '\0';
                                    *pcVar10 = '|';
                                }
                                goto LAB_0001e1ac;
                            }
                            ppcVar34 = ppcVar34 + 3;
                            pcVar10 = *ppcVar34;
                            iVar7 = iVar7 + 1;
                        } while (pcVar10 != (char *)0x0);
                    }
                    snprintf(acStack_8828, 0x800,
                             "API unknown command \'%s\' in group \'%c\'",
                             pbVar23, uVar31);
                    FUN_00020f58(3, acStack_8828, 1);
                    FUN_0003eba0(1);
                }
            LAB_0001e1ac:
            } while ((pbVar33 != (byte *)0x0) &&
                     (pbVar23 = pbVar33, *pbVar33 != 0));
            if ((bVar26) && (DAT_000677c8 != (char *)0x0)) {
                ppcVar34 = &DAT_000677c8;
                do {
                    if (*(char *)(ppcVar34 + 2) == '\0') {
                        sprintf(acStack_16320, "|%s|");
                        pcVar10 = strstr((char *)&local_2028, acStack_16320);
                        if (pcVar10 == (char *)0x0) {
                            pcVar10 = *ppcVar34;
                            strcpy(pcStack_16478, pcVar10);
                            sVar8 = strlen(pcVar10);
                            pcVar10 = pcStack_16478 + sVar8;
                            pcStack_16478 = pcVar10 + 1;
                            pcVar10[1] = '\0';
                            *pcVar10 = '|';
                        }
                    }
                    ppcVar34 = ppcVar34 + 3;
                } while (*ppcVar34 != (char *)0x0);
            }
        }
        sVar8 = strlen((char *)&local_2028);
        iVar29 = (*pp_Var11)[uVar31];
        iVar7 = (*pp_Var11)[0x41];
        pcVar10 = (char *)malloc(sVar8 + 1);
        *(char **)(&DAT_00073188 + (iVar29 - iVar7) * 4) = pcVar10;
        if (pcVar10 == (char *)0x0) {
            builtin_strncpy(local_8028, "Failed to malloc group commands buf",
                            0x24);
            FUN_00020f58(3, local_8028, 1);
            FUN_0003eba0(1);
        }
        strcpy(pcVar10, (char *)&local_2028);
        if (pbStack_16484 == (byte *)0x0)
            break;
        pbVar23 = pbStack_16484;
        bVar25 = *pbStack_16484;
    }
    pp_Var11 = __ctype_toupper_loc();
    local_2028 = 0x7c;
    if (DAT_000677c8 != (char *)0x0) {
        ppcVar34 = &DAT_000677c8;
        pcVar32 = (char *)((int)&local_2028 + 1);
        pcVar10 = DAT_000677c8;
        do {
            while (*(char *)(ppcVar34 + 2) == '\0') {
                strcpy(pcVar32, pcVar10);
                sVar8 = strlen(pcVar10);
                ppcVar34 = ppcVar34 + 3;
                pcVar10 = *ppcVar34;
                pcVar12 = pcVar32 + sVar8;
                pcVar32 = pcVar12 + 1;
                *pcVar12 = '|';
                pcVar12[1] = '\0';
                if (pcVar10 == (char *)0x0)
                    goto LAB_0001e2bc;
            }
            ppcVar34 = ppcVar34 + 3;
            pcVar10 = *ppcVar34;
        } while (pcVar10 != (char *)0x0);
    }
LAB_0001e2bc:
    sVar8 = strlen((char *)&local_2028);
    p_Var22 = *pp_Var11;
    iVar7 = p_Var22[0x52];
    iVar29 = p_Var22[0x41];
    if (iVar7 + 0x80U < 0x180) {
        iVar7 = p_Var22[iVar7];
    }
    pcVar10 = (char *)malloc(sVar8 + 1);
    *(char **)(&DAT_00073188 + (iVar7 - iVar29) * 4) = pcVar10;
    if (pcVar10 == (char *)0x0) {
        builtin_strncpy(local_7828, "Failed to malloc noprivgroup commands bu",
                        0x28);
        local_7800 = 0x66;
        FUN_00020f58(3, local_7828, 1);
        FUN_0003eba0(1);
    }
    strcpy(pcVar10, (char *)&local_2028);
    free(pbVar9);
    pcVar10 = DAT_0006acc8;
    if (DAT_0006acc8 != (char *)0x0) {
        sVar8 = strlen(DAT_0006acc8);
        pbVar9 = (byte *)malloc(sVar8 + 1);
        if (pbVar9 == (byte *)0x0) {
            builtin_strncpy(local_7028, "Failed to malloc ipaccess bu", 0x1c);
            local_700c = 0x66;
            FUN_00020f58(3, local_7028, 1);
            FUN_0003eba0(1);
            pcVar10 = DAT_0006acc8;
        }
        strcpy((char *)pbVar9, pcVar10);
        pbVar23 = pbVar9 + -1;
        sVar8 = 1;
        while (true) {
            pbVar23 = pbVar23 + 1;
            if (*pbVar23 == 0)
                break;
            if (*pbVar23 == 0x2c) {
                sVar8 = sVar8 + 1;
            }
        }
        DAT_00068a80 = calloc(sVar8, 0x24);
        if (DAT_00068a80 == (void *)0x0) {
            builtin_strncpy(local_6828, "Failed to calloc ipacces", 0x18);
            local_6810 = 0x73;
            FUN_00020f58(3, local_6828, 1);
            FUN_0003eba0(1);
        }
        iVar7 = 0;
        DAT_00068a84 = 0;
        pbVar23 = pbVar9;
        do {
            bVar25 = *pbVar23;
            pbVar33 = pbVar23;
            if (bVar25 == 0)
                break;
            while (bVar25 == 9 || bVar25 == 0x20) {
                pbVar33 = pbVar33 + 1;
                bVar25 = *pbVar33;
            }
            if (bVar25 == 0x2c) {
                pbVar23 = pbVar33 + 1;
                goto LAB_0001e4b4;
            }
            pcVar10 = strchr((char *)pbVar33, 0x2c);
            if (pcVar10 == (char *)0x0) {
                pbVar23 = (byte *)0x0;
            } else {
                pbVar23 = (byte *)(pcVar10 + 1);
                *pcVar10 = '\0';
            }
            ppuVar13 = __ctype_b_loc();
            p_Var22 = *pp_Var11;
            uVar20 = (undefined1)p_Var22[0x52];
            if ((((*ppuVar13)[*pbVar33] & 0x400) != 0) &&
                (pbVar33[1] == 0x3a)) {
                iVar29 = p_Var22[*pbVar33];
                if ((iVar29 == p_Var22[0x57]) ||
                    (*(int *)(&DAT_00073188 + (iVar29 - p_Var22[0x41]) * 4) !=
                     0)) {
                    uVar20 = (undefined1)iVar29;
                }
                pbVar33 = pbVar33 + 2;
            }
            __buf = (void *)((int)DAT_00068a80 + iVar7 * 0x24);
            *(undefined1 *)((int)__buf + 0x20) = uVar20;
            bVar25 = *pbVar33;
            if (bVar25 == 0x30) {
                if (((pbVar33[1] != 0x2f) || (pbVar33[2] != 0x30)) ||
                    (pbVar33[3] != 0)) {
                    pbVar14 = (byte *)strchr((char *)pbVar33, 0x2f);
                    if (pbVar14 == (byte *)0x0)
                        goto LAB_0001e7b8;
                    goto LAB_0001e478;
                }
                puVar27 = (undefined1 *)((int)__buf + -1);
                puVar5 = (undefined1 *)((int)__buf + 0xf);
                do {
                    puVar27 = puVar27 + 1;
                    *puVar27 = 0;
                    puVar5 = puVar5 + 1;
                    *puVar5 = 0;
                } while (puVar27 != (undefined1 *)((int)__buf + 0xf));
            LAB_0001e794:
                iVar7 = iVar7 + 1;
                DAT_00068a84 = iVar7;
            } else {
                pbVar14 = (byte *)strchr((char *)pbVar33, 0x2f);
                if (pbVar14 == (byte *)0x0) {
                LAB_0001e7b8:
                    puVar5 = (undefined1 *)((int)__buf + 0xf);
                    do {
                        puVar5 = puVar5 + 1;
                        *puVar5 = 0xff;
                    } while ((undefined1 *)((int)__buf + 0x1f) != puVar5);
                    sVar8 = strlen((char *)pbVar33);
                    bVar25 = *pbVar33;
                    pbVar14 = pbVar33 + sVar8;
                }
                if ((bVar25 == 0x5b) && (pbVar14[-1] == 0x5d)) {
                    *pbVar33 = 0;
                    pbVar33 = pbVar33 + 1;
                    pbVar14[-1] = 0;
                    bVar26 = true;
                } else {
                LAB_0001e478:
                    bVar26 = false;
                }
                if (*pbVar14 == 0) {
                LAB_0001e830:
                    puVar5 = (undefined1 *)((int)__buf + -1);
                    do {
                        puVar5 = puVar5 + 1;
                        *puVar5 = 0;
                    } while ((undefined1 *)((int)__buf + 0xf) != puVar5);
                    if (bVar26) {
                        iVar29 = inet_pton(10, (char *)pbVar33, __buf);
                    } else {
                        sprintf(acStack_16404, "::ffff:%s", pbVar33);
                        iVar7 = DAT_00068a84;
                        __buf =
                            (void *)((int)DAT_00068a80 + DAT_00068a84 * 0x24);
                        iVar29 = inet_pton(10, acStack_16404, __buf);
                    }
                    if (iVar29 == 1) {
                        pbVar14 = (byte *)((int)__buf + -1);
                        pbVar33 = (byte *)((int)__buf + 0xf);
                        do {
                            pbVar14 = pbVar14 + 1;
                            pbVar33 = pbVar33 + 1;
                            *pbVar14 = *pbVar14 & *pbVar33;
                        } while (pbVar14 != (byte *)((int)__buf + 0xf));
                        goto LAB_0001e794;
                    }
                } else {
                    *pbVar14 = 0;
                    iVar29 = strtol((char *)(pbVar14 + 1), (char **)0x0, 10);
                    if (0 < iVar29) {
                        if (!bVar26) {
                            iVar29 = iVar29 + 0x60;
                        }
                        if (iVar29 < 0x81) {
                            puVar5 = (undefined1 *)((int)__buf + 0xf);
                            do {
                                puVar5 = puVar5 + 1;
                                *puVar5 = 0;
                            } while ((undefined1 *)((int)__buf + 0x1f) !=
                                     puVar5);
                            uVar31 = 7;
                            iVar19 = 0;
                            while (bVar35 = iVar29 != 0, iVar29 = iVar29 + -1,
                                   bVar35) {
                                iVar24 = iVar19;
                                if (uVar31 == 0) {
                                    iVar24 = iVar19 + 1;
                                }
                                uVar30 = uVar31 & 0xff;
                                if (uVar31 == 0) {
                                    uVar31 = 7;
                                } else {
                                    uVar31 = uVar31 - 1;
                                }
                                *(byte *)((int)__buf + iVar19 + 0x10) =
                                    *(byte *)((int)__buf + iVar19 + 0x10) |
                                    (byte)(1 << uVar30);
                                iVar19 = iVar24;
                            }
                            goto LAB_0001e830;
                        }
                    }
                }
            }
        LAB_0001e4b4:
        } while (pbVar23 != (byte *)0x0);
        free(pbVar9);
        if (iVar7 == 0) {
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (3 < DAT_00067db4)) {
                snprintf(acStack_15828, 0x800,
                         "API not running (no valid IPs specified)%s",
                         " - API will not be available");
                FUN_00020f58(4, acStack_15828, 0);
            }
            goto LAB_0001de3c;
        }
    }
    sStack_16464 = (short)uVar21;
    unaff_r5 = (int)sStack_16464;
    FUN_00023b9c(DAT_00068730 * 1000);
    sprintf(acStack_16410, "%d", unaff_r5);
    aStack_163e4.ai_socktype = 0;
    aStack_163e4.ai_protocol = 0;
    aStack_163e4.ai_addrlen = 0;
    aStack_163e4.ai_addr = (sockaddr *)0x0;
    aStack_163e4.ai_canonname = (char *)0x0;
    aStack_163e4.ai_next = (addrinfo *)0x0;
    aStack_163e4.ai_family = 0;
    aStack_163e4.ai_flags = 1;
    iVar7 =
        getaddrinfo(DAT_00068814, acStack_16410, &aStack_163e4, &paStack_16418);
    if (iVar7 != 0) {
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (2 < DAT_00067db4)) {
            snprintf(acStack_15028, 0x800, "API failed to resolve %s",
                     DAT_00068814);
            FUN_00020f58(3, acStack_15028, 0);
        }
        goto LAB_0001de3c;
    }
    paVar28 = paStack_16418;
    if (paStack_16418 == (addrinfo *)0x0) {
        iVar7 = *__ptr;
    } else {
        do {
            iVar7 = socket(paStack_16418->ai_family, 1, 0);
            *__ptr = iVar7;
            if (0 < iVar7)
                goto LAB_0001ea20;
            paVar28 = paVar28->ai_next;
        } while (paVar28 != (addrinfo *)0x0);
    }
    if (iVar7 == -1) {
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (2 < DAT_00067db4)) {
            piVar15 = __errno_location();
            pcVar10 = strerror(*piVar15);
            snprintf(acStack_14828, 0x800, "API initialisation failed (%s)%s",
                     pcVar10, " - API will not be available");
            FUN_00020f58(3, acStack_14828, 0);
        }
        freeaddrinfo(paStack_16418);
        free(__ptr);
        return;
    }
    paVar28 = (addrinfo *)0x0;
LAB_0001ea20:
    uStack_16414 = 1;
    iVar7 = setsockopt(iVar7, 1, 2, &uStack_16414, 4);
    if (((iVar7 < 0) && (DAT_00068bd5 != '\0')) &&
        ((DAT_00074500 != '\0' ||
          ((DAT_00068bd4 != '\0' || (6 < DAT_00067db4)))))) {
        piVar15 = __errno_location();
        pcVar10 = strerror(*piVar15);
        snprintf(acStack_14028, 0x800,
                 "API setsockopt SO_REUSEADDR failed (ignored): %s", pcVar10);
        FUN_00020f58(7, acStack_14028, 0);
    }
    tVar16 = time((time_t *)0x0);
    while (iVar7 = bind(*__ptr, paVar28->ai_addr, paVar28->ai_addrlen),
           iVar7 < 0) {
        piVar15 = __errno_location();
        unaff_r7 = strerror(*piVar15);
        tVar17 = time((time_t *)0x0);
        if (0x3d < tVar17 - tVar16)
            goto LAB_0001f448;
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (3 < DAT_00067db4)) {
            snprintf(acStack_13828, 0x800,
                     "API bind to port %d failed - trying again in 30sec",
                     unaff_r5);
            FUN_00020f58(4, acStack_13828, 0);
        }
        FUN_00023b9c(30000);
    }
    freeaddrinfo(paStack_16418);
    iVar7 = listen(*__ptr, 100);
    if (iVar7 < 0) {
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (2 < DAT_00067db4)) {
            piVar15 = __errno_location();
            pcVar10 = strerror(*piVar15);
            snprintf(acStack_12828, 0x800, "API3 initialisation failed (%s)%s",
                     pcVar10, " - API will not be available");
            FUN_00020f58(3, acStack_12828, 0);
        }
        close(*__ptr);
        free(__ptr);
        return;
    }
    if (DAT_0006acc8 == (char *)0x0) {
        if (DAT_000767bc == '\0') {
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (3 < DAT_00067db4)) {
                snprintf(
                    acStack_11028, 0x800,
                    "API running in local read access mode on port %d (%d)",
                    unaff_r5, *__ptr);
                FUN_00020f58(4, acStack_11028, 0);
            }
        } else if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                   (3 < DAT_00067db4)) {
            snprintf(
                acStack_11828, 0x800,
                "API running in UNRESTRICTED read access mode on port %d (%d)",
                unaff_r5, *__ptr);
            FUN_00020f58(4, acStack_11828, 0);
        }
    } else if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
               (3 < DAT_00067db4)) {
        snprintf(acStack_12028, 0x800,
                 "API running in IP access mode on port %d (%d)", unaff_r5,
                 *__ptr);
        FUN_00020f58(4, acStack_12028, 0);
    }
    if (DAT_0007347d != '\0') {
        FUN_0001dc74();
    }
    DAT_00068aa4 =
        FUN_000200f8("StrBufs", 0xc, 2, 0, 0, "api.c", &DAT_0004a43c, 0x14bf);
    while (DAT_00068a7c == '\0') {
        sStack_1641c = 0x80;
        iVar7 = accept(*__ptr, asStack_162bc, &sStack_1641c);
        if (iVar7 < 0) {
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (2 < DAT_00067db4)) {
                piVar15 = __errno_location();
                pcVar10 = strerror(*piVar15);
                snprintf(acStack_10828, 0x800, "API failed (%s)%s (%d)",
                         pcVar10, " - API will not be available", *__ptr);
                FUN_00020f58(3, acStack_10828, 0);
            }
            break;
        }
        uVar31 = FUN_00015ff8(asStack_162bc, &uStack_16420, &bStack_16422);
        if ((DAT_00068bd5 != '\0') &&
            (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
              (6 < DAT_00067db4)))) {
            pcVar10 = "Accepted";
            if (uVar31 == 0) {
                pcVar10 = "Ignored";
            }
            snprintf(acStack_10028, 0x800, "API: connection from %s - %s",
                     uStack_16420, pcVar10);
            FUN_00020f58(7, acStack_10028, 0);
        }
        if (uVar31 != 0) {
            sVar18 = recv(iVar7, local_6028, 0xfff, 0);
            if (sVar18 < 0) {
                local_6028[0] = '\0';
                if ((DAT_00068bd5 != '\0') &&
                    (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                      (6 < DAT_00067db4)))) {
                    piVar15 = __errno_location();
                    pcVar10 = strerror(*piVar15);
                    snprintf(acStack_f828, 0x800, "API: recv failed: %s",
                             pcVar10);
                    FUN_00020f58(7, acStack_f828, 0);
                }
            } else {
                local_6028[sVar18] = '\0';
                if ((DAT_00068bd5 != '\0') &&
                    (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                      (6 < DAT_00067db4)))) {
                    snprintf(acStack_f028, 0x800,
                             "API: recv command: (%d) \'%s\'", sVar18,
                             local_6028);
                    FUN_00020f58(7, acStack_f028, 0);
                }
                pcVar10 = local_6028;
                DAT_00068aa8 = time((time_t *)0x0);
                puVar4[2] = (undefined1 *)puVar4[1];
                *(undefined1 *)puVar4[1] = 0;
                *(undefined1 *)((int)puVar4 + 0xd) = 0;
                if (local_6028[0] != '{') {
                    pcVar32 = strchr(pcVar10, 0x7c);
                    uVar31 = 0;
                    if (pcVar32 == (char *)0x0) {
                        pcStack_16440 = (char *)0x0;
                    } else {
                        pcStack_16440 = pcVar32 + 1;
                        *pcVar32 = '\0';
                    }
                LAB_0001eecc:
                    pcVar32 = strchr(pcVar10, 0x2b);
                    if (pcVar32 == (char *)0x0) {
                        uStack_16421 = 0;
                        bVar1 = false;
                        pcStack_16438 = (char *)0x0;
                    } else {
                        bVar1 = true;
                        uStack_16421 = 1;
                        sVar8 = strlen(pcVar10);
                        pcStack_16438 = (char *)malloc(sVar8 + 3);
                        if (pcStack_16438 == (char *)0x0) {
                            snprintf(acStack_e828, 0x800,
                                     "OOM cmdsbuf in %s %s():%d", "api.c",
                                     &DAT_0004a43c, 0x152e);
                            FUN_00020f58(3, acStack_e828, 1);
                            FUN_0003eba0(1);
                        }
                        pcStack_16440 = (char *)0x0;
                        pcStack_16438[0] = '|';
                        pcStack_16438[1] = '\0';
                    }
                    if (!bVar1)
                        goto LAB_0001ef7c;
                    do {
                        pcVar32 = strchr(pcVar10, 0x2b);
                        if (pcVar32 == (char *)0x0) {
                            pcVar12 = (char *)0x0;
                        } else {
                            pcVar12 = pcVar32 + 1;
                            *pcVar32 = '\0';
                        }
                        if (*pcVar10 != '\0') {
                            if (DAT_000677c8 != (char *)0x0)
                                goto LAB_0001ef88;
                            goto LAB_0001f24c;
                        }
                    LAB_0001ef5c:
                        bVar26 = bVar1;
                        if (pcVar12 == (char *)0x0) {
                            bVar26 = false;
                        }
                        if (!bVar26)
                            goto LAB_0001f660;
                        pcVar10 = pcVar12;
                    } while (bVar1);
                LAB_0001ef7c:
                    pcVar12 = pcVar10;
                    if (DAT_000677c8 != (char *)0x0) {
                    LAB_0001ef88:
                        ppcVar34 = &DAT_000677c8;
                        iVar29 = 0;
                        pcVar32 = DAT_000677c8;
                        do {
                            iVar19 = strcmp(pcVar10, pcVar32);
                            if (iVar19 == 0) {
                                sprintf(&cStack_16384, "|%s|", pcVar10);
                                if (bVar1) {
                                    pcVar32 =
                                        strstr(pcStack_16438, &cStack_16384);
                                    if (pcVar32 != (char *)0x0)
                                        goto LAB_0001ef5c;
                                    sVar8 = strlen(pcStack_16438);
                                    pcVar32 =
                                        stpcpy(pcStack_16438 + sVar8, pcVar10);
                                    pcVar32[0] = '|';
                                    pcVar32[1] = '\0';
                                    FUN_00015e08(puVar4, pcVar10, uVar31,
                                                 &uStack_16421);
                                    if ((&DAT_000677d1)[iVar29 * 0xc] == '\0') {
                                        FUN_00018ad4(
                                            puVar4, 0x2d, 0,
                                            (&DAT_000677c8)[iVar29 * 3],
                                            uVar31);
                                        FUN_00016d98(puVar4, uVar31);
                                        goto LAB_0001f094;
                                    }
                                }
                                uVar30 = (uint)bStack_16422;
                                p_Var22 = *pp_Var11;
                                if (((p_Var22[uVar30] == p_Var22[0x57]) ||
                                     (pcVar10 =
                                          strstr(*(char **)(&DAT_00073188 +
                                                            (p_Var22[uVar30] -
                                                             p_Var22[0x41]) *
                                                                4),
                                                 &cStack_16384),
                                      pcVar10 != (char *)0x0)) ||
                                    (iVar19 = strncmp(acStack_16383,
                                                      "pool_change", 0xb),
                                     iVar19 == 0)) {
                                    (**(code **)(&DAT_000677cc + iVar29 * 0xc))(
                                        puVar4, iVar7, pcStack_16440, uVar31,
                                        uVar30);
                                } else {
                                    FUN_00018ad4(puVar4, 0x2d, 0,
                                                 (&DAT_000677c8)[iVar29 * 3],
                                                 uVar31);
                                    if ((DAT_00068bd5 != '\0') &&
                                        (((DAT_00074500 != '\0' ||
                                           (DAT_00068bd4 != '\0')) ||
                                          (6 < DAT_00067db4)))) {
                                        snprintf(acStack_e028, 0x800,
                                                 "API: access denied to \'%s\' "
                                                 "for \'%s\' command",
                                                 uStack_16420,
                                                 (&DAT_000677c8)[iVar29 * 3]);
                                        FUN_00020f58(7, acStack_e028, 0);
                                    }
                                }
                                goto joined_r0x0001f07c;
                            }
                            ppcVar34 = ppcVar34 + 3;
                            pcVar32 = *ppcVar34;
                            iVar29 = iVar29 + 1;
                        } while (pcVar32 != (char *)0x0);
                        if (bVar1) {
                        LAB_0001f24c:
                            FUN_00015e08(puVar4, pcVar10, uVar31,
                                         &uStack_16421);
                        }
                    }
                    FUN_00018ad4(puVar4, 0xe, 0, 0, uVar31);
                joined_r0x0001f07c:
                    if (bVar1) {
                        FUN_00016d98(puVar4, uVar31);
                    } else {
                        FUN_00016f14(puVar4[1],
                                     *(undefined1 *)((int)puVar4 + 0xd), iVar7,
                                     uVar31);
                    }
                LAB_0001f094:
                    if (!bVar1)
                        goto LAB_0001f09c;
                    goto LAB_0001ef5c;
                }
                piStack_16470 =
                    (int *)FUN_00047320(pcVar10, sVar18, 0, auStack_1623c);
                if ((piStack_16470 == (int *)0x0) || (*piStack_16470 != 0)) {
                    uVar21 = 0x17;
                } else {
                    piVar15 = (int *)FUN_000480fc(piStack_16470, "command");
                    if (piVar15 == (int *)0x0) {
                        uVar21 = 0x18;
                    } else {
                        if (*piVar15 == 2) {
                            pcVar10 = (char *)FUN_00048630();
                            piVar15 =
                                (int *)FUN_000480fc(piStack_16470, "parameter");
                            if (piVar15 == (int *)0x0) {
                                pcStack_16440 = (char *)0x0;
                            } else {
                                iVar29 = *piVar15;
                                if (iVar29 == 2) {
                                    pcStack_16440 = (char *)FUN_00048630();
                                } else if (iVar29 == 3) {
                                    uVar21 = FUN_0004888c();
                                    pcStack_16440 = acStack_4028;
                                    sprintf(pcStack_16440, "%d", uVar21);
                                } else if (iVar29 == 4) {
                                    uVar36 = FUN_00048938();
                                    pcStack_16440 = acStack_4028;
                                    sprintf(pcStack_16440, "%f", (int)uVar36,
                                            (int)((ulonglong)uVar36 >> 0x20));
                                } else {
                                    pcStack_16440 = (char *)0x0;
                                }
                            }
                            goto LAB_0001eecc;
                        }
                        uVar21 = 0xe;
                    }
                }
                FUN_00018ad4(puVar4, uVar21, 0, 0, 1);
                FUN_00016f14(puVar4[1], *(undefined1 *)((int)puVar4 + 0xd),
                             iVar7, 1);
            LAB_0001f660:
                if (bVar1) {
                    FUN_00016f14(puVar4[1], *(undefined1 *)((int)puVar4 + 0xd),
                                 iVar7, uVar31);
                }
            LAB_0001f09c:
                if (piStack_16470 == (int *)0x0) {
                    uVar31 = 0;
                } else {
                    uVar31 = uVar31 & 1;
                }
                if (((uVar31 != 0) && (*piStack_16470 == 0)) &&
                    (piStack_16470[1] != -1)) {
                    piVar15 = piStack_16470 + 1;
                    DataMemoryBarrier(0xb);
                    do {
                        iVar29 = *piVar15;
                        bVar26 = (bool)hasExclusiveAccess(piVar15);
                    } while (!bVar26);
                    *piVar15 = iVar29 + -1;
                    if (iVar29 + -1 == 0) {
                        FUN_00048a34(piStack_16470);
                    }
                }
            }
        }
        close(iVar7);
    }
    __pthread_unregister_cancel(a_Stack_16140);
    FUN_00017900(__ptr);
    free(__ptr);
    if ((DAT_00068bd5 != '\0') &&
        (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
          (6 < DAT_00067db4)))) {
        if (DAT_00068a7d == '\0') {
            if (DAT_00068a7e == '\0') {
                pcVar10 = "UNKNOWN!";
                if (DAT_00068a7c != '\0') {
                    pcVar10 = "BYE";
                }
            } else {
                pcVar10 = "RESTART";
            }
        } else {
            pcVar10 = "QUIT";
        }
        snprintf(acStack_d828, 0x800, "API: terminating due to: %s", pcVar10);
        FUN_00020f58(7, acStack_d828, 0);
    }
    iVar7 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00068a88);
    if (iVar7 != 0) {
        FUN_00017604(&DAT_0004a43c, 0x1591);
    }
    if (DAT_00068a7e == '\0') {
        if (DAT_00068a7d == '\0')
            goto LAB_0001f820;
        iVar7 = FUN_00025164(auStack_163c4, 0, FUN_000179f4);
        if (iVar7 != 0) {
            iVar7 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00068a88);
            if (iVar7 != 0) {
                FUN_00017668(&DAT_0004a43c, 0x15a0);
            }
            (*DAT_00067ed8)();
            builtin_strncpy(local_c828,
                            "API failed to initiate a clean quit - aborti",
                            0x2c);
            uStack_c7fc = 0x676e;
            local_c7fa = 0;
            FUN_00020f58(3, local_c828, 1);
            FUN_0003eba0(1);
        }
    } else {
        iVar7 = FUN_00025164(auStack_163c4, 0, FUN_00017b7c);
        if (iVar7 != 0) {
            iVar7 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00068a88);
            if (iVar7 != 0) {
                FUN_00017668(&DAT_0004a43c, 0x1597);
            }
            (*DAT_00067ed8)();
            builtin_strncpy(local_d028,
                            "API failed to initiate a restart - aborting",
                            0x2c);
            FUN_00020f58(3, local_d028, 1);
            FUN_0003eba0(1);
        }
    }
    pthread_detach(pStack_163b8);
LAB_0001f820:
    iVar7 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00068a88);
    if (iVar7 != 0) {
        FUN_00017668(&DAT_0004a43c, 0x15a6);
    }
    (*DAT_00067ed8)();
    return;
}

void FUN_0001fd14(undefined4 *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    char cVar1;
    void *pvVar2;
    undefined4 *puVar3;
    undefined4 uVar4;
    int iVar5;
    int iVar6;
    undefined4 *puVar7;
    size_t __nmemb;
    char acStack_818[2048];

    if (*(char *)(param_1 + 1) != '\0') {
        snprintf(
            acStack_818, 0x800,
            "List %s store can\'t %s() - from %s %s() line %d in %s %s():%d",
            *param_1, "k_alloc_items", param_2, param_3, param_4, "klist.c",
            "k_alloc_items", 0x13);
        FUN_00020f58(3, acStack_818, 1);
        FUN_0003eba0(1);
    }
    iVar6 = param_1[10];
    if (iVar6 < 1) {
        __nmemb = param_1[9];
    } else {
        iVar5 = param_1[6];
        if (iVar6 <= iVar5) {
            return;
        }
        __nmemb = param_1[9];
        if (iVar6 < (int)(iVar5 + __nmemb)) {
            __nmemb = iVar6 - iVar5;
        }
    }
    iVar6 = param_1[0xc];
    param_1[0xc] = iVar6 + 1;
    pvVar2 = realloc((void *)param_1[0xd], (iVar6 + 1) * 4);
    param_1[0xd] = pvVar2;
    if (pvVar2 == (void *)0x0) {
        snprintf(acStack_818, 0x800,
                 "List %s item_memory failed to realloc count=%d in %s %s():%d",
                 *param_1, param_1[0xc], "klist.c", "k_alloc_items", 0x21);
        FUN_00020f58(3, acStack_818, 1);
        FUN_0003eba0(1);
    }
    puVar3 = (undefined4 *)calloc(__nmemb, 0x10);
    if (puVar3 == (undefined4 *)0x0) {
        snprintf(acStack_818, 0x800,
                 "List %s failed to calloc %d new items - total was %d, limit "
                 "was %d in %s %s():%d",
                 *param_1, __nmemb, param_1[6], param_1[10], "klist.c",
                 "k_alloc_items", 0x26);
        FUN_00020f58(3, acStack_818, 1);
        FUN_0003eba0(1);
    }
    *(undefined4 **)(param_1[0xd] + (param_1[0xc] + 0x3fffffff) * 4) = puVar3;
    uVar4 = *param_1;
    param_1[7] = __nmemb;
    param_1[8] = __nmemb;
    param_1[6] = param_1[6] + __nmemb;
    *puVar3 = uVar4;
    puVar3[1] = 0;
    puVar3[2] = puVar3 + 4;
    if (2 < (int)__nmemb) {
        puVar7 = puVar3 + 8;
        do {
            puVar7[-4] = uVar4;
            puVar7[-3] = puVar7 + -8;
            puVar7[-2] = puVar7;
            puVar7 = puVar7 + 4;
        } while (puVar7 != puVar3 + __nmemb * 4);
    }
    iVar6 = __nmemb + 0xfffffff;
    cVar1 = *(char *)(param_1 + 0xb);
    puVar3[iVar6 * 4] = uVar4;
    param_1[3] = puVar3;
    puVar7 = puVar3 + iVar6 * 4;
    puVar7[1] = puVar3 + iVar6 * 4 + -4;
    puVar7[2] = 0;
    if (cVar1 != '\0') {
        param_1[4] = puVar7;
    }
    do {
        iVar6 = param_1[0xe];
        param_1[0xe] = iVar6 + 1;
        pvVar2 = realloc((void *)param_1[0xf], (iVar6 + 1) * 4);
        param_1[0xf] = pvVar2;
        if (pvVar2 == (void *)0x0) {
            snprintf(
                acStack_818, 0x800,
                "List %s data_memory failed to realloc count=%d in %s %s():%d",
                *param_1, param_1[0xe], "klist.c", "k_alloc_items", 0x45);
            FUN_00020f58(3, acStack_818, 1);
            FUN_0003eba0(1);
        }
        pvVar2 = calloc(1, param_1[5]);
        puVar3[3] = pvVar2;
        if (pvVar2 == (void *)0x0) {
            snprintf(acStack_818, 0x800,
                     "List %s failed to calloc item data in %s %s():%d",
                     *param_1, "klist.c", "k_alloc_items", 0x49);
            FUN_00020f58(3, acStack_818, 1);
            FUN_0003eba0(1);
            pvVar2 = (void *)puVar3[3];
        }
        *(void **)(param_1[0xf] + (param_1[0xe] + 0x3fffffff) * 4) = pvVar2;
        puVar3 = (undefined4 *)puVar3[2];
    } while (puVar3 != (undefined4 *)0x0);
    return;
}

undefined4 *FUN_00020050(undefined4 *param_1)

{
    undefined1 uVar1;
    undefined4 *puVar2;
    undefined4 uVar3;
    undefined4 uVar4;
    char acStack_810[2052];

    puVar2 = (undefined4 *)calloc(1, 0x40);
    uVar3 = *param_1;
    if (puVar2 == (undefined4 *)0x0) {
        snprintf(acStack_810, 0x800,
                 "Failed to calloc store for %s in %s %s():%d", uVar3,
                 "klist.c", "k_new_store", 0x55);
        FUN_00020f58(3, acStack_810, 1);
        FUN_0003eba0(1);
        uVar3 = *param_1;
    }
    uVar4 = param_1[2];
    uVar1 = *(undefined1 *)(param_1 + 0xb);
    *puVar2 = uVar3;
    puVar2[2] = uVar4;
    *(undefined1 *)(puVar2 + 0xb) = uVar1;
    *(undefined1 *)(puVar2 + 1) = 1;
    return puVar2;
}

undefined4 *FUN_000200f8(undefined4 param_1, undefined4 param_2, int param_3,
                         int param_4, undefined1 param_5, undefined4 param_6,
                         undefined4 param_7, undefined4 param_8)

{
    undefined4 *puVar1;
    pthread_mutex_t *__mutex;
    int iVar2;
    int *piVar3;
    char acStack_820[2048];

    if (param_3 < 1) {
        snprintf(
            acStack_820, 0x800,
            "Invalid new list %s with allocate %d must be > 0 in %s %s():%d",
            param_1, param_3, "klist.c", "_k_new_list", 100);
        FUN_00020f58(3, acStack_820, 1);
        FUN_0003eba0(1);
    }
    if (param_4 < 0) {
        snprintf(acStack_820, 0x800,
                 "Invalid new list %s with limit %d must be >= 0 in %s %s():%d",
                 param_1, param_4, "klist.c", "_k_new_list", 0x67);
        FUN_00020f58(3, acStack_820, 1);
        FUN_0003eba0(1);
    }
    puVar1 = (undefined4 *)calloc(1, 0x40);
    if (puVar1 == (undefined4 *)0x0) {
        snprintf(acStack_820, 0x800, "Failed to calloc list %s in %s %s():%d",
                 param_1, "klist.c", "_k_new_list", 0x6b);
        FUN_00020f58(3, acStack_820, 1);
        FUN_0003eba0(1);
    }
    *(undefined1 *)(puVar1 + 1) = 0;
    __mutex = (pthread_mutex_t *)calloc(1, 0x38);
    puVar1[2] = __mutex;
    if (__mutex == (pthread_mutex_t *)0x0) {
        snprintf(acStack_820, 0x800,
                 "Failed to calloc lock for list %s in %s %s():%d", param_1,
                 "klist.c", "_k_new_list", 0x71);
        FUN_00020f58(3, acStack_820, 1);
        FUN_0003eba0(1);
        __mutex = (pthread_mutex_t *)puVar1[2];
    }
    iVar2 = pthread_mutex_init(__mutex, (pthread_mutexattr_t *)0x0);
    if (iVar2 != 0) {
        piVar3 = __errno_location();
        snprintf(acStack_820, 0x800,
                 "Failed to pthread_mutex_init errno=%d in %s %s():%d", *piVar3,
                 "klist.c", "_k_new_list", 0x73);
        FUN_00020f58(3, acStack_820, 1);
        FUN_0003eba0(1);
    }
    iVar2 = pthread_rwlock_init((pthread_rwlock_t *)(__mutex + 1),
                                (pthread_rwlockattr_t *)0x0);
    if (iVar2 != 0) {
        piVar3 = __errno_location();
        snprintf(acStack_820, 0x800,
                 "Failed to pthread_rwlock_init errno=%d in %s %s():%d",
                 *piVar3, "klist.c", "_k_new_list", 0x73);
        FUN_00020f58(3, acStack_820, 1);
        FUN_0003eba0(1);
    }
    *puVar1 = param_1;
    puVar1[5] = param_2;
    puVar1[9] = param_3;
    puVar1[10] = param_4;
    *(undefined1 *)(puVar1 + 0xb) = param_5;
    FUN_0001fd14(puVar1, param_6, param_7, param_8);
    return puVar1;
}

int FUN_000203a8(int param_1)

{
    int iVar1;
    int iVar2;

    iVar2 = *(int *)(param_1 + 0xc);
    if (iVar2 == 0) {
        if (*(char *)(param_1 + 4) == '\0') {
            FUN_0001fd14();
            iVar2 = *(int *)(param_1 + 0xc);
            if (iVar2 != 0)
                goto LAB_000203bc;
        }
        return 0;
    }
LAB_000203bc:
    iVar1 = *(int *)(iVar2 + 8);
    *(int *)(param_1 + 0xc) = iVar1;
    if (iVar1 == 0) {
        if (*(char *)(param_1 + 0x2c) != '\0') {
            *(undefined4 *)(param_1 + 0x10) = 0;
        }
    } else {
        *(undefined4 *)(iVar1 + 4) = 0;
    }
    *(undefined4 *)(iVar2 + 8) = 0;
    *(undefined4 *)(iVar2 + 4) = 0;
    *(int *)(param_1 + 0x1c) = *(int *)(param_1 + 0x1c) + -1;
    return iVar2;
}

int FUN_00020430(int param_1)

{
    int iVar1;

    iVar1 = FUN_000203a8();
    if (iVar1 != 0) {
        memset(*(void **)(iVar1 + 0xc), 0, *(size_t *)(param_1 + 0x14));
    }
    return iVar1;
}

void FUN_0002045c(undefined4 *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    int iVar1;
    int iVar2;
    char acStack_810[2052];

    if (*(char *)(param_1 + 0xb) == '\0') {
        snprintf(acStack_810, 0x800,
                 "List %s can\'t %s() - do_tail is false - from %s %s() line "
                 "%d in %s %s():%d",
                 *param_1, "_k_unlink_tail", param_2, param_3, param_4,
                 "klist.c", "_k_unlink_tail", 0xb5);
        FUN_00020f58(3, acStack_810, 1);
        FUN_0003eba0(1);
    }
    iVar1 = param_1[4];
    if (iVar1 != 0) {
        iVar2 = *(int *)(iVar1 + 4);
        param_1[4] = iVar2;
        if (iVar2 == 0) {
            param_1[3] = 0;
        } else {
            *(undefined4 *)(iVar2 + 8) = 0;
        }
        *(undefined4 *)(iVar1 + 8) = 0;
        *(undefined4 *)(iVar1 + 4) = 0;
        param_1[7] = param_1[7] + -1;
    }
    return;
}

void FUN_00020524(int *param_1, int *param_2, undefined4 param_3,
                  undefined4 param_4, undefined4 param_5)

{
    char acStack_810[2048];

    if (*param_2 != *param_1) {
        snprintf(acStack_810, 0x800,
                 "List %s can\'t %s() a %s item - from %s %s() line %d in %s "
                 "%s():%d",
                 *param_1, "_k_add_head", *param_2, param_3, param_4, param_5,
                 "klist.c", "_k_add_head", 0xcd);
        FUN_00020f58(3, acStack_810, 1);
        FUN_0003eba0(1);
    }
    param_2[1] = 0;
    param_2[2] = param_1[3];
    if (param_1[3] != 0) {
        *(int **)(param_1[3] + 4) = param_2;
    }
    param_1[3] = (int)param_2;
    if (((char)param_1[0xb] != '\0') && (param_1[4] == 0)) {
        param_1[4] = (int)param_2;
    }
    param_1[7] = param_1[7] + 1;
    param_1[8] = param_1[8] + 1;
    return;
}

void FUN_000205f8(int *param_1, int *param_2, undefined4 param_3,
                  undefined4 param_4, undefined4 param_5)

{
    int iVar1;
    char acStack_818[2052];

    if (*param_2 != *param_1) {
        snprintf(acStack_818, 0x800,
                 "List %s can\'t %s() a %s item - from %s %s() line %d in %s "
                 "%s():%d",
                 *param_1, "_k_add_tail", *param_2, param_3, param_4, param_5,
                 "klist.c", "_k_add_tail", 0xec);
        FUN_00020f58(3, acStack_818, 1);
        FUN_0003eba0(1);
    }
    if ((char)param_1[0xb] == '\0') {
        snprintf(acStack_818, 0x800,
                 "List %s can\'t %s() - do_tail is false - from %s %s() line "
                 "%d in %s %s():%d",
                 *param_1, "_k_add_tail", param_3, param_4, param_5, "klist.c",
                 "_k_add_tail", 0xf1);
        FUN_00020f58(3, acStack_818, 1);
        FUN_0003eba0(1);
    }
    iVar1 = param_1[4];
    param_2[2] = 0;
    param_2[1] = iVar1;
    if (param_1[4] != 0) {
        *(int **)(param_1[4] + 8) = param_2;
    }
    param_1[4] = (int)param_2;
    if (param_1[3] == 0) {
        param_1[3] = (int)param_2;
    }
    param_1[7] = param_1[7] + 1;
    param_1[8] = param_1[8] + 1;
    return;
}

void FUN_00020744(int *param_1, int *param_2, int param_3, undefined4 param_4,
                  undefined4 param_5, undefined4 param_6)

{
    char acStack_818[2052];

    if (*param_2 != *param_1) {
        snprintf(acStack_818, 0x800,
                 "List %s can\'t %s() a %s item - from %s %s() line %d in %s "
                 "%s():%d",
                 *param_1, "_k_insert_before", *param_2, param_4, param_5,
                 param_6, "klist.c", "_k_insert_before", 0x106);
        FUN_00020f58(3, acStack_818, 1);
        FUN_0003eba0(1);
    }
    if (param_3 == 0) {
        snprintf(acStack_818, 0x800,
                 "%s() (%s) can\'t before a null item - from %s %s() line %d "
                 "in %s %s():%d",
                 "_k_insert_before", *param_1, param_4, param_5, param_6,
                 "klist.c", "_k_insert_before", 0x10b);
        FUN_00020f58(3, acStack_818, 1);
        FUN_0003eba0(1);
    }
    param_2[2] = param_3;
    param_2[1] = *(int *)(param_3 + 4);
    if (*(int *)(param_3 + 4) == 0) {
        param_1[3] = (int)param_2;
    } else {
        *(int **)(*(int *)(param_3 + 4) + 8) = param_2;
    }
    *(int **)(param_3 + 4) = param_2;
    param_1[7] = param_1[7] + 1;
    param_1[8] = param_1[8] + 1;
    return;
}

void FUN_0002088c(int *param_1, int *param_2, int param_3, undefined4 param_4,
                  undefined4 param_5, undefined4 param_6)

{
    char acStack_818[2052];

    if (*param_2 != *param_1) {
        snprintf(acStack_818, 0x800,
                 "List %s can\'t %s() a %s item - from %s %s() line %d in %s "
                 "%s():%d",
                 *param_1, "_k_insert_after", *param_2, param_4, param_5,
                 param_6, "klist.c", "_k_insert_after", 0x11e);
        FUN_00020f58(3, acStack_818, 1);
        FUN_0003eba0(1);
    }
    if (param_3 == 0) {
        snprintf(acStack_818, 0x800,
                 "%s() (%s) can\'t after a null item - from %s %s() line %d in "
                 "%s %s():%d",
                 "_k_insert_after", *param_1, param_4, param_5, param_6,
                 "klist.c", "_k_insert_after", 0x123);
        FUN_00020f58(3, acStack_818, 1);
        FUN_0003eba0(1);
    }
    param_2[1] = param_3;
    param_2[2] = *(int *)(param_3 + 8);
    if (*(int *)(param_3 + 8) == 0) {
        if ((char)param_1[0xb] != '\0') {
            param_1[4] = (int)param_2;
        }
    } else {
        *(int **)(*(int *)(param_3 + 8) + 4) = param_2;
    }
    *(int **)(param_3 + 8) = param_2;
    param_1[7] = param_1[7] + 1;
    param_1[8] = param_1[8] + 1;
    return;
}

void FUN_000209e0(int *param_1, int *param_2, undefined4 param_3,
                  undefined4 param_4, undefined4 param_5)

{
    int iVar1;
    char acStack_810[2048];

    if (*param_2 != *param_1) {
        snprintf(acStack_810, 0x800,
                 "List %s can\'t %s() a %s item - from %s %s() line %d in %s "
                 "%s():%d",
                 *param_1, "_k_unlink_item", *param_2, param_3, param_4,
                 param_5, "klist.c", "_k_unlink_item", 0x138);
        FUN_00020f58(3, acStack_810, 1);
        FUN_0003eba0(1);
    }
    iVar1 = param_2[2];
    if (param_2[1] != 0) {
        *(int *)(param_2[1] + 8) = iVar1;
        iVar1 = param_2[2];
    }
    if (iVar1 != 0) {
        *(int *)(iVar1 + 4) = param_2[1];
    }
    if ((int *)param_1[3] == param_2) {
        param_1[3] = param_2[2];
    }
    if (((char)param_1[0xb] != '\0') && ((int *)param_1[4] == param_2)) {
        param_1[4] = param_2[1];
    }
    param_2[2] = 0;
    param_2[1] = 0;
    param_1[7] = param_1[7] + -1;
    return;
}

void FUN_00020acc(int *param_1, int *param_2, undefined4 param_3,
                  undefined4 param_4, undefined4 param_5)

{
    int iVar1;
    char acStack_818[2048];

    if (*param_1 != *param_2) {
        snprintf(acStack_818, 0x800,
                 "List %s can\'t %s() to a %s list - from %s %s() line %d in "
                 "%s %s():%d",
                 *param_1, "_k_list_transfer_to_head", *param_2, param_3,
                 param_4, param_5, "klist.c", "_k_list_transfer_to_head",
                 0x152);
        FUN_00020f58(3, acStack_818, 1);
        FUN_0003eba0(1);
    }
    if ((char)param_1[0xb] == '\0') {
        snprintf(acStack_818, 0x800,
                 "List %s can\'t %s() - do_tail is false - from %s %s() line "
                 "%d in %s %s():%d",
                 *param_1, "_k_list_transfer_to_head", param_3, param_4,
                 param_5, "klist.c", "_k_list_transfer_to_head", 0x157);
        FUN_00020f58(3, acStack_818, 1);
        FUN_0003eba0(1);
    }
    if (param_1[3] != 0) {
        if (param_2[3] == 0) {
            param_2[4] = param_1[4];
            iVar1 = 0;
        } else {
            *(int *)(param_2[3] + 4) = param_1[4];
            iVar1 = param_2[3];
        }
        *(int *)(param_1[4] + 8) = iVar1;
        param_2[3] = param_1[3];
        param_1[4] = 0;
        param_1[3] = 0;
        param_2[7] = param_2[7] + param_1[7];
        param_1[7] = 0;
        param_2[8] = param_2[8] + param_1[8];
        param_1[8] = 0;
    }
    return;
}

void FUN_00020c3c(int *param_1, int *param_2, undefined4 param_3,
                  undefined4 param_4, undefined4 param_5)

{
    int iVar1;
    char acStack_818[2048];

    if (*param_1 != *param_2) {
        snprintf(acStack_818, 0x800,
                 "List %s can\'t %s() to a %s list - from %s %s() line %d in "
                 "%s %s():%d",
                 *param_1, "_k_list_transfer_to_tail", *param_2, param_3,
                 param_4, param_5, "klist.c", "_k_list_transfer_to_tail",
                 0x170);
        FUN_00020f58(3, acStack_818, 1);
        FUN_0003eba0(1);
    }
    if ((char)param_1[0xb] == '\0') {
        snprintf(acStack_818, 0x800,
                 "List %s can\'t %s() - do_tail is false - from %s %s() line "
                 "%d in %s %s():%d",
                 *param_1, "_k_list_transfer_to_tail", param_3, param_4,
                 param_5, "klist.c", "_k_list_transfer_to_tail", 0x175);
        FUN_00020f58(3, acStack_818, 1);
        FUN_0003eba0(1);
    }
    iVar1 = param_1[3];
    if (iVar1 != 0) {
        if (param_2[4] == 0) {
            param_2[3] = iVar1;
            iVar1 = 0;
        } else {
            *(int *)(param_2[4] + 8) = iVar1;
            iVar1 = param_2[4];
        }
        *(int *)(param_1[3] + 4) = iVar1;
        param_2[4] = param_1[4];
        param_1[4] = 0;
        param_1[3] = 0;
        param_2[7] = param_2[7] + param_1[7];
        param_1[7] = 0;
        param_2[8] = param_2[8] + param_1[8];
        param_1[8] = 0;
    }
    return;
}

undefined4 FUN_00020da8(undefined4 *param_1, undefined4 param_2,
                        undefined4 param_3, undefined4 param_4)

{
    int iVar1;
    int iVar2;
    pthread_mutex_t *__mutex;
    char acStack_810[2052];

    if (*(char *)(param_1 + 1) != '\0') {
        snprintf(
            acStack_810, 0x800,
            "List %s can\'t %s() a store - from %s %s() line %d in %s %s():%d",
            *param_1, "_k_free_list", param_2, param_3, param_4, "klist.c",
            "_k_free_list", 400);
        FUN_00020f58(3, acStack_810, 1);
        FUN_0003eba0(1);
    }
    if (0 < (int)param_1[0xc]) {
        iVar2 = 0;
        do {
            iVar1 = iVar2 * 4;
            iVar2 = iVar2 + 1;
            free(*(void **)(param_1[0xd] + iVar1));
        } while (iVar2 < (int)param_1[0xc]);
    }
    free((void *)param_1[0xd]);
    if (0 < (int)param_1[0xe]) {
        iVar2 = 0;
        do {
            iVar1 = iVar2 * 4;
            iVar2 = iVar2 + 1;
            free(*(void **)(param_1[0xf] + iVar1));
        } while (iVar2 < (int)param_1[0xe]);
    }
    free((void *)param_1[0xf]);
    __mutex = (pthread_mutex_t *)param_1[2];
    pthread_rwlock_destroy((pthread_rwlock_t *)(__mutex + 1));
    pthread_mutex_destroy(__mutex);
    free((void *)param_1[2]);
    free(param_1);
    return 0;
}

undefined4 FUN_00020ec4(undefined4 *param_1, undefined4 param_2,
                        undefined4 param_3, undefined4 param_4)

{
    char acStack_810[2052];

    if (*(char *)(param_1 + 1) == '\0') {
        snprintf(acStack_810, 0x800,
                 "Store %s can\'t %s() the list - from %s %s() line %d in %s "
                 "%s():%d",
                 *param_1, "_k_free_store", param_2, param_3, param_4,
                 "klist.c", "_k_free_store", 0x1a8);
        FUN_00020f58(3, acStack_810, 1);
        FUN_0003eba0(1);
    }
    free(param_1);
    return 0;
}

void FUN_00020f58(uint param_1, char *param_2, undefined4 param_3)

{
    FILE *__s;
    tm *ptVar1;
    int iVar2;
    size_t sVar3;
    byte bVar4;
    uint local_6c;
    uint local_68;
    uint local_64;
    char acStack_60[64];

    local_68 = (uint)DAT_00074500;
    if (local_68 == 0) {
        local_64 = local_68;
        FUN_000239a4(&local_68);
        local_6c = local_68;
        iVar2 = (int)local_64 / 1000;
        ptVar1 = localtime((time_t *)&local_6c);
        snprintf(acStack_60, 0x40, " [%d-%02d-%02d %02d:%02d:%02d.%03d] ",
                 ptVar1->tm_year + 0x76c, ptVar1->tm_mon + 1, ptVar1->tm_mday,
                 ptVar1->tm_hour, ptVar1->tm_min, ptVar1->tm_sec, iVar2);
        iVar2 = fileno(stderr);
        iVar2 = isatty(iVar2);
        if (iVar2 == 0) {
            fprintf(stderr, "%s%s\n", acStack_60, param_2);
            fflush(stderr);
        }
        if ((DAT_00068aac != '\0') &&
            ((DAT_00068ab0 != (FILE *)0x0 ||
              (DAT_00068ab0 =
                   fopen64((char *)&DAT_00068ad4, (char *)&DAT_00068ab4),
               DAT_00068ab0 != (FILE *)0x0)))) {
            __s = DAT_00068ab0;
            sVar3 = strlen(acStack_60);
            fwrite(acStack_60, sVar3, 1, __s);
            sVar3 = strlen(param_2);
            fwrite(param_2, sVar3, 1, DAT_00068ab0);
            fwrite(&DAT_0004c858, 1, 1, DAT_00068ab0);
            fflush(DAT_00068ab0);
        }
        if (param_1 == 3) {
            bVar4 = 0;
        } else {
            bVar4 = DAT_00073378 & 1;
        }
        if (bVar4 == 0) {
            FUN_00021244(acStack_60, param_2, param_3);
        }
        return;
    }
    syslog(param_1 | 0x80, "%s", param_2);
    return;
}

void FUN_00021138(undefined4 param_1)

{
    int iVar1;
    int *piVar2;
    char acStack_808[2048];

    iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000766e4);
    if (iVar1 == 0) {
        return;
    }
    piVar2 = __errno_location();
    snprintf(acStack_808, 0x800,
             "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar2,
             "logging.c", "my_log_curses", param_1);
    FUN_00020f58(3, acStack_808, 1);
    FUN_0003eba0(1);
    return;
}

void FUN_000211b8(void)

{
    int iVar1;
    int *piVar2;
    char acStack_808[2052];

    iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_000766e4);
    if (iVar1 == 0) {
        return;
    }
    piVar2 = __errno_location();
    snprintf(acStack_808, 0x800,
             "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar2,
             "logging.c", "my_log_curses", 0x34);
    FUN_00020f58(3, acStack_808, 1);
    FUN_0003eba0(1);
    return;
}

void FUN_00021244(undefined4 param_1, undefined4 param_2, int param_3)

{
    if (param_3 != 0) {
        pthread_mutex_trylock((pthread_mutex_t *)&DAT_000766e4);
        FUN_00021138(0x29);
        (*DAT_00067ed8)();
    }
    FUN_000211b8();
    printf("%s%s%s", param_1, param_2, &DAT_0004c844);
    FUN_00021138(0x36);
    (*DAT_00067ed8)();
    return;
}

void FUN_0002136c(int param_1, undefined4 param_2)

{
    undefined4 *puVar1;
    undefined4 uVar2;
    char acStack_818[2052];

    puVar1 = (undefined4 *)calloc(1, 0x20);
    if (puVar1 == (undefined4 *)0x0) {
        snprintf(acStack_818, 0x800, "Failed to calloc dupdata in %s %s():%d",
                 "noncedup.c", "dupalloc", 0x24);
        FUN_00020f58(3, acStack_818, 1);
        FUN_0003eba0(1);
    }
    *puVar1 = param_2;
    uVar2 = FUN_000200f8("Nonces", 0x10, 0x400, 0, 1, "noncedup.c", "dupalloc",
                         0x27);
    puVar1[1] = uVar2;
    uVar2 = FUN_00020050();
    *(undefined4 **)(param_1 + 0x18) = puVar1;
    puVar1[2] = uVar2;
    return;
}

undefined4 FUN_00021470(int param_1, int param_2, int param_3)

{
    bool bVar1;
    bool bVar2;
    int iVar3;
    int *piVar4;
    uint uVar5;
    int *piVar6;
    pthread_mutex_t *ppVar7;
    int iVar8;
    undefined4 uVar9;
    undefined4 extraout_s1;
    undefined4 local_830;
    undefined4 uStack_82c;
    char acStack_828[2052];

    piVar6 = *(int **)(param_1 + 0x18);
    if (piVar6 == (int *)0x0) {
        uVar9 = 0;
    } else {
        FUN_000239a4(&local_830);
        uVar5 = piVar6[4];
        piVar6[4] = uVar5 + 1;
        piVar6[5] = piVar6[5] + (uint)(0xfffffffe < uVar5);
        ppVar7 = *(pthread_mutex_t **)(piVar6[1] + 8);
        iVar3 = pthread_mutex_lock(ppVar7);
        if (iVar3 != 0) {
            piVar4 = __errno_location();
            snprintf(acStack_828, 0x800,
                     "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar4,
                     "noncedup.c", "isdupnonce", 0x46);
            FUN_00020f58(3, acStack_828, 1);
            FUN_0003eba0(1);
        }
        iVar3 = pthread_rwlock_wrlock((pthread_rwlock_t *)(ppVar7 + 1));
        if (iVar3 != 0) {
            piVar4 = __errno_location();
            snprintf(acStack_828, 0x800,
                     "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d",
                     *piVar4, "noncedup.c", "isdupnonce", 0x46);
            FUN_00020f58(3, acStack_828, 1);
            FUN_0003eba0(1);
        }
        iVar3 = *(int *)(piVar6[2] + 0x10);
        bVar2 = true;
        while (true) {
            bVar1 = bVar2;
            if (iVar3 == 0) {
                bVar1 = false;
            }
            if (!bVar1)
                break;
            if ((**(int **)(iVar3 + 0xc) == *(int *)(param_2 + 0x154)) &&
                ((*(int **)(iVar3 + 0xc))[1] == param_3)) {
                if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                    (bVar2 = false, 3 < DAT_00067db4)) {
                    bVar2 = false;
                    snprintf(acStack_828, 0x800, "%s%d: Duplicate nonce %08x",
                             *(undefined4 *)(*(int *)(param_1 + 4) + 8),
                             *(undefined4 *)(param_1 + 8), param_3);
                    FUN_00020f58(4, acStack_828, 0);
                }
            } else {
                iVar3 = *(int *)(iVar3 + 4);
                bVar2 = bVar1;
            }
        }
        if (bVar2) {
            iVar3 = FUN_000203a8(piVar6[1], "noncedup.c", "isdupnonce", 0x51);
            **(undefined4 **)(iVar3 + 0xc) = *(undefined4 *)(param_2 + 0x154);
            *(int *)(*(int *)(iVar3 + 0xc) + 4) = param_3;
            iVar8 = *(int *)(iVar3 + 0xc);
            *(undefined4 *)(iVar8 + 0xc) = uStack_82c;
            *(undefined4 *)(iVar8 + 8) = local_830;
            FUN_00020524(piVar6[2], iVar3, "noncedup.c", "isdupnonce", 0x55);
        }
        iVar3 = *(int *)(piVar6[2] + 0x10);
        while ((iVar3 != 0 &&
                (uVar9 = FUN_00023c94(*(int *)(iVar3 + 0xc) + 8, &local_830),
                 (double)(longlong)*piVar6 <
                     (double)CONCAT44(extraout_s1, uVar9)))) {
            uVar9 = FUN_0002045c(piVar6[2], "noncedup.c", "isdupnonce", 0x59);
            FUN_00020524(piVar6[1], uVar9, "noncedup.c", "isdupnonce", 0x5a);
            iVar3 = *(int *)(piVar6[2] + 0x10);
        }
        ppVar7 = *(pthread_mutex_t **)(piVar6[1] + 8);
        iVar3 = pthread_rwlock_unlock((pthread_rwlock_t *)(ppVar7 + 1));
        if (iVar3 != 0) {
            piVar4 = __errno_location();
            snprintf(acStack_828, 0x800,
                     "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d",
                     *piVar4, "noncedup.c", "isdupnonce", 0x5d);
            FUN_00020f58(3, acStack_828, 1);
            FUN_0003eba0(1);
        }
        iVar3 = pthread_mutex_unlock(ppVar7);
        if (iVar3 != 0) {
            piVar4 = __errno_location();
            snprintf(acStack_828, 0x800,
                     "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d",
                     *piVar4, "noncedup.c", "isdupnonce", 0x5d);
            FUN_00020f58(3, acStack_828, 1);
            FUN_0003eba0(1);
        }
        (*DAT_00067ed8)();
        uVar9 = 0;
        if (!bVar2) {
            uVar5 = piVar6[6];
            uVar9 = 1;
            piVar6[6] = uVar5 + 1;
            piVar6[7] = piVar6[7] + (uint)(0xfffffffe < uVar5);
        }
    }
    return uVar9;
}

void FUN_00021870(int param_1, byte *param_2, int param_3)

{
    byte *pbVar1;
    uint uVar2;
    int *piVar3;
    int *piVar4;
    int *piVar6;
    int iVar7;
    uint *puVar8;
    uint *puVar9;
    uint uVar10;
    byte *local_164;
    int local_14c;
    int local_148[7];
    uint local_12c;
    uint local_128[65];
    int *piVar5;

    if (0 < param_3) {
        local_164 = param_2;
        do {
            puVar9 = &local_12c;
            pbVar1 = local_164;
            do {
                puVar9 = puVar9 + 1;
                *puVar9 = (uint)pbVar1[1] << 0x10 | (uint)pbVar1[2] << 8 |
                          (uint)pbVar1[3] | (uint)*pbVar1 << 0x18;
                pbVar1 = pbVar1 + 4;
                puVar8 = local_128;
            } while (local_128 + 0xf != puVar9);
            do {
                uVar10 = puVar8[0xe];
                puVar9 = puVar8 + 1;
                uVar2 = *puVar9;
                puVar8[0x10] =
                    ((uVar10 >> 0x13 | uVar10 << 0xd) ^
                     (uVar10 >> 0x11 | uVar10 << 0xf) ^ uVar10 >> 10) +
                    puVar8[9] + *puVar8 +
                    ((uVar2 >> 0x12 | uVar2 << 0xe) ^
                     (uVar2 >> 7 | uVar2 << 0x19) ^ uVar2 >> 3);
                puVar8 = puVar9;
            } while (local_128 + 0x30 != puVar9);
            piVar3 = &local_14c;
            piVar4 = (int *)(param_1 + 0x88);
            piVar6 = piVar3;
            do {
                piVar5 = piVar4 + 1;
                piVar6 = piVar6 + 1;
                *piVar6 = *piVar4;
                piVar4 = piVar5;
            } while ((int *)(param_1 + 0xa8) != piVar5);
            iVar7 = 0;
            do {
                iVar7 = iVar7 + 1;
                piVar4 = (int *)(param_1 + 0x88);
            } while (iVar7 != 0x40);
            do {
                piVar3 = piVar3 + 1;
                piVar6 = piVar4 + 1;
                *piVar4 = *piVar3 + *piVar4;
                piVar4 = piVar6;
            } while (piVar5 != piVar6);
            local_164 = local_164 + 0x40;
        } while (param_2 + param_3 * 0x40 != local_164);
        return;
    }
    return;
}

void FUN_00021a6c(undefined4 *param_1)

{
    undefined4 *puVar1;
    undefined4 *puVar2;
    undefined4 *puVar3;

    puVar1 = (undefined4 *)0x67eb4;
    puVar2 = param_1 + 0x22;
    do {
        puVar1 = puVar1 + 1;
        puVar3 = puVar2 + 1;
        *puVar2 = *puVar1;
        puVar2 = puVar3;
    } while (puVar3 != param_1 + 0x2a);
    param_1[1] = 0;
    *param_1 = 0;
    return;
}

void FUN_00021a9c(int *param_1, void *param_2, uint param_3)

{
    uint __n;

    __n = 0x40 - param_1[1];
    if (param_3 <= __n) {
        __n = param_3;
    }
    memcpy((void *)((int)param_1 + param_1[1] + 8), param_2, __n);
    if (param_3 + param_1[1] < 0x40) {
        param_1[1] = param_3 + param_1[1];
        return;
    }
    param_3 = param_3 - __n;
    FUN_00021870(param_1, param_1 + 2, 1);
    FUN_00021870(param_1, (int)param_2 + __n, param_3 >> 6);
    memcpy(param_1 + 2, (void *)((int)param_2 + __n + (param_3 & 0xffffffc0)),
           param_3 & 0x3f);
    param_1[1] = param_3 & 0x3f;
    *param_1 = *param_1 + ((param_3 >> 6) + 1) * 0x40;
    return;
}

void FUN_00021b48(int *param_1, undefined1 *param_2)

{
    int iVar1;
    int iVar2;
    uint uVar3;
    int iVar4;
    int *piVar5;
    int *piVar6;
    int iVar7;
    int iVar8;
    int iVar9;
    undefined4 uVar10;
    bool bVar11;

    uVar3 = param_1[1];
    piVar5 = param_1 + 2;
    bVar11 = (uVar3 & 0x3f) < 0x38;
    if (bVar11) {
        iVar2 = 0x40;
    } else {
        iVar2 = 0x80;
    }
    if (bVar11) {
        iVar4 = 0x3c;
    } else {
        iVar4 = 0x7c;
    }
    iVar1 = (uVar3 + *param_1) * 8;
    if (bVar11) {
        iVar7 = 0x3d;
        iVar8 = 0x3e;
        iVar9 = 0x3f;
        uVar10 = 1;
    } else {
        iVar7 = 0x7d;
        iVar8 = 0x7e;
        iVar9 = 0x7f;
        uVar10 = 2;
    }
    memset((void *)((int)piVar5 + uVar3), 0, iVar2 - uVar3);
    *(undefined1 *)((int)param_1 + param_1[1] + 8) = 0x80;
    *(char *)((int)piVar5 + iVar9) = (char)iVar1;
    *(char *)((int)piVar5 + iVar8) = (char)((uint)iVar1 >> 8);
    *(char *)((int)piVar5 + iVar7) = (char)((uint)iVar1 >> 0x10);
    *(char *)((int)piVar5 + iVar4) = (char)((uint)iVar1 >> 0x18);
    FUN_00021870(param_1, piVar5, uVar10);
    piVar5 = param_1 + 0x22;
    do {
        param_2[3] = (char)*piVar5;
        piVar6 = piVar5 + 1;
        param_2[2] = (char)((uint)*piVar5 >> 8);
        param_2[1] = (char)*(undefined2 *)((int)piVar5 + 2);
        *param_2 = *(undefined1 *)((int)piVar5 + 3);
        piVar5 = piVar6;
        param_2 = param_2 + 4;
    } while (param_1 + 0x2a != piVar6);
    return;
}

void FUN_00021c34(undefined4 param_1, undefined4 param_2, undefined4 param_3)

{
    undefined4 *puVar1;
    undefined4 *puVar2;
    undefined4 local_b8;
    undefined4 local_b4;
    undefined4 auStack_30[9];

    puVar2 = (undefined4 *)0x67eb4;
    puVar1 = auStack_30;
    do {
        puVar2 = puVar2 + 1;
        *puVar1 = *puVar2;
        puVar1 = puVar1 + 1;
    } while (puVar2 != (undefined4 *)0x67ed4);
    local_b8 = 0;
    local_b4 = 0;
    FUN_00021a9c(&local_b8, param_1, param_2);
    FUN_00021b48(&local_b8, param_3);
    return;
}

undefined4 FUN_00021c98(void)

{
    return 0;
}

undefined4 FUN_00021ca0(int param_1, char *param_2, int param_3)

{
    size_t sVar1;
    int iVar2;
    int *piVar3;
    ssize_t sVar4;
    uint uVar5;
    __suseconds_t *p_Var6;
    uint uVar7;
    uint uVar8;
    size_t local_844;
    uint local_840;
    timeval local_830;
    fd_set local_828[16];

    uVar7 = *(uint *)(param_1 + 0x24c);
    if (((DAT_00073398 != '\0') && (DAT_00068bd5 != '\0')) &&
        ((DAT_00074500 != '\0' ||
          ((DAT_00068bd4 != '\0' || (6 < DAT_00067db4)))))) {
        snprintf((char *)local_828, 0x800, "SEND: %s", param_2);
        FUN_00020f58(7, local_828, 0);
    }
    local_844 = param_3 + 1;
    sVar1 = strlen(param_2);
    (param_2 + sVar1)[0] = '\n';
    (param_2 + sVar1)[1] = '\0';
    if ((int)local_844 < 1) {
        local_840 = 0;
        iVar2 = 0;
    } else {
        uVar5 = uVar7 + 0x1f;
        if (-1 < (int)uVar7) {
            uVar5 = uVar7;
        }
        uVar8 = uVar7 & 0x1f;
        if ((int)uVar7 < 1) {
            uVar8 = -(-uVar7 & 0x1f);
        }
        local_840 = 0;
        do {
            while (true) {
                local_830.tv_usec = 0;
                local_830.tv_sec = 1;
                while (true) {
                    p_Var6 = &local_830.tv_usec;
                    do {
                        p_Var6 = p_Var6 + 1;
                        *p_Var6 = 0;
                    } while (local_828[0].fds_bits + 0x1f != p_Var6);
                    local_828[0].fds_bits[(int)uVar5 >> 5] =
                        local_828[0].fds_bits[(int)uVar5 >> 5] |
                        1 << (uVar8 & 0xff);
                    iVar2 = select(uVar7 + 1, (fd_set *)0x0, local_828,
                                   (fd_set *)0x0, &local_830);
                    if (0 < iVar2)
                        break;
                    piVar3 = __errno_location();
                    if (*piVar3 != 4) {
                        return 1;
                    }
                }
                sVar4 = send(*(int *)(param_1 + 0x24c), param_2 + local_840,
                             local_844, 0x4000);
                if (-1 < sVar4)
                    break;
                piVar3 = __errno_location();
                if (*piVar3 != 0xb) {
                    return 2;
                }
            }
            local_840 = local_840 + sVar4;
            local_844 = local_844 - sVar4;
        } while (0 < (int)local_844);
        iVar2 = (int)local_840 >> 0x1f;
    }
    uVar5 = *(uint *)(param_1 + 0x1f0);
    uVar7 = *(uint *)(param_1 + 0x1f8);
    *(uint *)(param_1 + 0x1f0) = uVar5 + 1;
    uVar8 = *(uint *)(param_1 + 0x200);
    *(uint *)(param_1 + 500) =
        *(int *)(param_1 + 500) + (uint)(0xfffffffe < uVar5);
    *(uint *)(param_1 + 0x1f8) = uVar7 + local_840;
    *(uint *)(param_1 + 0x1fc) =
        *(int *)(param_1 + 0x1fc) + iVar2 + (uint)CARRY4(uVar7, local_840);
    *(uint *)(param_1 + 0x200) = uVar8 + local_840;
    *(uint *)(param_1 + 0x204) =
        *(int *)(param_1 + 0x204) + iVar2 + (uint)CARRY4(uVar8, local_840);
    return 0;
}

char FUN_00021f0c(int param_1, int param_2, int param_3)

{
    char cVar1;
    undefined4 uVar2;
    size_t __n;
    ssize_t sVar3;
    int iVar4;
    undefined4 uVar5;
    char local_c20[1024];
    char local_820[2048];

    uVar2 = *(undefined4 *)(param_1 + 600);
    uVar5 = *(undefined4 *)(param_1 + 0x248);
    if (param_3 == 0) {
        snprintf(local_c20, 0x400,
                 "CONNECT %s:%s HTTP/1.1\r\nHost: %s:%s\r\n\r\n", uVar2, uVar5,
                 uVar2, uVar5);
    } else {
        snprintf(local_c20, 0x400, "CONNECT %s:%s HTTP/1.0\r\n\r\n", uVar2,
                 uVar5);
    }
    if ((DAT_00068bd5 != '\0') &&
        (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
          (6 < DAT_00067db4)))) {
        snprintf(local_820, 0x800, "Sending proxy %s:%s - %s",
                 *(undefined4 *)(param_1 + 0x25c),
                 *(undefined4 *)(param_1 + 0x260), local_c20);
        FUN_00020f58(7, local_820, 0);
    }
    __n = strlen(local_c20);
    send(param_2, local_c20, __n, 0);
    sVar3 = recv(param_2, local_c20, 0xc, 0);
    if (sVar3 < 1) {
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (3 < DAT_00067db4)) {
            snprintf(local_820, 0x800,
                     "Couldn\'t read from proxy %s:%s after sending CONNECT",
                     *(undefined4 *)(param_1 + 0x25c),
                     *(undefined4 *)(param_1 + 0x260));
            FUN_00020f58(4, local_820, 0);
            return '\0';
        }
    } else {
        local_c20[sVar3] = '\0';
        if ((DAT_00068bd5 != '\0') &&
            (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
              (6 < DAT_00067db4)))) {
            snprintf(local_820, 0x800, "Received from proxy %s:%s - %s",
                     *(undefined4 *)(param_1 + 0x25c),
                     *(undefined4 *)(param_1 + 0x260), local_c20);
            FUN_00020f58(7, local_820, 0);
        }
        iVar4 = strcmp(local_c20, "HTTP/1.1 200");
        if ((iVar4 == 0) ||
            (iVar4 = strcmp(local_c20, "HTTP/1.0 200"), iVar4 == 0)) {
            do {
                sVar3 = recv(param_2, local_820, 1, 0);
                if (sVar3 == -1) {
                    local_c20[iVar4] = -1;
                    goto LAB_000221f4;
                }
                local_c20[iVar4] = local_820[0];
                iVar4 = iVar4 + 1;
                if (local_820[0] == -1)
                    goto LAB_000221f4;
            } while (iVar4 != 4);
            do {
                iVar4 = strncmp(local_c20, "\r\n\r\n", 4);
                cVar1 = DAT_00068bd5;
                if (iVar4 == 0) {
                    if (DAT_00068bd5 == '\0') {
                        return '\x01';
                    }
                    if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                        (DAT_00067db4 < 7)) {
                        return DAT_00068bd5;
                    }
                    snprintf(local_820, 0x800,
                             "Success negotiating with %s:%s HTTP proxy",
                             *(undefined4 *)(param_1 + 0x25c),
                             *(undefined4 *)(param_1 + 0x260));
                    FUN_00020f58(7, local_820, 0);
                    return cVar1;
                }
                local_c20[0] = local_c20[1];
                local_c20[1] = local_c20[2];
                local_c20[2] = local_c20[3];
                sVar3 = recv(param_2, local_820, 1, 0);
                if (sVar3 == -1) {
                    local_c20[3] = -1;
                    break;
                }
                local_c20[3] = local_820[0];
            } while (local_820[0] != -1);
        LAB_000221f4:
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (3 < DAT_00067db4)) {
                snprintf(local_820, 0x800,
                         "Couldn\'t read HTTP byte from proxy %s:%s",
                         *(undefined4 *)(param_1 + 0x25c),
                         *(undefined4 *)(param_1 + 0x260));
                FUN_00020f58(4, local_820, 0);
                return '\0';
            }
        } else if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                   (3 < DAT_00067db4)) {
            snprintf(local_820, 0x800, "HTTP Error from proxy %s:%s - %s",
                     *(undefined4 *)(param_1 + 0x25c),
                     *(undefined4 *)(param_1 + 0x260), local_c20);
            FUN_00020f58(4, local_820);
            return '\0';
        }
    }
    return '\0';
}

void FUN_000223c0(int param_1)

{
    if (*(undefined1 **)(param_1 + 0x250) != (undefined1 *)0x0) {
        **(undefined1 **)(param_1 + 0x250) = 0;
    }
    *(undefined1 *)(param_1 + 0x283) = 0;
    *(undefined1 *)(param_1 + 0x281) = 0;
    if (*(int *)(param_1 + 0x24c) != 0) {
        close(*(int *)(param_1 + 0x24c));
    }
    *(undefined4 *)(param_1 + 0x24c) = 0;
    return;
}

void FUN_00022400(int param_1)

{
    uint uVar1;

    uVar1 = fcntl(param_1, 3, 0);
    fcntl(param_1, 4, uVar1 & 0xfffff7ff);
    return;
}

bool FUN_00022428(uint param_1, uint param_2)

{
    int iVar1;
    __suseconds_t *p_Var2;
    uint uVar3;
    uint uVar4;
    timeval local_90;
    fd_set local_88;

    local_90.tv_sec = param_2 & ~((int)param_2 >> 0x1f);
    p_Var2 = &local_90.tv_usec;
    do {
        p_Var2 = p_Var2 + 1;
        *p_Var2 = 0;
    } while (local_88.fds_bits + 0x1f != p_Var2);
    uVar4 = param_1 + 0x1f;
    if (-1 < (int)param_1) {
        uVar4 = param_1;
    }
    local_90.tv_usec = 0;
    uVar3 = param_1 & 0x1f;
    if ((int)param_1 < 1) {
        uVar3 = -(-param_1 & 0x1f);
    }
    local_88.fds_bits[(int)uVar4 >> 5] =
        local_88.fds_bits[(int)uVar4 >> 5] | 1 << (uVar3 & 0xff);
    iVar1 =
        select(param_1 + 1, &local_88, (fd_set *)0x0, (fd_set *)0x0, &local_90);
    return 0 < iVar1;
}

undefined4 FUN_000224bc(int *param_1, uint param_2)

{
    uint uVar1;
    int *piVar2;
    undefined4 uVar3;

    if ((param_1 == (int *)0x0) || (*param_1 != 1)) {
        return 0;
    }
    uVar1 = FUN_00048468();
    if (((param_2 <= uVar1) && (piVar2 = (int *)FUN_00048484(param_1, param_2),
                                piVar2 != (int *)0x0)) &&
        (*piVar2 == 2)) {
        uVar3 = FUN_00048630();
        return uVar3;
    }
    return 0;
}

void FUN_00022520(void)

{
    int iVar1;

    iVar1 = FUN_000224bc();
    if (iVar1 == 0) {
        return;
    }
    __strdup();
    return;
}

undefined1 FUN_000225a0(byte *param_1, undefined4 param_2, undefined4 param_3)

{
    size_t sVar1;
    byte *pbVar2;
    uint uVar3;
    char acStack_810[2048];

    if (param_1 == (byte *)0x0) {
        if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
            (DAT_00067db4 < 3)) {
            return 0;
        }
        snprintf(acStack_810, 0x800,
                 "Null string passed to valid_hex from in %s %s():%d", "util.c",
                 param_2, param_3);
    } else {
        sVar1 = strlen((char *)param_1);
        if (sVar1 == 0) {
            return 1;
        }
        uVar3 = (uint)*param_1;
        if (-1 < *(int *)(&DAT_0004c8cc + uVar3 * 4)) {
            pbVar2 = param_1 + (sVar1 - 1);
            do {
                if (param_1 == pbVar2) {
                    return 1;
                }
                param_1 = param_1 + 1;
                uVar3 = (uint)*param_1;
            } while (-1 < *(int *)(&DAT_0004c8cc + uVar3 * 4));
        }
        if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
            (DAT_00067db4 < 3)) {
            return 0;
        }
        snprintf(acStack_810, 0x800,
                 "Invalid char 0x%x passed to valid_hex from in %s %s():%d",
                 uVar3, "util.c", param_2, param_3);
    }
    FUN_00020f58(3, acStack_810, 0);
    return 0;
}

void FUN_000226f0(pthread_rwlock_t *param_1, undefined4 param_2,
                  undefined4 param_3)

{
    int iVar1;
    int *piVar2;
    char acStack_810[2052];

    iVar1 = pthread_rwlock_wrlock(param_1);
    if (iVar1 == 0) {
        return;
    }
    piVar2 = __errno_location();
    snprintf(acStack_810, 0x800,
             "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d", *piVar2,
             "util.c", param_2, param_3);
    FUN_00020f58(3, acStack_810, 1);
    FUN_0003eba0(1);
    return;
}

void FUN_0002276c(pthread_rwlock_t *param_1, undefined4 param_2,
                  undefined4 param_3)

{
    int iVar1;
    int *piVar2;
    char acStack_810[2052];

    iVar1 = pthread_rwlock_unlock(param_1);
    if (iVar1 == 0) {
        return;
    }
    piVar2 = __errno_location();
    snprintf(acStack_810, 0x800,
             "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar2,
             "util.c", param_2, param_3);
    FUN_00020f58(3, acStack_810, 1);
    FUN_0003eba0(1);
    return;
}

void FUN_000227e8(pthread_mutex_t *param_1, undefined4 param_2,
                  undefined4 param_3)

{
    int iVar1;
    int *piVar2;
    char acStack_810[2052];

    iVar1 = pthread_mutex_unlock(param_1);
    if (iVar1 == 0) {
        return;
    }
    piVar2 = __errno_location();
    snprintf(acStack_810, 0x800,
             "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar2,
             "util.c", param_2, param_3);
    FUN_00020f58(3, acStack_810, 1);
    FUN_0003eba0(1);
    return;
}

void FUN_00022864(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_810[2052];

    piVar1 = __errno_location();
    snprintf(acStack_810, 0x800,
             "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar1,
             "util.c", param_1, param_2);
    FUN_00020f58(3, acStack_810, 1);
    FUN_0003eba0(1);
    return;
}

void FUN_000228c8(int param_1)

{
    int iVar1;
    ssize_t sVar2;

    iVar1 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0x2c0));
    if (iVar1 != 0) {
        FUN_00022864("clear_sock", 0x6e5);
    }
    do {
        if (*(int *)(param_1 + 0x24c) == 0)
            break;
        sVar2 = recv(*(int *)(param_1 + 0x24c), *(void **)(param_1 + 0x250),
                     0x1ffc, 0);
    } while (0 < sVar2);
    FUN_000227e8((pthread_mutex_t *)(param_1 + 0x2c0), "clear_sock", 0x6ee);
    (*DAT_00067ed8)();
    if (*(undefined1 **)(param_1 + 0x250) != (undefined1 *)0x0) {
        **(undefined1 **)(param_1 + 0x250) = 0;
    }
    return;
}

void *FUN_000229bc(uint param_1, undefined4 param_2, undefined4 param_3,
                   undefined4 param_4)

{
    void *pvVar1;
    char acStack_818[2048];

    if ((param_1 & 3) != 0) {
        param_1 = (param_1 & 0xfffffffc) + 4;
    }
    pvVar1 = malloc(param_1);
    if (pvVar1 == (void *)0x0) {
        snprintf(acStack_818, 0x800, "Failed to malloc size %d from %s %s:%d",
                 param_1, param_2, param_3, param_4);
        FUN_00020f58(3, acStack_818, 1);
        FUN_0003eba0(1);
        return (void *)0x0;
    }
    return pvVar1;
}

void *FUN_00022a44(size_t param_1, uint param_2, undefined4 param_3,
                   undefined4 param_4, undefined4 param_5)

{
    void *pvVar1;
    char acStack_818[2048];

    if ((param_2 & 3) != 0) {
        param_2 = (param_2 & 0xfffffffc) + 4;
    }
    pvVar1 = calloc(param_1, param_2);
    if (pvVar1 == (void *)0x0) {
        snprintf(acStack_818, 0x800,
                 "Failed to calloc memb %d size %d from %s %s:%d", param_1,
                 param_2, param_3, param_4, param_5);
        FUN_00020f58(3, acStack_818, 1);
        FUN_0003eba0(1);
        return (void *)0x0;
    }
    return pvVar1;
}

void *FUN_00022ad4(void *param_1, uint param_2, undefined4 param_3,
                   undefined4 param_4, undefined4 param_5)

{
    void *pvVar1;
    char acStack_818[2052];

    if ((param_2 & 3) != 0) {
        param_2 = (param_2 & 0xfffffffc) + 4;
    }
    pvVar1 = realloc(param_1, param_2);
    if (pvVar1 == (void *)0x0) {
        snprintf(acStack_818, 0x800, "Failed to realloc size %d from %s %s:%d",
                 param_2, param_3, param_4, param_5);
        FUN_00020f58(3, acStack_818, 1);
        FUN_0003eba0(1);
        return (void *)0x0;
    }
    return pvVar1;
}

char *FUN_00022b68(int param_1)

{
    char *pcVar1;
    undefined *puVar2;

    if (param_1 == 0) {
        return "http:";
    }
    pcVar1 = "http0:";
    puVar2 = &UNK_0004cce8;
    do {
        if (*(int *)(puVar2 + 0xc) == param_1) {
            return pcVar1;
        }
        pcVar1 = *(char **)(puVar2 + 0x10);
        puVar2 = puVar2 + 8;
    } while (pcVar1 != (char *)0x0);
    return "invalid";
}

void FUN_00022bb4(undefined1 *param_1, int param_2, int param_3)

{
    byte *pbVar1;
    undefined1 *puVar2;

    if (0 < param_3) {
        pbVar1 = (byte *)(param_2 + -1);
        puVar2 = param_1 + 2;
        do {
            pbVar1 = pbVar1 + 1;
            puVar2[-2] = "0123456789abcdefbin2hex"[*pbVar1 >> 4];
            puVar2[-1] = "0123456789abcdefbin2hex"[*pbVar1 & 0xf];
            puVar2 = puVar2 + 2;
        } while (pbVar1 != (byte *)(param_2 + param_3 + -1));
        param_1[param_3 * 2] = 0;
        return;
    }
    *param_1 = 0;
    return;
}

void FUN_00022c24(int param_1, int param_2)

{
    char *pcVar1;
    uint uVar2;
    char *pcVar3;
    byte *pbVar4;
    byte *pbVar5;
    uint uVar6;

    uVar2 = param_2 * 2 + 1;
    uVar6 = uVar2 & 3;
    if ((int)uVar2 < 1) {
        uVar6 = -(-uVar2 & 3);
    }
    pcVar3 = (char *)FUN_00022a44((4 - uVar6) + uVar2, 1, "util.c", "bin2hex",
                                  0x315);
    if (0 < param_2) {
        pbVar5 = (byte *)(param_1 + -1);
        pbVar4 = pbVar5 + param_2;
        pcVar1 = pcVar3;
        do {
            pbVar5 = pbVar5 + 1;
            *pcVar1 = "0123456789abcdefbin2hex"[*pbVar5 >> 4];
            pcVar1[1] = "0123456789abcdefbin2hex"[*pbVar5 & 0xf];
            pcVar1 = pcVar1 + 2;
        } while (pbVar5 != pbVar4);
        pcVar3 = pcVar3 + param_2 * 2;
    }
    *pcVar3 = '\0';
    return;
}

undefined4 FUN_00022cd8(byte *param_1, byte *param_2, int param_3)

{
    byte *pbVar1;
    byte *pbVar2;
    uint uVar3;
    uint uVar4;
    char local_810[20];
    undefined2 local_7fc;

    if (*param_2 == 0) {
    LAB_00022e5c:
        if (param_3 == 0) {
            return 1;
        }
    } else {
        if (param_3 == 0) {
            return 0;
        }
        if (param_2[1] == 0) {
        LAB_00022de0:
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (2 < DAT_00067db4)) {
                builtin_strncpy(local_810, "hex2bin str truncate", 0x14);
                local_7fc = 100;
                FUN_00020f58(3, local_810, 0);
            }
        } else {
            uVar3 = *(uint *)(&DAT_0004c8cc + (uint)param_2[1] * 4);
            uVar4 = *(uint *)(&DAT_0004c8cc + (uint)*param_2 * 4);
            if (-1 < (int)(uVar3 | uVar4)) {
                param_2 = param_2 + 4;
                do {
                    param_3 = param_3 + -1;
                    *param_1 = (byte)uVar3 | (byte)(uVar4 << 4);
                    pbVar1 = param_2 + -2;
                    if (*pbVar1 == 0)
                        goto LAB_00022e5c;
                    if (param_3 == 0) {
                        return 0;
                    }
                    pbVar2 = param_2 + -1;
                    param_2 = param_2 + 2;
                    if (*pbVar2 == 0)
                        goto LAB_00022de0;
                    uVar4 = *(uint *)(&DAT_0004c8cc + (uint)*pbVar1 * 4);
                    uVar3 = *(uint *)(&DAT_0004c8cc + (uint)*pbVar2 * 4);
                    param_1 = param_1 + 1;
                } while (-1 < (int)(uVar4 | uVar3));
            }
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (2 < DAT_00067db4)) {
                builtin_strncpy(local_810, "hex2bin scan failed", 0x14);
                FUN_00020f58(3, local_810, 0);
                return 0;
            }
        }
    }
    return 0;
}

void FUN_00022e7c(undefined4 *param_1, char *param_2)

{
    size_t sVar1;
    char *pcVar2;
    int iVar3;
    char *pcVar4;
    uint uVar5;
    uint uVar6;
    uint local_820;
    char local_81c[4];
    char acStack_818[3];
    char acStack_815[5];
    char acStack_810[2052];

    local_81c[0] = '0';
    local_81c[1] = '0';
    local_81c[2] = '0';
    local_81c[3] = '0';
    acStack_818[0] = '0';
    acStack_818[1] = '0';
    acStack_818[2] = '0';
    register0x00000027 = '0';
    acStack_815[1] = 0x30;
    sVar1 = strlen(param_2);
    local_820 = 0;
    if (sVar1 != 0) {
        param_2 = param_2 + -1;
        pcVar2 = param_2 + sVar1;
        pcVar4 = acStack_818 + (3 - sVar1);
        do {
            param_2 = param_2 + 1;
            pcVar4 = pcVar4 + 1;
            *pcVar4 = *param_2;
        } while (param_2 != pcVar2);
    }
    acStack_815[1] = 0;
    FUN_00022cd8(&local_820, local_81c, 4);
    iVar3 = 0;
    uVar6 = 0;
    uVar5 = 0;
    do {
        if (((local_820 & 0xe000) >> (uVar5 & 0xff) & 1) != 0) {
            iVar3 = iVar3 + 1;
            uVar6 = uVar6 | 1 << (uVar5 & 0xff);
            if (iVar3 == 3)
                break;
        }
        uVar5 = uVar5 + 1;
    } while (uVar5 != 0x20);
    if ((uVar6 & 0xe000) != 0) {
        *(undefined1 *)(param_1 + 0xa1) = 1;
        param_1[0xa2] = 8;
        return;
    }
    if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
        (4 < DAT_00067db4)) {
        local_820 = uVar6;
        snprintf(acStack_810, 0x800, "Pool %d rolling mask do not match!",
                 *param_1);
        FUN_00020f58(5, acStack_810, 0);
    }
    *(undefined1 *)(param_1 + 0xa1) = 0;
    param_1[0xa2] = 1;
    return;
}

void FUN_00022fec(undefined1 *param_1, char *param_2)

{
    longlong lVar1;
    size_t sVar2;
    uint uVar3;
    uint *puVar4;
    uint *puVar5;
    uint uVar6;
    byte *pbVar7;
    byte *pbVar8;
    uint uStack_38;
    undefined4 local_34;
    uint local_30[6];

    local_30[0] = 0;
    local_34 = 0;
    local_30[1] = 0;
    local_30[2] = 0;
    local_30[3] = 0;
    local_30[4] = 0;
    local_30[5] = 0;
    sVar2 = strlen(param_2);
    if (sVar2 == 0) {
        local_34._0_1_ = 0;
        uVar3 = 0;
    } else {
        pbVar8 = (byte *)(param_2 + -1);
        pbVar7 = pbVar8 + sVar2;
        uVar3 = 0;
        do {
            pbVar8 = pbVar8 + 1;
            uVar6 = *(uint *)(&DAT_0004cd44 + (uint)*pbVar8 * 4);
            puVar4 = local_30 + 5;
            while (true) {
                lVar1 = (ulonglong)uVar3 * 0x3a + (ulonglong)uVar6;
                uVar6 = (uint)((ulonglong)lVar1 >> 0x20);
                puVar5 = puVar4 + -1;
                *puVar4 = (uint)lVar1;
                if (&uStack_38 == puVar5)
                    break;
                uVar3 = *puVar5;
                puVar4 = puVar5;
            }
            uVar3 = local_30[5];
        } while (pbVar7 != pbVar8);
        uVar3 = local_30[0] << 0x18 | (local_30[0] >> 8 & 0xff) << 0x10 |
                (local_30[0] >> 0x10 & 0xff) << 8 | local_30[0] >> 0x18;
    }
    puVar5 = local_30;
    *param_1 = (undefined1)local_34;
    puVar4 = (uint *)(param_1 + 1);
    while (true) {
        *puVar4 = uVar3;
        if (puVar4 + 1 == (uint *)(param_1 + 0x19))
            break;
        puVar5 = puVar5 + 1;
        uVar3 = *puVar5;
        uVar3 = uVar3 << 0x18 | (uVar3 >> 8 & 0xff) << 0x10 |
                (uVar3 >> 0x10 & 0xff) << 8 | uVar3 >> 0x18;
        puVar4 = puVar4 + 1;
    }
    return;
}

int FUN_00023110(uint *param_1, uint *param_2)

{
    void *__ptr;
    void *__ptr_00;
    uint *puVar1;
    uint *puVar2;
    char *pcVar3;
    int iVar4;
    uint uVar5;
    uint uVar6;
    uint uVar7;
    uint uVar8;
    uint local_858;
    uint local_854;
    uint local_850;
    uint local_84c;
    uint local_848;
    uint local_844;
    uint local_840;
    uint local_83c;
    uint local_838;
    uint local_834;
    uint local_830;
    uint local_82c;
    uint local_828;
    uint local_824;
    uint local_820;
    uint uStack_81c;
    char acStack_818[2052];

    puVar2 = param_1 + 8;
    puVar1 = param_2 + 8;
    do {
        puVar2 = puVar2 + -1;
        puVar1 = puVar1 + -1;
        if (*puVar1 < *puVar2) {
            iVar4 = 0;
            goto LAB_00023144;
        }
    } while ((*puVar1 <= *puVar2) && (param_1 != puVar2));
    iVar4 = 1;
LAB_00023144:
    if (DAT_00068bd5 != '\0') {
        uVar5 = param_1[6];
        uVar6 = param_1[7];
        uVar8 = param_1[5];
        uVar7 = param_1[4];
        local_854 = uVar5 << 0x18 | (uVar5 >> 8 & 0xff) << 0x10 |
                    (uVar5 >> 0x10 & 0xff) << 8 | uVar5 >> 0x18;
        local_858 = uVar6 << 0x18 | (uVar6 >> 8 & 0xff) << 0x10 |
                    (uVar6 >> 0x10 & 0xff) << 8 | uVar6 >> 0x18;
        uVar5 = param_1[2];
        local_850 = uVar8 << 0x18 | (uVar8 >> 8 & 0xff) << 0x10 |
                    (uVar8 >> 0x10 & 0xff) << 8 | uVar8 >> 0x18;
        local_84c = uVar7 << 0x18 | (uVar7 >> 8 & 0xff) << 0x10 |
                    (uVar7 >> 0x10 & 0xff) << 8 | uVar7 >> 0x18;
        uVar6 = param_1[3];
        uVar7 = *param_1;
        uVar8 = param_1[1];
        local_844 = uVar5 << 0x18 | (uVar5 >> 8 & 0xff) << 0x10 |
                    (uVar5 >> 0x10 & 0xff) << 8 | uVar5 >> 0x18;
        local_848 = uVar6 << 0x18 | (uVar6 >> 8 & 0xff) << 0x10 |
                    (uVar6 >> 0x10 & 0xff) << 8 | uVar6 >> 0x18;
        uVar5 = param_2[7];
        local_840 = uVar8 << 0x18 | (uVar8 >> 8 & 0xff) << 0x10 |
                    (uVar8 >> 0x10 & 0xff) << 8 | uVar8 >> 0x18;
        local_83c = uVar7 << 0x18 | (uVar7 >> 8 & 0xff) << 0x10 |
                    (uVar7 >> 0x10 & 0xff) << 8 | uVar7 >> 0x18;
        local_838 = uVar5 << 0x18 | (uVar5 >> 8 & 0xff) << 0x10 |
                    (uVar5 >> 0x10 & 0xff) << 8 | uVar5 >> 0x18;
        uVar5 = param_2[6];
        uVar7 = param_2[5];
        local_834 = uVar5 << 0x18 | (uVar5 >> 8 & 0xff) << 0x10 |
                    (uVar5 >> 0x10 & 0xff) << 8 | uVar5 >> 0x18;
        uVar5 = param_2[4];
        uVar6 = param_2[3];
        local_830 = uVar7 << 0x18 | (uVar7 >> 8 & 0xff) << 0x10 |
                    (uVar7 >> 0x10 & 0xff) << 8 | uVar7 >> 0x18;
        local_82c = uVar5 << 0x18 | (uVar5 >> 8 & 0xff) << 0x10 |
                    (uVar5 >> 0x10 & 0xff) << 8 | uVar5 >> 0x18;
        uVar7 = param_2[2];
        local_828 = uVar6 << 0x18 | (uVar6 >> 8 & 0xff) << 0x10 |
                    (uVar6 >> 0x10 & 0xff) << 8 | uVar6 >> 0x18;
        uVar5 = *param_2;
        uVar6 = param_2[1];
        local_824 = uVar7 << 0x18 | (uVar7 >> 8 & 0xff) << 0x10 |
                    (uVar7 >> 0x10 & 0xff) << 8 | uVar7 >> 0x18;
        uStack_81c = uVar5 << 0x18 | (uVar5 >> 8 & 0xff) << 0x10 |
                     (uVar5 >> 0x10 & 0xff) << 8 | uVar5 >> 0x18;
        local_820 = uVar6 << 0x18 | (uVar6 >> 8 & 0xff) << 0x10 |
                    (uVar6 >> 0x10 & 0xff) << 8 | uVar6 >> 0x18;
        __ptr = (void *)FUN_00022c24(&local_858, 0x20);
        __ptr_00 = (void *)FUN_00022c24(&local_838, 0x20);
        if ((DAT_00068bd5 != '\0') &&
            (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
              (6 < DAT_00067db4)))) {
            pcVar3 = "YES (hash <= target)";
            if (iVar4 == 0) {
                pcVar3 = "no (false positive; hash > target)";
            }
            snprintf(acStack_818, 0x800, " Proof: %s\nTarget: %s\nTrgVal? %s",
                     __ptr, __ptr_00, pcVar3);
            FUN_00020f58(7, acStack_818, 0);
        }
        free(__ptr);
        free(__ptr_00);
        return iVar4;
    }
    return iVar4;
}

int FUN_00023300(void)

{
    int iVar1;

    iVar1 = FUN_00022a44(1, 0x58, "util.c", "tq_new", 0x435);
    *(int *)iVar1 = iVar1;
    *(int *)(iVar1 + 4) = iVar1;
    pthread_mutex_init((pthread_mutex_t *)(iVar1 + 0xc),
                       (pthread_mutexattr_t *)0x0);
    pthread_cond_init((pthread_cond_t *)(iVar1 + 0x28),
                      (pthread_condattr_t *)0x0);
    return iVar1;
}

void FUN_0002335c(int *param_1)

{
    int *piVar1;
    int *piVar2;
    int *piVar3;

    if (param_1 != (int *)0x0) {
        piVar3 = (int *)*(int *)*param_1;
        piVar2 = (int *)*param_1;
        while (piVar1 = piVar3, param_1 != piVar2) {
            piVar3 = (int *)piVar2[1];
            piVar1[1] = (int)piVar3;
            *piVar3 = (int)piVar1;
            free(piVar2 + -1);
            piVar3 = (int *)*piVar1;
            piVar2 = piVar1;
        }
        pthread_cond_destroy((pthread_cond_t *)(param_1 + 10));
        pthread_mutex_destroy((pthread_mutex_t *)(param_1 + 3));
        free(param_1);
        return;
    }
    return;
}

void FUN_000233c4(int param_1)

{
    int iVar1;

    iVar1 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xc));
    if (iVar1 != 0) {
        FUN_00022864("tq_freezethaw", 0x454);
    }
    *(undefined1 *)(param_1 + 8) = 1;
    pthread_cond_signal((pthread_cond_t *)(param_1 + 0x28));
    FUN_000227e8((pthread_mutex_t *)(param_1 + 0xc), "tq_freezethaw", 0x457);
    (*DAT_00067ed8)();
    return;
}

bool FUN_000233d4(int param_1, undefined4 param_2)

{
    undefined4 *__ptr;
    int iVar1;
    undefined4 *puVar2;
    undefined4 *puVar3;
    bool bVar4;

    __ptr = (undefined4 *)FUN_00022a44(1, 0xc, "util.c", "tq_push", 0x469);
    puVar3 = __ptr + 1;
    *__ptr = param_2;
    __ptr[1] = puVar3;
    __ptr[2] = puVar3;
    iVar1 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xc));
    if (iVar1 != 0) {
        FUN_00022864("tq_push", 0x46d);
    }
    bVar4 = *(char *)(param_1 + 8) != '\0';
    if (bVar4) {
        free(__ptr);
    } else {
        puVar2 = *(undefined4 **)(param_1 + 4);
        *(undefined4 **)(param_1 + 4) = puVar3;
        __ptr[1] = param_1;
        __ptr[2] = puVar2;
        *puVar2 = puVar3;
    }
    pthread_cond_signal((pthread_cond_t *)(param_1 + 0x28));
    FUN_000227e8((pthread_mutex_t *)(param_1 + 0xc), "tq_push", 0x47a);
    (*DAT_00067ed8)();
    return !bVar4;
}

int FUN_000234a8(int *param_1, timespec *param_2)

{
    int iVar1;
    int iVar2;
    int *piVar3;
    int *piVar4;
    pthread_mutex_t *__mutex;

    __mutex = (pthread_mutex_t *)(param_1 + 3);
    iVar1 = pthread_mutex_lock(__mutex);
    if (iVar1 != 0) {
        FUN_00022864("tq_pop", 0x486);
    }
    piVar4 = (int *)*param_1;
    piVar3 = piVar4;
    if (param_1 == piVar4) {
        if (param_2 == (timespec *)0x0) {
            iVar1 =
                pthread_cond_wait((pthread_cond_t *)(param_1 + 10), __mutex);
        } else {
            iVar1 = pthread_cond_timedwait((pthread_cond_t *)(param_1 + 10),
                                           __mutex, param_2);
        }
        if (iVar1 != 0) {
            iVar1 = 0;
            goto LAB_000234fc;
        }
        piVar3 = (int *)*param_1;
        if (piVar4 == piVar3) {
            iVar1 = 0;
            goto LAB_000234fc;
        }
    }
    piVar4 = (int *)piVar3[1];
    iVar2 = *piVar3;
    iVar1 = piVar3[-1];
    *(int **)(iVar2 + 4) = piVar4;
    *piVar4 = iVar2;
    *piVar3 = 0;
    piVar3[1] = 0;
    free(piVar3 + -1);
LAB_000234fc:
    FUN_000227e8(__mutex, "tq_pop", 0x4a0);
    (*DAT_00067ed8)();
    return iVar1;
}

void FUN_00023588(int param_1)

{
    if (param_1 != 0) {
        if (*(pthread_t *)(param_1 + 0xc) != 0) {
            pthread_cancel(*(pthread_t *)(param_1 + 0xc));
            *(undefined4 *)(param_1 + 0xc) = 0;
        }
        sem_destroy((sem_t *)(param_1 + 0x10));
        return;
    }
    return;
}

void FUN_000235c4(int *param_1, int *param_2)

{
    int iVar1;
    int iVar2;
    int iVar3;

    iVar2 = *param_2;
    iVar1 = *param_1;
    *param_2 = iVar1 - iVar2;
    iVar3 = param_1[1] - param_2[1];
    param_2[1] = iVar3;
    if (iVar3 < 0) {
        *param_2 = (iVar1 - iVar2) + -1;
        param_2[1] = iVar3 + 1000000;
    }
    return;
}

void FUN_000235f8(int *param_1, int *param_2)

{
    int iVar1;
    int iVar2;
    int iVar3;

    iVar1 = *param_1;
    iVar2 = *param_2;
    *param_2 = iVar1 + iVar2;
    iVar3 = param_1[1] + param_2[1];
    param_2[1] = iVar3;
    if (999999 < iVar3) {
        *param_2 = iVar1 + iVar2 + 1;
        param_2[1] = iVar3 + -1000000;
    }
    return;
}

bool FUN_0002363c(int *param_1, int *param_2)

{
    if (*param_1 != *param_2) {
        return *param_2 < *param_1;
    }
    return param_2[1] < param_1[1];
}

bool FUN_00023670(int *param_1, int *param_2)

{
    if (*param_1 == *param_2) {
        return param_1[1] < param_2[1];
    }
    return *param_1 < *param_2;
}

void FUN_000236f0(undefined4 *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    lldiv_t local_20;

    lldiv(&local_20, CONCAT44(param_4, param_3), 1000000);
    *param_1 = (undefined4)local_20.quot;
    param_1[1] = (undefined4)local_20.rem;
    return;
}

void FUN_00023728(undefined4 *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    lldiv_t local_20;

    lldiv(&local_20, CONCAT44(param_4, param_3), 1000000);
    *param_1 = (undefined4)local_20.quot;
    param_1[1] = (int)local_20.rem * 1000;
    return;
}

void FUN_00023768(undefined4 *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    lldiv_t local_20;

    lldiv(&local_20, CONCAT44(param_4, param_3), 1000);
    *param_1 = (undefined4)local_20.quot;
    param_1[1] = (int)local_20.rem * 1000000;
    return;
}

void FUN_000237a8(undefined4 *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    lldiv_t local_20;

    lldiv(&local_20, CONCAT44(param_4, param_3), 1000);
    *param_1 = (undefined4)local_20.quot;
    param_1[1] = (int)local_20.rem * 1000;
    return;
}

char *FUN_0002395c(undefined4 *param_1, char *param_2)

{
    char *pcVar1;
    char *__s;

    __s = (char *)*param_1;
    if ((__s != (char *)0x0) &&
        (pcVar1 = strpbrk(__s, param_2), pcVar1 != (char *)0x0)) {
        *pcVar1 = '\0';
        *param_1 = pcVar1 + 1;
        return __s;
    }
    *param_1 = 0;
    return __s;
}

void FUN_000239a4(timeval *param_1)

{
    gettimeofday(param_1, (__timezone_ptr_t)0x0);
    return;
}

void FUN_00023a18(timespec *param_1)

{
    clock_gettime(1, param_1);
    return;
}

void FUN_00023a24(int *param_1, int param_2)

{
    int iVar1;
    int iVar2;
    bool bVar3;
    bool bVar4;
    timespec local_10;

    FUN_00023768(&local_10, param_2, param_2, param_2 >> 0x1f);
    iVar2 = local_10.tv_nsec + param_1[1];
    iVar1 = local_10.tv_sec + *param_1;
    local_10.tv_nsec = iVar2;
    local_10.tv_sec = iVar1;
    if (iVar2 < 1000000000) {
        for (; local_10.tv_nsec < 0;
             local_10.tv_nsec = local_10.tv_nsec + 1000000000) {
            local_10.tv_sec = local_10.tv_sec + -1;
        }
    } else {
        local_10.tv_sec = iVar1 + 1;
        local_10.tv_nsec = iVar2 + -1000000000;
        bVar4 = SBORROW4(local_10.tv_nsec, 999999999);
        bVar3 = local_10.tv_nsec != 999999999;
        if (999999999 < local_10.tv_nsec) {
            local_10.tv_sec = iVar1 + 2;
            local_10.tv_nsec = -2000000000;
        }
        if (bVar3 && iVar2 + -1999999999 < 0 == bVar4) {
            local_10.tv_nsec = iVar2 + local_10.tv_nsec;
        }
    }
    do {
        iVar1 = clock_nanosleep(1, 1, &local_10, (timespec *)0x0);
    } while (iVar1 == 4);
    return;
}

void FUN_00023ae4(int *param_1)

{
    int iVar1;
    int iVar2;
    bool bVar3;
    bool bVar4;
    timespec local_10;

    FUN_00023728(&local_10);
    iVar2 = local_10.tv_nsec + param_1[1];
    iVar1 = local_10.tv_sec + *param_1;
    local_10.tv_nsec = iVar2;
    local_10.tv_sec = iVar1;
    if (iVar2 < 1000000000) {
        for (; local_10.tv_nsec < 0;
             local_10.tv_nsec = local_10.tv_nsec + 1000000000) {
            local_10.tv_sec = local_10.tv_sec + -1;
        }
    } else {
        local_10.tv_sec = iVar1 + 1;
        local_10.tv_nsec = iVar2 + -1000000000;
        bVar4 = SBORROW4(local_10.tv_nsec, 999999999);
        bVar3 = local_10.tv_nsec != 999999999;
        if (999999999 < local_10.tv_nsec) {
            local_10.tv_sec = iVar1 + 2;
            local_10.tv_nsec = -2000000000;
        }
        if (bVar3 && iVar2 + -1999999999 < 0 == bVar4) {
            local_10.tv_nsec = iVar2 + local_10.tv_nsec;
        }
    }
    do {
        iVar1 = clock_nanosleep(1, 1, &local_10, (timespec *)0x0);
    } while (iVar1 == 4);
    return;
}

void FUN_00023b9c(undefined4 param_1)

{
    timespec tStack_10;

    clock_gettime(1, &tStack_10);
    FUN_00023a24(&tStack_10, param_1);
    return;
}

void FUN_00023bc8(void)

{
    timespec tStack_18;

    clock_gettime(1, &tStack_18);
    FUN_00023ae4(&tStack_18);
    return;
}

undefined4 FUN_00023c94(int *param_1, int *param_2)

{
    return SUB84((double)(longlong)(param_1[1] - param_2[1]) / 1000000.0 +
                     (double)(longlong)(*param_1 - *param_2),
                 0);
}

undefined4 FUN_00023cd8(char *param_1, undefined4 *param_2, undefined4 *param_3)

{
    char *pcVar1;
    char *pcVar2;
    uint uVar3;
    undefined4 uVar4;
    char *pcVar5;
    uint uVar6;
    int iVar7;
    undefined2 local_128;
    undefined1 local_126;
    char acStack_120[260];

    *param_2 = param_1;
    pcVar1 = strstr(param_1, "//");
    if (pcVar1 != (char *)0x0) {
        param_1 = pcVar1 + 2;
    }
    pcVar2 = strchr(param_1, 0x5b);
    pcVar1 = strchr(param_1, 0x5d);
    pcVar5 = pcVar1;
    if (pcVar1 != (char *)0x0) {
        pcVar5 = (char *)0x1;
    }
    if (pcVar2 == (char *)0x0) {
        pcVar5 = (char *)0x0;
    }
    if (pcVar2 < pcVar1) {
        uVar6 = (uint)pcVar5 & 1;
    } else {
        uVar6 = 0;
    }
    if (uVar6 == 0) {
        pcVar1 = param_1;
    }
    pcVar1 = strchr(pcVar1, 0x3a);
    uVar3 = strlen(param_1);
    if (pcVar1 == (char *)0x0) {
        pcVar5 = (char *)0x0;
        iVar7 = 0;
    } else {
        iVar7 = ~((int)pcVar1 - (int)param_1) + uVar3;
        if (iVar7 < 1) {
            return 0;
        }
        pcVar5 = pcVar1 + 1;
        uVar3 = (int)pcVar1 - (int)param_1;
    }
    if ((int)uVar3 < 1) {
        return 0;
    }
    if (uVar6 != 0) {
        param_1 = param_1 + 1;
        uVar3 = uVar3 - 2;
    }
    snprintf(acStack_120, 0xfe, "%.*s", uVar3, param_1);
    if (iVar7 == 0) {
        local_128 = 0x3038;
        local_126 = 0;
    } else {
        snprintf((char *)&local_128, 6, "%.*s", iVar7, pcVar5);
        pcVar1 = strpbrk((char *)&local_128, "/#");
        if (pcVar1 != (char *)0x0) {
            *pcVar1 = '\0';
        }
    }
    uVar4 = __strdup(&local_128);
    *param_3 = uVar4;
    uVar4 = __strdup(acStack_120);
    *param_2 = uVar4;
    return 1;
}

char *FUN_00023e4c(char *param_1, int param_2)

{
    int iVar1;
    char *__dest;
    char *__src;
    char *pcVar2;
    int iVar3;
    size_t __n;

    iVar3 = 0;
    pcVar2 = "http:";
    __n = 5;
    *(undefined4 *)(param_2 + 0xb8) = 0;
    while (true) {
        iVar1 = strncmp(param_1, pcVar2, __n);
        if (iVar1 == 0) {
            pcVar2 = strchr(param_1, 0x7c);
            if (pcVar2 != (char *)0x0) {
                *pcVar2 = '\0';
                __dest =
                    (char *)FUN_000229bc(pcVar2 + ((1 - __n) - (int)param_1),
                                         "util.c", "get_proxy", 0x2ee);
                __src = param_1 + __n;
                *(char **)(param_2 + 0xb8) = __dest;
                param_1 = pcVar2 + 1;
                strcpy(__dest, __src);
                FUN_00023cd8(*(undefined4 *)(param_2 + 0xb8), param_2 + 0x25c,
                             param_2 + 0x260);
                *(undefined4 *)(param_2 + 0xb4) = (&DAT_0004ccec)[iVar3 * 2];
            }
            return param_1;
        }
        iVar3 = iVar3 + 1;
        pcVar2 = *(char **)(&UNK_0004cce8 + iVar3 * 8);
        if (pcVar2 == (char *)0x0)
            break;
        __n = strlen(pcVar2);
    }
    return param_1;
}

undefined4 FUN_00023f28(int param_1)

{
    undefined4 uVar1;

    if (**(char **)(param_1 + 0x250) != '\0') {
        return 1;
    }
    uVar1 = FUN_00022428(*(undefined4 *)(param_1 + 0x24c));
    return uVar1;
}

undefined1 FUN_00023ff8(undefined4 *param_1, undefined4 param_2)

{
    bool bVar1;
    int iVar2;
    int *piVar3;
    int *piVar4;
    char *__s1;
    undefined4 uVar5;
    size_t sVar6;
    int iVar7;
    undefined1 uVar8;
    undefined4 local_924[23];
    undefined1 auStack_8c8[160];
    char acStack_828[2052];

    iVar2 = FUN_00047258(param_2, 0, local_924);
    if (iVar2 == 0) {
        if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
            (DAT_00067db4 < 6)) {
            return 0;
        }
        snprintf(acStack_828, 0x800, "JSON decode failed(%d): %s", local_924[0],
                 auStack_8c8);
        FUN_00020f58(6, acStack_828, 0);
        return 0;
    }
    piVar3 = (int *)FUN_000480fc(iVar2, "result");
    piVar4 = (int *)FUN_000480fc(iVar2, "error");
    if (((piVar3 != (int *)0x0) && (*piVar3 != 7)) &&
        ((piVar4 == (int *)0x0 || (*piVar4 == 7)))) {
        FUN_00048364(piVar3);
        __s1 = (char *)FUN_000483e4();
        if (__s1 != (char *)0x0) {
            uVar8 = 0;
            do {
                FUN_000483fc(__s1);
                piVar4 = (int *)FUN_000483f0();
                if (piVar4 == (int *)0x0)
                    break;
                iVar7 = strcasecmp(__s1, "version-rolling");
                if ((iVar7 == 0) && (sVar6 = strlen(__s1), sVar6 == 0xf)) {
                    if (*piVar4 != 5) {
                        if (((DAT_00074500 != '\0') ||
                             (DAT_00068bd4 != '\0')) ||
                            (4 < DAT_00067db4)) {
                            snprintf(acStack_828, 0x800,
                                     "Pool %d don\'t support ab!", *param_1);
                            FUN_00020f58(5, acStack_828, 0);
                        }
                        uVar8 = 1;
                        *(undefined1 *)(param_1 + 0xa1) = 0;
                        param_1[0xa2] = 1;
                        break;
                    }
                    if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                        (4 < DAT_00067db4)) {
                        snprintf(acStack_828, 0x800, "POOL %d support ab mode!",
                                 *param_1);
                        FUN_00020f58(5, acStack_828, 0);
                    }
                } else {
                    iVar7 = strcasecmp(__s1, "version-rolling.mask");
                    if ((iVar7 == 0) && (sVar6 = strlen(__s1), sVar6 == 0x14)) {
                        uVar8 = 1;
                        uVar5 = FUN_00048630(piVar4);
                        FUN_00022e7c(param_1, uVar5);
                    } else if (((DAT_00074500 != '\0') ||
                                (DAT_00068bd4 != '\0')) ||
                               (2 < DAT_00067db4)) {
                        snprintf(
                            acStack_828, 0x800,
                            "JSON-RPC unexpected mining.configure value: %s",
                            __s1);
                        FUN_00020f58(3, acStack_828, 0);
                    }
                }
                uVar5 = FUN_000483fc(__s1);
                FUN_000483b0(piVar3, uVar5);
                __s1 = (char *)FUN_000483e4();
            } while (__s1 != (char *)0x0);
            goto LAB_0002406c;
        }
    }
    uVar8 = 0;
LAB_0002406c:
    if (*(int *)(iVar2 + 4) != -1) {
        piVar3 = (int *)(iVar2 + 4);
        DataMemoryBarrier(0xb);
        do {
            iVar7 = *piVar3;
            bVar1 = (bool)hasExclusiveAccess(piVar3);
        } while (!bVar1);
        *piVar3 = iVar7 + -1;
        if (iVar7 + -1 == 0) {
            FUN_00048a34(iVar2);
        }
    }
    return uVar8;
}

void FUN_00024340(undefined4 *param_1)

{
    int iVar1;
    int *piVar2;
    char acStack_810[2052];

    if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
        (5 < DAT_00067db4)) {
        snprintf(acStack_810, 0x800, "Closing socket for stratum pool %d",
                 *param_1);
        FUN_00020f58(6, acStack_810, 0);
    }
    iVar1 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xb0));
    if (iVar1 != 0) {
        piVar2 = __errno_location();
        snprintf(acStack_810, 0x800,
                 "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar2,
                 "util.c", "suspend_stratum", 0xc3a);
        FUN_00020f58(3, acStack_810, 1);
        FUN_0003eba0(1);
    }
    FUN_000223c0(param_1);
    iVar1 = pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0xb0));
    if (iVar1 != 0) {
        piVar2 = __errno_location();
        snprintf(acStack_810, 0x800,
                 "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar2,
                 "util.c", "suspend_stratum", 0xc3c);
        FUN_00020f58(3, acStack_810, 1);
        FUN_0003eba0(1);
    }
    (*DAT_00067ed8)();
    return;
}

bool FUN_000244a4(undefined4 *param_1, undefined4 param_2, undefined4 param_3)

{
    char cVar1;
    int iVar2;
    int *piVar3;
    int iVar4;
    pthread_mutex_t *__mutex;
    char local_818[28];
    undefined4 uStack_7fc;
    char local_7f8[16];
    undefined2 local_7e8;

    if (((DAT_00073398 != '\0') && (DAT_00068bd5 != '\0')) &&
        ((DAT_00074500 != '\0' ||
          ((DAT_00068bd4 != '\0' || (6 < DAT_00067db4)))))) {
        snprintf(local_818, 0x800, "SEND: %s", param_2);
        FUN_00020f58(7, local_818, 0);
    }
    __mutex = (pthread_mutex_t *)(param_1 + 0xb0);
    iVar2 = pthread_mutex_lock(__mutex);
    if (iVar2 != 0) {
        piVar3 = __errno_location();
        snprintf(local_818, 0x800,
                 "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar3,
                 "util.c", "stratum_send", 0x698);
        FUN_00020f58(3, local_818, 1);
        FUN_0003eba0(1);
    }
    if (*(char *)((int)param_1 + 0x281) == '\0') {
        iVar2 = pthread_mutex_unlock(__mutex);
        if (iVar2 == 0) {
            (*DAT_00067ed8)();
            goto LAB_000245e0;
        }
        iVar2 = 3;
    LAB_00024518:
        piVar3 = __errno_location();
        snprintf(local_818, 0x800,
                 "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar3,
                 "util.c", "stratum_send", 0x69e);
        FUN_00020f58(3, local_818, 1);
        FUN_0003eba0(1);
    } else {
        iVar2 = FUN_00021ca0(param_1, param_2, param_3);
        iVar4 = pthread_mutex_unlock(__mutex);
        if (iVar4 != 0)
            goto LAB_00024518;
    }
    (*DAT_00067ed8)();
    if (iVar2 == 2) {
        if ((DAT_00068bd5 != '\0') &&
            (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
              (6 < DAT_00067db4)))) {
            builtin_strncpy(local_818, "Failed to send in stratum_se", 0x1c);
            uStack_7fc = CONCAT13(uStack_7fc._3_1_, 0x646e);
            FUN_00020f58(7, local_818, 0);
            FUN_00024340(param_1);
            return false;
        }
    } else {
        if (iVar2 == 3) {
        LAB_000245e0:
            cVar1 = DAT_00068bd5;
            if (DAT_00068bd5 != '\0') {
                if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                    (DAT_00067db4 < 7)) {
                    cVar1 = '\0';
                } else {
                    builtin_strncpy(local_818, "Stratum send failed due to n",
                                    0x1c);
                    uStack_7fc._0_1_ = 'o';
                    uStack_7fc._1_1_ = ' ';
                    uStack_7fc._2_1_ = 'p';
                    uStack_7fc._3_1_ = 'o';
                    builtin_strncpy(local_7f8, "ol stratum_activ", 0x10);
                    local_7e8 = 0x65;
                    FUN_00020f58(7, local_818, 0);
                    cVar1 = '\0';
                }
            }
            return (bool)cVar1;
        }
        if (iVar2 != 1) {
            return iVar2 == 0;
        }
        if ((DAT_00068bd5 != '\0') &&
            (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
              (6 < DAT_00067db4)))) {
            snprintf(local_818, 0x800, "Write select failed on pool %d sock",
                     *param_1);
            FUN_00020f58(7, local_818, 0);
        }
    }
    FUN_00024340(param_1);
    return false;
}

char *FUN_00024858(int param_1)

{
    char cVar1;
    char *pcVar2;
    size_t sVar3;
    size_t sVar4;
    int iVar5;
    int *piVar6;
    ssize_t sVar7;
    int iVar8;
    uint uVar9;
    uint uVar10;
    uint uVar11;
    char *__s;
    int iVar12;
    timeval local_2838;
    timeval local_2830;
    char local_2828[32];
    ushort local_2808;
    undefined1 local_2806;
    char local_2028[40];
    undefined4 local_2000;
    char acStack_1ffc[8152];

    __s = *(char **)(param_1 + 0x250);
    pcVar2 = strchr(__s, 10);
    if (pcVar2 == (char *)0x0) {
        gettimeofday(&local_2838, (__timezone_ptr_t)0x0);
        iVar5 = FUN_00022428(*(undefined4 *)(param_1 + 0x24c), 0x3c);
        if (iVar5 == 0) {
            if ((DAT_00068bd5 != '\0') &&
                (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                  (6 < DAT_00067db4)))) {
                builtin_strncpy(local_2028,
                                "Timed out waiting for data on socket_ful",
                                0x28);
                local_2000._0_2_ = 0x6c;
                FUN_00020f58(7, local_2028, 0);
            }
            goto LAB_00024bec;
        }
        while (true) {
            memset(local_2028, 0, 0x2000);
            sVar7 = recv(*(int *)(param_1 + 0x24c), local_2028, 0x1ffc, 0);
            if (sVar7 == 0)
                break;
            gettimeofday(&local_2830, (__timezone_ptr_t)0x0);
            iVar5 = (int)(longlong)((double)(longlong)(local_2830.tv_usec -
                                                       local_2838.tv_usec) /
                                        1000000.0 +
                                    (double)(longlong)(local_2830.tv_sec -
                                                       local_2838.tv_sec));
            if (sVar7 < 0) {
                piVar6 = __errno_location();
                if ((*piVar6 != 0xb) ||
                    (iVar8 = FUN_00022428(*(undefined4 *)(param_1 + 0x24c),
                                          0x3c - iVar5),
                     iVar8 == 0)) {
                    if ((DAT_00068bd5 != '\0') &&
                        (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                          (6 < DAT_00067db4)))) {
                        builtin_strncpy(local_2828,
                                        "Failed to recv sock in recv_line",
                                        0x20);
                        local_2808 = local_2808 & 0xff00;
                        FUN_00020f58(7, local_2828, 0);
                    }
                    goto LAB_00024c80;
                }
            } else {
                sVar3 = strlen(local_2028);
                pcVar2 = *(char **)(param_1 + 0x250);
                sVar4 = strlen(pcVar2);
                uVar9 = sVar3 + sVar4 + 1;
                if (*(uint *)(param_1 + 0x254) <= uVar9) {
                    iVar12 = (uVar9 & 0xffffe000) + 0x2000;
                    iVar8 = FUN_00022ad4(pcVar2, iVar12, "util.c",
                                         "recalloc_sock", 0x70b);
                    *(int *)(param_1 + 0x250) = iVar8;
                    memset((void *)(iVar8 + sVar4), 0, iVar12 - sVar4);
                    pcVar2 = *(char **)(param_1 + 0x250);
                    *(int *)(param_1 + 0x254) = iVar12;
                }
                strcat(pcVar2, local_2028);
            }
            __s = *(char **)(param_1 + 0x250);
            if ((0x3b < iVar5) ||
                (pcVar2 = strchr(__s, 10), pcVar2 != (char *)0x0))
                goto LAB_00024884;
        }
        if ((DAT_00068bd5 != '\0') &&
            (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
              (6 < DAT_00067db4)))) {
            builtin_strncpy(local_2828, "Socket closed waiting in recv_li",
                            0x20);
            local_2808 = 0x656e;
            local_2806 = 0;
            FUN_00020f58(7, local_2828, 0);
        }
    LAB_00024c80:
        FUN_00024340(param_1);
        __s = *(char **)(param_1 + 0x250);
    }
LAB_00024884:
    sVar3 = strlen(__s);
    pcVar2 = strtok(__s, "\n");
    if (pcVar2 != (char *)0x0) {
        pcVar2 = (char *)__strdup();
        sVar4 = strlen(pcVar2);
        if ((int)(sVar4 + 1) < (int)sVar3) {
            memmove(*(void **)(param_1 + 0x250),
                    (void *)((int)*(void **)(param_1 + 0x250) + sVar4 + 1),
                    (sVar3 - sVar4) + 1);
        } else {
            **(undefined1 **)(param_1 + 0x250) = 0;
        }
        uVar9 = *(uint *)(param_1 + 0x208);
        uVar10 = *(uint *)(param_1 + 0x210);
        uVar11 = *(uint *)(param_1 + 0x218);
        *(uint *)(param_1 + 0x208) = uVar9 + 1;
        *(uint *)(param_1 + 0x210) = uVar10 + sVar4;
        *(uint *)(param_1 + 0x214) =
            *(int *)(param_1 + 0x214) + (uint)CARRY4(uVar10, sVar4);
        cVar1 = DAT_00073398;
        *(uint *)(param_1 + 0x20c) =
            *(int *)(param_1 + 0x20c) + (uint)(0xfffffffe < uVar9);
        *(uint *)(param_1 + 0x218) = uVar11 + sVar4;
        *(uint *)(param_1 + 0x21c) =
            *(int *)(param_1 + 0x21c) + (uint)CARRY4(uVar11, sVar4);
        if (cVar1 == '\0') {
            return pcVar2;
        }
        if (DAT_00068bd5 == '\0') {
            return pcVar2;
        }
        if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
            (DAT_00067db4 < 7)) {
            return pcVar2;
        }
        snprintf(local_2028, 0x800, "RECVD: %s", pcVar2);
        FUN_00020f58(7, local_2028, 0);
        return pcVar2;
    }
    if ((DAT_00068bd5 != '\0') &&
        (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
          (6 < DAT_00067db4)))) {
        builtin_strncpy(local_2028, "Failed to parse a \\n terminated string i",
                        0x28);
        local_2000._0_1_ = 'n';
        local_2000._1_1_ = ' ';
        local_2000._2_1_ = 'r';
        local_2000._3_1_ = 'e';
        builtin_strncpy(acStack_1ffc, "cv_line", 8);
        FUN_00020f58(7, local_2028, 0);
    }
LAB_00024bec:
    FUN_000228c8(param_1);
    return (char *)0x0;
}

void FUN_00024dc4(int param_1, undefined4 param_2)

{
    time_t tVar1;

    tVar1 = time((time_t *)0x0);
    *(undefined4 *)(param_1 + 0xf8) = param_2;
    *(time_t *)(param_1 + 0xf4) = tVar1;
    switch (param_2) {
    case 0:
        *(int *)(param_1 + 0xfc) = *(int *)(param_1 + 0xfc) + 1;
        return;
    case 1:
        *(int *)(param_1 + 0x100) = *(int *)(param_1 + 0x100) + 1;
        return;
    case 2:
        *(int *)(param_1 + 0x104) = *(int *)(param_1 + 0x104) + 1;
        return;
    case 3:
        *(int *)(param_1 + 0x108) = *(int *)(param_1 + 0x108) + 1;
        return;
    case 4:
        *(int *)(param_1 + 0x10c) = *(int *)(param_1 + 0x10c) + 1;
        return;
    case 5:
        *(int *)(param_1 + 0x110) = *(int *)(param_1 + 0x110) + 1;
        return;
    case 6:
        *(int *)(param_1 + 0x114) = *(int *)(param_1 + 0x114) + 1;
        return;
    case 7:
        *(int *)(param_1 + 0x118) = *(int *)(param_1 + 0x118) + 1;
        return;
    case 8:
        *(int *)(param_1 + 0x11c) = *(int *)(param_1 + 0x11c) + 1;
        return;
    case 9:
        *(int *)(param_1 + 0x120) = *(int *)(param_1 + 0x120) + 1;
    }
    return;
}

char *FUN_00024eb4(char *param_1, char *param_2)

{
    size_t sVar1;
    char *pcVar2;
    uint uVar3;

    sVar1 = strlen(param_2);
    if (sVar1 != 0) {
        uVar3 = sVar1 + 1;
        if (param_1 == (char *)0x0) {
            if ((uVar3 & 3) != 0) {
                uVar3 = (uVar3 & 0xfffffffc) + 4;
            }
            pcVar2 =
                (char *)FUN_000229bc(uVar3, "util.c", "realloc_strcat", 0xd2a);
            strcpy(pcVar2, param_2);
            return pcVar2;
        }
        sVar1 = strlen(param_1);
        uVar3 = sVar1 + uVar3;
        if ((uVar3 & 3) != 0) {
            uVar3 = (uVar3 & 0xfffffffc) + 4;
        }
        pcVar2 = (char *)FUN_000229bc(uVar3, "util.c", "realloc_strcat", 0xd2a);
        sprintf(pcVar2, "%s%s", param_1, param_2);
        free(param_1);
        param_1 = pcVar2;
    }
    return param_1;
}

byte *FUN_00024f88(char *param_1)

{
    size_t sVar1;
    byte *pbVar2;
    undefined4 *puVar3;
    byte bVar4;
    byte *__s;
    byte *pbVar5;
    char acStack_818[2052];

    if (param_1 == (char *)0x0) {
        puVar3 = (undefined4 *)malloc(7);
        if (puVar3 == (undefined4 *)0x0) {
            snprintf(acStack_818, 0x800, "Failed to malloc null in %s %s():%d",
                     "util.c", "str_text", 0xd43);
            FUN_00020f58(3, acStack_818, 1);
            FUN_0003eba0(1);
        } else {
            *puVar3 = 0x6c756e28;
            *(undefined2 *)(puVar3 + 1) = 0x296c;
            *(undefined1 *)((int)puVar3 + 6) = 0;
        }
    }
    sVar1 = strlen(param_1);
    pbVar2 = (byte *)FUN_000229bc(sVar1 * 4 + 5, "util.c", "str_text", 0xd48);
    pbVar5 = (byte *)(param_1 + -1);
    __s = pbVar2;
    do {
        while (true) {
            pbVar5 = pbVar5 + 1;
            if (*pbVar5 - 0x20 < 0x5f)
                break;
            sprintf((char *)__s, "0x%02x");
            bVar4 = *pbVar5;
            __s = __s + 4;
            if (bVar4 == 0)
                goto LAB_00025018;
        }
        *__s = *pbVar5;
        __s = __s + 1;
        bVar4 = *pbVar5;
    } while (bVar4 != 0);
LAB_00025018:
    *__s = bVar4;
    return pbVar2;
}

void FUN_000250a8(undefined4 param_1)

{
    char acStack_18[20];

    snprintf(acStack_18, 0x10, "cg@%s", param_1);
    prctl(0xf, acStack_18, 0, 0, 0);
    return;
}

void FUN_000250e8(sem_t *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    int iVar1;
    int *piVar2;
    char acStack_818[2052];

    iVar1 = sem_init(param_1, 0, 0);
    if (iVar1 != 0) {
        piVar2 = __errno_location();
        snprintf(acStack_818, 0x800,
                 "Failed to sem_init ret=%d errno=%d in %s %s():%d", iVar1,
                 *piVar2, param_2, param_3, param_4);
        FUN_00020f58(3, acStack_818, 1);
        FUN_0003eba0(1);
    }
    return;
}

void FUN_00025164(int param_1, pthread_attr_t *param_2,
                  __start_routine *param_3, void *param_4)

{
    FUN_000250e8(param_1 + 0x10, "util.c", "thr_info_create", 0x4a7);
    pthread_create((pthread_t *)(param_1 + 0xc), param_2, param_3, param_4);
    return;
}

void FUN_000251ac(sem_t *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    int *piVar1;
    int iVar2;
    char acStack_818[2048];

    iVar2 = sem_post(param_1);
    if (iVar2 == 0) {
        return;
    }
    piVar1 = __errno_location();
    snprintf(acStack_818, 0x800,
             "Failed to sem_post errno=%d cgsem=0x%p in %s %s():%d", *piVar1,
             param_1, param_2, param_3, param_4);
    FUN_00020f58(3, acStack_818, 1);
    FUN_0003eba0(1);
    return;
}

undefined4 FUN_000251e4(int param_1)

{
    pthread_setcanceltype(1, (int *)0x0);
    (**(code **)(param_1 + 0x10))(*(undefined4 *)(param_1 + 0x14));
    FUN_000251ac(param_1, "util.c", "completion_thread", 0xe2a);
    return 0;
}

void FUN_00025228(sem_t *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    int iVar1;
    int *piVar2;
    char acStack_818[2052];

    do {
        iVar1 = sem_wait(param_1);
        if (iVar1 == 0) {
            return;
        }
        piVar2 = __errno_location();
    } while (*piVar2 == 4);
    snprintf(acStack_818, 0x800,
             "Failed to sem_wait errno=%d cgsem=0x%p in %s %s():%d", *piVar2,
             param_1, param_2, param_3, param_4);
    FUN_00020f58(3, acStack_818, 1);
    FUN_0003eba0(1);
    return;
}

undefined4 FUN_000252a8(sem_t *param_1, int param_2, undefined4 param_3,
                        undefined4 param_4, undefined4 param_5)

{
    int *piVar1;
    int iVar2;
    int iVar3;
    timespec local_838;
    timeval local_830;
    char acStack_828[2052];

    gettimeofday(&local_830, (__timezone_ptr_t)0x0);
    FUN_00023768(&local_838, local_830.tv_usec, param_2, param_2 >> 0x1f);
    do {
        iVar3 = local_830.tv_usec * 1000 + local_838.tv_nsec;
        iVar2 = local_830.tv_sec + local_838.tv_sec;
        local_838.tv_nsec = iVar3;
        local_838.tv_sec = iVar2;
        if (iVar3 < 1000000000) {
            for (; local_838.tv_nsec < 0;
                 local_838.tv_nsec = local_838.tv_nsec + 1000000000) {
                local_838.tv_sec = local_838.tv_sec + -1;
            }
        } else {
            local_838.tv_nsec = iVar3 + -1000000000;
            local_838.tv_sec = iVar2 + 1;
            if (999999999 < local_838.tv_nsec) {
                local_838.tv_nsec = iVar3 + -2000000000;
                local_838.tv_sec = iVar2 + 2;
            }
        }
        iVar2 = sem_timedwait(param_1, &local_838);
        if (iVar2 == 0) {
            return 0;
        }
        piVar1 = __errno_location();
        iVar2 = *piVar1;
        if (iVar2 == 0x6e) {
            return 0x6e;
        }
    } while (iVar2 == 4);
    snprintf(acStack_828, 0x800,
             "Failed to sem_timedwait errno=%d cgsem=0x%p in %s %s():%d", iVar2,
             param_1, param_3, param_4, param_5);
    FUN_00020f58(3, acStack_828, 1);
    FUN_0003eba0(1);
    return 0;
}

void FUN_000253e4(sem_t *param_1)

{
    int iVar1;
    int *piVar2;

    do {
        while (true) {
            iVar1 = sem_trywait(param_1);
            if (-1 < iVar1)
                break;
            piVar2 = __errno_location();
            if (*piVar2 != 4) {
                return;
            }
        }
    } while (iVar1 == 0);
    return;
}

bool FUN_0002541c(undefined4 param_1, undefined4 param_2, undefined4 param_3)

{
    void *__arg;
    int iVar1;
    pthread_t local_1c[2];

    __arg =
        (void *)FUN_000229bc(0x18, "util.c", "cg_completion_timeout", 0xe35);
    FUN_000250e8(__arg, "util.c", "cg_completion_timeout", 0xe36);
    *(undefined4 *)((int)__arg + 0x10) = param_1;
    *(undefined4 *)((int)__arg + 0x14) = param_2;
    pthread_create(local_1c, (pthread_attr_t *)0x0, FUN_000251e4, __arg);
    iVar1 =
        FUN_000252a8(__arg, param_3, "util.c", "cg_completion_timeout", 0xe3c);
    if (iVar1 != 0) {
        pthread_cancel(local_1c[0]);
        return iVar1 == 0;
    }
    pthread_join(local_1c[0], (void **)0x0);
    free(__arg);
    return true;
}

void FUN_000254e8(void *param_1, void *param_2, size_t param_3,
                  undefined4 param_4, undefined4 param_5, undefined4 param_6)

{
    char *__format;
    char acStack_810[2048];

    if ((int)(param_3 - 1) < 0) {
        if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
            (DAT_00067db4 < 3)) {
            return;
        }
        __format = "ERR: Asked to memcpy %u bytes from %s %s():%d";
    } else if (param_1 == (void *)0x0) {
        if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
            (DAT_00067db4 < 3)) {
            return;
        }
        __format = "ERR: Asked to memcpy %u bytes to NULL from %s %s():%d";
    } else {
        if (param_2 != (void *)0x0) {
            memcpy(param_1, param_2, param_3);
            return;
        }
        if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
            (DAT_00067db4 < 3)) {
            return;
        }
        __format = "ERR: Asked to memcpy %u bytes from NULL from %s %s():%d";
    }
    snprintf(acStack_810, 0x800, __format, param_3, param_4, param_5, param_6);
    FUN_00020f58(3, acStack_810, 0);
    return;
}

void FUN_00025658(undefined1 *param_1)

{
    undefined4 local_24;
    undefined4 local_20;
    undefined4 local_1c;
    undefined4 local_18;
    undefined4 local_14;
    undefined4 local_10;
    undefined1 local_c;

    local_20 = 0;
    local_24 = 0;
    local_1c = 0;
    local_18 = 0;
    local_14 = 0;
    local_10 = 0;
    local_c = 0;
    FUN_00022fec(&local_24);
    *param_1 = 0x76;
    param_1[1] = 0xa9;
    param_1[2] = 0x14;
    FUN_000254e8(param_1 + 3, (int)&local_24 + 1, 0x14, "util.c",
                 "address_to_pubkeyhash", 0x3c6);
    param_1[0x17] = 0x88;
    param_1[0x18] = 0xac;
    return;
}

undefined1 *FUN_000256e4(char *param_1, int *param_2)

{
    size_t sVar1;
    undefined1 *puVar2;

    sVar1 = strlen(param_1);
    puVar2 =
        (undefined1 *)FUN_000229bc(sVar1 + 9, "util.c", "ser_string", 0x3e4);
    if (sVar1 < 0xfd) {
        *puVar2 = (char)sVar1;
        FUN_000254e8(puVar2 + 1, param_1, sVar1, "util.c", "ser_string", 1000);
        *param_2 = sVar1 + 1;
        return puVar2;
    }
    if (0xffff < sVar1) {
        *puVar2 = 0xfe;
        *(size_t *)(puVar2 + 1) = sVar1 << 0x18 | (sVar1 >> 8 & 0xff) << 0x10 |
                                  (sVar1 >> 0x10 & 0xff) << 8 | sVar1 >> 0x18;
        FUN_000254e8(puVar2 + 5, param_1, sVar1, "util.c", "ser_string", 0x3fb);
        *param_2 = sVar1 + 5;
        return puVar2;
    }
    *puVar2 = 0xfd;
    *(ushort *)(puVar2 + 1) =
        (ushort)((sVar1 & 0xff) << 8) | (ushort)(sVar1 >> 8) & 0xff;
    FUN_000254e8(puVar2 + 3, param_1, sVar1, "util.c", "ser_string", 0x3f1);
    *param_2 = sVar1 + 3;
    return puVar2;
}

void FUN_000257f8(undefined4 param_1, undefined4 param_2)

{
    FUN_000254e8(param_1, param_2, 8, "util.c", "copy_time", 0x4d4);
    return;
}

uint FUN_0002582c(undefined4 *param_1, undefined4 param_2)

{
    uint uVar1;
    int *piVar2;
    int iVar3;
    char *pcVar4;
    byte *pbVar5;
    size_t sVar6;
    undefined4 uVar7;
    int iVar8;
    undefined4 *puVar9;
    void *__ptr;
    byte *pbVar10;
    int iVar12;
    int iVar13;
    uint uVar14;
    uint uVar15;
    int iVar16;
    bool bVar17;
    char *local_980[5];
    undefined4 local_96c;
    undefined1 auStack_968[4];
    char *local_964;
    char *local_960;
    int local_95c;
    undefined4 *local_958;
    pthread_mutex_t *local_954;
    int local_950;
    char *local_94c;
    char *local_948;
    char *local_944;
    char *local_940;
    byte *local_93c;
    char *local_938;
    uint local_934;
    uint local_930;
    uint local_92c;
    undefined4 local_928;
    undefined4 local_924;
    undefined4 local_920;
    undefined4 local_91c;
    char *local_918;
    char *local_914;
    char acStack_90c[228];
    undefined4 local_828;
    undefined4 uStack_824;
    undefined4 uStack_820;
    undefined4 uStack_81c;
    undefined4 local_818;
    undefined4 uStack_814;
    undefined4 uStack_810;
    undefined4 uStack_80c;
    undefined4 local_808;
    undefined4 uStack_804;
    undefined4 uStack_800;
    undefined4 uStack_7fc;
    undefined4 local_7f8;
    undefined2 uStack_7f4;
    undefined1 local_7f2;
    byte *pbVar11;

    piVar2 = (int *)FUN_00048484(param_2, 4);
    if ((piVar2 == (int *)0x0) || (*piVar2 != 1)) {
        return 0;
    }
    iVar3 = FUN_00048468();
    if (iVar3 < 1) {
        uVar14 = 0;
    } else {
        iVar13 = 0;
        uVar14 = 0;
        do {
            memset(acStack_90c, 0, 0x20);
            pcVar4 = (char *)FUN_00022520(piVar2, iVar13);
            if (pcVar4 == (char *)0x0) {
                return uVar14;
            }
            uVar14 = FUN_00022cd8(acStack_90c, pcVar4, 0x20);
            if (uVar14 == 0) {
                if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                    (DAT_00067db4 < 3)) {
                LAB_00025968:
                    if (DAT_00067db4 < 3)
                        goto LAB_000259c4;
                } else {
                    local_980[0] = pcVar4;
                    snprintf((char *)&local_828, 0x800, "merkle %d: %s",
                             iVar13);
                    FUN_00020f58(3, &local_828, 0);
                    if ((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0'))
                        goto LAB_00025968;
                }
                FUN_00020f58(3, &local_828, 0);
            LAB_000259c4:
                free(pcVar4);
                return 0;
            }
            iVar13 = iVar13 + 1;
            free(pcVar4);
        } while (iVar3 != iVar13);
    }
    pbVar5 = (byte *)FUN_00022520(param_2, 0);
    local_91c = FUN_000224bc(param_2, 1);
    local_914 = (char *)FUN_00022520(param_2, 2);
    local_918 = (char *)FUN_00022520(param_2, 3);
    local_920 = FUN_000224bc(param_2, 5);
    local_924 = FUN_000224bc(param_2, 6);
    local_928 = FUN_000224bc(param_2, 7);
    iVar13 = FUN_00048484(param_2, 8);
    if (iVar13 == 0) {
        uVar15 = 0;
    } else {
        piVar2 = (int *)FUN_00048484(param_2, 8);
        uVar15 = (uint)(*piVar2 == 5);
    }
    local_92c = uVar15;
    if (pbVar5 == (byte *)0x0) {
        if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
            (DAT_00067db4 < 3))
            goto LAB_00025b54;
        pcVar4 = "Null string passed to valid_ascii from in %s %s():%d";
    } else {
        sVar6 = strlen((char *)pbVar5);
        pbVar11 = pbVar5;
        if (sVar6 != 0) {
            do {
                pbVar10 = pbVar11 + 1;
                if (0x5e < *pbVar11 - 0x20) {
                    if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                        (DAT_00067db4 < 3))
                        goto LAB_00025b54;
                    local_980[0] = "util.c";
                    local_980[1] = "parse_notify";
                    local_980[2] = (char *)0x7b1;
                    snprintf((char *)&local_828, 0x800,
                             "Invalid char 0x%x passed to valid_ascii from in "
                             "%s %s():%d");
                    goto LAB_00025b40;
                }
                pbVar11 = pbVar10;
            } while ((int)pbVar10 - (int)pbVar5 < (int)sVar6);
            iVar13 = FUN_000225a0(local_91c, "parse_notify", 0x7b1);
            if (((iVar13 == 0) ||
                 (iVar13 = FUN_000225a0(local_914, "parse_notify", 0x7b1),
                  iVar13 == 0)) ||
                (((iVar13 = FUN_000225a0(local_918, "parse_notify", 0x7b2),
                   iVar13 == 0 ||
                       ((iVar13 =
                             FUN_000225a0(local_920, "parse_notify", 0x7b2),
                         iVar13 == 0 || (iVar13 = FUN_000225a0(
                                             local_924, "parse_notify", 0x7b2),
                                         iVar13 == 0)))) ||
                  (iVar13 = FUN_000225a0(local_928, "parse_notify", 0x7b3),
                   iVar13 == 0))))
                goto LAB_00025b54;
            local_954 = (pthread_mutex_t *)(param_1 + 0x35);
            iVar13 = pthread_mutex_lock(local_954);
            if (iVar13 != 0) {
                FUN_00022864("parse_notify", 0x7bc);
            }
            local_958 = param_1 + 0x3b;
            FUN_000226f0(local_958, "parse_notify", 0x7bc);
            local_940 = (char *)(param_1 + 0x1ac);
            free((void *)param_1[0xa8]);
            param_1[0xa8] = pbVar5;
            snprintf((char *)(param_1 + 0x1ac), 0x41, "%s", local_91c);
            sVar6 = strlen(local_914);
            local_930 = sVar6 >> 1;
            sVar6 = strlen(local_918);
            local_934 = sVar6 >> 1;
            local_944 = (char *)(param_1 + 0x1bd);
            snprintf(local_944, 9, "%s", local_920);
            local_948 = (char *)(param_1 + 0x1c0);
            snprintf(local_948, 9, "%s", local_924);
            local_94c = (char *)(param_1 + 0x1c3);
            iVar13 = 0;
            snprintf(local_94c, 9, "%s", local_928);
            *(char *)(param_1 + 0xaa) = (char)uVar15;
            if (0.0 < *(double *)(param_1 + 0x1c6)) {
                *(double *)(param_1 + 0x1c8) = *(double *)(param_1 + 0x1c6);
            }
            param_1[0x18a] = local_930 + param_1[0x187];
            local_950 = local_934 + param_1[0x9e] + local_930 + param_1[0x187];
            param_1[0x189] = local_950;
            for (; iVar13 < (int)param_1[0x1ab]; iVar13 = iVar13 + 1) {
                free(*(void **)(param_1[0xa9] + iVar13 * 4));
            }
            if (iVar3 == 0) {
                param_1[0x1ab] = 0;
                local_938 = &DAT_00073398;
            LAB_00025e40:
                uVar14 = param_1[0x5e];
                param_1[0x5e] = uVar14 + 1;
                param_1[0x5f] = param_1[0x5f] + (uint)(0xfffffffe < uVar14);
            LAB_00025e58:
                if (local_92c != 0) {
                    param_1[0x9c] = 0;
                    param_1[0x9d] = 0;
                }
                local_980[3] = local_948;
                local_980[4] = "00000000";
                local_96c = DAT_000687ec;
                local_980[2] = local_94c;
                local_980[1] = "00000000000000000000000000000000000000000000000"
                               "00000000000000000";
                local_980[0] = local_940;
                snprintf(acStack_90c, 0xe1, "%s%s%s%s%s%s%s", local_944);
                iVar3 = FUN_00022cd8(param_1 + 0x18b, acStack_90c, 0x70);
                if (iVar3 == 0) {
                    if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                        (2 < DAT_00067db4)) {
                        pcVar4 = "Failed to convert header to header_bin in "
                                 "parse_notify";
                        goto LAB_0002661c;
                    }
                LAB_00026578:
                    uVar14 = 0;
                } else {
                    iVar3 = -(local_930 + 0xe & 0xfffffff8);
                    iVar13 = FUN_00022cd8(auStack_968 + iVar3, local_914);
                    if (iVar13 == 0) {
                        if (((DAT_00074500 == '\0') &&
                             (DAT_00068bd4 == '\0')) &&
                            (DAT_00067db4 < 3))
                            goto LAB_00026578;
                        pcVar4 =
                            "Failed to convert cb1 to cb1_bin in parse_notify";
                        uVar14 = 0;
                    } else {
                        iVar13 = -(local_934 + 0xe & 0xfffffff8);
                        uVar14 = FUN_00022cd8(auStack_968 + iVar13 + iVar3,
                                              local_918);
                        if (uVar14 != 0) {
                            free((void *)param_1[0x188]);
                            *(undefined4 *)((int)local_980 + iVar13 + iVar3) =
                                0x80f;
                            uVar7 = FUN_00022a44(local_950, 1, "util.c",
                                                 "parse_notify");
                            param_1[0x188] = uVar7;
                            *(undefined4 *)((int)local_980 + iVar13 + iVar3 +
                                            4) = 0x810;
                            *(char **)((int)local_980 + iVar13 + iVar3) =
                                "parse_notify";
                            FUN_000254e8(uVar7, auStack_968 + iVar3, local_930,
                                         "util.c");
                            iVar16 = param_1[0x187];
                            if (iVar16 != 0) {
                                iVar8 = param_1[0x188];
                                *(undefined4 *)((int)local_980 + iVar13 +
                                                iVar3 + 4) = 0x812;
                                uVar15 = local_930;
                                *(char **)((int)local_980 + iVar13 + iVar3) =
                                    "parse_notify";
                                FUN_000254e8(iVar8 + uVar15, param_1[0x9a],
                                             iVar16, "util.c");
                                iVar16 = param_1[0x187];
                            }
                            uVar1 = local_930;
                            uVar15 = local_934;
                            iVar12 = param_1[0x9e];
                            iVar8 = param_1[0x188];
                            *(char **)((int)local_980 + iVar13 + iVar3) =
                                "parse_notify";
                            *(undefined4 *)((int)local_980 + iVar13 + iVar3 +
                                            4) = 0x813;
                            FUN_000254e8(iVar8 + iVar16 + iVar12 + uVar1,
                                         auStack_968 + iVar13 + iVar3, uVar15,
                                         "util.c");
                            uVar15 = (uint)DAT_00068bd5;
                            if (uVar15 != 0) {
                                __ptr = (void *)FUN_00022c24(param_1[0x188],
                                                             param_1[0x189]);
                                if ((DAT_00068bd5 != 0) &&
                                    (((DAT_00074500 != '\0' ||
                                       (DAT_00068bd4 != '\0')) ||
                                      (6 < DAT_00067db4)))) {
                                    *(void **)((int)local_980 + iVar13 +
                                               iVar3) = __ptr;
                                    snprintf((char *)&local_828, 0x800,
                                             "Pool %d coinbase %s", *param_1);
                                    FUN_00020f58(7, &local_828, 0);
                                }
                                free(__ptr);
                                uVar14 = uVar15;
                            }
                            goto LAB_00026010;
                        }
                        if (((DAT_00074500 == '\0') &&
                             (DAT_00068bd4 == '\0')) &&
                            (DAT_00067db4 < 3))
                            goto LAB_00026578;
                        pcVar4 =
                            "Failed to convert cb2 to cb2_bin in parse_notify";
                    }
                    local_828 = *(undefined4 *)pcVar4;
                    uStack_824 = *(undefined4 *)(pcVar4 + 4);
                    uStack_820 = *(undefined4 *)(pcVar4 + 8);
                    uStack_81c = *(undefined4 *)(pcVar4 + 0xc);
                    local_818 = *(undefined4 *)(pcVar4 + 0x10);
                    uStack_814 = *(undefined4 *)(pcVar4 + 0x14);
                    uStack_810 = *(undefined4 *)(pcVar4 + 0x18);
                    uStack_80c = *(undefined4 *)(pcVar4 + 0x1c);
                    local_808 = *(undefined4 *)(pcVar4 + 0x20);
                    uStack_804 = *(undefined4 *)(pcVar4 + 0x24);
                    uStack_800 = *(undefined4 *)(pcVar4 + 0x28);
                    uStack_7fc = *(undefined4 *)(pcVar4 + 0x2c);
                    local_7f8 = CONCAT31(local_7f8._1_3_,
                                         (char)*(undefined4 *)(pcVar4 + 0x30));
                    FUN_00020f58(3, &local_828, 0);
                }
            } else {
                local_980[0] = (char *)0x7d1;
                uVar7 = FUN_00022ad4(param_1[0xa9], iVar3 * 4 + 1, "util.c",
                                     "parse_notify");
                local_960 = "util.c";
                iVar13 = 0;
                param_1[0xa9] = uVar7;
                local_938 = &DAT_00073398;
                local_964 = (char *)&DAT_00068bd5;
                local_93c = pbVar5;
                do {
                    local_95c = iVar13 << 2;
                    if (iVar3 <= iVar13) {
                        param_1[0x1ab] = iVar3;
                        pbVar5 = local_93c;
                        if (1 < iVar3)
                            goto LAB_00025e58;
                        goto LAB_00025e40;
                    }
                    pcVar4 = (char *)FUN_00022520();
                    iVar16 = param_1[0xa9];
                    uVar7 =
                        FUN_000229bc(0x20, local_960, "parse_notify", 0x7d6);
                    *(undefined4 *)(iVar16 + iVar13 * 4) = uVar7;
                    if (((*local_938 != '\0') && (*local_964 != '\0')) &&
                        ((DAT_00074500 != '\0' ||
                          ((DAT_00068bd4 != '\0' || (6 < DAT_00067db4)))))) {
                        local_980[0] = pcVar4;
                        snprintf((char *)&local_828, 0x800, "merkle %d: %s",
                                 iVar13);
                        FUN_00020f58(7, &local_828, 0);
                    }
                    iVar13 = iVar13 + 1;
                    iVar16 =
                        FUN_00022cd8(*(undefined4 *)(param_1[0xa9] + local_95c),
                                     pcVar4, 0x20);
                    free(pcVar4);
                } while (iVar16 != 0);
                pbVar5 = local_93c;
                if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                    (DAT_00067db4 < 3))
                    goto LAB_00026578;
                pcVar4 =
                    "Failed to convert merkle to merkle_bin in parse_notify";
            LAB_0002661c:
                uVar14 = 0;
                local_828 = *(undefined4 *)pcVar4;
                uStack_824 = *(undefined4 *)(pcVar4 + 4);
                uStack_820 = *(undefined4 *)(pcVar4 + 8);
                uStack_81c = *(undefined4 *)(pcVar4 + 0xc);
                local_818 = *(undefined4 *)(pcVar4 + 0x10);
                uStack_814 = *(undefined4 *)(pcVar4 + 0x14);
                uStack_810 = *(undefined4 *)(pcVar4 + 0x18);
                uStack_80c = *(undefined4 *)(pcVar4 + 0x1c);
                local_808 = *(undefined4 *)(pcVar4 + 0x20);
                uStack_804 = *(undefined4 *)(pcVar4 + 0x24);
                uStack_800 = *(undefined4 *)(pcVar4 + 0x28);
                uStack_7fc = *(undefined4 *)(pcVar4 + 0x2c);
                local_7f8 = *(undefined4 *)(pcVar4 + 0x30);
                uStack_7f4 = (undefined2) * (undefined4 *)(pcVar4 + 0x34);
                local_7f2 =
                    (undefined1)((uint) * (undefined4 *)(pcVar4 + 0x34) >>
                                 0x10);
                FUN_00020f58(3, &local_828, 0);
            }
        LAB_00026010:
            FUN_0002276c(local_958, "parse_notify", 0x81c);
            FUN_000227e8(local_954, "parse_notify", 0x81c);
            (*DAT_00067ed8)();
            if (*local_938 == '\0')
                goto LAB_00026400;
            if (DAT_00068bd5 == 0) {
            LAB_00026220:
                if (DAT_00068bd5 == 0)
                    goto LAB_00026400;
                if (DAT_00074500 != '\0') {
                LAB_00026268:
                    snprintf((char *)&local_828, 0x800, "bbversion: %s",
                             local_920);
                    FUN_00020f58(7, &local_828, 0);
                    goto LAB_00026298;
                }
            LAB_00026248:
                if ((DAT_00068bd4 != '\0') || (6 < DAT_00067db4))
                    goto LAB_00026268;
            LAB_000262b8:
                if ((DAT_00068bd4 != '\0') || (6 < DAT_00067db4)) {
                LAB_000262e0:
                    snprintf((char *)&local_828, 0x800, "nbit: %s", local_924);
                    FUN_00020f58(7, &local_828, 0);
                LAB_00026308:
                    if (DAT_00068bd5 == 0)
                        goto LAB_00026400;
                    if (DAT_00074500 == '\0')
                        goto LAB_00026328;
                LAB_00026350:
                    snprintf((char *)&local_828, 0x800, "ntime: %s", local_928);
                    FUN_00020f58(7, &local_828, 0);
                    goto LAB_00026378;
                }
            LAB_00026328:
                if ((DAT_00068bd4 != '\0') || (6 < DAT_00067db4))
                    goto LAB_00026350;
            LAB_00026398:
                if ((DAT_00068bd4 == '\0') && (DAT_00067db4 < 7))
                    goto LAB_00026400;
            } else {
                if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                    (6 < DAT_00067db4)) {
                    snprintf((char *)&local_828, 0x800, "job_id: %s", pbVar5);
                    FUN_00020f58(7, &local_828, 0);
                    if (DAT_00068bd5 != 0) {
                        if (DAT_00074500 == '\0')
                            goto LAB_000260f0;
                        goto LAB_00026118;
                    }
                LAB_00026298:
                    if (DAT_00068bd5 == 0)
                        goto LAB_00026400;
                    if (DAT_00074500 == '\0')
                        goto LAB_000262b8;
                    goto LAB_000262e0;
                }
            LAB_000260f0:
                if ((DAT_00068bd4 != '\0') || (6 < DAT_00067db4)) {
                LAB_00026118:
                    snprintf((char *)&local_828, 0x800, "prev_hash: %s",
                             local_91c);
                    FUN_00020f58(7, &local_828, 0);
                    if (DAT_00068bd5 != 0) {
                        if (DAT_00074500 == '\0')
                            goto LAB_00026160;
                        goto LAB_00026188;
                    }
                    goto LAB_00026308;
                }
            LAB_00026160:
                if ((DAT_00068bd4 == '\0') && (DAT_00067db4 < 7)) {
                LAB_000261d0:
                    if ((DAT_00068bd4 != '\0') || (6 < DAT_00067db4)) {
                    LAB_000261f8:
                        snprintf((char *)&local_828, 0x800, "coinbase2: %s",
                                 local_918);
                        FUN_00020f58(7, &local_828, 0);
                        goto LAB_00026220;
                    }
                    goto LAB_00026248;
                }
            LAB_00026188:
                snprintf((char *)&local_828, 0x800, "coinbase1: %s", local_914);
                FUN_00020f58(7, &local_828, 0);
                if (DAT_00068bd5 != 0) {
                    if (DAT_00074500 == '\0')
                        goto LAB_000261d0;
                    goto LAB_000261f8;
                }
            LAB_00026378:
                if (DAT_00068bd5 == 0)
                    goto LAB_00026400;
                if (DAT_00074500 == '\0')
                    goto LAB_00026398;
            }
            puVar9 = (undefined4 *)&DAT_0004db78;
            if (local_92c == 0) {
                puVar9 = &DAT_0004b184;
            }
            snprintf((char *)&local_828, 0x800, "clean: %s", puVar9);
            FUN_00020f58(7, &local_828, 0);
        LAB_00026400:
            free(local_914);
            free(local_918);
            param_1[0x1d] = param_1[0x1d] + 1;
            bVar17 = 0xfffffffe < DAT_000755e8;
            DAT_000755e8 = DAT_000755e8 + 1;
            DAT_000755ec = DAT_000755ec + (uint)bVar17;
            puVar9 = (undefined4 *)FUN_00031ff4();
            if (param_1 != puVar9) {
                return uVar14;
            }
            DAT_000767f0 = 1;
            return uVar14;
        }
        if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
            (DAT_00067db4 < 3))
            goto LAB_00025b54;
        pcVar4 = "Zero length string passed to valid_ascii from in %s %s():%d";
    }
    local_980[0] = "parse_notify";
    local_980[1] = (char *)0x7b1;
    snprintf((char *)&local_828, 0x800, pcVar4, "util.c");
LAB_00025b40:
    FUN_00020f58(3, &local_828, 0);
LAB_00025b54:
    free(pbVar5);
    free(local_914);
    free(local_918);
    return uVar14;
}

undefined4 FUN_00026830(int param_1, int param_2, int param_3)

{
    long lVar1;
    in_addr_t iVar2;
    ssize_t sVar3;
    size_t sVar4;
    int iVar5;
    uint uVar6;
    char *__s;
    addrinfo *local_a48;
    addrinfo aStack_a44;
    undefined2 local_a24;
    undefined1 local_a22;
    undefined1 local_a21;
    undefined4 local_a20;
    char acStack_a1c[508];
    addrinfo local_820[64];

    local_a24 = 0x104;
    lVar1 = strtol(*(char **)(param_1 + 0x248), (char **)0x0, 10);
    local_a21 = (undefined1)lVar1;
    local_a22 = (undefined1)((uint)lVar1 >> 8);
    builtin_strncpy(acStack_a1c, "CGMINER", 8);
    iVar2 = inet_addr(*(char **)(param_1 + 600));
    uVar6 = iVar2 << 0x18 | (iVar2 >> 8 & 0xff) << 0x10 |
            (iVar2 >> 0x10 & 0xff) << 8 | iVar2 >> 0x18;
    if (uVar6 == 0xffffffff) {
        local_a48 = &aStack_a44;
        memset(local_820, 0, 0x20);
        local_820[0].ai_family = 2;
        iVar5 = getaddrinfo(*(char **)(param_1 + 600), (char *)0x0, local_820,
                            &local_a48);
        if (iVar5 == 0) {
            uVar6 = *(uint *)(local_a48->ai_addr->sa_data + 2);
            freeaddrinfo(local_a48);
            uVar6 = uVar6 << 0x18 | (uVar6 >> 8 & 0xff) << 0x10 |
                    (uVar6 >> 0x10 & 0xff) << 8 | uVar6 >> 0x18;
            if (uVar6 == 0xffffffff)
                goto LAB_00026a84;
            goto LAB_00026894;
        }
        if (param_3 == 0) {
        LAB_00026a84:
            if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                (DAT_00067db4 < 4)) {
                return 0;
            }
            snprintf((char *)local_820, 0x800,
                     "Invalid IP address specified for socks4 proxy: %s",
                     *(undefined4 *)(param_1 + 600));
            goto LAB_00026948;
        }
        __s = *(char **)(param_1 + 600);
        local_a20 = 0x1000000;
        sVar4 = strlen(__s);
        if (0xfe < sVar4) {
            sVar4 = 0xff;
        }
        FUN_000254e8(acStack_a1c + 8, __s, sVar4, "util.c", "socks4_negotiate",
                     0xb52);
        acStack_a1c[sVar4 + 8] = '\0';
        send(param_2, &local_a24, sVar4 + 0x11, 0);
    } else {
    LAB_00026894:
        local_a20._3_1_ = (undefined1)uVar6;
        local_a20._0_3_ =
            CONCAT12((char)(uVar6 >> 8),
                     CONCAT11((char)(uVar6 >> 0x10), (char)(uVar6 >> 0x18)));
        send(param_2, &local_a24, 0x10, 0);
    }
    sVar3 = recv(param_2, local_820, 1, 0);
    if (((sVar3 != -1) && ((char)local_820[0].ai_flags == '\0')) &&
        ((sVar3 = recv(param_2, local_820, 1, 0),
          sVar3 != -1 && ((char)local_820[0].ai_flags == 'Z')))) {
        iVar5 = 6;
        do {
            recv(param_2, local_820, 1, 0);
            iVar5 = iVar5 + -1;
        } while (iVar5 != 0);
        return 1;
    }
    if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
        (DAT_00067db4 < 4)) {
        return 0;
    }
    snprintf((char *)local_820, 0x800, "Bad response from %s:%s SOCKS4 server",
             *(undefined4 *)(param_1 + 0x25c),
             *(undefined4 *)(param_1 + 0x260));
LAB_00026948:
    FUN_00020f58(4, local_820, 0);
    return 0;
}

/* WARNING: Restarted to delay deadcode elimination for space: ram */

uint FUN_00026aec(undefined4 *param_1)

{
    bool bVar1;
    bool bVar2;
    int iVar3;
    undefined4 uVar4;
    uint uVar5;
    uint uVar6;
    int iVar7;
    size_t sVar8;
    ssize_t sVar9;
    long lVar10;
    void *__ptr;
    int *piVar11;
    char *pcVar12;
    int *piVar13;
    char *__s;
    int *piVar14;
    uint uVar15;
    undefined4 *puVar16;
    byte bVar17;
    addrinfo *paVar18;
    uint *puVar19;
    undefined4 uVar20;
    uint *local_2b8c;
    char *local_2b88;
    char *local_2b84;
    int local_2b74;
    int local_2b6c;
    addrinfo *local_2b5c;
    socklen_t local_2b58;
    int local_2b54;
    timeval local_2b50;
    addrinfo aStack_2b48;
    undefined4 local_2b28[23];
    undefined1 auStack_2acc[156];
    undefined4 uStack_2a30;
    fd_set local_2a2c[4];
    uint local_2828;
    char acStack_2824[12];
    uint local_2818;
    char acStack_2814[4];
    undefined4 local_2810;
    char acStack_280c[8];
    uint local_2804;
    char acStack_2800[4];
    undefined4 uStack_27fc;
    undefined2 uStack_27f8;
    undefined1 local_27f6;
    char acStack_2028[8196];

    local_2b74 = 0;
    bVar1 = false;
    do {
        iVar3 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xb0));
        if (iVar3 != 0) {
            piVar14 = __errno_location();
            snprintf((char *)&local_2828, 0x800,
                     "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d",
                     *piVar14, "util.c", "setup_stratum_socket", 0xb81);
            FUN_00020f58(3, &local_2828, 1);
            FUN_0003eba0(1);
        }
        *(undefined1 *)((int)param_1 + 0x281) = 0;
        if (param_1[0x93] != 0) {
            close(param_1[0x93]);
        }
        param_1[0x93] = 0;
        iVar3 = pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0xb0));
        if (iVar3 != 0) {
            piVar14 = __errno_location();
            snprintf((char *)&local_2828, 0x800,
                     "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d",
                     *piVar14, "util.c", "setup_stratum_socket", 0xb86);
            FUN_00020f58(3, &local_2828, 1);
            FUN_0003eba0(1);
        }
        (*DAT_00067ed8)();
        memset(&aStack_2b48, 0, 0x20);
        iVar3 = DAT_0006ab9c;
        aStack_2b48.ai_socktype = 1;
        if (param_1[0x2e] == 0) {
            if (DAT_0006ab9c == 0) {
                local_2b84 = (char *)param_1[0x96];
            } else {
                param_1[0x2e] = DAT_0006ab9c;
                FUN_00023cd8(iVar3, param_1 + 0x97, param_1 + 0x98);
                param_1[0x2d] = 3;
                local_2b84 = (char *)param_1[0x96];
                if (param_1[0x2e] != 0)
                    goto LAB_00026ba0;
            }
            local_2b88 = (char *)param_1[0x92];
        } else {
        LAB_00026ba0:
            local_2b84 = (char *)param_1[0x97];
            local_2b88 = (char *)param_1[0x98];
        }
        iVar3 = getaddrinfo(local_2b84, local_2b88, &aStack_2b48, &local_2b5c);
        paVar18 = local_2b5c;
        if (iVar3 != 0) {
            if (*(char *)((int)param_1 + 99) == '\0') {
                if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                    (3 < DAT_00067db4)) {
                    snprintf((char *)&local_2828, 0x800,
                             "Failed to resolve (?wrong URL) %s:%s", local_2b84,
                             local_2b88);
                    FUN_00020f58(4, &local_2828, 0);
                }
                *(undefined1 *)((int)param_1 + 99) = 1;
            } else {
                if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                    (DAT_00067db4 < 6)) {
                LAB_000274d8:
                    if (DAT_00068bd5 == 0)
                        goto LAB_00026c64;
                    bVar17 = 0;
                    goto LAB_0002778c;
                }
                snprintf((char *)&local_2828, 0x800,
                         "Failed to getaddrinfo for %s:%s", local_2b84,
                         local_2b88);
                FUN_00020f58(6, &local_2828, 0);
            }
        LAB_00026c58:
            if (DAT_00068bd5 != 0) {
                bVar17 = 0;
            LAB_00027778:
                if (DAT_00074500 == '\0') {
                LAB_0002778c:
                    if ((DAT_00068bd4 != '\0') || (6 < DAT_00067db4))
                        goto LAB_00027798;
                } else {
                LAB_00027798:
                    local_2828._0_1_ = 'I';
                    local_2828._1_1_ = 'n';
                    local_2828._2_1_ = 'i';
                    local_2828._3_1_ = 't';
                    builtin_strncpy(acStack_2824, "iate stratum", 0xc);
                    local_2818._0_1_ = ' ';
                    local_2818._1_1_ = 'f';
                    local_2818._2_1_ = 'a';
                    local_2818._3_1_ = 'i';
                    builtin_strncpy(acStack_2814, "led", 4);
                    FUN_00020f58(7, &local_2828, 0);
                }
                if (bVar17 != 0) {
                LAB_0002772c:
                    FUN_00024340(param_1);
                }
            }
        LAB_00026c64:
            if (local_2b74 == 0) {
                uVar6 = 0;
            } else {
                uVar6 = 0;
            LAB_00026fe4:
                if (*(int *)(local_2b74 + 4) != -1) {
                    piVar14 = (int *)(local_2b74 + 4);
                    DataMemoryBarrier(0xb);
                    do {
                        iVar3 = *piVar14;
                        bVar1 = (bool)hasExclusiveAccess(piVar14);
                    } while (!bVar1);
                    *piVar14 = iVar3 + -1;
                    if (iVar3 + -1 == 0) {
                        FUN_00048a34(local_2b74);
                        return uVar6;
                    }
                }
            }
            return uVar6;
        }
        while (true) {
            if (paVar18 == (addrinfo *)0x0) {
                if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                    (5 < DAT_00067db4)) {
                    snprintf((char *)&local_2828, 0x800,
                             "Failed to connect to stratum on %s:%s",
                             local_2b84, local_2b88);
                    FUN_00020f58(6, &local_2828, 0);
                }
                freeaddrinfo(local_2b5c);
                goto LAB_00026c58;
            }
            uVar6 = socket(paVar18->ai_family, paVar18->ai_socktype,
                           paVar18->ai_protocol);
            if (uVar6 != 0xffffffff)
                break;
            if ((DAT_00068bd5 == 0) ||
                (((DAT_00074500 == '\0' && (DAT_00068bd4 == '\0')) &&
                  (DAT_00067db4 < 7)))) {
            LAB_00027120:
                paVar18 = paVar18->ai_next;
            } else {
                puVar19 = &local_2828;
                uVar6._0_1_ = 'F';
                uVar6._1_1_ = 'a';
                uVar6._2_1_ = 'i';
                uVar6._3_1_ = 'l';
                uVar5._0_1_ = 'e';
                uVar5._1_1_ = 'd';
                uVar5._2_1_ = ' ';
                uVar5._3_1_ = 's';
                uVar15._0_1_ = 'o';
                uVar15._1_1_ = 'c';
                uVar15._2_1_ = 'k';
                uVar15._3_1_ = 'e';
            LAB_000271a0:
                *puVar19 = uVar6;
                puVar19[1] = uVar5;
                puVar19[2] = uVar15;
                *(undefined2 *)(puVar19 + 3) = 0x74;
                FUN_00020f58(7, &local_2828, 0);
                paVar18 = paVar18->ai_next;
            }
        }
        uVar5 = fcntl(uVar6, 3, 0);
        fcntl(uVar6, 4, uVar5 | 0x800);
        iVar3 = connect(uVar6, paVar18->ai_addr, paVar18->ai_addrlen);
        if (iVar3 == -1) {
            local_2b50.tv_usec = 0;
            local_2b50.tv_sec = 1;
            piVar14 = __errno_location();
            if (*piVar14 == 0x73) {
                uVar5 = uVar6 + 0x1f;
                if (-1 < (int)uVar6) {
                    uVar5 = uVar6;
                }
                uVar15 = uVar6 & 0x1f;
                if ((int)uVar6 < 1) {
                    uVar15 = -(-uVar6 & 0x1f);
                }
                iVar3 = (int)uVar5 >> 5;
                uVar5 = 1 << (uVar15 & 0xff);
                while (true) {
                    puVar16 = &uStack_2a30;
                    do {
                        puVar16 = puVar16 + 1;
                        *puVar16 = 0;
                    } while (local_2a2c[0].fds_bits + 0x1f != puVar16);
                    local_2a2c[0].fds_bits[iVar3] =
                        local_2a2c[0].fds_bits[iVar3] | uVar5;
                    iVar7 = select(uVar6 + 1, (fd_set *)0x0, local_2a2c,
                                   (fd_set *)0x0, &local_2b50);
                    if (0 < iVar7)
                        break;
                    if ((iVar7 == 0) || (*piVar14 != 4))
                        goto LAB_000272c8;
                }
                if ((uVar5 & local_2a2c[0].fds_bits[iVar3]) != 0) {
                    local_2b58 = 4;
                    iVar3 = getsockopt(uVar6, 1, 4, &local_2b54, &local_2b58);
                    if ((iVar3 == 0) && (local_2b54 == 0)) {
                        if ((DAT_00068bd5 != 0) && (((DAT_00074500 != '\0' ||
                                                      (DAT_00068bd4 != '\0')) ||
                                                     (6 < DAT_00067db4)))) {
                            local_2828._0_1_ = 'S';
                            local_2828._1_1_ = 'u';
                            local_2828._2_1_ = 'c';
                            local_2828._3_1_ = 'c';
                            builtin_strncpy(acStack_2824, "eeded delaye", 0xc);
                            local_2818._0_1_ = 'd';
                            local_2818._1_1_ = ' ';
                            local_2818._2_1_ = 'c';
                            local_2818._3_1_ = 'o';
                            builtin_strncpy(acStack_2814, "nnec", 4);
                            local_2810._0_2_ = 0x74;
                            FUN_00020f58(7, &local_2828, 0);
                        }
                        goto LAB_00027410;
                    }
                }
            LAB_000272c8:
                close(uVar6);
                if ((DAT_00068bd5 != 0) &&
                    (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                      (6 < DAT_00067db4)))) {
                    local_2828._0_1_ = 'S';
                    local_2828._1_1_ = 'e';
                    local_2828._2_1_ = 'l';
                    local_2828._3_1_ = 'e';
                    acStack_2824[0] = 'c';
                    acStack_2824[1] = 't';
                    acStack_2824[2] = ' ';
                    acStack_2824[3] = 't';
                    acStack_2824[4] = 'i';
                    acStack_2824[5] = 'm';
                    acStack_2824[6] = 'e';
                    acStack_2824[7] = 'o';
                    acStack_2824[8] = 'u';
                    acStack_2824[9] = 't';
                    acStack_2824[10] = '/';
                    acStack_2824[0xb] = 'f';
                    puVar19 = (uint *)(acStack_2824 + 0xc);
                    uVar6._0_1_ = 'a';
                    uVar6._1_1_ = 'i';
                    uVar6._2_1_ = 'l';
                    uVar6._3_1_ = 'e';
                    uVar5._0_1_ = 'd';
                    uVar5._1_1_ = ' ';
                    uVar5._2_1_ = 'c';
                    uVar5._3_1_ = 'o';
                    uVar15._0_1_ = 'n';
                    uVar15._1_1_ = 'n';
                    uVar15._2_1_ = 'e';
                    uVar15._3_1_ = 'c';
                    goto LAB_000271a0;
                }
            } else {
                close(uVar6);
                if ((DAT_00068bd5 != 0) &&
                    (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                      (6 < DAT_00067db4)))) {
                    local_2828._0_1_ = 'F';
                    local_2828._1_1_ = 'a';
                    local_2828._2_1_ = 'i';
                    local_2828._3_1_ = 'l';
                    builtin_strncpy(acStack_2824, "ed sock conn", 0xc);
                    local_2818._0_1_ = 'e';
                    local_2818._1_1_ = 'c';
                    local_2818._2_1_ = 't';
                    local_2818._3_1_ = '\0';
                    FUN_00020f58(7, &local_2828, 0);
                }
            }
            goto LAB_00027120;
        }
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (3 < DAT_00067db4)) {
            local_2828._0_1_ = 'S';
            local_2828._1_1_ = 'u';
            local_2828._2_1_ = 'c';
            local_2828._3_1_ = 'c';
            builtin_strncpy(acStack_2824, "eeded immedi", 0xc);
            local_2818._0_1_ = 'a';
            local_2818._1_1_ = 't';
            local_2818._2_1_ = 'e';
            local_2818._3_1_ = ' ';
            builtin_strncpy(acStack_2814, "conn", 4);
            local_2810._0_1_ = 'e';
            local_2810._1_1_ = 'c';
            local_2810._2_1_ = 't';
            local_2810._3_1_ = '\0';
            FUN_00020f58(4, &local_2828, 0);
        }
    LAB_00027410:
        FUN_00022400(uVar6);
        freeaddrinfo(local_2b5c);
        if (param_1[0x2e] == 0)
            goto LAB_000275c4;
        switch (param_1[0x2d]) {
        case 0:
            uVar4 = 0;
            break;
        case 1:
            uVar4 = 1;
            break;
        case 2:
            uVar4 = 0;
            goto LAB_000275a4;
        case 3:
        case 5:
            uVar5 = (uint)local_2a2c[0].fds_bits[0] >> 0x10;
            local_2a2c[0].fds_bits[0] = CONCAT22((ushort)uVar5 & 0xff00, 0x105);
            if ((DAT_00068bd5 != 0) &&
                (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                  (6 < DAT_00067db4)))) {
                snprintf((char *)&local_2828, 0x800,
                         "Attempting to negotiate with %s:%s SOCKS5 proxy",
                         param_1[0x97], param_1[0x98]);
                FUN_00020f58(7, &local_2828, 0);
            }
            local_2b8c = &local_2828;
            send(uVar6, local_2a2c, 3, 0);
            sVar9 = recv(uVar6, local_2b8c, 1, 0);
            if (((sVar9 == -1) || ((char)local_2828 != '\x05')) ||
                ((sVar9 = recv(uVar6, local_2b8c, 1, 0),
                  sVar9 == -1 || (((uint)local_2a2c[0].fds_bits[0] >> 0x10 &
                                   0xff) != (local_2828 & 0xff))))) {
                if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                    (DAT_00067db4 < 4))
                    goto LAB_000274d8;
                uVar4 = param_1[0x97];
                uVar20 = param_1[0x98];
            } else {
                pcVar12 = (char *)param_1[0x96];
                local_2a2c[0].fds_bits[0] = 0x3000105;
                sVar8 = strlen(pcVar12);
                if (0xfe < sVar8) {
                    sVar8 = 0xff;
                }
                local_2a2c[0].fds_bits[1]._0_1_ = (undefined1)sVar8;
                FUN_000254e8((undefined1 *)((int)local_2a2c[0].fds_bits + 5),
                             pcVar12, sVar8, "util.c", "socks5_negotiate",
                             0xaec);
                lVar10 = strtol((char *)param_1[0x92], (char **)0x0, 10);
                *(char *)((int)local_2a2c[0].fds_bits + sVar8 + 6) =
                    (char)lVar10;
                *(char *)((int)local_2a2c[0].fds_bits + sVar8 + 5) =
                    (char)((uint)lVar10 >> 8);
                send(uVar6, local_2a2c, sVar8 + 7, 0);
                sVar9 = recv(uVar6, local_2b8c, 1, 0);
                if ((((sVar9 != -1) && ((char)local_2828 == '\x05')) &&
                     (sVar9 = recv(uVar6, local_2b8c, 1, 0), sVar9 != -1)) &&
                    ((local_2828 & 0xff) == 0)) {
                    recv(uVar6, local_2b8c, 1, 0);
                    sVar9 = recv(uVar6, local_2b8c, 1, 0);
                    if (sVar9 != -1) {
                        if ((local_2828 & 0xff) == 1) {
                            iVar3 = 4;
                            do {
                                recv(uVar6, local_2b8c, 1, 0);
                                iVar3 = iVar3 + -1;
                            } while (iVar3 != 0);
                        } else {
                            if ((local_2828 & 0xff) != 3)
                                goto LAB_00027bc8;
                            sVar9 = recv(uVar6, local_2b8c, 1, 0);
                            iVar3 = 0;
                            if (sVar9 == -1) {
                                uVar5 = 0xffffffff;
                            } else {
                                uVar5 = local_2828 & 0xff;
                            }
                            while (iVar3 < (int)uVar5) {
                                recv(uVar6, local_2b8c, 1, 0);
                                iVar3 = iVar3 + 1;
                            }
                        }
                        recv(uVar6, local_2b8c, 1, 0);
                        recv(uVar6, local_2b8c, 1, 0);
                        if ((DAT_00068bd5 != 0) && (((DAT_00074500 != '\0' ||
                                                      (DAT_00068bd4 != '\0')) ||
                                                     (6 < DAT_00067db4)))) {
                            snprintf(
                                (char *)local_2b8c, 0x800,
                                "Success negotiating with %s:%s SOCKS5 proxy",
                                param_1[0x97], param_1[0x98]);
                            FUN_00020f58(7, local_2b8c, 0);
                        }
                        goto LAB_000275c4;
                    }
                }
            LAB_00027bc8:
                if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                    (DAT_00067db4 < 4))
                    goto LAB_00026c58;
                uVar20 = param_1[0x98];
                uVar4 = param_1[0x97];
            }
            snprintf((char *)local_2b8c, 0x800,
                     "Bad response from %s:%s SOCKS5 server", uVar4, uVar20);
            FUN_00020f58(4, local_2b8c, 0);
            goto LAB_00026c58;
        case 4:
            uVar4 = 1;
        LAB_000275a4:
            iVar3 = FUN_00026830(param_1, uVar6, uVar4);
            goto joined_r0x000275b4;
        default:
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (3 < DAT_00067db4)) {
                snprintf((char *)&local_2828, 0x800,
                         "Unsupported proxy type for %s:%s", param_1[0x97],
                         param_1[0x98]);
                FUN_00020f58(4, &local_2828, 0);
                goto LAB_00026c58;
            }
            goto LAB_000274d8;
        }
        iVar3 = FUN_00021f0c(param_1, uVar6, uVar4);
    joined_r0x000275b4:
        if (iVar3 == 0)
            goto LAB_00026c58;
    LAB_000275c4:
        local_2b8c = &local_2828;
        if (param_1[0x94] == 0) {
            uVar4 = FUN_00022a44(0x2000, 1, "util.c", "setup_stratum_socket",
                                 0xc0f);
            param_1[0x94] = uVar4;
            param_1[0x95] = 0x2000;
        }
        param_1[0x93] = uVar6;
        local_2a2c[0].fds_bits[0] = 0x2d;
        local_2828 = 0x1e;
        local_2b50.tv_sec = 1;
        uVar5 = fcntl(uVar6, 3, 0);
        fcntl(uVar6, 4, uVar5 | 0x800);
        setsockopt(uVar6, 1, 9, &local_2b50, 4);
        if (DAT_00074501 == '\0') {
            fcntl(uVar6, 2, 1);
        }
        setsockopt(uVar6, 6, 1, &local_2b50, 4);
        setsockopt(uVar6, 6, 6, &local_2b50, 4);
        setsockopt(uVar6, 6, 4, local_2a2c, 4);
        setsockopt(uVar6, 6, 5, local_2b8c, 4);
        if (bVar1) {
            FUN_000228c8(param_1);
            DAT_0007448c = DAT_0007448c + 1;
            sprintf(acStack_2028, "{\"id\": %d, \"method\": "
                                  "\"mining.subscribe\", \"params\": []}");
        } else {
            DAT_0007448c = DAT_0007448c + 1;
            if (param_1[0x9f] == 0) {
                sprintf(acStack_2028,
                        "{\"id\": %d, \"method\": \"mining.subscribe\", "
                        "\"params\": [\"cgminer/1.0.0\"]}");
            } else {
                sprintf(acStack_2028,
                        "{\"id\": %d, \"method\": \"mining.subscribe\", "
                        "\"params\": [\"cgminer/1.0.0\", \"%s\"]}");
            }
        }
        sVar8 = strlen(acStack_2028);
        iVar3 = FUN_00021ca0(param_1, acStack_2028, sVar8);
        if (iVar3 != 0) {
            if (DAT_00068bd5 == 0)
                goto LAB_0002772c;
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (6 < DAT_00067db4)) {
                local_2828._0_1_ = 'F';
                local_2828._1_1_ = 'a';
                local_2828._2_1_ = 'i';
                local_2828._3_1_ = 'l';
                builtin_strncpy(acStack_2824, "ed to send s", 0xc);
                local_2818._0_1_ = ' ';
                local_2818._1_1_ = 'i';
                local_2818._2_1_ = 'n';
                local_2818._3_1_ = ' ';
                builtin_strncpy(acStack_2814, "init", 4);
                local_2810._0_1_ = 'i';
                local_2810._1_1_ = 'a';
                local_2810._2_1_ = 't';
                local_2810._3_1_ = 'e';
                builtin_strncpy(acStack_280c, "_stratum", 8);
                local_2804 = local_2804 & 0xffffff00;
                FUN_00020f58(7, local_2b8c, 0);
                goto LAB_0002780c;
            }
        LAB_00027774:
            bVar17 = 1;
            goto LAB_00027778;
        }
        iVar3 = FUN_00022428(param_1[0x93], 0x3c);
        if (iVar3 == 0) {
            if (DAT_00068bd5 == 0)
                goto LAB_0002772c;
            if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                (DAT_00067db4 < 7))
                goto LAB_00027774;
            local_2828._0_1_ = 'T';
            local_2828._1_1_ = 'i';
            local_2828._2_1_ = 'm';
            local_2828._3_1_ = 'e';
            builtin_strncpy(acStack_2824, "d out waitin", 0xc);
            local_2818._0_1_ = 'g';
            local_2818._1_1_ = ' ';
            local_2818._2_1_ = 'f';
            local_2818._3_1_ = 'o';
            builtin_strncpy(acStack_2814, "r re", 4);
            local_2810._0_1_ = 's';
            local_2810._1_1_ = 'p';
            local_2810._2_1_ = 'o';
            local_2810._3_1_ = 'n';
            builtin_strncpy(acStack_280c, "se in in", 8);
            local_2804._0_1_ = 'i';
            local_2804._1_1_ = 't';
            local_2804._2_1_ = 'i';
            local_2804._3_1_ = 'a';
            builtin_strncpy(acStack_2800, "te_s", 4);
            uStack_27fc._0_1_ = 't';
            uStack_27fc._1_1_ = 'r';
            uStack_27fc._2_1_ = 'a';
            uStack_27fc._3_1_ = 't';
            uStack_27f8 = 0x6d75;
            local_27f6 = 0;
            FUN_00020f58(7, local_2b8c, 0);
        LAB_0002780c:
            bVar17 = DAT_00068bd5;
            if (DAT_00068bd5 != 0)
                goto LAB_00027778;
            goto LAB_0002772c;
        }
        __ptr = (void *)FUN_00024858(param_1);
        if (__ptr == (void *)0x0)
            goto LAB_0002780c;
        local_2b74 = FUN_00047258(__ptr, 0, local_2b28);
        free(__ptr);
        if (local_2b74 == 0) {
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (5 < DAT_00067db4)) {
                snprintf((char *)local_2b8c, 0x800,
                         "JSON decode failed(%d): %s", local_2b28[0],
                         auStack_2acc);
                FUN_00020f58(6, local_2b8c, 0);
            }
            goto LAB_00027da4;
        }
        piVar14 = (int *)FUN_000480fc(local_2b74, "result");
        piVar11 = (int *)FUN_000480fc(local_2b74, "error");
        if ((piVar14 != (int *)0x0) && (*piVar14 != 7)) {
            if ((piVar11 != (int *)0x0) && (*piVar11 != 7)) {
            LAB_00027d1c:
                pcVar12 = (char *)FUN_00045074(piVar11, 3);
                goto LAB_00027d28;
            }
            piVar11 = (int *)FUN_00048484(piVar14, 0);
            if (((piVar11 == (int *)0x0) || (*piVar11 != 1)) ||
                (iVar3 = FUN_00048468(), iVar3 < 1)) {
            LAB_00028210:
                pcVar12 = (char *)(uint)DAT_00068bd5;
                if ((pcVar12 != (char *)0x0) &&
                    (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                      (pcVar12 = (char *)0x0, 6 < DAT_00067db4)))) {
                    pcVar12 = (char *)0x0;
                    local_2828._0_1_ = 'F';
                    local_2828._1_1_ = 'a';
                    local_2828._2_1_ = 'i';
                    local_2828._3_1_ = 'l';
                    builtin_strncpy(acStack_2824, "ed to get se", 0xc);
                    local_2818._0_1_ = 's';
                    local_2818._1_1_ = 's';
                    local_2818._2_1_ = 'i';
                    local_2818._3_1_ = 'o';
                    builtin_strncpy(acStack_2814, "nid ", 4);
                    local_2810._0_1_ = 'i';
                    local_2810._1_1_ = 'n';
                    local_2810._2_1_ = ' ';
                    local_2810._3_1_ = 'i';
                    builtin_strncpy(acStack_280c, "nitiate_", 8);
                    local_2804._0_1_ = 's';
                    local_2804._1_1_ = 't';
                    local_2804._2_1_ = 'r';
                    local_2804._3_1_ = 'a';
                    builtin_strncpy(acStack_2800, "tum", 4);
                    FUN_00020f58(7, local_2b8c, 0);
                }
            } else {
                local_2b6c = 0;
                while (true) {
                    piVar13 = (int *)FUN_00048484(piVar11, local_2b6c);
                    if ((piVar13 == (int *)0x0) || (*piVar13 != 1))
                        goto LAB_00028210;
                    pcVar12 = (char *)FUN_000224bc(piVar13, 0);
                    if ((pcVar12 != (char *)0x0) &&
                        (iVar7 = strncasecmp(pcVar12, "mining.notify", 0xd),
                         iVar7 == 0))
                        break;
                    local_2b6c = local_2b6c + 1;
                    if (iVar3 == local_2b6c)
                        goto LAB_00028210;
                }
                pcVar12 = (char *)FUN_00022520(piVar13, 1);
                if (pcVar12 == (char *)0x0)
                    goto LAB_00028210;
            }
            __s = (char *)FUN_00022520(piVar14, 1);
            uVar6 = FUN_000225a0(__s, "initiate_stratum", 0xc90);
            if (uVar6 == 0) {
                if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                    (5 < DAT_00067db4)) {
                    local_2828._0_1_ = 'F';
                    local_2828._1_1_ = 'a';
                    local_2828._2_1_ = 'i';
                    local_2828._3_1_ = 'l';
                    builtin_strncpy(acStack_2824, "ed to get va", 0xc);
                    local_2818._0_1_ = 'l';
                    local_2818._1_1_ = 'i';
                    local_2818._2_1_ = 'd';
                    local_2818._3_1_ = ' ';
                    builtin_strncpy(acStack_2814, "nonc", 4);
                    local_2810._0_1_ = 'e';
                    local_2810._1_1_ = '1';
                    local_2810._2_1_ = ' ';
                    local_2810._3_1_ = 'i';
                    builtin_strncpy(acStack_280c, "n initia", 8);
                    local_2804._0_1_ = 't';
                    local_2804._1_1_ = 'e';
                    local_2804._2_1_ = '_';
                    local_2804._3_1_ = 's';
                    builtin_strncpy(acStack_2800, "trat", 4);
                    uStack_27fc._0_3_ = 0x6d75;
                    FUN_00020f58(6, local_2b8c, 0);
                }
                free(pcVar12);
                goto LAB_00027da4;
            }
            FUN_00048484(piVar14, 2);
            iVar3 = FUN_0004888c();
            if (0xe < iVar3 - 2U) {
                if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                    (5 < DAT_00067db4)) {
                    local_2828._0_1_ = 'F';
                    local_2828._1_1_ = 'a';
                    local_2828._2_1_ = 'i';
                    local_2828._3_1_ = 'l';
                    builtin_strncpy(acStack_2824, "ed to get va", 0xc);
                    local_2818._0_1_ = 'l';
                    local_2818._1_1_ = 'i';
                    local_2818._2_1_ = 'd';
                    local_2818._3_1_ = ' ';
                    builtin_strncpy(acStack_2814, "n2si", 4);
                    local_2810._0_1_ = 'z';
                    local_2810._1_1_ = 'e';
                    local_2810._2_1_ = ' ';
                    local_2810._3_1_ = 'i';
                    builtin_strncpy(acStack_280c, "n initia", 8);
                    local_2804._0_1_ = 't';
                    local_2804._1_1_ = 'e';
                    local_2804._2_1_ = '_';
                    local_2804._3_1_ = 's';
                    builtin_strncpy(acStack_2800, "trat", 4);
                    uStack_27fc._0_3_ = 0x6d75;
                    FUN_00020f58(6, local_2b8c, 0);
                }
                free(pcVar12);
                free(__s);
                goto LAB_00027da4;
            }
            if ((((pcVar12 != (char *)0x0) &&
                  ((char *)param_1[0x9f] != (char *)0x0)) &&
                 (iVar7 = strcmp(pcVar12, (char *)param_1[0x9f]),
                  iVar7 == 0)) &&
                (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                  (4 < DAT_00067db4)))) {
                snprintf((char *)local_2b8c, 0x800,
                         "Pool %d successfully negotiated resume with the same "
                         "session ID",
                         *param_1);
                FUN_00020f58(5, local_2b8c, 0);
            }
            iVar7 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0x35));
            if (iVar7 != 0) {
                FUN_00022864("initiate_stratum", 0xca4);
            }
            iVar7 = pthread_rwlock_wrlock((pthread_rwlock_t *)(param_1 + 0x3b));
            if (iVar7 != 0) {
                piVar14 = __errno_location();
                snprintf((char *)local_2b8c, 0x800,
                         "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d",
                         *piVar14, "util.c", "initiate_stratum", 0xca4);
                FUN_00020f58(3, local_2b8c, 1);
                FUN_0003eba0(1);
            }
            free((void *)param_1[0x99]);
            free((void *)param_1[0x9f]);
            param_1[0x9f] = pcVar12;
            param_1[0x99] = __s;
            sVar8 = strlen(__s);
            param_1[0x187] = sVar8 >> 1;
            free((void *)param_1[0x9a]);
            uVar4 = FUN_00022a44(param_1[0x187], 1, "util.c",
                                 "initiate_stratum", 0xcab);
            param_1[0x9a] = uVar4;
            FUN_00022cd8(uVar4, param_1[0x99], param_1[0x187]);
            param_1[0x9e] = iVar3;
            iVar3 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x3b));
            if (iVar3 != 0) {
                piVar14 = __errno_location();
                snprintf((char *)local_2b8c, 0x800,
                         "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d",
                         *piVar14, "util.c", "initiate_stratum", 0xcae);
                FUN_00020f58(3, local_2b8c, 1);
                FUN_0003eba0(1);
            }
            iVar3 = pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0x35));
            if (iVar3 != 0) {
                piVar14 = __errno_location();
                snprintf((char *)local_2b8c, 0x800,
                         "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d",
                         *piVar14, "util.c", "initiate_stratum", 0xcae);
                FUN_00020f58(3, local_2b8c, 1);
                FUN_0003eba0(1);
            }
            (*DAT_00067ed8)();
            if (((pcVar12 != (char *)0x0) && (DAT_00068bd5 != 0)) &&
                ((DAT_00074500 != '\0' ||
                  ((DAT_00068bd4 != '\0' || (6 < DAT_00067db4)))))) {
                snprintf((char *)local_2b8c, 0x800,
                         "Pool %d stratum session id: %s", *param_1,
                         param_1[0x9f]);
                FUN_00020f58(7, local_2b8c, 0);
            }
            *(undefined1 *)((int)param_1 + 0x281) = 1;
            if (param_1[0x90] == 0) {
                param_1[0x90] = param_1[0x96];
            }
            uVar5 = (uint)DAT_00073398;
            param_1[0x1c6] = 0;
            param_1[0x1c7] = 0;
            param_1[0x1c8] = 0;
            param_1[0x1c9] = 0x3ff00000;
            if (((uVar5 != 0) &&
                 (uVar15 = (uint)DAT_00068bd5, uVar6 = uVar5, uVar15 != 0)) &&
                ((uVar6 = uVar15,
                  DAT_00074500 != '\0' ||
                      ((DAT_00068bd4 != '\0' || (6 < DAT_00067db4)))))) {
                snprintf((char *)local_2b8c, 0x800,
                         "Pool %d confirmed mining.subscribe with extranonce1 "
                         "%s extran2size %d",
                         *param_1, param_1[0x99], param_1[0x9e]);
                FUN_00020f58(7, local_2b8c, 0);
            }
            goto LAB_00026fe4;
        }
        if (piVar11 != (int *)0x0)
            goto LAB_00027d1c;
        pcVar12 = (char *)malloc(0x11);
        if (pcVar12 != (char *)0x0) {
            builtin_strncpy(pcVar12, "(unknown reason)", 0x11);
        }
    LAB_00027d28:
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (5 < DAT_00067db4)) {
            snprintf((char *)local_2b8c, 0x800, "JSON-RPC decode failed: %s",
                     pcVar12);
            FUN_00020f58(6, local_2b8c, 0);
        }
        free(pcVar12);
    LAB_00027da4:
        bVar1 = (bool)(bVar1 ^ 1);
        if (!bVar1)
            goto LAB_0002780c;
        iVar3 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0x35));
        if (iVar3 != 0) {
            piVar14 = __errno_location();
            snprintf((char *)local_2b8c, 0x800,
                     "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d",
                     *piVar14, "util.c", "initiate_stratum", 0xcca);
            FUN_00020f58(3, local_2b8c, 1);
            FUN_0003eba0(1);
        }
        iVar3 = pthread_rwlock_wrlock((pthread_rwlock_t *)(param_1 + 0x3b));
        if (iVar3 != 0) {
            piVar14 = __errno_location();
            snprintf((char *)local_2b8c, 0x800,
                     "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d",
                     *piVar14, "util.c", "initiate_stratum", 0xcca);
            FUN_00020f58(3, local_2b8c, 1);
            FUN_0003eba0(1);
        }
        free((void *)param_1[0x9f]);
        free((void *)param_1[0x99]);
        param_1[0x99] = 0;
        param_1[0x9f] = 0;
        iVar3 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x3b));
        if (iVar3 != 0) {
            piVar14 = __errno_location();
            snprintf((char *)local_2b8c, 0x800,
                     "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d",
                     *piVar14, "util.c", "initiate_stratum", 0xcce);
            FUN_00020f58(3, local_2b8c, 1);
            FUN_0003eba0(1);
        }
        iVar3 = pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0x35));
        if (iVar3 != 0) {
            piVar14 = __errno_location();
            snprintf((char *)local_2b8c, 0x800,
                     "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d",
                     *piVar14, "util.c", "initiate_stratum", 0xcce);
            FUN_00020f58(3, local_2b8c, 1);
            FUN_0003eba0(1);
        }
        (*DAT_00067ed8)();
        if ((DAT_00068bd5 != 0) &&
            (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
              (6 < DAT_00067db4)))) {
            local_2828._0_1_ = 'F';
            local_2828._1_1_ = 'a';
            local_2828._2_1_ = 'i';
            local_2828._3_1_ = 'l';
            builtin_strncpy(acStack_2824, "ed to resume", 0xc);
            local_2818._0_1_ = ' ';
            local_2818._1_1_ = 's';
            local_2818._2_1_ = 't';
            local_2818._3_1_ = 'r';
            builtin_strncpy(acStack_2814, "atum", 4);
            local_2810._0_1_ = ',';
            local_2810._1_1_ = ' ';
            local_2810._2_1_ = 't';
            local_2810._3_1_ = 'r';
            builtin_strncpy(acStack_280c, "ying afr", 8);
            local_2804._0_1_ = 'e';
            local_2804._1_1_ = 's';
            local_2804._2_1_ = 'h';
            local_2804._3_1_ = '\0';
            FUN_00020f58(7, local_2b8c, 0);
        }
        if ((local_2b74 != 0) && (*(int *)(local_2b74 + 4) != -1)) {
            piVar14 = (int *)(local_2b74 + 4);
            DataMemoryBarrier(0xb);
            do {
                iVar3 = *piVar14;
                bVar2 = (bool)hasExclusiveAccess(piVar14);
            } while (!bVar2);
            *piVar14 = iVar3 + -1;
            if (iVar3 + -1 == 0) {
                FUN_00048a34(local_2b74);
            }
        }
    } while (true);
}

int FUN_00028690(int param_1)

{
    int iVar1;

    if (*(char *)(param_1 + 0x281) != '\0') {
        FUN_00024340();
    }
    iVar1 = FUN_00026aec(param_1);
    if ((iVar1 != 0) && (((*(char *)(param_1 + 0x244) == '\0' ||
                           (iVar1 = FUN_000296d0(param_1), iVar1 != 0)) &&
                          (iVar1 = FUN_00029ac8(param_1), iVar1 != 0)))) {
        FUN_00032400(param_1);
        return iVar1;
    }
    FUN_0003466c(param_1);
    return 0;
}

undefined4 FUN_0002870c(undefined4 *param_1, undefined4 param_2)

{
    char *__s;
    char *pcVar1;
    char *__s2;
    int iVar2;
    void *pvVar3;
    int *piVar4;
    undefined4 uVar5;
    char *pcVar6;
    int *piVar7;
    undefined1 local_a40[16];
    char acStack_a30[248];
    undefined1 auStack_938[16];
    undefined4 local_928;
    undefined4 local_924;
    char acStack_920[256];
    char acStack_820[2052];

    memset(acStack_920, 0, 0xff);
    FUN_00048484(param_2, 0);
    __s = (char *)FUN_00048630();
    if (__s == (char *)0x0) {
        __s = (char *)param_1[0x96];
    LAB_00028790:
        FUN_00048484(param_2, 1);
        iVar2 = FUN_0004888c();
        if (iVar2 == 0) {
            FUN_00048484(param_2, 1);
            pcVar6 = (char *)FUN_00048630();
            piVar7 = (int *)auStack_938;
            if (pcVar6 == (char *)0x0) {
                pcVar6 = (char *)param_1[0x92];
                piVar7 = (int *)auStack_938;
            }
        } else {
            pcVar6 = acStack_a30;
            sprintf(pcVar6, "%d");
            piVar7 = (int *)local_a40;
        }
        *piVar7 = (int)pcVar6;
        snprintf(acStack_920, 0xfe, "%s:%s", __s);
        iVar2 = FUN_00023cd8(acStack_920, &local_928, &local_924);
        if (iVar2 != 0) {
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (3 < DAT_00067db4)) {
                uVar5 = *param_1;
                *piVar7 = (int)acStack_920;
                snprintf(acStack_820, 0x800,
                         "Stratum reconnect requested from pool %d to %s",
                         uVar5);
                FUN_00020f58(4, acStack_820, 0);
            }
            FUN_00033ab4(param_1);
            iVar2 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xb0));
            if (iVar2 != 0) {
                piVar4 = __errno_location();
                iVar2 = *piVar4;
                *piVar7 = (int)"util.c";
                piVar7[1] = (int)"parse_reconnect";
                piVar7[2] = 0x942;
                snprintf(acStack_820, 0x800,
                         "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d",
                         iVar2);
                FUN_00020f58(3, acStack_820, 1);
                FUN_0003eba0(1);
            }
            FUN_000223c0(param_1);
            pvVar3 = (void *)param_1[0x96];
            param_1[0x90] = local_928;
            param_1[0x96] = local_928;
            free(pvVar3);
            pvVar3 = (void *)param_1[0x92];
            param_1[0x92] = local_924;
            free(pvVar3);
            iVar2 = pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0xb0));
            if (iVar2 != 0) {
                piVar4 = __errno_location();
                iVar2 = *piVar4;
                *piVar7 = (int)"util.c";
                piVar7[1] = (int)"parse_reconnect";
                piVar7[2] = 0x94b;
                snprintf(acStack_820, 0x800,
                         "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d",
                         iVar2);
                FUN_00020f58(3, acStack_820, 1);
                FUN_0003eba0(1);
            }
            (*DAT_00067ed8)();
            uVar5 = FUN_00028690(param_1);
            return uVar5;
        }
    } else {
        pcVar6 = (char *)param_1[0x96];
        pcVar1 = strchr(pcVar6, 0x2e);
        if (pcVar1 == (char *)0x0) {
            if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                (DAT_00067db4 < 3)) {
                return 0;
            }
            pcVar1 = "Denied stratum reconnect request for pool without domain "
                     "\'%s\'";
        } else {
            __s2 = strchr(__s, 0x2e);
            if (__s2 == (char *)0x0) {
                if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                    (DAT_00067db4 < 3)) {
                    return 0;
                }
                pcVar1 = "Denied stratum reconnect request to url without "
                         "domain \'%s\'";
                pcVar6 = __s;
            } else {
                iVar2 = strcmp(pcVar1, __s2);
                if (iVar2 == 0)
                    goto LAB_00028790;
                if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                    (DAT_00067db4 < 3)) {
                    return 0;
                }
                pcVar1 = "Denied stratum reconnect request to non-matching "
                         "domain url \'%s\'";
            }
        }
        snprintf(acStack_820, 0x800, pcVar1, pcVar6);
        FUN_00020f58(3, acStack_820, 0);
    }
    return 0;
}

uint FUN_00028ae0(undefined4 *param_1, undefined4 param_2)

{
    bool bVar1;
    int iVar2;
    int iVar3;
    int *piVar4;
    int *piVar5;
    char *__s1;
    uint uVar6;
    undefined4 uVar7;
    void *__ptr;
    size_t sVar8;
    int iVar9;
    char *pcVar10;
    uint uVar11;
    undefined4 *puVar12;
    double dVar13;
    double dVar14;
    undefined8 in_stack_ffffdeb0;
    undefined8 uVar15;
    undefined4 local_2134[23];
    undefined1 auStack_20d8[160];
    char local_2038[24];
    undefined4 uStack_2020;
    char acStack_201c[16];
    undefined2 uStack_200c;
    undefined1 local_200a;
    undefined4 extraout_s1;

    pcVar10 = (char *)((ulonglong)in_stack_ffffdeb0 >> 0x20);
    iVar2 = FUN_00047258(param_2, 0, local_2134);
    if (iVar2 == 0) {
        if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
            (DAT_00067db4 < 6)) {
            return 0;
        }
        snprintf(local_2038, 0x800, "JSON decode failed(%d): %s", local_2134[0],
                 auStack_20d8);
        FUN_00020f58(6, local_2038, 0);
        return 0;
    }
    iVar3 = FUN_000480fc(iVar2, "method");
    if (iVar3 != 0) {
        piVar4 = (int *)FUN_000480fc(iVar2, "error");
        piVar5 = (int *)FUN_000480fc(iVar2, "params");
        if ((piVar4 != (int *)0x0) && (*piVar4 != 7)) {
            __ptr = (void *)FUN_00045074(piVar4, 3);
            if ((DAT_00074500 != '\0') ||
                ((DAT_00068bd4 != '\0' || (5 < DAT_00067db4)))) {
                snprintf(local_2038, 0x800, "JSON-RPC method decode failed: %s",
                         __ptr);
                FUN_00020f58(6, local_2038, 0);
            }
            uVar11 = 0;
            free(__ptr);
            goto LAB_00028c34;
        }
        __s1 = (char *)FUN_00048630(iVar3);
        if (__s1 != (char *)0x0) {
            iVar3 = strncasecmp(__s1, "mining.multi_version", 0x14);
            if (iVar3 == 0) {
                *(undefined1 *)(param_1 + 0xa1) = 1;
                if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                    (5 < DAT_00067db4)) {
                    builtin_strncpy(local_2038, "Pool support multi versi",
                                    0x18);
                    uStack_2020._0_3_ = 0x6e6f;
                    FUN_00020f58(6, local_2038, 0);
                }
                uVar11 = 0;
                puVar12 = param_1 + 0xa3;
                while (true) {
                    uVar6 = FUN_00048468(piVar5);
                    if (uVar6 <= uVar11)
                        break;
                    FUN_00048484(piVar5, uVar11);
                    uVar7 = FUN_0004888c();
                    *puVar12 = uVar7;
                    uVar11 = uVar11 + 1;
                    puVar12 = puVar12 + 1;
                }
                goto LAB_00028f4c;
            }
            iVar3 = strncasecmp(__s1, "mining.notify", 0xd);
            if (iVar3 == 0) {
                uVar11 = FUN_0002582c(param_1, piVar5);
                if (uVar11 != 0) {
                    *(undefined1 *)((int)param_1 + 0x283) = 1;
                    goto LAB_00028c34;
                }
            } else {
                iVar3 = strncasecmp(__s1, "mining.set_version_mask", 0x17);
                if (iVar3 != 0) {
                    iVar3 = strncasecmp(__s1, "mining.set_difficulty", 0x15);
                    if (iVar3 == 0) {
                        FUN_00048484(piVar5);
                        uVar7 = FUN_000489c8();
                        dVar13 = (double)CONCAT44(extraout_s1, uVar7);
                        if (dVar13 != 0.0) {
                            iVar3 = pthread_mutex_lock(
                                (pthread_mutex_t *)(param_1 + 0x35));
                            if (iVar3 != 0) {
                                FUN_00022864("parse_diff", 0x8bb);
                            }
                            iVar3 = pthread_rwlock_wrlock(
                                (pthread_rwlock_t *)(param_1 + 0x3b));
                            if (iVar3 != 0) {
                                piVar4 = __errno_location();
                                pcVar10 = "parse_diff";
                                snprintf(local_2038, 0x800,
                                         "WTF WRLOCK ERROR ON LOCK! errno=%d "
                                         "in %s %s():%d",
                                         *piVar4, "util.c", "parse_diff",
                                         0x8bb);
                                FUN_00020f58(3, local_2038, 1);
                                FUN_0003eba0(1);
                            }
                            dVar14 = *(double *)(param_1 + 0x1c6);
                            *(double *)(param_1 + 0x1c6) = dVar13;
                            if (dVar14 <= 0.0) {
                                dVar14 = *(double *)(param_1 + 0x1c8);
                                *(double *)(param_1 + 0x1c8) = dVar13;
                            }
                            iVar3 = pthread_rwlock_unlock(
                                (pthread_rwlock_t *)(param_1 + 0x3b));
                            if (iVar3 != 0) {
                                piVar4 = __errno_location();
                                pcVar10 = "parse_diff";
                                snprintf(local_2038, 0x800,
                                         "WTF RWLOCK ERROR ON UNLOCK! errno=%d "
                                         "in %s %s():%d",
                                         *piVar4, "util.c", "parse_diff",
                                         0x8c8);
                                FUN_00020f58(3, local_2038, 1);
                                FUN_0003eba0(1);
                            }
                            iVar3 = pthread_mutex_unlock(
                                (pthread_mutex_t *)(param_1 + 0x35));
                            if (iVar3 != 0) {
                                piVar4 = __errno_location();
                                pcVar10 = "parse_diff";
                                snprintf(local_2038, 0x800,
                                         "WTF MUTEX ERROR ON UNLOCK! errno=%d "
                                         "in %s %s():%d",
                                         *piVar4, "util.c", "parse_diff",
                                         0x8c8);
                                FUN_00020f58(3, local_2038, 1);
                                FUN_0003eba0(1);
                            }
                            (*DAT_00067ed8)();
                            if (dVar13 == dVar14) {
                                uVar11 = (uint)DAT_00068bd5;
                                if ((uVar11 != 0) &&
                                    (((DAT_00074500 != '\0' ||
                                       (DAT_00068bd4 != '\0')) ||
                                      (6 < DAT_00067db4)))) {
                                    snprintf(local_2038, 0x800,
                                             "Pool %d difficulty set to %f",
                                             *param_1, dVar13);
                                    FUN_00020f58(7, local_2038, 0);
                                    goto LAB_00028c34;
                                }
                            } else if (dVar13 ==
                                       (double)(longlong)(int)(longlong)
                                           dVar13) {
                                if (((DAT_00074500 != '\0') ||
                                     (DAT_00068bd4 != '\0')) ||
                                    (4 < DAT_00067db4)) {
                                    uVar15 = CONCAT44(pcVar10,
                                                      (int)(longlong)dVar13);
                                    uVar7 = *param_1;
                                    pcVar10 =
                                        "Pool %d difficulty changed to %d";
                                LAB_00029074:
                                    uVar11 = 1;
                                    snprintf(local_2038, 0x800, pcVar10, uVar7,
                                             uVar15);
                                    FUN_00020f58(5, local_2038, 0);
                                    goto LAB_00028c34;
                                }
                            } else if (((DAT_00074500 != '\0') ||
                                        (DAT_00068bd4 != '\0')) ||
                                       (4 < DAT_00067db4)) {
                                snprintf(local_2038, 0x800,
                                         "Pool %d difficulty changed to %.1f",
                                         *param_1, dVar13);
                                uVar11 = 1;
                                FUN_00020f58(5, local_2038, 0);
                                goto LAB_00028c34;
                            }
                        LAB_00028f4c:
                            uVar11 = 1;
                            goto LAB_00028c34;
                        }
                    } else {
                        iVar3 =
                            strncasecmp(__s1, "mining.set_extranonce", 0x15);
                        if (iVar3 == 0) {
                            pcVar10 = (char *)FUN_00022520(piVar5);
                            uVar11 = FUN_000225a0(pcVar10, "parse_extranonce",
                                                  0x8e6);
                            if (uVar11 != 0) {
                                FUN_00048484(piVar5, 1);
                                iVar3 = FUN_0004888c();
                                if (iVar3 == 0) {
                                    if (((DAT_00074500 != '\0') ||
                                         (DAT_00068bd4 != '\0')) ||
                                        (5 < DAT_00067db4)) {
                                        builtin_strncpy(
                                            local_2038,
                                            "Failed to get valid n2si", 0x18);
                                        uStack_2020._0_1_ = 'z';
                                        uStack_2020._1_1_ = 'e';
                                        uStack_2020._2_1_ = ' ';
                                        uStack_2020._3_1_ = 'i';
                                        builtin_strncpy(acStack_201c,
                                                        "n parse_extranon",
                                                        0x10);
                                        uStack_200c = 0x6563;
                                        local_200a = 0;
                                        FUN_00020f58(6, local_2038, 0);
                                    }
                                    uVar11 = 0;
                                    free(pcVar10);
                                    goto LAB_00028c34;
                                }
                                iVar9 = pthread_mutex_lock(
                                    (pthread_mutex_t *)(param_1 + 0x35));
                                if (iVar9 != 0) {
                                    FUN_00022864("parse_extranonce", 0x8f2);
                                }
                                iVar9 = pthread_rwlock_wrlock(
                                    (pthread_rwlock_t *)(param_1 + 0x3b));
                                if (iVar9 != 0) {
                                    piVar4 = __errno_location();
                                    snprintf(local_2038, 0x800,
                                             "WTF WRLOCK ERROR ON LOCK! "
                                             "errno=%d in %s %s():%d",
                                             *piVar4, "util.c",
                                             "parse_extranonce", 0x8f2);
                                    FUN_00020f58(3, local_2038, 1);
                                    FUN_0003eba0(1);
                                }
                                free((void *)param_1[0x99]);
                                param_1[0x99] = pcVar10;
                                sVar8 = strlen(pcVar10);
                                param_1[0x187] = sVar8 >> 1;
                                free((void *)param_1[0x9a]);
                                iVar9 =
                                    FUN_00022a44(param_1[0x187], 1, "util.c",
                                                 "parse_extranonce", 0x8f7);
                                param_1[0x9a] = iVar9;
                                if (iVar9 == 0) {
                                    snprintf(local_2038, 0x800,
                                             "Failed to calloc pool->nonce1bin "
                                             "in %s %s():%d",
                                             "util.c", "parse_extranonce",
                                             0x8f9);
                                    FUN_00020f58(3, local_2038, 1);
                                    FUN_0003eba0(1);
                                }
                                FUN_00022cd8(param_1[0x9a], param_1[0x99],
                                             param_1[0x187]);
                                param_1[0x9e] = iVar3;
                                iVar3 = pthread_rwlock_unlock(
                                    (pthread_rwlock_t *)(param_1 + 0x3b));
                                if (iVar3 != 0) {
                                    piVar4 = __errno_location();
                                    snprintf(local_2038, 0x800,
                                             "WTF RWLOCK ERROR ON UNLOCK! "
                                             "errno=%d in %s %s():%d",
                                             *piVar4, "util.c",
                                             "parse_extranonce", 0x8fc);
                                    FUN_00020f58(3, local_2038, 1);
                                    FUN_0003eba0(1);
                                }
                                FUN_000227e8(
                                    (pthread_mutex_t *)(param_1 + 0x35),
                                    "parse_extranonce", 0x8fc);
                                (*DAT_00067ed8)();
                                if (((DAT_00074500 != '\0') ||
                                     (DAT_00068bd4 != '\0')) ||
                                    (4 < DAT_00067db4)) {
                                    snprintf(
                                        local_2038, 0x800,
                                        "Pool %d extranonce change requested",
                                        *param_1);
                                    FUN_00020f58(5, local_2038, 0);
                                    goto LAB_00028c34;
                                }
                                goto LAB_00028f4c;
                            }
                            if (((DAT_00074500 != '\0') ||
                                 (DAT_00068bd4 != '\0')) ||
                                (5 < DAT_00067db4)) {
                                builtin_strncpy(local_2038,
                                                "Failed to get valid nonc",
                                                0x18);
                                uStack_2020._0_1_ = 'e';
                                uStack_2020._1_1_ = '1';
                                uStack_2020._2_1_ = ' ';
                                uStack_2020._3_1_ = 'i';
                                builtin_strncpy(acStack_201c,
                                                "n parse_extranon", 0x10);
                                uStack_200c = 0x6563;
                                local_200a = 0;
                                FUN_00020f58(6, local_2038, 0);
                                goto LAB_00028c34;
                            }
                        } else {
                            iVar3 = strncasecmp(__s1, "client.reconnect", 0x10);
                            if (iVar3 == 0) {
                                uVar11 = FUN_0002870c(param_1, piVar5);
                                goto LAB_00028c34;
                            }
                            iVar3 =
                                strncasecmp(__s1, "client.get_version", 0x12);
                            if (iVar3 == 0) {
                                iVar3 = FUN_000480fc(iVar2, &DAT_0004e5a4);
                                if (iVar3 != 0) {
                                    FUN_000480fc(iVar2, &DAT_0004e5a4);
                                    uVar7 = FUN_0004888c();
                                    pcVar10 =
                                        "{\"id\": %d, \"result\": "
                                        "\"cgminer/1.0.0\", \"error\": null}";
                                LAB_00028ee8:
                                    sprintf(local_2038, pcVar10, uVar7);
                                    sVar8 = strlen(local_2038);
                                    uVar11 = FUN_000244a4(param_1, local_2038,
                                                          sVar8);
                                    goto LAB_00028c34;
                                }
                            } else {
                                iVar3 = strncasecmp(__s1, "client.show_message",
                                                    0x13);
                                if (iVar3 == 0) {
                                    if ((piVar5 != (int *)0x0) &&
                                        (*piVar5 == 1)) {
                                        FUN_00048484(piVar5, 0);
                                        iVar3 = FUN_00048630();
                                        if (iVar3 != 0) {
                                            if (((DAT_00074500 != '\0') ||
                                                 (DAT_00068bd4 != '\0')) ||
                                                (4 < DAT_00067db4)) {
                                                uVar15 =
                                                    CONCAT44(pcVar10, iVar3);
                                                pcVar10 = "Pool %d message: %s";
                                                uVar7 = *param_1;
                                                goto LAB_00029074;
                                            }
                                            goto LAB_00028f4c;
                                        }
                                    }
                                } else {
                                    iVar3 =
                                        strncasecmp(__s1, "mining.ping", 0xb);
                                    if (iVar3 == 0) {
                                        if (((DAT_00074500 != '\0') ||
                                             (DAT_00068bd4 != '\0')) ||
                                            (5 < DAT_00067db4)) {
                                            snprintf(local_2038, 0x800,
                                                     "Pool %d ping", *param_1);
                                            FUN_00020f58(6, local_2038, 0);
                                        }
                                        iVar3 =
                                            FUN_000480fc(iVar2, &DAT_0004e5a4);
                                        if (iVar3 == 0) {
                                            uVar11 = 0;
                                            goto LAB_00028c34;
                                        }
                                        FUN_000480fc(iVar2, &DAT_0004e5a4);
                                        uVar7 = FUN_0004888c();
                                        pcVar10 = "{\"id\": %d, \"result\": "
                                                  "\"pong\", \"error\": null}";
                                        goto LAB_00028ee8;
                                    }
                                }
                            }
                        }
                    }
                    goto LAB_00028c30;
                }
                uVar11 = 1;
                FUN_00048484(piVar5);
                uVar7 = FUN_00048630();
                FUN_00022e7c(param_1, uVar7);
            }
            *(char *)((int)param_1 + 0x283) = (char)uVar11;
            goto LAB_00028c34;
        }
    }
LAB_00028c30:
    uVar11 = 0;
LAB_00028c34:
    if (*(int *)(iVar2 + 4) != -1) {
        piVar4 = (int *)(iVar2 + 4);
        DataMemoryBarrier(0xb);
        do {
            iVar3 = *piVar4;
            bVar1 = (bool)hasExclusiveAccess(piVar4);
        } while (!bVar1);
        *piVar4 = iVar3 + -1;
        if (iVar3 + -1 == 0) {
            FUN_00048a34(iVar2);
        }
    }
    return uVar11;
}

undefined4 FUN_000296bc(undefined4 param_1, int param_2)

{
    undefined4 uVar1;

    if (param_2 != 0) {
        uVar1 = FUN_00028ae0();
        return uVar1;
    }
    return 0;
}

uint FUN_000296d0(undefined4 *param_1)

{
    bool bVar1;
    size_t sVar2;
    uint uVar3;
    void *__ptr;
    int iVar4;
    uint uVar5;
    int *piVar6;
    int *piVar7;
    char *pcVar8;
    int iVar9;
    undefined1 auStack_2914[252];
    char local_2818[2048];
    char acStack_2018[8192];

    DAT_0007448c = DAT_0007448c + 1;
    sprintf(acStack_2018, "{\"id\": %d, \"method\": "
                          "\"mining.extranonce.subscribe\", \"params\": []}");
    sVar2 = strlen(acStack_2018);
    uVar3 = FUN_000244a4(param_1, acStack_2018, sVar2);
    if (uVar3 != 0) {
        while (uVar5 = FUN_00022428(param_1[0x93], 2), uVar5 != 0) {
            __ptr = (void *)FUN_00024858(param_1);
            if (__ptr == (void *)0x0) {
                return 0;
            }
            iVar4 = FUN_00028ae0(param_1, __ptr);
            if (iVar4 == 0) {
                iVar4 = FUN_00047258(__ptr, 0, auStack_2914);
                free(__ptr);
                piVar6 = (int *)FUN_000480fc(iVar4, "result");
                piVar7 = (int *)FUN_000480fc(iVar4, "error");
                if ((piVar6 == (int *)0x0) || (*piVar6 == 6)) {
                    if (piVar7 != (int *)0x0)
                        goto LAB_00029890;
                    pcVar8 = (char *)malloc(0x11);
                    if (pcVar8 != (char *)0x0) {
                        builtin_strncpy(pcVar8, "(unknown reason)", 0x11);
                    }
                } else {
                    if ((piVar7 == (int *)0x0) || (*piVar7 == 7)) {
                        if ((DAT_00074500 != '\0') ||
                            ((DAT_00068bd4 != '\0' || (5 < DAT_00067db4)))) {
                            snprintf(local_2818, 0x800,
                                     "Stratum extranonce subscribe for pool %d",
                                     *param_1);
                            FUN_00020f58(6, local_2818, 0);
                        }
                        goto LAB_000299d4;
                    }
                LAB_00029890:
                    pcVar8 = (char *)FUN_000224bc(piVar7, 1);
                    if (((pcVar8 != (char *)0x0) ||
                         (pcVar8 = (char *)FUN_00048630(piVar7),
                          pcVar8 != (char *)0x0)) &&
                        ((iVar9 = strcmp(pcVar8,
                                         "Method \'subscribe\' not found for "
                                         "service \'mining.extranonce\'"),
                          iVar9 == 0 ||
                              (iVar9 = strcmp(pcVar8,
                                              "Unrecognized request provided"),
                               iVar9 == 0)))) {
                        if (((DAT_00074500 != '\0') ||
                             (DAT_00068bd4 != '\0')) ||
                            (5 < DAT_00067db4)) {
                            snprintf(local_2818, 0x800,
                                     "Cannot subscribe to mining.extranonce "
                                     "for pool %d",
                                     *param_1);
                            FUN_00020f58(6, local_2818, 0);
                        }
                        goto LAB_000299d4;
                    }
                    pcVar8 = (char *)FUN_00045074(piVar7, 3);
                }
                if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                    (5 < DAT_00067db4)) {
                    snprintf(local_2818, 0x800,
                             "Pool %d JSON extranonce subscribe failed: %s",
                             *param_1, pcVar8);
                    FUN_00020f58(6, local_2818, 0);
                }
                uVar5 = 0;
                free(pcVar8);
            LAB_000299d4:
                if (iVar4 == 0) {
                    return uVar5;
                }
                if (*(int *)(iVar4 + 4) == -1) {
                    return uVar5;
                }
                piVar6 = (int *)(iVar4 + 4);
                DataMemoryBarrier(0xb);
                do {
                    iVar9 = *piVar6;
                    bVar1 = (bool)hasExclusiveAccess(piVar6);
                } while (!bVar1);
                *piVar6 = iVar9 + -1;
                if (iVar9 + -1 != 0) {
                    return uVar5;
                }
                FUN_00048a34(iVar4);
                return uVar5;
            }
            free(__ptr);
        }
        uVar5 = (uint)DAT_00068bd5;
        if ((uVar5 != 0) &&
            (((uVar3 = uVar5, DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
              (6 < DAT_00067db4)))) {
            builtin_strncpy(
                local_2818,
                "Timed out waiting for response extranonce.subscribe", 0x34);
            FUN_00020f58(7, local_2818, 0);
        }
    }
    return uVar3;
}

uint FUN_00029ac8(undefined4 *param_1)

{
    bool bVar1;
    size_t sVar2;
    uint uVar3;
    int iVar4;
    void *__ptr;
    int *piVar5;
    int *piVar6;
    char *__ptr_00;
    int iVar7;
    uint uVar8;
    undefined1 auStack_291c[252];
    char local_2820[2048];
    char acStack_2020[8196];

    iVar4 = DAT_0007448c;
    DAT_0007448c = DAT_0007448c + 1;
    sprintf(acStack_2020,
            "{\"id\": %d, \"method\": \"mining.authorize\", \"params\": "
            "[\"%s\", \"%s\"]}",
            iVar4, param_1[0x2b], param_1[0x2c]);
    sVar2 = strlen(acStack_2020);
    uVar3 = FUN_000244a4(param_1, acStack_2020, sVar2);
    if (uVar3 != 0) {
        while (__ptr = (void *)FUN_00024858(param_1), __ptr != (void *)0x0) {
            iVar4 = FUN_00028ae0(param_1, __ptr);
            if (iVar4 == 0) {
                iVar4 = FUN_00047258(__ptr, 0, auStack_291c);
                free(__ptr);
                piVar5 = (int *)FUN_000480fc(iVar4, "result");
                piVar6 = (int *)FUN_000480fc(iVar4, "error");
                if ((piVar5 == (int *)0x0) || (*piVar5 == 6)) {
                    if (piVar6 != (int *)0x0)
                        goto LAB_00029bdc;
                    __ptr_00 = (char *)malloc(0x11);
                    if (__ptr_00 != (char *)0x0) {
                        builtin_strncpy(__ptr_00, "(unknown reason)", 0x11);
                    }
                } else {
                    if ((piVar6 == (int *)0x0) || (*piVar6 == 7)) {
                        if (((DAT_00074500 != '\0') ||
                             (DAT_00068bd4 != '\0')) ||
                            (5 < DAT_00067db4)) {
                            snprintf(
                                local_2820, 0x800,
                                "Stratum authorisation success for pool %d",
                                *param_1);
                            FUN_00020f58(6, local_2820, 0);
                        }
                        iVar7 = DAT_00073480;
                        DAT_00068bd6 = 1;
                        *(undefined1 *)((int)param_1 + 99) = 1;
                        if (iVar7 != 0) {
                            DAT_0007448c = DAT_0007448c + 1;
                            sprintf(acStack_2020,
                                    "{\"id\": %d, \"method\": "
                                    "\"mining.suggest_difficulty\", "
                                    "\"params\": [%d]}");
                            sVar2 = strlen(acStack_2020);
                            FUN_000244a4(param_1, acStack_2020, sVar2);
                        }
                        uVar8 = (uint)DAT_00068820;
                        if (uVar8 != 0) {
                            if (((DAT_00074500 != '\0') ||
                                 (DAT_00068bd4 != '\0')) ||
                                (4 < DAT_00067db4)) {
                                builtin_strncpy(local_2820, "LOW POWER MODE!",
                                                0x10);
                                FUN_00020f58(5, local_2820, 0);
                            }
                            iVar7 = DAT_0007448c;
                            DAT_0007448c = DAT_0007448c + 1;
                            sprintf(
                                acStack_2020,
                                "{\"id\":%d, \"method\":\"mining.configure\", "
                                "\"params\":[[\"version-rolling\"],{\"version-"
                                "rolling.mask\":\"%08x\",\"version-rolling.min-"
                                "bit-count\":%d}]}",
                                iVar7, 0xe00000, 3);
                            sVar2 = strlen(acStack_2020);
                            FUN_000244a4(param_1, acStack_2020, sVar2);
                            param_1[0xa2] = 8;
                            uVar3 = uVar8;
                        }
                        goto LAB_00029c34;
                    }
                LAB_00029bdc:
                    __ptr_00 = (char *)FUN_00045074(piVar6, 3);
                }
                if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                    (5 < DAT_00067db4)) {
                    snprintf(local_2820, 0x800,
                             "pool %d JSON stratum auth failed: %s", *param_1,
                             __ptr_00);
                    FUN_00020f58(6, local_2820, 0);
                }
                free(__ptr_00);
                FUN_00024340(param_1);
                uVar3 = 0;
            LAB_00029c34:
                if (iVar4 == 0) {
                    return uVar3;
                }
                if (*(int *)(iVar4 + 4) == -1) {
                    return uVar3;
                }
                piVar5 = (int *)(iVar4 + 4);
                DataMemoryBarrier(0xb);
                do {
                    iVar7 = *piVar5;
                    bVar1 = (bool)hasExclusiveAccess(piVar5);
                } while (!bVar1);
                *piVar5 = iVar7 + -1;
                if (iVar7 + -1 != 0) {
                    return uVar3;
                }
                FUN_00048a34(iVar4);
                return uVar3;
            }
            free(__ptr);
        }
    }
    return 0;
}

void FUN_00029ef4(int param_1, int param_2)

{
    undefined1 uVar1;
    undefined1 *puVar2;
    uint uVar3;
    undefined1 *puVar4;

    if (param_2 == 1) {
        return;
    }
    puVar4 = (undefined1 *)(param_1 + -1);
    uVar3 = 0;
    puVar2 = (undefined1 *)(param_1 + param_2);
    do {
        uVar3 = uVar3 + 1;
        puVar4 = puVar4 + 1;
        uVar1 = *puVar4;
        puVar2 = puVar2 + -1;
        *puVar4 = *puVar2;
        *puVar2 = uVar1;
    } while (uVar3 < ~uVar3 + param_2);
    return;
}

int FUN_00029f34(int param_1, uint param_2)

{
    int iVar1;
    uint uVar2;

    switch (param_1) {
    case 1:
        goto switchD_00029f3c_caseD_1;
    case 2:
        if ((param_2 & 0x80) != 0x80) {
            param_1 = 1;
        }
        return param_1;
    default:
        return 0;
    case 4:
        param_2 = param_2 & 0xc0;
        if (param_2 == 0x80) {
            return 3;
        }
        if (param_2 == 0xc0) {
            return param_1;
        }
        if (param_2 == 0x40) {
            iVar1 = 2;
        } else {
            iVar1 = 1;
        }
        return iVar1;
    case 8:
        param_2 = param_2 & 0xe0;
        if (param_2 == 0x80) {
            return 5;
        }
        if (param_2 < 0x81) {
            if (param_2 == 0x40) {
                return 3;
            }
            if (param_2 == 0x60) {
                return 4;
            }
            if (param_2 == 0x20) {
                return 2;
            }
        } else {
            if (param_2 == 0xc0) {
                return 7;
            }
            if (param_2 == 0xe0) {
                return param_1;
            }
            if (param_2 == 0xa0) {
                return 6;
            }
        }
        break;
    case 0x10:
        param_2 = param_2 & 0xf0;
        if (param_2 == 0x80) {
            return 9;
        }
        if (param_2 < 0x81) {
            if (param_2 == 0x40) {
                return 5;
            }
            if (param_2 < 0x41) {
                if (param_2 == 0x20) {
                    return 3;
                }
                if (param_2 == 0x30) {
                    return 4;
                }
                if (param_2 == 0x10) {
                    return 2;
                }
            } else {
                if (param_2 == 0x60) {
                    return 7;
                }
                if (param_2 == 0x70) {
                    return 8;
                }
                if (param_2 == 0x50) {
                    return 6;
                }
            }
        } else {
            if (param_2 == 0xc0) {
                return 0xd;
            }
            if (param_2 < 0xc1) {
                if (param_2 == 0xa0) {
                    return 0xb;
                }
                if (param_2 == 0xb0) {
                    return 0xc;
                }
                if (param_2 == 0x90) {
                    return 10;
                }
            } else {
                if (param_2 == 0xe0) {
                    return 0xf;
                }
                if (param_2 == 0xf0) {
                    return param_1;
                }
                if (param_2 == 0xd0) {
                    return 0xe;
                }
            }
        }
        break;
    case 0x20:
        uVar2 = (param_2 & 0xfffffff8) - 8 & 0xff;
        if (uVar2 < 0xf1) {
            return (int)(char)(&DAT_0004d0a0)[uVar2];
        }
        break;
    case 0x40:
        uVar2 = (param_2 & 0xfffffffc) - 4 & 0xff;
        if (uVar2 < 0xf9) {
            return (int)(char)(&DAT_0004d194)[uVar2];
        }
    }
    param_1 = 1;
switchD_00029f3c_caseD_1:
    return param_1;
}

void FUN_0002a21c(int param_1, undefined1 *param_2, int param_3)

{
    uint uVar1;
    uint uVar2;
    undefined1 uVar3;
    char cVar4;
    void *__ptr;
    void *__ptr_00;
    void *__ptr_01;
    void *__ptr_02;
    void *__ptr_03;
    void *__ptr_04;
    undefined4 uVar5;
    int iVar6;
    size_t sVar7;
    undefined4 uVar8;
    char *pcVar9;
    undefined4 *puVar10;
    char *pcVar11;
    undefined1 *puVar12;
    undefined4 *puVar13;
    undefined8 uVar14;
    undefined4 uVar15;
    undefined4 local_c8c;
    undefined4 local_c88;
    undefined4 uStack_c84;
    undefined4 uStack_c80;
    undefined4 uStack_c7c;
    undefined4 local_c78;
    undefined4 uStack_c74;
    undefined4 uStack_c70;
    undefined4 uStack_c6c;
    undefined4 local_c68;
    undefined1 auStack_c64[4];
    undefined4 uStack_c60;
    undefined4 local_c5c;
    undefined4 uStack_c58;
    undefined4 local_c54;
    undefined4 local_c50;
    undefined4 local_c4c;
    undefined4 local_c48;
    undefined4 uStack_c44;
    undefined4 uStack_c40;
    undefined4 uStack_c3c;
    undefined4 local_c38;
    undefined4 uStack_c34;
    undefined4 uStack_c30;
    undefined4 uStack_c2c;
    char acStack_c28[1024];
    char acStack_828[2052];

    memset(acStack_c28, 0, 0x400);
    local_c5c = 0;
    puVar13 = &local_c68;
    uStack_c58 = 0;
    local_c54 = 0;
    local_c50 = 0;
    local_c88 = *(undefined4 *)(param_1 + 0x80);
    uStack_c84 = *(undefined4 *)(param_1 + 0x84);
    uStack_c80 = *(undefined4 *)(param_1 + 0x88);
    uStack_c7c = *(undefined4 *)(param_1 + 0x8c);
    local_c78 = *(undefined4 *)(param_1 + 0x90);
    uStack_c74 = *(undefined4 *)(param_1 + 0x94);
    uStack_c70 = *(undefined4 *)(param_1 + 0x98);
    uStack_c6c = *(undefined4 *)(param_1 + 0x9c);
    local_c4c = 0;
    puVar12 = (undefined1 *)((int)&local_c8c + 3);
    local_c68 = *(undefined4 *)(param_1 + 0x40);
    auStack_c64 = (undefined1[4]) * (undefined4 *)(param_1 + 0x44);
    uStack_c60 = *(undefined4 *)(param_1 + 0x48);
    local_c48 = *(undefined4 *)(param_1 + 0xc0);
    uStack_c44 = *(undefined4 *)(param_1 + 0xc4);
    uStack_c40 = *(undefined4 *)(param_1 + 200);
    uStack_c3c = *(undefined4 *)(param_1 + 0xcc);
    local_c38 = *(undefined4 *)(param_1 + 0xd0);
    uStack_c34 = *(undefined4 *)(param_1 + 0xd4);
    uStack_c30 = *(undefined4 *)(param_1 + 0xd8);
    uStack_c2c = *(undefined4 *)(param_1 + 0xdc);
    do {
        puVar12 = puVar12 + 1;
        uVar3 = *puVar12;
        puVar13 = (undefined4 *)((int)puVar13 + -1);
        *puVar12 = *(undefined1 *)puVar13;
        *(undefined1 *)puVar13 = uVar3;
    } while (puVar12 != (undefined1 *)((int)&uStack_c7c + 3));
    puVar10 = &local_c5c;
    puVar13 = &local_c68;
    do {
        puVar10 = (undefined4 *)((int)puVar10 + -1);
        uVar3 = *(undefined1 *)puVar13;
        *(undefined1 *)puVar13 = *(undefined1 *)puVar10;
        *(undefined1 *)puVar10 = uVar3;
        puVar13 = (undefined4 *)((int)puVar13 + 1);
    } while ((undefined4 *)(auStack_c64 + 2) != puVar10);
    pcVar11 = (char *)((int)&local_c4c + 3);
    pcVar9 = acStack_c28;
    do {
        pcVar11 = pcVar11 + 1;
        cVar4 = *pcVar11;
        pcVar9 = pcVar9 + -1;
        *pcVar11 = *pcVar9;
        *pcVar9 = cVar4;
    } while (pcVar11 != (char *)((int)&uStack_c3c + 3));
    __ptr = (void *)FUN_00022c24(param_1, 0x80);
    __ptr_00 = (void *)FUN_00022c24(&local_c88, 0x20);
    __ptr_01 = (void *)FUN_00022c24(&local_c68, 0xc);
    __ptr_02 = (void *)FUN_00022c24(param_2, 4);
    __ptr_03 = (void *)FUN_00022c24(param_2, 5);
    __ptr_04 = (void *)FUN_00022c24(&local_c48, 0x20);
    uVar14 = FUN_0002cdf0(param_1);
    uVar8 = (undefined4)((ulonglong)uVar14 >> 0x20);
    uVar5 = (undefined4)uVar14;
    pcVar9 = "o";
    if (param_3 == 0) {
        pcVar9 = "x";
    }
    uVar15 = uVar8;
    sprintf(acStack_c28,
            "%s %08x midstate %s data %s nonce %s hash %s diff %lld", pcVar9,
            *(undefined4 *)(param_1 + 0x154), __ptr_00, __ptr_01, __ptr_03,
            __ptr_04, uVar5, uVar8);
    iVar6 = strcmp(DAT_00068de0, "screen");
    if (iVar6 == 0) {
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (2 < DAT_00067db4)) {
            snprintf(acStack_828, 0x800, acStack_c28);
            FUN_00020f58(3, acStack_828, 0);
        }
    } else {
        local_c8c = &DAT_00074500;
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (2 < DAT_00067db4)) {
            snprintf(acStack_828, 0x800, acStack_c28);
            FUN_00020f58(3, acStack_828, 0);
        }
        if (DAT_0006a974 != (FILE *)0x0) {
            sprintf(acStack_c28,
                    "%s %08x work %s midstate %s data %s nonce %s hash %s diff "
                    "%lld",
                    pcVar9, *(undefined4 *)(param_1 + 0x154), __ptr, __ptr_00,
                    __ptr_01, __ptr_03, __ptr_04, uVar15, uVar5, uVar8);
            sVar7 = strlen(acStack_c28);
            fwrite(acStack_c28, sVar7, 1, DAT_0006a974);
            fwrite(&DAT_0004c858, 1, 1, DAT_0006a974);
            fflush(DAT_0006a974);
            if (param_3 != 0) {
                if (DAT_0006a970 == 1) {
                    sprintf(acStack_c28, "midstate %s data %s nonce %s hash %s",
                            __ptr_00, __ptr_01, __ptr_02, __ptr_04);
                    sVar7 = strlen(acStack_c28);
                    fwrite(acStack_c28, sVar7, 1, DAT_0006a978);
                    fwrite(&DAT_0004c858, 1, 1, DAT_0006a978);
                    fflush(DAT_0006a978);
                } else if ((DAT_0006a970 - 0x20U & 0xffffffdf) == 0) {
                    sprintf(acStack_c28, "midstate %s data %s nonce %s hash %s",
                            __ptr_00, __ptr_01, __ptr_02, __ptr_04);
                    iVar6 = FUN_00029f34(DAT_0006a970, *param_2);
                    sVar7 = strlen(acStack_c28);
                    fwrite(acStack_c28, sVar7, 1, (&DAT_0006a978)[iVar6]);
                    fwrite(&DAT_0004c858, 1, 1, (&DAT_0006a978)[iVar6]);
                    fflush((&DAT_0006a978)[iVar6]);
                }
                if (DAT_0006aa7c != '\0') {
                    iVar6 = 0;
                    do {
                        uVar1 = (uint)((ulonglong)uVar14 >> 0x21);
                        uVar2 = (uint)((byte)((ulonglong)uVar14 >> 0x20) & 1)
                                    << 0x1f |
                                (uint)uVar14 >> 1;
                        uVar14 = CONCAT44(uVar1, uVar2);
                        if (uVar2 == 0 && uVar1 == 0)
                            break;
                        iVar6 = iVar6 + 1;
                    } while (iVar6 != 0x40);
                    if ((DAT_00068bd5 != '\0') &&
                        (((*local_c8c != '\0' || (DAT_00068bd4 != '\0')) ||
                          (6 < DAT_00067db4)))) {
                        snprintf(acStack_828, 0x800,
                                 "work diff %lld diffnum %d", uVar8, uVar5,
                                 uVar8, iVar6);
                        FUN_00020f58(7, acStack_828, 0);
                    }
                    sprintf(acStack_c28, "midstate %s data %s nonce %s hash %s",
                            __ptr_00, __ptr_01, __ptr_02, __ptr_04);
                    sVar7 = strlen(acStack_c28);
                    fwrite(acStack_c28, sVar7, 1,
                           (FILE *)(&DAT_0006aa80)[iVar6]);
                    fwrite(&DAT_0004c858, 1, 1, (FILE *)(&DAT_0006aa80)[iVar6]);
                    fflush((FILE *)(&DAT_0006aa80)[iVar6]);
                }
            }
        }
    }
    if (__ptr != (void *)0x0) {
        free(__ptr);
    }
    if (__ptr_00 != (void *)0x0) {
        free(__ptr_00);
    }
    if (__ptr_01 != (void *)0x0) {
        free(__ptr_01);
    }
    if (__ptr_02 != (void *)0x0) {
        free(__ptr_02);
    }
    if (__ptr_03 != (void *)0x0) {
        free(__ptr_03);
    }
    if (__ptr_04 != (void *)0x0) {
        free(__ptr_04);
    }
    return;
}

undefined4 FUN_0002ab38(undefined4 param_1)

{
    FUN_0004014c(param_1, &DAT_00068de8);
    return 0;
}

undefined4 FUN_0002ab68(char *param_1)

{
    char *__fd;
    char *__format;
    bool bVar1;
    char *local_814;
    char local_810[36];
    undefined2 local_7ec;

    local_814 = "";
    __fd = (char *)strtol(param_1, &local_814, 10);
    bVar1 = __fd == (char *)0x0;
    if (-1 < (int)__fd) {
        bVar1 = *local_814 == '\0';
    }
    if (bVar1) {
        DAT_00068dec = fdopen((int)__fd, "a");
        if ((DAT_00068dec == (FILE *)0x0) &&
            (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
              (2 < DAT_00067db4)))) {
            __format = "Failed to open fd %u for share log";
        LAB_0002ac44:
            DAT_00068dec = (FILE *)0x0;
            snprintf(local_810, 0x800, __format, __fd);
            FUN_00020f58(3, local_810, 0);
            return 0;
        }
    } else if ((*param_1 == '-') && (param_1[1] == '\0')) {
        DAT_00068dec = stdout;
        if ((stdout == (FILE *)0x0) &&
            (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
              (2 < DAT_00067db4)))) {
            builtin_strncpy(local_810, "Standard output missing for share lo",
                            0x24);
            local_7ec = 0x67;
            FUN_00020f58(3, local_810, 0);
            return 0;
        }
    } else {
        DAT_00068dec = fopen64(param_1, "a");
        if ((DAT_00068dec == (FILE *)0x0) &&
            (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
              (2 < DAT_00067db4)))) {
            __format = "Failed to open %s for share log";
            __fd = param_1;
            goto LAB_0002ac44;
        }
    }
    return 0;
}

char *FUN_0002ad7c(char *param_1)

{
    char cVar1;
    char *pcVar2;
    size_t sVar3;
    char *pcVar4;
    undefined4 *puVar5;
    char *pcVar6;

    sVar3 = strlen(param_1);
    pcVar4 =
        (char *)FUN_000229bc(sVar3 * 2 + 1, "cgminer.c", "json_escape", 0x1721);
    puVar5 = (undefined4 *)FUN_000229bc(8, "cgminer.c", "json_escape", 0x1722);
    *puVar5 = pcVar4;
    puVar5[1] = DAT_00068df0;
    DAT_00068df0 = puVar5;
    cVar1 = *param_1;
    pcVar2 = pcVar4;
    while (cVar1 != '\0') {
        pcVar6 = pcVar2 + 1;
        if (cVar1 == '\"' || cVar1 == '\\') {
            *pcVar2 = '\\';
            pcVar6 = pcVar2 + 2;
            pcVar2 = pcVar2 + 1;
        }
        *pcVar2 = *param_1;
        cVar1 = param_1[1];
        pcVar2 = pcVar6;
        param_1 = param_1 + 1;
    }
    *pcVar2 = '\0';
    return pcVar4;
}

void FUN_0002ae34(undefined4 param_1)

{
    undefined4 uVar1;

    printf("%s\nBuilt with bitmain_c5 mining support.\n", &DAT_00068df4);
    uVar1 = FUN_000410e8(DAT_00076868, param_1);
    printf("%s", uVar1);
    fflush(stdout);
    /* WARNING: Subroutine does not return */
    exit(0);
}

void FUN_0002ae8c(int param_1)

{
    time_t tVar1;
    int iVar2;

    *(undefined1 *)(param_1 + 0x3d) = 1;
    FUN_000239a4(param_1 + 0x2c);
    *(undefined4 *)(*(int *)(param_1 + 0x24) + 0x60) = 0;
    iVar2 = *(int *)(param_1 + 0x24);
    tVar1 = time((time_t *)0x0);
    *(time_t *)(iVar2 + 0xf0) = tVar1;
    return;
}

void FUN_0002aec4(int param_1)

{
    time_t tVar1;
    int iVar2;

    *(undefined1 *)(param_1 + 0x3d) = 0;
    FUN_000239a4(param_1 + 0x2c);
    *(undefined4 *)(*(int *)(param_1 + 0x24) + 0x60) = 0;
    iVar2 = *(int *)(param_1 + 0x24);
    tVar1 = time((time_t *)0x0);
    *(time_t *)(iVar2 + 0xf0) = tVar1;
    return;
}

/* WARNING: Type propagation algorithm not settling */

void FUN_0002aef8(uint param_1, uint param_2, char *param_3, size_t param_4,
                  int param_5)

{
    int iVar1;
    undefined4 uVar2;
    bool bVar3;
    double dVar4;
    undefined2 local_2c[2];

    bVar3 = 0xde0b6b2 < param_2;
    local_2c[0] = 0;
    if (param_2 == 0xde0b6b3) {
        bVar3 = 0xa763fffe < param_1;
    }
    if (!bVar3 || param_2 == 0xde0b6b3 && param_1 == 0xa763ffff) {
        bVar3 = 0x38d7d < param_2;
        if (param_2 == 0x38d7e) {
            bVar3 = 0xa4c67ffe < param_1;
        }
        if (bVar3 && (param_2 != 0x38d7e || param_1 != 0xa4c67fff)) {
            iVar1 = FUN_0004a178(param_1, param_2, 0xd4a51000, 0xe8);
            dVar4 = (double)(longlong)iVar1;
            local_2c[0] = 0x50;
        } else {
            bVar3 = 0xe7 < param_2;
            if (param_2 == 0xe8) {
                bVar3 = 0xd4a50ffe < param_1;
            }
            if (bVar3 && (param_2 != 0xe8 || param_1 != 0xd4a50fff)) {
                iVar1 = FUN_0004a178(param_1, param_2, 1000000000, 0);
                local_2c[0] = 0x54;
            } else {
                if (param_2 == 0 && param_1 < 1000000000) {
                    if (param_2 == 0 && param_1 < 1000000) {
                        dVar4 = (double)(longlong)(int)param_1;
                        if (param_2 == 0 && param_1 < 1000) {
                            if (param_5 == 0) {
                                snprintf(param_3, param_4, "%d%s", param_1,
                                         local_2c);
                                return;
                            }
                            goto LAB_0002afcc;
                        }
                        local_2c[0] = 0x4b;
                    } else {
                        iVar1 = FUN_0004a178(param_1, param_2, 1000, 0);
                        dVar4 = (double)(longlong)iVar1;
                        local_2c[0] = 0x4d;
                    }
                    goto joined_r0x0002b128;
                }
                iVar1 = FUN_0004a178(param_1, param_2, 1000000, 0);
                local_2c[0] = 0x47;
            }
            dVar4 = (double)(longlong)iVar1;
        }
    } else {
        iVar1 = FUN_0004a178(param_1, param_2, 0xa4c68000, 0x38d7e);
        dVar4 = (double)(longlong)iVar1;
        local_2c[0] = 0x45;
    }
joined_r0x0002b128:
    dVar4 = dVar4 / 1000.0;
    if (param_5 == 0) {
        snprintf(param_3, param_4, "%.3g%s", local_2c, dVar4, local_2c);
        return;
    }
LAB_0002afcc:
    if (dVar4 <= 0.0) {
        uVar2 = 3;
    } else {
        dVar4 = log10(dVar4);
        dVar4 = floor(dVar4);
        uVar2 = (undefined4)(longlong)(3.0 - dVar4);
    }
    snprintf(param_3, param_4, "%*.*f%s", param_5 + 1, uVar2);
    return;
}

void FUN_0002b1b0(int param_1)

{
    int extraout_r3;
    int iVar1;
    int iVar2;
    double in_d0;
    double dVar3;
    double dVar4;
    double dVar5;
    double dVar6;
    undefined8 uVar7;

    iVar2 = *(int *)(param_1 + 0x104);
    if (in_d0 == 0.0) {
        dVar5 = (double)FUN_0004a10c(*(undefined4 *)(param_1 + 0xb8),
                                     *(undefined4 *)(param_1 + 0xbc));
        dVar3 = (double)FUN_0004a10c(*(undefined4 *)(param_1 + 0xb0),
                                     *(undefined4 *)(param_1 + 0xb4));
        dVar4 = (double)FUN_0004a10c(*(undefined4 *)(param_1 + 0xa8),
                                     *(undefined4 *)(param_1 + 0xac));
        dVar6 = (double)FUN_0004a10c(*(undefined4 *)(param_1 + 0xa0),
                                     *(undefined4 *)(param_1 + 0xa4));
        dVar6 = dVar6 + dVar5 * 6.277101735386681e+57 +
                dVar3 * 3.402823669209385e+38 + dVar4 * 1.8446744073709552e+19;
        if (dVar6 == 0.0) {
            in_d0 = 2.695953529101131e+67;
            uVar7 = 0xffffffffffffffff;
        } else {
            in_d0 = 2.695953529101131e+67 / dVar6;
            dVar3 = round(in_d0);
            uVar7 =
                FUN_0004a1d8(SUB84(dVar3, 0), (int)((ulonglong)dVar3 >> 0x20));
        }
        *(double *)(param_1 + 0x178) = in_d0;
    } else {
        *(double *)(param_1 + 0x178) = in_d0;
        dVar3 = round(in_d0);
        uVar7 = FUN_0004a1d8(SUB84(dVar3, 0), (int)((ulonglong)dVar3 >> 0x20));
    }
    *(double *)(iVar2 + 0x1e0) = in_d0;
    FUN_0002aef8((int)uVar7, (int)((ulonglong)uVar7 >> 0x20),
                 *(int *)(param_1 + 0x104) + 0x30, 8, 0);
    dVar3 = *(double *)(iVar2 + 0x1d0);
    if (dVar3 == in_d0) {
        iVar1 = *(int *)(iVar2 + 0x1e8) + 1;
        *(int *)(iVar2 + 0x1e8) = iVar1;
    LAB_0002b21c:
        dVar3 = *(double *)(iVar2 + 0x1d8);
    } else {
        if (dVar3 <= in_d0) {
            iVar1 = extraout_r3;
            if (dVar3 != 0.0)
                goto LAB_0002b21c;
            *(double *)(iVar2 + 0x1d0) = in_d0;
            *(undefined4 *)(iVar2 + 0x1e8) = 1;
        } else {
            *(double *)(iVar2 + 0x1d0) = in_d0;
            *(undefined4 *)(iVar2 + 0x1e8) = 1;
        }
        iVar1 = 1;
        dVar3 = *(double *)(iVar2 + 0x1d8);
    }
    if (dVar3 != in_d0) {
        if (dVar3 < in_d0) {
            iVar1 = 1;
        }
        if (dVar3 < in_d0) {
            *(double *)(iVar2 + 0x1d8) = in_d0;
            *(int *)(iVar2 + 0x1ec) = iVar1;
        }
        return;
    }
    *(int *)(iVar2 + 0x1ec) = *(int *)(iVar2 + 0x1ec) + 1;
    return;
}

void FUN_0002b350(int param_1)

{
    uint *puVar1;
    uint *puVar2;
    uint uVar3;
    undefined1 auStack_78[28];
    uint uStack_5c;
    uint local_58[20];

    puVar1 = (uint *)(param_1 + -4);
    puVar2 = &uStack_5c;
    do {
        puVar1 = puVar1 + 1;
        uVar3 = *puVar1;
        puVar2 = puVar2 + 1;
        *puVar2 = uVar3 << 0x18 | (uVar3 >> 8 & 0xff) << 0x10 |
                  (uVar3 >> 0x10 & 0xff) << 8 | uVar3 >> 0x18;
    } while (puVar2 != local_58 + 0x13);
    FUN_00021c34(local_58, 0x50, auStack_78);
    FUN_00021c34(auStack_78, 0x20, param_1 + 0xc0);
    return;
}

void FUN_0002b3a4(int param_1)

{
    uint *puVar1;
    uint *puVar2;
    uint uVar3;
    uint local_f4;
    uint local_f0[16];
    undefined1 auStack_b0[136];
    undefined1 auStack_28[32];

    puVar1 = (uint *)(param_1 + -4);
    puVar2 = &local_f4;
    do {
        puVar1 = puVar1 + 1;
        uVar3 = *puVar1;
        puVar2 = puVar2 + 1;
        *puVar2 = uVar3 << 0x18 | (uVar3 >> 8 & 0xff) << 0x10 |
                  (uVar3 >> 0x10 & 0xff) << 8 | uVar3 >> 0x18;
    } while (puVar2 != local_f0 + 0xf);
    FUN_00021a6c(auStack_b0);
    FUN_00021a9c(auStack_b0, local_f0, 0x40);
    local_f4 = 0x8d0;
    FUN_000254e8(param_1 + 0x80, auStack_28, 0x20, "cgminer.c",
                 "calc_midstate");
    return;
}

void FUN_0002b41c(void)

{
    void *__arg;
    int iVar1;
    int iVar2;
    char acStack_820[2048];

    if (0 < DAT_000733cc) {
        iVar1 = 0;
        do {
            __arg = *(void **)(DAT_000744c8 + iVar1 * 4);
            *(undefined1 *)((int)__arg + 0x11c) = 1;
            pthread_create((pthread_t *)((int)__arg + 0x118),
                           (pthread_attr_t *)0x0, FUN_00035d3c, __arg);
            iVar2 = iVar1 + 1;
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (4 < DAT_00067db4)) {
                snprintf(acStack_820, 0x800,
                         "create test_pool_thread pool[%d]\n", iVar1);
                FUN_00020f58(5, acStack_820, 0);
            }
            iVar1 = iVar2;
        } while (iVar2 < DAT_000733cc);
    }
    return;
}

undefined4 FUN_0002b4ec(void)

{
    pthread_t __th;

    __th = pthread_self();
    pthread_detach(__th);
    return 0;
}

undefined4 FUN_0002b500(undefined4 *param_1)

{
    int iVar1;
    time_t tVar2;
    int iVar3;
    int iVar4;
    char acStack_820[16];
    char local_810[28];
    undefined2 uStack_7f4;
    undefined1 local_7f2;

    iVar4 = param_1[9];
    iVar3 = *(int *)(iVar4 + 4);
    snprintf(acStack_820, 0x10, "%d/Miner", *param_1);
    FUN_000250a8(acStack_820);
    FUN_0002ae8c(param_1);
    iVar1 = (**(code **)(iVar3 + 0x34))(param_1);
    if (iVar1 != 0) {
        if ((DAT_00068bd5 != '\0') &&
            (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
              (6 < DAT_00067db4)))) {
            builtin_strncpy(local_810, "Waiting on sem in miner thre", 0x1c);
            uStack_7f4 = 0x6461;
            local_7f2 = 0;
            FUN_00020f58(7, local_810, 0);
        }
        FUN_00025228(param_1 + 4, "cgminer.c", "miner_thread", 0x2649);
        tVar2 = time((time_t *)0x0);
        *(time_t *)(iVar4 + 0xe8) = tVar2;
        (**(code **)(iVar3 + 0x3c))(param_1);
        (**(code **)(iVar3 + 0x58))(param_1);
        return 0;
    }
    FUN_00024dc4(iVar4);
    return 0;
}

void FUN_0002b63c(void)

{
    pthread_t __th;

    __th = pthread_self();
    pthread_detach(__th);
    pthread_setcanceltype(1, (int *)0x0);
    sleep(7);
    /* WARNING: Subroutine does not return */
    exit(1);
}

void FUN_0002b664(undefined4 *param_1)

{
    DAT_00074578 = DAT_00074578 + 1;
    *param_1 = 1;
    return;
}

byte FUN_0002b684(int param_1)

{
    byte bVar1;

    bVar1 = *(byte *)(param_1 + 0x280);
    if ((bVar1 != 0) && (*(char *)(param_1 + 0x281) != '\0')) {
        bVar1 = *(byte *)(param_1 + 0x283) ^ 1;
    }
    return bVar1;
}

int FUN_0002b6a8(int param_1)

{
    int iVar1;
    int iVar2;
    int *piVar3;
    int *piVar5;
    int iVar6;
    undefined8 uVar7;
    int *piVar4;

    iVar6 = *(int *)(param_1 + 0x9c);
    if (0 < DAT_000733cc) {
        piVar5 = DAT_000744c8 + DAT_000733cc;
        piVar3 = DAT_000744c8;
        do {
            piVar4 = piVar3 + 1;
            iVar1 = *piVar3;
            if ((((*(char *)(iVar1 + 0x61) == '\0') &&
                  (*(int *)(iVar1 + 100) == 1)) &&
                 (uVar7 = FUN_0002b684(iVar1),
                  iVar1 = (int)((ulonglong)uVar7 >> 0x20), (int)uVar7 == 0)) &&
                (iVar2 = *(int *)(iVar1 + 0x9c), iVar2 < iVar6)) {
                param_1 = iVar1;
                iVar6 = iVar2;
            }
            piVar3 = piVar4;
        } while (piVar4 != piVar5);
        iVar6 = *(int *)(param_1 + 0x9c);
    }
    *(int *)(param_1 + 0x9c) = iVar6 + 1;
    return param_1;
}

int FUN_0002b7bc(int param_1)

{
    int iVar1;
    int *piVar2;
    int iVar3;
    char acStack_808[2048];

    if (DAT_000733cc < 1) {
    LAB_0002b730:
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (2 < DAT_00067db4)) {
            snprintf(acStack_808, 0x800, "WTF No pool %d found!", param_1);
            FUN_00020f58(3, acStack_808, 0);
        }
        return DAT_000744c8[param_1];
    }
    iVar1 = *DAT_000744c8;
    if (*(int *)(iVar1 + 4) != param_1) {
        iVar3 = 0;
        piVar2 = DAT_000744c8;
        do {
            iVar3 = iVar3 + 1;
            if (iVar3 == DAT_000733cc)
                goto LAB_0002b730;
            piVar2 = piVar2 + 1;
            iVar1 = *piVar2;
        } while (*(int *)(iVar1 + 4) != param_1);
    }
    return iVar1;
}

char *FUN_0002b824(char *param_1)

{
    int iVar1;

    iVar1 = sscanf(param_1, "%d:%d", &DAT_000732f0, &DAT_000732ec);
    if (iVar1 != 2) {
        return "Invalid time set, should be HH:MM";
    }
    if ((DAT_000732f0 < 0x18) && (DAT_000732ec < 0x3c)) {
        DAT_000732e4 = 1;
        return (char *)0x0;
    }
    return "Invalid time set.";
}

char *FUN_0002b890(char *param_1)

{
    int iVar1;
    int *piVar2;
    size_t sVar3;
    size_t sVar4;
    char *pcVar5;
    int iVar6;
    undefined *puVar7;
    undefined1 auStack_114[92];
    char acStack_b8[164];

    puVar7 = &DAT_00068bd8;
    if (DAT_00068ef4 == 0) {
        DAT_00068ef4 = __strdup();
    }
    iVar6 = DAT_00068ef8 + 1;
    iVar1 = DAT_00068ef8 + -9;
    DAT_00068ef8 = iVar6;
    if (10 < iVar6) {
        puVar7 = (undefined *)0x19bc;
    }
    if (iVar6 == 10 || iVar1 < 0 != SBORROW4(iVar6, 10)) {
        piVar2 = (int *)FUN_000475b0(param_1, 0, auStack_114);
        if ((piVar2 != (int *)0x0) && (*piVar2 == 0)) {
            puVar7[0x324] = 1;
            pcVar5 = (char *)FUN_0002b98c(piVar2, 1);
            return pcVar5;
        }
        sVar3 = strlen(param_1);
        sVar4 = strlen(acStack_b8);
        sVar3 = sVar3 + sVar4 + 0x23;
        pcVar5 = (char *)FUN_000229bc(sVar3, "cgminer.c", "load_config", 0x84c);
        snprintf(pcVar5, sVar3, "JSON decode of file \'%s\' failed\n %s",
                 param_1, acStack_b8);
        return pcVar5;
    }
    return (char *)((uint)puVar7 & 0xffff | 0x50000);
}

undefined *FUN_0002b98c(undefined4 param_1, int param_2)

{
    char *__s;
    char *pcVar1;
    int *piVar2;
    int *piVar3;
    undefined4 uVar4;
    undefined *puVar5;
    int *piVar6;
    uint uVar7;
    int iVar8;
    char *pcVar9;
    uint uVar10;
    char acStack_828[2052];

    if ((param_2 != 0) && (DAT_00068fc8 == 0)) {
        DAT_00068fc8 = 1;
    }
    if (DAT_00067fe4 != 0x10) {
        uVar10 = DAT_00067fe4 & 8;
        piVar3 = &DAT_00067fe0;
        do {
            if (uVar10 != 0) {
                /* WARNING: Subroutine does not return */
                __assert_fail("!(opt->type & OPT_SUBTABLE)", "cgminer.c", 0x7a4,
                              "parse_config");
            }
            if (*piVar3 == 0) {
                uVar10 = piVar3[8];
            } else {
                __s = (char *)__strdup();
                pcVar1 = strtok(__s, "|");
                while (pcVar1 != (char *)0x0) {
                    if ((pcVar1[1] == '-') &&
                        (piVar2 = (int *)FUN_000480fc(param_1, pcVar1 + 2),
                         piVar2 != (int *)0x0)) {
                        iVar8 = *piVar2;
                        if ((piVar3[1] & 6U) == 0) {
                        LAB_0002ba98:
                            if (iVar8 - 5U < 2) {
                                if ((piVar3[1] & 1U) == 0) {
                                    if (iVar8 == 5) {
                                        FUN_00040068(piVar3[5]);
                                    } else {
                                        FUN_00040078();
                                    }
                                    goto LAB_0002ba44;
                                }
                                pcVar9 = (char *)(*(code *)piVar3[2])();
                                goto LAB_0002bb88;
                            }
                            pcVar9 = "Invalid value";
                        } else {
                            if (iVar8 != 2) {
                                if (iVar8 == 1) {
                                    uVar10 = 0;
                                    iVar8 = FUN_00048468(piVar2);
                                    if (iVar8 != 0) {
                                        do {
                                            piVar6 = (int *)FUN_00048484(
                                                piVar2, uVar10);
                                            if (piVar6 == (int *)0x0)
                                                break;
                                            if (*piVar6 == 2) {
                                                uVar4 = FUN_00048630();
                                                pcVar9 = (char *)(*(
                                                    code *)piVar3[3])(
                                                    uVar4, piVar3[5]);
                                                if (piVar3[1] == 4) {
                                                    FUN_0004014c(uVar4,
                                                                 piVar3[5]);
                                                }
                                            LAB_0002bcb0:
                                                if (pcVar9 != (char *)0x0)
                                                    goto joined_r0x0002bab4;
                                            } else if (*piVar6 == 0) {
                                                pcVar9 = (char *)FUN_0002b98c();
                                                goto LAB_0002bcb0;
                                            }
                                            uVar10 = uVar10 + 1;
                                            uVar7 = FUN_00048468(piVar2);
                                        } while (uVar10 < uVar7);
                                    }
                                    goto LAB_0002ba44;
                                }
                                goto LAB_0002ba98;
                            }
                            uVar4 = FUN_00048630();
                            pcVar9 =
                                (char *)(*(code *)piVar3[3])(uVar4, piVar3[5]);
                            if (piVar3[1] == 4) {
                                FUN_0004014c(uVar4, piVar3[5]);
                            }
                        LAB_0002bb88:
                            if (pcVar9 == (char *)0x0)
                                goto LAB_0002ba44;
                        }
                    joined_r0x0002bab4:
                        if (param_2 == 0) {
                            snprintf(&DAT_00068f00, 200,
                                     "Parsing JSON option %s: %s", pcVar1,
                                     pcVar9);
                            return &DAT_00068f00;
                        }
                        if (((DAT_00074500 != '\0') ||
                             (DAT_00068bd4 != '\0')) ||
                            (2 < DAT_00067db4)) {
                            snprintf(acStack_828, 0x800,
                                     "Invalid config option %s: %s", pcVar1,
                                     pcVar9);
                            FUN_00020f58(3, acStack_828, 0);
                        }
                        DAT_00068fc8 = -1;
                    }
                LAB_0002ba44:
                    pcVar1 = strtok((char *)0x0, "|");
                }
                free(__s);
                uVar10 = piVar3[8];
            }
            if (uVar10 == 0x10)
                break;
            uVar10 = uVar10 & 8;
            piVar3 = piVar3 + 7;
        } while (true);
    }
    piVar3 = (int *)FUN_000480fc(param_1, "include");
    if ((piVar3 != (int *)0x0) && (*piVar3 == 2)) {
        uVar4 = FUN_00048630();
        puVar5 = (undefined *)FUN_0002b890(uVar4, 0);
        return puVar5;
    }
    return (undefined *)0x0;
}

char FUN_0002bd14(void)

{
    char cVar1;
    tm *ptVar2;
    int iVar3;
    int iVar4;
    char cVar5;
    time_t local_24;
    time_t local_20[3];

    FUN_000239a4(local_20);
    local_24 = local_20[0];
    ptVar2 = localtime(&local_24);
    cVar1 = DAT_0007339c;
    if (DAT_0007339c == '\0') {
        if (DAT_000732f0 <= ptVar2->tm_hour) {
            return ptVar2->tm_hour == DAT_000732f0 &&
                   ptVar2->tm_min < DAT_000732ec;
        }
        cVar5 = '\x01';
    } else {
        iVar4 = ptVar2->tm_min;
        iVar3 = ptVar2->tm_hour;
        cVar5 = DAT_000732e4;
        if (DAT_000732e4 == '\0') {
            if ((DAT_000733a8 <= iVar3) &&
                (DAT_000733a4 <= iVar4 || DAT_000733a8 != iVar3)) {
                DAT_0007339c = DAT_000732e4;
                cVar5 = cVar1;
            }
        } else if ((DAT_000733a8 < DAT_000732f0) ||
                   (DAT_000733a4 < DAT_000732ec &&
                    DAT_000732f0 == DAT_000733a8)) {
            if ((iVar3 < DAT_000732f0) ||
                (cVar5 = iVar4 < DAT_000732ec && DAT_000732f0 == iVar3,
                 iVar4 < DAT_000732ec && DAT_000732f0 == iVar3)) {
                if (iVar3 < DAT_000733a8) {
                    cVar5 = '\0';
                } else {
                    cVar5 = DAT_000733a4 <= iVar4 || DAT_000733a8 != iVar3;
                }
            }
        } else if (((iVar3 < DAT_000733a8) ||
                    (iVar4 < DAT_000733a4 && DAT_000733a8 == iVar3)) &&
                   (DAT_000732f0 <= iVar3)) {
            cVar5 = iVar4 < DAT_000732ec && DAT_000732f0 == iVar3;
        }
    }
    return cVar5;
}

char *FUN_0002bea0(undefined4 param_1, float *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_00040158();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    if (100.0 <= *param_2) {
        pcVar1 = (char *)0x0;
        if (250.0 < *param_2) {
            pcVar1 = "Value out of range";
        }
        return pcVar1;
    }
    return "Value out of range";
}

char *FUN_0002bef8(undefined4 param_1, float *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_00040158();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    if (125.0 <= *param_2) {
        pcVar1 = (char *)0x0;
        if (500.0 < *param_2) {
            pcVar1 = "Value out of range";
        }
        return pcVar1;
    }
    return "Value out of range";
}

void FUN_0002bf50(int param_1, undefined4 param_2, undefined4 *param_3)

{
    char cVar1;
    int iVar2;
    char local_818[28];
    undefined2 uStack_7fc;
    undefined1 local_7fa;

    if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
        (3 < DAT_00067db4)) {
        snprintf(local_818, 0x800, "Thread %d being disabled", param_2);
        FUN_00020f58(4, local_818, 0);
    }
    cVar1 = DAT_00068bd5;
    iVar2 = *(int *)(param_1 + 0x24);
    *(undefined4 *)(iVar2 + 0x30) = 0;
    *(undefined4 *)(iVar2 + 0x34) = 0;
    if ((cVar1 != '\0') && (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                             (6 < DAT_00067db4)))) {
        builtin_strncpy(local_818, "Waiting on sem in miner thre", 0x1c);
        uStack_7fc = 0x6461;
        local_7fa = 0;
        FUN_00020f58(7, local_818, 0);
    }
    FUN_00025228(param_1 + 0x10, "cgminer.c", "mt_disable", 0x23c1);
    if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
        (3 < DAT_00067db4)) {
        snprintf(local_818, 0x800, "Thread %d being re-enabled", param_2);
        FUN_00020f58(4, local_818, 0);
    }
    (*(code *)*param_3)(param_1);
    return;
}

void FUN_0002c148(void)

{
    int iVar1;
    code *UNRECOVERED_JUMPTABLE;
    char acStack_808[2048];

    iVar1 = nice(10);
    if (iVar1 != 0) {
        return;
    }
    if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
        (DAT_00067db4 < 6)) {
        return;
    }
    builtin_strncpy(acStack_808, "Unable to set thread to low priority", 0x24);
    acStack_808[0x24] = 0;
    FUN_00020f58(6, acStack_808, 0);
    /* WARNING: Could not recover jumptable at 0x0002c144. Too many branches */
    /* WARNING: Treating indirect jump as call */
    (*UNRECOVERED_JUMPTABLE)();
    return;
}

void FUN_0002c1a4(int param_1)

{
    pthread_t __th;

    __th = pthread_self();
    pthread_detach(__th);
    pthread_setcanceltype(1, (int *)0x0);
    FUN_000250a8(&DAT_0004ae38);
    FUN_0002c148();
    FUN_0001dd84(DAT_00068fcc);
    *(undefined4 *)(param_1 + 0xc) = 0;
    return;
}

char *FUN_0002c1ec(undefined4 param_1)

{
    char *pcVar1;

    DAT_00068fd0 = 2;
    pcVar1 = (char *)FUN_00040268(param_1, &DAT_00073464);
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (9999 < DAT_00073464) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002c234(undefined4 param_1, uint *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_00040268();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (9999 < *param_2) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002c264(undefined4 param_1, int *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_00040268();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (0xfffe < *param_2 - 1U) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002c298(undefined4 param_1, int *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_00040268();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (0x14 < *param_2 - 0x2aU) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002c2c8(undefined4 param_1, int *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_00040268();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (0x21 < *param_2 - 0x16U) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002c2f8(undefined4 param_1, int *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_00040268();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (0x2b < *param_2 - 0x2aU) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002c328(undefined4 param_1, int *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_00040268();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (0x35 < *param_2 - 0x16U) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002c358(undefined4 param_1, int *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_00040268();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (0x1f < *param_2 - 0x20U) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002c388(undefined4 param_1, uint *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_00040268();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (4 < *param_2) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002c3b4(undefined4 param_1, uint *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_00040268();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (200 < *param_2) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002c3e0(undefined4 param_1, uint *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_00040268();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (0x1e00 < *param_2) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002c40c(undefined4 param_1, int *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_00040268();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (0xfe < *param_2 - 1U) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002c43c(undefined4 param_1, uint *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_00040268();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (0xff < *param_2) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002c468(undefined4 param_1, uint *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_00040268();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (100 < *param_2) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002c494(undefined4 param_1, int *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_00040268();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (9 < *param_2 - 1U) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

char *FUN_0002c4c4(undefined4 param_1, uint *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_00040268();
    if (pcVar1 != (char *)0x0) {
        return pcVar1;
    }
    pcVar1 = (char *)0x0;
    if (10 < *param_2) {
        pcVar1 = "Value out of range";
    }
    return pcVar1;
}

void FUN_0002c538(double *param_1)

{
    double in_d0;
    double dVar1;
    double in_d1;
    double in_d2;

    dVar1 = exp(in_d1 / in_d2);
    dVar1 = 1.0 - 1.0 / dVar1;
    *param_1 = (*param_1 + (in_d0 / in_d1) * dVar1) / (dVar1 + 1.0);
    return;
}

char *FUN_0002c5a4(char *param_1)

{
    int iVar1;

    iVar1 = sscanf(param_1, "%d:%d", &DAT_000733a8, &DAT_000733a4);
    if (iVar1 != 2) {
        return "Invalid time set, should be HH:MM";
    }
    if ((DAT_000733a8 < 0x18) && (DAT_000733a4 < 0x3c)) {
        DAT_0007339c = 1;
        return (char *)0x0;
    }
    return "Invalid time set.";
}

void FUN_0002c610(char *param_1, size_t param_2, time_t *param_3)

{
    tm *ptVar1;
    int iVar2;
    time_t local_1c[2];

    iVar2 = param_3[1];
    local_1c[0] = *param_3;
    ptVar1 = localtime(local_1c);
    snprintf(param_1, param_2, "[%d-%02d-%02d %02d:%02d:%02d.%03d]",
             ptVar1->tm_year + 0x76c, ptVar1->tm_mon + 1, ptVar1->tm_mday,
             ptVar1->tm_hour, ptVar1->tm_min, ptVar1->tm_sec, iVar2 / 1000);
    return;
}

void FUN_0002c6a8(void)

{
    undefined4 uVar1;
    int extraout_r1;
    int extraout_r1_00;
    uint uVar2;
    uint uVar3;
    int *piVar4;
    int iVar6;
    int iVar7;
    int *piVar8;
    int *piVar9;
    char acStack_820[2052];
    int *piVar5;

    piVar8 = DAT_000744c8;
    if (DAT_000733cc < 1) {
        uVar3 = 1;
    } else {
        uVar3 = 0xffffffff;
        piVar4 = DAT_000744c8;
        do {
            piVar5 = piVar4 + 1;
            uVar2 = *(uint *)(*piVar4 + 0x38);
            if (uVar2 != 0 && uVar2 < uVar3) {
                uVar3 = uVar2;
            }
            piVar4 = piVar5;
        } while (DAT_000744c8 + DAT_000733cc != piVar5);
        piVar4 = DAT_000744c8;
        if (uVar3 == 0xffffffff) {
            uVar3 = 1;
            iVar6 = DAT_00068718;
        } else {
            do {
                piVar9 = piVar4 + 1;
                iVar6 = *(int *)(*piVar4 + 0x38);
                if (iVar6 != 0) {
                    FUN_00049b34(iVar6, uVar3);
                    iVar7 = extraout_r1;
                    while (iVar7 != 0) {
                        uVar3 = uVar3 - 1;
                        FUN_00049b34(iVar6, uVar3);
                        iVar7 = extraout_r1_00;
                    }
                }
                piVar4 = piVar9;
                iVar6 = DAT_00068718;
            } while (piVar5 != piVar9);
        }
        do {
            piVar4 = piVar8 + 1;
            iVar7 = *piVar8;
            uVar1 = FUN_000498d8(*(int *)(iVar7 + 0x40) * iVar6, uVar3);
            *(undefined4 *)(iVar7 + 0x40) = uVar1;
            uVar1 = FUN_000498d8(*(undefined4 *)(iVar7 + 0x38), uVar3);
            *(undefined4 *)(iVar7 + 0x3c) = uVar1;
            piVar8 = piVar4;
        } while (piVar5 != piVar4);
    }
    DAT_00068718 = uVar3;
    if ((DAT_00068bd5 != '\0') &&
        (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
          (6 < DAT_00067db4)))) {
        snprintf(acStack_820, 0x800,
                 "Global quota greatest common denominator set to %lu", uVar3);
        FUN_00020f58(7, acStack_820, 0);
    }
    return;
}

char *FUN_0002c82c(undefined4 param_1, int *param_2, int param_3, int param_4)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_00040268();
    if (pcVar1 == (char *)0x0) {
        pcVar1 = (char *)0x0;
        if (param_4 < *param_2 || *param_2 < param_3) {
            pcVar1 = "Value out of range";
        }
        return pcVar1;
    }
    return pcVar1;
}

void FUN_0002c878(char *param_1, undefined4 *param_2, undefined4 *param_3)

{
    int iVar1;

    iVar1 = sscanf(param_1, "%d-%d", param_2, param_3);
    if (iVar1 == 1) {
        *param_3 = *param_2;
    }
    return;
}

int FUN_0002c8a8(int param_1, char *param_2)

{
    int iVar1;
    int iVar2;
    undefined4 uVar3;

    iVar1 = FUN_00023cd8(param_2, param_1 + 600, param_1 + 0x248);
    if (iVar1 != 0) {
        iVar2 = strncasecmp(param_2, "stratum+tcp://", 0xe);
        if (iVar2 == 0) {
            uVar3 = __strdup(param_2);
            *(undefined4 *)(param_1 + 0xa4) = uVar3;
            *(undefined1 *)(param_1 + 0x280) = 1;
            *(undefined4 *)(param_1 + 0x240) = *(undefined4 *)(param_1 + 600);
            return iVar1;
        }
        iVar1 = 0;
    }
    return iVar1;
}

undefined4 FUN_0002c918(int param_1, undefined4 param_2)

{
    char *__s1;
    int iVar1;
    char *__dest;

    __s1 = (char *)FUN_00023e4c(param_2, param_1);
    iVar1 = FUN_0002c8a8(param_1, __s1);
    if (iVar1 == 0) {
        FUN_0004014c(__s1, param_1 + 0xa4);
        iVar1 = strncmp(__s1, "http://", 7);
        if ((iVar1 != 0) &&
            (iVar1 = strncmp(__s1, "https://", 8), iVar1 != 0)) {
            __dest =
                (char *)FUN_000229bc(0x100, "cgminer.c", "setup_url", 0x412);
            builtin_strncpy(__dest, "stratum+tcp://", 0xf);
            strncat(__dest, __s1, 0xf2);
            FUN_0002c8a8(param_1, __dest);
        }
    }
    return *(undefined4 *)(param_1 + 0xa4);
}

char *FUN_0002ca18(char *param_1, undefined4 param_2, undefined4 param_3,
                   undefined4 param_4)

{
    uint uVar1;

    uVar1 = strtol(param_1, (char **)0x0, 10);
    if (200 < uVar1) {
        return "Invalid value passed to set temp cutoff";
    }
    DAT_00068fd4 = param_4;
    return (char *)0x0;
}

void FUN_0002ca54(void *param_1)

{
    free(*(void **)((int)param_1 + 0x120));
    free(*(void **)((int)param_1 + 0x134));
    free(*(void **)((int)param_1 + 0x148));
    free(*(void **)((int)param_1 + 0x140));
    memset(param_1, 0, 0x1c0);
    return;
}

void FUN_0002ca90(int param_1, int param_2, int param_3)

{
    uint uVar1;
    undefined4 uVar2;
    uint local_1c[2];

    uVar2 = *(undefined4 *)(param_1 + 0x154);
    FUN_0002ca54();
    FUN_000254e8(param_1, param_2, 0x1c0, "cgminer.c", "_copy_work", 0x1357);
    *(undefined4 *)(param_1 + 0x154) = uVar2;
    if (*(int *)(param_2 + 0x120) != 0) {
        uVar2 = __strdup();
        *(undefined4 *)(param_1 + 0x120) = uVar2;
    }
    if (*(int *)(param_2 + 0x140) != 0) {
        uVar2 = __strdup();
        *(undefined4 *)(param_1 + 0x140) = uVar2;
    }
    if (*(int *)(param_2 + 0x134) == 0) {
        if (param_3 != 0) {
            uVar1 = *(uint *)(param_1 + 0x44);
            uVar1 = param_3 + (uVar1 << 0x18 | (uVar1 >> 8 & 0xff) << 0x10 |
                               (uVar1 >> 0x10 & 0xff) << 8 | uVar1 >> 0x18);
            *(uint *)(param_1 + 0x44) =
                uVar1 * 0x1000000 | (uVar1 >> 8 & 0xff) << 0x10 |
                (uVar1 >> 0x10 & 0xff) << 8 | uVar1 >> 0x18;
        }
    } else if (param_3 == 0) {
        uVar2 = __strdup();
        *(undefined4 *)(param_1 + 0x134) = uVar2;
    } else {
        uVar1 = *(uint *)(param_1 + 0x44);
        uVar1 = param_3 + (uVar1 << 0x18 | (uVar1 >> 8 & 0xff) << 0x10 |
                           (uVar1 >> 0x10 & 0xff) << 8 | uVar1 >> 0x18);
        *(uint *)(param_1 + 0x44) = uVar1 * 0x1000000 |
                                    (uVar1 >> 8 & 0xff) << 0x10 |
                                    (uVar1 >> 0x10 & 0xff) << 8 | uVar1 >> 0x18;
        FUN_00022cd8(local_1c, *(undefined4 *)(param_2 + 0x134), 4);
        uVar1 =
            param_3 + (local_1c[0] << 0x18 | (local_1c[0] >> 8 & 0xff) << 0x10 |
                       (local_1c[0] >> 0x10 & 0xff) << 8 | local_1c[0] >> 0x18);
        local_1c[0] = uVar1 * 0x1000000 | (uVar1 >> 8 & 0xff) << 0x10 |
                      (uVar1 >> 0x10 & 0xff) << 8 | uVar1 >> 0x18;
        uVar2 = FUN_00022c24(local_1c, 4);
        *(undefined4 *)(param_1 + 0x134) = uVar2;
    }
    if (*(int *)(param_2 + 0x148) != 0) {
        uVar2 = __strdup();
        *(undefined4 *)(param_1 + 0x148) = uVar2;
    }
    *(undefined4 *)(param_1 + 0x1bc) = *(undefined4 *)(param_2 + 0x1bc);
    return;
}

void FUN_0002cba8(undefined4 *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    void *__ptr;
    char acStack_808[2040];

    __ptr = (void *)*param_1;
    if (__ptr != (void *)0x0) {
        FUN_0002ca54(__ptr);
        free(__ptr);
        *param_1 = 0;
        return;
    }
    if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
        (DAT_00067db4 < 3)) {
        return;
    }
    snprintf(acStack_808, 0x800,
             "Free work called with NULL work from %s %s:%d", param_2, param_3,
             param_4);
    FUN_00020f58(3, acStack_808, 0);
    return;
}

undefined4 FUN_0002cc3c(int param_1)

{
    undefined4 uVar1;
    undefined4 extraout_s1;
    undefined1 auStack_10[8];
    double dVar2;

    if (*(int *)(param_1 + 0x170) == 0) {
        dVar2 = DAT_00068720;
        if (DAT_00068720 < 1.0) {
            dVar2 = 0.0;
        }
        return SUB84(dVar2, 0);
    }
    FUN_000239a4(auStack_10);
    uVar1 = FUN_00023c94(auStack_10, param_1 + 0x170);
    dVar2 = (double)CONCAT44(extraout_s1, uVar1);
    if (dVar2 < 1.0) {
        dVar2 = 0.0;
    }
    return SUB84(dVar2, 0);
}

void FUN_0002cca0(void)

{
    undefined1 auStack_10[12];

    FUN_000239a4(auStack_10);
    FUN_00023c94(auStack_10, &DAT_00068fd8);
    return;
}

void FUN_0002ccc8(void)

{
    undefined1 auStack_10[12];

    FUN_000239a4(auStack_10);
    FUN_00023c94(auStack_10, &DAT_00068fe0);
    return;
}

void FUN_0002ccf0(undefined4 param_1, uint param_2)

{
    int iVar1;
    uint uVar2;
    int iVar3;
    undefined1 auStack_c08[1024];
    char acStack_808[2048];

    iVar1 = 4;
    iVar3 = 0;
    do {
        uVar2 = param_2 & 0xff;
        iVar1 = iVar1 + -1;
        param_2 = param_2 >> 8;
        iVar3 = uVar2 + iVar3 * 0x100;
    } while (iVar1 != 0);
    FUN_00022bb4(auStack_c08, param_1, 0x80);
    if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
        (DAT_00067db4 < 3)) {
        return;
    }
    snprintf(acStack_808, 0x800, "BENCHFILE nonce %u=0x%08x for work=%s", iVar3,
             iVar3, auStack_c08);
    FUN_00020f58(3, acStack_808, 0);
    return;
}

undefined4 FUN_0002cdf0(int param_1)

{
    undefined4 uVar1;
    double dVar2;
    double dVar3;
    double dVar4;
    double dVar5;

    if (param_1 != 0) {
        dVar4 = (double)FUN_0004a10c(*(undefined4 *)(param_1 + 0xd8),
                                     *(undefined4 *)(param_1 + 0xdc));
        dVar2 = (double)FUN_0004a10c(*(undefined4 *)(param_1 + 0xd0),
                                     *(undefined4 *)(param_1 + 0xd4));
        dVar3 = (double)FUN_0004a10c(*(undefined4 *)(param_1 + 200),
                                     *(undefined4 *)(param_1 + 0xcc));
        dVar5 = (double)FUN_0004a10c(*(undefined4 *)(param_1 + 0xc0),
                                     *(undefined4 *)(param_1 + 0xc4));
        dVar5 = dVar5 + dVar4 * 6.277101735386681e+57 +
                dVar2 * 3.402823669209385e+38 + dVar3 * 1.8446744073709552e+19;
        if (dVar5 != 0.0) {
            dVar5 = 2.695953529101131e+67 / dVar5;
            uVar1 =
                FUN_0004a1d8(SUB84(dVar5, 0), (int)((ulonglong)dVar5 >> 0x20));
            return uVar1;
        }
    }
    return 0;
}

void FUN_0002cea0(int *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    int iVar1;
    int iVar2;
    bool bVar3;
    char local_818[12];
    undefined4 uStack_80c;
    char local_808[2036];

    iVar1 = *param_1;
    if (iVar1 == 0) {
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (2 < DAT_00067db4)) {
            snprintf(local_818, 0x800,
                     "Discard work called with NULL work from %s %s:%d",
                     param_2, param_3, param_4);
            FUN_00020f58(3, local_818, 0);
        }
    } else {
        if (((*(char *)(iVar1 + 0x111) == '\0') &&
             (*(int *)(iVar1 + 0xf0) == 0)) &&
            (*(char *)(iVar1 + 0x110) == '\0')) {
            iVar2 = *(int *)(iVar1 + 0x104);
            if (iVar2 != 0) {
                *(int *)(iVar2 + 0x7c) = *(int *)(iVar2 + 0x7c) + 1;
                *(int *)(*(int *)(iVar1 + 0x104) + 0x40) =
                    *(int *)(*(int *)(iVar1 + 0x104) + 0x40) + -1;
                *(int *)(*(int *)(iVar1 + 0x104) + 0x44) =
                    *(int *)(*(int *)(iVar1 + 0x104) + 0x44) + -1;
            }
            bVar3 = 0xfffffffe < DAT_00073380;
            DAT_00073380 = DAT_00073380 + 1;
            DAT_00073384 = DAT_00073384 + (uint)bVar3;
            if ((DAT_00068bd5 != '\0') &&
                (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                  (6 < DAT_00067db4)))) {
                builtin_strncpy(local_818, "Discarded wo", 0xc);
                uStack_80c._0_3_ = 0x6b72;
                FUN_00020f58(7, local_818, 0);
            }
        } else if ((DAT_00068bd5 != '\0') &&
                   (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                     (6 < DAT_00067db4)))) {
            builtin_strncpy(local_818, "Discarded cl", 0xc);
            uStack_80c._0_1_ = 'o';
            uStack_80c._1_1_ = 'n';
            uStack_80c._2_1_ = 'e';
            uStack_80c._3_1_ = 'd';
            builtin_strncpy(local_808, " or rolled work", 0x10);
            FUN_00020f58(7, local_818, 0);
        }
        FUN_0002cba8(param_1, param_2, param_3, param_4);
    }
    return;
}

void FUN_0002d0d8(int *param_1)

{
    int *piVar1;
    int iVar3;
    int *piVar4;
    int iVar5;
    int iVar6;
    int *piVar2;

    iVar5 = DAT_000733cc;
    iVar6 = DAT_000733cc + -1;
    if (0 < DAT_000733cc) {
        piVar4 = DAT_000744c8 + DAT_000733cc;
        piVar1 = DAT_000744c8;
        do {
            piVar2 = piVar1 + 1;
            iVar3 = *(int *)(*piVar1 + 4);
            if (param_1[1] < iVar3) {
                *(int *)(*piVar1 + 4) = iVar3 + -1;
            }
            piVar1 = piVar2;
        } while (piVar2 != piVar4);
    }
    if (*param_1 < iVar6) {
        *(int *)DAT_000744c8[iVar6] = *param_1;
        DAT_000744c8[*param_1] = DAT_000744c8[iVar6];
        iVar5 = DAT_000733cc;
    }
    *param_1 = iVar5;
    *(undefined1 *)((int)param_1 + 0x69) = 1;
    DAT_000733cc = DAT_000733cc + -1;
    return;
}

void FUN_0002d174(FILE *param_1)

{
    char cVar1;
    undefined4 *puVar2;
    int iVar3;
    undefined2 *puVar4;
    undefined4 uVar5;
    char *__s;
    char *pcVar6;
    uint uVar7;
    undefined2 *puVar8;
    code *pcVar9;
    int iVar10;
    undefined4 *puVar11;
    int iVar12;
    undefined2 *puVar13;
    undefined1 *local_30;
    undefined1 *local_2c;

    fwrite(&DAT_00051c8c, 1, 0xd, param_1);
    if (0 < DAT_000733cc) {
        iVar12 = 0;
        do {
            iVar3 = FUN_0002b7bc(iVar12);
            iVar10 = *(int *)(iVar3 + 0x38);
            if (iVar10 == 1) {
                puVar13 = (undefined2 *)&DAT_0004d5c8;
                if (iVar12 != 0) {
                    puVar13 = (undefined2 *)&DAT_00051d10;
                }
                puVar8 = (undefined2 *)&DAT_0004d5c8;
                puVar4 = (undefined2 *)&DAT_0004d5c8;
                if (*(int *)(iVar3 + 0xb8) == 0) {
                    local_30 = &DAT_0004d5c8;
                } else {
                    FUN_00022b68(*(undefined4 *)(iVar3 + 0xb4));
                    local_30 = (undefined1 *)FUN_0002ad7c();
                    if (*(int *)(iVar3 + 0xb8) != 0) {
                        puVar4 = (undefined2 *)FUN_0002ad7c();
                        puVar8 = &DAT_0004a4ac;
                        if (*(int *)(iVar3 + 0xb8) == 0) {
                            puVar8 = (undefined2 *)&DAT_0004d5c8;
                        }
                    }
                }
                uVar5 = FUN_0002ad7c(*(undefined4 *)(iVar3 + 0xa4));
                fprintf(param_1, "%s\n\t{\n\t\t\"url\" : \"%s%s%s%s\",",
                        puVar13, local_30, puVar4, puVar8, uVar5);
                cVar1 = *(char *)(iVar3 + 0x244);
            } else {
                puVar13 = (undefined2 *)&DAT_0004d5c8;
                if (iVar12 != 0) {
                    puVar13 = (undefined2 *)&DAT_00051d10;
                }
                puVar8 = (undefined2 *)&DAT_0004d5c8;
                if (*(int *)(iVar3 + 0xb8) == 0) {
                    puVar4 = (undefined2 *)&DAT_0004d5c8;
                    local_2c = &DAT_0004d5c8;
                } else {
                    FUN_00022b68(*(undefined4 *)(iVar3 + 0xb4));
                    local_2c = (undefined1 *)FUN_0002ad7c();
                    if (*(int *)(iVar3 + 0xb8) == 0) {
                        iVar10 = *(int *)(iVar3 + 0x38);
                        puVar4 = (undefined2 *)&DAT_0004d5c8;
                    } else {
                        puVar4 = (undefined2 *)FUN_0002ad7c();
                        iVar10 = *(int *)(iVar3 + 0x38);
                        puVar8 = &DAT_0004a4ac;
                        if (*(int *)(iVar3 + 0xb8) == 0) {
                            puVar8 = (undefined2 *)&DAT_0004d5c8;
                        }
                    }
                }
                uVar5 = FUN_0002ad7c(*(undefined4 *)(iVar3 + 0xa4));
                fprintf(param_1, "%s\n\t{\n\t\t\"quota\" : \"%s%s%s%d;%s\",",
                        puVar13, local_2c, puVar4, puVar8, iVar10, uVar5);
                cVar1 = *(char *)(iVar3 + 0x244);
            }
            if (cVar1 != '\0') {
                fwrite("\n\t\t\"extranonce-subscribe\" : true,", 1, 0x21,
                       param_1);
            }
            iVar12 = iVar12 + 1;
            uVar5 = FUN_0002ad7c(*(undefined4 *)(iVar3 + 0xac));
            fprintf(param_1, "\n\t\t\"user\" : \"%s\",", uVar5);
            uVar5 = FUN_0002ad7c(*(undefined4 *)(iVar3 + 0xb0));
            fprintf(param_1, "\n\t\t\"pass\" : \"%s\"\n\t}", uVar5);
        } while (iVar12 < DAT_000733cc);
    }
    fwrite(&DAT_00051d28, 1, 3, param_1);
    puVar2 = &DAT_00067fe0;
    iVar12 = DAT_00067fe4;
    do {
        if (iVar12 == 0x10) {
            if (DAT_00068fd0 == 4) {
                fwrite(",\n\"balance\" : true", 1, 0x12, param_1);
            }
            if (DAT_00068fd0 == 3) {
                fwrite(",\n\"load-balance\" : true", 1, 0x17, param_1);
            }
            if (DAT_00068fd0 == 1) {
                fwrite(",\n\"round-robin\" : true", 1, 0x16, param_1);
            }
            if (DAT_00068fd0 == 2) {
                fprintf(param_1, ",\n\"rotate\" : \"%d\"", DAT_00073464);
            }
            fwrite(&DAT_00051dc4, 1, 3, param_1);
            puVar2 = DAT_00068df0;
            DAT_00068df0 = (undefined4 *)0x0;
            while (puVar2 != (undefined4 *)0x0) {
                puVar11 = (undefined4 *)puVar2[1];
                free((void *)*puVar2);
                free(puVar2);
                puVar2 = puVar11;
            }
            return;
        }
        __s = (char *)__strdup(*puVar2);
        pcVar6 = strtok(__s, "|");
        while (pcVar6 != (char *)0x0) {
            if ((pcVar6[1] == '-') &&
                ((undefined4 *)puVar2[6] != &DAT_00076870)) {
                uVar7 = puVar2[1];
                if ((uVar7 & 1) != 0) {
                    pcVar9 = (code *)puVar2[2];
                    if ((pcVar9 == FUN_00040068 ||
                         pcVar9 == (code *)&UNK_00040088) &&
                        ((bool)*(char *)puVar2[5] ==
                         (pcVar9 == FUN_00040068))) {
                        fprintf(param_1, ",\n\"%s\" : true", pcVar6 + 2);
                        goto LAB_0002d518;
                    }
                }
                if ((uVar7 & 2) == 0) {
                LAB_0002d594:
                    if ((((uVar7 & 6) != 0) &&
                         ((int *)puVar2[5] != (int *)&DAT_00068fe8)) &&
                        (*(int *)puVar2[5] != 0)) {
                        uVar5 = FUN_0002ad7c();
                        fprintf(param_1, ",\n\"%s\" : \"%s\"", pcVar6 + 2,
                                uVar5);
                    }
                } else {
                    pcVar9 = (code *)puVar2[3];
                    if (pcVar9 == FUN_0002c298 ||
                        (pcVar9 == FUN_0002c2c8 ||
                         (pcVar9 == FUN_0002c2f8 ||
                          (pcVar9 == FUN_0002c328 ||
                           (pcVar9 == FUN_0002c358 ||
                            (pcVar9 == FUN_0002c388 ||
                             (pcVar9 == FUN_0002c3b4 ||
                              (pcVar9 == FUN_0002c3e0 ||
                               (pcVar9 == FUN_0002c40c ||
                                (pcVar9 == FUN_0002c43c ||
                                 (pcVar9 == FUN_0002c468 ||
                                  (pcVar9 == FUN_0002c494 ||
                                   (pcVar9 == FUN_0002c4c4 ||
                                    (pcVar9 == FUN_0002c264 ||
                                     (pcVar9 == FUN_0002c234 ||
                                      pcVar9 == FUN_00040268))))))))))))))) {
                        fprintf(param_1, ",\n\"%s\" : \"%d\"", pcVar6 + 2,
                                *(undefined4 *)puVar2[5]);
                    } else {
                        if (pcVar9 != FUN_0002bef8 && pcVar9 != FUN_0002bea0)
                            goto LAB_0002d594;
                        fprintf(param_1, ",\n\"%s\" : \"%.1f\"", pcVar6 + 2,
                                (float *)puVar2[5],
                                (double)*(float *)puVar2[5]);
                    }
                }
            }
        LAB_0002d518:
            pcVar6 = strtok((char *)0x0, "|");
        }
        free(__s);
        iVar12 = puVar2[8];
        puVar2 = puVar2 + 7;
    } while (true);
}

void FUN_0002d75c(void)

{
    int *piVar1;
    int iVar3;
    int *piVar4;
    int *piVar2;

    DAT_00068728 = 0;
    DAT_0006872c = 0;
    DAT_00068ff0 = 0;
    DAT_00068ff4 = 0;
    FUN_0002aef8(0, 0, &DAT_00068728, 8, 0);
    if (0 < DAT_000733cc) {
        piVar4 = DAT_000744c8 + DAT_000733cc;
        piVar1 = DAT_000744c8;
        do {
            piVar2 = piVar1 + 1;
            iVar3 = *piVar1;
            *(undefined4 *)(iVar3 + 0x170) = 0;
            *(undefined4 *)(iVar3 + 0x174) = 0;
            piVar1 = piVar2;
        } while (piVar2 != piVar4);
    }
    return;
}

void FUN_0002d7f4(char *param_1)

{
    char *pcVar1;
    size_t sVar2;

    if ((DAT_00073478 != (char *)0x0) && (*DAT_00073478 != '\0')) {
        strcpy(param_1, DAT_00073478);
        return;
    }
    pcVar1 = getenv("HOME");
    if ((pcVar1 == (char *)0x0) || (pcVar1 = getenv("HOME"), *pcVar1 == '\0')) {
        *param_1 = '\0';
    } else {
        pcVar1 = getenv("HOME");
        pcVar1 = stpcpy(param_1, pcVar1);
        pcVar1[0] = '/';
        pcVar1[1] = '\0';
    }
    sVar2 = strlen(param_1);
    builtin_strncpy(param_1 + sVar2, ".bmminer/", 10);
    mkdir(param_1, 0x1ff);
    sVar2 = strlen(param_1);
    builtin_strncpy(param_1 + sVar2, "bmminer.conf", 0xd);
    return;
}

void FUN_0002d8f0(void)

{
    int iVar1;

    DAT_00068ef4 =
        (char *)FUN_000229bc(0x1000, "cgminer.c", "load_default_config", 0x865);
    FUN_0002d7f4();
    iVar1 = access(DAT_00068ef4, 4);
    if (iVar1 != 0) {
        free(DAT_00068ef4);
        DAT_00068ef4 = (char *)0x0;
        return;
    }
    FUN_0002b890();
    return;
}

void FUN_0002d950(undefined4 param_1)

{
    void *__ptr;
    double in_d0;
    double dVar1;
    double dVar2;
    undefined8 uVar3;
    undefined8 local_850;
    undefined8 local_848;
    undefined8 local_840;
    undefined8 local_838;
    char local_830[28];
    undefined2 uStack_814;
    undefined1 local_812;

    if (in_d0 == 0.0) {
        if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
            (DAT_00067db4 < 3)) {
            local_850 = 0;
            local_848 = 0;
            local_840 = 0;
            uVar3 = 0xffff0000;
        } else {
            uVar3 = 0xffff0000;
            builtin_strncpy(local_830, "Diff zero passed to set_targ", 0x1c);
            uStack_814 = 0x7465;
            local_812 = 0;
            FUN_00020f58(3, local_830, 0);
            local_850 = 0;
            local_848 = 0;
            local_840 = 0;
        }
    } else {
        dVar1 = (2.695953529101131e+67 / in_d0) * 1.5930919111324523e-58;
        uVar3 = FUN_0004a1d8(SUB84(dVar1, 0), (int)((ulonglong)dVar1 >> 0x20));
        dVar1 = (double)FUN_0004a10c();
        dVar2 = 2.695953529101131e+67 / in_d0 - dVar1 * 6.277101735386681e+57;
        dVar1 = dVar2 * 2.938735877055719e-39;
        local_840 =
            FUN_0004a1d8(SUB84(dVar1, 0), (int)((ulonglong)dVar1 >> 0x20));
        dVar1 = (double)FUN_0004a10c();
        dVar2 = dVar2 - dVar1 * 3.402823669209385e+38;
        dVar1 = dVar2 * 5.421010862427522e-20;
        local_848 =
            FUN_0004a1d8(SUB84(dVar1, 0), (int)((ulonglong)dVar1 >> 0x20));
        dVar1 = (double)FUN_0004a10c();
        dVar2 = dVar2 - dVar1 * 1.8446744073709552e+19;
        local_850 =
            FUN_0004a1d8(SUB84(dVar2, 0), (int)((ulonglong)dVar2 >> 0x20));
    }
    local_838 = uVar3;
    if (DAT_00068bd5 != '\0') {
        __ptr = (void *)FUN_00022c24(&local_850, 0x20);
        if ((DAT_00068bd5 != '\0') &&
            (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
              (6 < DAT_00067db4)))) {
            snprintf(local_830, 0x800, "Generated target %s", __ptr);
            FUN_00020f58(7, local_830, 0);
        }
        free(__ptr);
    }
    FUN_000254e8(param_1, &local_850, 0x20, "cgminer.c", "set_target", 0x207c);
    return;
}

bool FUN_0002dbfc(int param_1, undefined4 param_2)

{
    *(undefined4 *)(param_1 + 0x4c) = param_2;
    FUN_0002b350();
    return *(int *)(param_1 + 0xdc) == 0;
}

uint FUN_0002dc1c(int param_1, undefined4 param_2)

{
    uint uVar1;
    uint uVar2;
    uint uVar3;
    uint uVar4;
    bool bVar5;
    bool bVar6;
    double in_d0;
    longlong lVar7;

    *(undefined4 *)(param_1 + 0x4c) = param_2;
    FUN_0002b350();
    lVar7 = FUN_0004a1d8(SUB84(4294901760.0 / in_d0, 0),
                         (int)((ulonglong)(4294901760.0 / in_d0) >> 0x20));
    uVar2 = (uint)((ulonglong)lVar7 >> 0x20);
    uVar1 = (uint)lVar7;
    uVar3 = *(uint *)(param_1 + 0xd8);
    uVar4 = *(uint *)(param_1 + 0xdc);
    bVar6 = uVar2 <= uVar4;
    if (uVar4 == uVar2) {
        bVar6 = uVar1 <= uVar3;
    }
    bVar5 = uVar3 != uVar1;
    if (!bVar6 || lVar7 == *(longlong *)(param_1 + 0xd8)) {
        uVar1 = 1;
    }
    if (bVar6 && (uVar4 != uVar2 || bVar5)) {
        uVar1 = 0;
    }
    return uVar1;
}

undefined4 FUN_0002dc68(int param_1, int param_2)

{
    int iVar1;
    char acStack_808[2052];

    iVar1 = *(int *)(param_1 + 0x24);
    if (*(int *)(iVar1 + 0xec) != param_2) {
        *(int *)(iVar1 + 0xec) = param_2;
        return 1;
    }
    if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
        (DAT_00067db4 < 6)) {
        return 0;
    }
    snprintf(acStack_808, 0x800, "%s %d duplicate share detected as HW error",
             *(undefined4 *)(*(int *)(iVar1 + 4) + 8),
             *(undefined4 *)(iVar1 + 8));
    FUN_00020f58(6, acStack_808, 0);
    return 0;
}

void FUN_0002dd0c(undefined4 *param_1, undefined4 param_2)

{
    void *__ptr;
    void *__ptr_00;
    void *__ptr_01;
    void *__ptr_02;
    void *__ptr_03;
    void *__ptr_04;
    void *__ptr_05;
    void *__ptr_06;
    size_t __size;
    undefined4 uVar1;
    undefined4 uVar2;
    undefined4 uVar3;
    undefined4 *puVar4;
    undefined4 *puVar5;
    undefined4 *puVar6;
    undefined4 local_4c8;
    undefined4 uStack_4c4;
    undefined4 uStack_4c0;
    undefined4 uStack_4bc;
    undefined4 local_4b8;
    undefined4 uStack_4b4;
    undefined4 uStack_4b0;
    undefined4 uStack_4ac;
    undefined4 local_4a8;
    undefined4 uStack_4a4;
    undefined4 uStack_4a0;
    undefined4 local_49c;
    undefined4 uStack_498;
    undefined4 local_494;
    undefined4 local_490;
    undefined4 local_48c;
    undefined4 local_488;
    undefined4 uStack_484;
    undefined4 uStack_480;
    undefined4 uStack_47c;
    undefined4 local_478;
    undefined4 uStack_474;
    undefined4 uStack_470;
    undefined4 uStack_46c;
    undefined4 local_468[16];
    char acStack_428[1028];

    if (DAT_00068ff8 == (FILE *)0x0) {
        DAT_00068ff8 = fopen64("/nvdata/worklog.txt", "wb");
    }
    memset(acStack_428, 0, 0x400);
    local_49c = 0;
    uStack_498 = 0;
    local_494 = 0;
    local_490 = 0;
    local_48c = 0;
    puVar4 = local_468;
    puVar6 = param_1;
    do {
        puVar5 = puVar6;
        puVar6 = puVar5 + 4;
        uVar1 = puVar5[1];
        uVar2 = puVar5[2];
        uVar3 = puVar5[3];
        *puVar4 = *puVar5;
        puVar4[1] = uVar1;
        puVar4[2] = uVar2;
        puVar4[3] = uVar3;
        puVar4 = puVar4 + 4;
    } while (puVar6 != param_1 + 0x10);
    local_4c8 = param_1[0x20];
    uStack_4c4 = param_1[0x21];
    uStack_4c0 = param_1[0x22];
    uStack_4bc = param_1[0x23];
    local_4b8 = param_1[0x24];
    uStack_4b4 = param_1[0x25];
    uStack_4b0 = param_1[0x26];
    uStack_4ac = param_1[0x27];
    local_4a8 = *puVar6;
    uStack_4a4 = puVar5[5];
    uStack_4a0 = puVar5[6];
    local_488 = param_1[0x30];
    uStack_484 = param_1[0x31];
    uStack_47c = param_1[0x33];
    uStack_480 = param_1[0x32];
    local_478 = param_1[0x34];
    uStack_474 = param_1[0x35];
    uStack_470 = param_1[0x36];
    uStack_46c = param_1[0x37];
    FUN_00029ef4(local_468, 0x40);
    FUN_00029ef4(&local_4c8, 0x20);
    FUN_00029ef4(&local_4a8, 0xc);
    FUN_00029ef4(&local_488, 0x20);
    __ptr = (void *)FUN_00022c24(param_1, 0x80);
    __ptr_00 = (void *)FUN_00022c24(local_468, 0x40);
    __ptr_01 = (void *)FUN_00022c24(&local_4c8, 0x20);
    __ptr_02 = (void *)FUN_00022c24(&local_4a8, 0xc);
    __ptr_03 = (void *)FUN_00022c24(param_2, 4);
    __ptr_04 = (void *)FUN_00022c24(param_2, 5);
    __ptr_05 = (void *)FUN_00022c24(&local_488, 0x20);
    __ptr_06 = (void *)FUN_00022c24(param_1 + 0x6f, 4);
    sprintf(acStack_428, "midstate %s data %s nonce %s version %s \r\n",
            __ptr_01, __ptr_02, __ptr_03, __ptr_06);
    __size = strlen(acStack_428);
    fwrite(acStack_428, __size, 1, DAT_00068ff8);
    fflush(DAT_00068ff8);
    if (__ptr != (void *)0x0) {
        free(__ptr);
    }
    if (__ptr_00 != (void *)0x0) {
        free(__ptr_00);
    }
    if (__ptr_01 != (void *)0x0) {
        free(__ptr_01);
    }
    if (__ptr_02 != (void *)0x0) {
        free(__ptr_02);
    }
    if (__ptr_03 != (void *)0x0) {
        free(__ptr_03);
    }
    if (__ptr_04 != (void *)0x0) {
        free(__ptr_04);
    }
    if (__ptr_05 != (void *)0x0) {
        free(__ptr_05);
    }
    if (__ptr_06 != (void *)0x0) {
        free(__ptr_06);
    }
    return;
}

void FUN_0002dfc0(void)

{
    FUN_0002dd0c();
    return;
}

bool FUN_0002dfe8(int param_1, undefined4 param_2)

{
    bool bVar1;

    *(undefined4 *)(param_1 + 0x4c) = param_2;
    FUN_0002b350();
    bVar1 = *(int *)(param_1 + 0xdc) == 0;
    if (bVar1) {
        FUN_0002dd0c(param_1);
    }
    return bVar1;
}

void FUN_0002e034(int param_1, int param_2)

{
    void *pvVar1;
    uint uVar2;
    uint uVar3;
    int iVar4;
    int *piVar5;
    uint uVar6;
    undefined4 uVar7;
    int iVar8;
    int iVar9;
    undefined4 *puVar10;
    int iVar11;
    uint local_2c;

    *(int *)(param_1 + 0x168) = *(int *)(param_1 + 0x168) + 1;
    *(int *)(param_2 + 0x16c) = param_2 + 0x154;
    *(undefined4 *)(param_2 + 0x170) = 4;
    uVar2 = *(byte *)(param_2 + 0x154) + 0x112410d +
                (uint) * (byte *)(param_2 + 0x157) * 0x1000000 +
                (uint) * (byte *)(param_2 + 0x156) * 0x10000 +
                (uint) * (byte *)(param_2 + 0x155) * 0x100 ^
            0x7f76d;
    uVar6 = 0x9f49bac6 - uVar2 ^ uVar2 << 8;
    uVar3 = (-0x112410d - uVar2) - uVar6 ^ uVar6 >> 0xd;
    uVar2 = (uVar2 - uVar6) - uVar3 ^ uVar3 >> 0xc;
    uVar6 = (uVar6 - uVar3) - uVar2 ^ uVar2 << 0x10;
    uVar3 = (uVar3 - uVar2) - uVar6 ^ uVar6 >> 5;
    uVar2 = (uVar2 - uVar6) - uVar3 ^ uVar3 >> 3;
    uVar6 = (uVar6 - uVar3) - uVar2 ^ uVar2 << 10;
    uVar2 = (uVar3 - uVar2) - uVar6 ^ uVar6 >> 0xf;
    *(uint *)(param_2 + 0x174) = uVar2;
    if (*(int *)(param_1 + 0x160) == 0) {
        *(undefined4 *)(param_2 + 0x160) = 0;
        *(undefined4 *)(param_2 + 0x15c) = 0;
        *(int *)(param_1 + 0x160) = param_2;
        pvVar1 = malloc(0x2c);
        *(void **)(param_2 + 0x158) = pvVar1;
        pvVar1 = *(void **)(*(int *)(param_1 + 0x160) + 0x158);
        if (pvVar1 == (void *)0x0)
            goto LAB_0002e464;
        memset(pvVar1, 0, 0x2c);
        piVar5 = (int *)(*(int *)(param_1 + 0x160) + 0x158);
        *(int **)(*piVar5 + 0x10) = piVar5;
        *(undefined4 *)(*(int *)(*(int *)(param_1 + 0x160) + 0x158) + 4) = 0x20;
        *(undefined4 *)(*(int *)(*(int *)(param_1 + 0x160) + 0x158) + 8) = 5;
        *(undefined4 *)(*(int *)(*(int *)(param_1 + 0x160) + 0x158) + 0x14) =
            0x158;
        puVar10 = *(undefined4 **)(*(int *)(param_1 + 0x160) + 0x158);
        pvVar1 = malloc(0x180);
        *puVar10 = pvVar1;
        pvVar1 = (void *)**(undefined4 **)(*(int *)(param_1 + 0x160) + 0x158);
        if (pvVar1 == (void *)0x0)
            goto LAB_0002e464;
        memset(pvVar1, 0, 0x180);
        *(undefined4 *)(*(int *)(*(int *)(param_1 + 0x160) + 0x158) + 0x28) =
            0xa0111fe1;
    } else {
        uVar7 = *(undefined4 *)(*(int *)(param_1 + 0x160) + 0x158);
        *(undefined4 *)(param_2 + 0x160) = 0;
        *(undefined4 *)(param_2 + 0x158) = uVar7;
        iVar4 = *(int *)(*(int *)(param_1 + 0x160) + 0x158);
        *(int *)(param_2 + 0x15c) =
            *(int *)(iVar4 + 0x10) - *(int *)(iVar4 + 0x14);
        *(int *)(*(int *)(*(int *)(*(int *)(param_1 + 0x160) + 0x158) + 0x10) +
                 8) = param_2;
        *(int *)(*(int *)(*(int *)(param_1 + 0x160) + 0x158) + 0x10) =
            param_2 + 0x158;
    }
    iVar4 = *(int *)(*(int *)(param_1 + 0x160) + 0x158);
    *(int *)(iVar4 + 0xc) = *(int *)(iVar4 + 0xc) + 1;
    piVar5 = *(int **)(*(int *)(param_1 + 0x160) + 0x158);
    iVar4 = (uVar2 & piVar5[1] - 1U) * 0xc;
    iVar8 = *piVar5 + iVar4;
    *(int *)(iVar8 + 4) = *(int *)(iVar8 + 4) + 1;
    uVar7 =
        *(undefined4 *)(**(int **)(*(int *)(param_1 + 0x160) + 0x158) + iVar4);
    *(undefined4 *)(param_2 + 0x164) = 0;
    *(undefined4 *)(param_2 + 0x168) = uVar7;
    iVar8 = **(int **)(*(int *)(param_1 + 0x160) + 0x158);
    if (*(int *)(iVar8 + iVar4) != 0) {
        *(int *)(*(int *)(iVar8 + iVar4) + 0xc) = param_2 + 0x158;
        iVar8 = **(int **)(*(int *)(param_1 + 0x160) + 0x158);
    }
    *(int *)(iVar8 + iVar4) = param_2 + 0x158;
    iVar4 = **(int **)(*(int *)(param_1 + 0x160) + 0x158) + iVar4;
    if (((uint)((*(int *)(iVar4 + 8) + 1) * 10) <= *(uint *)(iVar4 + 4)) &&
        (iVar4 = *(int *)(param_2 + 0x158), *(int *)(iVar4 + 0x24) != 1)) {
        pvVar1 = calloc(*(int *)(iVar4 + 4) * 0x18, 1);
        if (pvVar1 == (void *)0x0) {
        LAB_0002e464:
            /* WARNING: Subroutine does not return */
            exit(-1);
        }
        iVar8 = 0;
        *(uint *)(iVar4 + 0x18) =
            (uint)((*(int *)(iVar4 + 4) * 2 - 1U & *(uint *)(iVar4 + 0xc)) !=
                   0) +
            (*(uint *)(iVar4 + 0xc) >> (*(int *)(iVar4 + 8) + 1U & 0xff));
        *(undefined4 *)(*(int *)(param_2 + 0x158) + 0x1c) = 0;
        piVar5 = *(int **)(param_2 + 0x158);
        uVar2 = piVar5[1];
        if (uVar2 != 0) {
            local_2c = 0;
            do {
                iVar4 = *(int *)(*piVar5 + iVar8);
                if (*(int *)(*piVar5 + iVar8) != 0) {
                    while (true) {
                        iVar11 = *(int *)(iVar4 + 0x10);
                        uVar3 = uVar2 * 2 - 1 & *(uint *)(iVar4 + 0x1c);
                        uVar2 = *(int *)((int)pvVar1 + uVar3 * 0xc + 4) + 1;
                        *(uint *)((int)pvVar1 + uVar3 * 0xc + 4) = uVar2;
                        if ((uint)piVar5[6] < uVar2) {
                            piVar5[7] = piVar5[7] + 1;
                            uVar7 = FUN_000498d8(
                                *(undefined4 *)((int)pvVar1 + uVar3 * 0xc + 4),
                                *(undefined4 *)(*(int *)(param_2 + 0x158) +
                                                0x18));
                            *(undefined4 *)((int)pvVar1 + uVar3 * 0xc + 8) =
                                uVar7;
                        }
                        *(undefined4 *)(iVar4 + 0xc) = 0;
                        *(undefined4 *)(iVar4 + 0x10) =
                            *(undefined4 *)((int)pvVar1 + uVar3 * 0xc);
                        iVar9 = *(int *)((int)pvVar1 + uVar3 * 0xc);
                        if (iVar9 != 0) {
                            *(int *)(iVar9 + 0xc) = iVar4;
                        }
                        *(int *)((int)pvVar1 + uVar3 * 0xc) = iVar4;
                        piVar5 = *(int **)(param_2 + 0x158);
                        if (iVar11 == 0)
                            break;
                        uVar2 = piVar5[1];
                        iVar4 = iVar11;
                    }
                    uVar2 = piVar5[1];
                }
                iVar8 = iVar8 + 0xc;
                local_2c = local_2c + 1;
            } while (local_2c < uVar2);
        }
        free((void *)*piVar5);
        *(int *)(*(int *)(param_2 + 0x158) + 4) =
            *(int *)(*(int *)(param_2 + 0x158) + 4) << 1;
        *(int *)(*(int *)(param_2 + 0x158) + 8) =
            *(int *)(*(int *)(param_2 + 0x158) + 8) + 1;
        **(undefined4 **)(param_2 + 0x158) = pvVar1;
        iVar4 = *(int *)(param_2 + 0x158);
        if (*(uint *)(iVar4 + 0xc) >> 1 < *(uint *)(iVar4 + 0x1c)) {
            iVar8 = *(int *)(iVar4 + 0x20) + 1;
        } else {
            iVar8 = 0;
        }
        *(int *)(iVar4 + 0x20) = iVar8;
        if (1 < *(uint *)(*(int *)(param_2 + 0x158) + 0x20)) {
            *(undefined4 *)(*(int *)(param_2 + 0x158) + 0x24) = 1;
        }
    }
    return;
}

int FUN_0002e46c(int param_1, void *param_2, size_t param_3, void *param_4,
                 int param_5, size_t param_6)

{
    int iVar1;
    int iVar2;

    if (param_1 != 0) {
        iVar2 = *(int *)(param_1 + 0x160);
        while (true) {
            iVar1 = memcmp((void *)(param_1 + 0x80), param_2, param_3);
            if (((iVar1 == 0) &&
                 (iVar1 = memcmp((void *)(param_1 + param_5), param_4, param_6),
                  iVar1 == 0)) ||
                (param_1 = iVar2, iVar2 == 0))
                break;
            iVar2 = *(int *)(iVar2 + 0x160);
        }
    }
    return param_1;
}

void FUN_0002e528(int param_1, int param_2)

{
    int iVar1;
    int *piVar2;
    int iVar3;
    int iVar4;
    undefined4 *puVar5;

    *(int *)(param_1 + 0x168) = *(int *)(param_1 + 0x168) + -1;
    iVar1 = *(int *)(param_2 + 0x15c);
    if (iVar1 == 0) {
        iVar4 = *(int *)(param_2 + 0x160);
        puVar5 = *(undefined4 **)(*(int *)(param_1 + 0x160) + 0x158);
        if (iVar4 == 0) {
            free((void *)*puVar5);
            free(*(void **)(*(int *)(param_1 + 0x160) + 0x158));
            *(undefined4 *)(param_1 + 0x160) = 0;
            return;
        }
        iVar3 = puVar5[5];
        if (param_2 == puVar5[4] - iVar3)
            goto LAB_0002e61c;
    LAB_0002e668:
        *(int *)(param_1 + 0x160) = iVar4;
    } else {
        puVar5 = *(undefined4 **)(*(int *)(param_1 + 0x160) + 0x158);
        iVar3 = puVar5[5];
        if (param_2 == puVar5[4] - iVar3) {
        LAB_0002e61c:
            puVar5[4] = iVar1 + iVar3;
            iVar1 = *(int *)(param_2 + 0x15c);
            if (iVar1 == 0) {
                iVar4 = *(int *)(param_2 + 0x160);
                goto LAB_0002e668;
            }
            iVar3 =
                *(int *)(*(int *)(*(int *)(param_1 + 0x160) + 0x158) + 0x14);
        }
        *(undefined4 *)(iVar1 + iVar3 + 8) = *(undefined4 *)(param_2 + 0x160);
        iVar4 = *(int *)(param_1 + 0x160);
    }
    piVar2 = *(int **)(iVar4 + 0x158);
    if (*(int *)(param_2 + 0x160) != 0) {
        *(undefined4 *)(*(int *)(param_2 + 0x160) + piVar2[5] + 4) =
            *(undefined4 *)(param_2 + 0x15c);
        piVar2 = *(int **)(*(int *)(param_1 + 0x160) + 0x158);
    }
    iVar1 = (piVar2[1] - 1U & *(uint *)(param_2 + 0x174)) * 0xc;
    *(int *)(*piVar2 + iVar1 + 4) = *(int *)(*piVar2 + iVar1 + 4) + -1;
    iVar4 = **(int **)(*(int *)(param_1 + 0x160) + 0x158);
    if (*(int *)(iVar4 + iVar1) == param_2 + 0x158) {
        *(undefined4 *)(iVar4 + iVar1) = *(undefined4 *)(param_2 + 0x168);
    }
    iVar1 = *(int *)(param_2 + 0x168);
    if (*(int *)(param_2 + 0x164) != 0) {
        *(int *)(*(int *)(param_2 + 0x164) + 0x10) = iVar1;
        iVar1 = *(int *)(param_2 + 0x168);
    }
    if (iVar1 != 0) {
        *(undefined4 *)(iVar1 + 0xc) = *(undefined4 *)(param_2 + 0x164);
    }
    iVar1 = *(int *)(*(int *)(param_1 + 0x160) + 0x158);
    *(int *)(iVar1 + 0xc) = *(int *)(iVar1 + 0xc) + -1;
    return;
}

void FUN_0002e6b0(int param_1, int param_2)

{
    int iVar1;
    pthread_t local_c[2];

    iVar1 = pthread_create(local_c, (pthread_attr_t *)0x0, FUN_0002b63c,
                           (void *)0x0);
    if (iVar1 == 0) {
        if (param_2 != 0) {
            FUN_0003189c();
        }
        if (0 < DAT_00068ffc) {
            kill(DAT_00068ffc, 0xf);
            DAT_00068ffc = 0;
        }
        pthread_cancel(local_c[0]);
        /* WARNING: Subroutine does not return */
        exit(param_1);
    }
    /* WARNING: Subroutine does not return */
    exit(1);
}

void FUN_0002e730(void)

{
    char local_808[24];
    undefined2 local_7f0;

    FUN_0002541c(&DAT_00031ecc, 0, 5000);
    builtin_strncpy(local_808, "Shutdown signal received", 0x18);
    local_7f0 = 0x2e;
    FUN_00020f58(3, local_808, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(0, 1);
}

void FUN_0002e7d0(char *param_1, uint param_2, int param_3)

{
    size_t sVar1;
    size_t sVar2;
    undefined4 uVar3;
    undefined4 uVar4;
    undefined4 uVar5;
    undefined4 extraout_s1;
    double dVar6;
    undefined8 uVar7;
    undefined8 uVar8;
    undefined1 auStack_8a0[16];
    undefined1 auStack_890[16];
    char acStack_880[64];
    char acStack_840[2052];

    uVar5 = FUN_0002cc3c(param_3);
    FUN_0004a11c(*(undefined4 *)(param_3 + 0xc0),
                 *(undefined4 *)(param_3 + 0xc4));
    dVar6 = *(double *)(param_3 + 0x30) * 1000000.0;
    uVar7 = FUN_0004a1d8(SUB84(dVar6, 0), (int)((ulonglong)dVar6 >> 0x20));
    dVar6 =
        (*(double *)(param_3 + 0x50) / (double)CONCAT44(extraout_s1, uVar5)) *
        1000000.0;
    uVar8 = FUN_0004a1d8(SUB84(dVar6, 0), (int)((ulonglong)dVar6 >> 0x20));
    FUN_0002aef8((int)uVar8, (int)((ulonglong)uVar8 >> 0x20), auStack_8a0, 0x10,
                 4);
    FUN_0002aef8((int)uVar7, (int)((ulonglong)uVar7 >> 0x20), auStack_890, 0x10,
                 4);
    snprintf(param_1, param_2, "%s%d ",
             *(undefined4 *)(*(int *)(param_3 + 4) + 8),
             *(undefined4 *)(param_3 + 8));
    (**(code **)(*(int *)(param_3 + 4) + 0x14))(param_1, param_2, param_3);
    sVar1 = strlen(param_1);
    uVar5 = *(undefined4 *)(param_3 + 0x2c);
    uVar7 = *(undefined8 *)(param_3 + 0xd0);
    uVar3 = *(undefined4 *)(param_3 + 200);
    uVar4 = *(undefined4 *)(param_3 + 0xcc);
    snprintf(acStack_880, 0x40,
             "(%ds):%s (avg):%sh/s | A:%.0f R:%.0f HW:%d WU:%.1f/m",
             DAT_00068730, auStack_890, auStack_8a0, uVar3, uVar4, uVar7,
             uVar5);
    sVar2 = strlen(acStack_880);
    if (sVar1 + sVar2 < param_2) {
        strcat(param_1, acStack_880);
        (**(code **)(*(int *)(param_3 + 4) + 0x18))(param_1, param_2, param_3);
        return;
    }
    snprintf(acStack_840, 0x800, "tailsprintf buffer overflow in %s %s line %d",
             "cgminer.c", "get_statline", 0xc2e, uVar3, uVar4, uVar7, uVar5);
    FUN_00020f58(3, acStack_840, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

void FUN_0002e9a4(void)

{
    char local_808[2052];

    builtin_strncpy(local_808, "Failed to create restart thread", 0x20);
    FUN_00020f58(3, local_808, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

/* WARNING: Control flow encountered bad instruction data */

void FUN_0002e9e8(void)

{
    int iVar1;
    pthread_t apStack_c[2];

    FUN_000239a4(&DAT_00068fd8);
    iVar1 = pthread_create(apStack_c, (pthread_attr_t *)0x0, FUN_0003747c,
                           (void *)0x0);
    if (iVar1 == 0) {
        return;
    }
    FUN_0002e9a4();
    /* WARNING: Bad instruction - Truncating control flow here */
    halt_baddata();
}

uint FUN_0002ea28(void *param_1)

{
    char *pcVar1;
    char *pcVar2;
    byte *pbVar3;
    size_t sVar4;
    long lVar5;
    int iVar6;
    uint uVar7;
    int iVar8;
    FILE *pFVar9;
    uint uVar10;
    int iVar11;
    byte **ppbVar12;
    byte *pbVar13;
    int iVar14;
    byte *local_c3c[2];
    int local_c34;
    char *local_c30;
    char *local_c2c;
    byte local_c28[1024];
    char local_828[64];
    char acStack_7e8[64];
    char acStack_7a8[8];
    char acStack_7a0[1916];

    pFVar9 = DAT_00069000;
    if (DAT_00069000 == (FILE *)0x0) {
        if (DAT_000766c0 == (char *)0x0) {
            builtin_strncpy(local_828, "BENCHFILE Invalid benchfile NULL",
                            0x20);
            local_828[0x20] = 0;
            FUN_00020f58(3, local_828, 1);
            /* WARNING: Subroutine does not return */
            FUN_0002e6b0(1);
        }
        DAT_00069000 = fopen64(DAT_000766c0, "r");
        if (DAT_00069000 == (FILE *)0x0) {
            pcVar1 = "BENCHFILE Failed to open benchfile \'%s\'";
        } else {
            DAT_00069004 = pFVar9;
            pcVar1 = fgets((char *)local_c28, 0x400, DAT_00069000);
            if (pcVar1 != (char *)0x0)
                goto LAB_0002ea68;
            pcVar1 = "BENCHFILE Failed to read benchfile \'%s\'";
        }
    } else {
        pcVar1 = fgets((char *)local_c28, 0x400, DAT_00069000);
        pcVar2 = pcVar1;
        while (pFVar9 = DAT_00069008, pcVar2 != (char *)0x0) {
        LAB_0002ea68:
            DAT_00069008 = pFVar9;
            pbVar3 = local_c28;
            uVar7 = (uint)local_c28[0];
            uVar10 = uVar7 - 0x23;
            if (uVar10 != 0) {
                uVar10 = 1;
            }
            if (uVar7 == 0) {
                uVar10 = 0;
            }
            pFVar9 = (FILE *)((int)&DAT_00069004->_flags + 1);
            if (uVar7 == 0x2f) {
                uVar10 = 0;
            } else {
                uVar10 = uVar10 & 1;
            }
            DAT_00069004 = pFVar9;
            if (uVar10 != 0) {
                ppbVar12 = local_c3c;
                iVar11 = 0;
                local_c3c[0] = pbVar3;
                goto LAB_0002eba8;
            }
            pcVar2 = fgets((char *)pbVar3, 0x400, DAT_00069000);
            pcVar1 = (char *)0x0;
        }
        if (DAT_00069008 != (FILE *)0x0) {
            fclose(DAT_00069000);
            DAT_00069000 = (FILE *)pcVar1;
            uVar7 = FUN_0002ea28(param_1);
            return uVar7;
        }
        pcVar1 = "BENCHFILE No work in benchfile \'%s\'";
    }
    snprintf(local_828, 0x800, pcVar1, DAT_000766c0);
    goto LAB_0002eb08;
    while (true) {
        *pbVar3 = 0;
        pbVar3 = pbVar3 + 1;
        *ppbVar12 = pbVar3;
        iVar11 = iVar6;
        if (iVar6 == 4)
            break;
    LAB_0002eba8:
        pbVar3 = (byte *)strchr((char *)pbVar3, 0x2c);
        ppbVar12[1] = pbVar3;
        iVar6 = iVar11 + 1;
        if (pbVar3 == (byte *)0x0) {
            snprintf(local_828, 0x800,
                     "BENCHFILE Invalid input file line %d - field count is %d "
                     "but should be %d",
                     pFVar9, iVar6, 5);
            goto LAB_0002eb08;
        }
        pbVar13 = *ppbVar12;
        ppbVar12 = ppbVar12 + 1;
        iVar14 = (&DAT_0004eabc)[iVar11 * 2];
        iVar8 = iVar14 - ((int)pbVar3 - (int)pbVar13);
        if (iVar8 != 0) {
            iVar8 = 1;
        }
        if (iVar14 == 0) {
            iVar8 = 0;
        }
        if (iVar8 != 0) {
            snprintf(local_828, 0x800,
                     "BENCHFILE Invalid input file line %d field %d (%s) "
                     "length is %d but should be %d",
                     pFVar9, iVar6, (&DAT_0004eac0)[iVar11 * 2],
                     (int)pbVar3 - (int)pbVar13, iVar14);
            goto LAB_0002eb08;
        }
    }
    sVar4 = strlen(local_c2c);
    if (9 < sVar4) {
        sprintf(local_828, "0000000%c", (uint)*local_c3c[0]);
        sVar4 = strlen(local_828);
        pcVar1 = local_828 + sVar4;
        iVar11 = local_c34 + 0x38;
        do {
            iVar6 = iVar11 + -8;
            sprintf(pcVar1, "%.8s", iVar11);
            pcVar1 = pcVar1 + 8;
            iVar11 = iVar6;
        } while (local_c34 + -8 != iVar6);
        pcVar1 = acStack_7e8 + sVar4;
        iVar11 = (int)local_c3c[1] + 0x38;
        do {
            iVar6 = iVar11 + -8;
            sprintf(pcVar1, "%.8s", iVar11);
            pcVar1 = pcVar1 + 8;
            iVar11 = iVar6;
        } while ((int)local_c3c[1] + -8 != iVar6);
        lVar5 = strtol(local_c2c, (char **)0x0, 10);
        sprintf(acStack_7a8 + sVar4, "%08lx", lVar5);
        strcpy(acStack_7a0 + sVar4, local_c30);
        memset(param_1, 0, 0x1c0);
        FUN_00022cd8(param_1, local_828, (int)(sVar4 + 0x90) >> 1);
        FUN_0002b3a4(param_1);
        DAT_00069008 = (FILE *)((int)&DAT_00069008->_flags + 1);
        return uVar10;
    }
    snprintf(local_828, 0x800,
             "BENCHFILE Invalid input file line %d field %d (%s) length is %d "
             "but should be least %d",
             pFVar9, 5, "NonceTime", sVar4, 10);
LAB_0002eb08:
    FUN_00020f58(3, local_828, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

void FUN_0002ee34(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_808[2052];

    piVar1 = __errno_location();
    snprintf(acStack_808, 0x800,
             "Failed to pthread_mutex_init errno=%d in %s %s():%d", *piVar1,
             "cgminer.c", param_1, param_2);
    FUN_00020f58(3, acStack_808, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

void FUN_0002ee90(pthread_mutex_t *param_1, undefined4 param_2,
                  undefined4 param_3)

{
    int iVar1;
    int *piVar2;
    undefined8 uVar3;
    char acStack_818[2052];
    code *pcStack_14;

    iVar1 = pthread_mutex_init(param_1, (pthread_mutexattr_t *)0x0);
    if (iVar1 == 0) {
        return;
    }
    uVar3 = FUN_0002ee34(param_2, param_3);
    pcStack_14 = FUN_0002eeb8;
    piVar2 = __errno_location();
    snprintf(acStack_818, 0x800,
             "Failed to pthread_rwlock_init errno=%d in %s %s():%d", *piVar2,
             "cgminer.c", (int)uVar3, (int)((ulonglong)uVar3 >> 0x20));
    FUN_00020f58(3, acStack_818, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

void FUN_0002eeb8(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_808[2052];

    piVar1 = __errno_location();
    snprintf(acStack_808, 0x800,
             "Failed to pthread_rwlock_init errno=%d in %s %s():%d", *piVar1,
             "cgminer.c", param_1, param_2);
    FUN_00020f58(3, acStack_808, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

void FUN_0002ef14(pthread_rwlock_t *param_1, undefined4 param_2,
                  undefined4 param_3)

{
    int iVar1;
    int *piVar2;
    undefined4 uVar3;
    undefined4 extraout_r2;
    undefined8 uVar4;
    char acStack_828[2052];
    code *pcStack_24;
    undefined4 uStack_20;
    undefined4 uStack_1c;

    iVar1 = pthread_rwlock_init(param_1, (pthread_rwlockattr_t *)0x0);
    if (iVar1 == 0) {
        return;
    }
    uVar4 = FUN_0002eeb8(param_2, param_3);
    uVar3 = (undefined4)((ulonglong)uVar4 >> 0x20);
    uStack_20 = param_2;
    uStack_1c = param_3;
    iVar1 = pthread_mutex_init((pthread_mutex_t *)uVar4,
                               (pthread_mutexattr_t *)0x0);
    if (iVar1 == 0) {
        iVar1 = pthread_rwlock_init(
            (pthread_rwlock_t *)((pthread_mutex_t *)uVar4 + 1),
            (pthread_rwlockattr_t *)0x0);
        if (iVar1 == 0) {
            return;
        }
        FUN_0002eeb8(uVar3, extraout_r2);
    }
    uVar4 = FUN_0002ee34(uVar3, extraout_r2);
    pcStack_24 = FUN_0002ef84;
    piVar2 = __errno_location();
    snprintf(acStack_828, 0x800,
             "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d", *piVar2,
             "cgminer.c", (int)uVar4, (int)((ulonglong)uVar4 >> 0x20));
    FUN_00020f58(3, acStack_828, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

void FUN_0002ef3c(pthread_mutex_t *param_1, undefined4 param_2,
                  undefined4 param_3)

{
    int iVar1;
    int *piVar2;
    undefined8 uVar3;
    char acStack_818[2052];
    code *pcStack_14;

    iVar1 = pthread_mutex_init(param_1, (pthread_mutexattr_t *)0x0);
    if (iVar1 == 0) {
        iVar1 = pthread_rwlock_init((pthread_rwlock_t *)(param_1 + 1),
                                    (pthread_rwlockattr_t *)0x0);
        if (iVar1 == 0) {
            return;
        }
        FUN_0002eeb8(param_2, param_3);
    }
    uVar3 = FUN_0002ee34(param_2, param_3);
    pcStack_14 = FUN_0002ef84;
    piVar2 = __errno_location();
    snprintf(acStack_818, 0x800,
             "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d", *piVar2,
             "cgminer.c", (int)uVar3, (int)((ulonglong)uVar3 >> 0x20));
    FUN_00020f58(3, acStack_818, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

void FUN_0002ef84(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_808[2052];

    piVar1 = __errno_location();
    snprintf(acStack_808, 0x800,
             "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d", *piVar1,
             "cgminer.c", param_1, param_2);
    FUN_00020f58(3, acStack_808, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

void FUN_0002efe0(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_808[2052];

    piVar1 = __errno_location();
    snprintf(acStack_808, 0x800,
             "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar1,
             "cgminer.c", param_1, param_2);
    FUN_00020f58(3, acStack_808, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

void FUN_0002f03c(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_808[2052];

    piVar1 = __errno_location();
    snprintf(acStack_808, 0x800,
             "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar1,
             "cgminer.c", param_1, param_2);
    FUN_00020f58(3, acStack_808, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

undefined1 FUN_0002f098(int param_1, undefined1 *param_2)

{
    undefined1 uVar1;
    int iVar2;

    iVar2 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xbc));
    if (iVar2 == 0) {
        uVar1 = *param_2;
        *param_2 = 1;
        iVar2 = pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0xbc));
        if (iVar2 == 0) {
            (*DAT_00067ed8)();
            return uVar1;
        }
    } else {
        FUN_0002efe0("pool_tset", 0x328);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002f03c("pool_tset", 0x32d);
}

void FUN_0002f104(undefined4 param_1, undefined4 param_2)

{
    int iVar1;

    iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_000766c4);
    if (iVar1 == 0) {
        DAT_00075580 = param_1;
        DAT_00075584 = param_2;
        iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000766c4);
        if (iVar1 == 0) {
            /* WARNING: Could not recover jumptable at 0x0002f160. Too many
             * branches */
            /* WARNING: Treating indirect jump as call */
            (*DAT_00067ed8)();
            return;
        }
    } else {
        FUN_0002efe0("inc_dev_status", 0x224f);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002f03c("inc_dev_status", 0x2252);
}

undefined1 FUN_0002f180(int param_1, undefined1 *param_2)

{
    undefined1 uVar1;
    int iVar2;

    iVar2 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xbc));
    if (iVar2 == 0) {
        uVar1 = *param_2;
        *param_2 = 0;
        iVar2 = pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0xbc));
        if (iVar2 == 0) {
            (*DAT_00067ed8)();
            return uVar1;
        }
    } else {
        FUN_0002efe0("pool_tclear", 0x337);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002f03c("pool_tclear", 0x33c);
}

uint FUN_0002f1e8(undefined4 *param_1, int param_2)

{
    char cVar1;
    int iVar2;
    undefined4 uVar3;
    size_t __n;
    uint uVar4;
    char *pcVar5;
    undefined1 auStack_830[8];
    undefined1 auStack_828[8];
    undefined4 local_820;
    undefined4 uStack_81c;
    undefined4 uStack_818;
    undefined4 uStack_814;
    undefined4 local_810;
    undefined4 uStack_80c;
    undefined4 uStack_808;
    undefined4 uStack_804;
    undefined1 local_800;
    char acStack_7fc[24];
    undefined2 uStack_7e4;
    undefined1 local_7e2;

    if (*(char *)(param_1 + 0xb8) == '\0') {
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (5 < DAT_00067db4)) {
            snprintf((char *)&local_820, 0x800, "Testing pool %s",
                     param_1[0x29]);
            FUN_00020f58(6, &local_820, 0);
        }
    } else if ((DAT_00068bd5 != '\0') &&
               (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                 (6 < DAT_00067db4)))) {
        snprintf((char *)&local_820, 0x800,
                 "Retrieving block template from pool %s", param_1[0x29]);
        FUN_00020f58(7, &local_820, 0);
    }
    if (*(char *)(param_1 + 0xa0) == '\0') {
        uVar4 = 0;
        if (DAT_00068734 == 0) {
            if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                (DAT_00067db4 < 3)) {
                return 0;
            }
            local_820._0_1_ = 'C';
            local_820._1_1_ = 'U';
            local_820._2_1_ = 'R';
            local_820._3_1_ = 'L';
            uStack_81c._0_1_ = ' ';
            uStack_81c._1_1_ = 'i';
            uStack_81c._2_1_ = 'n';
            uStack_81c._3_1_ = 'i';
            uStack_818._0_1_ = 't';
            uStack_818._1_1_ = 'i';
            uStack_818._2_1_ = 'a';
            uStack_818._3_1_ = 'l';
            uStack_814._0_1_ = 'i';
            uStack_814._1_1_ = 's';
            uStack_814._2_1_ = 'a';
            uStack_814._3_1_ = 't';
            local_810._0_1_ = 'i';
            local_810._1_1_ = 'o';
            local_810._2_1_ = 'n';
            local_810._3_1_ = ' ';
            uStack_80c._0_1_ = 'f';
            uStack_80c._1_1_ = 'a';
            uStack_80c._2_1_ = 'i';
            uStack_80c._3_1_ = 'l';
            uStack_808 = CONCAT13(uStack_808._3_1_, 0x6465);
            FUN_00020f58(3, &local_820, 0);
            return 0;
        }
        if (*(char *)((int)param_1 + 99) == '\0') {
            if (DAT_00068bd5 == '\0') {
                *(undefined1 *)((int)param_1 + 99) = 0;
            } else if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                       (DAT_00067db4 < 7)) {
                *(undefined1 *)((int)param_1 + 99) = 0;
                if (*(char *)(param_1 + 0xb8) == '\0') {
                    if (*(char *)(param_1 + 0xe1) == '\0') {
                    joined_r0x0002f954:
                        if (((DAT_00074500 != '\0') ||
                             (DAT_00068bd4 != '\0')) ||
                            (6 < DAT_00067db4)) {
                            __n = 0x4b;
                            pcVar5 = "No GBT coinbase + append support found, "
                                     "pool unusable if it has no stratum";
                        LAB_0002f6d0:
                            memcpy(&local_820, pcVar5, __n);
                            FUN_00020f58(7, &local_820, 0);
                        }
                    } else {
                    LAB_0002f690:
                        if (((DAT_00074500 != '\0') ||
                             (DAT_00068bd4 != '\0')) ||
                            (6 < DAT_00067db4)) {
                            __n = 0x42;
                            pcVar5 = "GBT coinbase without append found, "
                                     "switching to GBT solo protocol";
                            goto LAB_0002f6d0;
                        }
                    }
                } else {
                LAB_0002f2d4:
                    if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                        (6 < DAT_00067db4)) {
                        local_820._0_1_ = 'G';
                        local_820._1_1_ = 'B';
                        local_820._2_1_ = 'T';
                        local_820._3_1_ = ' ';
                        uStack_81c._0_1_ = 'c';
                        uStack_81c._1_1_ = 'o';
                        uStack_81c._2_1_ = 'i';
                        uStack_81c._3_1_ = 'n';
                        uStack_818._0_1_ = 'b';
                        uStack_818._1_1_ = 'a';
                        uStack_818._2_1_ = 's';
                        uStack_818._3_1_ = 'e';
                        uStack_814._0_1_ = ' ';
                        uStack_814._1_1_ = '+';
                        uStack_814._2_1_ = ' ';
                        uStack_814._3_1_ = 'a';
                        local_810._0_1_ = 'p';
                        local_810._1_1_ = 'p';
                        local_810._2_1_ = 'e';
                        local_810._3_1_ = 'n';
                        uStack_80c._0_1_ = 'd';
                        uStack_80c._1_1_ = ' ';
                        uStack_80c._2_1_ = 's';
                        uStack_80c._3_1_ = 'u';
                        builtin_strncpy(acStack_7fc, " switching to GBT protoc",
                                        0x18);
                        uStack_7e4 = 0x6c6f;
                        local_7e2 = 0;
                        FUN_00020f58(7, &local_820, 0);
                    }
                }
            } else {
                local_820._0_1_ = 'P';
                local_820._1_1_ = 'r';
                local_820._2_1_ = 'o';
                local_820._3_1_ = 'b';
                uStack_81c._0_1_ = 'i';
                uStack_81c._1_1_ = 'n';
                uStack_81c._2_1_ = 'g';
                uStack_81c._3_1_ = ' ';
                uStack_818._0_1_ = 'f';
                uStack_818._1_1_ = 'o';
                uStack_818._2_1_ = 'r';
                uStack_818._3_1_ = ' ';
                uStack_814._0_1_ = 'G';
                uStack_814._1_1_ = 'B';
                uStack_814._2_1_ = 'T';
                uStack_814._3_1_ = ' ';
                local_810._0_1_ = 's';
                local_810._1_1_ = 'u';
                local_810._2_1_ = 'p';
                local_810._3_1_ = 'p';
                uStack_80c._0_1_ = 'o';
                uStack_80c._1_1_ = 'r';
                uStack_80c._2_1_ = 't';
                uStack_80c._3_1_ = '\0';
                FUN_00020f58(7, &local_820, 0);
                cVar1 = DAT_00068bd5;
                *(undefined1 *)((int)param_1 + 99) = 0;
                if (*(char *)(param_1 + 0xb8) == '\0') {
                    if (*(char *)(param_1 + 0xe1) == '\0') {
                        if (cVar1 != '\0')
                            goto joined_r0x0002f954;
                    } else if (cVar1 != '\0')
                        goto LAB_0002f690;
                } else if (cVar1 != '\0')
                    goto LAB_0002f2d4;
            }
        }
        FUN_000239a4(auStack_830);
        FUN_000239a4(auStack_828);
        iVar2 = param_1[0x90];
        if ((iVar2 != 0) && (DAT_0006900c == '\0')) {
            if ((DAT_00074500 != '\0') ||
                ((DAT_00068bd4 != '\0' || (5 < DAT_00067db4)))) {
                snprintf((char *)&local_820, 0x800,
                         "Testing pool %d stratum %s", *param_1, iVar2);
                FUN_00020f58(6, &local_820, 0);
                iVar2 = param_1[0x90];
            }
            iVar2 = FUN_00023cd8(iVar2, param_1 + 0x96, param_1 + 0x92);
            if ((iVar2 != 0) && (iVar2 = FUN_00026aec(param_1), iVar2 != 0)) {
                if ((DAT_00074500 != '\0') ||
                    ((DAT_00068bd4 != '\0' || (4 < DAT_00067db4)))) {
                    snprintf((char *)&local_820, 0x800,
                             "Switching pool %d %s to %s", *param_1,
                             param_1[0x29], param_1[0x90]);
                    FUN_00020f58(5, &local_820, 0);
                }
                if (param_1[0x29] == 0) {
                    uVar3 = __strdup(param_1[0x90]);
                    param_1[0x29] = uVar3;
                }
                *(undefined1 *)(param_1 + 0xa0) = 1;
                goto LAB_0002f528;
            }
        }
        if (((*(char *)(param_1 + 0xa0) == '\0') &&
             (*(char *)(param_1 + 0xe1) == '\0')) &&
            (*(char *)(param_1 + 0xb8) == '\0')) {
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (3 < DAT_00067db4)) {
                uVar4 = 0;
                snprintf((char *)&local_820, 0x800,
                         "No Stratum, GBT or Solo support in pool %d %s unable "
                         "to use",
                         *param_1, param_1[0x29]);
                FUN_00020f58(4, &local_820, 0);
            }
        } else {
            if ((DAT_00068bd5 != '\0') &&
                (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                  (6 < DAT_00067db4)))) {
                snprintf((char *)&local_820, 0x800,
                         "FAILED to retrieve work from pool %u %s", *param_1,
                         param_1[0x29]);
                FUN_00020f58(7, &local_820, 0);
            }
            if (((param_2 == 0) && (*(char *)((int)param_1 + 0x61) == '\0')) &&
                ((DAT_00074500 != '\0' ||
                  ((DAT_00068bd4 != '\0' || (3 < DAT_00067db4)))))) {
                uVar4 = 0;
                snprintf((char *)&local_820, 0x800,
                         "Pool %u slow/down or URL or credentials invalid",
                         *param_1);
                FUN_00020f58(4, &local_820, 0);
            }
        }
    } else {
    LAB_0002f528:
        iVar2 = FUN_0002f098(param_1, (int)param_1 + 0x282);
        if (iVar2 == 0) {
            iVar2 = FUN_00026aec(param_1);
            if ((iVar2 != 0) &&
                (((*(char *)(param_1 + 0x91) == '\0' ||
                   (iVar2 = FUN_000296d0(param_1), iVar2 != 0)) &&
                  (uVar4 = FUN_00029ac8(param_1), uVar4 != 0)))) {
                DAT_00074502 = 1;
                iVar2 = pthread_create(param_1 + 0xae, (pthread_attr_t *)0x0,
                                       FUN_0003958c, param_1);
                if (iVar2 == 0) {
                    iVar2 =
                        pthread_create(param_1 + 0xaf, (pthread_attr_t *)0x0,
                                       FUN_0003becc, param_1);
                    if (iVar2 == 0) {
                        return uVar4;
                    }
                    pcVar5 = "Failed to create stratum rthread";
                } else {
                    pcVar5 = "Failed to create stratum sthread";
                }
                local_820 = *(undefined4 *)pcVar5;
                uStack_81c = *(undefined4 *)(pcVar5 + 4);
                uStack_818 = *(undefined4 *)(pcVar5 + 8);
                uStack_814 = *(undefined4 *)(pcVar5 + 0xc);
                local_810 = *(undefined4 *)(pcVar5 + 0x10);
                uStack_80c = *(undefined4 *)(pcVar5 + 0x14);
                uStack_808 = *(undefined4 *)(pcVar5 + 0x18);
                uStack_804 = *(undefined4 *)(pcVar5 + 0x1c);
                local_800 = (undefined1) * (undefined4 *)(pcVar5 + 0x20);
                FUN_00020f58(3, &local_820, 1);
                /* WARNING: Subroutine does not return */
                FUN_0002e6b0(1, 1);
            }
            FUN_0002f180(param_1, (int)param_1 + 0x282);
            uVar4 = 0;
        } else {
            uVar4 = (uint) * (byte *)((int)param_1 + 0x281);
        }
    }
    return uVar4;
}

void FUN_0002f9c0(void)

{
    int iVar1;

    iVar1 = pthread_mutex_lock(DAT_00069010);
    if (iVar1 == 0) {
        pthread_cond_signal((pthread_cond_t *)&DAT_000744d0);
        iVar1 = pthread_mutex_unlock(DAT_00069010);
        if (iVar1 == 0) {
            (*DAT_00067ed8)();
            return;
        }
    } else {
        FUN_0002efe0("wake_gws", 0x14f9);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002f03c("wake_gws", 0x14fb);
}

void FUN_0002fb24(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_808[2052];

    piVar1 = __errno_location();
    snprintf(acStack_808, 0x800,
             "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar1,
             "cgminer.c", param_1, param_2);
    FUN_00020f58(3, acStack_808, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

void FUN_0002fb80(pthread_rwlock_t *param_1, undefined4 param_2,
                  undefined4 param_3)

{
    int iVar1;

    iVar1 = pthread_rwlock_unlock(param_1);
    if (iVar1 == 0) {
        (*DAT_00067ed8)();
        return;
    }
    /* WARNING: Subroutine does not return */
    FUN_0002fb24(param_2, param_3);
}

int FUN_0002fbb8(void)

{
    int iVar1;
    int iVar2;

    iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_0007453c);
    if (iVar1 == 0) {
        iVar2 = pthread_rwlock_wrlock((pthread_rwlock_t *)&DAT_00074554);
        iVar1 = DAT_00069014;
        if (iVar2 == 0) {
            DAT_00069014 = DAT_00069014 + 1;
            iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00074554);
            if (iVar2 == 0) {
                iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_0007453c);
                if (iVar2 == 0) {
                    (*DAT_00067ed8)();
                    return iVar1;
                }
                /* WARNING: Subroutine does not return */
                FUN_0002f03c("total_work_inc", 0x8db);
            }
            goto LAB_0002fc48;
        }
    } else {
        FUN_0002efe0("total_work_inc", 0x8d9);
    }
    FUN_0002ef84("total_work_inc", 0x8d9);
LAB_0002fc48:
    /* WARNING: Subroutine does not return */
    FUN_0002fb24("total_work_inc", 0x8db);
}

void FUN_0002fc68(int param_1)

{
    undefined4 uVar1;
    uint uVar2;
    int iVar3;
    bool bVar4;
    uint local_810;
    char acStack_80c[2048];

    uVar2 = *(uint *)(param_1 + 0x44);
    uVar2 = (uVar2 << 0x18 | (uVar2 >> 8 & 0xff) << 0x10 |
             (uVar2 >> 0x10 & 0xff) << 8 | uVar2 >> 0x18) +
            1;
    bVar4 = DAT_00068bd5 != '\0';
    *(uint *)(param_1 + 0x44) = uVar2 * 0x1000000 |
                                (uVar2 >> 8 & 0xff) << 0x10 |
                                (uVar2 >> 0x10 & 0xff) << 8 | uVar2 >> 0x18;
    DAT_000767e0 = DAT_000767e0 + 1;
    *(int *)(param_1 + 0xf0) = *(int *)(param_1 + 0xf0) + 1;
    *(undefined4 *)(param_1 + 0xf8) = 0;
    if ((bVar4) && (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                     (6 < DAT_00067db4)))) {
        local_810._0_1_ = 'S';
        local_810._1_1_ = 'u';
        local_810._2_1_ = 'c';
        local_810._3_1_ = 'c';
        builtin_strncpy(acStack_80c, "essfully rolled work", 0x14);
        acStack_80c[0x14] = 0;
        FUN_00020f58(7, &local_810, 0);
    }
    iVar3 = *(int *)(param_1 + 0x134);
    if (iVar3 != 0) {
        FUN_00022cd8(&local_810, iVar3, 4);
        uVar2 = (local_810 << 0x18 | (local_810 >> 8 & 0xff) << 0x10 |
                 (local_810 >> 0x10 & 0xff) << 8 | local_810 >> 0x18) +
                1;
        local_810 = uVar2 * 0x1000000 | (uVar2 >> 8 & 0xff) << 0x10 |
                    (uVar2 >> 0x10 & 0xff) << 8 | uVar2 >> 0x18;
        FUN_00022bb4(iVar3, &local_810, 4);
    }
    uVar1 = FUN_0002fbb8();
    *(undefined4 *)(param_1 + 0x154) = uVar1;
    return;
}

int FUN_0002fd8c(void)

{
    int iVar1;
    undefined4 uVar2;
    char local_808[32];
    undefined2 uStack_7e8;
    undefined1 local_7e6;

    iVar1 = FUN_00022a44(1, 0x1c0, "cgminer.c", "make_work", 0x8e2);
    if (iVar1 != 0) {
        uVar2 = FUN_0002fbb8();
        *(undefined4 *)(iVar1 + 0x154) = uVar2;
        return iVar1;
    }
    builtin_strncpy(local_808, "Failed to calloc work in make_wo", 0x20);
    uStack_7e8 = 0x6b72;
    local_7e6 = 0;
    FUN_00020f58(3, local_808, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

undefined4 FUN_0002fe24(undefined4 param_1, undefined4 param_2)

{
    undefined4 uVar1;

    uVar1 = FUN_0002fd8c();
    FUN_0002ca90(uVar1, param_1, param_2);
    return uVar1;
}

int FUN_0002fe4c(undefined4 param_1)

{
    int iVar1;

    iVar1 = FUN_0002fd8c();
    FUN_0002ca90(iVar1, param_1, 0);
    *(undefined1 *)(iVar1 + 0x111) = 1;
    FUN_000239a4(iVar1 + 0x1a0);
    *(undefined1 *)(iVar1 + 0x118) = 0;
    *(undefined1 *)(iVar1 + 0x11a) = 0;
    *(int *)(iVar1 + 0x108) = *(int *)(iVar1 + 0x108) + -1;
    return iVar1;
}

void FUN_0002fe98(int param_1, undefined4 param_2)

{
    int iVar1;

    iVar1 = pthread_rwlock_wrlock((pthread_rwlock_t *)(param_1 + 0x140));
    if (iVar1 == 0) {
        FUN_0002e034(param_1, param_2);
        iVar1 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x140));
        if (iVar1 == 0) {
            (*DAT_00067ed8)();
            return;
        }
    } else {
        FUN_0002ef84("add_queued", 0x24e9);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002fb24("add_queued", 0x24eb);
}

void FUN_0002ff04(int param_1, undefined4 param_2)

{
    int iVar1;
    undefined4 local_14[2];

    local_14[0] = param_2;
    iVar1 = pthread_rwlock_wrlock((pthread_rwlock_t *)(param_1 + 0x140));
    if (iVar1 == 0) {
        FUN_0002e528(param_1, local_14[0]);
        iVar1 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x140));
        if (iVar1 == 0) {
            (*DAT_00067ed8)();
            FUN_0002cba8(local_14, "cgminer.c", "work_completed", 0x2585);
            return;
        }
    } else {
        FUN_0002ef84("work_completed", 0x2581);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002fb24("work_completed", 0x2583);
}

int FUN_0002ff90(int param_1, undefined4 param_2, undefined4 param_3,
                 undefined4 param_4, undefined4 param_5, undefined4 param_6)

{
    int iVar1;
    int iVar2;

    iVar1 = pthread_rwlock_wrlock((pthread_rwlock_t *)(param_1 + 0x140));
    if (iVar1 == 0) {
        iVar1 = FUN_0002e46c(*(undefined4 *)(param_1 + 0x160), param_2, param_3,
                             param_4, param_5, param_6);
        if (iVar1 != 0) {
            FUN_0002e528(param_1, iVar1);
        }
        iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x140));
        if (iVar2 == 0) {
            (*DAT_00067ed8)();
            return iVar1;
        }
    } else {
        FUN_0002ef84("take_queued_work_bymidstate", 0x258e);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002fb24("take_queued_work_bymidstate", 0x2592);
}

int FUN_0003003c(int param_1)

{
    int iVar1;
    int iVar2;
    undefined4 uVar3;
    double in_d0;
    undefined4 extraout_s1;
    int local_34;
    undefined1 auStack_30[12];

    FUN_000239a4(auStack_30);
    iVar1 = pthread_rwlock_wrlock((pthread_rwlock_t *)(param_1 + 0x140));
    if (iVar1 == 0) {
        local_34 = *(int *)(param_1 + 0x160);
        iVar1 = 0;
        if (local_34 != 0) {
            iVar2 = *(int *)(local_34 + 0x160);
            while (true) {
                uVar3 = FUN_00023c94(auStack_30, local_34 + 0x1a8);
                if (in_d0 < (double)CONCAT44(extraout_s1, uVar3)) {
                    FUN_0002e528(param_1, local_34);
                    FUN_0002cba8(&local_34, "cgminer.c", "age_queued_work",
                                 0x2572);
                    iVar1 = iVar1 + 1;
                }
                local_34 = iVar2;
                if (iVar2 == 0)
                    break;
                iVar2 = *(int *)(iVar2 + 0x160);
            }
        }
        iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x140));
        if (iVar2 == 0) {
            (*DAT_00067ed8)();
            return iVar1;
        }
    } else {
        FUN_0002ef84("age_queued_work", 0x256c);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002fb24("age_queued_work", 0x2577);
}

void FUN_00030138(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_808[2052];

    piVar1 = __errno_location();
    snprintf(acStack_808, 0x800,
             "WTF RDLOCK ERROR ON LOCK! errno=%d in %s %s():%d", *piVar1,
             "cgminer.c", param_1, param_2);
    FUN_00020f58(3, acStack_808, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

int FUN_00030194(int param_1, int param_2)

{
    int iVar1;
    int iVar2;
    int iVar3;

    iVar1 = pthread_rwlock_rdlock((pthread_rwlock_t *)(param_1 + 0x140));
    if (iVar1 != 0) {
        FUN_00030138("clone_queued_work_byid", 0x2552);
        goto LAB_00030250;
    }
    iVar1 = *(int *)(param_1 + 0x160);
    if (iVar1 != 0) {
        iVar2 = *(int *)(iVar1 + 0x160);
        iVar3 = iVar1;
        if (param_2 != *(int *)(iVar1 + 0x154)) {
            if (iVar2 == 0) {
                iVar1 = 0;
                goto LAB_00030200;
            }
            iVar3 = *(int *)(iVar2 + 0x160);
            while (iVar1 = iVar3, iVar3 = iVar2,
                   param_2 != *(int *)(iVar2 + 0x154)) {
                if (iVar1 == 0)
                    goto LAB_00030200;
                iVar3 = *(int *)(iVar1 + 0x160);
                iVar2 = iVar1;
            }
        }
        iVar1 = FUN_0002fd8c();
        FUN_0002ca90(iVar1, iVar3, 0);
    }
LAB_00030200:
    iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x140));
    if (iVar2 == 0) {
        (*DAT_00067ed8)();
        return iVar1;
    }
LAB_00030250:
    /* WARNING: Subroutine does not return */
    FUN_0002fb24("clone_queued_work_byid", 0x2556);
}

int FUN_0003031c(int param_1, int param_2)

{
    int iVar1;
    int iVar2;
    int iVar3;

    iVar1 = pthread_rwlock_rdlock((pthread_rwlock_t *)(param_1 + 0x140));
    if (iVar1 == 0) {
        iVar1 = *(int *)(param_1 + 0x160);
        if (((iVar1 != 0) && (iVar2 = *(int *)(iVar1 + 0x160),
                              param_2 != *(int *)(iVar1 + 0x154))) &&
            (iVar1 = iVar2, iVar2 != 0)) {
            for (iVar3 = *(int *)(iVar2 + 0x160);
                 (iVar1 = iVar2, param_2 != *(int *)(iVar2 + 0x154) &&
                                     (iVar1 = iVar3, iVar3 != 0));
                 iVar3 = *(int *)(iVar3 + 0x160)) {
                iVar2 = iVar3;
            }
        }
        iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x140));
        if (iVar2 == 0) {
            (*DAT_00067ed8)();
            return iVar1;
        }
    } else {
        FUN_00030138("find_queued_work_byid", 0x2546);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002fb24("find_queued_work_byid", 0x2548);
}

undefined4 FUN_000303d0(int param_1, undefined4 param_2, undefined4 param_3,
                        undefined4 param_4, undefined4 param_5,
                        undefined4 param_6)

{
    int iVar1;
    undefined4 uVar2;

    iVar1 = pthread_rwlock_rdlock((pthread_rwlock_t *)(param_1 + 0x140));
    if (iVar1 == 0) {
        uVar2 = FUN_0002e46c(*(undefined4 *)(param_1 + 0x160), param_2, param_3,
                             param_4, param_5, param_6);
        iVar1 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x140));
        if (iVar1 == 0) {
            (*DAT_00067ed8)();
            return uVar2;
        }
    } else {
        FUN_00030138("find_queued_work_bymidstate", 0x2517);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002fb24("find_queued_work_bymidstate", 0x2519);
}

undefined4 FUN_0003046c(int param_1)

{
    int iVar1;
    undefined4 uVar2;

    iVar1 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_0007680c);
    if (iVar1 == 0) {
        uVar2 = *(undefined4 *)(DAT_0007346c + param_1 * 4);
        iVar1 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_0007680c);
        if (iVar1 == 0) {
            (*DAT_00067ed8)();
            return uVar2;
        }
    } else {
        FUN_00030138("get_devices", 0x275);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002fb24("get_devices", 0x277);
}

/* WARNING: Globals starting with '_' overlap smaller symbols at the same
 * address */

void FUN_000304e0(void)

{
    int iVar1;
    char *pcVar2;
    int iVar3;
    int iVar4;
    uint uVar5;
    undefined8 *puVar6;
    int iVar7;
    uint uVar8;
    int iVar9;
    double dVar10;
    double dVar11;
    double dVar12;
    double dVar13;
    undefined1 auStack_940[256];
    undefined4 local_840;
    char acStack_83c[28];
    ushort local_820;
    undefined1 local_81e;

    dVar13 = DAT_00068720;
    iVar9 = DAT_00069018 - DAT_00069020;
    if (DAT_0006901c - DAT_00069024 < 0) {
        iVar9 = iVar9 + -1;
    }
    dVar10 = (double)FUN_0004a11c(DAT_000755d8, DAT_000755dc,
                                  (iVar9 % 0xe10) * -0x77777777);
    dVar11 = (double)FUN_0004a11c(DAT_00076850, DAT_00076854);
    if (((DAT_00074500 == 0) && (DAT_00068bd4 == 0)) &&
        ((int)DAT_00067db4 < 4)) {
        if ((int)DAT_00067db4 < 4)
            goto LAB_00031510;
    LAB_0003062c:
        snprintf((char *)&local_840, 0x800, "Started at %s", &DAT_00069028);
        FUN_00020f58(4, &local_840, 0);
        if (DAT_000733cc == 1) {
            if ((DAT_00074500 == 0) && (DAT_00068bd4 == 0))
                goto LAB_00031650;
            goto LAB_00031660;
        }
    LAB_00030668:
        if ((DAT_00074500 == 0) && (DAT_00068bd4 == 0))
            goto LAB_00031530;
    LAB_00030688:
        snprintf((char *)&local_840, 0x800,
                 "Runtime: %d hrs : %d mins : %d secs", iVar9 / 0xe10,
                 (iVar9 % 0xe10) / 0x3c, iVar9 % 0x3c);
        FUN_00020f58(4, &local_840, 0);
        dVar12 = DAT_000756a8 / DAT_00068720;
        puVar6 = &DAT_000756a8;
        if ((DAT_00074500 == 0) &&
            (puVar6 = (undefined8 *)(uint)DAT_00068bd4,
             (undefined8 *)(uint)DAT_00068bd4 == (undefined8 *)0x0))
            goto LAB_00031550;
    LAB_000306f0:
        snprintf((char *)&local_840, 0x800, "Average hashrate: %.1f Mhash/s",
                 puVar6, dVar12);
        FUN_00020f58(4, &local_840, 0);
        if ((DAT_00074500 == 0) && (DAT_00068bd4 == 0))
            goto LAB_00031854;
    LAB_00030738:
        snprintf((char *)&local_840, 0x800, "Solved blocks: %d", DAT_0007345c);
        FUN_00020f58(4, &local_840, 0);
        if ((DAT_00074500 == 0) && (DAT_00068bd4 == 0))
            goto LAB_00031864;
    LAB_00030788:
        snprintf((char *)&local_840, 0x800, "Best share difficulty: %s",
                 &DAT_00068728);
        FUN_00020f58(4, &local_840, 0);
        if ((DAT_00074500 == 0) && (DAT_00068bd4 == 0))
            goto LAB_000316a4;
    LAB_000307d0:
        snprintf((char *)&local_840, 0x800, "Share submissions: %lld",
                 DAT_000755d8 + DAT_000767e8, DAT_000755d8 + DAT_000767e8,
                 DAT_000755dc + DAT_000767ec +
                     (uint)CARRY4(DAT_000755d8, DAT_000767e8));
        FUN_00020f58(4, &local_840, 0);
        puVar6 = (undefined8 *)(uint)DAT_00074500;
        if (((undefined8 *)(uint)DAT_00074500 == (undefined8 *)0x0) &&
            (puVar6 = (undefined8 *)(uint)DAT_00068bd4,
             (undefined8 *)(uint)DAT_00068bd4 == (undefined8 *)0x0))
            goto LAB_000316b4;
    LAB_00030838:
        snprintf((char *)&local_840, 0x800, "Accepted shares: %lld", puVar6,
                 DAT_000755d8, DAT_000755dc);
        FUN_00020f58(4, &local_840, 0);
        if ((DAT_00074500 == 0) && (DAT_00068bd4 == 0))
            goto LAB_000316c4;
    LAB_00030884:
        snprintf((char *)&local_840, 0x800, "Rejected shares: %lld",
                 &DAT_000767e8, DAT_000767e8, DAT_000767ec);
        FUN_00020f58(4, &local_840, 0);
        if ((DAT_00074500 == 0) && (DAT_00068bd4 == 0))
            goto LAB_000316d4;
    LAB_000308f4:
        snprintf((char *)&local_840, 0x800, "Accepted difficulty shares: %1.f",
                 &DAT_00073370, _DAT_00073370, DAT_00073374);
        FUN_00020f58(4, &local_840, 0);
        if ((DAT_00074500 == 0) && (DAT_00068bd4 == 0))
            goto LAB_000316e4;
    LAB_00030948:
        snprintf((char *)&local_840, 0x800, "Rejected difficulty shares: %1.f",
                 &DAT_00073390, _DAT_00073390, DAT_00073394);
        FUN_00020f58(4, &local_840, 0);
        uVar8 = DAT_000755d8;
        iVar9 = DAT_000755dc;
        if (DAT_000755d8 != 0 || DAT_000755dc != 0) {
        joined_r0x00030990:
            if ((DAT_00074500 == 0) && (DAT_00068bd4 == 0))
                goto LAB_00031700;
            goto LAB_000309a8;
        }
    LAB_00030d34:
        if (DAT_000767e8 != 0 || DAT_000767ec != 0) {
            uVar8 = 0;
            iVar9 = 0;
            goto joined_r0x00030990;
        }
    LAB_00030a28:
        if ((DAT_00074500 == 0) && (DAT_00068bd4 == 0))
            goto LAB_0003159c;
    LAB_00030a48:
        snprintf((char *)&local_840, 0x800, "Hardware errors: %d",
                 DAT_00073368);
        FUN_00020f58(4, &local_840, 0);
        puVar6 = (undefined8 *)(uint)DAT_00074500;
        if ((((undefined8 *)(uint)DAT_00074500 == (undefined8 *)0x0) &&
             (puVar6 = (undefined8 *)(uint)DAT_00068bd4,
              (undefined8 *)(uint)DAT_00068bd4 == (undefined8 *)0x0)) &&
            (puVar6 = DAT_00067db4, (int)DAT_00067db4 < 4))
            goto LAB_000315b8;
    LAB_00030a9c:
        snprintf((char *)&local_840, 0x800,
                 "Utility (accepted shares / min): %.2f/min", puVar6,
                 (dVar10 / dVar13) * 60.0);
        FUN_00020f58(4, &local_840, 0);
        puVar6 = (undefined8 *)(uint)DAT_00074500;
        if ((((undefined8 *)(uint)DAT_00074500 == (undefined8 *)0x0) &&
             (puVar6 = (undefined8 *)(uint)DAT_00068bd4,
              (undefined8 *)(uint)DAT_00068bd4 == (undefined8 *)0x0)) &&
            (puVar6 = DAT_00067db4, (int)DAT_00067db4 < 4))
            goto LAB_000315c8;
    LAB_00030ae4:
        snprintf((char *)&local_840, 0x800,
                 "Work Utility (diff1 shares solved / min): %.2f/min\n", puVar6,
                 (dVar11 / dVar13) * 60.0);
        FUN_00020f58(4, &local_840, 0);
        if (((DAT_00074500 == 0) && (DAT_00068bd4 == 0)) &&
            ((int)DAT_00067db4 < 4))
            goto LAB_000315d8;
    LAB_00030b2c:
        snprintf((char *)&local_840, 0x800,
                 "Stale submissions discarded due to new blocks: %lld",
                 &DAT_00073318, DAT_00073318, DAT_0007331c);
        FUN_00020f58(4, &local_840, 0);
        if (((DAT_00074500 == 0) && (DAT_00068bd4 == 0)) &&
            ((int)DAT_00067db4 < 4))
            goto LAB_000315e8;
    LAB_00030b80:
        snprintf((char *)&local_840, 0x800,
                 "Unable to get work from server occasions: %d", DAT_000755d0);
        FUN_00020f58(4, &local_840, 0);
        if (((DAT_00074500 == 0) && (DAT_00068bd4 == 0)) &&
            ((int)DAT_00067db4 < 4))
            goto LAB_000315f8;
    LAB_00030bd0:
        snprintf((char *)&local_840, 0x800, "Work items generated locally: %d",
                 DAT_000767e0);
        FUN_00020f58(4, &local_840, 0);
        if (((DAT_00074500 == 0) && (DAT_00068bd4 == 0)) &&
            ((int)DAT_00067db4 < 4))
            goto LAB_00031608;
    LAB_00030c20:
        snprintf((char *)&local_840, 0x800,
                 "Submitting work remotely delay occasions: %d", DAT_00074494);
        FUN_00020f58(4, &local_840, 0);
        if (((DAT_00074500 == 0) && (DAT_00068bd4 == 0)) &&
            ((int)DAT_00067db4 < 4))
            goto LAB_00031618;
    LAB_00030c70:
        snprintf((char *)&local_840, 0x800,
                 "New blocks detected on network: %d\n", DAT_000766dc);
        FUN_00020f58(4, &local_840, 0);
        if (1 < DAT_000733cc)
            goto LAB_00030cac;
    LAB_00031124:
        if ((DAT_00074500 == 0) && (DAT_00068bd4 == 0))
            goto LAB_0003156c;
    LAB_00031144:
        local_840._0_1_ = 'S';
        local_840._1_1_ = 'u';
        local_840._2_1_ = 'm';
        local_840._3_1_ = 'm';
        builtin_strncpy(acStack_83c, "ary of per device statistics", 0x1c);
        local_820 = 0xa3a;
        local_81e = 0;
        FUN_00020f58(4, &local_840, 0);
    } else {
        local_840._0_1_ = '\n';
        local_840._1_1_ = 'S';
        local_840._2_1_ = 'u';
        local_840._3_1_ = 'm';
        builtin_strncpy(acStack_83c, "mary of runtime statistics:\n", 0x1c);
        local_820 = local_820 & 0xff00;
        FUN_00020f58(4, &local_840, 0);
        if (((DAT_00074500 != 0) || (DAT_00068bd4 != 0)) ||
            (3 < (int)DAT_00067db4))
            goto LAB_0003062c;
    LAB_00031510:
        if (DAT_000733cc != 1)
            goto LAB_00030668;
    LAB_00031650:
        if (3 < (int)DAT_00067db4) {
        LAB_00031660:
            snprintf((char *)&local_840, 0x800, "Pool: %s",
                     *(undefined4 *)(*DAT_000744c8 + 0xa4));
            FUN_00020f58(4, &local_840, 0);
            goto LAB_00030668;
        }
    LAB_00031530:
        if (3 < (int)DAT_00067db4)
            goto LAB_00030688;
        dVar12 = DAT_000756a8 / DAT_00068720;
    LAB_00031550:
        puVar6 = DAT_00067db4;
        if (3 < (int)DAT_00067db4)
            goto LAB_000306f0;
    LAB_00031854:
        if (3 < (int)DAT_00067db4)
            goto LAB_00030738;
    LAB_00031864:
        if (3 < (int)DAT_00067db4)
            goto LAB_00030788;
    LAB_000316a4:
        if (3 < (int)DAT_00067db4)
            goto LAB_000307d0;
    LAB_000316b4:
        puVar6 = DAT_00067db4;
        if (3 < (int)DAT_00067db4)
            goto LAB_00030838;
    LAB_000316c4:
        if (3 < (int)DAT_00067db4)
            goto LAB_00030884;
    LAB_000316d4:
        if (3 < (int)DAT_00067db4)
            goto LAB_000308f4;
    LAB_000316e4:
        if (3 < (int)DAT_00067db4)
            goto LAB_00030948;
        uVar8 = DAT_000755d8;
        iVar9 = DAT_000755dc;
        if (DAT_000755d8 == 0 && DAT_000755dc == 0)
            goto LAB_00030d34;
    LAB_00031700:
        if (3 < (int)DAT_00067db4) {
        LAB_000309a8:
            iVar7 = DAT_000767ec;
            uVar5 = DAT_000767e8;
            iVar1 = DAT_000767ec * 3 +
                    (uint)CARRY4(DAT_000767e8, DAT_000767e8) +
                    (uint)CARRY4(DAT_000767e8 * 2, DAT_000767e8);
            FUN_0004a11c(
                DAT_000767e8 * 100,
                iVar1 + (iVar1 * 0x20 | DAT_000767e8 * 3 >> 0x1b) +
                    (uint)CARRY4(DAT_000767e8 * 3, DAT_000767e8 * 0x60) +
                    DAT_000767ec +
                    (uint)CARRY4(DAT_000767e8 * 99, DAT_000767e8));
            FUN_0004a11c(uVar5 + uVar8,
                         iVar7 + iVar9 + (uint)CARRY4(uVar5, uVar8));
            snprintf((char *)&local_840, 0x800, "Reject ratio: %.1f%%");
            FUN_00020f58(4, &local_840, 0);
            goto LAB_00030a28;
        }
    LAB_0003159c:
        if (3 < (int)DAT_00067db4)
            goto LAB_00030a48;
        puVar6 = DAT_00067db4;
        if (3 < (int)DAT_00067db4)
            goto LAB_00030a9c;
    LAB_000315b8:
        puVar6 = DAT_00067db4;
        if (3 < (int)DAT_00067db4)
            goto LAB_00030ae4;
    LAB_000315c8:
        if (3 < (int)DAT_00067db4)
            goto LAB_00030b2c;
    LAB_000315d8:
        if (3 < (int)DAT_00067db4)
            goto LAB_00030b80;
    LAB_000315e8:
        if (3 < (int)DAT_00067db4)
            goto LAB_00030bd0;
    LAB_000315f8:
        if (3 < (int)DAT_00067db4)
            goto LAB_00030c20;
    LAB_00031608:
        if (3 < (int)DAT_00067db4)
            goto LAB_00030c70;
    LAB_00031618:
        if (1 < DAT_000733cc) {
        LAB_00030cac:
            iVar9 = 0;
            do {
                iVar7 = DAT_000744c8[iVar9];
                if (((DAT_00074500 == 0) && (DAT_00068bd4 == 0)) &&
                    ((int)DAT_00067db4 < 4)) {
                    iVar1 = *(int *)(iVar7 + 0x20);
                    if (iVar1 == 0)
                        goto LAB_00030df0;
                LAB_00030d20:
                    if (3 < (int)DAT_00067db4)
                        goto LAB_00030da4;
                LAB_000313b8:
                    if (3 < (int)DAT_00067db4)
                        goto LAB_00030e00;
                LAB_000313c4:
                    puVar6 = DAT_00067db4;
                    if (3 < (int)DAT_00067db4)
                        goto LAB_00030e5c;
                LAB_000313d4:
                    puVar6 = DAT_00067db4;
                    if (3 < (int)DAT_00067db4)
                        goto LAB_00030ea0;
                LAB_000313e4:
                    puVar6 = DAT_00067db4;
                    if (3 < (int)DAT_00067db4)
                        goto LAB_00030ee4;
                LAB_000313f4:
                    puVar6 = DAT_00067db4;
                    if (3 < (int)DAT_00067db4)
                        goto LAB_00030f28;
                    uVar8 = *(uint *)(iVar7 + 8);
                    iVar1 = *(int *)(iVar7 + 0xc);
                    if (uVar8 == 0 && iVar1 == 0)
                        goto LAB_00030f60;
                    if (3 < (int)DAT_00067db4)
                        goto LAB_00030f8c;
                LAB_0003141c:
                    if (3 < (int)DAT_00067db4)
                        goto LAB_00031030;
                LAB_00031428:
                    if (3 < (int)DAT_00067db4)
                        goto LAB_00031074;
                LAB_00031438:
                    if (3 < (int)DAT_00067db4)
                        goto LAB_000310b4;
                LAB_00031448:
                    if (3 < (int)DAT_00067db4)
                        goto LAB_000310f0;
                } else {
                    snprintf((char *)&local_840, 0x800, "Pool: %s",
                             *(undefined4 *)(iVar7 + 0xa4));
                    FUN_00020f58(4, &local_840, 0);
                    iVar1 = *(int *)(iVar7 + 0x20);
                    if (iVar1 != 0) {
                        if ((DAT_00074500 == 0) && (DAT_00068bd4 == 0))
                            goto LAB_00030d20;
                    LAB_00030da4:
                        pcVar2 = "S";
                        if (iVar1 < 2) {
                            pcVar2 = "";
                        }
                        snprintf((char *)&local_840, 0x800,
                                 "SOLVED %d BLOCK%s!", iVar1, pcVar2);
                        FUN_00020f58(4, &local_840, 0);
                    }
                    if (DAT_00074500 == 0) {
                    LAB_00030df0:
                        if (DAT_00068bd4 == 0)
                            goto LAB_000313b8;
                    }
                LAB_00030e00:
                    snprintf((char *)&local_840, 0x800,
                             " Share submissions: %lld",
                             *(int *)(iVar7 + 0xc) + *(int *)(iVar7 + 0x14) +
                                 (uint)CARRY4(*(uint *)(iVar7 + 8),
                                              *(uint *)(iVar7 + 0x10)),
                             *(uint *)(iVar7 + 8) + *(uint *)(iVar7 + 0x10));
                    FUN_00020f58(4, &local_840, 0);
                    puVar6 = (undefined8 *)(uint)DAT_00074500;
                    if (((undefined8 *)(uint)DAT_00074500 ==
                         (undefined8 *)0x0) &&
                        (puVar6 = (undefined8 *)(uint)DAT_00068bd4,
                         (undefined8 *)(uint)DAT_00068bd4 == (undefined8 *)0x0))
                        goto LAB_000313c4;
                LAB_00030e5c:
                    snprintf((char *)&local_840, 0x800,
                             " Accepted shares: %lld", puVar6,
                             *(undefined4 *)(iVar7 + 8));
                    FUN_00020f58(4, &local_840, 0);
                    puVar6 = (undefined8 *)(uint)DAT_00074500;
                    if (((undefined8 *)(uint)DAT_00074500 ==
                         (undefined8 *)0x0) &&
                        (puVar6 = (undefined8 *)(uint)DAT_00068bd4,
                         (undefined8 *)(uint)DAT_00068bd4 == (undefined8 *)0x0))
                        goto LAB_000313d4;
                LAB_00030ea0:
                    snprintf((char *)&local_840, 0x800,
                             " Rejected shares: %lld", puVar6,
                             *(undefined4 *)(iVar7 + 0x10));
                    FUN_00020f58(4, &local_840, 0);
                    puVar6 = (undefined8 *)(uint)DAT_00074500;
                    if (((undefined8 *)(uint)DAT_00074500 ==
                         (undefined8 *)0x0) &&
                        (puVar6 = (undefined8 *)(uint)DAT_00068bd4,
                         (undefined8 *)(uint)DAT_00068bd4 == (undefined8 *)0x0))
                        goto LAB_000313e4;
                LAB_00030ee4:
                    snprintf((char *)&local_840, 0x800,
                             " Accepted difficulty shares: %1.f", puVar6,
                             *(undefined4 *)(iVar7 + 0x48));
                    FUN_00020f58(4, &local_840, 0);
                    puVar6 = (undefined8 *)(uint)DAT_00074500;
                    if (((undefined8 *)(uint)DAT_00074500 ==
                         (undefined8 *)0x0) &&
                        (puVar6 = (undefined8 *)(uint)DAT_00068bd4,
                         (undefined8 *)(uint)DAT_00068bd4 == (undefined8 *)0x0))
                        goto LAB_000313f4;
                LAB_00030f28:
                    snprintf((char *)&local_840, 0x800,
                             " Rejected difficulty shares: %1.f", puVar6,
                             *(undefined4 *)(iVar7 + 0x50));
                    FUN_00020f58(4, &local_840, 0);
                    uVar8 = *(uint *)(iVar7 + 8);
                    iVar1 = *(int *)(iVar7 + 0xc);
                    if (uVar8 == 0 && iVar1 == 0) {
                    LAB_00030f60:
                        if (*(int *)(iVar7 + 0x10) != 0 ||
                            *(int *)(iVar7 + 0x14) != 0) {
                            uVar8 = 0;
                            iVar1 = 0;
                            goto LAB_00030f74;
                        }
                    } else {
                    LAB_00030f74:
                        if (((DAT_00074500 == 0) && (DAT_00068bd4 == 0)) &&
                            ((int)DAT_00067db4 < 4))
                            goto LAB_0003141c;
                    LAB_00030f8c:
                        uVar5 = *(uint *)(iVar7 + 0x10);
                        iVar4 = *(int *)(iVar7 + 0x14);
                        iVar3 = iVar4 * 3 + (uint)CARRY4(uVar5, uVar5) +
                                (uint)CARRY4(uVar5 * 2, uVar5);
                        FUN_0004a11c(
                            uVar5 * 100,
                            iVar3 + (iVar3 * 0x20 | uVar5 * 3 >> 0x1b) +
                                (uint)CARRY4(uVar5 * 3, uVar5 * 0x60) + iVar4 +
                                (uint)CARRY4(uVar5 * 99, uVar5));
                        FUN_0004a11c(uVar5 + uVar8,
                                     iVar4 + iVar1 +
                                         (uint)CARRY4(uVar5, uVar8));
                        snprintf((char *)&local_840, 0x800,
                                 " Reject ratio: %.1f%%");
                        FUN_00020f58(4, &local_840, 0);
                    }
                    if ((DAT_00074500 == 0) && (DAT_00068bd4 == 0))
                        goto LAB_0003141c;
                LAB_00031030:
                    snprintf((char *)&local_840, 0x800, " Items worked on: %d",
                             *(undefined4 *)(iVar7 + 0x44));
                    FUN_00020f58(4, &local_840, 0);
                    if ((DAT_00074500 == 0) && (DAT_00068bd4 == 0))
                        goto LAB_00031428;
                LAB_00031074:
                    snprintf(
                        (char *)&local_840, 0x800,
                        " Stale submissions discarded due to new blocks: %d",
                        *(undefined4 *)(iVar7 + 0x78));
                    FUN_00020f58(4, &local_840, 0);
                    if ((DAT_00074500 == 0) && (DAT_00068bd4 == 0))
                        goto LAB_00031438;
                LAB_000310b4:
                    snprintf((char *)&local_840, 0x800,
                             " Unable to get work from server occasions: %d",
                             *(undefined4 *)(iVar7 + 0x80));
                    FUN_00020f58(4, &local_840, 0);
                    if ((DAT_00074500 == 0) && (DAT_00068bd4 == 0))
                        goto LAB_00031448;
                LAB_000310f0:
                    snprintf((char *)&local_840, 0x800,
                             " Submitting work remotely delay occasions: %d\n",
                             *(undefined4 *)(iVar7 + 0x84));
                    FUN_00020f58(4, &local_840, 0);
                }
                iVar9 = iVar9 + 1;
            } while (iVar9 < DAT_000733cc);
            goto LAB_00031124;
        }
    LAB_0003156c:
        if (3 < (int)DAT_00067db4)
            goto LAB_00031144;
    }
    if (0 < DAT_000755c0) {
        iVar9 = 0;
        do {
            iVar7 = FUN_0003046c(iVar9);
            iVar9 = iVar9 + 1;
            *(undefined **)(*(int *)(iVar7 + 4) + 0x14) = &DAT_0002aa48;
            *(undefined **)(*(int *)(iVar7 + 4) + 0x18) = &DAT_0002c580;
            FUN_0002e7d0(auStack_940, 0xff, iVar7);
            if (((DAT_00074500 != 0) || (DAT_00068bd4 != 0)) ||
                (3 < (int)DAT_00067db4)) {
                snprintf((char *)&local_840, 0x800, "%s", auStack_940);
                FUN_00020f58(4, &local_840, 0);
            }
        } while (iVar9 < DAT_000755c0);
    }
    puVar6 = (undefined8 *)(uint)DAT_00074500;
    if (DAT_00069050 == 0) {
    LAB_00031348:
        if ((puVar6 == (undefined8 *)0x0) && (DAT_00068bd4 == 0))
            goto LAB_00031584;
    } else {
        dVar13 = (double)CONCAT44(DAT_00073374, _DAT_00073370);
        if (((puVar6 != (undefined8 *)0x0) ||
             (puVar6 = (undefined8 *)&DAT_00068bd4, DAT_00068bd4 != 0)) ||
            (3 < (int)DAT_00067db4)) {
            snprintf((char *)&local_840, 0x800,
                     "Mined %.0f accepted shares of %d requested\n", puVar6,
                     dVar13, DAT_00069050);
            FUN_00020f58(4, &local_840, 0);
            dVar13 = (double)CONCAT44(DAT_00073374, _DAT_00073370);
            puVar6 = (undefined8 *)(uint)DAT_00074500;
            if (dVar13 < (double)(longlong)DAT_00069050) {
                if (puVar6 == (undefined8 *)0x0)
                    goto LAB_000312f4;
            LAB_00031318:
                snprintf((char *)&local_840, 0x800,
                         "WARNING - Mined only %.0f shares of %d requested.",
                         puVar6, dVar13, DAT_00069050);
                FUN_00020f58(4, &local_840, 0);
                puVar6 = (undefined8 *)(uint)DAT_00074500;
            }
            goto LAB_00031348;
        }
        if (dVar13 < (double)(longlong)DAT_00069050) {
        LAB_000312f4:
            puVar6 = (undefined8 *)(uint)DAT_00068bd4;
            if (((undefined8 *)(uint)DAT_00068bd4 != (undefined8 *)0x0) ||
                (puVar6 = DAT_00067db4, 3 < (int)DAT_00067db4))
                goto LAB_00031318;
        }
    LAB_00031584:
        if ((int)DAT_00067db4 < 4)
            goto LAB_00031380;
    }
    local_840._0_2_ = 0x20;
    FUN_00020f58(4, &local_840, 0);
LAB_00031380:
    fflush(stderr);
    fflush(stdout);
    return;
}

void FUN_0003189c(int param_1)

{
    int iVar1;
    int *piVar2;
    char *pcVar3;
    sysinfo local_850;
    char acStack_810[2052];

    iVar1 = sysinfo(&local_850);
    if (iVar1 == 0) {
        DAT_00074484 = local_850.uptime;
        FUN_000239a4(&DAT_00069018);
    } else {
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (5 < DAT_00067db4)) {
            piVar2 = __errno_location();
            iVar1 = *piVar2;
            pcVar3 = strerror(iVar1);
            snprintf(acStack_810, 0x800,
                     "Failed to get sysinfo, errno:%u, reason:%s\n", iVar1,
                     pcVar3);
            FUN_00020f58(6, acStack_810, 0);
        }
        DAT_00074484 = time((time_t *)0x0);
        FUN_000239a4(&DAT_00069018);
    }
    if (((param_1 == 0) && (DAT_0007559c == '\0')) && (DAT_00068bd6 != '\0')) {
        FUN_000304e0();
        return;
    }
    return;
}

void FUN_000319c4(void)

{
    char local_810[28];
    undefined2 local_7f4;

    if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
        (3 < DAT_00067db4)) {
        snprintf(local_810, 0x800, "Attempting to restart %s", &DAT_00068df4);
        FUN_00020f58(4, local_810, 0);
    }
    FUN_0002541c(&DAT_00031ecc, 0, 5000);
    FUN_0003189c(1);
    if (0 < DAT_00068ffc) {
        kill(DAT_00068ffc, 0xf);
        DAT_00068ffc = 0;
    }
    execv(*DAT_00069054, DAT_00069054);
    if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
        (DAT_00067db4 < 4)) {
        return;
    }
    builtin_strncpy(local_810, "Failed to restart applicatio", 0x1c);
    local_7f4 = 0x6e;
    FUN_00020f58(4, local_810, 0);
    return;
}

undefined4 FUN_00031b04(int param_1)

{
    int iVar1;
    undefined4 uVar2;

    iVar1 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_000744a8);
    if (iVar1 == 0) {
        uVar2 = *(undefined4 *)(DAT_000744a4 + param_1 * 4);
        iVar1 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_000744a8);
        if (iVar1 == 0) {
            (*DAT_00067ed8)();
            return uVar2;
        }
    } else {
        FUN_00030138("get_thread", 0x261);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002fb24("get_thread", 0x263);
}

void FUN_00031b8c(void)

{
    int iVar1;
    int iVar2;
    char local_820[20];
    undefined4 local_80c;
    char acStack_808[2024];

    if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
        (DAT_00067db4 < 6)) {
        if (DAT_00068bd5 == '\0')
            goto LAB_00031c54;
    LAB_00031e64:
        if (DAT_00067db4 < 7)
            goto LAB_00031c54;
    } else {
        builtin_strncpy(local_820, "Received kill messag", 0x14);
        local_80c._0_2_ = 0x65;
        FUN_00020f58(6, local_820, 1);
        if (DAT_00068bd5 == '\0')
            goto LAB_00031c54;
        if ((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0'))
            goto LAB_00031e64;
    }
    builtin_strncpy(local_820, "Killing off watchpoo", 0x14);
    local_80c._0_1_ = 'l';
    local_80c._1_1_ = ' ';
    local_80c._2_1_ = 't';
    local_80c._3_1_ = 'h';
    builtin_strncpy(acStack_808, "read", 5);
    FUN_00020f58(7, local_820, 1);
LAB_00031c54:
    FUN_0002541c(FUN_00023588, DAT_00075598 + DAT_00069058 * 0x40, 1000);
    if ((DAT_00068bd5 != '\0') &&
        (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
          (6 < DAT_00067db4)))) {
        builtin_strncpy(local_820, "Killing off watchdog", 0x14);
        local_80c._0_1_ = ' ';
        local_80c._1_1_ = 't';
        local_80c._2_1_ = 'h';
        local_80c._3_1_ = 'r';
        builtin_strncpy(acStack_808, "ead", 4);
        FUN_00020f58(7, local_820, 1);
    }
    FUN_0002541c(FUN_00023588, DAT_00075598 + DAT_0006905c * 0x40, 1000);
    if ((DAT_00068bd5 != '\0') &&
        (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
          (6 < DAT_00067db4)))) {
        builtin_strncpy(local_820, "Shutting down mining", 0x14);
        local_80c._0_1_ = ' ';
        local_80c._1_1_ = 't';
        local_80c._2_1_ = 'h';
        local_80c._3_1_ = 'r';
        builtin_strncpy(acStack_808, "eads", 4);
        acStack_808[4] = 0;
        FUN_00020f58(7, local_820, 1);
    }
    if (0 < DAT_00075588) {
        iVar1 = 0;
        do {
            iVar2 = iVar1 + 1;
            iVar1 = FUN_00031b04(iVar1);
            if ((iVar1 != 0) && (*(int *)(iVar1 + 0x24) != 0)) {
                *(undefined1 *)(*(int *)(iVar1 + 0x24) + 0x16c) = 1;
            }
            iVar1 = iVar2;
        } while (iVar2 < DAT_00075588);
    }
    sleep(1);
    FUN_0002541c(&DAT_00031ee4, 0, 3000);
    if ((DAT_00068bd5 != '\0') &&
        (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
          (6 < DAT_00067db4)))) {
        builtin_strncpy(local_820, "Killing off API thre", 0x14);
        local_80c._0_3_ = 0x6461;
        FUN_00020f58(7, local_820, 1);
    }
    FUN_0002541c(FUN_00023588, DAT_00075598 + DAT_00068fcc * 0x40, 1000);
    return;
}

undefined4 FUN_00031ff4(void)

{
    undefined4 uVar1;
    int iVar2;

    iVar2 = pthread_mutex_lock((pthread_mutex_t *)&DAT_0007453c);
    if (iVar2 == 0) {
        iVar2 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_00074554);
        if (iVar2 == 0) {
            iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_0007453c);
            uVar1 = DAT_00069060;
            if (iVar2 == 0) {
                iVar2 =
                    pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00074554);
                if (iVar2 == 0) {
                    (*DAT_00067ed8)();
                    return uVar1;
                }
                /* WARNING: Subroutine does not return */
                FUN_0002fb24("current_pool", 0x34a);
            }
            goto LAB_0003207c;
        }
    } else {
        FUN_0002efe0("current_pool", 0x346);
    }
    FUN_00030138("current_pool", 0x346);
LAB_0003207c:
    /* WARNING: Subroutine does not return */
    FUN_0002f03c("current_pool", 0x346);
}

void FUN_0003209c(int param_1, int param_2, uint param_3)

{
    int iVar1;
    time_t tVar2;
    int iVar3;
    uint uVar4;
    bool bVar5;

    iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_000766c4);
    if (iVar1 == 0) {
        iVar3 = *(int *)(param_1 + 0x24);
        iVar1 = (int)param_3 >> 0x1f;
        uVar4 = *(uint *)(iVar3 + 0xc0);
        bVar5 = CARRY4(DAT_00076850, param_3);
        DAT_00076850 = DAT_00076850 + param_3;
        DAT_00076854 = DAT_00076854 + iVar1 + (uint)bVar5;
        *(uint *)(iVar3 + 0xc0) = uVar4 + param_3;
        *(uint *)(iVar3 + 0xc4) =
            *(int *)(iVar3 + 0xc4) + iVar1 + (uint)CARRY4(uVar4, param_3);
        if (param_2 == 0) {
            iVar3 = FUN_00031ff4();
            uVar4 = *(uint *)(iVar3 + 0x28);
            *(uint *)(iVar3 + 0x28) = uVar4 + param_3;
            *(uint *)(iVar3 + 0x2c) =
                *(int *)(iVar3 + 0x2c) + iVar1 + (uint)CARRY4(uVar4, param_3);
        } else {
            uVar4 = *(uint *)(param_2 + 0x28);
            *(uint *)(param_2 + 0x28) = uVar4 + param_3;
            *(uint *)(param_2 + 0x2c) =
                *(int *)(param_2 + 0x2c) + iVar1 + (uint)CARRY4(uVar4, param_3);
        }
        iVar1 = *(int *)(param_1 + 0x24);
        tVar2 = time((time_t *)0x0);
        *(time_t *)(iVar1 + 0xe8) = tVar2;
        iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000766c4);
        if (iVar1 == 0) {
            /* WARNING: Could not recover jumptable at 0x0003214c. Too many
             * branches */
            /* WARNING: Treating indirect jump as call */
            (*DAT_00067ed8)();
            return;
        }
    } else {
        FUN_0002efe0("inc_work_stats", 0x228e);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002f03c("inc_work_stats", 0x229c);
}

undefined4 FUN_0003218c(void)

{
    int iVar1;
    undefined4 uVar2;

    iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_0007453c);
    if (iVar1 == 0) {
        iVar1 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_00074554);
        if (iVar1 == 0) {
            iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_0007453c);
            if (iVar1 == 0) {
                uVar2 = *(undefined4 *)(DAT_00069060 + 4);
                iVar1 =
                    pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00074554);
                if (iVar1 == 0) {
                    (*DAT_00067ed8)();
                    return uVar2;
                }
                /* WARNING: Subroutine does not return */
                FUN_0002fb24("cp_prio", 0x1cfc);
            }
            goto LAB_00032218;
        }
    } else {
        FUN_0002efe0("cp_prio", 0x1cfa);
    }
    FUN_00030138("cp_prio", 0x1cfa);
LAB_00032218:
    /* WARNING: Subroutine does not return */
    FUN_0002f03c("cp_prio", 0x1cfa);
}

void FUN_00032238(undefined4 *param_1)

{
    int iVar1;
    int iVar2;
    char acStack_810[2052];

    iVar1 = DAT_00068fd0;
    param_1[7] = 0;
    if ((iVar1 == 0) &&
        (iVar2 = param_1[1], iVar1 = FUN_0003218c(), iVar2 < iVar1)) {
        if ((DAT_00074500 != '\0') ||
            ((DAT_00068bd4 != '\0' || (3 < DAT_00067db4)))) {
            snprintf(acStack_810, 0x800, "Pool %d %s alive, testing stability",
                     *param_1, param_1[0x29]);
            FUN_00020f58(4, acStack_810, 0);
            return;
        }
    } else {
        if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
            (DAT_00067db4 < 6)) {
            return;
        }
        snprintf(acStack_810, 0x800, "Pool %d %s alive", *param_1,
                 param_1[0x29]);
        FUN_00020f58(6, acStack_810, 0);
    }
    return;
}

void FUN_00032400(undefined4 *param_1)

{
    int iVar1;
    char acStack_808[2048];

    iVar1 = FUN_0002f180(param_1, (int)param_1 + 0x61);
    if (iVar1 == 0) {
        return;
    }
    if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
        (DAT_00067db4 < 6)) {
        FUN_00032238(param_1);
        return;
    }
    snprintf(acStack_808, 0x800, "Stratum connection to pool %d resumed",
             *param_1);
    FUN_00020f58(6, acStack_808, 0);
    FUN_00032238(param_1);
    return;
}

undefined1 FUN_00032424(int param_1)

{
    int iVar1;
    int iVar2;

    if (*(int *)(param_1 + 100) != 1) {
        return 0;
    }
    if ((((1 < DAT_00068fd0 - 3U) &&
          (((*(char *)(param_1 + 0x280) == '\0' ||
             (*(char *)(param_1 + 0x61) == '\0')) &&
            (iVar1 = FUN_00031ff4(), param_1 != iVar1)))) &&
         (*(int *)(param_1 + 0x2dc) == 0)) &&
        ((DAT_00068fd0 != 0 || (iVar2 = *(int *)(param_1 + 4),
                                iVar1 = FUN_0003218c(), iVar1 <= iVar2)))) {
        return DAT_00069064;
    }
    return 1;
}

int *FUN_000324b8(void)

{
    int iVar1;
    int *piVar2;
    int iVar3;
    undefined4 uVar4;
    char *__format;
    char local_820[4];
    char acStack_81c[4];
    char acStack_818[4];
    char acStack_814[4];
    char local_810[4];
    char acStack_80c[4];
    char acStack_808[4];
    char acStack_804[4];
    char local_800[4];
    char acStack_7fc[2016];

    piVar2 = (int *)FUN_00022a44(0x738, 1, "cgminer.c", "add_pool", 0x2fa);
    iVar3 = DAT_000733cc;
    *piVar2 = DAT_000733cc;
    iVar1 = DAT_000733cc;
    *(undefined1 *)(piVar2 + 0xa1) = 0;
    piVar2[1] = iVar3;
    DAT_000744c8 = FUN_00022ad4(DAT_000744c8, (iVar1 + 2) * 4, "cgminer.c",
                                "add_pool", 0x306);
    iVar3 = DAT_000733cc * 4;
    DAT_000733cc = DAT_000733cc + 1;
    *(int **)(DAT_000744c8 + iVar3) = piVar2;
    iVar3 = pthread_mutex_init((pthread_mutex_t *)(piVar2 + 0x2f),
                               (pthread_mutexattr_t *)0x0);
    if (iVar3 == 0) {
        iVar3 = pthread_cond_init((pthread_cond_t *)(piVar2 + 0x4a),
                                  (pthread_condattr_t *)0x0);
        if (iVar3 != 0) {
            local_820[0] = 'F';
            local_820[1] = 'a';
            local_820[2] = 'i';
            local_820[3] = 'l';
            acStack_81c[0] = 'e';
            acStack_81c[1] = 'd';
            acStack_81c[2] = ' ';
            acStack_81c[3] = 't';
            acStack_818[0] = 'o';
            acStack_818[1] = ' ';
            acStack_818[2] = 'p';
            acStack_818[3] = 't';
            acStack_814[0] = 'h';
            acStack_814[1] = 'r';
            acStack_814[2] = 'e';
            acStack_814[3] = 'a';
            local_810[0] = 'd';
            local_810[1] = '_';
            local_810[2] = 'c';
            local_810[3] = 'o';
            acStack_80c[0] = 'n';
            acStack_80c[1] = 'd';
            acStack_80c[2] = '_';
            acStack_80c[3] = 'i';
            acStack_808[0] = 'n';
            acStack_808[1] = 'i';
            acStack_808[2] = 't';
            acStack_808[3] = ' ';
            acStack_804[0] = 'i';
            acStack_804[1] = 'n';
            acStack_804[2] = ' ';
            acStack_804[3] = 'a';
            local_800[0] = 'd';
            local_800[1] = 'd';
            local_800[2] = '_';
            local_800[3] = 'p';
            acStack_7fc[0] = 'o';
            acStack_7fc[1] = 'o';
            acStack_7fc[2] = 'l';
            acStack_7fc[3] = '\0';
            goto LAB_0003263c;
        }
        iVar3 = pthread_mutex_init((pthread_mutex_t *)(piVar2 + 0x35),
                                   (pthread_mutexattr_t *)0x0);
        if (iVar3 == 0) {
            iVar3 = pthread_rwlock_init((pthread_rwlock_t *)(piVar2 + 0x3b),
                                        (pthread_rwlockattr_t *)0x0);
            if (iVar3 == 0) {
                iVar3 = pthread_mutex_init((pthread_mutex_t *)(piVar2 + 0xb0),
                                           (pthread_mutexattr_t *)0x0);
                if (iVar3 == 0) {
                    iVar3 =
                        pthread_mutex_init((pthread_mutex_t *)(piVar2 + 0xb9),
                                           (pthread_mutexattr_t *)0x0);
                    if (iVar3 == 0) {
                        iVar3 = pthread_rwlock_init(
                            (pthread_rwlock_t *)(piVar2 + 0xbf),
                            (pthread_rwlockattr_t *)0x0);
                        if (iVar3 == 0) {
                            piVar2[0x22] = -1;
                            piVar2[0x2e] = 0;
                            piVar2[0x28] = (int)"{\"method\": \"getwork\", "
                                                "\"params\": [], \"id\":0}\n";
                            piVar2[0x56] = (int)(piVar2 + 0x56);
                            piVar2[0x57] = (int)(piVar2 + 0x56);
                            piVar2[0xe] = 1;
                            FUN_0002c6a8();
                            *(undefined1 *)(piVar2 + 0x91) = 0;
                            return piVar2;
                        }
                        piVar2 = __errno_location();
                        iVar3 = *piVar2;
                        uVar4 = 0x312;
                        goto LAB_00032614;
                    }
                    piVar2 = __errno_location();
                    iVar3 = *piVar2;
                    uVar4 = 0x312;
                    __format =
                        "Failed to pthread_mutex_init errno=%d in %s %s():%d";
                } else {
                    piVar2 = __errno_location();
                    iVar3 = *piVar2;
                    uVar4 = 0x311;
                    __format =
                        "Failed to pthread_mutex_init errno=%d in %s %s():%d";
                }
            } else {
                piVar2 = __errno_location();
                uVar4 = 0x310;
                iVar3 = *piVar2;
            LAB_00032614:
                __format =
                    "Failed to pthread_rwlock_init errno=%d in %s %s():%d";
            }
        } else {
            piVar2 = __errno_location();
            iVar3 = *piVar2;
            uVar4 = 0x310;
            __format = "Failed to pthread_mutex_init errno=%d in %s %s():%d";
        }
    } else {
        piVar2 = __errno_location();
        iVar3 = *piVar2;
        uVar4 = 0x309;
        __format = "Failed to pthread_mutex_init errno=%d in %s %s():%d";
    }
    snprintf(local_820, 0x800, __format, iVar3, "cgminer.c", "add_pool", uVar4);
LAB_0003263c:
    FUN_00020f58(3, local_820, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

char *FUN_00032704(undefined4 param_1)

{
    char *pcVar1;
    void *pvVar2;
    int iVar3;

    if ((DAT_00069068 == 0) && (DAT_0006906c == 0)) {
        DAT_00069070 = DAT_00069070 + 1;
        if (DAT_000733cc < DAT_00069070) {
            FUN_000324b8();
        }
        iVar3 = *(int *)(DAT_000744c8 + (DAT_00069070 + 0x3fffffff) * 4);
        pcVar1 = (char *)__strdup(param_1);
        FUN_0004014c(param_1, iVar3 + 0xa8);
        pcVar1 = strtok(pcVar1, ":");
        *(char **)(iVar3 + 0xac) = pcVar1;
        if (pcVar1 == (char *)0x0) {
            pcVar1 = "Failed to find : delimited user info";
        } else {
            pcVar1 = strtok((char *)0x0, ":");
            *(char **)(iVar3 + 0xb0) = pcVar1;
            if (pcVar1 == (char *)0x0) {
                pvVar2 = calloc(1, 1);
                *(void **)(iVar3 + 0xb0) = pvVar2;
                pcVar1 = (char *)0x0;
            } else {
                pcVar1 = (char *)0x0;
            }
        }
    } else {
        pcVar1 = "Use only user + pass or userpass, but not both";
    }
    return pcVar1;
}

char *FUN_000327f0(undefined4 param_1)

{
    if (DAT_00069070 != 0) {
        return "Use only user + pass or userpass, but not both";
    }
    DAT_00069068 = DAT_00069068 + 1;
    if (DAT_000733cc < DAT_00069068) {
        FUN_000324b8();
    }
    FUN_0004014c(param_1,
                 *(int *)(DAT_000744c8 + (DAT_00069068 + 0x3fffffff) * 4) +
                     0xac);
    return (char *)0x0;
}

undefined4 FUN_0003286c(void)

{
    DAT_00069074 = DAT_00069074 + 1;
    if (DAT_000733cc < DAT_00069074) {
        FUN_000324b8();
    }
    return *(undefined4 *)(DAT_000744c8 + (DAT_00069074 + 0x3fffffff) * 4);
}

undefined4 FUN_000328b8(undefined4 param_1)

{
    undefined4 *puVar1;
    char *pcVar2;
    char *__haystack;
    char acStack_810[2052];

    puVar1 = (undefined4 *)FUN_0003286c();
    FUN_0002c918(puVar1, param_1);
    __haystack = (char *)puVar1[0x29];
    pcVar2 = strstr(__haystack, ".nicehash.com");
    if ((((pcVar2 != (char *)0x0) ||
          (pcVar2 = strstr(__haystack, "#xnsub"), pcVar2 != (char *)0x0)) &&
         (*(undefined1 *)(puVar1 + 0x91) = 1, DAT_00068bd5 != '\0')) &&
        (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
          (6 < DAT_00067db4)))) {
        snprintf(acStack_810, 0x800, "Pool %d extranonce subscribing enabled.",
                 *puVar1);
        FUN_00020f58(7, acStack_810, 0);
    }
    return 0;
}

char *FUN_000329a4(char *param_1)

{
    char *pcVar1;
    size_t sVar2;
    size_t sVar3;
    long lVar4;
    undefined4 *puVar5;
    char acStack_818[2052];

    pcVar1 = strchr(param_1, 0x3b);
    if (pcVar1 == (char *)0x0) {
        return "No semicolon separated quota;URL pair found";
    }
    sVar2 = strlen(param_1);
    *pcVar1 = '\0';
    sVar3 = strlen(param_1);
    if (sVar3 == 0) {
        pcVar1 = "No parameter for quota found";
    } else if ((int)(sVar2 - (sVar3 + 1)) < 1) {
        pcVar1 = "No parameter for URL found";
    } else {
        lVar4 = strtol(param_1, (char **)0x0, 10);
        if (lVar4 < 0) {
            pcVar1 = "Invalid negative parameter for quota set";
        } else {
            puVar5 = (undefined4 *)FUN_0003286c(lVar4);
            FUN_0002c918(puVar5, param_1 + sVar3 + 1);
            puVar5[0xe] = lVar4;
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (5 < DAT_00067db4)) {
                snprintf(acStack_818, 0x800, "Setting pool %d to quota %d",
                         *puVar5, lVar4);
                FUN_00020f58(6, acStack_818, 0);
            }
            FUN_0002c6a8();
            pcVar1 = (char *)0x0;
        }
    }
    return pcVar1;
}

char *FUN_00032ad4(undefined4 param_1)

{
    if (DAT_00069070 != 0) {
        return "Use only user + pass or userpass, but not both";
    }
    DAT_0006906c = DAT_0006906c + 1;
    if (DAT_000733cc < DAT_0006906c) {
        FUN_000324b8();
    }
    FUN_0004014c(param_1,
                 *(int *)(DAT_000744c8 + (DAT_0006906c + 0x3fffffff) * 4) +
                     0xb0);
    return (char *)0x0;
}

undefined4 FUN_00032b50(void)

{
    undefined4 *puVar1;
    char acStack_808[2048];

    DAT_00069078 = DAT_00069078 + 1;
    if (DAT_000733cc < DAT_00069078) {
        FUN_000324b8();
    }
    puVar1 = *(undefined4 **)(DAT_000744c8 + (DAT_00069078 + 0x3fffffff) * 4);
    if ((DAT_00068bd5 != '\0') &&
        (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
          (6 < DAT_00067db4)))) {
        snprintf(acStack_808, 0x800, "Enable extranonce subscribe on %d",
                 *puVar1);
        FUN_00020f58(7, acStack_808, 0);
    }
    FUN_00040068(puVar1 + 0x91);
    return 0;
}

void FUN_00032c30(int param_1)

{
    int iVar1;
    int *piVar2;
    int local_814;
    char local_810[24];
    undefined2 uStack_7f8;
    undefined1 local_7f6;

    local_814 = 0;
    if (param_1 != 0) {
        iVar1 = pthread_rwlock_trywrlock((pthread_rwlock_t *)(param_1 + 0x140));
        if (iVar1 == 0) {
            local_814 = *(int *)(param_1 + 0x164);
            *(undefined4 *)(param_1 + 0x164) = 0;
            iVar1 =
                pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x140));
            if (iVar1 != 0) {
                piVar2 = __errno_location();
                snprintf(local_810, 0x800,
                         "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d",
                         *piVar2, "cgminer.c", "flush_queue", 0x25a9);
                FUN_00020f58(3, local_810, 1);
                /* WARNING: Subroutine does not return */
                FUN_0002e6b0(1);
            }
            (*DAT_00067ed8)();
            if (((local_814 != 0) &&
                 (FUN_0002cba8(&local_814, "cgminer.c", "flush_queue", 0x25ad),
                  DAT_00068bd5 != '\0')) &&
                ((DAT_00074500 != '\0' ||
                  ((DAT_00068bd4 != '\0' || (6 < DAT_00067db4)))))) {
                builtin_strncpy(local_810, "Discarded queued work it", 0x18);
                uStack_7f8 = 0x6d65;
                local_7f6 = 0;
                FUN_00020f58(7, local_810, 0);
            }
        }
    }
    return;
}

/* WARNING: Globals starting with '_' overlap smaller symbols at the same
 * address */

void FUN_00032da0(void)

{
    int iVar1;
    int *piVar2;
    char *pcVar3;
    int iVar4;
    int iVar5;
    undefined4 *puVar6;
    int *piVar8;
    int *piVar9;
    undefined4 uVar10;
    sysinfo local_860;
    char acStack_820[2048];
    undefined4 *puVar7;

    iVar1 = sysinfo(&local_860);
    if (iVar1 == 0) {
        DAT_00073320 = local_860.uptime;
    } else {
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (5 < DAT_00067db4)) {
            piVar2 = __errno_location();
            iVar1 = *piVar2;
            pcVar3 = strerror(iVar1);
            snprintf(acStack_820, 0x800,
                     "Failed to get sysinfo, errno:%u, reason:%s\n", iVar1,
                     pcVar3);
            FUN_00020f58(6, acStack_820, 0);
        }
        DAT_00073320 = time((time_t *)0x0);
    }
    FUN_000239a4(&DAT_00069020);
    FUN_000257f8(&DAT_0006907c);
    _DAT_00075590 = 0;
    DAT_00075594 = 0;
    _DAT_00075690 = 0;
    DAT_00075694 = 0;
    _DAT_00075688 = 0;
    DAT_0007568c = 0;
    _DAT_00075698 = 0;
    DAT_0007569c = 0;
    DAT_000756a8._0_4_ = 0;
    DAT_000756a8._4_4_ = 0;
    DAT_00076830._0_4_ = 0;
    DAT_00076830._4_4_ = 0;
    puVar6 = &DAT_00069088;
    do {
        puVar7 = puVar6 + 2;
        *puVar6 = 0;
        puVar6[1] = 0;
        puVar6 = puVar7;
    } while (puVar7 != &DAT_000690e8);
    _DAT_00068740 = 0;
    DAT_00068744 = 0x3ff00000;
    DAT_00068720._0_4_ = 0;
    DAT_00068720._4_4_ = 0x3ff00000;
    DAT_00068738._0_4_ = 0;
    DAT_00068738._4_4_ = 0x3ff00000;
    DAT_00073368 = 0;
    DAT_000690e8 = 0;
    DAT_00075580 = 0;
    DAT_00075584 = 0;
    DAT_000767e0 = 0;
    DAT_0007345c = 0;
    DAT_000755d0 = 0;
    DAT_00074494 = 0;
    DAT_000755e8 = 0;
    DAT_000755ec = 0;
    DAT_000755d8 = 0;
    DAT_000755dc = 0;
    DAT_000767e8 = 0;
    DAT_000767ec = 0;
    DAT_00073318 = 0;
    DAT_0007331c = 0;
    DAT_00073380 = 0;
    DAT_00073384 = 0;
    DAT_00076850 = 0;
    DAT_00076854 = 0;
    _DAT_00073370 = 0;
    DAT_00073374 = 0;
    _DAT_00073390 = 0;
    DAT_00073394 = 0;
    DAT_000766b8._0_4_ = 0;
    DAT_000766b8._4_4_ = 0;
    if (0 < DAT_000733cc) {
        piVar9 = DAT_000744c8 + DAT_000733cc;
        piVar2 = DAT_000744c8;
        do {
            piVar8 = piVar2 + 1;
            iVar1 = *piVar2;
            *(undefined4 *)(iVar1 + 0x74) = 0;
            *(undefined4 *)(iVar1 + 8) = 0;
            *(undefined4 *)(iVar1 + 0xc) = 0;
            *(undefined4 *)(iVar1 + 0x10) = 0;
            *(undefined4 *)(iVar1 + 0x14) = 0;
            *(undefined4 *)(iVar1 + 0x78) = 0;
            *(undefined4 *)(iVar1 + 0x7c) = 0;
            *(undefined4 *)(iVar1 + 0x80) = 0;
            *(undefined4 *)(iVar1 + 0x84) = 0;
            *(undefined4 *)(iVar1 + 0x160) = 0;
            *(undefined4 *)(iVar1 + 0x28) = 0;
            *(undefined4 *)(iVar1 + 0x2c) = 0;
            *(undefined4 *)(iVar1 + 0x48) = 0;
            *(undefined4 *)(iVar1 + 0x4c) = 0;
            *(undefined4 *)(iVar1 + 0x50) = 0;
            *(undefined4 *)(iVar1 + 0x54) = 0;
            *(undefined4 *)(iVar1 + 0x58) = 0;
            *(undefined4 *)(iVar1 + 0x5c) = 0;
            *(undefined4 *)(iVar1 + 0x168) = 0;
            *(undefined4 *)(iVar1 + 0x16c) = 0;
            piVar2 = piVar8;
        } while (piVar9 != piVar8);
    }
    FUN_0002d75c();
    if (0 < DAT_000755c0) {
        iVar1 = 0;
        do {
            iVar4 = FUN_0003046c(iVar1);
            FUN_000257f8(iVar4 + 0x170, &DAT_00069020);
            iVar5 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00076838);
            if (iVar5 != 0) {
                piVar2 = __errno_location();
                iVar1 = *piVar2;
                pcVar3 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
                uVar10 = 0x181f;
            LAB_00033128:
                snprintf(acStack_820, 0x800, pcVar3, iVar1, "cgminer.c",
                         "zero_stats", uVar10);
                FUN_00020f58(3, acStack_820, 1);
                /* WARNING: Subroutine does not return */
                FUN_0002e6b0(1);
            }
            *(undefined4 *)(iVar4 + 0x50) = 0;
            *(undefined4 *)(iVar4 + 0x54) = 0;
            *(undefined4 *)(iVar4 + 0x24) = 0;
            *(undefined4 *)(iVar4 + 0x28) = 0;
            *(undefined4 *)(iVar4 + 0x2c) = 0;
            *(undefined4 *)(iVar4 + 0x58) = 0;
            *(undefined4 *)(iVar4 + 0x5c) = 0;
            *(undefined4 *)(iVar4 + 0xdc) = 0;
            *(undefined4 *)(iVar4 + 200) = 0;
            *(undefined4 *)(iVar4 + 0xcc) = 0;
            *(undefined4 *)(iVar4 + 0xd0) = 0;
            *(undefined4 *)(iVar4 + 0xd4) = 0;
            *(undefined4 *)(iVar4 + 0xe0) = 0;
            *(undefined4 *)(iVar4 + 0xe4) = 0;
            *(undefined4 *)(iVar4 + 0xc0) = 0;
            *(undefined4 *)(iVar4 + 0xc4) = 0;
            iVar5 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00076838);
            if (iVar5 != 0) {
                piVar2 = __errno_location();
                iVar1 = *piVar2;
                pcVar3 = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
                uVar10 = 0x182c;
                goto LAB_00033128;
            }
            iVar1 = iVar1 + 1;
            (*DAT_00067ed8)();
            (**(code **)(*(int *)(iVar4 + 4) + 0x60))(iVar4);
        } while (iVar1 < DAT_000755c0);
    }
    return;
}

void FUN_000331a4(int param_1)

{
    int iVar1;
    int *piVar2;
    char *__format;
    code *pcVar3;
    undefined4 uVar4;
    char acStack_808[2048];

    if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
        (5 < DAT_00067db4)) {
        snprintf(acStack_808, 0x800, "%s %d: invalid nonce - HW error",
                 *(undefined4 *)(*(int *)(*(int *)(param_1 + 0x24) + 4) + 8),
                 *(undefined4 *)(*(int *)(param_1 + 0x24) + 8));
        FUN_00020f58(6, acStack_808, 0);
    }
    iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_000766c4);
    if (iVar1 == 0) {
        DAT_00073368 = DAT_00073368 + 1;
        *(int *)(*(int *)(param_1 + 0x24) + 0x2c) =
            *(int *)(*(int *)(param_1 + 0x24) + 0x2c) + 1;
        iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000766c4);
        if (iVar1 == 0) {
            (*DAT_00067ed8)();
            pcVar3 = *(code **)(*(int *)(*(int *)(param_1 + 0x24) + 4) + 0x54);
            if (pcVar3 != (code *)0x0) {
                (*pcVar3)(param_1);
            }
            return;
        }
        piVar2 = __errno_location();
        iVar1 = *piVar2;
        __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
        uVar4 = 0x2237;
    } else {
        piVar2 = __errno_location();
        iVar1 = *piVar2;
        __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar4 = 0x2234;
    }
    snprintf(acStack_808, 0x800, __format, iVar1, "cgminer.c", "inc_hw_errors",
             uVar4);
    FUN_00020f58(3, acStack_808, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

undefined8 FUN_000334c0(int param_1)

{
    uint uVar1;
    int iVar2;
    int *piVar3;
    uint uVar4;
    char *__format;
    uint *puVar5;
    uint uVar6;
    bool bVar7;
    bool bVar8;
    double dVar9;
    double dVar10;
    double dVar11;
    double dVar12;
    undefined8 uVar13;
    undefined4 uVar14;
    char acStack_820[2048];

    dVar11 = (double)FUN_0004a10c(*(undefined4 *)(param_1 + 0xd8),
                                  *(undefined4 *)(param_1 + 0xdc));
    dVar9 = (double)FUN_0004a10c(*(undefined4 *)(param_1 + 0xd0),
                                 *(undefined4 *)(param_1 + 0xd4));
    dVar10 = (double)FUN_0004a10c(*(undefined4 *)(param_1 + 200),
                                  *(undefined4 *)(param_1 + 0xcc));
    dVar12 = (double)FUN_0004a10c(*(undefined4 *)(param_1 + 0xc0),
                                  *(undefined4 *)(param_1 + 0xc4));
    dVar12 = dVar12 + dVar11 * 6.277101735386681e+57 +
             dVar9 * 3.402823669209385e+38 + dVar10 * 1.8446744073709552e+19;
    if (dVar12 == 0.0) {
        dVar12 = 0.0;
    }
    dVar9 = round(2.695953529101131e+67 / dVar12);
    uVar13 = FUN_0004a1d8(SUB84(dVar9, 0), (int)((ulonglong)dVar9 >> 0x20));
    uVar4 = (uint)((ulonglong)uVar13 >> 0x20);
    uVar1 = (uint)uVar13;
    iVar2 = pthread_mutex_lock((pthread_mutex_t *)&DAT_0007453c);
    if (iVar2 == 0) {
        iVar2 = pthread_rwlock_wrlock((pthread_rwlock_t *)&DAT_00074554);
        if (iVar2 == 0) {
            bVar7 = uVar4 <= DAT_00068ff4;
            if (DAT_00068ff4 == uVar4) {
                bVar7 = uVar1 <= DAT_00068ff0;
            }
            if (!bVar7) {
                DAT_00068ff0 = uVar1;
                DAT_00068ff4 = uVar4;
                FUN_0002aef8(uVar1, uVar4, &DAT_00068728, 8, 0);
            }
            puVar5 = (uint *)(*(int *)(param_1 + 0x104) + 0x170);
            uVar6 = *(uint *)(*(int *)(param_1 + 0x104) + 0x174);
            bVar8 = uVar4 <= uVar6;
            if (uVar6 == uVar4) {
                bVar8 = uVar1 <= *puVar5;
            }
            if (!bVar8) {
                *(undefined8 *)puVar5 = uVar13;
            }
            iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00074554);
            if (iVar2 == 0) {
                iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_0007453c);
                if (iVar2 == 0) {
                    (*DAT_00067ed8)();
                    if ((!bVar7) &&
                        (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                          (5 < DAT_00067db4)))) {
                        snprintf(acStack_820, 0x800, "New best share: %s",
                                 &DAT_00068728);
                        FUN_00020f58(6, acStack_820, 0);
                    }
                    return uVar13;
                }
                piVar3 = __errno_location();
                iVar2 = *piVar3;
                __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
                uVar14 = 0x142c;
            } else {
                piVar3 = __errno_location();
                iVar2 = *piVar3;
                __format = "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d";
                uVar14 = 0x142c;
            }
        } else {
            piVar3 = __errno_location();
            iVar2 = *piVar3;
            __format = "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d";
            uVar14 = 0x141e;
        }
    } else {
        piVar3 = __errno_location();
        iVar2 = *piVar3;
        __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar14 = 0x141e;
    }
    snprintf(acStack_820, 0x800, __format, iVar2, "cgminer.c", "share_diff",
             uVar14);
    FUN_00020f58(3, acStack_820, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

void FUN_00033790(int *param_1, int param_2)

{
    char cVar1;
    int iVar2;
    time_t tVar3;
    int *piVar4;
    char *__format;
    double dVar5;
    double dVar6;
    undefined8 uVar7;
    undefined4 uVar8;
    char acStack_820[2052];

    dVar6 = DAT_00068748;
    uVar7 = FUN_000334c0(param_2);
    *(undefined8 *)(param_2 + 0xe8) = uVar7;
    dVar5 = (double)FUN_0004a10c();
    cVar1 = DAT_00074500;
    if (dVar6 <= dVar5) {
        *(undefined1 *)(param_2 + 0x11b) = 1;
        DAT_0007345c = DAT_0007345c + 1;
        *(int *)(*(int *)(param_2 + 0x104) + 0x20) =
            *(int *)(*(int *)(param_2 + 0x104) + 0x20) + 1;
        *(undefined1 *)(param_2 + 0x11a) = 1;
        if (((cVar1 != '\0') || (DAT_00068bd4 != '\0')) || (4 < DAT_00067db4)) {
            snprintf(acStack_820, 0x800, "Found block for pool %d!",
                     **(undefined4 **)(param_2 + 0x104));
            FUN_00020f58(5, acStack_820, 0);
        }
    }
    iVar2 = pthread_mutex_lock((pthread_mutex_t *)&DAT_000766c4);
    if (iVar2 == 0) {
        dVar5 = *(double *)(param_2 + 0xe0);
        dVar6 = (double)FUN_0004a11c(DAT_00076850, DAT_00076854);
        dVar6 = dVar6 + dVar5;
        uVar7 = FUN_0004a1b4(SUB84(dVar6, 0), (int)((ulonglong)dVar6 >> 0x20));
        DAT_00076854 = (undefined4)((ulonglong)uVar7 >> 0x20);
        DAT_00076850 = (undefined4)uVar7;
        iVar2 = *param_1;
        dVar6 = (double)FUN_0004a11c(*(undefined4 *)(iVar2 + 0xc0),
                                     *(undefined4 *)(iVar2 + 0xc4));
        dVar6 = dVar6 + dVar5;
        uVar7 = FUN_0004a1b4(SUB84(dVar6, 0), (int)((ulonglong)dVar6 >> 0x20));
        *(undefined8 *)(iVar2 + 0xc0) = uVar7;
        iVar2 = *(int *)(param_2 + 0x104);
        dVar6 = (double)FUN_0004a11c(*(undefined4 *)(iVar2 + 0x28),
                                     *(undefined4 *)(iVar2 + 0x2c));
        dVar6 = dVar6 + *(double *)(param_2 + 0xe0);
        uVar7 = FUN_0004a1b4(SUB84(dVar6, 0), (int)((ulonglong)dVar6 >> 0x20));
        *(undefined8 *)(iVar2 + 0x28) = uVar7;
        iVar2 = *param_1;
        tVar3 = time((time_t *)0x0);
        *(time_t *)(iVar2 + 0xe8) = tVar3;
        iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000766c4);
        if (iVar2 == 0) {
            (*DAT_00067ed8)();
            return;
        }
        piVar4 = __errno_location();
        iVar2 = *piVar4;
        __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
        uVar8 = 0x2289;
    } else {
        piVar4 = __errno_location();
        iVar2 = *piVar4;
        __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar8 = 0x2284;
    }
    snprintf(acStack_820, 0x800, __format, iVar2, "cgminer.c",
             "update_work_stats", uVar8);
    FUN_00020f58(3, acStack_820, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

int FUN_000339bc(int param_1, int param_2, undefined4 param_3,
                 undefined4 *param_4)

{
    int iVar1;
    undefined4 *puVar2;
    char local_810[16];
    undefined2 uStack_800;
    undefined1 local_7fe;

    puVar2 = param_4;
    if (param_4 != (undefined4 *)0x0) {
        puVar2 = (undefined4 *)0x0;
    }
    if (param_4 != (undefined4 *)0x0) {
        *param_4 = puVar2;
    }
    *(undefined4 *)(param_2 + 0x4c) = param_3;
    FUN_0002b350(param_2);
    if (*(int *)(param_2 + 0xdc) == 0) {
        FUN_00033790(param_1 + 0x24, param_2);
        iVar1 = FUN_00023110(param_2 + 0xc0, param_2 + 0xa0);
        if (iVar1 == 0) {
            if (param_4 != (undefined4 *)0x0) {
                *param_4 = 1;
            }
            if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                (DAT_00067db4 < 6)) {
                iVar1 = 0;
            } else {
                builtin_strncpy(local_810, "Share above targ", 0x10);
                uStack_800 = 0x7465;
                local_7fe = 0;
                FUN_00020f58(6, local_810, 0);
            }
        }
        return iVar1;
    }
    FUN_000331a4(param_1);
    return 0;
}

void FUN_00033ab4(undefined4 *param_1)

{
    int iVar1;
    int *piVar2;
    int iVar3;
    int iVar4;
    undefined4 *puVar5;
    int iVar6;
    uint uVar7;
    char *__format;
    int iVar8;
    int iVar9;
    int iVar10;
    bool bVar11;
    undefined4 uVar12;
    int local_824;
    char acStack_820[2048];

    iVar1 = pthread_mutex_lock(DAT_00069010);
    if (iVar1 != 0) {
        piVar2 = __errno_location();
        iVar1 = *piVar2;
        __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar12 = 0x1ce6;
        goto LAB_00033d60;
    }
    local_824 = DAT_000690ec;
    if (DAT_000690ec != 0) {
        puVar5 = *(undefined4 **)(DAT_000690ec + 0x104);
        iVar8 = 0;
        iVar1 = *(int *)(DAT_000690ec + 0x160);
        local_824 = DAT_000690ec;
        iVar3 = DAT_000690ec;
        do {
            DAT_000690ec = iVar3;
            if (puVar5 == param_1) {
                iVar10 = *(int *)(local_824 + 0x15c);
                puVar5 = *(undefined4 **)(iVar3 + 0x158);
                if (iVar10 == 0) {
                    iVar4 = *(int *)(local_824 + 0x160);
                    if (iVar4 != 0) {
                        iVar6 = puVar5[5];
                        iVar9 = iVar4;
                        DAT_000690ec = iVar4;
                        if (local_824 == puVar5[4] - iVar6)
                            goto LAB_00033cd0;
                        goto LAB_00033b5c;
                    }
                    free((void *)*puVar5);
                    free(*(void **)(DAT_000690ec + 0x158));
                    DAT_000690ec = iVar4;
                } else {
                    iVar6 = puVar5[5];
                    if (local_824 == puVar5[4] - iVar6) {
                    LAB_00033cd0:
                        DAT_000690ec = iVar3;
                        puVar5[4] = iVar10 + iVar6;
                        iVar10 = *(int *)(local_824 + 0x15c);
                        if (iVar10 == 0) {
                            iVar4 = *(int *)(local_824 + 0x160);
                            iVar9 = iVar4;
                            DAT_000690ec = iVar4;
                            goto LAB_00033b5c;
                        }
                        iVar6 = *(int *)(*(int *)(iVar3 + 0x158) + 0x14);
                    }
                    *(undefined4 *)(iVar10 + iVar6 + 8) =
                        *(undefined4 *)(local_824 + 0x160);
                    iVar4 = iVar3;
                    iVar9 = *(int *)(local_824 + 0x160);
                LAB_00033b5c:
                    piVar2 = *(int **)(iVar4 + 0x158);
                    if (iVar9 != 0) {
                        *(undefined4 *)(iVar9 + piVar2[5] + 4) =
                            *(undefined4 *)(local_824 + 0x15c);
                        piVar2 = *(int **)(iVar4 + 0x158);
                    }
                    uVar7 = piVar2[1] - 1U & *(uint *)(local_824 + 0x174);
                    iVar3 = *piVar2 + uVar7 * 0xc;
                    *(int *)(iVar3 + 4) = *(int *)(iVar3 + 4) + -1;
                    puVar5 = (undefined4 *)(iVar4 + 0x158);
                    bVar11 = *(int *)(*(int *)*puVar5 + uVar7 * 0xc) ==
                             local_824 + 0x158;
                    if (bVar11) {
                        iVar4 = *(int *)(local_824 + 0x168);
                        *(int *)(*(int *)*puVar5 + uVar7 * 0xc) = iVar4;
                    }
                    iVar3 = *(int *)(local_824 + 0x168);
                    if (bVar11) {
                        iVar4 = DAT_000690ec;
                    }
                    if (*(int *)(local_824 + 0x164) != 0) {
                        *(int *)(*(int *)(local_824 + 0x164) + 0x10) = iVar3;
                        iVar3 = *(int *)(local_824 + 0x168);
                    }
                    if (iVar3 != 0) {
                        *(undefined4 *)(iVar3 + 0xc) =
                            *(undefined4 *)(local_824 + 0x164);
                    }
                    *(int *)(*(int *)(iVar4 + 0x158) + 0xc) =
                        *(int *)(*(int *)(iVar4 + 0x158) + 0xc) + -1;
                }
                iVar8 = iVar8 + 1;
                FUN_0002cba8(&local_824, "cgminer.c", "clear_pool_work",
                             0x1cec);
            }
            local_824 = iVar1;
            if (iVar1 == 0)
                goto LAB_00033c14;
            puVar5 = *(undefined4 **)(iVar1 + 0x104);
            iVar1 = *(int *)(iVar1 + 0x160);
            iVar3 = DAT_000690ec;
        } while (true);
    }
    iVar1 = pthread_mutex_unlock(DAT_00069010);
    if (iVar1 == 0) {
        (*DAT_00067ed8)();
        return;
    }
    goto LAB_00033d84;
LAB_00033c14:
    iVar1 = pthread_mutex_unlock(DAT_00069010);
    if (iVar1 == 0) {
        (*DAT_00067ed8)();
        if ((iVar8 != 0) &&
            (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
              (5 < DAT_00067db4)))) {
            snprintf(
                acStack_820, 0x800,
                "Cleared %d work items due to stratum disconnect on pool %d",
                iVar8, *param_1);
            FUN_00020f58(6, acStack_820, 0);
        }
        return;
    }
LAB_00033d84:
    piVar2 = __errno_location();
    iVar1 = *piVar2;
    __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
    uVar12 = 0x1cf0;
LAB_00033d60:
    snprintf(acStack_820, 0x800, __format, iVar1, "cgminer.c",
             "clear_pool_work", uVar12);
    FUN_00020f58(3, acStack_820, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

void FUN_00033ddc(undefined4 *param_1)

{
    int *piVar1;
    int iVar2;
    int *piVar3;
    int *piVar4;
    char *__format;
    undefined4 *puVar5;
    int iVar6;
    int *piVar7;
    uint uVar8;
    uint uVar9;
    int *piVar10;
    bool bVar11;
    double dVar12;
    undefined4 uVar13;
    char acStack_830[2052];

    iVar2 = pthread_mutex_lock((pthread_mutex_t *)&DAT_000690f0);
    if (iVar2 != 0) {
        piVar3 = __errno_location();
        iVar2 = *piVar3;
        __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar13 = 0x1cc7;
        goto LAB_000340e4;
    }
    if (DAT_00069108 != (int *)0x0) {
        dVar12 = 0.0;
        puVar5 = *(undefined4 **)(DAT_00069108[9] + 0x104);
        uVar9 = 0;
        piVar7 = (int *)DAT_00069108[2];
        piVar3 = DAT_00069108;
        piVar4 = DAT_00069108;
        do {
            piVar1 = piVar7;
            DAT_00069108 = piVar4;
            if (puVar5 == param_1) {
                iVar2 = piVar3[1];
                puVar5 = (undefined4 *)*piVar4;
                if (iVar2 == 0) {
                    piVar7 = (int *)piVar3[2];
                    if (piVar7 != (int *)0x0) {
                        iVar6 = puVar5[5];
                        piVar10 = piVar7;
                        DAT_00069108 = piVar7;
                        if (piVar3 == (int *)(puVar5[4] - iVar6))
                            goto LAB_00034048;
                        goto LAB_00033e8c;
                    }
                    free((void *)*puVar5);
                    free((void *)*piVar4);
                    DAT_00069108 = piVar7;
                } else {
                    iVar6 = puVar5[5];
                    if (piVar3 == (int *)(puVar5[4] - iVar6)) {
                    LAB_00034048:
                        DAT_00069108 = piVar4;
                        puVar5[4] = iVar2 + iVar6;
                        iVar2 = piVar3[1];
                        if (iVar2 == 0) {
                            piVar7 = (int *)piVar3[2];
                            piVar10 = piVar7;
                            DAT_00069108 = piVar7;
                            goto LAB_00033e8c;
                        }
                        iVar6 = *(int *)(*piVar4 + 0x14);
                    }
                    *(int *)(iVar2 + iVar6 + 8) = piVar3[2];
                    piVar7 = (int *)piVar3[2];
                    piVar10 = piVar4;
                LAB_00033e8c:
                    piVar4 = (int *)*piVar10;
                    if (piVar7 != (int *)0x0) {
                        *(int *)((int)piVar7 + piVar4[5] + 4) = piVar3[1];
                        piVar4 = (int *)*piVar10;
                    }
                    uVar8 = piVar4[1] - 1U & piVar3[7];
                    iVar2 = *piVar4 + uVar8 * 0xc;
                    *(int *)(iVar2 + 4) = *(int *)(iVar2 + 4) + -1;
                    if (*(int **)(*(int *)*piVar10 + uVar8 * 0xc) == piVar3) {
                        *(int *)(*(int *)*piVar10 + uVar8 * 0xc) = piVar3[4];
                    }
                    iVar2 = piVar3[4];
                    if (piVar3[3] != 0) {
                        *(int *)(piVar3[3] + 0x10) = iVar2;
                        iVar2 = piVar3[4];
                    }
                    if (iVar2 != 0) {
                        *(int *)(iVar2 + 0xc) = piVar3[3];
                    }
                    *(int *)(*piVar10 + 0xc) = *(int *)(*piVar10 + 0xc) + -1;
                }
                uVar9 = uVar9 + 1;
                dVar12 = dVar12 + *(double *)(piVar3[9] + 0x178);
                FUN_0002cba8(piVar3 + 9, "cgminer.c", "clear_stratum_shares",
                             0x1ccf);
                param_1[0xb7] = param_1[0xb7] + -1;
                free(piVar3);
            }
            if (piVar1 == (int *)0x0)
                goto LAB_00033f54;
            puVar5 = *(undefined4 **)(piVar1[9] + 0x104);
            piVar7 = (int *)piVar1[2];
            piVar3 = piVar1;
            piVar4 = DAT_00069108;
        } while (true);
    }
    iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000690f0);
    if (iVar2 == 0) {
        (*DAT_00067ed8)();
        return;
    }
    goto LAB_00034108;
LAB_00033f54:
    iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000690f0);
    if (iVar2 == 0) {
        (*DAT_00067ed8)();
        if (uVar9 != 0) {
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (3 < DAT_00067db4)) {
                snprintf(acStack_830, 0x800,
                         "Lost %d shares due to stratum disconnect on pool %d",
                         uVar9, *param_1);
                FUN_00020f58(4, acStack_830, 0);
            }
            DAT_000766b8 = DAT_000766b8 + dVar12;
            bVar11 = CARRY4(DAT_00073318, uVar9);
            DAT_00073318 = DAT_00073318 + uVar9;
            DAT_0007331c = DAT_0007331c + ((int)uVar9 >> 0x1f) + (uint)bVar11;
            *(double *)(param_1 + 0x16) = *(double *)(param_1 + 0x16) + dVar12;
            param_1[0x1e] = param_1[0x1e] + uVar9;
        }
        return;
    }
LAB_00034108:
    piVar3 = __errno_location();
    iVar2 = *piVar3;
    __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
    uVar13 = 0x1cd5;
LAB_000340e4:
    snprintf(acStack_830, 0x800, __format, iVar2, "cgminer.c",
             "clear_stratum_shares", uVar13);
    FUN_00020f58(3, acStack_830, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

void FUN_00034178(int *param_1)

{
    int iVar1;
    int iVar2;
    int *piVar3;
    int *piVar4;
    char *__format;
    int iVar5;
    int *piVar6;
    int iVar7;
    int iVar8;
    int *piVar9;
    undefined4 uVar10;
    undefined8 uVar11;
    char acStack_828[2052];

    iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_0007453c);
    if (iVar1 == 0) {
        iVar2 = pthread_rwlock_wrlock((pthread_rwlock_t *)&DAT_00074554);
        piVar4 = DAT_000744c8;
        iVar5 = DAT_000733cc;
        piVar3 = DAT_00069060;
        iVar1 = DAT_00068fd0;
        if (iVar2 != 0) {
            piVar3 = __errno_location();
            iVar1 = *piVar3;
            __format = "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d";
            uVar10 = 0x147b;
            goto LAB_0003454c;
        }
        iVar7 = *DAT_00069060;
        iVar2 = 0;
        if (param_1 == (int *)0x0) {
            switch (DAT_00068fd0) {
            case 0:
            case 3:
            case 4:
            switchD_0003424c_caseD_0:
            switchD_00034640_caseD_0:
                if (0 < iVar5)
                    goto switchD_0003422c_caseD_0;
            default:
            switchD_00034640_default:
                piVar6 = (int *)DAT_000744c8[iVar7];
                break;
            case 1:
            case 2:
            LAB_00034494:
                iVar1 = DAT_000733cc;
                if (1 < DAT_000733cc) {
                    iVar2 = 1;
                    iVar5 = iVar7;
                    do {
                        iVar5 = iVar5 + 1;
                        if (iVar5 < iVar1) {
                            piVar6 = piVar4 + iVar5;
                        } else {
                            iVar5 = 0;
                            piVar6 = piVar4;
                        }
                        piVar6 = (int *)*piVar6;
                        if ((*(char *)((int)piVar6 + 0x61) == '\0') &&
                            (piVar6[0x19] == 1)) {
                            uVar11 = FUN_0002b684(piVar6);
                            piVar4 = (int *)((ulonglong)uVar11 >> 0x20);
                            if ((int)uVar11 == 0)
                                goto LAB_0003430c;
                        }
                        iVar2 = iVar2 + 1;
                    } while (iVar2 != iVar1);
                }
            switchD_0003422c_default:
                piVar6 = (int *)piVar4[iVar7];
            }
        } else {
            iVar8 = param_1[1];
            if (iVar8 != 0) {
                if (DAT_000733cc < 1) {
                    param_1[1] = 0;
                    switch (iVar1) {
                    case 0:
                    case 3:
                    case 4:
                        goto switchD_00034640_caseD_0;
                    case 1:
                    case 2:
                        goto switchD_00034640_caseD_1;
                    default:
                        goto switchD_00034640_default;
                    }
                }
                piVar9 = DAT_000744c8 + DAT_000733cc;
                piVar6 = DAT_000744c8;
                while (true) {
                    iVar5 = *(int *)(*piVar6 + 4);
                    if (iVar5 < iVar8) {
                        *(int *)(*piVar6 + 4) = iVar5 + 1;
                    }
                    if (piVar9 == piVar6 + 1)
                        break;
                    iVar8 = param_1[1];
                    piVar6 = piVar6 + 1;
                }
                param_1[1] = 0;
                switch (iVar1) {
                case 0:
                case 3:
                case 4:
                    goto switchD_0003422c_caseD_0;
                case 1:
                case 2:
                    goto switchD_0003422c_caseD_1;
                default:
                    goto switchD_0003422c_default;
                }
            }
            switch (DAT_00068fd0) {
            case 0:
            case 3:
            case 4:
                goto switchD_0003424c_caseD_0;
            case 1:
            case 2:
            switchD_00034640_caseD_1:
                piVar4 = DAT_000744c8;
            switchD_0003422c_caseD_1:
                if (*(char *)((int)param_1 + 0x61) != '\0')
                    goto LAB_00034494;
                piVar6 = (int *)piVar4[*param_1];
                break;
            default:
                goto switchD_00034640_default;
            }
        }
        goto LAB_0003430c;
    }
    piVar3 = __errno_location();
    iVar1 = *piVar3;
    uVar10 = 0x147b;
LAB_00034538:
    __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
    goto LAB_0003454c;
switchD_0003422c_caseD_0:
    do {
        iVar1 = FUN_0002b7bc(iVar2);
        if ((*(char *)(iVar1 + 0x61) == '\0') && (*(int *)(iVar1 + 100) == 1)) {
            uVar11 = FUN_0002b684(iVar1, iVar1);
            if ((int)uVar11 == 0) {
                piVar6 =
                    (int *)DAT_000744c8[*(int *)((ulonglong)uVar11 >> 0x20)];
                goto LAB_0003430c;
            }
        }
        iVar2 = iVar2 + 1;
    } while (iVar2 < DAT_000733cc);
    piVar6 = (int *)DAT_000744c8[iVar7];
LAB_0003430c:
    DAT_00069060 = piVar6;
    iVar1 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00074554);
    if (iVar1 != 0) {
        piVar3 = __errno_location();
        iVar1 = *piVar3;
        __format = "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d";
        uVar10 = 0x14cc;
        goto LAB_0003454c;
    }
    iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_0007453c);
    if (iVar1 == 0) {
        (*DAT_00067ed8)();
        if ((piVar3 != piVar6) && (1 < DAT_00068fd0 - 3U)) {
            if ((DAT_00074500 == '\0') &&
                ((DAT_00068bd4 == '\0' && (DAT_00067db4 < 4)))) {
            LAB_0003450c:
                if (3 < DAT_00067db4)
                    goto LAB_00034428;
            } else {
                snprintf(acStack_828, 0x800, "Switching to pool %d %s", *piVar6,
                         piVar6[0x29]);
                FUN_00020f58(4, acStack_828, 0);
                if ((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0'))
                    goto LAB_0003450c;
            LAB_00034428:
                snprintf(
                    acStack_828, 0x800,
                    "last_pool->pool_no = %d, last_pool->pool->rpc_url = %s",
                    *piVar3, piVar3[0x29]);
                FUN_00020f58(4, acStack_828, 0);
            }
            FUN_00033ab4(piVar3);
        }
        iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_0006910c);
        if (iVar1 != 0) {
            piVar3 = __errno_location();
            iVar1 = *piVar3;
            uVar10 = 0x14d5;
            goto LAB_00034538;
        }
        pthread_cond_broadcast((pthread_cond_t *)&DAT_00069128);
        iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_0006910c);
        if (iVar1 == 0) {
            (*DAT_00067ed8)();
            return;
        }
        piVar3 = __errno_location();
        iVar1 = *piVar3;
        uVar10 = 0x14d7;
    } else {
        piVar3 = __errno_location();
        iVar1 = *piVar3;
        uVar10 = 0x14cc;
    }
    __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
LAB_0003454c:
    snprintf(acStack_828, 0x800, __format, iVar1, "cgminer.c", "switch_pools",
             uVar10);
    FUN_00020f58(3, acStack_828, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

void FUN_0003466c(undefined4 *param_1)

{
    int iVar1;
    undefined4 *puVar2;
    char acStack_808[2048];

    iVar1 = FUN_0002f098(param_1, (int)param_1 + 0x61);
    if (iVar1 == 0) {
        FUN_000239a4(param_1 + 0x22);
        puVar2 = (undefined4 *)FUN_00031ff4();
        if (param_1 == puVar2) {
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (3 < DAT_00067db4)) {
                snprintf(acStack_808, 0x800, "Pool %d %s not responding!",
                         *param_1, param_1[0x29]);
                FUN_00020f58(4, acStack_808, 0);
            }
            FUN_00034178(0);
            return;
        }
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (5 < DAT_00067db4)) {
            snprintf(acStack_808, 0x800, "Pool %d %s failed to return work",
                     *param_1, param_1[0x29]);
            FUN_00020f58(6, acStack_808, 0);
            return;
        }
    }
    return;
}

/* WARNING: Restarted to delay deadcode elimination for space: ram */

undefined4 FUN_0003479c(void)

{
    pthread_t __th;
    undefined4 *puVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    int iVar5;
    int iVar6;
    char local_828[16];
    uint local_818;
    char acStack_814[8];
    ushort local_80c;
    undefined1 local_80a;

    __th = pthread_self();
    pthread_detach(__th);
    FUN_0002541c(FUN_00023588, DAT_00075598 + DAT_00069058 * 0x40, 1000);
    sleep(1);
    pthread_mutex_lock((pthread_mutex_t *)&DAT_00069158);
    if (DAT_00068ef4 != (void *)0x0) {
        free(DAT_00068ef4);
    }
    iVar4 = DAT_000733cc;
    if (0 < DAT_000733cc) {
        iVar2 = 0;
        do {
            puVar1 = *(undefined4 **)(DAT_000744c8 + iVar2 * 4);
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (4 < DAT_00067db4)) {
                snprintf(
                    local_828, 0x800,
                    "before add pool, pool->pool_no = %d, pool->rpc_url = %s\n",
                    *puVar1, puVar1[0x29]);
                FUN_00020f58(5, local_828, 0);
            }
            iVar2 = iVar2 + 1;
        } while (iVar4 != iVar2);
    }
    FUN_0002d8f0();
    if (DAT_000733cc == iVar4) {
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (3 < DAT_00067db4)) {
            builtin_strncpy(local_828, "Input pool error", 0x10);
            local_818._0_1_ = ',';
            local_818._1_1_ = ' ';
            local_818._2_1_ = 't';
            local_818._3_1_ = 'r';
            builtin_strncpy(acStack_814, "y again\n", 8);
            local_80c = local_80c & 0xff00;
            FUN_00020f58(4, local_828, 0);
        }
    } else {
        DAT_00069170 = '\0';
        iVar2 = DAT_000733cc;
        if (iVar4 < DAT_000733cc) {
            iVar6 = iVar4 << 2;
            iVar5 = iVar4;
            do {
                iVar3 = *(int *)(DAT_000744c8 + iVar6);
                if (*(int *)(iVar3 + 100) != 1) {
                    FUN_0002b664(iVar3 + 100);
                }
                iVar2 = DAT_000733cc;
                iVar5 = iVar5 + 1;
                *(undefined1 *)(iVar3 + 0x61) = 1;
                iVar6 = iVar6 + 4;
            } while (iVar5 < iVar2);
        }
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (4 < DAT_00067db4)) {
            snprintf(local_828, 0x800,
                     "total_pools = %d, need to remove %d pools\n", iVar2,
                     iVar4);
            FUN_00020f58(5, local_828, 0);
        }
        if (0 < DAT_000733cc) {
            iVar2 = 0;
            do {
                puVar1 = *(undefined4 **)(DAT_000744c8 + iVar2 * 4);
                if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                    (4 < DAT_00067db4)) {
                    snprintf(local_828, 0x800,
                             "after add pool, pool->pool_no = %d, "
                             "pool->rpc_url = %s\n",
                             *puVar1, puVar1[0x29]);
                    FUN_00020f58(5, local_828, 0);
                }
                iVar2 = iVar2 + 1;
            } while (iVar2 < DAT_000733cc);
        }
        if (0 < iVar4) {
            iVar2 = 0;
            do {
                iVar5 = *(int *)(DAT_000744c8 + iVar2 * 4);
                iVar6 = FUN_00031ff4();
                if (iVar5 == iVar6) {
                    FUN_00034178(0);
                }
                iVar2 = iVar2 + 1;
                *(undefined4 *)(iVar5 + 100) = 0;
                DAT_00074578 = DAT_00074578 + -1;
                DAT_0006906c = DAT_0006906c + -1;
                DAT_00069068 = DAT_00069068 + -1;
                DAT_00069074 = DAT_00069074 + -1;
                FUN_0002d0d8(iVar5);
            } while (iVar4 != iVar2);
        }
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (4 < DAT_00067db4)) {
            snprintf(local_828, 0x800, "total_pools after removed = %d\n",
                     DAT_000733cc);
            FUN_00020f58(5, local_828, 0);
        }
        if (0 < DAT_000733cc) {
            iVar4 = 0;
            do {
                puVar1 = *(undefined4 **)(DAT_000744c8 + iVar4 * 4);
                if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                    (4 < DAT_00067db4)) {
                    snprintf(local_828, 0x800,
                             "after remove pool, pool->pool_no = %d, "
                             "pool->rpc_url = %s\n",
                             *puVar1, puVar1[0x29]);
                    FUN_00020f58(5, local_828, 0);
                }
                iVar4 = iVar4 + 1;
            } while (iVar4 < DAT_000733cc);
        }
        iVar4 = 0xb4;
        FUN_0002b41c();
        do {
            sleep(1);
            if (DAT_00069170 != '\0') {
                DAT_00069178 = 1;
                goto LAB_00034bd4;
            }
            iVar4 = iVar4 + -1;
        } while (iVar4 != 0);
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (2 < DAT_00067db4)) {
            builtin_strncpy(local_828, "error pool input", 0x10);
            local_818 = local_818 & 0xffffff00;
            FUN_00020f58(3, local_828, 0);
        }
        if (0 < DAT_000733cc) {
            iVar4 = 0;
            do {
                puVar1 = *(undefined4 **)(DAT_000744c8 + iVar4 * 4);
                if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                    (2 < DAT_00067db4)) {
                    snprintf(local_828, 0x800,
                             "pool%d, url = %s, user = %s, pass = %s\n",
                             *puVar1, puVar1[0x29], puVar1[0x2b], puVar1[0x2c]);
                    FUN_00020f58(3, local_828, 0);
                }
                iVar4 = iVar4 + 1;
            } while (iVar4 < DAT_000733cc);
        }
    }
LAB_00034bd4:
    pthread_mutex_unlock((pthread_mutex_t *)&DAT_00069158);
    iVar2 = DAT_00075598 + DAT_00069058 * 0x40;
    iVar4 = FUN_00025164(iVar2, 0, FUN_00034df4);
    if (iVar4 == 0) {
        pthread_detach(*(pthread_t *)(iVar2 + 0xc));
        sleep(1);
        DAT_00069174 = 0;
        return 0;
    }
    builtin_strncpy(local_828, "watchpool thread", 0x10);
    local_818._0_1_ = ' ';
    local_818._1_1_ = 'c';
    local_818._2_1_ = 'r';
    local_818._3_1_ = 'e';
    builtin_strncpy(acStack_814, "ate fail", 8);
    local_80c = 0x6465;
    local_80a = 0;
    FUN_00020f58(3, local_828, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1, 0);
}

void FUN_00034df4(void)

{
    int *piVar1;
    uint uVar2;
    int iVar3;
    time_t tVar4;
    int *piVar5;
    int *piVar6;
    undefined4 uVar7;
    char *pcVar8;
    pthread_mutex_t *__mutex;
    undefined4 *puVar9;
    undefined4 *puVar10;
    int iVar11;
    uint uVar12;
    int iVar13;
    int iVar14;
    int *piVar15;
    char *pcVar16;
    bool bVar17;
    double dVar18;
    undefined1 auStack_850[8];
    int local_848[2];
    int local_840[2];
    char acStack_838[2052];

    pthread_setcanceltype(1, (int *)0x0);
    FUN_000250a8("Watchpool");
    FUN_0002c148();
    iVar14 = 0;
    FUN_00023a18(auStack_850);
    while (true) {
        iVar14 = iVar14 + 1;
        if (0x78 < iVar14) {
            iVar14 = 0;
        }
        FUN_000239a4(local_848);
        if (0 < DAT_000733cc)
            break;
    LAB_00034f80:
        iVar11 = FUN_00031ff4();
        if (*(char *)(iVar11 + 0x61) != '\0') {
            FUN_00034178(0);
        }
        if ((DAT_00068fd0 == 2) &&
            (iVar11 = local_848[0] - DAT_00069180,
             iVar11 != DAT_00073464 * 0x3c &&
                 iVar11 + DAT_00073464 * -0x3c < 0 ==
                     SBORROW4(iVar11, DAT_00073464 * 0x3c))) {
            FUN_000239a4(&DAT_00069180);
            FUN_00034178(0);
        }
        FUN_00023a24(auStack_850, 5000);
        FUN_00023a18(auStack_850);
    }
    iVar11 = 0;
LAB_00034ee0:
    puVar10 = *(undefined4 **)(DAT_000744c8 + iVar11 * 4);
    if ((DAT_0006917c == '\0') && (DAT_000766c0 == 0)) {
        __mutex = (pthread_mutex_t *)(puVar10 + 0x2f);
        FUN_000239a4(local_840);
        iVar3 = pthread_mutex_lock(__mutex);
        if (iVar3 != 0) {
            piVar15 = __errno_location();
            uVar7 = 0x27ae;
            pcVar8 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
            pcVar16 = "reap_curl";
            goto LAB_0003552c;
        }
        piVar5 = puVar10 + 0x56;
        piVar15 = (int *)*piVar5;
        if (piVar5 != piVar15) {
            iVar3 = puVar10[0x48];
            if (1 < iVar3) {
                iVar13 = 0;
                piVar6 = (int *)*piVar15;
                do {
                    piVar1 = piVar6;
                    if (300 < local_840[0] - piVar15[2]) {
                        puVar10[0x48] = iVar3 + -1;
                        iVar13 = iVar13 + 1;
                        iVar3 = *piVar15;
                        piVar6 = (int *)piVar15[1];
                        *(int **)(iVar3 + 4) = piVar6;
                        *piVar6 = iVar3;
                        free(piVar15 + -1);
                    }
                    if (piVar5 == piVar1) {
                        iVar3 = pthread_mutex_unlock(__mutex);
                        if (iVar3 != 0)
                            goto LAB_000355bc;
                        (*DAT_00067ed8)();
                        if (((iVar13 != 0) && (DAT_00068bd5 != '\0')) &&
                            ((DAT_00074500 != '\0' ||
                              ((DAT_00068bd4 != '\0' ||
                                (6 < DAT_00067db4)))))) {
                            pcVar8 = "";
                            if (iVar13 != 1) {
                                pcVar8 = "s";
                            }
                            snprintf(acStack_838, 0x800,
                                     "Reaped %d curl%s from pool %d", iVar13,
                                     pcVar8, *puVar10);
                            FUN_00020f58(7, acStack_838, 0);
                        }
                        break;
                    }
                    iVar3 = puVar10[0x48];
                    piVar6 = (int *)*piVar1;
                    piVar15 = piVar1;
                } while (1 < iVar3);
            }
        LAB_0003514c:
            tVar4 = time((time_t *)0x0);
            iVar3 = pthread_mutex_lock((pthread_mutex_t *)&DAT_000690f0);
            if (iVar3 != 0) {
                piVar15 = __errno_location();
                uVar7 = 0x27d2;
                pcVar8 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
                pcVar16 = "prune_stratum_shares";
                goto LAB_0003552c;
            }
            uVar2 = 0;
            if (DAT_00069108 != (int *)0x0) {
                puVar9 = *(undefined4 **)(DAT_00069108[9] + 0x104);
                piVar6 = (int *)DAT_00069108[2];
                piVar15 = DAT_00069108;
                piVar5 = DAT_00069108;
                do {
                    piVar1 = piVar6;
                    DAT_00069108 = piVar5;
                    if ((puVar10 == puVar9) && (piVar15[0xb] + 0x78 < tVar4)) {
                        iVar3 = piVar15[1];
                        puVar9 = (undefined4 *)*piVar5;
                        if (iVar3 == 0) {
                            piVar6 = (int *)piVar15[2];
                            if (piVar6 != (int *)0x0) {
                                iVar13 = puVar9[5];
                                DAT_00069108 = piVar6;
                                if (piVar15 == (int *)(puVar9[4] - iVar13))
                                    goto LAB_000354b8;
                                goto LAB_00035200;
                            }
                            free((void *)*puVar9);
                            free((void *)*piVar5);
                            DAT_00069108 = piVar6;
                        } else {
                            iVar13 = puVar9[5];
                            if (piVar15 == (int *)(puVar9[4] - iVar13)) {
                            LAB_000354b8:
                                DAT_00069108 = piVar5;
                                puVar9[4] = iVar3 + iVar13;
                                iVar3 = piVar15[1];
                                if (iVar3 == 0) {
                                    piVar6 = (int *)piVar15[2];
                                    DAT_00069108 = piVar6;
                                    goto LAB_00035200;
                                }
                                iVar13 = *(int *)(*piVar5 + 0x14);
                            }
                            *(int *)(iVar3 + iVar13 + 8) = piVar15[2];
                            piVar6 = piVar5;
                        LAB_00035200:
                            if (piVar15[2] != 0) {
                                *(int *)(piVar15[2] + *(int *)(*piVar6 + 0x14) +
                                         4) = piVar15[1];
                            }
                            uVar12 = ((int *)*piVar6)[1] - 1U & piVar15[7];
                            iVar3 = *(int *)*piVar6 + uVar12 * 0xc;
                            *(int *)(iVar3 + 4) = *(int *)(iVar3 + 4) + -1;
                            if (*(int **)(*(int *)*piVar6 + uVar12 * 0xc) ==
                                piVar15) {
                                *(int *)(*(int *)*piVar6 + uVar12 * 0xc) =
                                    piVar15[4];
                            }
                            if (piVar15[3] != 0) {
                                *(int *)(piVar15[3] + 0x10) = piVar15[4];
                            }
                            if (piVar15[4] != 0) {
                                *(int *)(piVar15[4] + 0xc) = piVar15[3];
                            }
                            *(int *)(*piVar6 + 0xc) =
                                *(int *)(*piVar6 + 0xc) + -1;
                        }
                        uVar2 = uVar2 + 1;
                        FUN_0002cba8(piVar15 + 9, "cgminer.c",
                                     "prune_stratum_shares", 0x27d9);
                        free(piVar15);
                    }
                    if (piVar1 == (int *)0x0)
                        goto LAB_000352bc;
                    puVar9 = *(undefined4 **)(piVar1[9] + 0x104);
                    piVar6 = (int *)piVar1[2];
                    piVar15 = piVar1;
                    piVar5 = DAT_00069108;
                } while (true);
            }
            iVar3 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000690f0);
            if (iVar3 == 0) {
                (*DAT_00067ed8)();
                goto LAB_00034f04;
            }
            goto LAB_00035580;
        }
        iVar3 = pthread_mutex_unlock(__mutex);
        if (iVar3 == 0) {
            (*DAT_00067ed8)();
            goto LAB_0003514c;
        }
    LAB_000355bc:
        piVar15 = __errno_location();
        pcVar16 = "reap_curl";
        uVar7 = 0x27c0;
        goto LAB_00035594;
    }
    goto LAB_00034f04;
LAB_000352bc:
    iVar3 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000690f0);
    if (iVar3 != 0) {
    LAB_00035580:
        piVar15 = __errno_location();
        pcVar16 = "prune_stratum_shares";
        uVar7 = 0x27df;
    LAB_00035594:
        pcVar8 = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
    LAB_0003552c:
        snprintf(acStack_838, 0x800, pcVar8, *piVar15, "cgminer.c", pcVar16,
                 uVar7);
        FUN_00020f58(3, acStack_838, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002e6b0(1);
    }
    (*DAT_00067ed8)();
    if (uVar2 != 0) {
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (3 < DAT_00067db4)) {
            snprintf(
                acStack_838, 0x800,
                "Lost %d shares due to no stratum share response from pool %d",
                uVar2, *puVar10);
            FUN_00020f58(4, acStack_838, 0);
        }
        bVar17 = CARRY4(DAT_00073318, uVar2);
        DAT_00073318 = DAT_00073318 + uVar2;
        puVar10[0x1e] = puVar10[0x1e] + uVar2;
        DAT_0007331c = DAT_0007331c + ((int)uVar2 >> 0x1f) + (uint)bVar17;
    }
LAB_00034f04:
    if (iVar14 == 0x78) {
        uVar2 = puVar10[0x26];
        uVar12 = puVar10[10];
        dVar18 = (double)FUN_0004a11c(
            uVar12 - uVar2,
            puVar10[0xb] - (((int)uVar2 >> 0x1f) + (uint)(uVar12 < uVar2)));
        puVar10[0x26] = uVar12;
        dVar18 = (*(double *)(puVar10 + 0x24) + dVar18 * 0.63) / 1.63;
        *(double *)(puVar10 + 0x24) = dVar18;
        puVar10[0x27] = (int)(longlong)dVar18;
    }
    if ((puVar10[0x19] != 0) && (*(char *)(puVar10 + 0x47) == '\0')) {
        iVar3 = FUN_0002f1e8(puVar10, 1);
        if (iVar3 == 0) {
            FUN_000239a4(puVar10 + 0x22);
        } else {
            iVar3 = FUN_0002f180(puVar10, (int)puVar10 + 0x61);
            if (iVar3 != 0) {
                FUN_00032238(puVar10);
            }
        }
        if (((*(char *)((int)puVar10 + 0x61) == '\0') && (DAT_00068fd0 == 0)) &&
            ((iVar13 = puVar10[1], iVar3 = FUN_0003218c(),
              iVar13 < iVar3 &&
                  (DAT_00068750 < local_848[0] - puVar10[0x22])))) {
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (3 < DAT_00067db4)) {
                snprintf(acStack_838, 0x800,
                         "Pool %d %s stable for >%d seconds", *puVar10,
                         puVar10[0x29], DAT_00068750);
                FUN_00020f58(4, acStack_838, 0);
            }
            FUN_00034178(0);
        }
    }
    iVar11 = iVar11 + 1;
    if (DAT_000733cc <= iVar11)
        goto LAB_00034f80;
    goto LAB_00034ee0;
}

int FUN_000355fc(int param_1)

{
    code *pcVar1;
    int iVar2;
    int iVar3;
    undefined4 *puVar4;
    int iVar5;
    int *piVar6;
    char *__format;
    int iVar7;
    int iVar8;
    int iVar9;
    bool bVar10;
    undefined4 uVar11;
    timespec local_828;
    int local_820;
    int local_81c;
    char local_818[36];
    uint local_7f4;
    char acStack_7f0[2008];

    iVar3 = pthread_mutex_lock(DAT_00069010);
    if (iVar3 != 0) {
        piVar6 = __errno_location();
        iVar3 = *piVar6;
        __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar11 = 0x1ff6;
        goto LAB_00035a18;
    }
    if ((DAT_000690ec == 0) ||
        (*(int *)(*(int *)(DAT_000690ec + 0x158) + 0xc) == 0)) {
        if (param_1 != 0) {
            do {
                FUN_000239a4(&local_820);
                local_828.tv_nsec = local_81c * 1000;
                local_828.tv_sec = local_820 + 10;
                pthread_cond_signal((pthread_cond_t *)&DAT_000744d0);
                iVar3 = pthread_cond_timedwait(
                    (pthread_cond_t *)(DAT_000755e0 + 0x28), DAT_00069010,
                    &local_828);
                if (((iVar3 != 0) && (DAT_00069064 == '\0')) &&
                    ((DAT_00069064 = '\x01',
                      DAT_00074500 != '\0' ||
                          ((DAT_00068bd4 != '\0' || (3 < DAT_00067db4)))))) {
                    builtin_strncpy(local_818,
                                    "Waiting for work to be available fro",
                                    0x24);
                    local_7f4._0_1_ = 'm';
                    local_7f4._1_1_ = ' ';
                    local_7f4._2_1_ = 'p';
                    local_7f4._3_1_ = 'o';
                    builtin_strncpy(acStack_7f0, "ols.", 4);
                    acStack_7f0[4] = 0;
                    FUN_00020f58(4, local_818, 0);
                }
            } while ((DAT_000690ec == 0) ||
                     (*(int *)(*(int *)(DAT_000690ec + 0x158) + 0xc) == 0));
            goto LAB_00035728;
        }
    } else {
    LAB_00035728:
        if (DAT_00069064 != '\0') {
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (3 < DAT_00067db4)) {
                builtin_strncpy(local_818,
                                "Work available from pools, resuming.", 0x24);
                local_7f4 = local_7f4 & 0xffffff00;
                FUN_00020f58(4, local_818, 0);
            }
            DAT_00069064 = '\0';
            if (DAT_000690ec == 0) {
            LAB_00035934:
                /* WARNING: Does not return */
                pcVar1 = (code *)software_udf(0, 0x3593c);
                (*pcVar1)();
            }
        }
        iVar3 = DAT_000690ec;
        puVar4 = *(undefined4 **)(DAT_000690ec + 0x158);
        param_1 = DAT_000690ec;
        if (((DAT_00069188 < (int)puVar4[3]) &&
             (*(char *)(DAT_000690ec + 0x111) == '\0')) &&
            (*(int *)(DAT_000690ec + 0x114) != 0)) {
            iVar7 = *(int *)(DAT_000690ec + 0x160);
            do {
                if (iVar7 == 0)
                    goto LAB_00035934;
                param_1 = iVar7;
            } while ((*(char *)(iVar7 + 0x111) == '\0') &&
                     (piVar6 = (int *)(iVar7 + 0x114),
                      iVar7 = *(int *)(iVar7 + 0x160), *piVar6 != 0));
        }
        iVar7 = *(int *)(param_1 + 0x15c);
        if (iVar7 == 0) {
            iVar5 = *(int *)(param_1 + 0x160);
            if (iVar5 != 0) {
                iVar9 = puVar4[5];
                iVar8 = iVar5;
                iVar2 = iVar5;
                if (param_1 == puVar4[4] - iVar9)
                    goto LAB_00035970;
                goto LAB_00035794;
            }
            free((void *)*puVar4);
            free(*(void **)(DAT_000690ec + 0x158));
            DAT_000690ec = iVar5;
        } else {
            iVar9 = puVar4[5];
            if (param_1 == puVar4[4] - iVar9) {
            LAB_00035970:
                puVar4[4] = iVar7 + iVar9;
                iVar7 = *(int *)(param_1 + 0x15c);
                if (iVar7 == 0) {
                    iVar5 = *(int *)(param_1 + 0x160);
                    iVar8 = iVar5;
                    iVar2 = iVar5;
                    goto LAB_00035794;
                }
                iVar9 = *(int *)(*(int *)(iVar3 + 0x158) + 0x14);
            }
            iVar5 = DAT_000690ec;
            *(undefined4 *)(iVar7 + iVar9 + 8) =
                *(undefined4 *)(param_1 + 0x160);
            iVar8 = *(int *)(param_1 + 0x160);
            iVar2 = DAT_000690ec;
        LAB_00035794:
            DAT_000690ec = iVar2;
            piVar6 = *(int **)(iVar5 + 0x158);
            if (iVar8 != 0) {
                *(undefined4 *)(iVar8 + piVar6[5] + 4) =
                    *(undefined4 *)(param_1 + 0x15c);
                piVar6 = *(int **)(iVar5 + 0x158);
            }
            iVar3 = (piVar6[1] - 1U & *(uint *)(param_1 + 0x174)) * 0xc;
            *(int *)(*piVar6 + iVar3 + 4) = *(int *)(*piVar6 + iVar3 + 4) + -1;
            puVar4 = (undefined4 *)(iVar5 + 0x158);
            bVar10 = *(int *)(*(int *)*puVar4 + iVar3) == param_1 + 0x158;
            if (bVar10) {
                iVar5 = *(int *)(param_1 + 0x168);
                *(int *)(*(int *)*puVar4 + iVar3) = iVar5;
            }
            iVar3 = *(int *)(param_1 + 0x168);
            if (bVar10) {
                iVar5 = DAT_000690ec;
            }
            if (*(int *)(param_1 + 0x164) != 0) {
                *(int *)(*(int *)(param_1 + 0x164) + 0x10) = iVar3;
                iVar3 = *(int *)(param_1 + 0x168);
            }
            if (iVar3 != 0) {
                *(undefined4 *)(iVar3 + 0xc) = *(undefined4 *)(param_1 + 0x164);
            }
            *(int *)(*(int *)(iVar5 + 0x158) + 0xc) =
                *(int *)(*(int *)(iVar5 + 0x158) + 0xc) + -1;
        }
        if ((*(char *)(param_1 + 0x111) == '\0') &&
            (*(int *)(param_1 + 0x114) != 0)) {
            DAT_00069188 = DAT_00069188 + -1;
        }
        pthread_cond_signal((pthread_cond_t *)&DAT_000744d0);
        pthread_cond_signal((pthread_cond_t *)(DAT_000755e0 + 0x28));
        DAT_000744a0 = time((time_t *)0x0);
    }
    iVar3 = pthread_mutex_unlock(DAT_00069010);
    if (iVar3 == 0) {
        (*DAT_00067ed8)();
        return param_1;
    }
    piVar6 = __errno_location();
    iVar3 = *piVar6;
    __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
    uVar11 = 0x203e;
LAB_00035a18:
    snprintf(local_818, 0x800, __format, iVar3, "cgminer.c", "hash_pop",
             uVar11);
    FUN_00020f58(3, local_818, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

void FUN_00035a94(undefined4 param_1, int param_2)

{
    int iVar1;
    void *__ptr;
    void *__ptr_00;
    void *__ptr_01;
    size_t sVar2;
    int *piVar3;
    undefined4 uVar4;
    undefined4 uVar5;
    int iVar6;
    char *pcVar7;
    char acStack_c28[1023];
    undefined1 local_829;
    undefined4 local_828;
    undefined4 uStack_824;
    undefined4 uStack_820;
    undefined4 uStack_81c;
    undefined4 uStack_818;
    undefined2 local_814;

    if (DAT_00068dec == (FILE *)0x0) {
        return;
    }
    uVar4 = *(undefined4 *)(param_2 + 0x100);
    iVar1 = FUN_00031b04(uVar4);
    uVar5 = *(undefined4 *)(param_2 + 0x1b0);
    iVar1 = *(int *)(iVar1 + 0x24);
    iVar6 = *(int *)(param_2 + 0x104);
    __ptr = (void *)FUN_00022c24(param_2 + 0xa0, 0x20);
    __ptr_00 = (void *)FUN_00022c24(param_2 + 0xc0, 0x20);
    __ptr_01 = (void *)FUN_00022c24(param_2, 0x80);
    sVar2 = snprintf(acStack_c28, 0x400, "%lu,%s,%s,%s,%s%u,%u,%s,%s\n", uVar5,
                     param_1, __ptr, *(undefined4 *)(iVar6 + 0xa4),
                     *(undefined4 *)(*(int *)(iVar1 + 4) + 8),
                     *(undefined4 *)(iVar1 + 8), uVar4, __ptr_00, __ptr_01);
    free(__ptr);
    free(__ptr_00);
    free(__ptr_01);
    if ((int)sVar2 < 0x400) {
        if ((int)sVar2 < 0) {
            if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                (DAT_00067db4 < 3)) {
                return;
            }
            pcVar7 = "sharelog printf error";
            goto LAB_00035c18;
        }
    } else {
        local_829 = 0;
    }
    iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_0006918c);
    if (iVar1 == 0) {
        sVar2 = fwrite(acStack_c28, sVar2, 1, DAT_00068dec);
        fflush(DAT_00068dec);
        iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_0006918c);
        if (iVar1 == 0) {
            (*DAT_00067ed8)();
            if (sVar2 == 1) {
                return;
            }
            if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                (DAT_00067db4 < 3)) {
                return;
            }
            pcVar7 = "sharelog fwrite error";
        LAB_00035c18:
            local_828 = *(undefined4 *)pcVar7;
            uStack_824 = *(undefined4 *)(pcVar7 + 4);
            uStack_820 = *(undefined4 *)(pcVar7 + 8);
            uStack_81c = *(undefined4 *)(pcVar7 + 0xc);
            uStack_818 = *(undefined4 *)(pcVar7 + 0x10);
            local_814 = (undefined2) * (undefined4 *)(pcVar7 + 0x14);
            FUN_00020f58(3, &local_828, 0);
            return;
        }
        piVar3 = __errno_location();
        iVar1 = *piVar3;
        uVar4 = 0x2a8;
        pcVar7 = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
    } else {
        piVar3 = __errno_location();
        iVar1 = *piVar3;
        pcVar7 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar4 = 0x2a5;
    }
    snprintf((char *)&local_828, 0x800, pcVar7, iVar1, "cgminer.c", "sharelog",
             uVar4);
    FUN_00020f58(3, &local_828, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

undefined4 FUN_00035d3c(int *param_1)

{
    char cVar1;
    int iVar2;
    int iVar3;
    pthread_t __th;
    int *piVar4;
    char *__format;
    undefined4 uVar5;
    char acStack_818[2048];

    if (*(char *)((int)param_1 + 0x6b) == '\0') {
        __th = pthread_self();
        pthread_detach(__th);
    }
LAB_00035d68:
    cVar1 = *(char *)((int)param_1 + 0x69);
    do {
        if (cVar1 != '\0')
            goto LAB_00035e20;
        iVar2 = FUN_0002f1e8(param_1, 0);
        if (iVar2 != 0) {
            FUN_0002f180(param_1, (int)param_1 + 0x61);
            iVar2 = pthread_mutex_lock((pthread_mutex_t *)&DAT_0007453c);
            if (iVar2 != 0) {
                piVar4 = __errno_location();
                iVar2 = *piVar4;
                __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
                uVar5 = 0x2a13;
            LAB_00035ff4:
                snprintf(acStack_818, 0x800, __format, iVar2, "cgminer.c",
                         "test_pool_thread", uVar5);
                FUN_00020f58(3, acStack_818, 1);
                /* WARNING: Subroutine does not return */
                FUN_0002e6b0(1);
            }
            iVar2 = pthread_rwlock_wrlock((pthread_rwlock_t *)&DAT_00074554);
            if (iVar2 != 0) {
                piVar4 = __errno_location();
                iVar2 = *piVar4;
                __format = "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d";
                uVar5 = 0x2a13;
                goto LAB_00035ff4;
            }
            iVar2 = 0;
            if (DAT_00069170 == '\0') {
                iVar2 = *param_1;
                DAT_00069170 = '\x01';
                DAT_00069060 = param_1;
                if (iVar2 != 0) {
                    iVar2 = 1;
                }
            }
            iVar3 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_00074554);
            if (iVar3 != 0) {
                piVar4 = __errno_location();
                iVar2 = *piVar4;
                __format = "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d";
                uVar5 = 0x2a21;
                goto LAB_00035ff4;
            }
            iVar3 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_0007453c);
            if (iVar3 != 0) {
                piVar4 = __errno_location();
                iVar2 = *piVar4;
                __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
                uVar5 = 0x2a21;
                goto LAB_00035ff4;
            }
            (*DAT_00067ed8)();
            if ((iVar2 != 0) &&
                (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                  (4 < DAT_00067db4)))) {
                snprintf(acStack_818, 0x800,
                         "Switching to pool %d %s - first alive pool", *param_1,
                         param_1[0x29]);
                FUN_00020f58(5, acStack_818, 0);
            }
            FUN_00032238(param_1);
            FUN_00034178(0);
        LAB_00035f20:
            *(undefined1 *)(param_1 + 0x47) = 0;
        LAB_00035e20:
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (4 < DAT_00067db4)) {
                snprintf(acStack_818, 0x800, "end test_pool_thread pool[%d]\n",
                         *param_1);
                FUN_00020f58(5, acStack_818, 0);
            }
            return 0;
        }
        FUN_0003466c(param_1);
        if (*(char *)((int)param_1 + 0x6b) != '\0')
            goto LAB_00035f20;
        sleep(0x1e);
        if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
            (DAT_00067db4 < 5))
            goto LAB_00035d68;
        snprintf(acStack_818, 0x800, "%s pool[%d] url = %s retry\n",
                 "test_pool_thread", *param_1, param_1[0x29]);
        FUN_00020f58(5, acStack_818, 0);
        cVar1 = *(char *)((int)param_1 + 0x69);
    } while (true);
}

void FUN_000360b0(int param_1, int param_2)

{
    int iVar1;
    int iVar2;
    time_t tVar3;
    void *__ptr;
    void *__ptr_00;
    int *piVar4;
    uint *puVar5;
    char *__format;
    uint uVar6;
    undefined4 uVar7;
    uint *puVar8;
    pthread_rwlock_t *__rwlock;
    uint local_890;
    uint uStack_88c;
    uint local_888[7];
    uint uStack_86c;
    uint local_868[8];
    undefined1 auStack_848[32];
    char acStack_828[2052];

    iVar2 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xd4));
    if (iVar2 != 0) {
        piVar4 = __errno_location();
        iVar2 = *piVar4;
        __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar7 = 0x20a8;
    LAB_00036580:
        snprintf(acStack_828, 0x800, __format, iVar2, "cgminer.c",
                 "gen_stratum_work", uVar7);
        FUN_00020f58(3, acStack_828, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002e6b0(1);
    }
    __rwlock = (pthread_rwlock_t *)(param_1 + 0xec);
    iVar2 = pthread_rwlock_wrlock(__rwlock);
    if (iVar2 != 0) {
        piVar4 = __errno_location();
        iVar2 = *piVar4;
        __format = "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar7 = 0x20a8;
        goto LAB_00036580;
    }
    puVar8 = (uint *)(param_1 + 0x270);
    local_890 = *puVar8;
    uStack_88c = *(uint *)(param_1 + 0x274);
    FUN_000254e8(*(int *)(param_1 + 0x620) + *(int *)(param_1 + 0x628),
                 &local_890, *(undefined4 *)(param_1 + 0x278), "cgminer.c",
                 "gen_stratum_work", 0x20ad);
    uVar6 = *puVar8;
    iVar2 = *(int *)(param_1 + 0x274);
    *puVar8 = uVar6 + 1;
    *(uint *)(param_1 + 0x274) = iVar2 + (uint)(0xfffffffe < uVar6);
    *(uint *)(param_2 + 0x128) = uVar6;
    *(int *)(param_2 + 300) = iVar2;
    *(undefined4 *)(param_2 + 0x130) = *(undefined4 *)(param_1 + 0x278);
    iVar2 = pthread_rwlock_unlock(__rwlock);
    if (iVar2 != 0) {
        piVar4 = __errno_location();
        iVar2 = *piVar4;
        __format = "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d";
        uVar7 = 0x20b3;
        goto LAB_00036580;
    }
    iVar2 = pthread_rwlock_rdlock(__rwlock);
    if (iVar2 != 0) {
        piVar4 = __errno_location();
        iVar2 = *piVar4;
        __format = "WTF RDLOCK ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar7 = 0x20b3;
        goto LAB_00036580;
    }
    iVar2 = pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0xd4));
    if (iVar2 != 0) {
        piVar4 = __errno_location();
        iVar2 = *piVar4;
        __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
        uVar7 = 0x20b3;
        goto LAB_00036580;
    }
    FUN_00021c34(*(undefined4 *)(param_1 + 0x620),
                 *(undefined4 *)(param_1 + 0x624), acStack_828);
    FUN_00021c34(acStack_828, 0x20, local_888);
    FUN_000254e8(local_868, local_888, 0x20, "cgminer.c", "gen_stratum_work",
                 0x20b7);
    if (0 < *(int *)(param_1 + 0x6ac)) {
        iVar2 = 0;
        do {
            iVar1 = iVar2 * 4;
            iVar2 = iVar2 + 1;
            FUN_000254e8(auStack_848,
                         *(undefined4 *)(*(int *)(param_1 + 0x2a4) + iVar1),
                         0x20, "cgminer.c", "gen_stratum_work", 0x20bb);
            FUN_00021c34(local_868, 0x40, acStack_828);
            FUN_00021c34(acStack_828, 0x20, local_888);
            FUN_000254e8(local_868, local_888, 0x20, "cgminer.c",
                         "gen_stratum_work", 0x20bd);
        } while (iVar2 < *(int *)(param_1 + 0x6ac));
    }
    puVar5 = &uStack_86c;
    puVar8 = &uStack_88c;
    do {
        puVar5 = puVar5 + 1;
        uVar6 = *puVar5;
        puVar8 = puVar8 + 1;
        *puVar8 = uVar6 << 0x18 | (uVar6 >> 8 & 0xff) << 0x10 |
                  (uVar6 >> 0x10 & 0xff) << 8 | uVar6 >> 0x18;
    } while (local_868 + 7 != puVar5);
    FUN_000254e8(param_2, param_1 + 0x62c, 0x70, "cgminer.c",
                 "gen_stratum_work", 0x20c6);
    FUN_000254e8(param_2 + 0x24, local_888, 0x20, "cgminer.c",
                 "gen_stratum_work", 0x20c7);
    uVar7 = *(undefined4 *)(param_1 + 0x724);
    *(undefined4 *)(param_2 + 0x138) = *(undefined4 *)(param_1 + 0x720);
    *(undefined4 *)(param_2 + 0x13c) = uVar7;
    uVar7 = __strdup(*(undefined4 *)(param_1 + 0x2a0));
    *(undefined4 *)(param_2 + 0x120) = uVar7;
    uVar7 = __strdup(*(undefined4 *)(param_1 + 0x264));
    *(undefined4 *)(param_2 + 0x140) = uVar7;
    uVar7 = __strdup(param_1 + 0x70c);
    *(undefined4 *)(param_2 + 0x134) = uVar7;
    iVar2 = pthread_rwlock_unlock(__rwlock);
    if (iVar2 != 0) {
        piVar4 = __errno_location();
        iVar2 = *piVar4;
        __format = "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d";
        uVar7 = 0x20d2;
        goto LAB_00036580;
    }
    (*DAT_00067ed8)();
    if (DAT_00068bd5 == '\0')
        goto LAB_0003632c;
    __ptr = (void *)FUN_00022c24(param_2, 0x70);
    __ptr_00 = (void *)FUN_00022c24(local_888, 0x20);
    if (DAT_00068bd5 != '\0') {
        if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
            (DAT_00067db4 < 7)) {
        LAB_00036478:
            if ((DAT_00068bd4 == '\0') && (DAT_00067db4 < 7)) {
            LAB_000364e0:
                if ((DAT_00068bd4 != '\0') || (6 < DAT_00067db4)) {
                LAB_00036500:
                    snprintf(acStack_828, 0x800,
                             "Work job_id %s nonce2 %llu ntime %s",
                             *(undefined4 *)(param_2 + 0x120),
                             *(undefined4 *)(param_2 + 0x128),
                             *(undefined4 *)(param_2 + 300),
                             *(undefined4 *)(param_2 + 0x134));
                    FUN_00020f58(7, acStack_828, 0);
                }
            } else {
            LAB_00036498:
                snprintf(acStack_828, 0x800, "Generated stratum header %s",
                         __ptr);
                FUN_00020f58(7, acStack_828, 0);
                if (DAT_00068bd5 != '\0') {
                    if (DAT_00074500 == '\0')
                        goto LAB_000364e0;
                    goto LAB_00036500;
                }
            }
        } else {
            snprintf(acStack_828, 0x800, "Generated stratum merkle %s",
                     __ptr_00);
            FUN_00020f58(7, acStack_828, 0);
            if (DAT_00068bd5 != '\0') {
                if (DAT_00074500 == '\0')
                    goto LAB_00036478;
                goto LAB_00036498;
            }
        }
    }
    free(__ptr);
    free(__ptr_00);
LAB_0003632c:
    FUN_0002b3a4(param_2);
    FUN_0002d950((int)*(undefined8 *)(param_2 + 0x138), param_2 + 0xa0);
    DAT_000767e0 = DAT_000767e0 + 1;
    tVar3 = time((time_t *)0x0);
    if (5 < tVar3 - DAT_000691a4) {
        DAT_000691a4 = time((time_t *)0x0);
        DAT_000691a8 = DAT_000767e0;
    }
    uVar7 = DAT_000691ac;
    *(undefined1 *)(param_2 + 0x11c) = 1;
    *(undefined4 *)(param_2 + 0x150) = uVar7;
    *(undefined4 *)(param_2 + 0xf8) = 0;
    *(undefined1 *)(param_2 + 0x118) = 0;
    *(undefined1 *)(param_2 + 0x1b8) = 0x53;
    *(undefined4 *)(param_2 + 0xf4) = 0x3c;
    *(int *)(param_2 + 0x104) = param_1;
    FUN_0002b1b0((int)*(undefined8 *)(param_2 + 0x138), param_2);
    FUN_000239a4(param_2 + 0x108);
    return;
}

void FUN_00036690(undefined4 *param_1, int *param_2, int param_3,
                  undefined4 param_4, undefined4 param_5, undefined4 param_6,
                  uint param_7)

{
    undefined4 uVar1;
    int iVar2;
    undefined4 uVar3;
    char *unaff_r11;

    iVar2 = FUN_0002fd8c();
    *param_2 = iVar2;
    uVar3 = *param_1;
    iVar2 = pthread_mutex_lock((pthread_mutex_t *)(param_3 + 0xd4));
    if (iVar2 == 0) {
        iVar2 = pthread_rwlock_wrlock((pthread_rwlock_t *)(param_3 + 0xec));
        if (iVar2 == 0) {
            unaff_r11 = "get_work_by_nonce2";
            param_7 = param_7 << 0x18 | (param_7 >> 8 & 0xff) << 0x10 |
                      (param_7 >> 0x10 & 0xff) << 8 | param_7 >> 0x18;
            *(undefined4 *)(param_3 + 0x270) = param_5;
            *(undefined4 *)(param_3 + 0x274) = param_6;
            FUN_000254e8(param_3 + 0x62c, &param_7, 4, "cgminer.c",
                         "get_work_by_nonce2", 0x208d);
            iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_3 + 0xec));
            if (iVar2 == 0) {
                iVar2 =
                    pthread_mutex_unlock((pthread_mutex_t *)(param_3 + 0xd4));
                if (iVar2 == 0) {
                    (*DAT_00067ed8)();
                    FUN_000360b0(param_3, *param_2);
                    uVar1 = DAT_000691ac;
                    *(undefined4 *)(*param_2 + 0x104) = param_4;
                    *(undefined4 *)(*param_2 + 0x100) = uVar3;
                    *(undefined4 *)(*param_2 + 0x150) = uVar1;
                    *(int *)(*(int *)(*param_2 + 0x104) + 0x44) =
                        *(int *)(*(int *)(*param_2 + 0x104) + 0x44) + 1;
                    *(undefined1 *)(*param_2 + 0x110) = 1;
                    *(uint *)(*param_2 + 0x1bc) = param_7;
                    return;
                }
                /* WARNING: Subroutine does not return */
                FUN_0002f03c("get_work_by_nonce2", 0x208e);
            }
            goto LAB_000367d0;
        }
    } else {
        FUN_0002efe0("get_work_by_nonce2", 0x208a);
    }
    FUN_0002ef84("get_work_by_nonce2", 0x208a);
LAB_000367d0:
    /* WARNING: Subroutine does not return */
    FUN_0002fb24(unaff_r11, 0x208e);
}

char FUN_000367ec(int param_1, int param_2)

{
    char cVar1;
    int iVar2;
    int iVar3;
    int *piVar4;
    int iVar5;
    pthread_rwlock_t *__rwlock;
    undefined4 uVar6;
    char *pcVar7;
    int local_830[2];
    undefined4 local_828;
    undefined4 uStack_824;
    undefined4 uStack_820;
    undefined4 uStack_81c;
    undefined4 local_818;
    undefined4 uStack_814;
    uint local_810;
    undefined4 uStack_80c;
    uint local_808;
    undefined4 uStack_804;
    undefined2 local_800;

    cVar1 = DAT_00068bd5;
    if (DAT_0006917c != '\0') {
        return '\0';
    }
    if (DAT_000766c0 != 0) {
        return '\0';
    }
    if (*(int *)(param_1 + 0x150) != DAT_000691ac) {
        if (DAT_00068bd5 == '\0') {
            return '\x01';
        }
        if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
            (DAT_00067db4 < 7)) {
            return DAT_00068bd5;
        }
        local_828._0_1_ = 'W';
        local_828._1_1_ = 'o';
        local_828._2_1_ = 'r';
        local_828._3_1_ = 'k';
        uStack_824._0_1_ = ' ';
        uStack_824._1_1_ = 's';
        uStack_824._2_1_ = 't';
        uStack_824._3_1_ = 'a';
        uStack_820._0_1_ = 'l';
        uStack_820._1_1_ = 'e';
        uStack_820._2_1_ = ' ';
        uStack_820._3_1_ = 'd';
        uStack_81c._0_1_ = 'u';
        uStack_81c._1_1_ = 'e';
        uStack_81c._2_1_ = ' ';
        uStack_81c._3_1_ = 't';
        local_818._0_1_ = 'o';
        local_818._1_1_ = ' ';
        local_818._2_1_ = 'b';
        local_818._3_1_ = 'l';
        uStack_814._0_1_ = 'o';
        uStack_814._1_1_ = 'c';
        uStack_814._2_1_ = 'k';
        uStack_814._3_1_ = ' ';
        local_810._0_1_ = 'm';
        local_810._1_1_ = 'i';
        local_810._2_1_ = 's';
        local_810._3_1_ = 'm';
        uStack_80c._0_1_ = 'a';
        uStack_80c._1_1_ = 't';
        uStack_80c._2_1_ = 'c';
        uStack_80c._3_1_ = 'h';
        local_808 = local_808 & 0xffffff00;
        FUN_00020f58(7, &local_828, 0);
        return cVar1;
    }
    iVar5 = *(int *)(param_1 + 0x104);
    iVar3 = *(int *)(param_1 + 0x114);
    if (*(int *)(param_1 + 0x114) <= DAT_00068754) {
        iVar3 = DAT_00068758;
    }
    if ((param_2 != 0) || (*(char *)(iVar5 + 0x280) == '\0')) {
    LAB_000369e4:
        iVar3 = iVar3 - (int)(longlong)(*(double *)(iVar5 + 0x1c0) * 5.0 + 1.0);
        FUN_000239a4(local_830);
        cVar1 = DAT_00068bd5;
        if (iVar3 < 5) {
            iVar3 = 5;
        }
        if (local_830[0] - *(int *)(param_1 + 0x108) < iVar3) {
            if (param_2 != 0 || DAT_000755d4 != '\x01') {
                return '\0';
            }
            iVar3 = FUN_00031ff4();
            if (iVar5 == iVar3) {
                return '\0';
            }
            if (*(char *)(param_1 + 0x11a) != '\0') {
                return '\0';
            }
            if (DAT_00068fd0 - 3U < 2) {
                return '\0';
            }
            if ((DAT_00068bd5 != '\0') &&
                (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                  (6 < DAT_00067db4)))) {
                pcVar7 = "Work stale due to fail only pool mismatch";
            LAB_00036b44:
                cVar1 = DAT_00068bd5;
                local_828 = *(undefined4 *)pcVar7;
                uStack_824 = *(undefined4 *)(pcVar7 + 4);
                uStack_820 = *(undefined4 *)(pcVar7 + 8);
                uStack_81c = *(undefined4 *)(pcVar7 + 0xc);
                local_818 = *(undefined4 *)(pcVar7 + 0x10);
                uStack_814 = *(undefined4 *)(pcVar7 + 0x14);
                local_810 = *(uint *)(pcVar7 + 0x18);
                uStack_80c = *(undefined4 *)(pcVar7 + 0x1c);
                local_808 = *(uint *)(pcVar7 + 0x20);
                uStack_804 = *(undefined4 *)(pcVar7 + 0x24);
                local_800 = (undefined2) * (undefined4 *)(pcVar7 + 0x28);
                FUN_00020f58(7, &local_828, 0);
                return cVar1;
            }
        } else if ((DAT_00068bd5 != '\0') &&
                   (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                     (6 < DAT_00067db4)))) {
            local_828._0_1_ = 'W';
            local_828._1_1_ = 'o';
            local_828._2_1_ = 'r';
            local_828._3_1_ = 'k';
            uStack_824._0_1_ = ' ';
            uStack_824._1_1_ = 's';
            uStack_824._2_1_ = 't';
            uStack_824._3_1_ = 'a';
            uStack_820._0_1_ = 'l';
            uStack_820._1_1_ = 'e';
            uStack_820._2_1_ = ' ';
            uStack_820._3_1_ = 'd';
            uStack_81c._0_1_ = 'u';
            uStack_81c._1_1_ = 'e';
            uStack_81c._2_1_ = ' ';
            uStack_81c._3_1_ = 't';
            local_818._0_1_ = 'o';
            local_818._1_1_ = ' ';
            local_818._2_1_ = 'e';
            local_818._3_1_ = 'x';
            uStack_814._0_1_ = 'p';
            uStack_814._1_1_ = 'i';
            uStack_814._2_1_ = 'r';
            uStack_814._3_1_ = 'y';
            local_810 = local_810 & 0xffffff00;
            FUN_00020f58(7, &local_828, 0);
            return cVar1;
        }
        return '\x01';
    }
    if ((*(char *)(iVar5 + 0x281) == '\0') ||
        (*(char *)(iVar5 + 0x283) == '\0')) {
        if (DAT_00068bd5 == '\0') {
            return '\x01';
        }
        if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
            (DAT_00067db4 < 7)) {
            return '\x01';
        }
        local_828._0_1_ = 'W';
        local_828._1_1_ = 'o';
        local_828._2_1_ = 'r';
        local_828._3_1_ = 'k';
        uStack_824._0_1_ = ' ';
        uStack_824._1_1_ = 's';
        uStack_824._2_1_ = 't';
        uStack_824._3_1_ = 'a';
        uStack_820._0_1_ = 'l';
        uStack_820._1_1_ = 'e';
        uStack_820._2_1_ = ' ';
        uStack_820._3_1_ = 'd';
        uStack_81c._0_1_ = 'u';
        uStack_81c._1_1_ = 'e';
        uStack_81c._2_1_ = ' ';
        uStack_81c._3_1_ = 't';
        local_818._0_1_ = 'o';
        local_818._1_1_ = ' ';
        local_818._2_1_ = 's';
        local_818._3_1_ = 't';
        uStack_814._0_1_ = 'r';
        uStack_814._1_1_ = 'a';
        uStack_814._2_1_ = 't';
        uStack_814._3_1_ = 'u';
        local_810._0_1_ = 'm';
        local_810._1_1_ = ' ';
        local_810._2_1_ = 'i';
        local_810._3_1_ = 'n';
        uStack_80c._0_1_ = 'a';
        uStack_80c._1_1_ = 'c';
        uStack_80c._2_1_ = 't';
        uStack_80c._3_1_ = 'i';
        local_808 = CONCAT13(local_808._3_1_, 0x6576);
        FUN_00020f58(7, &local_828, 0);
        return cVar1;
    }
    iVar2 = pthread_mutex_lock((pthread_mutex_t *)(iVar5 + 0xd4));
    if (iVar2 == 0) {
        __rwlock = (pthread_rwlock_t *)(iVar5 + 0xec);
        iVar2 = pthread_rwlock_rdlock(__rwlock);
        if (iVar2 != 0)
            goto LAB_00036c4c;
        iVar2 = pthread_mutex_unlock((pthread_mutex_t *)(iVar5 + 0xd4));
        if (iVar2 != 0) {
            piVar4 = __errno_location();
            uVar6 = 0x13e1;
            pcVar7 = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
            goto LAB_00036c78;
        }
        iVar2 = strcmp(*(char **)(param_1 + 0x120), *(char **)(iVar5 + 0x2a0));
        if (iVar2 == 0) {
            iVar2 = pthread_rwlock_unlock(__rwlock);
            if (iVar2 == 0) {
                (*DAT_00067ed8)();
                goto LAB_000369e4;
            }
        } else {
            iVar3 = pthread_rwlock_unlock(__rwlock);
            if (iVar3 == 0) {
                (*DAT_00067ed8)();
                if (DAT_00068bd5 == '\0') {
                    return '\x01';
                }
                if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                    (DAT_00067db4 < 7)) {
                    return '\x01';
                }
                pcVar7 = "Work stale due to stratum job_id mismatch";
                goto LAB_00036b44;
            }
        }
    } else {
        FUN_0002efe0("stale_work", 0x13e1);
    LAB_00036c4c:
        FUN_00030138("stale_work", 0x13e1);
    }
    piVar4 = __errno_location();
    uVar6 = 0x13e8;
    pcVar7 = "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d";
LAB_00036c78:
    snprintf((char *)&local_828, 0x800, pcVar7, *piVar4, "cgminer.c",
             "stale_work", uVar6);
    FUN_00020f58(3, &local_828, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

int FUN_00036cd4(int param_1, undefined4 param_2)

{
    time_t tVar1;
    time_t tVar2;
    undefined *puVar3;
    char cVar4;
    int iVar5;
    int iVar6;
    int iVar7;
    double dVar8;
    double dVar9;
    int local_824;
    char local_820[2048];

    local_824 = 0;
    iVar6 = *(int *)(param_1 + 0x24);
    FUN_0002ae8c();
    if ((DAT_00068bd5 != '\0') &&
        (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
          (6 < DAT_00067db4)))) {
        builtin_strncpy(local_820, "Popping work from get queue to get work",
                        0x28);
        FUN_00020f58(7, local_820, 0);
    }
    tVar1 = time((time_t *)0x0);
    while (local_824 == 0) {
        local_824 = FUN_000355fc(1);
        iVar7 = FUN_000367ec(local_824, 0);
        if (iVar7 != 0) {
            FUN_0002cea0(&local_824, "cgminer.c", "get_work", 0x21c4);
            FUN_0002f9c0();
        }
    }
    tVar2 = time((time_t *)0x0);
    iVar7 = tVar2 - tVar1;
    cVar4 = DAT_00068bd5;
    if (iVar7 < 1) {
    LAB_00036e64:
        if (cVar4 != '\0') {
        LAB_00036e74:
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (6 < DAT_00067db4)) {
                snprintf(local_820, 0x800,
                         "Got work from get queue to get work for thread %d",
                         param_2);
                FUN_00020f58(7, local_820, 0);
            }
        }
    } else {
        if (DAT_00068bd5 != '\0') {
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (6 < DAT_00067db4)) {
                snprintf(local_820, 0x800, "Get work blocked for %ld seconds",
                         iVar7);
                FUN_00020f58(7, local_820, 0);
                cVar4 = DAT_00068bd5;
                *(int *)(iVar6 + 0xe8) = *(int *)(iVar6 + 0xe8) + iVar7;
                goto LAB_00036e64;
            }
            *(int *)(iVar6 + 0xe8) = *(int *)(iVar6 + 0xe8) + iVar7;
            goto LAB_00036e74;
        }
        *(int *)(iVar6 + 0xe8) = *(int *)(iVar6 + 0xe8) + iVar7;
    }
    cVar4 = DAT_0006917c;
    *(undefined4 *)(local_824 + 0x100) = param_2;
    if (cVar4 != '\0') {
        iVar7 = *(int *)(iVar6 + 0x17c) + *(int *)(iVar6 + 0x180);
        *(int *)(iVar6 + 0x17c) = iVar7;
        if (iVar7 < 1) {
            *(undefined4 *)(iVar6 + 0x180) = 1;
        } else if (0xf < iVar7) {
            iVar7 = -1;
            puVar3 = &DAT_000691b0;
            *(undefined4 *)(iVar6 + 0x180) = 0xffffffff;
            iVar5 = *(int *)(iVar6 + 0x178) + 1;
            if (iVar5 < 0x10) {
                iVar7 = iVar5 * 5;
            }
            if (iVar5 == 0xf ||
                *(int *)(iVar6 + 0x178) + -0xe < 0 != SBORROW4(iVar5, 0xf)) {
                *(int *)(iVar6 + 0x178) = iVar5;
                puVar3 = &DAT_000691b0 + iVar7 * 0x20;
            } else {
                *(undefined4 *)(iVar6 + 0x178) = 0;
            }
            FUN_000254e8(local_824, puVar3, 0xa0, "cgminer.c",
                         "set_benchmark_work", 0x21ad);
            goto LAB_00036ed8;
        }
        FUN_000254e8(local_824, &DAT_00069bb0 + iVar7 * 0xa0, 0xa0, "cgminer.c",
                     "set_benchmark_work", 0x21b1);
    }
LAB_00036ed8:
    FUN_0002aec4(param_1);
    *(undefined1 *)(local_824 + 0x110) = 1;
    dVar9 = *(double *)(*(int *)(iVar6 + 4) + 0x68);
    if (*(double *)(local_824 + 0x178) < dVar9) {
        dVar9 = *(double *)(local_824 + 0x178);
    }
    *(double *)(local_824 + 0xe0) = dVar9;
    dVar8 = *(double *)(*(int *)(iVar6 + 4) + 0x70);
    if (dVar9 < dVar8) {
        dVar9 = dVar8;
    }
    *(double *)(local_824 + 0xe0) = dVar9;
    return local_824;
}

undefined4 FUN_00037020(undefined4 param_1, undefined4 param_2,
                        undefined4 param_3)

{
    undefined4 uVar1;

    uVar1 = FUN_00036cd4(param_1, param_3);
    FUN_0002fe98(param_2, uVar1);
    return uVar1;
}

int FUN_00037048(int param_1)

{
    int iVar1;
    int local_c;

    local_c = *(int *)(param_1 + 0x164);
    if (local_c != 0) {
        iVar1 = FUN_000367ec(local_c);
        if (iVar1 == 0) {
            FUN_0002e034(param_1, local_c);
        } else {
            FUN_0002cea0(&local_c, "cgminer.c", "__get_queued", 0x24cb);
            FUN_0002f9c0();
        }
        *(undefined4 *)(param_1 + 0x164) = 0;
        return local_c;
    }
    return 0;
}

undefined4 FUN_000370c8(int param_1)

{
    int iVar1;
    undefined4 uVar2;

    iVar1 = pthread_rwlock_wrlock((pthread_rwlock_t *)(param_1 + 0x140));
    if (iVar1 == 0) {
        uVar2 = FUN_00037048(param_1);
        iVar1 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x140));
        if (iVar1 == 0) {
            (*DAT_00067ed8)();
            return uVar2;
        }
    } else {
        FUN_0002ef84("get_queued", 0x24e0);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002fb24("get_queued", 0x24e2);
}

void FUN_00037134(void)

{
    int iVar1;
    int iVar2;
    undefined4 *puVar3;
    int *piVar4;
    int iVar5;
    int iVar6;
    int iVar7;
    uint uVar8;
    char *__format;
    int iVar9;
    int iVar10;
    bool bVar11;
    undefined4 uVar12;
    int local_824;
    char acStack_820[2052];

    iVar1 = pthread_mutex_lock(DAT_00069010);
    if (iVar1 != 0) {
        piVar4 = __errno_location();
        iVar1 = *piVar4;
        __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar12 = 0x1503;
        goto LAB_0003741c;
    }
    local_824 = DAT_000690ec;
    if (DAT_000690ec != 0) {
        iVar9 = *(int *)(DAT_000690ec + 0x160);
        iVar2 = FUN_000367ec(DAT_000690ec, 0);
        iVar1 = 0;
        iVar5 = DAT_000690ec;
        do {
            DAT_000690ec = iVar5;
            if (iVar2 != 0) {
                iVar2 = *(int *)(local_824 + 0x15c);
                puVar3 = *(undefined4 **)(iVar5 + 0x158);
                if (iVar2 == 0) {
                    iVar6 = *(int *)(local_824 + 0x160);
                    if (iVar6 != 0) {
                        iVar7 = puVar3[5];
                        iVar10 = iVar6;
                        DAT_000690ec = iVar6;
                        if (local_824 == puVar3[4] - iVar7)
                            goto LAB_000372c4;
                        goto LAB_000371c0;
                    }
                    free((void *)*puVar3);
                    free(*(void **)(DAT_000690ec + 0x158));
                    DAT_000690ec = iVar6;
                } else {
                    iVar7 = puVar3[5];
                    if (local_824 == puVar3[4] - iVar7) {
                    LAB_000372c4:
                        DAT_000690ec = iVar5;
                        puVar3[4] = iVar2 + iVar7;
                        iVar2 = *(int *)(local_824 + 0x15c);
                        if (iVar2 == 0) {
                            iVar6 = *(int *)(local_824 + 0x160);
                            iVar10 = iVar6;
                            DAT_000690ec = iVar6;
                            goto LAB_000371c0;
                        }
                        iVar7 = *(int *)(*(int *)(iVar5 + 0x158) + 0x14);
                    }
                    *(undefined4 *)(iVar2 + iVar7 + 8) =
                        *(undefined4 *)(local_824 + 0x160);
                    iVar6 = iVar5;
                    iVar10 = *(int *)(local_824 + 0x160);
                LAB_000371c0:
                    piVar4 = *(int **)(iVar6 + 0x158);
                    if (iVar10 != 0) {
                        *(undefined4 *)(iVar10 + piVar4[5] + 4) =
                            *(undefined4 *)(local_824 + 0x15c);
                        piVar4 = *(int **)(iVar6 + 0x158);
                    }
                    uVar8 = piVar4[1] - 1U & *(uint *)(local_824 + 0x174);
                    iVar5 = *piVar4 + uVar8 * 0xc;
                    *(int *)(iVar5 + 4) = *(int *)(iVar5 + 4) + -1;
                    puVar3 = (undefined4 *)(iVar6 + 0x158);
                    bVar11 = *(int *)(*(int *)*puVar3 + uVar8 * 0xc) ==
                             local_824 + 0x158;
                    if (bVar11) {
                        iVar6 = *(int *)(local_824 + 0x168);
                        *(int *)(*(int *)*puVar3 + uVar8 * 0xc) = iVar6;
                    }
                    iVar5 = *(int *)(local_824 + 0x168);
                    if (bVar11) {
                        iVar6 = DAT_000690ec;
                    }
                    if (*(int *)(local_824 + 0x164) != 0) {
                        *(int *)(*(int *)(local_824 + 0x164) + 0x10) = iVar5;
                        iVar5 = *(int *)(local_824 + 0x168);
                    }
                    if (iVar5 != 0) {
                        *(undefined4 *)(iVar5 + 0xc) =
                            *(undefined4 *)(local_824 + 0x164);
                    }
                    *(int *)(*(int *)(iVar6 + 0x158) + 0xc) =
                        *(int *)(*(int *)(iVar6 + 0x158) + 0xc) + -1;
                }
                iVar1 = iVar1 + 1;
                FUN_0002cea0(&local_824, "cgminer.c", "discard_stale", 0x150a);
            }
            local_824 = iVar9;
            if (iVar9 == 0)
                goto LAB_000372e4;
            iVar5 = *(int *)(iVar9 + 0x160);
            iVar2 = FUN_000367ec(iVar9, 0);
            iVar9 = iVar5;
            iVar5 = DAT_000690ec;
        } while (true);
    }
    pthread_cond_signal((pthread_cond_t *)&DAT_000744d0);
    iVar1 = pthread_mutex_unlock(DAT_00069010);
    if (iVar1 == 0) {
        (*DAT_00067ed8)();
        return;
    }
    goto LAB_00037448;
LAB_000372e4:
    pthread_cond_signal((pthread_cond_t *)&DAT_000744d0);
    iVar9 = pthread_mutex_unlock(DAT_00069010);
    if (iVar9 == 0) {
        (*DAT_00067ed8)();
        if (((iVar1 != 0) && (DAT_00068bd5 != '\0')) &&
            ((DAT_00074500 != '\0' ||
              ((DAT_00068bd4 != '\0' || (6 < DAT_00067db4)))))) {
            snprintf(acStack_820, 0x800,
                     "Discarded %d stales that didn\'t match current hash",
                     iVar1);
            FUN_00020f58(7, acStack_820, 0);
        }
        return;
    }
LAB_00037448:
    piVar4 = __errno_location();
    iVar1 = *piVar4;
    __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
    uVar12 = 0x1510;
LAB_0003741c:
    snprintf(acStack_820, 0x800, __format, iVar1, "cgminer.c", "discard_stale",
             uVar12);
    FUN_00020f58(3, acStack_820, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

undefined4 FUN_0003747c(void)

{
    pthread_t __th;
    int iVar1;
    int iVar2;
    int iVar3;
    int iVar4;

    __th = pthread_self();
    pthread_detach(__th);
    FUN_00037134();
    iVar1 = pthread_rwlock_rdlock((pthread_rwlock_t *)&DAT_000744a8);
    iVar2 = DAT_00075588;
    if (iVar1 == 0) {
        iVar1 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_000744a8);
        if (iVar1 == 0) {
            (*DAT_00067ed8)();
            if (0 < iVar2) {
                iVar1 = 0;
                do {
                    iVar3 = *(int *)(DAT_000744a4 + iVar1 * 4);
                    iVar4 = *(int *)(iVar3 + 0x24);
                    if ((iVar4 != 0) && (*(int *)(iVar4 + 0x20) == 0)) {
                        *(undefined1 *)(iVar3 + 0x3e) = 1;
                        FUN_00032c30(iVar4);
                        iVar3 = pthread_mutex_lock(
                            (pthread_mutex_t *)&DAT_000767c8);
                        if (iVar3 != 0)
                            goto LAB_000375ac;
                        (**(code **)(*(int *)(iVar4 + 4) + 0x4c))(iVar4);
                        iVar3 = pthread_mutex_unlock(
                            (pthread_mutex_t *)&DAT_000767c8);
                        if (iVar3 != 0)
                            goto LAB_000375b8;
                        (*DAT_00067ed8)();
                    }
                    iVar1 = iVar1 + 1;
                } while (iVar2 != iVar1);
            }
            iVar2 = pthread_mutex_lock((pthread_mutex_t *)&DAT_000767f4);
            if (iVar2 == 0) {
                pthread_cond_broadcast((pthread_cond_t *)&DAT_00076700);
                iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000767f4);
                if (iVar2 == 0) {
                    (*DAT_00067ed8)();
                    return 0;
                }
                /* WARNING: Subroutine does not return */
                FUN_0002f03c("restart_thread", 0x1562);
            }
            FUN_0002efe0("restart_thread", 0x1560);
        LAB_000375ac:
            FUN_0002efe0("restart_thread", 0x155a);
        LAB_000375b8:
            /* WARNING: Subroutine does not return */
            FUN_0002f03c("restart_thread", 0x155c);
        }
    } else {
        FUN_00030138("restart_thread", 0x1545);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002fb24("restart_thread", 0x1547);
}

/* WARNING: Heritage AFTER dead removal. Example location: s1 : 0x00037e3c */
/* WARNING: Globals starting with '_' overlap smaller symbols at the same
 * address */
/* WARNING: Restarted to delay deadcode elimination for space: register */

void FUN_000375ec(int param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    longlong lVar1;
    longlong lVar2;
    bool bVar3;
    int iVar4;
    int *piVar5;
    int iVar6;
    undefined4 uVar7;
    char *pcVar8;
    double *pdVar9;
    int iVar10;
    byte bVar11;
    undefined4 extraout_s0;
    double in_d0;
    undefined4 uVar12;
    undefined4 uVar13;
    undefined4 in_s3;
    double dVar14;
    double dVar15;
    double dVar16;
    undefined8 uVar17;
    undefined8 uVar18;
    undefined4 local_8e8;
    undefined4 uStack_8e4;
    undefined1 auStack_8d8[16];
    undefined1 auStack_8c8[16];
    undefined1 auStack_8b8[16];
    undefined1 auStack_8a8[16];
    sysinfo local_898;
    char acStack_858[2052];

    uVar18 = CONCAT44(param_4, param_3);
    iVar4 = sysinfo(&local_898);
    if (iVar4 == 0) {
        DAT_00074484 = local_898.uptime;
    } else {
        if (((DAT_00074500 != 0) || (DAT_00068bd4 != 0)) ||
            (5 < (int)DAT_00067db4)) {
            piVar5 = __errno_location();
            iVar4 = *piVar5;
            strerror(iVar4);
            snprintf(acStack_858, 0x800,
                     "Failed to get sysinfo, errno:%u, reason:%s\n", iVar4);
            FUN_00020f58(6, acStack_858, 0);
        }
        DAT_00074484 = time((time_t *)0x0);
    }
    FUN_000239a4(&DAT_00069018);
    FUN_00023c94(&DAT_00069018, &DAT_0006907c);
    iVar4 = DAT_00069018;
    extraout_s0 = SUB84(in_d0, 0);
    uVar12 = (undefined4)((ulonglong)in_d0 >> 0x20);
    if (DAT_00069018 - DAT_0006a5b0 < DAT_00068730) {
        if (param_1 < 0) {
            return;
        }
        bVar11 = 0;
        FUN_000257f8(&DAT_0006907c);
    LAB_00037998:
        iVar6 = FUN_00031b04(param_1);
        iVar10 = *(int *)(iVar6 + 0x24);
        FUN_000257f8(iVar6 + 0x2c, &DAT_00069018);
        *(int *)(iVar10 + 0xf0) = iVar4;
        FUN_00023c94(&DAT_00069018, iVar10 + 0x8c);
        FUN_000257f8(iVar10 + 0x8c, &DAT_00069018);
        if ((DAT_00068bd5 != '\0') &&
            (((DAT_00074500 != 0 || (DAT_00068bd4 != 0)) ||
              (6 < (int)DAT_00067db4)))) {
            FUN_0004a10c(param_3, param_4);
            snprintf(acStack_858, 0x800,
                     "[thread %d: %llu hashes, %.1f mhash/sec]", param_1);
            FUN_00020f58(7, acStack_858, 0);
        }
        uVar18 = FUN_0004a178(param_3, param_4, 1000000, 0);
        iVar4 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00076838);
        if (iVar4 == 0) {
            dVar16 = (double)FUN_0004a10c((int)uVar18,
                                          (int)((ulonglong)uVar18 >> 0x20));
            uVar7 = SUB84(dVar16, 0);
            *(double *)(iVar10 + 0x50) = *(double *)(iVar10 + 0x50) + dVar16;
            if (0.0 < in_d0) {
                FUN_0002c538(uVar7, uVar12, extraout_s0, in_s3,
                             SUB84((double)(longlong)DAT_00068730, 0),
                             iVar10 + 0x30);
                FUN_0002c538(uVar7, uVar12, extraout_s0, in_s3, 0,
                             iVar10 + 0x38);
                if (0.0 < in_d0) {
                    FUN_0002c538(uVar7, uVar12, extraout_s0, in_s3, 0,
                                 iVar10 + 0x40);
                    if (0.0 < in_d0) {
                        FUN_0002c538(uVar7, uVar12, extraout_s0, in_s3, 0,
                                     iVar10 + 0x48);
                    }
                }
            }
            iVar4 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00076838);
            if (iVar4 != 0) {
                piVar5 = __errno_location();
                iVar4 = *piVar5;
                goto LAB_00038088;
            }
            (*DAT_00067ed8)();
            if ((bVar11 & DAT_00073388) == 0) {
                iVar4 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00076838);
                if (iVar4 != 0)
                    goto LAB_00037fb8;
                DAT_000756a8 = DAT_000756a8 + dVar16;
                if (bVar11 != 0)
                    goto LAB_00037868;
                dVar15 = *(double *)(&DAT_00069088 + DAT_000690e8 * 2);
                bVar3 = false;
                iVar4 = DAT_000690e8;
            LAB_00037b44:
                dVar14 = _DAT_00068740;
                lVar1 = (longlong)DAT_00074484;
                lVar2 = (longlong)DAT_00073320;
                *(double *)(&DAT_00069088 + iVar4 * 2) = dVar16 + dVar15;
                DAT_00068720 = (double)lVar1 - (double)lVar2;
                if (DAT_00068720 - dVar14 <= 86400.0) {
                    _DAT_00068740 = DAT_00068720;
                    if (!bVar3)
                        goto LAB_00037c2c;
                LAB_00037c70:
                    dVar16 = (DAT_000756a8 / DAT_00068720) * 1000000.0;
                    uVar18 = FUN_0004a1d8(SUB84(dVar16, 0),
                                          (int)((ulonglong)dVar16 >> 0x20));
                    FUN_0002aef8((int)uVar18, (int)((ulonglong)uVar18 >> 0x20),
                                 auStack_8d8, 0x10);
                    DAT_0006a5b8 =
                        (double)(longlong)((int)(longlong)_DAT_00075590 / 10) /
                        100.0;
                    uVar18 = FUN_0004a1d8(
                        SUB84(_DAT_00075590 * 1000000.0, 0),
                        (int)((ulonglong)(_DAT_00075590 * 1000000.0) >> 0x20),
                        (int)(longlong)_DAT_00075590 * 0x66666667);
                    FUN_0002aef8((int)uVar18, (int)((ulonglong)uVar18 >> 0x20),
                                 auStack_8c8, 0x10);
                    uVar18 = FUN_0004a1d8(
                        SUB84(_DAT_00075690 * 1000000.0, 0),
                        (int)((ulonglong)(_DAT_00075690 * 1000000.0) >> 0x20));
                    FUN_0002aef8((int)uVar18, (int)((ulonglong)uVar18 >> 0x20),
                                 auStack_8b8, 0x10);
                    uVar18 = FUN_0004a1d8(
                        SUB84(_DAT_00075688 * 1000000.0, 0),
                        (int)((ulonglong)(_DAT_00075688 * 1000000.0) >> 0x20));
                    FUN_0002aef8((int)uVar18, (int)((ulonglong)uVar18 >> 0x20),
                                 auStack_8a8, 0x10);
                    uVar18 = FUN_0004a1d8(
                        SUB84(_DAT_00075698 * 1000000.0, 0),
                        (int)((ulonglong)(_DAT_00075698 * 1000000.0) >> 0x20));
                    FUN_0002aef8((int)uVar18, (int)((ulonglong)uVar18 >> 0x20),
                                 acStack_858, 0x10);
                    snprintf(&DAT_0006a5c0, 0x100,
                             "(%ds):%s (1m):%s (5m):%s (15m):%s (avg):%sh/s",
                             DAT_00068730);
                    iVar4 =
                        pthread_mutex_unlock((pthread_mutex_t *)&DAT_00076838);
                    if (iVar4 == 0) {
                        (*DAT_00067ed8)();
                        printf("%s          \r", &DAT_0006a5c0);
                        fflush(stdout);
                        return;
                    }
                } else {
                    if (((DAT_00074500 != 0) || (DAT_00068bd4 != 0)) ||
                        (2 < (int)DAT_00067db4)) {
                        snprintf(acStack_858, 0x800,
                                 "cgminer time error total_secs = %f "
                                 "last_total_secs = %f");
                        FUN_00020f58(3, acStack_858, 0);
                    }
                    iVar4 =
                        pthread_mutex_unlock((pthread_mutex_t *)&DAT_00076838);
                    if (iVar4 != 0) {
                        piVar5 = __errno_location();
                        iVar4 = *piVar5;
                        goto LAB_00038088;
                    }
                    (*DAT_00067ed8)();
                    FUN_00032da0();
                    iVar4 =
                        pthread_mutex_lock((pthread_mutex_t *)&DAT_00076838);
                    if (iVar4 != 0) {
                        piVar5 = __errno_location();
                        iVar4 = *piVar5;
                        goto LAB_0003804c;
                    }
                    if (bVar3)
                        goto LAB_00037c70;
                LAB_00037c2c:
                    iVar4 =
                        pthread_mutex_unlock((pthread_mutex_t *)&DAT_00076838);
                    if (iVar4 == 0) {
                        (*DAT_00067ed8)();
                        return;
                    }
                }
                piVar5 = __errno_location();
                iVar4 = *piVar5;
                pcVar8 = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
            } else {
                FUN_0002e7d0(acStack_858, 0x100, iVar10);
                printf("%s          \r", acStack_858);
                fflush(stdout);
                iVar4 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00076838);
                if (iVar4 == 0) {
                    DAT_000756a8 = DAT_000756a8 + dVar16;
                LAB_00037868:
                    DAT_000690e8 = DAT_000690e8 + 1;
                    iVar4 = 0;
                    if (0xb < DAT_000690e8) {
                        DAT_000690e8 = 0;
                    }
                    uVar17 = 0;
                    pdVar9 = (double *)&DAT_00069088;
                    do {
                        dVar15 = *pdVar9;
                        pdVar9 = pdVar9 + 1;
                        if (0.0 <= dVar15) {
                            dVar14 = (double)FUN_0004a10c(
                                (int)uVar17, (int)((ulonglong)uVar17 >> 0x20));
                            iVar4 = iVar4 + 1;
                            dVar14 = dVar14 + dVar15;
                            uVar17 =
                                FUN_0004a1d8(SUB84(dVar14, 0),
                                             (int)((ulonglong)dVar14 >> 0x20));
                        }
                    } while (pdVar9 != (double *)&DAT_000690e8);
                    if (iVar4 != 0) {
                        uVar18 = FUN_0004a178((int)uVar17,
                                              (int)((ulonglong)uVar17 >> 0x20),
                                              iVar4, iVar4 >> 0x1f);
                    }
                    uStack_8e4 = (undefined4)((ulonglong)uVar18 >> 0x20);
                    local_8e8 = (undefined4)uVar18;
                    lVar1 = (longlong)DAT_00068730;
                    if (0.0 < (double)lVar1) {
                        uVar7 = FUN_0004a10c(local_8e8, uStack_8e4);
                        uVar13 = SUB84((double)lVar1, 0);
                        FUN_0002c538(uVar7, uVar12, uVar13, in_s3, uVar13,
                                     &DAT_00075590);
                    }
                    if (0.0 < in_d0) {
                        uVar7 = SUB84(dVar16, 0);
                        FUN_0002c538(uVar7, uVar12, extraout_s0, in_s3, 0,
                                     &DAT_00075690);
                        FUN_0002c538(uVar7, uVar12, extraout_s0, in_s3, 0,
                                     &DAT_00075688);
                        if (0.0 < in_d0) {
                            FUN_0002c538(uVar7, uVar12, extraout_s0, in_s3, 0,
                                         &DAT_00075698);
                        }
                    }
                    bVar3 = true;
                    uVar18 = FUN_0004a1d8(
                        SUB84(_DAT_00075590 * 1000000.0, 0),
                        (int)((ulonglong)(_DAT_00075590 * 1000000.0) >> 0x20));
                    iVar4 = DAT_000690e8;
                    DAT_00073474 = (undefined4)((ulonglong)uVar18 >> 0x20);
                    DAT_00073470 = (undefined4)uVar18;
                    dVar15 = 0.0;
                    *(undefined8 *)(&DAT_00069088 + DAT_000690e8 * 2) = 0;
                    goto LAB_00037b44;
                }
            LAB_00037fb8:
                piVar5 = __errno_location();
                iVar4 = *piVar5;
                pcVar8 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
            }
            snprintf(acStack_858, 0x800, pcVar8, iVar4);
            goto LAB_00037ff4;
        }
        piVar5 = __errno_location();
        iVar4 = *piVar5;
    LAB_0003804c:
        pcVar8 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
    } else {
        DAT_0006a5b0 = DAT_00069018;
        FUN_000257f8(&DAT_0006907c);
        if (-1 < param_1) {
            bVar11 = 1;
            goto LAB_00037998;
        }
        iVar4 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00076838);
        if (iVar4 != 0) {
            piVar5 = __errno_location();
            iVar4 = *piVar5;
            goto LAB_0003804c;
        }
        if (0 < DAT_00075588) {
            iVar4 = 0;
            do {
                while (true) {
                    iVar6 = FUN_00031b04(iVar4);
                    iVar6 = *(int *)(iVar6 + 0x24);
                    FUN_00023c94(&DAT_00069018, iVar6 + 0x8c);
                    FUN_000257f8(iVar6 + 0x8c, &DAT_00069018);
                    if (0.0 < in_d0)
                        break;
                LAB_00037744:
                    iVar4 = iVar4 + 1;
                    if (DAT_00075588 <= iVar4)
                        goto LAB_0003780c;
                }
                FUN_0002c538(0, uVar12, extraout_s0, in_s3,
                             SUB84((double)(longlong)DAT_00068730, 0),
                             iVar6 + 0x30);
                FUN_0002c538(0, uVar12, extraout_s0, in_s3, 0, iVar6 + 0x38);
                if (in_d0 <= 0.0)
                    goto LAB_00037744;
                FUN_0002c538(0, uVar12, extraout_s0, in_s3, 0, iVar6 + 0x40);
                if (in_d0 <= 0.0)
                    goto LAB_00037744;
                iVar4 = iVar4 + 1;
                FUN_0002c538(0, uVar12, extraout_s0, in_s3, 0, iVar6 + 0x48);
            } while (iVar4 < DAT_00075588);
        }
    LAB_0003780c:
        iVar4 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00076838);
        if (iVar4 == 0) {
            (*DAT_00067ed8)();
            iVar4 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00076838);
            if (iVar4 == 0) {
                dVar16 = (double)FUN_0004a10c(param_3, param_4);
                DAT_000756a8 = DAT_000756a8 + dVar16;
                goto LAB_00037868;
            }
            goto LAB_00037fb8;
        }
        piVar5 = __errno_location();
        iVar4 = *piVar5;
    LAB_00038088:
        pcVar8 = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
    }
    snprintf(acStack_858, 0x800, pcVar8, iVar4);
LAB_00037ff4:
    FUN_00020f58(3, acStack_858, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

void FUN_0003812c(undefined4 *param_1)

{
    char cVar1;
    int iVar2;
    longlong lVar3;
    int iVar4;
    int *piVar5;
    uint uVar6;
    char *__format;
    int iVar7;
    int iVar8;
    int iVar9;
    uint uVar10;
    pthread_rwlock_t *__rwlock;
    undefined4 uVar11;
    bool bVar12;
    longlong lVar13;
    undefined4 local_83c;
    int local_838;
    int local_834;
    int iStack_830;
    int iStack_82c;
    char acStack_828[2052];

    iVar8 = param_1[9];
    local_834 = 0;
    iVar9 = *(int *)(iVar8 + 4);
    uVar11 = *param_1;
    lVar3 = 0;
    local_838 = 0;
LAB_00038164:
    cVar1 = *(char *)(iVar8 + 0x16c);
    do {
        if (cVar1 != '\0') {
        LAB_000382c4:
            *(undefined4 *)(iVar8 + 0x20) = 1;
            return;
        }
        *(undefined1 *)((int)param_1 + 0x3f) = 0;
        do {
            if (*(int *)(iVar8 + 0x164) != 0)
                goto LAB_00038178;
            __rwlock = (pthread_rwlock_t *)(iVar8 + 0x140);
            local_83c = FUN_00036cd4(param_1, uVar11);
            iVar4 = pthread_rwlock_wrlock(__rwlock);
            if (iVar4 != 0) {
                piVar5 = __errno_location();
                iVar8 = *piVar5;
                __format = "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d";
                uVar11 = 0x24a0;
                goto LAB_00038338;
            }
            if (*(int *)(iVar8 + 0x164) == 0) {
                *(undefined4 *)(iVar8 + 0x164) = local_83c;
                iVar4 = pthread_rwlock_unlock(__rwlock);
                if (iVar4 != 0) {
                LAB_00038390:
                    piVar5 = __errno_location();
                    iVar8 = *piVar5;
                    __format =
                        "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d";
                    uVar11 = 0x24ab;
                LAB_00038338:
                    snprintf(acStack_828, 0x800, __format, iVar8, "cgminer.c",
                             "fill_queue", uVar11);
                    FUN_00020f58(3, acStack_828, 1);
                    /* WARNING: Subroutine does not return */
                    FUN_0002e6b0(1);
                }
                (*DAT_00067ed8)();
            } else {
                iVar4 = pthread_rwlock_unlock(__rwlock);
                if (iVar4 != 0)
                    goto LAB_00038390;
                (*DAT_00067ed8)();
                FUN_0002cea0(&local_83c, "cgminer.c", "fill_queue", 0x24af);
            }
        LAB_00038178:
            iVar4 = (**(code **)(iVar9 + 0x48))(iVar8);
        } while (iVar4 == 0);
        lVar13 = (**(code **)(iVar9 + 0x44))(param_1);
        *(undefined1 *)((int)param_1 + 0x3e) = 0;
        if (lVar13 == -1) {
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (2 < DAT_00067db4)) {
                snprintf(acStack_828, 0x800, "%s %d failure, disabling!",
                         *(undefined4 *)(iVar9 + 8),
                         *(undefined4 *)(iVar8 + 8));
                FUN_00020f58(3, acStack_828, 0);
            }
            *(undefined4 *)(iVar8 + 0x20) = 1;
            FUN_00024dc4(iVar8);
            goto LAB_000382c4;
        }
        lVar3 = lVar13 + lVar3;
        uVar10 = (uint)((ulonglong)lVar3 >> 0x20);
        FUN_000239a4(&iStack_830);
        iVar7 = iStack_82c - local_834;
        iVar4 = iStack_830 - local_838;
        if (iVar7 < 0) {
            iVar4 = iVar4 + -1;
            iVar7 = iVar7 + 1000000;
        }
        uVar6 = (uint)lVar3 | uVar10;
        if (uVar6 == 0) {
        LAB_000382d8:
            if (DAT_00068730 <= iVar4)
                goto LAB_00038264;
            lVar13 = lVar3;
            if (*(char *)(param_1 + 0xf) == '\0')
                goto LAB_00038294;
        LAB_000382f8:
            FUN_0002bf50(param_1, uVar11, iVar9 + 0x5c);
        } else {
            uVar6 = 200000;
            bVar12 = iVar7 == 200000;
            iVar2 = iVar7 + -200000;
            if (200000 >= iVar7) {
                bVar12 = iVar4 == 0;
                iVar2 = iVar4;
            }
            if (bVar12 ||
                iVar2 < 0 != (200000 < iVar7 && SBORROW4(iVar7, 200000)))
                goto LAB_000382d8;
        LAB_00038264:
            FUN_000375ec(uVar11, uVar6, (uint)lVar3, uVar10);
            FUN_000257f8(&local_838, &iStack_830);
            lVar3 = 0;
            lVar13 = 0;
            if (*(char *)(param_1 + 0xf) != '\0')
                goto LAB_000382f8;
        LAB_00038294:
            lVar3 = lVar13;
            if (*(int *)(iVar8 + 0x20) != 0)
                goto LAB_000382f8;
        }
        if (*(char *)((int)param_1 + 0x3f) == '\0')
            goto LAB_00038164;
        (**(code **)(iVar9 + 0x50))(iVar8);
        cVar1 = *(char *)(iVar8 + 0x16c);
    } while (true);
}

void FUN_00038444(undefined4 *param_1)

{
    int iVar1;
    int *piVar2;
    undefined4 extraout_r1;
    char *__format;
    undefined4 uVar3;
    int iVar4;
    int iVar5;
    longlong lVar6;
    undefined4 local_838;
    undefined4 local_834;
    undefined1 auStack_830[8];
    char acStack_828[2052];

    iVar4 = param_1[9];
    local_834 = 0;
    iVar5 = *(int *)(iVar4 + 4);
    local_838 = 0;
    uVar3 = *param_1;
    do {
        do {
            if (*(char *)(iVar4 + 0x16c) != '\0') {
            LAB_000385e4:
                *(undefined4 *)(iVar4 + 0x20) = 1;
                return;
            }
            *(undefined1 *)((int)param_1 + 0x3f) = 0;
            lVar6 = (**(code **)(iVar5 + 0x44))(param_1);
            *(undefined1 *)((int)param_1 + 0x3e) = 0;
            if (lVar6 == -1) {
                if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                    (2 < DAT_00067db4)) {
                    snprintf(acStack_828, 0x800, "%s %d failure, disabling!",
                             *(undefined4 *)(iVar5 + 8),
                             *(undefined4 *)(iVar4 + 8));
                    FUN_00020f58(3, acStack_828, 0);
                }
                *(undefined4 *)(iVar4 + 0x20) = 1;
                FUN_00024dc4(iVar4);
                goto LAB_000385e4;
            }
            FUN_000239a4(auStack_830);
            if (lVar6 == 0) {
                if (*(char *)(param_1 + 0xf) != '\0')
                    goto LAB_00038554;
            LAB_000384d4:
                if (*(int *)(iVar4 + 0x20) != 0)
                    goto LAB_00038554;
            } else {
                FUN_000375ec(uVar3, extraout_r1, (int)lVar6,
                             (int)((ulonglong)lVar6 >> 0x20));
                FUN_000257f8(&local_838, auStack_830);
                if (*(char *)(param_1 + 0xf) == '\0')
                    goto LAB_000384d4;
            LAB_00038554:
                FUN_0002bf50(param_1, uVar3, iVar5 + 0x5c);
            }
        } while (*(char *)((int)param_1 + 0x3f) == '\0');
        iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_000767c8);
        if (iVar1 != 0) {
            piVar2 = __errno_location();
            iVar4 = *piVar2;
            uVar3 = 0x262c;
            __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
            goto LAB_0003861c;
        }
        (**(code **)(iVar5 + 0x50))(iVar4);
        iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000767c8);
        if (iVar1 != 0) {
            piVar2 = __errno_location();
            iVar4 = *piVar2;
            uVar3 = 0x262e;
            __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
        LAB_0003861c:
            snprintf(acStack_828, 0x800, __format, iVar4, "cgminer.c",
                     "hash_driver_work", uVar3);
            FUN_00020f58(3, acStack_828, 1);
            /* WARNING: Subroutine does not return */
            FUN_0002e6b0(1);
        }
        (*DAT_00067ed8)();
    } while (true);
}

void FUN_00038678(undefined4 *param_1)

{
    char cVar1;
    longlong lVar2;
    int iVar3;
    uint uVar4;
    undefined4 uVar5;
    int iVar6;
    undefined4 uVar7;
    int iVar8;
    int iVar9;
    uint uVar10;
    int iVar11;
    int iVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;
    int iVar17;
    bool bVar18;
    double dVar19;
    longlong lVar20;
    uint local_880;
    int local_84c;
    int local_848;
    int local_844;
    int local_840;
    int local_83c;
    int local_838;
    int local_834;
    int local_830;
    int local_82c;
    timespec local_828[256];

    iVar15 = param_1[9];
    iVar6 = *(int *)(iVar15 + 4);
    iVar9 = DAT_00068730 / 5;
    uVar7 = *param_1;
    if (iVar9 == 0) {
        iVar9 = 1;
    }
    if (param_1[1] == 0) {
        uVar10 = 1;
    } else {
        uVar10 = (uint) * (byte *)(param_1 + 2);
    }
    local_880 = (**(code **)(iVar6 + 0x30))(param_1);
    FUN_000239a4(&local_848);
    FUN_000239a4(&local_830);
    if (*(char *)(iVar15 + 0x16c) == '\0') {
        iVar11 = iVar9 * 1000000;
        lVar2 = 0;
        iVar12 = iVar11 + 0x3ff;
        if (-1 < iVar11) {
            iVar12 = iVar11;
        }
        iVar16 = 0;
        iVar17 = 0;
        do {
            local_84c = FUN_00036cd4(param_1, uVar7);
            *(undefined1 *)((int)param_1 + 0x3e) = 0;
            *(undefined1 *)(iVar15 + 0xac) = 1;
            FUN_000239a4(&local_838);
            *(undefined4 *)(local_84c + 0xf8) = 0;
            *(undefined4 *)(iVar15 + 0xa0) = 0;
            *(undefined4 *)(iVar15 + 0xa4) = 0;
            iVar3 = (**(code **)(iVar6 + 0x38))(param_1);
            if (iVar3 == 0) {
                if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                    (2 < DAT_00067db4)) {
                    snprintf((char *)local_828, 0x800,
                             "work prepare failed, exiting mining thread %d",
                             uVar7);
                    FUN_00020f58(3, local_828, 0);
                }
                break;
            }
            dVar19 = *(double *)(iVar6 + 0x68);
            if (*(double *)(local_84c + 0x178) < *(double *)(iVar6 + 0x68)) {
                dVar19 = *(double *)(local_84c + 0x178);
            }
            *(double *)(local_84c + 0xe0) = dVar19;
            if (dVar19 < *(double *)(iVar6 + 0x70)) {
                dVar19 = *(double *)(iVar6 + 0x70);
            }
            *(double *)(local_84c + 0xe0) = dVar19;
            while (true) {
                FUN_000239a4(&local_840);
                FUN_000235c4(&local_840, &local_848);
                FUN_000235f8(&local_848, iVar15 + 0x128);
                iVar3 = FUN_0002363c(&local_848, iVar15 + 0x130);
                if (iVar3 != 0) {
                    FUN_000257f8(iVar15 + 0x130, &local_848);
                }
                iVar3 = FUN_00023670(&local_848, iVar15 + 0x138);
                if (iVar3 != 0) {
                    FUN_000257f8(iVar15 + 0x138, &local_848);
                }
                *(int *)(iVar15 + 0x124) = *(int *)(iVar15 + 0x124) + 1;
                iVar14 = *(int *)(local_84c + 0x104);
                FUN_000235f8(&local_848, iVar14 + 0x184);
                iVar3 = FUN_0002363c(&local_848, iVar14 + 0x18c);
                if (iVar3 != 0) {
                    FUN_000257f8(iVar14 + 0x18c, &local_848);
                }
                iVar3 = FUN_00023670(&local_848, iVar14 + 0x194);
                if (iVar3 != 0) {
                    FUN_000257f8(iVar14 + 0x194, &local_848);
                }
                *(int *)(iVar14 + 0x180) = *(int *)(iVar14 + 0x180) + 1;
                FUN_000239a4(local_84c + 0x1a8);
                pthread_setcancelstate(1, (int *)0x0);
                FUN_0002aec4(param_1);
                lVar20 = (**(code **)(iVar6 + 0x40))(
                    param_1, local_84c, local_880 + *(int *)(local_84c + 0xf8),
                    0);
                iVar8 = (int)((ulonglong)lVar20 >> 0x20);
                FUN_0002ae8c(param_1);
                pthread_setcancelstate(0, (int *)0x0);
                pthread_testcancel();
                FUN_000239a4(&local_848);
                iVar14 = local_844;
                iVar3 = local_848;
                if (lVar20 == -1)
                    break;
                iVar13 = *(int *)(iVar15 + 0xa4);
                lVar2 = lVar20 + lVar2;
                bVar18 = *(uint *)(iVar15 + 0xa0) < (uint)lVar20;
                if ((int)(iVar13 - (iVar8 + (uint)bVar18)) < 0 !=
                    (SBORROW4(iVar13, iVar8) !=
                     SBORROW4(iVar13 - iVar8, (uint)bVar18))) {
                    *(longlong *)(iVar15 + 0xa0) = lVar20;
                }
                iVar8 = local_844 - local_83c;
                bVar18 = iVar8 < 0;
                if (bVar18) {
                    iVar8 = iVar8 + 1000000;
                }
                iVar13 = local_848 - local_840;
                iVar16 = iVar16 + iVar8;
                if (bVar18) {
                    iVar13 = iVar13 + -1;
                }
                iVar17 = iVar17 + iVar13;
                if (1000000 < iVar16) {
                    iVar17 = iVar17 + 1;
                    iVar16 = iVar16 + -1000000;
                }
                iVar8 = local_848 - local_838;
                if (local_844 - local_834 < 0) {
                    iVar8 = iVar8 + -1;
                }
                if (iVar17 < iVar9) {
                    if (local_880 != 0xffffffff) {
                        iVar13 = iVar16 + 0x400;
                        if (iVar16 + 0x400 < 0) {
                            iVar13 = iVar16 + 0x7ff;
                        }
                        iVar13 = FUN_00049b50(1000000, iVar13 >> 10);
                        iVar13 = (iVar13 + 0x10) * iVar9;
                        uVar4 = FUN_000498d8(0xfffffc00, iVar13);
                        if (uVar4 < local_880) {
                            local_880 = 0xffffffff;
                        } else {
                            local_880 = local_880 * iVar13 >> 10;
                        }
                        goto LAB_000389b8;
                    }
                } else {
                    if (iVar9 < iVar17) {
                        local_880 = FUN_000498d8(iVar9 * local_880, iVar17);
                    } else if (100000 < iVar16) {
                        uVar5 = FUN_00049b50(iVar11 + iVar16, iVar12 >> 10);
                        local_880 = FUN_000498d8(local_880 << 10, uVar5);
                    }
                LAB_000389b8:
                    iVar14 = iVar14 - local_82c;
                    bVar18 = iVar14 < 0;
                    if (bVar18) {
                        iVar14 = iVar14 + 0xf4000;
                    }
                    iVar3 = iVar3 - local_830;
                    if (bVar18) {
                        iVar3 = iVar3 + -1;
                        iVar14 = iVar14 + 0x240;
                    }
                    if (lVar2 == 0) {
                    LAB_00038ab8:
                        if (DAT_00068730 <= iVar3)
                            goto LAB_000389f0;
                        cVar1 = *(char *)((int)param_1 + 0x3e);
                    } else {
                        bVar18 = iVar3 == 0;
                        iVar13 = iVar3;
                        if (iVar3 < 1) {
                            iVar13 = iVar14 + -200000;
                            bVar18 = iVar14 == 200000;
                        }
                        if (bVar18 || iVar13 < 0 != (iVar3 < 1 &&
                                                     SBORROW4(iVar14, 200000)))
                            goto LAB_00038ab8;
                    LAB_000389f0:
                        FUN_000375ec(uVar7, local_830, (int)lVar2,
                                     (int)((ulonglong)lVar2 >> 0x20));
                        FUN_000257f8(&local_830, &local_848);
                        cVar1 = *(char *)((int)param_1 + 0x3e);
                        lVar2 = 0;
                    }
                    if (cVar1 != '\0') {
                        if (uVar10 == 0) {
                            local_828[0].tv_nsec = param_1[1] * 250000000;
                            local_828[0].tv_sec = uVar10;
                            nanosleep(local_828, (timespec *)0x0);
                        }
                        goto LAB_00038a80;
                    }
                    if ((*(char *)(param_1 + 0xf) == '\0') &&
                        (*(int *)(iVar15 + 0x20) == 0)) {
                        iVar16 = 0;
                        iVar17 = 0;
                    } else {
                        iVar16 = 0;
                        FUN_0002bf50(param_1, uVar7, iVar6 + 0x5c);
                        iVar17 = iVar16;
                    }
                }
                if ((DAT_00068754 < iVar8 ||
                     (*(int *)(iVar15 + 0xa4) != 0 ||
                      0xfffffffd < *(uint *)(iVar15 + 0xa0))) ||
                    (iVar3 = FUN_000367ec(local_84c), iVar3 != 0))
                    goto LAB_00038a80;
            }
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (2 < DAT_00067db4)) {
                snprintf((char *)local_828, 0x800, "%s %d failure, disabling!",
                         *(undefined4 *)(iVar6 + 8),
                         *(undefined4 *)(iVar15 + 8));
                FUN_00020f58(3, local_828, 0);
            }
            *(undefined4 *)(iVar15 + 0x20) = 1;
            FUN_00024dc4(iVar15, 1);
            *(undefined1 *)(iVar15 + 0x16c) = 1;
        LAB_00038a80:
            FUN_0002cba8(&local_84c, "cgminer.c", "hash_sole_work", 0x2487);
        } while (*(char *)(iVar15 + 0x16c) == '\0');
    }
    *(undefined4 *)(iVar15 + 0x20) = 1;
    return;
}

void FUN_00038d3c(void)

{
    char cVar1;
    int iVar2;
    int iVar3;
    time_t tVar4;
    undefined4 *puVar5;
    int *piVar6;
    undefined4 extraout_r1;
    int iVar7;
    int *piVar8;
    int iVar9;
    int *piVar10;
    int iVar11;
    undefined4 uVar12;
    int local_840[2];
    char acStack_838[8];
    char local_830[2052];

    pthread_setcanceltype(1, (int *)0x0);
    FUN_000250a8("Watchdog");
    FUN_0002c148();
    FUN_000239a4(&DAT_00069180);
    do {
        sleep(2);
        FUN_00037134();
        FUN_000375ec(0xffffffff, extraout_r1, 0, 0);
        FUN_000239a4(local_840);
        if (DAT_00073460 == '\0') {
            if ((DAT_0007339c != '\0') || (DAT_000732e4 != '\0')) {
                iVar2 = FUN_0002bd14();
                if (iVar2 == 0) {
                    if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                        (DAT_00067db4 < 4)) {
                        if (DAT_0007339c == '\0') {
                        LAB_000394bc:
                            builtin_strncpy(local_830,
                                            "Terminating execution as planned",
                                            0x20);
                            local_830[0x20] = 0;
                            FUN_00020f58(3, local_830, 1);
                            /* WARNING: Subroutine does not return */
                            FUN_0002e6b0(0, 1);
                        }
                    LAB_000391ac:
                        if (3 < DAT_00067db4)
                            goto LAB_0003928c;
                    } else {
                        snprintf(local_830, 0x800,
                                 "Pausing execution as per stop time %02d:%02d "
                                 "scheduled",
                                 DAT_000732f0, DAT_000732ec);
                        FUN_00020f58(4, local_830, 0);
                        if (DAT_0007339c == '\0')
                            goto LAB_000394bc;
                        if ((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0'))
                            goto LAB_000391ac;
                    LAB_0003928c:
                        snprintf(
                            local_830, 0x800,
                            "Will restart execution as scheduled at %02d:%02d",
                            DAT_000733a8, DAT_000733a4);
                        FUN_00020f58(4, local_830, 0);
                    }
                    DAT_00073460 = '\x01';
                    iVar2 = pthread_rwlock_rdlock(
                        (pthread_rwlock_t *)&DAT_000744a8);
                    if (iVar2 != 0) {
                        piVar6 = __errno_location();
                        snprintf(
                            local_830, 0x800,
                            "WTF RDLOCK ERROR ON LOCK! errno=%d in %s %s():%d",
                            *piVar6, "cgminer.c", "watchdog_thread", 0x28b9);
                        goto LAB_00039538;
                    }
                    if (0 < DAT_00075588) {
                        piVar8 = DAT_000744a4 + DAT_00075588;
                        piVar6 = DAT_000744a4;
                        do {
                            piVar10 = piVar6 + 1;
                            *(undefined1 *)(*piVar6 + 0x3c) = 1;
                            piVar6 = piVar10;
                        } while (piVar10 != piVar8);
                    }
                    iVar2 = pthread_rwlock_unlock(
                        (pthread_rwlock_t *)&DAT_000744a8);
                    if (iVar2 != 0) {
                        piVar6 = __errno_location();
                        snprintf(local_830, 0x800,
                                 "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s "
                                 "%s():%d",
                                 *piVar6, "cgminer.c", "watchdog_thread",
                                 0x28c0);
                    LAB_00039538:
                        FUN_00020f58(3, local_830, 1);
                        /* WARNING: Subroutine does not return */
                        FUN_0002e6b0(1);
                    }
                    (*DAT_00067ed8)();
                } else if (DAT_00073460 != '\0')
                    goto LAB_00038df4;
            }
        } else {
        LAB_00038df4:
            if (((DAT_0007339c == '\0') && (DAT_000732e4 == '\0')) ||
                (iVar2 = FUN_0002bd14(), iVar2 != 0)) {
                if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                    (DAT_00067db4 < 4)) {
                    if (DAT_000732e4 != '\0') {
                    LAB_0003945c:
                        if (3 < DAT_00067db4)
                            goto LAB_00039468;
                    }
                } else {
                    snprintf(local_830, 0x800,
                             "Restarting execution as per start time %02d:%02d "
                             "scheduled",
                             DAT_000733a8, DAT_000733a4);
                    FUN_00020f58(4, local_830, 0);
                    if (DAT_000732e4 != '\0') {
                        if ((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0'))
                            goto LAB_0003945c;
                    LAB_00039468:
                        snprintf(
                            local_830, 0x800,
                            "Will pause execution as scheduled at %02d:%02d",
                            DAT_000732f0, DAT_000732ec);
                        FUN_00020f58(4, local_830, 0);
                    }
                }
                iVar2 = 0;
                DAT_00073460 = '\0';
                if (0 < DAT_00075588) {
                    do {
                        puVar5 = (undefined4 *)FUN_00031b04(iVar2);
                        cVar1 = DAT_00068bd5;
                        if (*(int *)(puVar5[9] + 0x20) != 1) {
                            *(undefined1 *)(puVar5 + 0xf) = 0;
                            if ((cVar1 != '\0') && (((DAT_00074500 != '\0' ||
                                                      (DAT_00068bd4 != '\0')) ||
                                                     (6 < DAT_00067db4)))) {
                                snprintf(local_830, 0x800,
                                         "Pushing sem post to thread %d",
                                         *puVar5);
                                FUN_00020f58(7, local_830, 0);
                            }
                            FUN_000251ac(puVar5 + 4, "cgminer.c",
                                         "watchdog_thread", 0x28db);
                        }
                        iVar2 = iVar2 + 1;
                    } while (iVar2 < DAT_00075588);
                }
            }
        }
        if (0 < DAT_000755c0) {
            iVar2 = 0;
            do {
                iVar3 = FUN_0003046c(iVar2);
                iVar11 = **(int **)(iVar3 + 0x98);
                if (iVar11 != 0) {
                    (**(code **)(*(int *)(iVar3 + 4) + 0x20))();
                    uVar12 = *(undefined4 *)(iVar3 + 8);
                    snprintf(acStack_838, 8, "%s %d",
                             *(undefined4 *)(*(int *)(iVar3 + 4) + 8), uVar12);
                    cVar1 = DAT_00074500;
                    if ((*(char *)(iVar11 + 0x3d) == '\0') &&
                        (*(int *)(iVar3 + 0x20) != 1)) {
                        iVar7 = *(int *)(iVar3 + 0x60);
                        iVar9 = local_840[0] - *(int *)(iVar11 + 0x2c);
                        if (iVar7 == 0) {
                            if (0x78 < iVar9) {
                                *(undefined8 *)(iVar3 + 0x30) = 0;
                                *(undefined4 *)(iVar3 + 0x60) = 1;
                                if (((cVar1 != '\0') ||
                                     (DAT_00068bd4 != '\0')) ||
                                    (2 < DAT_00067db4)) {
                                    snprintf(local_830, 0x800,
                                             "%s: Idle for more than 60 "
                                             "seconds, declaring SICK!",
                                             acStack_838, uVar12);
                                    FUN_00020f58(3, local_830, 0);
                                }
                                FUN_000239a4(iVar11 + 0x34);
                                FUN_00024dc4(iVar3, 3);
                                if (DAT_0006875c != '\0') {
                                    if (((DAT_00074500 != '\0') ||
                                         (DAT_00068bd4 != '\0')) ||
                                        (2 < DAT_00067db4)) {
                                        snprintf(local_830, 0x800,
                                                 "%s: Attempting to restart",
                                                 acStack_838, uVar12);
                                        FUN_00020f58(3, local_830, 0);
                                    }
                                LAB_00038f44:
                                    if (*(int *)(iVar3 + 0x20) != 1) {
                                        (**(code **)(*(int *)(iVar3 + 4) +
                                                     0x10))(iVar3);
                                    }
                                }
                            }
                        } else if (iVar9 < 0x78) {
                            if ((iVar7 != 4) && (((DAT_00074500 != '\0' ||
                                                   (DAT_00068bd4 != '\0')) ||
                                                  (2 < DAT_00067db4)))) {
                                snprintf(local_830, 0x800,
                                         "%s: Recovered, declaring WELL!",
                                         acStack_838, uVar12);
                                FUN_00020f58(3, local_830, 0);
                            }
                            *(undefined4 *)(iVar3 + 0x60) = 0;
                            tVar4 = time((time_t *)0x0);
                            *(time_t *)(iVar3 + 0xf0) = tVar4;
                        } else if (iVar7 == 1) {
                            if (iVar9 < 0x259) {
                                if (0x3c <
                                    local_840[0] - *(int *)(iVar11 + 0x34))
                                    goto LAB_0003910c;
                            } else {
                                *(undefined4 *)(iVar3 + 0x60) = 2;
                                if (((cVar1 != '\0') ||
                                     (DAT_00068bd4 != '\0')) ||
                                    (2 < DAT_00067db4)) {
                                    snprintf(local_830, 0x800,
                                             "%s: Not responded for more than "
                                             "10 minutes, declaring DEAD!",
                                             acStack_838, uVar12);
                                    FUN_00020f58(3, local_830, 0);
                                }
                                FUN_000239a4(iVar11 + 0x34);
                                FUN_00024dc4(iVar3, 4);
                            }
                        } else if ((0x3c <
                                    local_840[0] - *(int *)(iVar11 + 0x34)) &&
                                   (iVar7 == 2)) {
                        LAB_0003910c:
                            FUN_000239a4(iVar11 + 0x34);
                            if (DAT_0006875c != '\0')
                                goto LAB_00038f44;
                        }
                    }
                }
                iVar2 = iVar2 + 1;
            } while (iVar2 < DAT_000755c0);
        }
    } while (true);
}

/* WARNING: Restarted to delay deadcode elimination for space: ram */

undefined4 FUN_0003958c(undefined4 *param_1)

{
    char cVar1;
    pthread_t __th;
    int iVar2;
    int *piVar3;
    time_t tVar4;
    int iVar5;
    uint uVar6;
    size_t sVar7;
    void *pvVar8;
    int iVar9;
    int iVar10;
    uint uVar11;
    undefined4 uVar12;
    char *pcVar13;
    byte bVar14;
    int iVar15;
    uint uVar16;
    int iVar17;
    int *piVar18;
    undefined4 uVar19;
    undefined4 *puVar20;
    int iVar21;
    pthread_rwlock_t *__rwlock;
    undefined4 uVar22;
    char *pcVar23;
    bool bVar24;
    undefined1 *puVar25;
    undefined1 *puVar26;
    uint local_ca0;
    int local_c6c;
    int local_c68;
    uint local_c64;
    int local_c60;
    int iStack_c5c;
    undefined1 auStack_c58[12];
    char acStack_c4c[16];
    undefined1 auStack_c3c[20];
    char acStack_c28[1024];
    char local_828[40];
    undefined4 uStack_800;
    char acStack_7fc[4];
    undefined4 local_7f8;
    undefined2 local_7f4;

    __th = pthread_self();
    pthread_detach(__th);
    snprintf(acStack_c4c, 0x10, "%d/SStratum", *param_1);
    FUN_000250a8(acStack_c4c);
    iVar2 = FUN_00023300();
    param_1[0xb6] = iVar2;
    if (iVar2 == 0) {
        pcVar23 = " stratum_q in stratum_sthread";
        builtin_strncpy(local_828, "Failed to create", 0x10);
        pcVar13 = local_828 + 0x10;
    } else {
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (4 < DAT_00067db4)) {
            snprintf(local_828, 0x800, "in %s , pool: %d, pool_url: %s",
                     "stratum_sthread", *param_1, param_1[0x29]);
            FUN_00020f58(5, local_828, 0);
            iVar2 = param_1[0xb6];
        }
        cVar1 = *(char *)((int)param_1 + 0x69);
        iVar5 = 0;
        iVar17 = 0;
        iVar21 = 0;
        while (true) {
            if (cVar1 != '\0') {
                FUN_000233c4();
                return 0;
            }
            local_c68 = FUN_000234a8(iVar2);
            if (local_c68 == 0)
                break;
            if (*(uint *)(local_c68 + 0x130) < 9) {
                iVar9 = *(int *)(local_c68 + 0x4c);
                iVar10 = *(int *)(local_c68 + 0x128);
                iVar15 = *(int *)(local_c68 + 300);
                local_c6c = iVar9;
                local_c60 = iVar10;
                iStack_c5c = iVar15;
                if (iVar9 == iVar5 && (iVar15 == iVar21 && iVar10 == iVar17)) {
                    if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                        (5 < DAT_00067db4)) {
                        snprintf(local_828, 0x800,
                                 "Filtering duplicate share to pool %d",
                                 *param_1);
                        FUN_00020f58(6, local_828, 0);
                    }
                    FUN_0002cba8(&local_c68, "cgminer.c", "stratum_sthread",
                                 0x1df4);
                    iVar10 = iVar17;
                    iVar15 = iVar21;
                    iVar9 = iVar5;
                } else {
                    FUN_00022bb4(auStack_c58, &local_c6c, 4);
                    FUN_00022bb4(auStack_c3c, &local_c60,
                                 *(undefined4 *)(local_c68 + 0x130));
                    piVar3 = (int *)FUN_00022a44(0x34, 1, "cgminer.c",
                                                 "stratum_sthread", 0x1dfd);
                    iVar2 = local_c68;
                    tVar4 = time((time_t *)0x0);
                    piVar3[0xb] = tVar4;
                    piVar3[9] = local_c68;
                    memset(acStack_c28, 0, 0x400);
                    iVar5 =
                        pthread_mutex_lock((pthread_mutex_t *)&DAT_000690f0);
                    if (iVar5 != 0) {
                        piVar3 = __errno_location();
                        iVar2 = *piVar3;
                        uVar22 = 0x1e06;
                        pcVar13 =
                            "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
                    LAB_0003a0c0:
                        snprintf(local_828, 0x800, pcVar13, iVar2, "cgminer.c",
                                 "stratum_sthread", uVar22);
                        FUN_00020f58(3, local_828, 1);
                        /* WARNING: Subroutine does not return */
                        FUN_0002e6b0(1);
                    }
                    piVar3[10] = DAT_0007448c;
                    DAT_0007448c = DAT_0007448c + 1;
                    uVar6 =
                        pthread_mutex_unlock((pthread_mutex_t *)&DAT_000690f0);
                    if (uVar6 != 0) {
                        piVar3 = __errno_location();
                        iVar2 = *piVar3;
                        uVar22 = 0x1e09;
                        pcVar13 =
                            "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
                        goto LAB_0003a0c0;
                    }
                    (*DAT_00067ed8)();
                    local_c64 = uVar6;
                    FUN_00022cd8(&local_c64, param_1 + 0x1bd);
                    if (*(char *)(param_1 + 0xa1) == '\0') {
                        uVar6 = piVar3[10];
                        puVar26 = auStack_c58;
                        puVar25 = auStack_c3c;
                        uVar22 = *(undefined4 *)(local_c68 + 0x134);
                        snprintf(acStack_c28, 0x400,
                                 "{\"params\": [\"%s\", \"%s\", \"%s\", "
                                 "\"%s\", \"%s\"], \"id\": %d, \"method\": "
                                 "\"mining.submit\"}",
                                 param_1[0x2b],
                                 *(undefined4 *)(local_c68 + 0x120), puVar25,
                                 uVar22, puVar26, uVar6);
                    } else {
                        puVar26 = auStack_c58;
                        uVar6 = *(uint *)(local_c68 + 0x1bc) & ~local_c64;
                        uVar6 = uVar6 << 0x18 | (uVar6 >> 8 & 0xff) << 0x10 |
                                (uVar6 >> 0x10 & 0xff) << 8 | uVar6 >> 0x18;
                        puVar25 = auStack_c3c;
                        uVar22 = *(undefined4 *)(local_c68 + 0x134);
                        snprintf(acStack_c28, 0x400,
                                 "{\"params\": [\"%s\", \"%s\", \"%s\", "
                                 "\"%s\", \"%s\", \"%08x\"], \"id\": %d, "
                                 "\"method\": \"mining.submit\"}",
                                 param_1[0x2b],
                                 *(undefined4 *)(local_c68 + 0x120), puVar25,
                                 uVar22, puVar26, uVar6, piVar3[10]);
                    }
                    if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                        (5 < DAT_00067db4)) {
                        snprintf(local_828, 0x800,
                                 "Submitting share %08lx to pool %d",
                                 *(undefined4 *)(iVar2 + 0xd8), *param_1,
                                 puVar25, uVar22, puVar26, uVar6);
                        FUN_00020f58(6, local_828, 0);
                    }
                    while (iVar2 = piVar3[0xb], tVar4 = time((time_t *)0x0),
                           tVar4 <= iVar2 + 0x77) {
                        sVar7 = strlen(acStack_c28);
                        iVar2 = FUN_000244a4(param_1, acStack_c28, sVar7);
                        if (iVar2 != 0) {
                            iVar2 = pthread_mutex_lock(
                                (pthread_mutex_t *)&DAT_000690f0);
                            if (iVar2 == 0) {
                                piVar3[5] = (int)(piVar3 + 10);
                                piVar18 = DAT_00069108;
                                bVar24 = DAT_00069108 == (int *)0x0;
                                piVar3[6] = 4;
                                uVar16 =
                                    *(byte *)(piVar3 + 10) + 0x112410d +
                                        (uint) * (byte *)((int)piVar3 + 0x2b) *
                                            0x1000000 +
                                        (uint) * (byte *)((int)piVar3 + 0x2a) *
                                            0x10000 +
                                        (uint) * (byte *)((int)piVar3 + 0x29) *
                                            0x100 ^
                                    0x7f76d;
                                uVar11 = 0x9f49bac6 - uVar16 ^ uVar16 << 8;
                                uVar6 = (-0x112410d - uVar16) - uVar11 ^
                                        uVar11 >> 0xd;
                                uVar16 =
                                    (uVar16 - uVar11) - uVar6 ^ uVar6 >> 0xc;
                                uVar11 =
                                    (uVar11 - uVar6) - uVar16 ^ uVar16 << 0x10;
                                uVar6 = (uVar6 - uVar16) - uVar11 ^ uVar11 >> 5;
                                uVar16 = (uVar16 - uVar11) - uVar6 ^ uVar6 >> 3;
                                uVar11 = (uVar11 - uVar6) - uVar16 ^ uVar16
                                                                         << 10;
                                uVar6 =
                                    (uVar6 - uVar16) - uVar11 ^ uVar11 >> 0xf;
                                piVar3[7] = uVar6;
                                if (bVar24) {
                                    piVar3[2] = 0;
                                    piVar3[1] = 0;
                                    DAT_00069108 = piVar3;
                                    pvVar8 = malloc(0x2c);
                                    *piVar3 = (int)pvVar8;
                                    if (pvVar8 == (void *)0x0)
                                        goto LAB_0003a5bc;
                                    memset(pvVar8, 0, 0x2c);
                                    *(int **)(*piVar3 + 0x10) = piVar3;
                                    *(undefined4 *)(*piVar3 + 4) = 0x20;
                                    *(undefined4 *)(*piVar3 + 8) = 5;
                                    *(undefined4 *)(*piVar3 + 0x14) = 0;
                                    puVar20 = (undefined4 *)*piVar3;
                                    pvVar8 = malloc(0x180);
                                    *puVar20 = pvVar8;
                                    if (*(void **)*piVar3 == (void *)0x0)
                                        goto LAB_0003a5bc;
                                    memset(*(void **)*piVar3, 0, 0x180);
                                    *(undefined4 *)(*piVar3 + 0x28) =
                                        0xa0111fe1;
                                    piVar18 = piVar3;
                                } else {
                                    iVar2 = *piVar18;
                                    piVar3[2] = 0;
                                    *piVar3 = iVar2;
                                    piVar3[1] = *(int *)(*piVar18 + 0x10) -
                                                *(int *)(*piVar18 + 0x14);
                                    *(int **)(*(int *)(*piVar18 + 0x10) + 8) =
                                        piVar3;
                                    *(int **)(*piVar18 + 0x10) = piVar3;
                                }
                                *(int *)(*piVar18 + 0xc) =
                                    *(int *)(*piVar18 + 0xc) + 1;
                                uVar6 = uVar6 & ((int *)*piVar18)[1] - 1U;
                                iVar2 = uVar6 * 0xc;
                                iVar5 = *(int *)*piVar18 + iVar2;
                                *(int *)(iVar5 + 4) = *(int *)(iVar5 + 4) + 1;
                                iVar5 =
                                    *(int *)(*(int *)*piVar18 + uVar6 * 0xc);
                                piVar3[3] = 0;
                                piVar3[4] = iVar5;
                                iVar17 = *(int *)*piVar18;
                                iVar5 = *(int *)(iVar17 + uVar6 * 0xc);
                                if (iVar5 != 0) {
                                    *(int **)(iVar5 + 0xc) = piVar3;
                                    iVar17 = *(int *)*piVar18;
                                }
                                *(int **)(iVar17 + iVar2) = piVar3;
                                if (((uint)((*(int *)(*(int *)*piVar18 + iVar2 +
                                                      8) +
                                             1) *
                                            10) <=
                                     *(uint *)(*(int *)*piVar18 + iVar2 + 4)) &&
                                    (*(int *)(*piVar3 + 0x24) != 1)) {
                                    pvVar8 =
                                        calloc(*(int *)(*piVar3 + 4) * 0x18, 1);
                                    if (pvVar8 == (void *)0x0) {
                                    LAB_0003a5bc:
                                        /* WARNING: Subroutine does not return
                                         */
                                        exit(-1);
                                    }
                                    iVar2 = *piVar3;
                                    *(uint *)(iVar2 + 0x18) =
                                        (uint)((*(int *)(iVar2 + 4) * 2 - 1U &
                                                *(uint *)(iVar2 + 0xc)) != 0) +
                                        (*(uint *)(iVar2 + 0xc) >>
                                         (*(int *)(iVar2 + 8) + 1U & 0xff));
                                    *(undefined4 *)(*piVar3 + 0x1c) = 0;
                                    piVar18 = (int *)*piVar3;
                                    uVar6 = piVar18[1];
                                    if (uVar6 != 0) {
                                        iVar2 = 0;
                                        local_ca0 = 0;
                                        do {
                                            iVar5 = *(int *)(*piVar18 + iVar2);
                                            if (*(int *)(*piVar18 + iVar2) !=
                                                0) {
                                                while (true) {
                                                    iVar21 =
                                                        *(int *)(iVar5 + 0x10);
                                                    uVar11 =
                                                        uVar6 * 2 - 1 &
                                                        *(uint *)(iVar5 + 0x1c);
                                                    uVar6 =
                                                        *(int *)((int)pvVar8 +
                                                                 uVar11 * 0xc +
                                                                 4) +
                                                        1;
                                                    *(uint *)((int)pvVar8 +
                                                              uVar11 * 0xc +
                                                              4) = uVar6;
                                                    iVar17 = *piVar3;
                                                    if (*(uint *)(iVar17 +
                                                                  0x18) <
                                                        uVar6) {
                                                        *(int *)(iVar17 +
                                                                 0x1c) =
                                                            *(int *)(iVar17 +
                                                                     0x1c) +
                                                            1;
                                                        uVar22 = FUN_000498d8(
                                                            *(undefined4
                                                                  *)((int)
                                                                         pvVar8 +
                                                                     uVar11 *
                                                                         0xc +
                                                                     4),
                                                            *(undefined4
                                                                  *)(*piVar3 +
                                                                     0x18));
                                                        *(undefined4
                                                              *)((int)pvVar8 +
                                                                 uVar11 * 0xc +
                                                                 8) = uVar22;
                                                    }
                                                    *(undefined4 *)(iVar5 +
                                                                    0xc) = 0;
                                                    *(undefined4 *)(iVar5 +
                                                                    0x10) =
                                                        *(undefined4
                                                              *)((int)pvVar8 +
                                                                 uVar11 * 0xc);
                                                    iVar17 =
                                                        *(int *)((int)pvVar8 +
                                                                 uVar11 * 0xc);
                                                    if (iVar17 != 0) {
                                                        *(int *)(iVar17 + 0xc) =
                                                            iVar5;
                                                    }
                                                    *(int *)((int)pvVar8 +
                                                             uVar11 * 0xc) =
                                                        iVar5;
                                                    piVar18 = (int *)*piVar3;
                                                    if (iVar21 == 0)
                                                        break;
                                                    uVar6 = piVar18[1];
                                                    iVar5 = iVar21;
                                                }
                                                uVar6 = piVar18[1];
                                            }
                                            iVar2 = iVar2 + 0xc;
                                            local_ca0 = local_ca0 + 1;
                                        } while (local_ca0 < uVar6);
                                    }
                                    free((void *)*piVar18);
                                    *(int *)(*piVar3 + 4) =
                                        *(int *)(*piVar3 + 4) << 1;
                                    *(int *)(*piVar3 + 8) =
                                        *(int *)(*piVar3 + 8) + 1;
                                    *(void **)*piVar3 = pvVar8;
                                    iVar2 = *piVar3;
                                    if (*(uint *)(iVar2 + 0xc) >> 1 <
                                        *(uint *)(iVar2 + 0x1c)) {
                                        iVar5 = *(int *)(iVar2 + 0x20) + 1;
                                    } else {
                                        iVar5 = 0;
                                    }
                                    *(int *)(iVar2 + 0x20) = iVar5;
                                    if (1 < *(uint *)(*piVar3 + 0x20)) {
                                        *(undefined4 *)(*piVar3 + 0x24) = 1;
                                    }
                                }
                                param_1[0xb7] = param_1[0xb7] + 1;
                                iVar2 = pthread_mutex_unlock(
                                    (pthread_mutex_t *)&DAT_000690f0);
                                if (iVar2 != 0) {
                                    piVar3 = __errno_location();
                                    iVar2 = *piVar3;
                                    uVar22 = 0x1e38;
                                    pcVar13 = "WTF MUTEX ERROR ON UNLOCK! "
                                              "errno=%d in %s %s():%d";
                                    goto LAB_0003a0c0;
                                }
                                (*DAT_00067ed8)();
                                iVar2 = FUN_0002f180(param_1, param_1 + 0x18);
                                if (iVar2 == 0) {
                                LAB_00039c0c:
                                    if (DAT_00068bd5 != 0) {
                                        if ((DAT_00074500 == '\0') &&
                                            (DAT_00068bd4 == '\0'))
                                            goto LAB_00039ea8;
                                    LAB_00039c44:
                                        builtin_strncpy(
                                            local_828,
                                            "Successfully submitted, adding to "
                                            "stratu",
                                            0x28);
                                        uStack_800._0_1_ = 'm';
                                        uStack_800._1_1_ = '_';
                                        uStack_800._2_1_ = 's';
                                        uStack_800._3_1_ = 'h';
                                        builtin_strncpy(acStack_7fc, "ares", 4);
                                        local_7f8._0_1_ = ' ';
                                        local_7f8._1_1_ = 'd';
                                        local_7f8._2_1_ = 'b';
                                        local_7f8._3_1_ = '\0';
                                        FUN_00020f58(7, local_828, 0);
                                    }
                                } else {
                                    if (((DAT_00074500 != '\0') ||
                                         (DAT_00068bd4 != '\0')) ||
                                        (3 < DAT_00067db4)) {
                                        snprintf(local_828, 0x800,
                                                 "Pool %d communication "
                                                 "resumed, submitting work",
                                                 *param_1);
                                        FUN_00020f58(4, local_828, 0);
                                        goto LAB_00039c0c;
                                    }
                                    if (DAT_00068bd5 != 0) {
                                    LAB_00039ea8:
                                        if (6 < DAT_00067db4)
                                            goto LAB_00039c44;
                                    }
                                }
                                tVar4 = time((time_t *)0x0);
                                bVar14 = DAT_00068bd5;
                                piVar3[0xc] = tVar4;
                                if (0 < tVar4 - piVar3[0xb]) {
                                    bVar14 = bVar14 | 1;
                                }
                                if ((bVar14 != 0) &&
                                    (((DAT_00074500 != '\0' ||
                                       (DAT_00068bd4 != '\0')) ||
                                      (5 < DAT_00067db4)))) {
                                    snprintf(local_828, 0x800,
                                             "Pool %d stratum share submission "
                                             "lag time %d seconds",
                                             *param_1, tVar4 - piVar3[0xb]);
                                    FUN_00020f58(6, local_828, 0);
                                }
                                goto LAB_00039bb8;
                            }
                            piVar3 = __errno_location();
                            iVar2 = *piVar3;
                            uVar22 = 0x1e35;
                            pcVar13 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s "
                                      "%s():%d";
                            goto LAB_0003a0c0;
                        }
                        iVar2 = FUN_0002f098(param_1, param_1 + 0x18);
                        if ((iVar2 == 0) &&
                            (iVar2 = FUN_00032424(param_1), iVar2 != 0)) {
                            if ((DAT_00074500 != '\0') ||
                                ((DAT_00068bd4 != '\0' ||
                                  (3 < DAT_00067db4)))) {
                                snprintf(
                                    local_828, 0x800,
                                    "Pool %d stratum share submission failure",
                                    *param_1);
                                FUN_00020f58(4, local_828, 0);
                            }
                            DAT_00074494 = DAT_00074494 + 1;
                            param_1[0x21] = param_1[0x21] + 1;
                        }
                        if (DAT_00075684 != '\0') {
                            if (DAT_00068bd5 == 0)
                                goto LAB_0003a360;
                            if (((DAT_00074500 == '\0') &&
                                 (DAT_00068bd4 == '\0')) &&
                                (DAT_00067db4 < 7))
                                goto LAB_0003a2f8;
                            builtin_strncpy(
                                local_828,
                                "Lowmem option prevents resubmitting stra",
                                0x28);
                            uStack_800._0_1_ = 't';
                            uStack_800._1_1_ = 'u';
                            uStack_800._2_1_ = 'm';
                            uStack_800._3_1_ = ' ';
                            builtin_strncpy(acStack_7fc, "shar", 4);
                            local_7f8._0_2_ = 0x65;
                            FUN_00020f58(7, local_828, 0);
                            break;
                        }
                        iVar2 = pthread_mutex_lock(
                            (pthread_mutex_t *)(param_1 + 0x35));
                        if (iVar2 != 0) {
                            piVar3 = __errno_location();
                            iVar2 = *piVar3;
                            uVar22 = 0x1e4e;
                            pcVar13 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s "
                                      "%s():%d";
                            goto LAB_0003a0c0;
                        }
                        __rwlock = (pthread_rwlock_t *)(param_1 + 0x3b);
                        iVar2 = pthread_rwlock_rdlock(__rwlock);
                        if (iVar2 != 0) {
                            piVar3 = __errno_location();
                            iVar2 = *piVar3;
                            uVar22 = 0x1e4e;
                            pcVar13 = "WTF RDLOCK ERROR ON LOCK! errno=%d in "
                                      "%s %s():%d";
                            goto LAB_0003a0c0;
                        }
                        iVar2 = pthread_mutex_unlock(
                            (pthread_mutex_t *)(param_1 + 0x35));
                        if (iVar2 != 0) {
                            piVar3 = __errno_location();
                            iVar2 = *piVar3;
                            uVar22 = 0x1e4e;
                            pcVar13 = "WTF MUTEX ERROR ON UNLOCK! errno=%d in "
                                      "%s %s():%d";
                            goto LAB_0003a0c0;
                        }
                        if (((char *)param_1[0x99] == (char *)0x0) ||
                            (iVar2 = strcmp(*(char **)(local_c68 + 0x140),
                                            (char *)param_1[0x99]),
                             iVar2 != 0)) {
                            iVar2 = pthread_rwlock_unlock(__rwlock);
                            if (iVar2 != 0) {
                            LAB_0003a1d4:
                                piVar3 = __errno_location();
                                iVar2 = *piVar3;
                                uVar22 = 0x1e50;
                                pcVar13 = "WTF RWLOCK ERROR ON UNLOCK! "
                                          "errno=%d in %s %s():%d";
                                goto LAB_0003a0c0;
                            }
                            (*DAT_00067ed8)();
                            if (DAT_00068bd5 == 0)
                                goto LAB_0003a360;
                            if (((DAT_00074500 == '\0') &&
                                 (DAT_00068bd4 == '\0')) &&
                                (DAT_00067db4 < 7))
                                goto LAB_0003a2f8;
                            builtin_strncpy(
                                local_828,
                                "No matching session id for resubmitting ",
                                0x28);
                            uStack_800._0_1_ = 's';
                            uStack_800._1_1_ = 't';
                            uStack_800._2_1_ = 'r';
                            uStack_800._3_1_ = 'a';
                            builtin_strncpy(acStack_7fc, "tum ", 4);
                            local_7f8._0_1_ = 's';
                            local_7f8._1_1_ = 'h';
                            local_7f8._2_1_ = 'a';
                            local_7f8._3_1_ = 'r';
                            local_7f4 = 0x65;
                            FUN_00020f58(7, local_828, 0);
                            break;
                        }
                        iVar2 = pthread_rwlock_unlock(__rwlock);
                        if (iVar2 != 0)
                            goto LAB_0003a1d4;
                        (*DAT_00067ed8)();
                        sleep(2);
                    }
                    if (DAT_00068bd5 != 0) {
                        if (DAT_00074500 == '\0') {
                        LAB_0003a2f8:
                            if ((DAT_00068bd4 == '\0') && (DAT_00067db4 < 7))
                                goto LAB_0003a360;
                        }
                        builtin_strncpy(
                            local_828,
                            "Failed to submit stratum share, discardi", 0x28);
                        uStack_800._0_3_ = 0x676e;
                        FUN_00020f58(7, local_828, 0);
                    }
                LAB_0003a360:
                    FUN_0002cba8(&local_c68, "cgminer.c", "stratum_sthread",
                                 0x1e5f);
                    free(piVar3);
                    param_1[0x1e] = param_1[0x1e] + 1;
                    bVar24 = 0xfffffffe < DAT_00073318;
                    DAT_00073318 = DAT_00073318 + 1;
                    DAT_0007331c = DAT_0007331c + (uint)bVar24;
                }
            } else {
                if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                    (DAT_00067db4 < 3)) {
                LAB_0003a08c:
                    if (2 < DAT_00067db4)
                        goto LAB_0003a03c;
                } else {
                    snprintf(local_828, 0x800,
                             "Pool %d asking for inappropriately long nonce2 "
                             "length %d",
                             *param_1, *(uint *)(local_c68 + 0x130));
                    FUN_00020f58(3, local_828, 0);
                    if ((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0'))
                        goto LAB_0003a08c;
                LAB_0003a03c:
                    builtin_strncpy(local_828,
                                    "Not attempting to submit shares", 0x20);
                    FUN_00020f58(3, local_828, 0);
                }
                FUN_0002cba8(&local_c68, "cgminer.c", "stratum_sthread",
                             0x1de8);
                iVar10 = iVar17;
                iVar15 = iVar21;
                iVar9 = iVar5;
            }
        LAB_00039bb8:
            cVar1 = *(char *)((int)param_1 + 0x69);
            iVar2 = param_1[0xb6];
            iVar5 = iVar9;
            iVar17 = iVar10;
            iVar21 = iVar15;
        }
        pcVar23 = "Stratum q returned empty work";
        pcVar13 = local_828;
        local_c68 = 0;
    }
    uVar22 = *(undefined4 *)(pcVar23 + 4);
    uVar12 = *(undefined4 *)(pcVar23 + 8);
    uVar19 = *(undefined4 *)(pcVar23 + 0xc);
    *(undefined4 *)pcVar13 = *(undefined4 *)pcVar23;
    *(undefined4 *)(pcVar13 + 4) = uVar22;
    *(undefined4 *)(pcVar13 + 8) = uVar12;
    *(undefined4 *)(pcVar13 + 0xc) = uVar19;
    uVar22 = *(undefined4 *)(pcVar23 + 0x14);
    uVar12 = *(undefined4 *)(pcVar23 + 0x18);
    uVar19 = *(undefined4 *)(pcVar23 + 0x1c);
    *(undefined4 *)(pcVar13 + 0x10) = *(undefined4 *)(pcVar23 + 0x10);
    *(undefined4 *)(pcVar13 + 0x14) = uVar22;
    *(undefined4 *)(pcVar13 + 0x18) = uVar12;
    *(short *)(pcVar13 + 0x1c) = (short)uVar19;
    FUN_00020f58(3, local_828, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

/* WARNING: Restarted to delay deadcode elimination for space: ram */

char FUN_0003a5d0(int param_1)

{
    byte bVar1;
    size_t sVar2;
    byte *pbVar3;
    byte *pbVar4;
    size_t sVar5;
    tm *ptVar6;
    void *pvVar7;
    byte *pbVar8;
    undefined4 *puVar9;
    uint uVar10;
    int *piVar11;
    byte *pbVar12;
    undefined4 *puVar13;
    char *pcVar14;
    int iVar15;
    char cVar16;
    uint uVar17;
    uint uVar18;
    byte *pbVar19;
    undefined4 uVar20;
    undefined1 *puVar21;
    byte *pbVar22;
    int iVar23;
    byte *pbVar24;
    byte *pbVar25;
    int iVar26;
    uint uVar27;
    int iVar28;
    byte *pbVar29;
    byte *pbVar30;
    uint uVar31;
    byte *pbVar32;
    byte *pbVar33;
    undefined *puVar34;
    char *pcVar35;
    bool bVar36;
    double dVar37;
    undefined8 uVar38;
    int local_8ac;
    uint local_8a4;
    int local_898;
    undefined4 local_894;
    undefined4 local_890;
    undefined4 local_88c;
    undefined4 local_888;
    undefined4 local_884;
    undefined4 local_880;
    undefined4 local_87c;
    undefined4 local_878;
    byte local_874[12];
    byte local_868[56];
    time_t local_830;
    char acStack_82c[12];
    uint local_820;
    char acStack_81c[8];
    undefined4 local_814;
    char local_810[20];
    undefined2 uStack_7fc;
    undefined1 local_7fa;

    puVar9 = *(undefined4 **)(param_1 + 0x104);
    local_898 = 0;
    iVar23 = puVar9[0x188];
    bVar1 = *(byte *)(iVar23 + 0x2a);
    if (*(char *)(param_1 + 0x11a) != '\0') {
        return *(char *)(param_1 + 0x11a);
    }
    local_890 = *(undefined4 *)(param_1 + 0x1c);
    local_894 = *(undefined4 *)(param_1 + 0x20);
    local_88c = *(undefined4 *)(param_1 + 0x18);
    local_888 = *(undefined4 *)(param_1 + 0x14);
    local_884 = *(undefined4 *)(param_1 + 0x10);
    local_880 = *(undefined4 *)(param_1 + 0xc);
    local_87c = *(undefined4 *)(param_1 + 8);
    local_878 = *(undefined4 *)(param_1 + 4);
    FUN_00022bb4(local_874, &local_894, 0x20);
    if (bVar1 < 5) {
        FUN_000254e8(&local_898, iVar23 + 0x2b, bVar1, "cgminer.c",
                     "test_work_current", 0x1612);
        local_898 = local_898 + -1;
    }
    iVar23 = pthread_mutex_lock((pthread_mutex_t *)(puVar9 + 0x35));
    if (iVar23 == 0) {
        iVar23 = pthread_rwlock_wrlock((pthread_rwlock_t *)(puVar9 + 0x3b));
        if (iVar23 == 0) {
            if (*(char *)(puVar9 + 0xaa) != '\0') {
                *(undefined1 *)(puVar9 + 0xaa) = 0;
                *(undefined1 *)(param_1 + 0x118) = 1;
            }
            iVar23 = pthread_rwlock_unlock((pthread_rwlock_t *)(puVar9 + 0x3b));
            if (iVar23 == 0) {
                iVar23 =
                    pthread_mutex_unlock((pthread_mutex_t *)(puVar9 + 0x35));
                if (iVar23 == 0) {
                    (*DAT_00067ed8)();
                    iVar23 = pthread_rwlock_wrlock(
                        (pthread_rwlock_t *)&DAT_0006a6c0);
                    if (iVar23 != 0) {
                        piVar11 = __errno_location();
                        pcVar35 = "block_exists";
                        iVar23 = *piVar11;
                        uVar20 = 0x15c8;
                        goto LAB_0003b948;
                    }
                    sVar2 = strlen((char *)local_874);
                    uVar27 = 0x9e3779b9;
                    uVar31 = sVar2;
                    if (sVar2 < 0xc) {
                        uVar17 = 0xfeedbeef;
                        pbVar3 = local_874;
                        uVar10 = uVar27;
                    } else {
                        uVar17 = 0xfeedbeef;
                        uVar10 = uVar27;
                        pbVar25 = local_868;
                        do {
                            pbVar3 = pbVar25;
                            uVar31 = uVar31 - 0xc;
                            iVar23 = (uint)pbVar3[-6] * 0x10000 +
                                     (uint)pbVar3[-7] * 0x100 +
                                     (uint)pbVar3[-8] +
                                     (uint)pbVar3[-5] * 0x1000000 + uVar10;
                            uVar17 = (uint)pbVar3[-2] * 0x10000 +
                                     (uint)pbVar3[-3] * 0x100 +
                                     (uint)pbVar3[-4] +
                                     (uint)pbVar3[-1] * 0x1000000 + uVar17;
                            uVar10 = ((((uint)pbVar3[-10] * 0x10000 +
                                        (uint)pbVar3[-0xb] * 0x100 +
                                        (uint)pbVar3[-0xc] +
                                        (uint)pbVar3[-9] * 0x1000000) -
                                       iVar23) -
                                      uVar17) +
                                         uVar27 ^
                                     uVar17 >> 0xd;
                            uVar27 = (iVar23 - uVar17) - uVar10 ^ uVar10 << 8;
                            uVar18 = (uVar17 - uVar10) - uVar27 ^ uVar27 >> 0xd;
                            uVar17 = (uVar10 - uVar27) - uVar18 ^ uVar18 >> 0xc;
                            uVar10 = (uVar27 - uVar18) - uVar17 ^ uVar17
                                                                      << 0x10;
                            uVar18 = (uVar18 - uVar17) - uVar10 ^ uVar10 >> 5;
                            uVar27 = (uVar17 - uVar10) - uVar18 ^ uVar18 >> 3;
                            uVar10 = (uVar10 - uVar18) - uVar27 ^ uVar27 << 10;
                            uVar17 = (uVar18 - uVar27) - uVar10 ^ uVar10 >> 0xf;
                            pbVar25 = pbVar3 + 0xc;
                        } while (0xb < uVar31);
                    }
                    uVar17 = sVar2 + uVar17;
                    switch (uVar31) {
                    case 0xb:
                        uVar17 = uVar17 + (uint)pbVar3[10] * 0x1000000;
                    case 10:
                        uVar17 = uVar17 + (uint)pbVar3[9] * 0x10000;
                    case 9:
                        uVar17 = uVar17 + (uint)pbVar3[8] * 0x100;
                    case 8:
                        uVar10 = uVar10 + (uint)pbVar3[7] * 0x1000000;
                    case 7:
                        uVar10 = uVar10 + (uint)pbVar3[6] * 0x10000;
                    case 6:
                        uVar10 = uVar10 + (uint)pbVar3[5] * 0x100;
                    case 5:
                        uVar10 = uVar10 + pbVar3[4];
                    case 4:
                        uVar27 = uVar27 + (uint)pbVar3[3] * 0x1000000;
                    case 3:
                        uVar27 = uVar27 + (uint)pbVar3[2] * 0x10000;
                    case 2:
                        uVar27 = uVar27 + (uint)pbVar3[1] * 0x100;
                    case 1:
                        uVar27 = uVar27 + *pbVar3;
                    }
                    uVar18 = (uVar27 - uVar10) - uVar17 ^ uVar17 >> 0xd;
                    uVar27 = (uVar10 - uVar17) - uVar18 ^ uVar18 << 8;
                    uVar31 = (uVar17 - uVar18) - uVar27 ^ uVar27 >> 0xd;
                    uVar10 = (uVar18 - uVar27) - uVar31 ^ uVar31 >> 0xc;
                    uVar17 = (uVar27 - uVar31) - uVar10 ^ uVar10 << 0x10;
                    uVar31 = (uVar31 - uVar10) - uVar17 ^ uVar17 >> 5;
                    uVar27 = (uVar10 - uVar17) - uVar31 ^ uVar31 >> 3;
                    uVar10 = (uVar17 - uVar31) - uVar27 ^ uVar27 << 10;
                    uVar31 = (uVar31 - uVar27) - uVar10 ^ uVar10 >> 0xf;
                    if (DAT_0006a6e0 != (byte *)0x0) {
                        piVar11 = *(int **)(DAT_0006a6e0 + 0x44);
                        iVar23 = *(int *)(*piVar11 +
                                          (piVar11[1] - 1U & uVar31) * 0xc);
                        if (iVar23 != 0) {
                            iVar28 = piVar11[5];
                            do {
                                iVar23 = iVar23 - iVar28;
                                if (iVar23 == 0)
                                    break;
                                if (((uVar31 == *(uint *)(iVar23 + 0x60)) &&
                                     (sVar2 == *(size_t *)(iVar23 + 0x5c))) &&
                                    (iVar15 = memcmp(*(void **)(iVar23 + 0x58),
                                                     local_874, sVar2),
                                     iVar15 == 0)) {
                                    iVar23 = pthread_rwlock_unlock(
                                        (pthread_rwlock_t *)&DAT_0006a6c0);
                                    if (iVar23 != 0)
                                        goto LAB_0003ba84;
                                    (*DAT_00067ed8)();
                                    iVar23 =
                                        memcmp(puVar9 + 0x88, &local_894, 0x20);
                                    if (iVar23 == 0) {
                                        cVar16 = '\x01';
                                    } else {
                                        iVar23 = memcmp(&local_894,
                                                        &DAT_0006a6ec, 0x20);
                                        if (iVar23 == 0) {
                                            if (((DAT_00074500 != '\0') ||
                                                 (DAT_00068bd4 != '\0')) ||
                                                (5 < DAT_00067db4)) {
                                                snprintf((char *)&local_830,
                                                         0x800,
                                                         "Pool %d now up to "
                                                         "date at height %d",
                                                         *puVar9, local_898);
                                                FUN_00020f58(6, &local_830, 0);
                                            }
                                            FUN_000254e8(
                                                puVar9 + 0x88, &local_894, 0x20,
                                                "cgminer.c",
                                                "test_work_current", 0x1659);
                                            cVar16 = '\x01';
                                        } else {
                                            cVar16 = DAT_00068bd5;
                                            if (DAT_00068bd5 != '\0') {
                                                if (((DAT_00074500 == '\0') &&
                                                     (DAT_00068bd4 == '\0')) &&
                                                    (DAT_00067db4 < 7)) {
                                                    cVar16 = '\0';
                                                } else {
                                                    snprintf(
                                                        (char *)&local_830,
                                                        0x800,
                                                        "Stale data from pool "
                                                        "%d at height %d",
                                                        *puVar9, local_898);
                                                    FUN_00020f58(7, &local_830,
                                                                 0);
                                                    cVar16 = '\0';
                                                }
                                            }
                                        }
                                    }
                                    if (*(char *)(param_1 + 0x118) != '\0') {
                                        uVar31 = DAT_00068fd0 - 3;
                                        DAT_000691ac = DAT_000691ac + 1;
                                        *(int *)(param_1 + 0x150) =
                                            DAT_000691ac;
                                        if ((uVar31 < 2) ||
                                            (iVar28 = *(int *)(param_1 + 0x104),
                                             iVar23 = FUN_00031ff4(),
                                             iVar28 == iVar23)) {
                                            if (*(char *)(param_1 + 0x11c) ==
                                                '\0') {
                                                if (((DAT_00074500 != '\0') ||
                                                     (DAT_00068bd4 != '\0')) ||
                                                    (4 < DAT_00067db4)) {
                                                    puVar21 = &DAT_0004d5c8;
                                                    if (*(char *)(param_1 +
                                                                  0x144) !=
                                                        '\0') {
                                                        puVar21 = &DAT_000537cc;
                                                    }
                                                    snprintf(
                                                        (char *)&local_830,
                                                        0x800,
                                                        "%sLONGPOLL from pool "
                                                        "%d requested work "
                                                        "restart",
                                                        puVar21,
                                                        **(undefined4 *
                                                               *)(param_1 +
                                                                  0x104));
                                                    FUN_00020f58(5, &local_830,
                                                                 0);
                                                }
                                            } else if (((DAT_00074500 !=
                                                         '\0') ||
                                                        (DAT_00068bd4 !=
                                                         '\0')) ||
                                                       (4 < DAT_00067db4)) {
                                                snprintf(
                                                    (char *)&local_830, 0x800,
                                                    "Stratum from pool %d "
                                                    "requested work restart",
                                                    *puVar9);
                                                FUN_00020f58(5, &local_830, 0);
                                            }
                                            FUN_0002e9e8();
                                        }
                                    }
                                    goto LAB_0003ab14;
                                }
                                iVar23 = *(int *)(iVar23 + 0x54);
                            } while (iVar23 != 0);
                        }
                    }
                    pbVar3 = (byte *)FUN_00022a44(0x68, 1, "cgminer.c",
                                                  "block_exists", 0x15cc);
                    if (pbVar3 == (byte *)0x0) {
                        local_830._0_1_ = 'b';
                        local_830._1_1_ = 'l';
                        local_830._2_1_ = 'o';
                        local_830._3_1_ = 'c';
                        builtin_strncpy(acStack_82c, "k_exists OOM", 0xc);
                        local_820 = local_820 & 0xffffff00;
                        FUN_00020f58(3, &local_830, 1);
                        /* WARNING: Subroutine does not return */
                        FUN_0002e6b0(1);
                    }
                    strcpy((char *)pbVar3, (char *)local_874);
                    pbVar25 = DAT_0006a6e0;
                    bVar36 = DAT_0006a6e0 != (byte *)0x0;
                    *(int *)(pbVar3 + 100) = DAT_000766dc;
                    DAT_000766dc = DAT_000766dc + 1;
                    local_8ac = 0;
                    if ((bVar36) &&
                        (3 < *(uint *)(*(int *)(pbVar25 + 0x44) + 0xc))) {
                        pbVar30 = pbVar25 + 0x44;
                        pbVar29 = (byte *)0x1;
                    LAB_0003abd4:
                        pbVar32 = (byte *)0x0;
                        uVar31 = 0;
                        pbVar24 = pbVar30;
                        pbVar30 = (byte *)0x0;
                    LAB_0003abe4:
                        uVar31 = uVar31 + 1;
                        pbVar4 = pbVar29;
                        if (pbVar29 == (byte *)0x0) {
                            pbVar8 = (byte *)0x0;
                            pbVar19 = pbVar24;
                        } else {
                            pbVar19 = *(byte **)(pbVar24 + 8);
                            if (pbVar19 != (byte *)0x0) {
                                pbVar19 =
                                    pbVar19 +
                                    *(int *)(*(int *)(pbVar25 + 0x44) + 0x14);
                                if (pbVar19 != (byte *)0x0) {
                                    pbVar8 = (byte *)0x1;
                                    while (pbVar4 = pbVar8, pbVar8 != pbVar29) {
                                        pbVar19 = *(byte **)(pbVar19 + 8);
                                        pbVar8 = pbVar8 + 1;
                                        pbVar4 = pbVar29;
                                        if ((pbVar19 == (byte *)0x0) ||
                                            (pbVar19 =
                                                 pbVar19 +
                                                 *(int *)(*(int *)(pbVar25 +
                                                                   0x44) +
                                                          0x14),
                                             pbVar19 == (byte *)0x0))
                                            break;
                                    }
                                    goto LAB_0003ac40;
                                }
                            }
                            pbVar8 = (byte *)0x1;
                        }
                    LAB_0003ac40:
                        do {
                            pbVar12 = pbVar24;
                            pbVar33 = pbVar32;
                            if (pbVar8 != (byte *)0x0)
                                goto LAB_0003acc0;
                        LAB_0003ac48:
                            if (pbVar4 == (byte *)0x0 ||
                                pbVar19 == (byte *)0x0) {
                                pbVar24 = pbVar19;
                                if (pbVar19 != (byte *)0x0)
                                    goto LAB_0003abe4;
                                if (pbVar32 != (byte *)0x0) {
                                    pbVar32[8] = 0;
                                    pbVar32[9] = 0;
                                    pbVar32[10] = 0;
                                    pbVar32[0xb] = 0;
                                }
                                if ((1 < uVar31) &&
                                    (pbVar29 = (byte *)((int)pbVar29 << 1),
                                     pbVar32 = pbVar30, pbVar30 != (byte *)0x0))
                                    goto LAB_0003abd4;
                                *(byte **)(*(int *)(pbVar25 + 0x44) + 0x10) =
                                    pbVar32;
                                pbVar30 =
                                    pbVar30 +
                                    -*(int *)(*(int *)(pbVar25 + 0x44) + 0x14);
                                iVar23 = *(int *)(pbVar30 + 0x48);
                                local_8ac = *(int *)(pbVar30 + 100);
                                DAT_0006a6e0 = pbVar30;
                                if (iVar23 == 0) {
                                    pbVar25 = *(byte **)(pbVar30 + 0x4c);
                                    puVar13 = *(undefined4 **)(pbVar30 + 0x44);
                                    if (pbVar25 != (byte *)0x0) {
                                        iVar28 = puVar13[5];
                                        pbVar29 = pbVar25;
                                        DAT_0006a6e0 = pbVar25;
                                        if (pbVar30 ==
                                            (byte *)(puVar13[4] - iVar28))
                                            goto LAB_0003bdc4;
                                        goto LAB_0003adb0;
                                    }
                                    free((void *)*puVar13);
                                    free(*(void **)(pbVar30 + 0x44));
                                    DAT_0006a6e0 = (byte *)0x0;
                                } else {
                                    puVar13 = *(undefined4 **)(pbVar30 + 0x44);
                                    iVar28 = puVar13[5];
                                    if (pbVar30 ==
                                        (byte *)(puVar13[4] - iVar28)) {
                                    LAB_0003bdc4:
                                        DAT_0006a6e0 = pbVar30;
                                        puVar13[4] = iVar23 + iVar28;
                                        iVar23 = *(int *)(pbVar30 + 0x48);
                                        if (iVar23 == 0) {
                                            pbVar25 =
                                                *(byte **)(pbVar30 + 0x4c);
                                            pbVar29 = pbVar25;
                                            DAT_0006a6e0 = pbVar25;
                                            goto LAB_0003adb0;
                                        }
                                        iVar28 =
                                            *(int *)(*(int *)(pbVar30 + 0x44) +
                                                     0x14);
                                    }
                                    *(undefined4 *)(iVar23 + iVar28 + 8) =
                                        *(undefined4 *)(pbVar30 + 0x4c);
                                    pbVar25 = *(byte **)(pbVar30 + 0x4c);
                                    pbVar29 = pbVar30;
                                LAB_0003adb0:
                                    piVar11 = *(int **)(pbVar29 + 0x44);
                                    if (pbVar25 != (byte *)0x0) {
                                        *(undefined4 *)(pbVar25 + piVar11[5] +
                                                        4) =
                                            *(undefined4 *)(pbVar30 + 0x48);
                                        piVar11 = *(int **)(pbVar29 + 0x44);
                                    }
                                    iVar23 = (*(uint *)(pbVar30 + 0x60) &
                                              piVar11[1] - 1U) *
                                             0xc;
                                    *(int *)(*piVar11 + iVar23 + 4) =
                                        *(int *)(*piVar11 + iVar23 + 4) + -1;
                                    if (*(byte **)(**(int **)(pbVar29 + 0x44) +
                                                   iVar23) == pbVar30 + 0x44) {
                                        *(undefined4 *)(**(int **)(pbVar29 +
                                                                   0x44) +
                                                        iVar23) =
                                            *(undefined4 *)(pbVar30 + 0x54);
                                    }
                                    iVar23 = *(int *)(pbVar30 + 0x54);
                                    if (*(int *)(pbVar30 + 0x50) != 0) {
                                        *(int *)(*(int *)(pbVar30 + 0x50) +
                                                 0x10) = iVar23;
                                        iVar23 = *(int *)(pbVar30 + 0x54);
                                    }
                                    if (iVar23 != 0) {
                                        *(undefined4 *)(iVar23 + 0xc) =
                                            *(undefined4 *)(pbVar30 + 0x50);
                                    }
                                    *(int *)(*(int *)(pbVar29 + 0x44) + 0xc) =
                                        *(int *)(*(int *)(pbVar29 + 0x44) +
                                                 0xc) +
                                        -1;
                                    pbVar25 = pbVar29;
                                }
                                free(pbVar30);
                                break;
                            }
                            pbVar12 = pbVar19;
                            pbVar22 = pbVar8;
                            pbVar33 = pbVar32;
                            if (*(int *)(pbVar19 + 8) != 0) {
                                pbVar22 =
                                    (byte *)(*(int *)(pbVar19 + 8) +
                                             *(int *)(*(int *)(pbVar25 + 0x44) +
                                                      0x14));
                            }
                        LAB_0003ac6c:
                            pbVar19 = pbVar22;
                            pbVar4 = pbVar4 + -1;
                            if (pbVar33 == (byte *)0x0)
                                goto LAB_0003b864;
                            *(int *)(pbVar33 + 8) =
                                (int)pbVar12 -
                                *(int *)(*(int *)(pbVar25 + 0x44) + 0x14);
                            pbVar32 = pbVar12;
                            if (pbVar12 != (byte *)0x0) {
                                while (true) {
                                    iVar23 = (int)pbVar33 -
                                             *(int *)(*(int *)(pbVar25 + 0x44) +
                                                      0x14);
                                    pbVar32 = pbVar12;
                                    while (true) {
                                        *(int *)(pbVar32 + 4) = iVar23;
                                        pbVar12 = pbVar24;
                                        pbVar33 = pbVar32;
                                        if (pbVar8 == (byte *)0x0)
                                            goto LAB_0003ac48;
                                    LAB_0003acc0:
                                        pbVar24 = pbVar12;
                                        if (pbVar19 == (byte *)0x0 ||
                                            pbVar4 == (byte *)0x0) {
                                            if ((pbVar12 != (byte *)0x0) &&
                                                (pbVar24 =
                                                     *(byte **)(pbVar12 + 8),
                                                 pbVar24 != (byte *)0x0)) {
                                                pbVar24 =
                                                    pbVar24 +
                                                    *(int *)(*(int *)(pbVar25 +
                                                                      0x44) +
                                                             0x14);
                                            }
                                        } else {
                                            iVar23 = *(int *)(*(int *)(pbVar25 +
                                                                       0x44) +
                                                              0x14);
                                            if (0 <
                                                *(int *)(pbVar12 + -iVar23 +
                                                         100) -
                                                    *(int *)(pbVar19 + -iVar23 +
                                                             100)) {
                                                pbVar22 =
                                                    *(byte **)(pbVar19 + 8);
                                                pbVar12 = pbVar19;
                                                if (pbVar22 != (byte *)0x0) {
                                                    pbVar22 = pbVar22 + iVar23;
                                                }
                                                goto LAB_0003ac6c;
                                            }
                                            if (pbVar12 != (byte *)0x0) {
                                                if (*(int *)(pbVar12 + 8) ==
                                                    0) {
                                                    pbVar24 = (byte *)0x0;
                                                } else {
                                                    pbVar24 =
                                                        (byte
                                                             *)(*(int *)(pbVar12 +
                                                                         8) +
                                                                iVar23);
                                                }
                                            }
                                        }
                                        pbVar8 = pbVar8 + -1;
                                        if (pbVar33 != (byte *)0x0)
                                            break;
                                    LAB_0003b864:
                                        pbVar30 = pbVar12;
                                        pbVar32 = pbVar30;
                                        if (pbVar30 == (byte *)0x0)
                                            goto LAB_0003ac40;
                                        iVar23 = 0;
                                    }
                                    if (pbVar12 == (byte *)0x0)
                                        break;
                                    *(int *)(pbVar33 + 8) =
                                        (int)pbVar12 -
                                        *(int *)(*(int *)(pbVar25 + 0x44) +
                                                 0x14);
                                }
                                pbVar33[8] = 0;
                                pbVar33[9] = 0;
                                pbVar33[10] = 0;
                                pbVar33[0xb] = 0;
                                pbVar32 = pbVar12;
                            }
                        } while (true);
                    }
                    sVar5 = strlen((char *)pbVar3);
                    sVar2 = sVar5;
                    if (sVar5 < 0xc) {
                        uVar10 = 0x9e3779b9;
                        uVar27 = 0xfeedbeef;
                        uVar31 = uVar10;
                        pbVar29 = pbVar3;
                    } else {
                        uVar10 = 0x9e3779b9;
                        uVar27 = 0xfeedbeef;
                        uVar31 = uVar10;
                        pbVar30 = pbVar3;
                        do {
                            pbVar29 = pbVar30 + 0xc;
                            sVar2 = sVar2 - 0xc;
                            iVar23 = (uint)pbVar30[6] * 0x10000 +
                                     (uint)pbVar30[5] * 0x100 +
                                     (uint)pbVar30[4] +
                                     (uint)pbVar30[7] * 0x1000000 + uVar31;
                            uVar27 = (uint)pbVar30[10] * 0x10000 +
                                     (uint)pbVar30[9] * 0x100 +
                                     (uint)pbVar30[8] +
                                     (uint)pbVar30[0xb] * 0x1000000 + uVar27;
                            uVar10 =
                                ((((uint)pbVar30[2] * 0x10000 +
                                   (uint)pbVar30[1] * 0x100 + (uint)*pbVar30 +
                                   (uint)pbVar30[3] * 0x1000000) -
                                  iVar23) -
                                 uVar27) +
                                    uVar10 ^
                                uVar27 >> 0xd;
                            uVar31 = (iVar23 - uVar27) - uVar10 ^ uVar10 << 8;
                            uVar27 = (uVar27 - uVar10) - uVar31 ^ uVar31 >> 0xd;
                            uVar10 = (uVar10 - uVar31) - uVar27 ^ uVar27 >> 0xc;
                            uVar31 = (uVar31 - uVar27) - uVar10 ^ uVar10
                                                                      << 0x10;
                            uVar27 = (uVar27 - uVar10) - uVar31 ^ uVar31 >> 5;
                            uVar10 = (uVar10 - uVar31) - uVar27 ^ uVar27 >> 3;
                            uVar31 = (uVar31 - uVar27) - uVar10 ^ uVar10 << 10;
                            uVar27 = (uVar27 - uVar10) - uVar31 ^ uVar31 >> 0xf;
                            pbVar30 = pbVar29;
                        } while (0xb < sVar2);
                    }
                    uVar27 = uVar27 + sVar5;
                    switch (sVar2) {
                    case 0xb:
                        uVar27 = uVar27 + (uint)pbVar29[10] * 0x1000000;
                    case 10:
                        uVar27 = uVar27 + (uint)pbVar29[9] * 0x10000;
                    case 9:
                        uVar27 = uVar27 + (uint)pbVar29[8] * 0x100;
                    case 8:
                        uVar31 = uVar31 + (uint)pbVar29[7] * 0x1000000;
                    case 7:
                        uVar31 = uVar31 + (uint)pbVar29[6] * 0x10000;
                    case 6:
                        uVar31 = uVar31 + (uint)pbVar29[5] * 0x100;
                    case 5:
                        uVar31 = uVar31 + pbVar29[4];
                    case 4:
                        uVar10 = uVar10 + (uint)pbVar29[3] * 0x1000000;
                    case 3:
                        uVar10 = uVar10 + (uint)pbVar29[2] * 0x10000;
                    case 2:
                        uVar10 = uVar10 + (uint)pbVar29[1] * 0x100;
                    case 1:
                        uVar10 = uVar10 + *pbVar29;
                    }
                    *(byte **)(pbVar3 + 0x58) = pbVar3;
                    uVar10 = (uVar10 - uVar31) - uVar27 ^ uVar27 >> 0xd;
                    uVar31 = (uVar31 - uVar27) - uVar10 ^ uVar10 << 8;
                    uVar27 = (uVar27 - uVar10) - uVar31 ^ uVar31 >> 0xd;
                    uVar10 = (uVar10 - uVar31) - uVar27 ^ uVar27 >> 0xc;
                    uVar31 = (uVar31 - uVar27) - uVar10 ^ uVar10 << 0x10;
                    uVar27 = (uVar27 - uVar10) - uVar31 ^ uVar31 >> 5;
                    uVar10 = (uVar10 - uVar31) - uVar27 ^ uVar27 >> 3;
                    uVar31 = (uVar31 - uVar27) - uVar10 ^ uVar10 << 10;
                    uVar31 = (uVar27 - uVar10) - uVar31 ^ uVar31 >> 0xf;
                    *(uint *)(pbVar3 + 0x60) = uVar31;
                    sVar2 = strlen((char *)pbVar3);
                    *(size_t *)(pbVar3 + 0x5c) = sVar2;
                    if (pbVar25 == (byte *)0x0) {
                        pbVar3[0x4c] = 0;
                        pbVar3[0x4d] = 0;
                        pbVar3[0x4e] = 0;
                        pbVar3[0x4f] = 0;
                        pbVar3[0x48] = 0;
                        pbVar3[0x49] = 0;
                        pbVar3[0x4a] = 0;
                        pbVar3[0x4b] = 0;
                        DAT_0006a6e0 = pbVar3;
                        pvVar7 = malloc(0x2c);
                        *(void **)(pbVar3 + 0x44) = pvVar7;
                        if (pvVar7 == (void *)0x0)
                            goto LAB_0003bec4;
                        memset(pvVar7, 0, 0x2c);
                        *(byte **)(*(int *)(pbVar3 + 0x44) + 0x10) =
                            pbVar3 + 0x44;
                        *(undefined4 *)(*(int *)(pbVar3 + 0x44) + 4) = 0x20;
                        *(undefined4 *)(*(int *)(pbVar3 + 0x44) + 8) = 5;
                        *(undefined4 *)(*(int *)(pbVar3 + 0x44) + 0x14) = 0x44;
                        puVar13 = *(undefined4 **)(pbVar3 + 0x44);
                        pvVar7 = malloc(0x180);
                        *puVar13 = pvVar7;
                        if ((void *)**(undefined4 **)(pbVar3 + 0x44) ==
                            (void *)0x0)
                            goto LAB_0003bec4;
                        memset((void *)**(undefined4 **)(pbVar3 + 0x44), 0,
                               0x180);
                        *(undefined4 *)(*(int *)(pbVar3 + 0x44) + 0x28) =
                            0xa0111fe1;
                        pbVar25 = pbVar3;
                    } else {
                        uVar20 = *(undefined4 *)(pbVar25 + 0x44);
                        pbVar3[0x4c] = 0;
                        pbVar3[0x4d] = 0;
                        pbVar3[0x4e] = 0;
                        pbVar3[0x4f] = 0;
                        *(undefined4 *)(pbVar3 + 0x44) = uVar20;
                        *(int *)(pbVar3 + 0x48) =
                            *(int *)(*(int *)(pbVar25 + 0x44) + 0x10) -
                            *(int *)(*(int *)(pbVar25 + 0x44) + 0x14);
                        *(byte **)(*(int *)(*(int *)(pbVar25 + 0x44) + 0x10) +
                                   8) = pbVar3;
                        *(byte **)(*(int *)(pbVar25 + 0x44) + 0x10) =
                            pbVar3 + 0x44;
                    }
                    *(int *)(*(int *)(pbVar25 + 0x44) + 0xc) =
                        *(int *)(*(int *)(pbVar25 + 0x44) + 0xc) + 1;
                    iVar23 =
                        (uVar31 & (*(int **)(pbVar25 + 0x44))[1] - 1U) * 0xc;
                    iVar28 = **(int **)(pbVar25 + 0x44) + iVar23;
                    *(int *)(iVar28 + 4) = *(int *)(iVar28 + 4) + 1;
                    uVar20 =
                        *(undefined4 *)(**(int **)(pbVar25 + 0x44) + iVar23);
                    pbVar3[0x50] = 0;
                    pbVar3[0x51] = 0;
                    pbVar3[0x52] = 0;
                    pbVar3[0x53] = 0;
                    *(undefined4 *)(pbVar3 + 0x54) = uVar20;
                    iVar28 = **(int **)(pbVar25 + 0x44);
                    if (*(int *)(iVar28 + iVar23) != 0) {
                        *(byte **)(*(int *)(iVar28 + iVar23) + 0xc) =
                            pbVar3 + 0x44;
                        iVar28 = **(int **)(pbVar25 + 0x44);
                    }
                    *(byte **)(iVar28 + iVar23) = pbVar3 + 0x44;
                    if (((uint)((*(int *)(**(int **)(pbVar25 + 0x44) + iVar23 +
                                          8) +
                                 1) *
                                10) <=
                         *(uint *)(**(int **)(pbVar25 + 0x44) + iVar23 + 4)) &&
                        (*(int *)(*(int *)(pbVar3 + 0x44) + 0x24) != 1)) {
                        pvVar7 = calloc(
                            *(int *)(*(int *)(pbVar3 + 0x44) + 4) * 0x18, 1);
                        if (pvVar7 == (void *)0x0) {
                        LAB_0003bec4:
                            /* WARNING: Subroutine does not return */
                            exit(-1);
                        }
                        iVar23 = *(int *)(pbVar3 + 0x44);
                        iVar28 = 0;
                        *(uint *)(iVar23 + 0x18) =
                            (uint)((*(int *)(iVar23 + 4) * 2 - 1U &
                                    *(uint *)(iVar23 + 0xc)) != 0) +
                            (*(uint *)(iVar23 + 0xc) >>
                             (*(int *)(iVar23 + 8) + 1U & 0xff));
                        *(undefined4 *)(*(int *)(pbVar3 + 0x44) + 0x1c) = 0;
                        piVar11 = *(int **)(pbVar3 + 0x44);
                        uVar31 = piVar11[1];
                        if (uVar31 != 0) {
                            local_8a4 = 0;
                            do {
                                iVar23 = *(int *)(*piVar11 + iVar28);
                                if (*(int *)(*piVar11 + iVar28) != 0) {
                                    while (true) {
                                        iVar26 = *(int *)(iVar23 + 0x10);
                                        uVar27 = uVar31 * 2 - 1 &
                                                 *(uint *)(iVar23 + 0x1c);
                                        uVar31 = *(int *)((int)pvVar7 +
                                                          uVar27 * 0xc + 4) +
                                                 1;
                                        *(uint *)((int)pvVar7 + uVar27 * 0xc +
                                                  4) = uVar31;
                                        iVar15 = *(int *)(pbVar3 + 0x44);
                                        if (*(uint *)(iVar15 + 0x18) < uVar31) {
                                            *(int *)(iVar15 + 0x1c) =
                                                *(int *)(iVar15 + 0x1c) + 1;
                                            uVar20 = FUN_000498d8(
                                                *(undefined4 *)((int)pvVar7 +
                                                                uVar27 * 0xc +
                                                                4),
                                                *(undefined4
                                                      *)(*(int *)(pbVar3 +
                                                                  0x44) +
                                                         0x18));
                                            *(undefined4 *)((int)pvVar7 +
                                                            uVar27 * 0xc + 8) =
                                                uVar20;
                                        }
                                        *(undefined4 *)(iVar23 + 0xc) = 0;
                                        *(undefined4 *)(iVar23 + 0x10) =
                                            *(undefined4 *)((int)pvVar7 +
                                                            uVar27 * 0xc);
                                        iVar15 = *(int *)((int)pvVar7 +
                                                          uVar27 * 0xc);
                                        if (iVar15 != 0) {
                                            *(int *)(iVar15 + 0xc) = iVar23;
                                        }
                                        *(int *)((int)pvVar7 + uVar27 * 0xc) =
                                            iVar23;
                                        piVar11 = *(int **)(pbVar3 + 0x44);
                                        if (iVar26 == 0)
                                            break;
                                        uVar31 = piVar11[1];
                                        iVar23 = iVar26;
                                    }
                                    uVar31 = piVar11[1];
                                }
                                iVar28 = iVar28 + 0xc;
                                local_8a4 = local_8a4 + 1;
                            } while (local_8a4 < uVar31);
                        }
                        free((void *)*piVar11);
                        *(int *)(*(int *)(pbVar3 + 0x44) + 4) =
                            *(int *)(*(int *)(pbVar3 + 0x44) + 4) << 1;
                        *(int *)(*(int *)(pbVar3 + 0x44) + 8) =
                            *(int *)(*(int *)(pbVar3 + 0x44) + 8) + 1;
                        **(undefined4 **)(pbVar3 + 0x44) = pvVar7;
                        iVar23 = *(int *)(pbVar3 + 0x44);
                        if (*(uint *)(iVar23 + 0xc) >> 1 <
                            *(uint *)(iVar23 + 0x1c)) {
                            iVar28 = *(int *)(iVar23 + 0x20) + 1;
                        } else {
                            iVar28 = 0;
                        }
                        *(int *)(iVar23 + 0x20) = iVar28;
                        if (1 < *(uint *)(*(int *)(pbVar3 + 0x44) + 0x20)) {
                            *(undefined4 *)(*(int *)(pbVar3 + 0x44) + 0x24) = 1;
                        }
                    }
                    uVar27 = *(uint *)(param_1 + 0x48);
                    uVar31 = (0x1d - (uint) * (byte *)(param_1 + 0x48)) * 8;
                    if ((int)uVar31 < 8) {
                        uVar31 = 8;
                    }
                    dVar37 = (double)FUN_0004a10c(
                        0xffff << (uVar31 & 0xff),
                        0xffff << (uVar31 - 0x20 & 0xff) |
                            0xffffU >> (0x20 - uVar31 & 0xff));
                    dVar37 =
                        dVar37 /
                        (double)(longlong)(int)((uVar27 >> 8 & 0xff) << 0x10 |
                                                (uVar27 >> 0x10 & 0xff) << 8 |
                                                uVar27 >> 0x18);
                    if (dVar37 != DAT_00068748) {
                        uVar38 = FUN_0004a1d8(SUB84(dVar37, 0),
                                              (int)((ulonglong)dVar37 >> 0x20));
                        FUN_0002aef8((int)uVar38,
                                     (int)((ulonglong)uVar38 >> 0x20),
                                     &DAT_0006a6e4, 8, 0);
                        DAT_00068748 = dVar37;
                        if (((DAT_00074500 != '\0') ||
                             (DAT_00068bd4 != '\0')) ||
                            (4 < DAT_00067db4)) {
                            snprintf((char *)&local_830, 0x800,
                                     "Network diff set to %s", &DAT_0006a6e4);
                            FUN_00020f58(5, &local_830, 0);
                        }
                    }
                    if (((local_8ac != 0) && (DAT_00068bd5 != '\0')) &&
                        ((DAT_00074500 != '\0' ||
                          ((DAT_00068bd4 != '\0' || (6 < DAT_00067db4)))))) {
                        snprintf((char *)&local_830, 0x800,
                                 "Deleted block %d from database", local_8ac);
                        FUN_00020f58(7, &local_830, 0);
                    }
                    iVar23 = pthread_rwlock_unlock(
                        (pthread_rwlock_t *)&DAT_0006a6c0);
                    if (iVar23 == 0) {
                        (*DAT_00067ed8)();
                        iVar23 = pthread_mutex_lock(
                            (pthread_mutex_t *)&DAT_00074504);
                        if (iVar23 == 0) {
                            iVar23 = pthread_rwlock_wrlock(
                                (pthread_rwlock_t *)&DAT_0007451c);
                            if (iVar23 == 0) {
                                FUN_000239a4(&DAT_000755f0);
                                strcpy(&DAT_00073324, (char *)local_874);
                                FUN_000254e8(&DAT_0006a6ec, &local_894, 0x20,
                                             "cgminer.c", "set_curblock",
                                             0x1594);
                                local_830 = DAT_000755f0;
                                iVar23 = DAT_000755f4 / 1000;
                                ptVar6 = localtime(&local_830);
                                puVar34 = (undefined *)ptVar6->tm_min;
                                snprintf(&DAT_0006a70c, 0x20,
                                         "[%02d:%02d:%02d.%03d]",
                                         ptVar6->tm_hour, puVar34,
                                         ptVar6->tm_sec, iVar23);
                                iVar23 = pthread_rwlock_unlock(
                                    (pthread_rwlock_t *)&DAT_0007451c);
                                if (iVar23 == 0) {
                                    iVar23 = pthread_mutex_unlock(
                                        (pthread_mutex_t *)&DAT_00074504);
                                    if (iVar23 == 0) {
                                        (*DAT_00067ed8)();
                                        iVar23 = 0;
                                        pcVar14 = &DAT_00073324;
                                        do {
                                            if (*pcVar14 != '0')
                                                break;
                                            iVar23 = iVar23 + 1;
                                            pcVar14 = pcVar14 + 1;
                                        } while (iVar23 != 0x39);
                                        strncpy(&DAT_0006a72c,
                                                &DAT_00073324 + iVar23, 8);
                                        DAT_0006a734 = 0;
                                        if (((DAT_00074500 != '\0') ||
                                             (DAT_00068bd4 != '\0')) ||
                                            (5 < DAT_00067db4)) {
                                            puVar34 = &DAT_0006a6e4;
                                            snprintf((char *)&local_830, 0x800,
                                                     "New block: %s... diff %s",
                                                     &DAT_00073324,
                                                     &DAT_0006a6e4);
                                            FUN_00020f58(6, &local_830, 0);
                                        }
                                        if (((local_8ac != 0) &&
                                             (DAT_00068bd5 != '\0')) &&
                                            ((DAT_00074500 != '\0' ||
                                              ((DAT_00068bd4 != '\0' ||
                                                (6 < DAT_00067db4)))))) {
                                            snprintf((char *)&local_830, 0x800,
                                                     "Deleted block %d from "
                                                     "database",
                                                     local_8ac, puVar34);
                                            FUN_00020f58(7, &local_830, 0);
                                        }
                                        FUN_000254e8(puVar9 + 0x88, &local_894,
                                                     0x20, "cgminer.c",
                                                     "test_work_current",
                                                     0x1627);
                                        cVar16 = '\0';
                                        if (DAT_000766dc == 1)
                                            goto LAB_0003ab14;
                                        DAT_000691ac = DAT_000691ac + 1;
                                        *(int *)(param_1 + 0x150) =
                                            DAT_000691ac;
                                        if (*(char *)(param_1 + 0x118) ==
                                            '\0') {
                                            if (DAT_00074502 == '\0') {
                                                if ((*(char *)(puVar9 + 0xe1) ==
                                                     '\0') &&
                                                    (((DAT_00074500 != '\0' ||
                                                       (DAT_00068bd4 !=
                                                        '\0')) ||
                                                      (4 < DAT_00067db4)))) {
                                                    local_830._0_1_ = 'N';
                                                    local_830._1_1_ = 'e';
                                                    local_830._2_1_ = 'w';
                                                    local_830._3_1_ = ' ';
                                                    builtin_strncpy(
                                                        acStack_82c,
                                                        "block detect", 0xc);
                                                    local_820._0_1_ = 'e';
                                                    local_820._1_1_ = 'd';
                                                    local_820._2_1_ = ' ';
                                                    local_820._3_1_ = 'o';
                                                    builtin_strncpy(acStack_81c,
                                                                    "n networ",
                                                                    8);
                                                    local_814._0_2_ = 0x6b;
                                                    FUN_00020f58(5, &local_830,
                                                                 0);
                                                }
                                            } else if ((*(char *)(puVar9 +
                                                                  0xe1) ==
                                                        '\0') &&
                                                       (((DAT_00074500 !=
                                                              '\0' ||
                                                          (DAT_00068bd4 !=
                                                           '\0')) ||
                                                         (4 < DAT_00067db4)))) {
                                                local_830._0_1_ = 'N';
                                                local_830._1_1_ = 'e';
                                                local_830._2_1_ = 'w';
                                                local_830._3_1_ = ' ';
                                                builtin_strncpy(acStack_82c,
                                                                "block detect",
                                                                0xc);
                                                local_820._0_1_ = 'e';
                                                local_820._1_1_ = 'd';
                                                local_820._2_1_ = ' ';
                                                local_820._3_1_ = 'o';
                                                builtin_strncpy(acStack_81c,
                                                                "n networ", 8);
                                                local_814._0_1_ = 'k';
                                                local_814._1_1_ = ' ';
                                                local_814._2_1_ = 'b';
                                                local_814._3_1_ = 'e';
                                                builtin_strncpy(
                                                    local_810,
                                                    "fore pool notificati",
                                                    0x14);
                                                uStack_7fc = 0x6e6f;
                                                local_7fa = 0;
                                                FUN_00020f58(5, &local_830, 0);
                                            }
                                        } else if (*(char *)(param_1 + 0x11c) ==
                                                   '\0') {
                                            if (((DAT_00074500 != '\0') ||
                                                 (DAT_00068bd4 != '\0')) ||
                                                (4 < DAT_00067db4)) {
                                                iVar23 =
                                                    **(int **)(param_1 + 0x104);
                                                pcVar14 =
                                                    "%sLONGPOLL from pool %d "
                                                    "detected new block";
                                                puVar21 = &DAT_0004d5c8;
                                                if (*(char *)(param_1 +
                                                              0x144) != '\0') {
                                                    puVar21 = &DAT_000537cc;
                                                }
                                                goto LAB_0003b55c;
                                            }
                                        } else if (((DAT_00074500 != '\0') ||
                                                    (DAT_00068bd4 != '\0')) ||
                                                   (4 < DAT_00067db4)) {
                                            pcVar14 =
                                                "Stratum from pool %d detected "
                                                "new block at height %d";
                                            puVar21 = (undefined1 *)*puVar9;
                                            iVar23 = local_898;
                                        LAB_0003b55c:
                                            snprintf((char *)&local_830, 0x800,
                                                     pcVar14, puVar21, iVar23);
                                            FUN_00020f58(5, &local_830, 0);
                                        }
                                        FUN_0002e9e8();
                                        cVar16 = '\x01';
                                    LAB_0003ab14:
                                        *(undefined1 *)(param_1 + 0x118) = 0;
                                        return cVar16;
                                    }
                                    piVar11 = __errno_location();
                                    iVar23 = *piVar11;
                                    pcVar14 = "WTF MUTEX ERROR ON UNLOCK! "
                                              "errno=%d in %s %s():%d";
                                } else {
                                    piVar11 = __errno_location();
                                    iVar23 = *piVar11;
                                    pcVar14 = "WTF RWLOCK ERROR ON UNLOCK! "
                                              "errno=%d in %s %s():%d";
                                }
                                snprintf((char *)&local_830, 0x800, pcVar14,
                                         iVar23, "cgminer.c", "set_curblock",
                                         0x1596);
                                goto LAB_0003b844;
                            }
                            piVar11 = __errno_location();
                            iVar23 = *piVar11;
                            pcVar35 = "set_curblock";
                            uVar20 = 0x1591;
                            pcVar14 = "WTF WRLOCK ERROR ON LOCK! errno=%d in "
                                      "%s %s():%d";
                        } else {
                            piVar11 = __errno_location();
                            iVar23 = *piVar11;
                            pcVar35 = "set_curblock";
                            uVar20 = 0x1591;
                            pcVar14 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s "
                                      "%s():%d";
                        }
                    } else {
                    LAB_0003ba84:
                        piVar11 = __errno_location();
                        pcVar35 = "block_exists";
                        iVar23 = *piVar11;
                        uVar20 = 0x15ee;
                        pcVar14 = "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s "
                                  "%s():%d";
                    }
                    snprintf((char *)&local_830, 0x800, pcVar14, iVar23,
                             "cgminer.c", pcVar35, uVar20);
                    goto LAB_0003b844;
                }
                piVar11 = __errno_location();
                iVar23 = *piVar11;
                pcVar14 = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
                pcVar35 = "test_work_current";
                uVar20 = 0x161f;
            } else {
                piVar11 = __errno_location();
                iVar23 = *piVar11;
                pcVar14 = "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d";
                pcVar35 = "test_work_current";
                uVar20 = 0x161f;
            }
        } else {
            piVar11 = __errno_location();
            pcVar35 = "test_work_current";
            iVar23 = *piVar11;
            uVar20 = 0x1617;
        LAB_0003b948:
            pcVar14 = "WTF WRLOCK ERROR ON LOCK! errno=%d in %s %s():%d";
        }
    } else {
        piVar11 = __errno_location();
        iVar23 = *piVar11;
        pcVar14 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        pcVar35 = "test_work_current";
        uVar20 = 0x1617;
    }
    snprintf((char *)&local_830, 0x800, pcVar14, iVar23, "cgminer.c", pcVar35,
             uVar20);
LAB_0003b844:
    FUN_00020f58(3, &local_830, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

/* WARNING: Globals starting with '_' overlap smaller symbols at the same
 * address */
/* WARNING: Restarted to delay deadcode elimination for space: ram */

undefined4 FUN_0003becc(undefined4 *param_1)

{
    char cVar1;
    pthread_t __th;
    int iVar2;
    pthread_rwlock_t *__haystack;
    int *piVar3;
    int *piVar4;
    int iVar5;
    char *pcVar6;
    pthread_rwlock_t *ppVar7;
    time_t tVar8;
    size_t sVar9;
    undefined4 *puVar10;
    undefined4 uVar11;
    uint uVar12;
    char *__format;
    code *pcVar13;
    uint *puVar14;
    uint *puVar15;
    byte bVar16;
    uint uVar17;
    uint uVar18;
    uint extraout_r3;
    pthread_rwlock_t *__rwlock;
    undefined4 *unaff_r6;
    pthread_mutex_t *__mutex;
    int iVar19;
    int iVar20;
    uint *unaff_r11;
    bool bVar21;
    double dVar22;
    undefined4 *local_a8c;
    int *local_a80;
    int local_a78;
    code **local_a70;
    byte *local_a6c;
    pthread_rwlock_t *local_a68;
    timeval local_a64;
    char acStack_a5c[16];
    char local_a4c[20];
    ushort local_a38;
    undefined1 auStack_a36[30];
    char local_a18[4];
    undefined2 local_a14;
    undefined1 local_a12;
    undefined1 auStack_a11[29];
    char acStack_9f4[60];
    undefined4 uStack_9b8;
    fd_set local_9b4;
    undefined4 local_934[23];
    undefined1 auStack_8d8[160];
    uint local_838[8];
    char local_818[2020];

    __th = pthread_self();
    pthread_detach(__th);
    local_a8c = (undefined4 *)&DAT_00068bd8;
    snprintf(acStack_a5c, 0x10, "%d/RStratum", *param_1);
    iVar19 = -0x60b6453a;
    iVar20 = -0x112410d;
    FUN_000250a8(acStack_a5c);
    do {
        cVar1 = *(char *)((int)param_1 + 0x69);
        while (true) {
            if (cVar1 != '\0') {
                FUN_00024340();
                return 0;
            }
            iVar2 = FUN_00023f28(param_1);
            if ((iVar2 == 0) && (iVar2 = FUN_00032424(param_1), iVar2 == 0)) {
                FUN_00024340(param_1);
                FUN_00033ddc(param_1);
                FUN_00033ab4(param_1);
                iVar2 = FUN_00032424(param_1);
                while (
                    (iVar2 == 0 &&
                     ((param_1[0x19] == 0 ||
                       ((puVar10 = (undefined4 *)FUN_00031ff4(),
                         param_1 != puVar10 && (1 < DAT_00068fd0 - 3U))))))) {
                    iVar2 =
                        pthread_mutex_lock((pthread_mutex_t *)&DAT_0006910c);
                    if (iVar2 != 0) {
                        piVar3 = __errno_location();
                        pcVar6 = "wait_lpcurrent";
                        iVar19 = *piVar3;
                        uVar11 = 0x26b9;
                        goto LAB_0003c654;
                    }
                    pthread_cond_wait((pthread_cond_t *)&DAT_00069128,
                                      (pthread_mutex_t *)&DAT_0006910c);
                    iVar2 =
                        pthread_mutex_unlock((pthread_mutex_t *)&DAT_0006910c);
                    if (iVar2 != 0) {
                        piVar3 = __errno_location();
                        pcVar6 = "wait_lpcurrent";
                        iVar19 = *piVar3;
                        uVar11 = 0x26bb;
                        goto LAB_0003c6d4;
                    }
                    (*DAT_00067ed8)();
                    iVar2 = FUN_00032424(param_1);
                }
                while (iVar2 = FUN_00028690(param_1), unaff_r6 = local_a8c,
                       iVar2 == 0) {
                    FUN_0003466c(param_1);
                    if (*(char *)((int)param_1 + 0x69) != '\0') {
                        return 0;
                    }
                    FUN_00023b9c(5000);
                }
            }
            puVar10 = &uStack_9b8;
            do {
                puVar10 = puVar10 + 1;
                *puVar10 = 0;
            } while (local_9b4.fds_bits + 0x1f != puVar10);
            uVar17 = param_1[0x93];
            local_a64.tv_usec = 0;
            local_a64.tv_sec = 0x5a;
            uVar12 = uVar17 + 0x1f;
            if (-1 < (int)uVar17) {
                uVar12 = uVar17;
            }
            uVar18 = uVar17 & 0x1f;
            if ((int)uVar17 < 1) {
                uVar18 = -(-uVar17 & 0x1f);
            }
            local_9b4.fds_bits[(int)uVar12 >> 5] =
                local_9b4.fds_bits[(int)uVar12 >> 5] | 1 << (uVar18 & 0xff);
            iVar2 = FUN_00023f28(param_1);
            if ((iVar2 == 0) &&
                (iVar2 = select(param_1[0x93] + 1, &local_9b4, (fd_set *)0x0,
                                (fd_set *)0x0, &local_a64),
                 iVar2 < 1))
                break;
            __haystack = (pthread_rwlock_t *)FUN_00024858(param_1);
            if (__haystack == (pthread_rwlock_t *)0x0)
                goto LAB_0003c120;
            FUN_00032400(param_1);
            iVar2 = FUN_000296bc(param_1, __haystack);
            if (iVar2 == 0) {
                iVar2 = FUN_00047258(__haystack, 0, local_934);
                if (iVar2 == 0) {
                    if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                        (5 < DAT_00067db4)) {
                        unaff_r11 = local_838;
                        snprintf((char *)unaff_r11, 0x800,
                                 "JSON decode failed(%d): %s", local_934[0],
                                 auStack_8d8);
                        FUN_00020f58(6, unaff_r11, 0);
                    }
                } else {
                    local_a80 = (int *)FUN_000480fc(iVar2, "result");
                    piVar3 = (int *)FUN_000480fc(iVar2, "error");
                    piVar4 = (int *)FUN_000480fc(iVar2, &DAT_0004e5a4);
                    if ((piVar4 == (int *)0x0) || (*piVar4 == 7)) {
                        if (piVar3 == (int *)0x0) {
                            pcVar6 = (char *)malloc(0x11);
                            if (pcVar6 != (char *)0x0) {
                                builtin_strncpy(pcVar6, "(unknown reason)",
                                                0x11);
                            }
                        } else {
                            pcVar6 = (char *)FUN_00045074(piVar3, 3);
                        }
                        if (((DAT_00074500 != '\0') ||
                             (DAT_00068bd4 != '\0')) ||
                            (5 < DAT_00067db4)) {
                            unaff_r11 = local_838;
                            snprintf((char *)unaff_r11, 0x800,
                                     "JSON-RPC non method decode failed: %s",
                                     pcVar6);
                            FUN_00020f58(6, unaff_r11, 0);
                        }
                        free(pcVar6);
                        iVar5 = *(int *)(iVar2 + 4);
                    } else {
                        iVar5 = FUN_000480fc(local_a80, "version-rolling.mask");
                        puVar14 = unaff_r11;
                        if (((iVar5 == 0) &&
                             (pcVar6 = strstr(__haystack->__size,
                                              "mining.configure"),
                              pcVar6 == (char *)0x0)) &&
                            (pcVar6 = strstr(__haystack->__size,
                                             "mining.set_version_mask"),
                             pcVar6 == (char *)0x0)) {
                            ppVar7 = (pthread_rwlock_t *)FUN_0004888c(piVar4);
                            local_a68 = ppVar7;
                            iVar5 = pthread_mutex_lock(
                                (pthread_mutex_t *)&DAT_000690f0);
                            puVar14 = DAT_00069108;
                            if (iVar5 == 0) {
                                uVar18 = (uint)(((uint)ppVar7 & 0xff0000ff) +
                                                0x112410d +
                                                ((uint)ppVar7 & 0xff0000) +
                                                (int)((uint)ppVar7 & 0xff00)) ^
                                         0x7f76d;
                                uVar17 = iVar19 - uVar18 ^ uVar18 << 8;
                                uVar12 =
                                    (iVar20 - uVar18) - uVar17 ^ uVar17 >> 0xd;
                                uVar18 =
                                    (uVar18 - uVar17) - uVar12 ^ uVar12 >> 0xc;
                                uVar17 =
                                    (uVar17 - uVar12) - uVar18 ^ uVar18 << 0x10;
                                uVar12 =
                                    (uVar12 - uVar18) - uVar17 ^ uVar17 >> 5;
                                uVar18 =
                                    (uVar18 - uVar17) - uVar12 ^ uVar12 >> 3;
                                uVar17 = (uVar17 - uVar12) - uVar18 ^ uVar18
                                                                          << 10;
                                uVar12 =
                                    (uVar12 - uVar18) - uVar17 ^ uVar17 >> 0xf;
                                ppVar7 =
                                    (pthread_rwlock_t *)((uint)ppVar7 & 0xff00);
                                if (DAT_00069108 != (uint *)0x0) {
                                    __rwlock =
                                        (pthread_rwlock_t *)*DAT_00069108;
                                    local_a70 =
                                        (code **)(__rwlock->__data).__lock;
                                    pcVar13 = local_a70
                                        [((__rwlock->__data).__nr_readers - 1 &
                                          uVar12) *
                                         3];
                                    ppVar7 = __rwlock;
                                    if (pcVar13 != (code *)0x0) {
                                        local_a6c =
                                            *(byte **)(__rwlock->__size + 0x14);
                                        unaff_r6 =
                                            (undefined4 *)-(int)local_a6c;
                                        do {
                                            __mutex = (pthread_mutex_t
                                                           *)(pcVar13 +
                                                              (int)unaff_r6);
                                            if (__mutex ==
                                                (pthread_mutex_t *)0x0)
                                                break;
                                            if (((uVar12 ==
                                                  *(uint *)((int)__mutex +
                                                            0x1c)) &&
                                                 (__mutex[1].__data.__lock ==
                                                  4)) &&
                                                (iVar5 =
                                                     memcmp((__mutex->__data)
                                                                .field5_0x14,
                                                            &local_a68, 4),
                                                 iVar5 == 0)) {
                                                uVar12 =
                                                    (__mutex->__data).__count;
                                                if (uVar12 == 0)
                                                    goto LAB_0003d394;
                                                if (__mutex !=
                                                    (pthread_mutex_t
                                                         *)((__rwlock->__data)
                                                                .__nr_readers_queued +
                                                            (int)unaff_r6))
                                                    goto LAB_0003c8f8;
                                                goto LAB_0003d3ec;
                                            }
                                            pcVar13 = (code *)(__mutex->__data)
                                                          .__nusers;
                                            ppVar7 = __haystack;
                                            local_a78 = iVar20;
                                        } while (pcVar13 != (code *)0x0);
                                    }
                                }
                            } else {
                                FUN_0002efe0("parse_stratum_response", 0x1c7c);
                                __haystack = ppVar7;
                                iVar19 = iVar20;
                                iVar20 = local_a78;
                                puVar14 = unaff_r11;
                            }
                            iVar5 = pthread_mutex_unlock(
                                (pthread_mutex_t *)&DAT_000690f0);
                            if (iVar5 != 0)
                                goto LAB_0003d3bc;
                            local_a70 = &DAT_00067ed8;
                            (*DAT_00067ed8)();
                            if (local_a80 == (int *)0x0)
                                goto LAB_0003c2dc;
                            __mutex = (pthread_mutex_t *)(param_1 + 0x35);
                            iVar5 = pthread_mutex_lock(__mutex);
                            if (iVar5 == 0) {
                                __rwlock = (pthread_rwlock_t *)(param_1 + 0x3b);
                                iVar5 = pthread_rwlock_rdlock(__rwlock);
                                if (iVar5 == 0) {
                                    iVar5 = pthread_mutex_unlock(__mutex);
                                    if (iVar5 != 0) {
                                        /* WARNING: Subroutine does not return
                                         */
                                        FUN_0002f03c("parse_stratum_response",
                                                     0x1c90);
                                    }
                                    dVar22 = *(double *)(param_1 + 0x1c8);
                                    FUN_0002fb80(__rwlock,
                                                 "parse_stratum_response",
                                                 0x1c92);
                                    if (*local_a80 != 5) {
                                        if (((DAT_00074500 != '\0') ||
                                             (DAT_00068bd4 != '\0')) ||
                                            (4 < DAT_00067db4)) {
                                            puVar14 = local_838;
                                            snprintf(
                                                (char *)puVar14, 0x800,
                                                "Rejected untracked stratum "
                                                "share from pool %d",
                                                *param_1);
                                            FUN_00020f58(5, puVar14, 0);
                                        }
                                        iVar5 = pthread_mutex_lock(
                                            (pthread_mutex_t *)&DAT_000766c4);
                                        if (iVar5 == 0) {
                                            bVar21 = 0xfffffffe < DAT_000767e8;
                                            DAT_000767e8 = DAT_000767e8 + 1;
                                            uVar12 = param_1[4];
                                            DAT_000767ec =
                                                DAT_000767ec + (uint)bVar21;
                                            _DAT_00073390 =
                                                _DAT_00073390 + dVar22;
                                            param_1[4] = uVar12 + 1;
                                            *(double *)(param_1 + 0x14) =
                                                *(double *)(param_1 + 0x14) +
                                                dVar22;
                                            param_1[5] =
                                                param_1[5] +
                                                (uint)(0xfffffffe < uVar12);
                                            iVar5 = pthread_mutex_unlock(
                                                (pthread_mutex_t
                                                     *)&DAT_000766c4);
                                            if (iVar5 != 0) {
                                                /* WARNING: Subroutine does not
                                                 * return */
                                                FUN_0002f03c(
                                                    "parse_stratum_response",
                                                    0x1caa);
                                            }
                                            goto LAB_0003d23c;
                                        }
                                        goto LAB_0003d37c;
                                    }
                                    if (((DAT_00074500 != '\0') ||
                                         (DAT_00068bd4 != '\0')) ||
                                        (4 < DAT_00067db4)) {
                                        puVar14 = local_838;
                                        snprintf((char *)puVar14, 0x800,
                                                 "Accepted untracked stratum "
                                                 "share from pool %d",
                                                 *param_1);
                                        FUN_00020f58(5, puVar14, 0);
                                    }
                                    iVar5 = pthread_mutex_lock(
                                        (pthread_mutex_t *)&DAT_000766c4);
                                    if (iVar5 == 0) {
                                        bVar21 = 0xfffffffe < DAT_000755d8;
                                        DAT_000755d8 = DAT_000755d8 + 1;
                                        DAT_000755dc =
                                            DAT_000755dc + (uint)bVar21;
                                        uVar12 = param_1[2];
                                        _DAT_00073370 = _DAT_00073370 + dVar22;
                                        *(double *)(param_1 + 0x12) =
                                            *(double *)(param_1 + 0x12) +
                                            dVar22;
                                        param_1[2] = uVar12 + 1;
                                        param_1[3] =
                                            param_1[3] +
                                            (uint)(0xfffffffe < uVar12);
                                        iVar5 = pthread_mutex_unlock(
                                            (pthread_mutex_t *)&DAT_000766c4);
                                        if (iVar5 != 0) {
                                            /* WARNING: Subroutine does not
                                             * return */
                                            FUN_0002f03c(
                                                "parse_stratum_response",
                                                0x1c9f);
                                        }
                                    LAB_0003d23c:
                                        (*DAT_00067ed8)();
                                        iVar5 = *(int *)(iVar2 + 4);
                                        unaff_r11 = puVar14;
                                        goto joined_r0x0003c55c;
                                    }
                                } else {
                                    FUN_00030138("parse_stratum_response",
                                                 0x1c90);
                                LAB_0003d37c:
                                    FUN_0002efe0("parse_stratum_response",
                                                 0x1ca5);
                                }
                                FUN_0002efe0("parse_stratum_response", 0x1c9a);
                                uVar12 = extraout_r3;
                            LAB_0003d394:
                                puVar15 = (uint *)(__mutex->__data).__owner;
                                if (puVar15 == (uint *)0x0) {
                                    free(local_a70);
                                    free((void *)*puVar14);
                                    DAT_00069108 = puVar15;
                                } else {
                                    if (__mutex ==
                                        (pthread_mutex_t
                                             *)((__rwlock->__data)
                                                    .__nr_readers_queued +
                                                (int)unaff_r6)) {
                                    LAB_0003d3ec:
                                        (__rwlock->__data).__nr_readers_queued =
                                            (uint)(local_a6c + uVar12);
                                        uVar12 = (__mutex->__data).__count;
                                        if (uVar12 == 0) {
                                            puVar15 = (uint *)(__mutex->__data)
                                                          .__owner;
                                        } else {
                                            __rwlock =
                                                (pthread_rwlock_t *)*puVar14;
                                        LAB_0003c8f8:
                                            *(int *)(uVar12 +
                                                     (__rwlock->__data)
                                                         .__nr_writers_queued +
                                                     8) =
                                                (__mutex->__data).__owner;
                                            puVar15 = DAT_00069108;
                                        }
                                    }
                                    DAT_00069108 = puVar15;
                                    puVar14 = DAT_00069108;
                                    piVar4 = (int *)*DAT_00069108;
                                    if ((__mutex->__data).__owner != 0) {
                                        *(uint *)((__mutex->__data).__owner +
                                                  piVar4[5] + 4) =
                                            (__mutex->__data).__count;
                                        piVar4 = (int *)*puVar14;
                                    }
                                    iVar5 = (piVar4[1] - 1U &
                                             *(uint *)((int)__mutex + 0x1c)) *
                                            0xc;
                                    *(int *)(*piVar4 + iVar5 + 4) =
                                        *(int *)(*piVar4 + iVar5 + 4) + -1;
                                    if (*(pthread_mutex_t **)(*(int *)*puVar14 +
                                                              iVar5) ==
                                        __mutex) {
                                        *(uint *)(*(int *)*puVar14 + iVar5) =
                                            (__mutex->__data).__nusers;
                                    }
                                    uVar12 = (__mutex->__data).__nusers;
                                    if ((__mutex->__data).__kind != 0) {
                                        *(uint *)((__mutex->__data).__kind +
                                                  0x10) = uVar12;
                                        uVar12 = (__mutex->__data).__nusers;
                                    }
                                    if (uVar12 != 0) {
                                        *(int *)(uVar12 + 0xc) =
                                            (__mutex->__data).__kind;
                                    }
                                    *(int *)(*puVar14 + 0xc) =
                                        *(int *)(*puVar14 + 0xc) + -1;
                                }
                                param_1[0xb7] = param_1[0xb7] + -1;
                                iVar5 = pthread_mutex_unlock(
                                    (pthread_mutex_t *)&DAT_000690f0);
                                if (iVar5 != 0) {
                                LAB_0003d3bc:
                                    /* WARNING: Subroutine does not return */
                                    FUN_0002f03c("parse_stratum_response",
                                                 0x1c84);
                                }
                                local_a6c = &DAT_00068bd5;
                                (*DAT_00067ed8)();
                                ppVar7 =
                                    *(pthread_rwlock_t **)((int)__mutex + 0x24);
                                tVar8 = time((time_t *)0x0);
                                iVar5 = tVar8 - __mutex[2].__data.__lock;
                                bVar16 = DAT_00068bd5;
                                if (0 < iVar5) {
                                    bVar16 = DAT_00068bd5 | 1;
                                }
                                unaff_r6 = (undefined4 *)0x0;
                                if ((bVar16 != 0) &&
                                    (((DAT_00074500 != '\0' ||
                                       (DAT_00068bd4 != '\0')) ||
                                      (5 < DAT_00067db4)))) {
                                    snprintf(
                                        (char *)local_838, 0x800,
                                        "Pool %d stratum share result lag time "
                                        "%d seconds",
                                        **(undefined4 **)((int)ppVar7 + 0x104),
                                        iVar5);
                                    FUN_00020f58(6, local_838, 0);
                                }
                            } else {
                                FUN_0002efe0("parse_stratum_response", 0x1c90);
                            }
                            unaff_r11 = local_838;
                            uVar12 = *(uint *)((int)ppVar7 + 0xdc);
                            local_838[0] =
                                uVar12 << 0x18 | (uVar12 >> 8 & 0xff) << 0x10 |
                                (uVar12 >> 0x10 & 0xff) << 8 | uVar12 >> 0x18;
                            uVar12 = *(uint *)((int)ppVar7 + 0xd8);
                            local_838[1] =
                                uVar12 << 0x18 | (uVar12 >> 8 & 0xff) << 0x10 |
                                (uVar12 >> 0x10 & 0xff) << 8 | uVar12 >> 0x18;
                            uVar12 = *(uint *)((int)ppVar7 + 0xd4);
                            local_838[2] =
                                uVar12 << 0x18 | (uVar12 >> 8 & 0xff) << 0x10 |
                                (uVar12 >> 0x10 & 0xff) << 8 | uVar12 >> 0x18;
                            uVar12 = *(uint *)((int)ppVar7 + 0xd0);
                            local_838[3] =
                                uVar12 << 0x18 | (uVar12 >> 8 & 0xff) << 0x10 |
                                (uVar12 >> 0x10 & 0xff) << 8 | uVar12 >> 0x18;
                            uVar12 = *(uint *)((int)ppVar7 + 0xcc);
                            local_838[4] =
                                uVar12 << 0x18 | (uVar12 >> 8 & 0xff) << 0x10 |
                                (uVar12 >> 0x10 & 0xff) << 8 | uVar12 >> 0x18;
                            uVar12 = *(uint *)((int)ppVar7 + 200);
                            local_838[5] =
                                uVar12 << 0x18 | (uVar12 >> 8 & 0xff) << 0x10 |
                                (uVar12 >> 0x10 & 0xff) << 8 | uVar12 >> 0x18;
                            uVar12 = *(uint *)((int)ppVar7 + 0xc4);
                            local_838[6] =
                                uVar12 << 0x18 | (uVar12 >> 8 & 0xff) << 0x10 |
                                (uVar12 >> 0x10 & 0xff) << 8 | uVar12 >> 0x18;
                            uVar12 = ppVar7[6].__data.__lock;
                            local_838[7] =
                                uVar12 << 0x18 | (uVar12 >> 8 & 0xff) << 0x10 |
                                (uVar12 >> 0x10 & 0xff) << 8 | uVar12 >> 0x18;
                            puVar14 = unaff_r11;
                            do {
                                if ((char)*puVar14 != '\0')
                                    break;
                                unaff_r6 = (undefined4 *)((int)unaff_r6 + 1);
                                puVar14 = (uint *)((int)puVar14 + 1);
                            } while (unaff_r6 != (undefined4 *)0x1d);
                            uVar12 = *(uint *)((int)local_838 + (int)unaff_r6);
                            dVar22 = round(*(double *)((int)ppVar7 + 0x178));
                            FUN_0004a1d8(SUB84(dVar22, 0),
                                         (int)((ulonglong)dVar22 >> 0x20));
                            FUN_0002aef8(*(undefined4 *)((int)ppVar7 + 0xe8),
                                         *(undefined4 *)((int)ppVar7 + 0xec),
                                         local_a18, 0x10, 0);
                            pcVar6 = local_a18;
                            snprintf(acStack_9f4, 0x40, "%08lx Diff %s/%llu%s",
                                     uVar12 << 0x18 |
                                         (uVar12 >> 8 & 0xff) << 0x10 |
                                         (uVar12 >> 0x10 & 0xff) << 8 |
                                         uVar12 >> 0x18,
                                     pcVar6);
                            unaff_r6 = *(undefined4 **)((int)ppVar7 + 0x104);
                            iVar5 = FUN_00031b04(ppVar7[8].__data.__lock);
                            local_a78 = *(int *)(iVar5 + 0x24);
                            if ((local_a80 == (int *)0x0) ||
                                ((*local_a80 != 5 &&
                                  ((*(char *)((int)ppVar7 + 0x144) == '\0' ||
                                    (*local_a80 != 7)))))) {
                                iVar5 = pthread_mutex_lock(
                                    (pthread_mutex_t *)&DAT_000766c4);
                                if (iVar5 == 0) {
                                    *(int *)(local_a78 + 0x28) =
                                        *(int *)(local_a78 + 0x28) + 1;
                                    bVar21 = 0xfffffffe < DAT_000767e8;
                                    DAT_000767e8 = DAT_000767e8 + 1;
                                    uVar12 = unaff_r6[4];
                                    DAT_000767ec = DAT_000767ec + (uint)bVar21;
                                    unaff_r6[4] = uVar12 + 1;
                                    unaff_r6[5] = unaff_r6[5] +
                                                  (uint)(0xfffffffe < uVar12);
                                    *(double *)(local_a78 + 0xd0) =
                                        *(double *)(local_a78 + 0xd0) +
                                        *(double *)((int)ppVar7 + 0x178);
                                    dVar22 = *(double *)((int)ppVar7 + 0x178);
                                    _DAT_00073390 = _DAT_00073390 + dVar22;
                                    unaff_r6[6] = unaff_r6[6] + 1;
                                    *(double *)(unaff_r6 + 0x14) =
                                        *(double *)(unaff_r6 + 0x14) + dVar22;
                                    iVar5 = pthread_mutex_unlock(
                                        (pthread_mutex_t *)&DAT_000766c4);
                                    if (iVar5 != 0) {
                                        piVar3 = __errno_location();
                                        uVar11 = 0xe0f;
                                        goto LAB_0003d478;
                                    }
                                    (*DAT_00067ed8)();
                                    if ((*local_a6c != 0) &&
                                        (((DAT_00074500 != '\0' ||
                                           (DAT_00068bd4 != '\0')) ||
                                          (6 < DAT_00067db4)))) {
                                        local_838[0]._0_1_ = 'P';
                                        local_838[0]._1_1_ = 'R';
                                        local_838[0]._2_1_ = 'O';
                                        local_838[0]._3_1_ = 'O';
                                        local_838[1]._0_1_ = 'F';
                                        local_838[1]._1_1_ = ' ';
                                        local_838[1]._2_1_ = 'O';
                                        local_838[1]._3_1_ = 'F';
                                        local_838[2]._0_1_ = ' ';
                                        local_838[2]._1_1_ = 'W';
                                        local_838[2]._2_1_ = 'O';
                                        local_838[2]._3_1_ = 'R';
                                        local_838[3]._0_1_ = 'K';
                                        local_838[3]._1_1_ = ' ';
                                        local_838[3]._2_1_ = 'R';
                                        local_838[3]._3_1_ = 'E';
                                        local_838[4]._0_1_ = 'S';
                                        local_838[4]._1_1_ = 'U';
                                        local_838[4]._2_1_ = 'L';
                                        local_838[4]._3_1_ = 'T';
                                        local_838[5]._0_1_ = ':';
                                        local_838[5]._1_1_ = ' ';
                                        local_838[5]._2_1_ = 'f';
                                        local_838[5]._3_1_ = 'a';
                                        local_838[6]._0_1_ = 'l';
                                        local_838[6]._1_1_ = 's';
                                        local_838[6]._2_1_ = 'e';
                                        local_838[6]._3_1_ = ' ';
                                        local_838[7]._0_1_ = '(';
                                        local_838[7]._1_1_ = 'b';
                                        local_838[7]._2_1_ = 'o';
                                        local_838[7]._3_1_ = 'o';
                                        builtin_strncpy(local_818, "ooo)", 4);
                                        local_818[4] = 0;
                                        FUN_00020f58(7, unaff_r11, 0);
                                    }
                                    cVar1 = DAT_0007559c;
                                    if ((DAT_00073378 == '\0') &&
                                        (DAT_0007559c == '\0')) {
                                        local_a18[0] = 'r';
                                        local_a18[1] = 'e';
                                        local_a18[2] = 'j';
                                        local_a18[3] = 'e';
                                        local_a14 = 0x7463;
                                        local_a12 = 0;
                                        memset(auStack_a11, 0, 0x1d);
                                        local_a38 = local_a38 & 0xff00;
                                        if (DAT_000733cc < 2) {
                                            local_a4c[0] = cVar1;
                                        } else {
                                            snprintf(
                                                local_a4c, 0x14, "pool %d",
                                                **(undefined4 **)((int)ppVar7 +
                                                                  0x104));
                                        }
                                        if (*(char *)((int)ppVar7 + 0x144) ==
                                            '\0') {
                                            local_a80 = (int *)FUN_000480fc(
                                                iVar2, "reject-reason");
                                        }
                                        if (local_a80 == (int *)0x0) {
                                            if (piVar3 == (int *)0x0) {
                                                bVar16 = 0;
                                            } else {
                                                bVar16 = *(byte *)((int)ppVar7 +
                                                                   0x11c) &
                                                         1;
                                            }
                                            if (bVar16 != 0) {
                                                iVar5 = *piVar3;
                                                if (iVar5 == 1) {
                                                    piVar3 =
                                                        (int *)FUN_00048484(
                                                            piVar3);
                                                    if (piVar3 == (int *)0x0)
                                                        goto LAB_0003ce74;
                                                    iVar5 = *piVar3;
                                                }
                                                if (iVar5 == 2) {
                                                    uVar11 =
                                                        FUN_00048630(piVar3);
                                                    snprintf((char *)&local_a38,
                                                             0x1f, " (%s)",
                                                             uVar11);
                                                }
                                            }
                                        } else {
                                            pcVar6 = (char *)FUN_00048630();
                                            sVar9 = strlen(pcVar6);
                                            if (0x1b < sVar9) {
                                                sVar9 = 0x1c;
                                            }
                                            local_a38 = 0x2820;
                                            FUN_000254e8(auStack_a36, pcVar6,
                                                         sVar9, "cgminer.c",
                                                         "share_result", 0xe37);
                                            auStack_a36[sVar9] = 0x29;
                                            auStack_a36[sVar9 + 1] = 0;
                                            FUN_000254e8(auStack_a11, pcVar6,
                                                         sVar9, "cgminer.c",
                                                         "share_result", 0xe3c);
                                            local_a12 = 0x3a;
                                            auStack_a11[sVar9] = 0;
                                        }
                                    LAB_0003ce74:
                                        if (((DAT_00074500 != '\0') ||
                                             (DAT_00068bd4 != '\0')) ||
                                            (4 < DAT_00067db4)) {
                                            snprintf(
                                                (char *)unaff_r11, 0x800,
                                                "Rejected %s %s %d %s%s %s%s "
                                                "version 0x%x",
                                                acStack_9f4,
                                                *(undefined4
                                                      *)(*(int *)(local_a78 +
                                                                  4) +
                                                         8),
                                                *(undefined4 *)(local_a78 + 8),
                                                local_a4c, &local_a38,
                                                &DAT_0004d5c8, &DAT_0004d5c8,
                                                *(undefined4 *)((int)ppVar7 +
                                                                0x1bc));
                                            FUN_00020f58(5, unaff_r11, 0);
                                        }
                                        FUN_00035a94(local_a18, ppVar7);
                                    }
                                    iVar5 = unaff_r6[6];
                                    if ((((10 < iVar5) &&
                                          (*(char *)((int)ppVar7 + 0x119) ==
                                           '\0')) &&
                                         (DAT_000766e0 != '\0')) &&
                                        ((1 < DAT_00074578 &&
                                          (dVar22 = (double)FUN_0004a11c(
                                               DAT_000755d8, DAT_000755dc),
                                           (dVar22 / DAT_00068720) * 60.0 *
                                                   3.0 <
                                               (double)(longlong)iVar5)))) {
                                        if ((DAT_00074500 != '\0') ||
                                            ((DAT_00068bd4 != '\0' ||
                                              (3 < DAT_00067db4)))) {
                                            snprintf(
                                                (char *)unaff_r11, 0x800,
                                                "Pool %d rejected %d "
                                                "sequential shares, disabling!",
                                                *unaff_r6, iVar5);
                                            FUN_00020f58(4, unaff_r11, 0);
                                        }
                                        if (unaff_r6[0x19] == 1) {
                                            DAT_00074578 = DAT_00074578 + -1;
                                        }
                                        unaff_r6[0x19] = 2;
                                        puVar10 = (undefined4 *)FUN_00031ff4();
                                        if (unaff_r6 == puVar10) {
                                            FUN_00034178(0);
                                        }
                                        unaff_r6[6] = 0;
                                    }
                                LAB_0003d04c:
                                    FUN_0002cba8(
                                        (undefined *)((int)__mutex + 0x24),
                                        "cgminer.c", "parse_stratum_response",
                                        0x1cb1);
                                    free(__mutex);
                                    if (*(int *)(iVar2 + 4) != -1) {
                                        DataMemoryBarrier(0xb);
                                        piVar3 = (int *)(iVar2 + 4);
                                        do {
                                            iVar5 = *piVar3;
                                            bVar21 = (bool)hasExclusiveAccess(
                                                piVar3);
                                        } while (!bVar21);
                                        *piVar3 = iVar5 + -1;
                                        if (iVar5 + -1 == 0) {
                                            FUN_00048a34(iVar2);
                                        }
                                    }
                                    goto LAB_0003c020;
                                }
                                piVar3 = __errno_location();
                                uVar11 = 0xe07;
                                pcVar6 = "WTF MUTEX ERROR ON LOCK! errno=%d in "
                                         "%s %s():%d";
                            } else {
                                iVar5 = pthread_mutex_lock(
                                    (pthread_mutex_t *)&DAT_000766c4);
                                if (iVar5 == 0) {
                                    bVar21 = 0xfffffffe < DAT_000755d8;
                                    DAT_000755d8 = DAT_000755d8 + 1;
                                    DAT_000755dc = DAT_000755dc + (uint)bVar21;
                                    *(int *)(local_a78 + 0x24) =
                                        *(int *)(local_a78 + 0x24) + 1;
                                    uVar12 = unaff_r6[2];
                                    unaff_r6[2] = uVar12 + 1;
                                    unaff_r6[3] = unaff_r6[3] +
                                                  (uint)(0xfffffffe < uVar12);
                                    *(double *)(local_a78 + 200) =
                                        *(double *)(local_a78 + 200) +
                                        *(double *)((int)ppVar7 + 0x178);
                                    _DAT_00073370 =
                                        _DAT_00073370 +
                                        *(double *)((int)ppVar7 + 0x178);
                                    *(double *)(unaff_r6 + 0x12) =
                                        *(double *)(unaff_r6 + 0x12) +
                                        *(double *)((int)ppVar7 + 0x178);
                                    iVar5 = pthread_mutex_unlock(
                                        (pthread_mutex_t *)&DAT_000766c4);
                                    if (iVar5 == 0) {
                                        (*DAT_00067ed8)();
                                        unaff_r6[6] = 0;
                                        *(undefined4 *)(local_a78 + 0xd8) =
                                            *unaff_r6;
                                        tVar8 = time((time_t *)0x0);
                                        bVar16 = *local_a6c;
                                        *(time_t *)(local_a78 + 0xdc) = tVar8;
                                        *(undefined8 *)(local_a78 + 0xe0) = *(
                                            undefined8 *)((int)ppVar7 + 0x178);
                                        unaff_r6[0x58] = tVar8;
                                        uVar11 = *(undefined4 *)((int)ppVar7 +
                                                                 0x17c);
                                        unaff_r6[0x5a] = *(
                                            undefined4 *)((int)ppVar7 + 0x178);
                                        unaff_r6[0x5b] = uVar11;
                                        if ((bVar16 != 0) &&
                                            (((DAT_00074500 != '\0' ||
                                               (DAT_00068bd4 != '\0')) ||
                                              (6 < DAT_00067db4)))) {
                                            local_838[0]._0_1_ = 'P';
                                            local_838[0]._1_1_ = 'R';
                                            local_838[0]._2_1_ = 'O';
                                            local_838[0]._3_1_ = 'O';
                                            local_838[1]._0_1_ = 'F';
                                            local_838[1]._1_1_ = ' ';
                                            local_838[1]._2_1_ = 'O';
                                            local_838[1]._3_1_ = 'F';
                                            local_838[2]._0_1_ = ' ';
                                            local_838[2]._1_1_ = 'W';
                                            local_838[2]._2_1_ = 'O';
                                            local_838[2]._3_1_ = 'R';
                                            local_838[3]._0_1_ = 'K';
                                            local_838[3]._1_1_ = ' ';
                                            local_838[3]._2_1_ = 'R';
                                            local_838[3]._3_1_ = 'E';
                                            local_838[4]._0_1_ = 'S';
                                            local_838[4]._1_1_ = 'U';
                                            local_838[4]._2_1_ = 'L';
                                            local_838[4]._3_1_ = 'T';
                                            local_838[5]._0_1_ = ':';
                                            local_838[5]._1_1_ = ' ';
                                            local_838[5]._2_1_ = 't';
                                            local_838[5]._3_1_ = 'r';
                                            local_838[6]._0_1_ = 'u';
                                            local_838[6]._1_1_ = 'e';
                                            local_838[6]._2_1_ = ' ';
                                            local_838[6]._3_1_ = '(';
                                            local_838[7]._0_1_ = 'y';
                                            local_838[7]._1_1_ = 'a';
                                            local_838[7]._2_1_ = 'y';
                                            local_838[7]._3_1_ = '!';
                                            builtin_strncpy(local_818, "!!)",
                                                            4);
                                            FUN_00020f58(7, unaff_r11, 0);
                                        }
                                        if ((DAT_00073378 == '\0') &&
                                            (DAT_0007559c == '\0')) {
                                            if (DAT_000733cc < 2) {
                                                if (((DAT_00074500 != '\0') ||
                                                     (DAT_00068bd4 != '\0')) ||
                                                    (4 < DAT_00067db4)) {
                                                    pcVar6 = *(
                                                        char *
                                                            *)(*(int *)(local_a78 +
                                                                        4) +
                                                               8);
                                                    snprintf(
                                                        (char *)unaff_r11,
                                                        0x800,
                                                        "Accepted %s %s %d "
                                                        "%s%s",
                                                        acStack_9f4, pcVar6,
                                                        *(undefined4
                                                              *)(local_a78 + 8),
                                                        &DAT_0004d5c8,
                                                        &DAT_0004d5c8);
                                                    FUN_00020f58(5, unaff_r11,
                                                                 0);
                                                }
                                            } else if (((DAT_00074500 !=
                                                         '\0') ||
                                                        (DAT_00068bd4 !=
                                                         '\0')) ||
                                                       (4 < DAT_00067db4)) {
                                                pcVar6 = *(
                                                    char *
                                                        *)(*(int *)(local_a78 +
                                                                    4) +
                                                           8);
                                                snprintf(
                                                    (char *)unaff_r11, 0x800,
                                                    "Accepted %s %s %d pool %d "
                                                    "%s%s",
                                                    acStack_9f4, pcVar6,
                                                    *(undefined4 *)(local_a78 +
                                                                    8),
                                                    **(undefined4 *
                                                           *)((int)ppVar7 +
                                                              0x104),
                                                    &DAT_0004d5c8,
                                                    &DAT_0004d5c8);
                                                FUN_00020f58(5, unaff_r11, 0);
                                            }
                                        }
                                        FUN_00035a94("accept", ppVar7);
                                        if ((DAT_00069050 != 0) &&
                                            ((double)(longlong)DAT_00069050 <=
                                             _DAT_00073370)) {
                                            if ((DAT_00074500 != '\0') ||
                                                ((DAT_00068bd4 != '\0' ||
                                                  (3 < DAT_00067db4)))) {
                                                snprintf(
                                                    (char *)unaff_r11, 0x800,
                                                    "Successfully mined %d "
                                                    "accepted shares as "
                                                    "requested and exiting.",
                                                    DAT_00069050, pcVar6);
                                                FUN_00020f58(4, unaff_r11, 0);
                                            }
                                            FUN_0002e730();
                                        }
                                        if (unaff_r6[0x19] == 2) {
                                            if (((DAT_00074500 != '\0') ||
                                                 (DAT_00068bd4 != '\0')) ||
                                                (3 < DAT_00067db4)) {
                                                snprintf((char *)unaff_r11,
                                                         0x800,
                                                         "Rejecting pool %d "
                                                         "now accepting "
                                                         "shares, re-enabling!",
                                                         *unaff_r6);
                                                FUN_00020f58(4, unaff_r11, 0);
                                            }
                                            if (unaff_r6[0x19] != 1) {
                                                FUN_0002b664(unaff_r6 + 0x19);
                                            }
                                            FUN_00034178(0);
                                        }
                                        if (*(char *)((int)ppVar7 + 0x11b) !=
                                            '\0') {
                                            FUN_0002e9e8();
                                        }
                                        goto LAB_0003d04c;
                                    }
                                    piVar3 = __errno_location();
                                    uVar11 = 0xdd2;
                                LAB_0003d478:
                                    pcVar6 = "WTF MUTEX ERROR ON UNLOCK! "
                                             "errno=%d in %s %s():%d";
                                } else {
                                    piVar3 = __errno_location();
                                    uVar11 = 0xdc8;
                                    pcVar6 = "WTF MUTEX ERROR ON LOCK! "
                                             "errno=%d in %s %s():%d";
                                }
                            }
                            snprintf((char *)unaff_r11, 0x800, pcVar6, *piVar3,
                                     "cgminer.c", "share_result", uVar11);
                            goto LAB_0003c674;
                        }
                    LAB_0003c2dc:
                        iVar5 = *(int *)(iVar2 + 4);
                        unaff_r11 = puVar14;
                    }
                joined_r0x0003c55c:
                    if (iVar5 != -1) {
                        DataMemoryBarrier(0xb);
                        piVar3 = (int *)(iVar2 + 4);
                        do {
                            iVar5 = *piVar3;
                            bVar21 = (bool)hasExclusiveAccess(piVar3);
                        } while (!bVar21);
                        *piVar3 = iVar5 + -1;
                        if (iVar5 + -1 == 0) {
                            FUN_00048a34(iVar2);
                        }
                    }
                }
                iVar2 = FUN_00023ff8(param_1, __haystack);
                if (iVar2 != 0)
                    goto LAB_0003c020;
                if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                    (5 < DAT_00067db4)) {
                    unaff_r11 = local_838;
                    snprintf((char *)unaff_r11, 0x800,
                             "Unknown stratum msg: %s", __haystack);
                    FUN_00020f58(6, unaff_r11, 0);
                }
            } else {
            LAB_0003c020:
                if (*(char *)(param_1 + 0xaa) != '\0') {
                    local_838[0] = FUN_0002fd8c();
                    *(undefined1 *)(param_1 + 0xaa) = 0;
                    FUN_000360b0(param_1, local_838[0]);
                    unaff_r11 = local_838;
                    *(undefined1 *)(local_838[0] + 0x118) = 1;
                    FUN_0003a5d0();
                    FUN_0002cba8(unaff_r11, "cgminer.c", "stratum_rthread",
                                 0x1db1);
                }
            }
            free(__haystack);
            cVar1 = *(char *)((int)param_1 + 0x69);
        }
        if (DAT_00068bd5 != 0) {
            if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                (DAT_00067db4 < 7))
                goto LAB_0003c3ac;
            unaff_r11 = local_838;
            snprintf((char *)unaff_r11, 0x800,
                     "Stratum select failed on pool %d with value %d", *param_1,
                     iVar2);
            FUN_00020f58(7, unaff_r11, 0);
        }
    LAB_0003c120:
        if ((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) {
        LAB_0003c3ac:
            if (4 < DAT_00067db4)
                goto LAB_0003c13c;
        } else {
        LAB_0003c13c:
            unaff_r11 = local_838;
            snprintf((char *)unaff_r11, 0x800,
                     "Stratum connection to pool %d interrupted", *param_1);
            FUN_00020f58(5, unaff_r11, 0);
        }
        param_1[0x20] = param_1[0x20] + 1;
        DAT_000755d0 = DAT_000755d0 + 1;
        iVar2 = pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0x35));
        if (iVar2 != 0) {
            piVar3 = __errno_location();
            pcVar6 = "supports_resume";
            iVar19 = *piVar3;
            uVar11 = 0x1d3b;
        LAB_0003c654:
            __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        LAB_0003c668:
            snprintf((char *)local_838, 0x800, __format, iVar19, "cgminer.c",
                     pcVar6, uVar11);
        LAB_0003c674:
            FUN_00020f58(3, local_838, 1);
            /* WARNING: Subroutine does not return */
            FUN_0002e6b0(1);
        }
        iVar2 = pthread_rwlock_rdlock((pthread_rwlock_t *)(param_1 + 0x3b));
        if (iVar2 != 0) {
            piVar3 = __errno_location();
            iVar19 = *piVar3;
            __format = "WTF RDLOCK ERROR ON LOCK! errno=%d in %s %s():%d";
            pcVar6 = "supports_resume";
            uVar11 = 0x1d3b;
            goto LAB_0003c668;
        }
        iVar2 = pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0x35));
        if (iVar2 != 0) {
            piVar3 = __errno_location();
            pcVar6 = "supports_resume";
            iVar19 = *piVar3;
            uVar11 = 0x1d3b;
        LAB_0003c6d4:
            __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
            goto LAB_0003c668;
        }
        iVar5 = param_1[0x9f];
        iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)(param_1 + 0x3b));
        if (iVar2 != 0) {
            piVar3 = __errno_location();
            pcVar6 = "supports_resume";
            iVar19 = *piVar3;
            __format = "WTF RWLOCK ERROR ON UNLOCK! errno=%d in %s %s():%d";
            uVar11 = 0x1d3d;
            goto LAB_0003c668;
        }
        (*DAT_00067ed8)();
        if ((iVar5 == 0) || (DAT_00075684 != '\0')) {
            FUN_00033ddc(param_1);
        }
        FUN_00033ab4(param_1);
        puVar10 = (undefined4 *)FUN_00031ff4();
        if (param_1 == puVar10) {
            FUN_0002e9e8();
        }
        iVar2 = FUN_00028690(param_1);
        while (iVar2 == 0) {
            FUN_0003466c(param_1);
            if (*(char *)((int)param_1 + 0x69) != '\0') {
                return 0;
            }
            FUN_00023b9c(5000);
            iVar2 = FUN_00028690(param_1);
        }
    } while (true);
}

/* WARNING: Restarted to delay deadcode elimination for space: ram */

void FUN_0003d93c(int param_1)

{
    pthread_mutex_t *__mutex;
    int iVar1;
    uint uVar2;
    void *pvVar3;
    int *piVar4;
    uint uVar5;
    int iVar6;
    int iVar7;
    int iVar8;
    char *__format;
    uint uVar9;
    undefined4 uVar10;
    int iVar11;
    undefined4 *puVar12;
    int iVar13;
    int iVar14;
    int iVar15;
    int iVar16;
    int iVar17;
    int iVar18;
    int iVar19;
    bool bVar20;
    uint local_834;
    char acStack_828[2052];

    if ((DAT_00068bd5 != '\0') &&
        (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
          (6 < DAT_00067db4)))) {
        snprintf(acStack_828, 0x800, "Pushing work from pool %d to hash queue",
                 **(undefined4 **)(param_1 + 0x104));
        FUN_00020f58(7, acStack_828, 0);
    }
    *(undefined4 *)(param_1 + 0x150) = DAT_000691ac;
    FUN_0003a5d0(param_1);
    __mutex = DAT_00069010;
    *(int *)(*(int *)(param_1 + 0x104) + 0x44) =
        *(int *)(*(int *)(param_1 + 0x104) + 0x44) + 1;
    iVar1 = pthread_mutex_lock(__mutex);
    iVar15 = DAT_000690ec;
    if (iVar1 == 0) {
        if ((*(char *)(param_1 + 0x111) == '\0') &&
            (*(int *)(param_1 + 0x114) != 0)) {
            DAT_00069188 = DAT_00069188 + 1;
        }
        iVar1 = DAT_000755e0;
        if (*(char *)(DAT_000755e0 + 8) == '\0') {
            bVar20 = DAT_000690ec == 0;
            uVar2 = *(byte *)(param_1 + 0x154) + 0x112410d +
                        (uint) * (byte *)(param_1 + 0x157) * 0x1000000 +
                        (uint) * (byte *)(param_1 + 0x156) * 0x10000 +
                        (uint) * (byte *)(param_1 + 0x155) * 0x100 ^
                    0x7f76d;
            uVar9 = 0x9f49bac6 - uVar2 ^ uVar2 << 8;
            *(int *)(param_1 + 0x16c) = param_1 + 0x154;
            uVar5 = (-0x112410d - uVar2) - uVar9 ^ uVar9 >> 0xd;
            *(undefined4 *)(param_1 + 0x170) = 4;
            uVar2 = (uVar2 - uVar9) - uVar5 ^ uVar5 >> 0xc;
            uVar9 = (uVar9 - uVar5) - uVar2 ^ uVar2 << 0x10;
            uVar5 = (uVar5 - uVar2) - uVar9 ^ uVar9 >> 5;
            uVar2 = (uVar2 - uVar9) - uVar5 ^ uVar5 >> 3;
            uVar9 = (uVar9 - uVar5) - uVar2 ^ uVar2 << 10;
            uVar2 = (uVar5 - uVar2) - uVar9 ^ uVar9 >> 0xf;
            *(uint *)(param_1 + 0x174) = uVar2;
            if (bVar20) {
                *(undefined4 *)(param_1 + 0x160) = 0;
                *(undefined4 *)(param_1 + 0x15c) = 0;
                DAT_000690ec = param_1;
                puVar12 = (undefined4 *)malloc(0x2c);
                *(undefined4 **)(param_1 + 0x158) = puVar12;
                if (puVar12 == (undefined4 *)0x0)
                    goto LAB_0003e0fc;
                memset(puVar12 + 3, 0, 0x20);
                puVar12[1] = 0x20;
                puVar12[4] = param_1 + 0x158;
                puVar12[2] = 5;
                puVar12[5] = 0x158;
                pvVar3 = calloc(0x180, 1);
                *puVar12 = pvVar3;
                if (pvVar3 == (void *)0x0)
                    goto LAB_0003e0fc;
                puVar12[10] = 0xa0111fe1;
                iVar15 = param_1;
            } else {
                uVar10 = *(undefined4 *)(iVar15 + 0x158);
                *(undefined4 *)(param_1 + 0x160) = 0;
                *(undefined4 *)(param_1 + 0x158) = uVar10;
                *(int *)(param_1 + 0x15c) =
                    *(int *)(*(int *)(iVar15 + 0x158) + 0x10) -
                    *(int *)(*(int *)(iVar15 + 0x158) + 0x14);
                *(int *)(*(int *)(*(int *)(iVar15 + 0x158) + 0x10) + 8) =
                    param_1;
                *(int *)(*(int *)(iVar15 + 0x158) + 0x10) = param_1 + 0x158;
                puVar12 = *(undefined4 **)(iVar15 + 0x158);
            }
            puVar12[3] = puVar12[3] + 1;
            iVar1 = ((*(int **)(iVar15 + 0x158))[1] - 1U & uVar2) * 0xc;
            iVar7 = **(int **)(iVar15 + 0x158) + iVar1;
            *(int *)(iVar7 + 4) = *(int *)(iVar7 + 4) + 1;
            uVar10 = *(undefined4 *)(**(int **)(iVar15 + 0x158) + iVar1);
            *(undefined4 *)(param_1 + 0x164) = 0;
            *(undefined4 *)(param_1 + 0x168) = uVar10;
            iVar7 = **(int **)(iVar15 + 0x158);
            if (*(int *)(iVar7 + iVar1) != 0) {
                *(int *)(*(int *)(iVar7 + iVar1) + 0xc) = param_1 + 0x158;
                iVar7 = **(int **)(iVar15 + 0x158);
            }
            *(int *)(iVar7 + iVar1) = param_1 + 0x158;
            iVar1 = **(int **)(DAT_000690ec + 0x158) + iVar1;
            iVar15 = DAT_000690ec;
            if ((*(uint *)(iVar1 + 4) <
                 (uint)((*(int *)(iVar1 + 8) + 1) * 10)) ||
                (iVar1 = *(int *)(param_1 + 0x158),
                 *(int *)(iVar1 + 0x24) == 1)) {
            LAB_0003dd7c:
                iVar1 = DAT_000755e0;
                iVar11 = iVar15 + 0x158;
                iVar7 = 1;
            LAB_0003dd84:
                iVar6 = 0;
                uVar2 = 0;
                iVar13 = iVar11;
                iVar11 = 0;
            LAB_0003dd94:
                uVar2 = uVar2 + 1;
                iVar19 = iVar7;
                if (iVar7 == 0) {
                    iVar8 = 0;
                    iVar16 = iVar13;
                } else {
                    iVar16 = *(int *)(iVar13 + 8);
                    if (iVar16 != 0) {
                        iVar18 = *(int *)(*(int *)(iVar15 + 0x158) + 0x14);
                        iVar16 = iVar16 + iVar18;
                        if (iVar16 != 0) {
                            iVar8 = 1;
                            while (iVar19 = iVar8, iVar8 != iVar7) {
                                iVar16 = *(int *)(iVar16 + 8);
                                iVar8 = iVar8 + 1;
                                iVar19 = iVar7;
                                if ((iVar16 == 0) ||
                                    (iVar16 = iVar16 + iVar18, iVar16 == 0))
                                    break;
                            }
                            goto LAB_0003ddf0;
                        }
                    }
                    iVar8 = 1;
                }
            LAB_0003ddf0:
                do {
                    iVar18 = iVar6;
                    if (iVar8 != 0)
                        goto LAB_0003de70;
                LAB_0003ddf8:
                    if (iVar19 == 0 || iVar16 == 0) {
                        iVar13 = iVar16;
                        if (iVar16 != 0)
                            goto LAB_0003dd94;
                        if (iVar6 != 0) {
                            *(undefined4 *)(iVar6 + 8) = 0;
                        }
                        if ((1 < uVar2) &&
                            (iVar7 = iVar7 << 1, iVar6 = iVar11, iVar11 != 0))
                            goto LAB_0003dd84;
                        *(int *)(*(int *)(iVar15 + 0x158) + 0x10) = iVar6;
                        DAT_000690ec =
                            iVar11 - *(int *)(*(int *)(iVar15 + 0x158) + 0x14);
                        goto LAB_0003df8c;
                    }
                    iVar18 = iVar6;
                    iVar6 = iVar16;
                    iVar17 = iVar8;
                    if (*(int *)(iVar16 + 8) != 0) {
                        iVar17 = *(int *)(iVar16 + 8) +
                                 *(int *)(*(int *)(iVar15 + 0x158) + 0x14);
                    }
                LAB_0003de1c:
                    iVar16 = iVar17;
                    iVar19 = iVar19 + -1;
                    if (iVar18 == 0)
                        goto LAB_0003dee0;
                    *(int *)(iVar18 + 8) =
                        iVar6 - *(int *)(*(int *)(iVar15 + 0x158) + 0x14);
                    if (iVar6 != 0) {
                        while (true) {
                            iVar18 = iVar18 -
                                     *(int *)(*(int *)(iVar15 + 0x158) + 0x14);
                            while (true) {
                                *(int *)(iVar6 + 4) = iVar18;
                                iVar18 = iVar6;
                                if (iVar8 == 0)
                                    goto LAB_0003ddf8;
                            LAB_0003de70:
                                iVar6 = iVar13;
                                iVar13 = iVar6;
                                if (iVar16 == 0 || iVar19 == 0) {
                                    if ((iVar6 != 0) &&
                                        (iVar13 = *(int *)(iVar6 + 8),
                                         iVar13 != 0)) {
                                        iVar13 =
                                            iVar13 +
                                            *(int *)(*(int *)(iVar15 + 0x158) +
                                                     0x14);
                                    }
                                } else {
                                    iVar14 = *(int *)(*(int *)(iVar15 + 0x158) +
                                                      0x14);
                                    if (0 < *(int *)(iVar6 + -iVar14 + 0x108) -
                                                *(int *)(iVar16 + -iVar14 +
                                                         0x108)) {
                                        iVar17 = *(int *)(iVar16 + 8);
                                        iVar6 = iVar16;
                                        if (iVar17 != 0) {
                                            iVar17 = iVar17 + iVar14;
                                        }
                                        goto LAB_0003de1c;
                                    }
                                    if (iVar6 != 0) {
                                        if (*(int *)(iVar6 + 8) == 0) {
                                            iVar13 = 0;
                                        } else {
                                            iVar13 =
                                                *(int *)(iVar6 + 8) + iVar14;
                                        }
                                    }
                                }
                                iVar8 = iVar8 + -1;
                                if (iVar18 != 0)
                                    break;
                            LAB_0003dee0:
                                iVar11 = iVar6;
                                if (iVar6 == 0)
                                    goto LAB_0003ddf0;
                                iVar18 = 0;
                            }
                            if (iVar6 == 0)
                                break;
                            *(int *)(iVar18 + 8) =
                                iVar6 -
                                *(int *)(*(int *)(iVar15 + 0x158) + 0x14);
                        }
                        *(undefined4 *)(iVar18 + 8) = 0;
                    }
                } while (true);
            }
            pvVar3 = calloc(*(int *)(iVar1 + 4) * 0x18, 1);
            if (pvVar3 == (void *)0x0) {
            LAB_0003e0fc:
                /* WARNING: Subroutine does not return */
                exit(-1);
            }
            iVar15 = 0;
            *(uint *)(iVar1 + 0x18) =
                (uint)((*(int *)(iVar1 + 4) * 2 - 1U &
                        *(uint *)(iVar1 + 0xc)) != 0) +
                (*(uint *)(iVar1 + 0xc) >> (*(int *)(iVar1 + 8) + 1U & 0xff));
            *(undefined4 *)(*(int *)(param_1 + 0x158) + 0x1c) = 0;
            piVar4 = *(int **)(param_1 + 0x158);
            uVar2 = piVar4[1];
            if (uVar2 != 0) {
                local_834 = 0;
                do {
                    iVar1 = *(int *)(*piVar4 + iVar15);
                    if (iVar1 != 0) {
                        while (true) {
                            iVar7 = *(int *)(iVar1 + 0x10);
                            uVar5 = uVar2 * 2 - 1 & *(uint *)(iVar1 + 0x1c);
                            uVar2 = *(int *)((int)pvVar3 + uVar5 * 0xc + 4) + 1;
                            *(uint *)((int)pvVar3 + uVar5 * 0xc + 4) = uVar2;
                            if ((uint)piVar4[6] < uVar2) {
                                piVar4[7] = piVar4[7] + 1;
                                uVar10 = FUN_000498d8(
                                    *(undefined4 *)((int)pvVar3 + uVar5 * 0xc +
                                                    4),
                                    *(undefined4 *)(*(int *)(param_1 + 0x158) +
                                                    0x18));
                                *(undefined4 *)((int)pvVar3 + uVar5 * 0xc + 8) =
                                    uVar10;
                            }
                            *(undefined4 *)(iVar1 + 0xc) = 0;
                            *(undefined4 *)(iVar1 + 0x10) =
                                *(undefined4 *)((int)pvVar3 + uVar5 * 0xc);
                            iVar11 = *(int *)((int)pvVar3 + uVar5 * 0xc);
                            if (iVar11 != 0) {
                                *(int *)(iVar11 + 0xc) = iVar1;
                            }
                            *(int *)((int)pvVar3 + uVar5 * 0xc) = iVar1;
                            piVar4 = *(int **)(param_1 + 0x158);
                            if (iVar7 == 0)
                                break;
                            uVar2 = piVar4[1];
                            iVar1 = iVar7;
                        }
                        uVar2 = piVar4[1];
                    }
                    iVar15 = iVar15 + 0xc;
                    local_834 = local_834 + 1;
                } while (local_834 < uVar2);
            }
            free((void *)*piVar4);
            *(int *)(*(int *)(param_1 + 0x158) + 4) =
                *(int *)(*(int *)(param_1 + 0x158) + 4) << 1;
            *(int *)(*(int *)(param_1 + 0x158) + 8) =
                *(int *)(*(int *)(param_1 + 0x158) + 8) + 1;
            **(undefined4 **)(param_1 + 0x158) = pvVar3;
            iVar15 = DAT_000690ec;
            iVar1 = *(int *)(param_1 + 0x158);
            if (*(uint *)(iVar1 + 0xc) >> 1 < *(uint *)(iVar1 + 0x1c)) {
                iVar7 = *(int *)(iVar1 + 0x20) + 1;
            } else {
                iVar7 = 0;
            }
            *(int *)(iVar1 + 0x20) = iVar7;
            if (1 < *(uint *)(*(int *)(param_1 + 0x158) + 0x20)) {
                *(undefined4 *)(*(int *)(param_1 + 0x158) + 0x24) = 1;
            }
            iVar1 = DAT_000755e0;
            if (iVar15 != 0)
                goto LAB_0003dd7c;
        }
    LAB_0003df8c:
        pthread_cond_broadcast((pthread_cond_t *)(iVar1 + 0x28));
        iVar15 = pthread_mutex_unlock(DAT_00069010);
        if (iVar15 == 0) {
            (*DAT_00067ed8)();
            return;
        }
        piVar4 = __errno_location();
        iVar15 = *piVar4;
        __format = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
        uVar10 = 0x16a3;
    } else {
        piVar4 = __errno_location();
        iVar15 = *piVar4;
        __format = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
        uVar10 = 0x1691;
    }
    snprintf(acStack_828, 0x800, __format, iVar15, "cgminer.c", "hash_push",
             uVar10);
    FUN_00020f58(3, acStack_828, 1);
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(1);
}

/* WARNING: Globals starting with '_' overlap smaller symbols at the same
 * address */

void FUN_0003e108(void *param_1)

{
    char cVar1;
    int iVar2;
    int *piVar3;
    char *pcVar4;
    uint uVar5;
    undefined4 *puVar6;
    int iVar7;
    bool bVar8;
    undefined4 uVar9;
    void *local_81c[2];
    pthread_t pStack_814;
    char local_810[32];
    undefined2 local_7f0;
    undefined1 uStack_7ee;

    puVar6 = *(undefined4 **)((int)param_1 + 0x104);
    local_81c[0] = param_1;
    FUN_000239a4((int)param_1 + 0x1b0);
    if (DAT_0006917c != '\0') {
        iVar2 = FUN_00031b04(*(undefined4 *)((int)local_81c[0] + 0x100));
        iVar7 = *(int *)(iVar2 + 0x24);
        iVar2 = pthread_mutex_lock((pthread_mutex_t *)&DAT_000766c4);
        if (iVar2 == 0) {
            *(int *)(iVar7 + 0x24) = *(int *)(iVar7 + 0x24) + 1;
            bVar8 = 0xfffffffe < DAT_000755d8;
            DAT_000755d8 = DAT_000755d8 + 1;
            DAT_000755dc = DAT_000755dc + (uint)bVar8;
            uVar5 = puVar6[2];
            puVar6[2] = uVar5 + 1;
            puVar6[3] = puVar6[3] + (uint)(0xfffffffe < uVar5);
            *(double *)(iVar7 + 200) = *(double *)(iVar7 + 200) +
                                       *(double *)((int)local_81c[0] + 0x178);
            _DAT_00073370 =
                _DAT_00073370 + *(double *)((int)local_81c[0] + 0x178);
            *(double *)(puVar6 + 0x12) = *(double *)(puVar6 + 0x12) +
                                         *(double *)((int)local_81c[0] + 0x178);
            iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000766c4);
            if (iVar2 == 0) {
                (*DAT_00067ed8)();
                if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                    (DAT_00067db4 < 5)) {
                    return;
                }
                snprintf(local_810, 0x800,
                         "Accepted %s %d benchmark share nonce %08x",
                         *(undefined4 *)(*(int *)(iVar7 + 4) + 8),
                         *(undefined4 *)(iVar7 + 8),
                         *(undefined4 *)((int)local_81c[0] + 0x4c));
                FUN_00020f58(5, local_810, 0);
                return;
            }
            piVar3 = __errno_location();
            iVar2 = *piVar3;
            pcVar4 = "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
            uVar9 = 0x21f7;
        } else {
            piVar3 = __errno_location();
            iVar2 = *piVar3;
            pcVar4 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
            uVar9 = 0x21f0;
        }
        snprintf(local_810, 0x800, pcVar4, iVar2, "cgminer.c",
                 "submit_work_async", uVar9);
    LAB_0003e628:
        FUN_00020f58(3, local_810, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002e6b0(1);
    }
    iVar2 = FUN_000367ec(local_81c[0], 1);
    if (iVar2 == 0) {
        cVar1 = *(char *)((int)local_81c[0] + 0x11c);
    } else {
        if (DAT_0006875d == '\0') {
            if (*(char *)(puVar6 + 0x1a) == '\0') {
                if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                    (4 < DAT_00067db4)) {
                    snprintf(local_810, 0x800,
                             "Pool %d stale share detected, discarding",
                             *puVar6);
                    FUN_00020f58(5, local_810, 0);
                }
                FUN_00035a94("discard", local_81c[0]);
                iVar2 = pthread_mutex_lock((pthread_mutex_t *)&DAT_000766c4);
                if (iVar2 == 0) {
                    puVar6[0x1e] = puVar6[0x1e] + 1;
                    bVar8 = 0xfffffffe < DAT_00073318;
                    DAT_00073318 = DAT_00073318 + 1;
                    DAT_000766b8 =
                        DAT_000766b8 + *(double *)((int)local_81c[0] + 0x178);
                    DAT_0007331c = DAT_0007331c + (uint)bVar8;
                    *(double *)(puVar6 + 0x16) =
                        *(double *)(puVar6 + 0x16) +
                        *(double *)((int)local_81c[0] + 0x178);
                    iVar2 =
                        pthread_mutex_unlock((pthread_mutex_t *)&DAT_000766c4);
                    if (iVar2 == 0) {
                        (*DAT_00067ed8)();
                        FUN_0002cba8(local_81c, "cgminer.c",
                                     "submit_work_async", 0x2215);
                        return;
                    }
                    piVar3 = __errno_location();
                    iVar2 = *piVar3;
                    uVar9 = 0x2213;
                    pcVar4 =
                        "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d";
                } else {
                    piVar3 = __errno_location();
                    iVar2 = *piVar3;
                    uVar9 = 0x220c;
                    pcVar4 = "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d";
                }
                snprintf(local_810, 0x800, pcVar4, iVar2, "cgminer.c",
                         "submit_work_async", uVar9);
                goto LAB_0003e628;
            }
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (4 < DAT_00067db4)) {
                pcVar4 = "Pool %d stale share detected, submitting as pool "
                         "requested";
                goto LAB_0003e370;
            }
        } else if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                   (4 < DAT_00067db4)) {
            pcVar4 =
                "Pool %d stale share detected, submitting as user requested";
        LAB_0003e370:
            snprintf(local_810, 0x800, pcVar4, *puVar6);
            FUN_00020f58(5, local_810, 0);
        }
        *(undefined1 *)((int)local_81c[0] + 0x119) = 1;
        cVar1 = *(char *)((int)local_81c[0] + 0x11c);
    }
    if (cVar1 == '\0') {
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (4 < DAT_00067db4)) {
            builtin_strncpy(local_810, "Pushing submit work to work thre",
                            0x20);
            local_7f0 = 0x6461;
            uStack_7ee = 0;
            FUN_00020f58(5, local_810, 0);
        }
        iVar2 = pthread_create(&pStack_814, (pthread_attr_t *)0x0, FUN_0002b4ec,
                               local_81c[0]);
        if (iVar2 == 0) {
            return;
        }
        builtin_strncpy(local_810, "Failed to create submit_work_thr", 0x20);
        uStack_7ee = 100;
        local_7f0 = 0x6165;
        FUN_00020f58(3, local_810, 1);
        /* WARNING: Subroutine does not return */
        FUN_0002e6b0(1);
    }
    if (DAT_00068bd5 == '\0') {
    LAB_0003e4b0:
        iVar2 = puVar6[0xb6];
        if (iVar2 != 0) {
        LAB_0003e4c0:
            iVar2 = FUN_000233d4(iVar2, local_81c[0]);
            if (iVar2 != 0) {
                return;
            }
        }
        if ((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0'))
            goto LAB_0003e2ec;
    LAB_0003e4f8:
        builtin_strncpy(local_810, "Discarding work from removed poo", 0x20);
        local_7f0 = 0x6c;
        FUN_00020f58(4, local_810, 0);
        if (puVar6[0xb6] != 0)
            goto LAB_0003e308;
        if ((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0'))
            goto LAB_0003e818;
    } else {
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (6 < DAT_00067db4)) {
            snprintf(local_810, 0x800, "Pushing pool %d work to stratum queue",
                     *puVar6);
            FUN_00020f58(7, local_810, 0);
            goto LAB_0003e4b0;
        }
        iVar2 = puVar6[0xb6];
        if (iVar2 != 0)
            goto LAB_0003e4c0;
    LAB_0003e2ec:
        if (3 < DAT_00067db4)
            goto LAB_0003e4f8;
        if (puVar6[0xb6] != 0)
            goto LAB_0003e308;
    LAB_0003e818:
        if (DAT_00067db4 < 5)
            goto LAB_0003e308;
    }
    snprintf(local_810, 0x800, "Pushing pool %d work to stratum queue",
             *puVar6);
    FUN_00020f58(5, local_810, 0);
LAB_0003e308:
    FUN_0002cba8(local_81c, "cgminer.c", "submit_work_async", 0x2223);
    return;
}

int FUN_0003e82c(int param_1, int param_2)

{
    int iVar1;
    undefined4 uVar2;
    char acStack_810[2048];

    FUN_00033790(param_1 + 0x24);
    iVar1 = FUN_00023110(param_2 + 0xc0, param_2 + 0xa0);
    if (iVar1 == 0) {
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (5 < DAT_00067db4)) {
            snprintf(
                acStack_810, 0x800, "%s %s %d: Share above target",
                "submit_tested_work",
                *(undefined4 *)(*(int *)(*(int *)(param_1 + 0x24) + 4) + 8),
                *(undefined4 *)(*(int *)(param_1 + 0x24) + 8));
            FUN_00020f58(6, acStack_810, 0);
        }
        return 0;
    }
    uVar2 = FUN_0002fd8c();
    FUN_0002ca90(uVar2, param_2, 0);
    FUN_0003e108(uVar2);
    return iVar1;
}

uint FUN_0003e918(undefined4 param_1, int param_2, undefined4 param_3)

{
    uint uVar1;
    uint uVar2;

    uVar1 = FUN_0002dc68(param_1, param_3);
    if (uVar1 != 0) {
        *(undefined4 *)(param_2 + 0x4c) = param_3;
        FUN_0002b350(param_2);
        if (*(int *)(param_2 + 0xdc) == 0) {
            FUN_0003e82c(param_1, param_2);
            if (DAT_000766c0 == 0) {
                return uVar1;
            }
            uVar2 = (uint)DAT_0007449d;
            if (uVar2 == 0) {
                return uVar1;
            }
            FUN_0002ccf0(param_2, param_3);
            return uVar2;
        }
    }
    FUN_000331a4(param_1);
    return 0;
}

void FUN_0003e9ac(undefined4 param_1)

{
    undefined4 uVar1;

    uVar1 = FUN_0002fd8c();
    FUN_0002ca90(uVar1, param_1, 0);
    FUN_0003e108(uVar1);
    return;
}

undefined4 FUN_0003e9d4(undefined4 param_1, int param_2, undefined4 param_3)

{
    undefined4 uVar1;

    *(undefined4 *)(param_2 + 0x4c) = param_3;
    uVar1 = FUN_0002fd8c();
    FUN_0002ca90(uVar1, param_2, 0);
    FUN_0003e108(uVar1);
    return 1;
}

int FUN_0003ea04(int param_1, undefined4 param_2, undefined4 param_3,
                 undefined4 param_4)

{
    int iVar1;
    int local_81c;
    char acStack_818[2052];

    local_81c = FUN_0002fd8c();
    FUN_0002ca90(local_81c, param_2, param_4);
    iVar1 = local_81c;
    *(undefined4 *)(local_81c + 0x4c) = param_3;
    FUN_0002b350(local_81c);
    if (*(int *)(iVar1 + 0xdc) != 0) {
        FUN_0002cba8(&local_81c, "cgminer.c", "submit_noffset_nonce", 0x2397);
        FUN_000331a4(param_1);
        return 0;
    }
    FUN_00033790(param_1 + 0x24, local_81c);
    if ((DAT_000766c0 != 0) && (DAT_0007449d != '\0')) {
        FUN_0002ccf0(local_81c, param_3);
    }
    iVar1 = FUN_00023110(local_81c + 0xc0, local_81c + 0xa0);
    if (iVar1 != 0) {
        FUN_0003e108(local_81c);
        return iVar1;
    }
    FUN_0002cba8(&local_81c, "cgminer.c", "submit_noffset_nonce", 0x23a7);
    if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
        (5 < DAT_00067db4)) {
        snprintf(acStack_818, 0x800, "%s %d: Share above target",
                 *(undefined4 *)(*(int *)(*(int *)(param_1 + 0x24) + 4) + 8),
                 *(undefined4 *)(*(int *)(param_1 + 0x24) + 8));
        FUN_00020f58(6, acStack_818, 0);
    }
    return 1;
}

void FUN_0003eba0(undefined4 param_1)

{
    /* WARNING: Subroutine does not return */
    FUN_0002e6b0(param_1, 1);
}

uint FUN_0003ebac(void *param_1, uint param_2, undefined4 param_3,
                  char *param_4, char *param_5)

{
    undefined4 uVar1;
    size_t sVar2;
    size_t sVar3;
    char *__s;

    uVar1 = FUN_00023e4c(param_3, param_1);
    *(char **)((int)param_1 + 0xac) = param_4;
    *(undefined4 *)((int)param_1 + 0xa4) = uVar1;
    *(char **)((int)param_1 + 0xb0) = param_5;
    sVar2 = strlen(param_4);
    sVar3 = strlen(param_5);
    sVar2 = sVar2 + sVar3 + 2;
    __s = (char *)FUN_000229bc(sVar2, "cgminer.c", "add_pool_details", 0x2a4a);
    *(char **)((int)param_1 + 0xa8) = __s;
    snprintf(__s, sVar2, "%s:%s", *(undefined4 *)((int)param_1 + 0xac),
             *(undefined4 *)((int)param_1 + 0xb0));
    *(undefined1 *)((int)param_1 + 0x11c) = 1;
    *(byte *)((int)param_1 + 0x6b) = (byte)param_2 ^ 1;
    *(undefined1 *)((int)param_1 + 0x61) = 1;
    if (*(int *)((int)param_1 + 100) != 1) {
        FUN_0002b664((int)param_1 + 100);
    }
    pthread_create((pthread_t *)((int)param_1 + 0x118), (pthread_attr_t *)0x0,
                   FUN_00035d3c, param_1);
    if (param_2 == 0) {
        pthread_join(*(pthread_t *)((int)param_1 + 0x118), (void **)0x0);
        param_2 = (uint)DAT_00069170;
    }
    return param_2;
}

void FUN_0003eca0(int param_1)

{
    if (*(int *)(param_1 + 0xc) == 0) {
        *(undefined **)(param_1 + 0xc) = &DAT_0002aa68;
    }
    if (*(int *)(param_1 + 0x10) == 0) {
        *(undefined **)(param_1 + 0x10) = &DAT_0002aa44;
    }
    if (*(int *)(param_1 + 0x14) == 0) {
        *(undefined **)(param_1 + 0x14) = &DAT_0002aa48;
    }
    if (*(int *)(param_1 + 0x18) == 0) {
        *(undefined **)(param_1 + 0x18) = &DAT_0002c580;
    }
    if (*(int *)(param_1 + 0x20) == 0) {
        *(undefined1 **)(param_1 + 0x20) = &LAB_0002aa4c;
    }
    if (*(int *)(param_1 + 0x2c) == 0) {
        *(undefined1 **)(param_1 + 0x2c) = &LAB_0002c588;
    }
    if (*(int *)(param_1 + 0x34) == 0) {
        *(undefined1 **)(param_1 + 0x34) = &LAB_0002c590;
    }
    if (*(int *)(param_1 + 0x38) == 0) {
        *(undefined1 **)(param_1 + 0x38) = &LAB_0002aa60;
    }
    if (*(int *)(param_1 + 0x54) == 0) {
        *(undefined **)(param_1 + 0x54) = &DAT_0002c598;
    }
    if (*(int *)(param_1 + 0x58) == 0) {
        *(undefined **)(param_1 + 0x58) = &DAT_0002c59c;
    }
    if (*(int *)(param_1 + 0x5c) == 0) {
        *(undefined **)(param_1 + 0x5c) = &DAT_0002c5a0;
    }
    if (*(int *)(param_1 + 0x3c) == 0) {
        *(code **)(param_1 + 0x3c) = FUN_00038678;
    }
    if (*(int *)(param_1 + 0x4c) == 0) {
        *(undefined **)(param_1 + 0x4c) = &DAT_0002aa44;
    }
    if (*(int *)(param_1 + 0x50) == 0) {
        *(undefined **)(param_1 + 0x50) = &DAT_0002aa44;
    }
    if (*(int *)(param_1 + 0x48) == 0) {
        *(undefined1 **)(param_1 + 0x48) = &LAB_0002aa4c;
    }
    if (*(int *)(param_1 + 0x60) == 0) {
        *(undefined1 **)(param_1 + 0x60) = &LAB_0002aa74;
    }
    if (*(double *)(param_1 + 0x68) == 0.0) {
        *(undefined4 *)(param_1 + 0x68) = 0;
        *(undefined4 *)(param_1 + 0x6c) = 0x3ff00000;
    }
    return;
}

undefined4 FUN_0003eee8(int *param_1)

{
    int iVar1;
    int iVar2;
    size_t sVar3;
    int iVar4;
    time_t tVar5;
    void *pvVar6;
    int *piVar7;
    uint uVar8;
    undefined4 uVar9;
    uint uVar10;
    uint uVar11;
    byte *pbVar12;
    uint uVar13;
    undefined4 *puVar14;
    int iVar15;
    byte *pbVar16;
    int iVar17;
    byte *pbVar18;
    undefined4 *puVar19;
    uint uVar20;
    uint uStack_40;

    param_1[8] = 0;
    iVar1 = pthread_rwlock_wrlock((pthread_rwlock_t *)&DAT_0007680c);
    iVar2 = DAT_0007346c;
    if (iVar1 == 0) {
        *param_1 = DAT_0006a738;
        *(int **)(iVar2 + DAT_0006a738 * 4) = param_1;
        DAT_0006a738 = DAT_0006a738 + 1;
        iVar2 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_0007680c);
        if (iVar2 == 0) {
            (*DAT_00067ed8)();
            if (DAT_0007347c == '\0') {
                DAT_00075588 = param_1[0x25] + DAT_00075588;
            } else {
                DAT_0006a73c = param_1[0x25] + DAT_0006a73c;
            }
            iVar2 = pthread_rwlock_init((pthread_rwlock_t *)(param_1 + 0x50),
                                        (pthread_rwlockattr_t *)0x0);
            if (iVar2 == 0) {
                param_1[0x58] = 0;
                return 0;
            }
            iVar2 = FUN_0002eeb8("enable_device", 0x2bf1);
            uVar13 = 0x9e3779b9;
            pbVar12 = *(byte **)(*(int *)(iVar2 + 4) + 8);
            sVar3 = strlen((char *)pbVar12);
            uVar10 = 0xfeedbeef;
            uVar8 = uVar13;
            pbVar16 = pbVar12;
            for (uVar20 = sVar3; 0xb < uVar20; uVar20 = uVar20 - 0xc) {
                iVar1 = (uint)pbVar16[6] * 0x10000 + (uint)pbVar16[5] * 0x100 +
                        (uint)pbVar16[4] + (uint)pbVar16[7] * 0x1000000 + uVar8;
                uVar10 = (uint)pbVar16[10] * 0x10000 +
                         (uint)pbVar16[9] * 0x100 + (uint)pbVar16[8] +
                         (uint)pbVar16[0xb] * 0x1000000 + uVar10;
                uVar8 =
                    ((((uint)pbVar16[2] * 0x10000 + (uint)pbVar16[1] * 0x100 +
                       (uint)*pbVar16 + (uint)pbVar16[3] * 0x1000000) -
                      iVar1) -
                     uVar10) +
                        uVar13 ^
                    uVar10 >> 0xd;
                uVar13 = (iVar1 - uVar10) - uVar8 ^ uVar8 << 8;
                uVar11 = (uVar10 - uVar8) - uVar13 ^ uVar13 >> 0xd;
                uVar10 = (uVar8 - uVar13) - uVar11 ^ uVar11 >> 0xc;
                uVar8 = (uVar13 - uVar11) - uVar10 ^ uVar10 << 0x10;
                uVar11 = (uVar11 - uVar10) - uVar8 ^ uVar8 >> 5;
                uVar13 = (uVar10 - uVar8) - uVar11 ^ uVar11 >> 3;
                uVar8 = (uVar8 - uVar11) - uVar13 ^ uVar13 << 10;
                uVar10 = (uVar11 - uVar13) - uVar8 ^ uVar8 >> 0xf;
                pbVar16 = pbVar16 + 0xc;
            }
            uVar10 = sVar3 + uVar10;
            switch (uVar20) {
            case 0xb:
                uVar10 = uVar10 + (uint)pbVar16[10] * 0x1000000;
            case 10:
                uVar10 = uVar10 + (uint)pbVar16[9] * 0x10000;
            case 9:
                uVar10 = uVar10 + (uint)pbVar16[8] * 0x100;
            case 8:
                uVar8 = uVar8 + (uint)pbVar16[7] * 0x1000000;
            case 7:
                uVar8 = uVar8 + (uint)pbVar16[6] * 0x10000;
            case 6:
                uVar8 = uVar8 + (uint)pbVar16[5] * 0x100;
            case 5:
                uVar8 = uVar8 + pbVar16[4];
            case 4:
                uVar13 = uVar13 + (uint)pbVar16[3] * 0x1000000;
            case 3:
                uVar13 = uVar13 + (uint)pbVar16[2] * 0x10000;
            case 2:
                uVar13 = uVar13 + (uint)pbVar16[1] * 0x100;
            case 1:
                uVar13 = uVar13 + *pbVar16;
            }
            uVar13 = (uVar13 - uVar8) - uVar10 ^ uVar10 >> 0xd;
            uVar8 = (uVar8 - uVar10) - uVar13 ^ uVar13 << 8;
            uVar20 = (uVar10 - uVar13) - uVar8 ^ uVar8 >> 0xd;
            uVar10 = (uVar13 - uVar8) - uVar20 ^ uVar20 >> 0xc;
            uVar13 = (uVar8 - uVar20) - uVar10 ^ uVar10 << 0x10;
            uVar20 = (uVar20 - uVar10) - uVar13 ^ uVar13 >> 5;
            uVar8 = (uVar10 - uVar13) - uVar20 ^ uVar20 >> 3;
            uVar13 = (uVar13 - uVar20) - uVar8 ^ uVar8 << 10;
            uVar13 = (uVar20 - uVar8) - uVar13 ^ uVar13 >> 0xf;
            if (DAT_0006a740 != (byte *)0x0) {
                piVar7 = *(int **)(DAT_0006a740 + 8);
                iVar1 = *(int *)(*piVar7 + (piVar7[1] - 1U & uVar13) * 0xc);
                if (iVar1 != 0) {
                    iVar17 = piVar7[5];
                    do {
                        iVar1 = iVar1 - iVar17;
                        if (iVar1 == 0)
                            break;
                        if (((*(uint *)(iVar1 + 0x24) == uVar13) &&
                             (*(size_t *)(iVar1 + 0x20) == sVar3)) &&
                            (iVar4 = memcmp(*(void **)(iVar1 + 0x1c), pbVar12,
                                            sVar3),
                             iVar4 == 0)) {
                            iVar17 = *(int *)(iVar1 + 4) + 1;
                            *(int *)(iVar1 + 4) = iVar17;
                            *(int *)(iVar2 + 8) = iVar17;
                            goto LAB_0003f2b0;
                        }
                        iVar1 = *(int *)(iVar1 + 0x18);
                    } while (iVar1 != 0);
                }
            }
            pbVar12 =
                (byte *)FUN_000229bc(0x28, "cgminer.c", "add_cgpu", 0x2c13);
            FUN_000254e8(pbVar12, *(undefined4 *)(*(int *)(iVar2 + 4) + 8), 4,
                         "cgminer.c", "add_cgpu", 0x2c14);
            pbVar12[4] = 0;
            pbVar12[5] = 0;
            pbVar12[6] = 0;
            pbVar12[7] = 0;
            *(undefined4 *)(iVar2 + 8) = 0;
            sVar3 = strlen((char *)pbVar12);
            uVar13 = 0x9e3779b9;
            uVar10 = 0xfeedbeef;
            uVar8 = uVar13;
            pbVar16 = pbVar12;
            for (uVar20 = sVar3; 0xb < uVar20; uVar20 = uVar20 - 0xc) {
                iVar1 = (uint)pbVar16[6] * 0x10000 + (uint)pbVar16[5] * 0x100 +
                        (uint)pbVar16[4] + (uint)pbVar16[7] * 0x1000000 + uVar8;
                uVar10 = (uint)pbVar16[10] * 0x10000 +
                         (uint)pbVar16[9] * 0x100 + (uint)pbVar16[8] +
                         (uint)pbVar16[0xb] * 0x1000000 + uVar10;
                uVar8 =
                    ((((uint)pbVar16[2] * 0x10000 + (uint)pbVar16[1] * 0x100 +
                       (uint)*pbVar16 + (uint)pbVar16[3] * 0x1000000) -
                      iVar1) -
                     uVar10) +
                        uVar13 ^
                    uVar10 >> 0xd;
                uVar13 = (iVar1 - uVar10) - uVar8 ^ uVar8 << 8;
                uVar10 = (uVar10 - uVar8) - uVar13 ^ uVar13 >> 0xd;
                uVar11 = (uVar8 - uVar13) - uVar10 ^ uVar10 >> 0xc;
                uVar8 = (uVar13 - uVar10) - uVar11 ^ uVar11 << 0x10;
                uVar10 = (uVar10 - uVar11) - uVar8 ^ uVar8 >> 5;
                uVar13 = (uVar11 - uVar8) - uVar10 ^ uVar10 >> 3;
                uVar8 = (uVar8 - uVar10) - uVar13 ^ uVar13 << 10;
                uVar10 = (uVar10 - uVar13) - uVar8 ^ uVar8 >> 0xf;
                pbVar16 = pbVar16 + 0xc;
            }
            uVar10 = sVar3 + uVar10;
            switch (uVar20) {
            case 0xb:
                uVar10 = uVar10 + (uint)pbVar16[10] * 0x1000000;
            case 10:
                uVar10 = uVar10 + (uint)pbVar16[9] * 0x10000;
            case 9:
                uVar10 = uVar10 + (uint)pbVar16[8] * 0x100;
            case 8:
                uVar8 = uVar8 + (uint)pbVar16[7] * 0x1000000;
            case 7:
                uVar8 = uVar8 + (uint)pbVar16[6] * 0x10000;
            case 6:
                uVar8 = uVar8 + (uint)pbVar16[5] * 0x100;
            case 5:
                uVar8 = uVar8 + pbVar16[4];
            case 4:
                uVar13 = uVar13 + (uint)pbVar16[3] * 0x1000000;
            case 3:
                uVar13 = uVar13 + (uint)pbVar16[2] * 0x10000;
            case 2:
                uVar13 = uVar13 + (uint)pbVar16[1] * 0x100;
            case 1:
                uVar13 = uVar13 + *pbVar16;
            default:
                *(byte **)(pbVar12 + 0x1c) = pbVar12;
                uVar20 = (uVar13 - uVar8) - uVar10 ^ uVar10 >> 0xd;
                uVar8 = (uVar8 - uVar10) - uVar20 ^ uVar20 << 8;
                uVar13 = (uVar10 - uVar20) - uVar8 ^ uVar8 >> 0xd;
                uVar10 = (uVar20 - uVar8) - uVar13 ^ uVar13 >> 0xc;
                uVar8 = (uVar8 - uVar13) - uVar10 ^ uVar10 << 0x10;
                uVar13 = (uVar13 - uVar10) - uVar8 ^ uVar8 >> 5;
                uVar10 = (uVar10 - uVar8) - uVar13 ^ uVar13 >> 3;
                uVar8 = (uVar8 - uVar13) - uVar10 ^ uVar10 << 10;
                puVar14 =
                    (undefined4 *)((uVar13 - uVar10) - uVar8 ^ uVar8 >> 0xf);
                *(undefined4 **)(pbVar12 + 0x24) = puVar14;
                sVar3 = strlen((char *)pbVar12);
                pbVar16 = DAT_0006a740;
                *(size_t *)(pbVar12 + 0x20) = sVar3;
                if (pbVar16 == (byte *)0x0)
                    goto LAB_0003f91c;
                uVar9 = *(undefined4 *)(pbVar16 + 8);
                pbVar12[0x10] = 0;
                pbVar12[0x11] = 0;
                pbVar12[0x12] = 0;
                pbVar12[0x13] = 0;
                pbVar18 = pbVar12 + 8;
                *(undefined4 *)(pbVar12 + 8) = uVar9;
                *(int *)(pbVar12 + 0xc) =
                    *(int *)(*(int *)(pbVar16 + 8) + 0x10) -
                    *(int *)(*(int *)(pbVar16 + 8) + 0x14);
                *(byte **)(*(int *)(*(int *)(pbVar16 + 8) + 0x10) + 8) =
                    pbVar12;
                *(byte **)(*(int *)(pbVar16 + 8) + 0x10) = pbVar18;
            }
            do {
                *(int *)(*(int *)(pbVar16 + 8) + 0xc) =
                    *(int *)(*(int *)(pbVar16 + 8) + 0xc) + 1;
                iVar1 =
                    ((*(int **)(pbVar16 + 8))[1] - 1U & (uint)puVar14) * 0xc;
                iVar17 = **(int **)(pbVar16 + 8) + iVar1;
                *(int *)(iVar17 + 4) = *(int *)(iVar17 + 4) + 1;
                uVar9 = *(undefined4 *)(**(int **)(pbVar16 + 8) + iVar1);
                pbVar12[0x14] = 0;
                pbVar12[0x15] = 0;
                pbVar12[0x16] = 0;
                pbVar12[0x17] = 0;
                *(undefined4 *)(pbVar12 + 0x18) = uVar9;
                iVar17 = **(int **)(pbVar16 + 8);
                if (*(int *)(iVar17 + iVar1) != 0) {
                    *(byte **)(*(int *)(iVar17 + iVar1) + 0xc) = pbVar18;
                    iVar17 = **(int **)(pbVar16 + 8);
                }
                *(byte **)(iVar17 + iVar1) = pbVar18;
                if (((uint)((*(int *)(**(int **)(pbVar16 + 8) + iVar1 + 8) +
                             1) *
                            10) <=
                     *(uint *)(**(int **)(pbVar16 + 8) + iVar1 + 4)) &&
                    (*(int *)(*(int *)(pbVar12 + 8) + 0x24) != 1)) {
                    pvVar6 =
                        calloc(*(int *)(*(int *)(pbVar12 + 8) + 4) * 0x18, 1);
                    if (pvVar6 == (void *)0x0) {
                    LAB_0003f9d4:
                        /* WARNING: Subroutine does not return */
                        exit(-1);
                    }
                    iVar1 = *(int *)(pbVar12 + 8);
                    iVar17 = 0;
                    *(uint *)(iVar1 + 0x18) =
                        (uint)((*(int *)(iVar1 + 4) * 2 - 1U &
                                *(uint *)(iVar1 + 0xc)) != 0) +
                        (*(uint *)(iVar1 + 0xc) >>
                         (*(int *)(iVar1 + 8) + 1U & 0xff));
                    *(undefined4 *)(*(int *)(pbVar12 + 8) + 0x1c) = 0;
                    piVar7 = *(int **)(pbVar12 + 8);
                    uVar13 = piVar7[1];
                    if (uVar13 != 0) {
                        uStack_40 = 0;
                        do {
                            iVar1 = *(int *)(*piVar7 + iVar17);
                            if (iVar1 != 0) {
                                while (true) {
                                    iVar15 = *(int *)(iVar1 + 0x10);
                                    uVar8 = uVar13 * 2 - 1 &
                                            *(uint *)(iVar1 + 0x1c);
                                    uVar13 = *(int *)((int)pvVar6 +
                                                      uVar8 * 0xc + 4) +
                                             1;
                                    *(uint *)((int)pvVar6 + uVar8 * 0xc + 4) =
                                        uVar13;
                                    iVar4 = *(int *)(pbVar12 + 8);
                                    if (*(uint *)(iVar4 + 0x18) < uVar13) {
                                        *(int *)(iVar4 + 0x1c) =
                                            *(int *)(iVar4 + 0x1c) + 1;
                                        uVar9 = FUN_000498d8(
                                            *(undefined4 *)((int)pvVar6 +
                                                            uVar8 * 0xc + 4),
                                            *(undefined4 *)(*(int *)(pbVar12 +
                                                                     8) +
                                                            0x18));
                                        *(undefined4 *)((int)pvVar6 +
                                                        uVar8 * 0xc + 8) =
                                            uVar9;
                                    }
                                    *(undefined4 *)(iVar1 + 0xc) = 0;
                                    *(undefined4 *)(iVar1 + 0x10) =
                                        *(undefined4 *)((int)pvVar6 +
                                                        uVar8 * 0xc);
                                    iVar4 = *(int *)((int)pvVar6 + uVar8 * 0xc);
                                    if (iVar4 != 0) {
                                        *(int *)(iVar4 + 0xc) = iVar1;
                                    }
                                    *(int *)((int)pvVar6 + uVar8 * 0xc) = iVar1;
                                    piVar7 = *(int **)(pbVar12 + 8);
                                    if (iVar15 == 0)
                                        break;
                                    uVar13 = piVar7[1];
                                    iVar1 = iVar15;
                                }
                                uVar13 = piVar7[1];
                            }
                            iVar17 = iVar17 + 0xc;
                            uStack_40 = uStack_40 + 1;
                        } while (uStack_40 < uVar13);
                    }
                    free((void *)*piVar7);
                    *(int *)(*(int *)(pbVar12 + 8) + 4) =
                        *(int *)(*(int *)(pbVar12 + 8) + 4) << 1;
                    *(int *)(*(int *)(pbVar12 + 8) + 8) =
                        *(int *)(*(int *)(pbVar12 + 8) + 8) + 1;
                    **(undefined4 **)(pbVar12 + 8) = pvVar6;
                    iVar1 = *(int *)(pbVar12 + 8);
                    if (*(uint *)(iVar1 + 0xc) >> 1 < *(uint *)(iVar1 + 0x1c)) {
                        iVar17 = *(int *)(iVar1 + 0x20) + 1;
                    } else {
                        iVar17 = 0;
                    }
                    *(int *)(iVar1 + 0x20) = iVar17;
                    if (1 < *(uint *)(*(int *)(pbVar12 + 8) + 0x20)) {
                        *(undefined4 *)(*(int *)(pbVar12 + 8) + 0x24) = 1;
                    }
                }
            LAB_0003f2b0:
                iVar1 =
                    pthread_rwlock_wrlock((pthread_rwlock_t *)&DAT_0007680c);
                if (iVar1 != 0) {
                    FUN_0002ef84("add_cgpu", 0x2c19);
                LAB_0003f904:
                    /* WARNING: Subroutine does not return */
                    FUN_0002fb24("add_cgpu", 0x2c1b);
                }
                puVar14 = &DAT_000755c0;
                pbVar16 = (byte *)&DAT_0007346c;
                DAT_0007346c = FUN_00022ad4(
                    DAT_0007346c, (DAT_000755c0 + DAT_0006a744 + 2) * 4,
                    "cgminer.c", "add_cgpu", 0x2c1a);
                iVar1 =
                    pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_0007680c);
                if (iVar1 != 0)
                    goto LAB_0003f904;
                pbVar12 = (byte *)&DAT_00067ed8;
                (*DAT_00067ed8)();
                iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_000766c4);
                if (iVar1 == 0) {
                    tVar5 = time((time_t *)0x0);
                    *(time_t *)(iVar2 + 0xe8) = tVar5;
                    iVar1 =
                        pthread_mutex_unlock((pthread_mutex_t *)&DAT_000766c4);
                    if (iVar1 != 0) {
                        /* WARNING: Subroutine does not return */
                        FUN_0002f03c("add_cgpu", 0x2c1f);
                    }
                    (*DAT_00067ed8)();
                    if (DAT_0007347c == '\0') {
                        iVar1 = DAT_000755c0;
                        DAT_000755c0 = DAT_000755c0 + 1;
                    } else {
                        iVar1 = DAT_0006a744 + DAT_000755c0;
                        DAT_0006a744 = DAT_0006a744 + 1;
                    }
                    *(int *)(DAT_0007346c + iVar1 * 4) = iVar2;
                    if (DAT_0006a748 < DAT_000755c0 - DAT_00074498) {
                        DAT_0006a748 = DAT_000755c0 - DAT_00074498;
                    }
                    return 1;
                }
                FUN_0002efe0("add_cgpu", 0x2c1d);
            LAB_0003f91c:
                *(byte **)(pbVar12 + 0x10) = pbVar16;
                *(byte **)(pbVar12 + 0xc) = pbVar16;
                DAT_0006a740 = pbVar12;
                pvVar6 = malloc(0x2c);
                *(void **)(pbVar12 + 8) = pvVar6;
                if (pvVar6 == (void *)0x0)
                    goto LAB_0003f9d4;
                memset(pvVar6, (int)pbVar16, 0x2c);
                pbVar18 = pbVar12 + 8;
                *(byte **)(*(int *)pbVar18 + 0x10) = pbVar18;
                *(undefined4 *)(*(int *)(pbVar12 + 8) + 4) = 0x20;
                *(undefined4 *)(*(int *)(pbVar12 + 8) + 8) = 5;
                *(undefined4 *)(*(int *)(pbVar12 + 8) + 0x14) = 8;
                puVar19 = *(undefined4 **)(pbVar12 + 8);
                pvVar6 = malloc(0x180);
                *puVar19 = pvVar6;
                if ((void *)**(undefined4 **)(pbVar12 + 8) == (void *)0x0)
                    goto LAB_0003f9d4;
                memset((void *)**(undefined4 **)(pbVar12 + 8), (int)pbVar16,
                       0x180);
                *(undefined4 *)(*(int *)(pbVar12 + 8) + 0x28) = 0xa0111fe1;
                pbVar16 = pbVar12;
            } while (true);
        }
    } else {
        FUN_0002ef84("enable_device", 0x2be4);
    }
    /* WARNING: Subroutine does not return */
    FUN_0002fb24("enable_device", 0x2be6);
}

undefined4 FUN_0003efd4(int param_1)

{
    size_t sVar1;
    int iVar2;
    time_t tVar3;
    void *pvVar4;
    int *piVar5;
    uint uVar6;
    undefined4 uVar7;
    uint uVar8;
    uint uVar9;
    byte *pbVar10;
    uint uVar11;
    int iVar12;
    undefined4 *puVar13;
    int iVar14;
    byte *pbVar15;
    int iVar16;
    byte *pbVar17;
    undefined4 *puVar18;
    uint uVar19;
    uint local_30;

    uVar11 = 0x9e3779b9;
    pbVar10 = *(byte **)(*(int *)(param_1 + 4) + 8);
    sVar1 = strlen((char *)pbVar10);
    uVar8 = 0xfeedbeef;
    uVar6 = uVar11;
    pbVar15 = pbVar10;
    for (uVar19 = sVar1; 0xb < uVar19; uVar19 = uVar19 - 0xc) {
        iVar12 = (uint)pbVar15[6] * 0x10000 + (uint)pbVar15[5] * 0x100 +
                 (uint)pbVar15[4] + (uint)pbVar15[7] * 0x1000000 + uVar6;
        uVar8 = (uint)pbVar15[10] * 0x10000 + (uint)pbVar15[9] * 0x100 +
                (uint)pbVar15[8] + (uint)pbVar15[0xb] * 0x1000000 + uVar8;
        uVar6 = ((((uint)pbVar15[2] * 0x10000 + (uint)pbVar15[1] * 0x100 +
                   (uint)*pbVar15 + (uint)pbVar15[3] * 0x1000000) -
                  iVar12) -
                 uVar8) +
                    uVar11 ^
                uVar8 >> 0xd;
        uVar11 = (iVar12 - uVar8) - uVar6 ^ uVar6 << 8;
        uVar9 = (uVar8 - uVar6) - uVar11 ^ uVar11 >> 0xd;
        uVar8 = (uVar6 - uVar11) - uVar9 ^ uVar9 >> 0xc;
        uVar6 = (uVar11 - uVar9) - uVar8 ^ uVar8 << 0x10;
        uVar9 = (uVar9 - uVar8) - uVar6 ^ uVar6 >> 5;
        uVar11 = (uVar8 - uVar6) - uVar9 ^ uVar9 >> 3;
        uVar6 = (uVar6 - uVar9) - uVar11 ^ uVar11 << 10;
        uVar8 = (uVar9 - uVar11) - uVar6 ^ uVar6 >> 0xf;
        pbVar15 = pbVar15 + 0xc;
    }
    uVar8 = sVar1 + uVar8;
    switch (uVar19) {
    case 0xb:
        uVar8 = uVar8 + (uint)pbVar15[10] * 0x1000000;
    case 10:
        uVar8 = uVar8 + (uint)pbVar15[9] * 0x10000;
    case 9:
        uVar8 = uVar8 + (uint)pbVar15[8] * 0x100;
    case 8:
        uVar6 = uVar6 + (uint)pbVar15[7] * 0x1000000;
    case 7:
        uVar6 = uVar6 + (uint)pbVar15[6] * 0x10000;
    case 6:
        uVar6 = uVar6 + (uint)pbVar15[5] * 0x100;
    case 5:
        uVar6 = uVar6 + pbVar15[4];
    case 4:
        uVar11 = uVar11 + (uint)pbVar15[3] * 0x1000000;
    case 3:
        uVar11 = uVar11 + (uint)pbVar15[2] * 0x10000;
    case 2:
        uVar11 = uVar11 + (uint)pbVar15[1] * 0x100;
    case 1:
        uVar11 = uVar11 + *pbVar15;
    }
    uVar11 = (uVar11 - uVar6) - uVar8 ^ uVar8 >> 0xd;
    uVar6 = (uVar6 - uVar8) - uVar11 ^ uVar11 << 8;
    uVar19 = (uVar8 - uVar11) - uVar6 ^ uVar6 >> 0xd;
    uVar8 = (uVar11 - uVar6) - uVar19 ^ uVar19 >> 0xc;
    uVar11 = (uVar6 - uVar19) - uVar8 ^ uVar8 << 0x10;
    uVar19 = (uVar19 - uVar8) - uVar11 ^ uVar11 >> 5;
    uVar6 = (uVar8 - uVar11) - uVar19 ^ uVar19 >> 3;
    uVar11 = (uVar11 - uVar19) - uVar6 ^ uVar6 << 10;
    uVar11 = (uVar19 - uVar6) - uVar11 ^ uVar11 >> 0xf;
    if (DAT_0006a740 != (byte *)0x0) {
        piVar5 = *(int **)(DAT_0006a740 + 8);
        iVar12 = *(int *)(*piVar5 + (piVar5[1] - 1U & uVar11) * 0xc);
        if (iVar12 != 0) {
            iVar16 = piVar5[5];
            do {
                iVar12 = iVar12 - iVar16;
                if (iVar12 == 0)
                    break;
                if (((*(uint *)(iVar12 + 0x24) == uVar11) &&
                     (*(size_t *)(iVar12 + 0x20) == sVar1)) &&
                    (iVar2 = memcmp(*(void **)(iVar12 + 0x1c), pbVar10, sVar1),
                     iVar2 == 0)) {
                    iVar16 = *(int *)(iVar12 + 4) + 1;
                    *(int *)(iVar12 + 4) = iVar16;
                    *(int *)(param_1 + 8) = iVar16;
                    goto LAB_0003f2b0;
                }
                iVar12 = *(int *)(iVar12 + 0x18);
            } while (iVar12 != 0);
        }
    }
    pbVar10 = (byte *)FUN_000229bc(0x28, "cgminer.c", "add_cgpu", 0x2c13);
    FUN_000254e8(pbVar10, *(undefined4 *)(*(int *)(param_1 + 4) + 8), 4,
                 "cgminer.c", "add_cgpu", 0x2c14);
    pbVar10[4] = 0;
    pbVar10[5] = 0;
    pbVar10[6] = 0;
    pbVar10[7] = 0;
    *(undefined4 *)(param_1 + 8) = 0;
    sVar1 = strlen((char *)pbVar10);
    uVar11 = 0x9e3779b9;
    uVar8 = 0xfeedbeef;
    uVar6 = uVar11;
    pbVar15 = pbVar10;
    for (uVar19 = sVar1; 0xb < uVar19; uVar19 = uVar19 - 0xc) {
        iVar12 = (uint)pbVar15[6] * 0x10000 + (uint)pbVar15[5] * 0x100 +
                 (uint)pbVar15[4] + (uint)pbVar15[7] * 0x1000000 + uVar6;
        uVar8 = (uint)pbVar15[10] * 0x10000 + (uint)pbVar15[9] * 0x100 +
                (uint)pbVar15[8] + (uint)pbVar15[0xb] * 0x1000000 + uVar8;
        uVar6 = ((((uint)pbVar15[2] * 0x10000 + (uint)pbVar15[1] * 0x100 +
                   (uint)*pbVar15 + (uint)pbVar15[3] * 0x1000000) -
                  iVar12) -
                 uVar8) +
                    uVar11 ^
                uVar8 >> 0xd;
        uVar11 = (iVar12 - uVar8) - uVar6 ^ uVar6 << 8;
        uVar8 = (uVar8 - uVar6) - uVar11 ^ uVar11 >> 0xd;
        uVar9 = (uVar6 - uVar11) - uVar8 ^ uVar8 >> 0xc;
        uVar6 = (uVar11 - uVar8) - uVar9 ^ uVar9 << 0x10;
        uVar8 = (uVar8 - uVar9) - uVar6 ^ uVar6 >> 5;
        uVar11 = (uVar9 - uVar6) - uVar8 ^ uVar8 >> 3;
        uVar6 = (uVar6 - uVar8) - uVar11 ^ uVar11 << 10;
        uVar8 = (uVar8 - uVar11) - uVar6 ^ uVar6 >> 0xf;
        pbVar15 = pbVar15 + 0xc;
    }
    uVar8 = sVar1 + uVar8;
    switch (uVar19) {
    case 0xb:
        uVar8 = uVar8 + (uint)pbVar15[10] * 0x1000000;
    case 10:
        uVar8 = uVar8 + (uint)pbVar15[9] * 0x10000;
    case 9:
        uVar8 = uVar8 + (uint)pbVar15[8] * 0x100;
    case 8:
        uVar6 = uVar6 + (uint)pbVar15[7] * 0x1000000;
    case 7:
        uVar6 = uVar6 + (uint)pbVar15[6] * 0x10000;
    case 6:
        uVar6 = uVar6 + (uint)pbVar15[5] * 0x100;
    case 5:
        uVar6 = uVar6 + pbVar15[4];
    case 4:
        uVar11 = uVar11 + (uint)pbVar15[3] * 0x1000000;
    case 3:
        uVar11 = uVar11 + (uint)pbVar15[2] * 0x10000;
    case 2:
        uVar11 = uVar11 + (uint)pbVar15[1] * 0x100;
    case 1:
        uVar11 = uVar11 + *pbVar15;
    default:
        *(byte **)(pbVar10 + 0x1c) = pbVar10;
        uVar19 = (uVar11 - uVar6) - uVar8 ^ uVar8 >> 0xd;
        uVar6 = (uVar6 - uVar8) - uVar19 ^ uVar19 << 8;
        uVar11 = (uVar8 - uVar19) - uVar6 ^ uVar6 >> 0xd;
        uVar8 = (uVar19 - uVar6) - uVar11 ^ uVar11 >> 0xc;
        uVar6 = (uVar6 - uVar11) - uVar8 ^ uVar8 << 0x10;
        uVar11 = (uVar11 - uVar8) - uVar6 ^ uVar6 >> 5;
        uVar8 = (uVar8 - uVar6) - uVar11 ^ uVar11 >> 3;
        uVar6 = (uVar6 - uVar11) - uVar8 ^ uVar8 << 10;
        puVar13 = (undefined4 *)((uVar11 - uVar8) - uVar6 ^ uVar6 >> 0xf);
        *(undefined4 **)(pbVar10 + 0x24) = puVar13;
        sVar1 = strlen((char *)pbVar10);
        pbVar15 = DAT_0006a740;
        *(size_t *)(pbVar10 + 0x20) = sVar1;
        if (pbVar15 == (byte *)0x0)
            goto LAB_0003f91c;
        uVar7 = *(undefined4 *)(pbVar15 + 8);
        pbVar10[0x10] = 0;
        pbVar10[0x11] = 0;
        pbVar10[0x12] = 0;
        pbVar10[0x13] = 0;
        pbVar17 = pbVar10 + 8;
        *(undefined4 *)(pbVar10 + 8) = uVar7;
        *(int *)(pbVar10 + 0xc) = *(int *)(*(int *)(pbVar15 + 8) + 0x10) -
                                  *(int *)(*(int *)(pbVar15 + 8) + 0x14);
        *(byte **)(*(int *)(*(int *)(pbVar15 + 8) + 0x10) + 8) = pbVar10;
        *(byte **)(*(int *)(pbVar15 + 8) + 0x10) = pbVar17;
    }
    do {
        *(int *)(*(int *)(pbVar15 + 8) + 0xc) =
            *(int *)(*(int *)(pbVar15 + 8) + 0xc) + 1;
        iVar12 = ((*(int **)(pbVar15 + 8))[1] - 1U & (uint)puVar13) * 0xc;
        iVar16 = **(int **)(pbVar15 + 8) + iVar12;
        *(int *)(iVar16 + 4) = *(int *)(iVar16 + 4) + 1;
        uVar7 = *(undefined4 *)(**(int **)(pbVar15 + 8) + iVar12);
        pbVar10[0x14] = 0;
        pbVar10[0x15] = 0;
        pbVar10[0x16] = 0;
        pbVar10[0x17] = 0;
        *(undefined4 *)(pbVar10 + 0x18) = uVar7;
        iVar16 = **(int **)(pbVar15 + 8);
        if (*(int *)(iVar16 + iVar12) != 0) {
            *(byte **)(*(int *)(iVar16 + iVar12) + 0xc) = pbVar17;
            iVar16 = **(int **)(pbVar15 + 8);
        }
        *(byte **)(iVar16 + iVar12) = pbVar17;
        if (((uint)((*(int *)(**(int **)(pbVar15 + 8) + iVar12 + 8) + 1) *
                    10) <= *(uint *)(**(int **)(pbVar15 + 8) + iVar12 + 4)) &&
            (*(int *)(*(int *)(pbVar10 + 8) + 0x24) != 1)) {
            pvVar4 = calloc(*(int *)(*(int *)(pbVar10 + 8) + 4) * 0x18, 1);
            if (pvVar4 == (void *)0x0) {
            LAB_0003f9d4:
                /* WARNING: Subroutine does not return */
                exit(-1);
            }
            iVar12 = *(int *)(pbVar10 + 8);
            iVar16 = 0;
            *(uint *)(iVar12 + 0x18) =
                (uint)((*(int *)(iVar12 + 4) * 2 - 1U &
                        *(uint *)(iVar12 + 0xc)) != 0) +
                (*(uint *)(iVar12 + 0xc) >> (*(int *)(iVar12 + 8) + 1U & 0xff));
            *(undefined4 *)(*(int *)(pbVar10 + 8) + 0x1c) = 0;
            piVar5 = *(int **)(pbVar10 + 8);
            uVar11 = piVar5[1];
            if (uVar11 != 0) {
                local_30 = 0;
                do {
                    iVar12 = *(int *)(*piVar5 + iVar16);
                    if (iVar12 != 0) {
                        while (true) {
                            iVar14 = *(int *)(iVar12 + 0x10);
                            uVar6 = uVar11 * 2 - 1 & *(uint *)(iVar12 + 0x1c);
                            uVar11 =
                                *(int *)((int)pvVar4 + uVar6 * 0xc + 4) + 1;
                            *(uint *)((int)pvVar4 + uVar6 * 0xc + 4) = uVar11;
                            iVar2 = *(int *)(pbVar10 + 8);
                            if (*(uint *)(iVar2 + 0x18) < uVar11) {
                                *(int *)(iVar2 + 0x1c) =
                                    *(int *)(iVar2 + 0x1c) + 1;
                                uVar7 = FUN_000498d8(
                                    *(undefined4 *)((int)pvVar4 + uVar6 * 0xc +
                                                    4),
                                    *(undefined4 *)(*(int *)(pbVar10 + 8) +
                                                    0x18));
                                *(undefined4 *)((int)pvVar4 + uVar6 * 0xc + 8) =
                                    uVar7;
                            }
                            *(undefined4 *)(iVar12 + 0xc) = 0;
                            *(undefined4 *)(iVar12 + 0x10) =
                                *(undefined4 *)((int)pvVar4 + uVar6 * 0xc);
                            iVar2 = *(int *)((int)pvVar4 + uVar6 * 0xc);
                            if (iVar2 != 0) {
                                *(int *)(iVar2 + 0xc) = iVar12;
                            }
                            *(int *)((int)pvVar4 + uVar6 * 0xc) = iVar12;
                            piVar5 = *(int **)(pbVar10 + 8);
                            if (iVar14 == 0)
                                break;
                            uVar11 = piVar5[1];
                            iVar12 = iVar14;
                        }
                        uVar11 = piVar5[1];
                    }
                    iVar16 = iVar16 + 0xc;
                    local_30 = local_30 + 1;
                } while (local_30 < uVar11);
            }
            free((void *)*piVar5);
            *(int *)(*(int *)(pbVar10 + 8) + 4) =
                *(int *)(*(int *)(pbVar10 + 8) + 4) << 1;
            *(int *)(*(int *)(pbVar10 + 8) + 8) =
                *(int *)(*(int *)(pbVar10 + 8) + 8) + 1;
            **(undefined4 **)(pbVar10 + 8) = pvVar4;
            iVar12 = *(int *)(pbVar10 + 8);
            if (*(uint *)(iVar12 + 0xc) >> 1 < *(uint *)(iVar12 + 0x1c)) {
                iVar16 = *(int *)(iVar12 + 0x20) + 1;
            } else {
                iVar16 = 0;
            }
            *(int *)(iVar12 + 0x20) = iVar16;
            if (1 < *(uint *)(*(int *)(pbVar10 + 8) + 0x20)) {
                *(undefined4 *)(*(int *)(pbVar10 + 8) + 0x24) = 1;
            }
        }
    LAB_0003f2b0:
        iVar12 = pthread_rwlock_wrlock((pthread_rwlock_t *)&DAT_0007680c);
        if (iVar12 != 0) {
            FUN_0002ef84("add_cgpu", 0x2c19);
        LAB_0003f904:
            /* WARNING: Subroutine does not return */
            FUN_0002fb24("add_cgpu", 0x2c1b);
        }
        puVar13 = &DAT_000755c0;
        pbVar15 = (byte *)&DAT_0007346c;
        DAT_0007346c =
            FUN_00022ad4(DAT_0007346c, (DAT_000755c0 + DAT_0006a744 + 2) * 4,
                         "cgminer.c", "add_cgpu", 0x2c1a);
        iVar12 = pthread_rwlock_unlock((pthread_rwlock_t *)&DAT_0007680c);
        if (iVar12 != 0)
            goto LAB_0003f904;
        pbVar10 = (byte *)&DAT_00067ed8;
        (*DAT_00067ed8)();
        iVar12 = pthread_mutex_lock((pthread_mutex_t *)&DAT_000766c4);
        if (iVar12 == 0) {
            tVar3 = time((time_t *)0x0);
            *(time_t *)(param_1 + 0xe8) = tVar3;
            iVar12 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_000766c4);
            if (iVar12 != 0) {
                /* WARNING: Subroutine does not return */
                FUN_0002f03c("add_cgpu", 0x2c1f);
            }
            (*DAT_00067ed8)();
            if (DAT_0007347c == '\0') {
                iVar12 = DAT_000755c0;
                DAT_000755c0 = DAT_000755c0 + 1;
            } else {
                iVar12 = DAT_0006a744 + DAT_000755c0;
                DAT_0006a744 = DAT_0006a744 + 1;
            }
            *(int *)(DAT_0007346c + iVar12 * 4) = param_1;
            if (DAT_0006a748 < DAT_000755c0 - DAT_00074498) {
                DAT_0006a748 = DAT_000755c0 - DAT_00074498;
            }
            return 1;
        }
        FUN_0002efe0("add_cgpu", 0x2c1d);
    LAB_0003f91c:
        *(byte **)(pbVar10 + 0x10) = pbVar15;
        *(byte **)(pbVar10 + 0xc) = pbVar15;
        DAT_0006a740 = pbVar10;
        pvVar4 = malloc(0x2c);
        *(void **)(pbVar10 + 8) = pvVar4;
        if (pvVar4 == (void *)0x0)
            goto LAB_0003f9d4;
        memset(pvVar4, (int)pbVar15, 0x2c);
        pbVar17 = pbVar10 + 8;
        *(byte **)(*(int *)pbVar17 + 0x10) = pbVar17;
        *(undefined4 *)(*(int *)(pbVar10 + 8) + 4) = 0x20;
        *(undefined4 *)(*(int *)(pbVar10 + 8) + 8) = 5;
        *(undefined4 *)(*(int *)(pbVar10 + 8) + 0x14) = 8;
        puVar18 = *(undefined4 **)(pbVar10 + 8);
        pvVar4 = malloc(0x180);
        *puVar18 = pvVar4;
        if ((void *)**(undefined4 **)(pbVar10 + 8) == (void *)0x0)
            goto LAB_0003f9d4;
        memset((void *)**(undefined4 **)(pbVar10 + 8), (int)pbVar15, 0x180);
        *(undefined4 *)(*(int *)(pbVar10 + 8) + 0x28) = 0xa0111fe1;
        pbVar15 = pbVar10;
    } while (true);
}

int FUN_0003f9e0(undefined4 param_1)

{
    int iVar1;

    iVar1 = FUN_000229bc(0x78, "cgminer.c", "copy_drv", 0x2c37);
    FUN_000254e8(iVar1, param_1, 0x78, "cgminer.c", "copy_drv", 0x2c38);
    *(undefined1 *)(iVar1 + 100) = 1;
    return iVar1;
}

void FUN_0003fa44(void)

{
    int iVar1;
    int *piVar2;
    char *pcVar3;
    sysinfo local_948;
    char acStack_908[256];
    char acStack_808[2048];

    iVar1 = sysinfo(&local_948);
    if (iVar1 != 0) {
        piVar2 = __errno_location();
        iVar1 = *piVar2;
        pcVar3 = strerror(iVar1);
        sprintf(acStack_908, "Failed to get sysinfo, errno:%u, reason:%s\n",
                iVar1, pcVar3);
        DAT_00073320 = time((time_t *)0x0);
        DAT_00074484 = DAT_00073320 + 1;
        return;
    }
    DAT_00074484 = local_948.uptime + 1;
    DAT_00073320 = local_948.uptime;
    sprintf(
        acStack_908,
        "set_start_time_point total_tv_start_sys=%ld total_tv_end_sys=%ld\n",
        local_948.uptime, DAT_00074484);
    if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
        (4 < DAT_00067db4)) {
        snprintf(acStack_808, 0x800, "%s", acStack_908);
        FUN_00020f58(5, acStack_808, 0);
    }
    return;
}

void FUN_0003fb54(void)

{
    FILE *__stream;
    size_t sVar1;
    char *pcVar2;
    char *pcVar3;
    char cVar4;
    char acStack_918[256];
    char acStack_818[2048];

    __stream = fopen64(DAT_00068de8, "rb");
    memset(acStack_918, 0, 0x100);
    if (__stream == (FILE *)0x0) {
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (2 < DAT_00067db4)) {
            snprintf(acStack_818, 0x800, "Open miner version file %s error",
                     DAT_00068de8);
            FUN_00020f58(3, acStack_818, 0);
            goto LAB_0003fd38;
        }
    } else {
        sVar1 = fread(acStack_918, 1, 0x100, __stream);
        if ((int)sVar1 < 1) {
            if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                (DAT_00067db4 < 3))
                goto LAB_0003fd9c;
            snprintf(acStack_818, 0x800, "Read miner version file %s error %d",
                     DAT_00068de8, sVar1);
            FUN_00020f58(3, acStack_818, 0);
        } else {
            pcVar2 = strchr(acStack_918, 10);
            if (pcVar2 == (char *)0x0) {
                strcpy(&DAT_0006a74c, acStack_918);
            } else {
                FUN_000254e8(&DAT_0006a74c, acStack_918,
                             (int)pcVar2 - (int)acStack_918, "cgminer.c",
                             "read_version_file", 0x2d1d);
                pcVar2 = stpcpy(acStack_918, pcVar2 + 1);
                pcVar3 = strchr(acStack_918, 10);
                if (pcVar3 == (char *)0x0) {
                    memcpy(&DAT_0006a84c, acStack_918,
                           (size_t)(pcVar2 + (1 - (int)acStack_918)));
                } else {
                    FUN_000254e8(&DAT_0006a84c, acStack_918,
                                 (int)pcVar3 - (int)acStack_918, "cgminer.c",
                                 "read_version_file", 0x2d26);
                }
            }
            sVar1 = strlen(&DAT_0006a74c);
            cVar4 = *(char *)((int)&DAT_0006a748 + sVar1 + 3);
            if (cVar4 == '\n') {
                *(undefined1 *)((int)&DAT_0006a748 + sVar1 + 3) = 0;
                sVar1 = strlen(&DAT_0006a74c);
                cVar4 = *(char *)((int)&DAT_0006a748 + sVar1 + 3);
            }
            if (cVar4 == '\r') {
                *(undefined1 *)((int)&DAT_0006a748 + sVar1 + 3) = 0;
            }
            sVar1 = strlen(&DAT_0006a84c);
            cVar4 = (&DAT_0006a84b)[sVar1];
            if (cVar4 == '\n') {
                (&DAT_0006a84b)[sVar1] = 0;
                sVar1 = strlen(&DAT_0006a84c);
                cVar4 = (&DAT_0006a84b)[sVar1];
            }
            if (cVar4 == '\r') {
                (&DAT_0006a84b)[sVar1] = 0;
            }
        }
    LAB_0003fd38:
        if ((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0'))
            goto LAB_0003fd58;
    }
LAB_0003fd9c:
    if (DAT_00067db4 < 3) {
        return;
    }
LAB_0003fd58:
    snprintf(acStack_818, 0x800, "Miner compile time: %s type: %s",
             &DAT_0006a74c, &DAT_0006a84c);
    FUN_00020f58(3, acStack_818, 0);
    return;
}

void FUN_0003fe74(void)

{
    int iVar1;
    char local_810[2052];

    if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
        (DAT_00067db4 < 5)) {
        if (DAT_00069174 == 0) {
        LAB_0003ff8c:
            iVar1 = pthread_create((pthread_t *)&DAT_00069174,
                                   (pthread_attr_t *)0x0, FUN_0003479c,
                                   (void *)0x0);
            if (iVar1 == 0) {
                return;
            }
            if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
                (DAT_00067db4 < 3)) {
                return;
            }
            builtin_strncpy(local_810, "Failed to create pool_change_thread",
                            0x24);
            FUN_00020f58(3, local_810, 0);
            return;
        }
    } else {
        snprintf(local_810, 0x800, "START %s", "load_default_config_new");
        FUN_00020f58(5, local_810, 0);
        if (DAT_00069174 == 0)
            goto LAB_0003ff8c;
        if ((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0'))
            goto LAB_0003ff08;
    }
    if (DAT_00067db4 < 3) {
        return;
    }
LAB_0003ff08:
    builtin_strncpy(local_810 + 0x24, "lease wait\n", 0xc);
    FUN_00020f58(3, local_810, 0);
    return;
}

char *FUN_0004002c(char *param_1, char *param_2)

{
    size_t sVar1;
    size_t sVar2;
    char *__s;

    sVar1 = strlen(param_1);
    sVar2 = strlen(param_2);
    __s = (char *)malloc(sVar1 + sVar2);
    sprintf(__s, param_1, param_2);
    return __s;
}

undefined4 FUN_00040068(undefined1 *param_1)

{
    *param_1 = 1;
    return 0;
}

undefined4 FUN_00040078(undefined1 *param_1)

{
    *param_1 = 0;
    return 0;
}

char *FUN_00040098(char *param_1, undefined1 *param_2)

{
    int iVar1;
    size_t sVar2;
    char *__s;

    iVar1 = strcasecmp(param_1, "yes");
    if ((iVar1 == 0) || (iVar1 = strcasecmp(param_1, "true"), iVar1 == 0)) {
        *param_2 = 1;
        return (char *)0x0;
    }
    iVar1 = strcasecmp(param_1, "no");
    if ((iVar1 != 0) && (iVar1 = strcasecmp(param_1, "false"), iVar1 != 0)) {
        sVar2 = strlen(param_1);
        __s = (char *)malloc(sVar2 + 0x16);
        sprintf(__s, "Invalid argument \'%s\'", param_1);
        return __s;
    }
    *param_2 = 0;
    return (char *)0x0;
}

void FUN_0004012c(undefined4 param_1, byte *param_2)

{
    int iVar1;

    iVar1 = FUN_00040098();
    if (iVar1 == 0) {
        *param_2 = *param_2 ^ 1;
    }
    return;
}

undefined4 FUN_0004014c(undefined4 param_1, undefined4 *param_2)

{
    *param_2 = param_1;
    return 0;
}

void FUN_00040158(char *param_1, float *param_2)

{
    int *piVar1;
    float fVar2;
    char *local_14;

    piVar1 = __errno_location();
    *piVar1 = 0;
    fVar2 = strtof(param_1, &local_14);
    *param_2 = fVar2;
    if ((*local_14 == '\0') && (*param_1 != '\0')) {
        if (*piVar1 != 0) {
            FUN_0004002c("\'%s\' is out of range", param_1);
            return;
        }
    } else {
        FUN_0004002c("\'%s\' is not a number", param_1);
    }
    return;
}

void FUN_000401e0(char *param_1, long *param_2)

{
    int *piVar1;
    long lVar2;
    char *local_14;

    piVar1 = __errno_location();
    *piVar1 = 0;
    lVar2 = strtol(param_1, &local_14, 0);
    *param_2 = lVar2;
    if ((*local_14 == '\0') && (*param_1 != '\0')) {
        if (*piVar1 != 0) {
            FUN_0004002c("\'%s\' is out of range", param_1);
            return;
        }
    } else {
        FUN_0004002c("\'%s\' is not a number", param_1);
    }
    return;
}

void FUN_00040268(undefined4 param_1, undefined4 *param_2)

{
    int iVar1;
    undefined4 local_c;

    iVar1 = FUN_000401e0(param_1, &local_c);
    if (iVar1 == 0) {
        *param_2 = local_c;
    }
    return;
}

void FUN_00040290(undefined4 param_1, int *param_2)

{
    int iVar1;
    int local_14[2];

    iVar1 = FUN_000401e0(param_1, local_14);
    if (iVar1 == 0) {
        if (local_14[0] < 0) {
            FUN_0004002c("\'%s\' is negative", param_1);
            return;
        }
        *param_2 = local_14[0];
    }
    return;
}

void FUN_000402e0(undefined4 param_1, int *param_2)

{
    int iVar1;
    int local_14[2];

    iVar1 = FUN_000401e0(param_1, local_14);
    if (iVar1 == 0) {
        *param_2 = local_14[0];
        if (local_14[0] < 0) {
            FUN_0004002c("\'%s\' is negative", param_1);
            return;
        }
    }
    return;
}

void FUN_00040348(char *param_1)

{
    puts(param_1);
    fflush(stdout);
    /* WARNING: Subroutine does not return */
    exit(0);
}

void FUN_000403f0(undefined1 *param_1, undefined4 *param_2)

{
    size_t __n;

    __n = strlen((char *)*param_2);
    *param_1 = 0x22;
    if (0x4e < __n) {
        strncpy(param_1 + 1, (char *)*param_2, 0x4e);
        param_1[0x4f] = 0x22;
        return;
    }
    strncpy(param_1 + 1, (char *)*param_2, __n);
    param_1[__n + 1] = 0x22;
    if (__n != 0x4e) {
        param_1[__n + 2] = 0;
    }
    return;
}

char *FUN_000404cc(uint *param_1, size_t *param_2)

{
    size_t sVar1;
    char *__s;
    int iVar2;
    int *piVar3;
    uint uVar4;

    *param_1 = 0;
    if (DAT_0007686c == 0) {
    LAB_00040564:
        __s = (char *)0x0;
    } else {
        piVar3 = DAT_00076864;
        if (DAT_00076864[1] == 8) {
            iVar2 = 0x1c;
            uVar4 = 1;
            do {
                *param_1 = uVar4;
                if (DAT_0007686c <= uVar4)
                    goto LAB_00040564;
                piVar3 = (int *)((int)DAT_00076864 + iVar2);
                iVar2 = iVar2 + 0x1c;
                uVar4 = uVar4 + 1;
            } while (piVar3[1] == 8);
        }
        __s = (char *)(*piVar3 + 1);
        sVar1 = strcspn(__s, "|= ");
        *param_2 = sVar1;
    }
    return __s;
}

char *FUN_0004056c(int param_1, size_t *param_2)

{
    byte bVar1;
    size_t sVar2;
    char *__s;

    bVar1 = *(byte *)(param_1 + *param_2);
    if ((bVar1 & 0xdf) == 0 || bVar1 == 0x3d) {
        __s = (char *)0x0;
    } else {
        __s = (char *)(param_1 + *param_2 + 2);
        sVar2 = strcspn(__s, "|= ");
        *param_2 = sVar2;
    }
    return __s;
}

char *FUN_000405b4(int param_1, uint *param_2, size_t *param_3)

{
    char *pcVar1;
    size_t sVar2;
    int *piVar3;
    uint uVar4;

    uVar4 = *param_2;
    if (uVar4 < DAT_0007686c) {
        do {
            piVar3 = (int *)(DAT_00076864 + uVar4 * 0x1c);
            if (piVar3[1] != 8) {
                if (param_1 == 0) {
                    pcVar1 = (char *)(*piVar3 + 1);
                    sVar2 = strcspn(pcVar1, "|= ");
                    *param_3 = sVar2;
                    return pcVar1;
                }
                pcVar1 = (char *)FUN_0004056c(param_1, param_3);
                if (pcVar1 != (char *)0x0) {
                    return pcVar1;
                }
                uVar4 = *param_2;
                param_1 = 0;
            }
            uVar4 = uVar4 + 1;
            *param_2 = uVar4;
        } while (uVar4 < DAT_0007686c);
    }
    return (char *)0x0;
}

void FUN_0004066c(undefined4 *param_1)

{
    size_t sVar1;
    undefined4 *puVar2;
    undefined4 uVar3;
    undefined4 uVar4;
    uint uVar5;
    undefined4 uVar6;
    char *__s;
    int iVar7;
    undefined4 extraout_r12;
    undefined4 *puVar8;
    bool bVar9;
    size_t local_1c;

    uVar5 = param_1[1];
    bVar9 = 3 < uVar5;
    if (uVar5 != 4) {
        bVar9 = uVar5 != 1;
    }
    if (!bVar9 || (uVar5 == 4 || uVar5 == 2)) {
        if (param_1[6] != 0) {
            if (*(char *)*param_1 == '-') {
                __s = (char *)*param_1 + 1;
                local_1c = strcspn(__s, "|= ");
                while (*__s == '-') {
                    sVar1 = local_1c;
                    if (local_1c == 1)
                        goto LAB_000407a0;
                    iVar7 = param_1[1];
                    DAT_0007685c = DAT_0007685c + 1;
                LAB_00040704:
                    if ((iVar7 == 1) &&
                        (uVar3 = 1, sVar1 = local_1c,
                         __s[local_1c] == '=' || __s[local_1c] == ' '))
                        goto LAB_00040784;
                    __s = (char *)FUN_0004056c(__s, &local_1c);
                    if (__s == (char *)0x0) {
                        return;
                    }
                }
                if (local_1c == 1) {
                    iVar7 = param_1[1];
                    DAT_00076860 = DAT_00076860 + 1;
                    if ((iVar7 - 2U & 0xfffffffd) == 0) {
                        DAT_00076858 = DAT_00076858 + 1;
                    }
                    goto LAB_00040704;
                }
                __s = __s + -1;
                sVar1 = errx(1, "Option %s: invalid short option \'%.*s\'",
                             *param_1, local_1c + 1, __s);
                uVar3 = extraout_r12;
            LAB_00040784:
                sVar1 = errx(uVar3, "Option %s: does not take arguments \'%s\'",
                             *param_1, __s + sVar1 + 1);
            LAB_000407a0:
                errx(sVar1, "Option %s: invalid long option \'--\'", *param_1);
            }
            errx(1, "Option %s: does not begin with \'-\'");
        }
        errx(1, "Option %s: description cannot be NULL");
    }
    puVar2 = (undefined4 *)errx(1, "Option %s: unknown entry type %u");
    DAT_00076864 = realloc(DAT_00076864, (DAT_0007686c + 1) * 0x1c);
    uVar3 = puVar2[1];
    uVar4 = puVar2[2];
    uVar6 = puVar2[3];
    puVar8 = (undefined4 *)((int)DAT_00076864 + DAT_0007686c * 0x1c);
    DAT_0007686c = DAT_0007686c + 1;
    *puVar8 = *puVar2;
    puVar8[1] = uVar3;
    puVar8[2] = uVar4;
    puVar8[3] = uVar6;
    uVar3 = puVar2[5];
    uVar4 = puVar2[6];
    puVar8[4] = puVar2[4];
    puVar8[5] = uVar3;
    puVar8[6] = uVar4;
    return;
}

void FUN_000407e0(undefined4 *param_1)

{
    undefined4 uVar1;
    undefined4 uVar2;
    undefined4 uVar3;
    undefined4 *puVar4;

    DAT_00076864 = realloc(DAT_00076864, (DAT_0007686c + 1) * 0x1c);
    uVar1 = param_1[1];
    uVar2 = param_1[2];
    uVar3 = param_1[3];
    puVar4 = (undefined4 *)((int)DAT_00076864 + DAT_0007686c * 0x1c);
    DAT_0007686c = DAT_0007686c + 1;
    *puVar4 = *param_1;
    puVar4[1] = uVar1;
    puVar4[2] = uVar2;
    puVar4[3] = uVar3;
    uVar1 = param_1[5];
    uVar2 = param_1[6];
    puVar4[4] = param_1[4];
    puVar4[5] = uVar1;
    puVar4[6] = uVar2;
    return;
}

char *FUN_00040844(undefined4 param_1, int *param_2)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_000404cc();
    while (true) {
        if (pcVar1 == (char *)0x0) {
            return (char *)0x0;
        }
        if (*pcVar1 == '-')
            break;
        pcVar1 = (char *)FUN_000405b4(pcVar1, param_1, param_2);
    }
    *param_2 = *param_2 + -1;
    return pcVar1 + 1;
}

char *FUN_0004089c(undefined4 param_1, undefined4 param_2, int *param_3)

{
    char *pcVar1;

    pcVar1 = (char *)FUN_000405b4();
    while (true) {
        if (pcVar1 == (char *)0x0) {
            return (char *)0x0;
        }
        if (*pcVar1 == '-')
            break;
        pcVar1 = (char *)FUN_000405b4(pcVar1, param_2, param_3);
    }
    *param_3 = *param_3 + -1;
    return pcVar1 + 1;
}

char *FUN_000408f4(undefined4 param_1)

{
    char *pcVar1;
    undefined4 local_14[2];

    local_14[0] = 0;
    pcVar1 = (char *)FUN_000404cc(param_1, local_14);
    while (true) {
        if (pcVar1 == (char *)0x0) {
            return (char *)0x0;
        }
        if (*pcVar1 != '-')
            break;
        pcVar1 = (char *)FUN_000405b4(pcVar1, param_1, local_14);
    }
    return pcVar1;
}

char *FUN_00040954(undefined4 param_1, undefined4 param_2)

{
    char *pcVar1;
    undefined4 local_14[2];

    local_14[0] = 1;
    pcVar1 = (char *)FUN_000405b4(param_1, param_2, local_14);
    while (true) {
        if (pcVar1 == (char *)0x0) {
            return (char *)0x0;
        }
        if (*pcVar1 != '-')
            break;
        pcVar1 = (char *)FUN_000405b4(pcVar1, param_2, local_14);
    }
    return pcVar1;
}

void FUN_000409b4(undefined4 param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4, undefined4 param_5, undefined4 param_6,
                  undefined4 param_7)

{
    undefined4 local_24;
    undefined4 local_20;
    undefined4 local_1c;
    undefined4 uStack_18;
    undefined4 local_14;
    undefined4 local_10;
    undefined4 local_c;

    local_14 = param_5;
    local_10 = param_6;
    local_c = param_7;
    local_24 = param_1;
    local_20 = param_2;
    local_1c = param_3;
    uStack_18 = param_4;
    FUN_0004066c(&local_24);
    FUN_000407e0(&local_24);
    return;
}

void FUN_000409f8(undefined4 *param_1, int param_2)

{
    int iVar1;
    int iVar2;
    undefined4 local_34;
    undefined4 local_30;
    undefined4 local_2c;
    undefined4 local_28;
    undefined4 local_24;
    undefined4 local_20;
    int local_1c;

    iVar1 = DAT_0007686c;
    if (param_2 == 0) {
        iVar2 = param_1[1];
        if (iVar2 == 0x10) {
            return;
        }
    } else {
        local_34 = 0;
        local_2c = 0;
        local_28 = 0;
        local_24 = 0;
        local_20 = 0;
        local_30 = 8;
        local_1c = param_2;
        FUN_000407e0(&local_34);
        iVar2 = param_1[1];
        if (iVar2 == 0x10)
            goto LAB_00040a80;
    }
    do {
        if (iVar2 == 8) {
            FUN_000409f8(*param_1, param_1[6]);
        } else {
            FUN_0004066c(param_1);
            FUN_000407e0(param_1);
        }
        iVar2 = param_1[8];
        param_1 = param_1 + 7;
    } while (iVar2 != 0x10);
    if (param_2 == 0) {
        return;
    }
LAB_00040a80:
    *(int *)(DAT_00076864 + iVar1 * 0x1c + 0x14) = DAT_0007686c - iVar1;
    return;
}

bool FUN_00040acc(undefined4 param_1, undefined4 *param_2, undefined4 param_3)

{
    int iVar1;
    undefined4 local_1c[2];

    DAT_00076868 = *param_2;
    local_1c[0] = 0;
    do {
        iVar1 = FUN_00040c38(param_1, param_2, local_1c, param_3);
    } while (iVar1 == 1);
    return iVar1 == 0;
}

void FUN_00040b28(void)

{
    free(DAT_00076864);
    DAT_00076864 = (void *)0x0;
    return;
}

void FUN_00040c00(int *param_1, int param_2, int param_3)

{
    memmove((void *)(param_2 + param_3 * 4),
            (void *)(param_2 + param_3 * 4 + 4), (*param_1 - param_3) * 4);
    *param_1 = *param_1 + -1;
    return;
}

/* WARNING: Type propagation algorithm not settling */

undefined4 FUN_00040c38(undefined4 param_1, undefined4 *param_2, int *param_3,
                        code *param_4)

{
    char cVar1;
    int *piVar2;
    char *pcVar3;
    char *pcVar4;
    void *__ptr;
    int iVar5;
    size_t sVar6;
    int iVar7;
    int iVar8;
    int *piVar9;
    int iVar10;
    size_t sVar11;
    int iVar12;
    char *local_38;
    int local_30;
    size_t local_2c[2];

    pcVar3 = getenv("POSIXLY_CORRECT");
    pcVar4 = (char *)param_2[1];
    if (pcVar3 == (char *)0x0) {
        if (pcVar4 == (char *)0x0) {
            return 0;
        }
        if (*pcVar4 == '-') {
            piVar9 = param_2 + 1;
            iVar8 = 1;
        } else {
            iVar8 = 1;
            piVar2 = param_2 + 2;
            do {
                piVar9 = piVar2;
                pcVar4 = (char *)*piVar9;
                iVar8 = iVar8 + 1;
                if (pcVar4 == (char *)0x0) {
                    return 0;
                }
                piVar2 = piVar9 + 1;
            } while (*pcVar4 != '-');
        }
        cVar1 = pcVar4[1];
    } else {
        piVar9 = param_2 + 1;
        if (pcVar4 == (char *)0x0) {
            return 0;
        }
        if (*pcVar4 != '-') {
            return 0;
        }
        cVar1 = pcVar4[1];
        iVar8 = 1;
    }
    if (cVar1 == '-') {
        if (pcVar4[2] == '\0') {
            FUN_00040c00(param_1, param_2, iVar8);
            return 0;
        }
        if (*param_3 != 0) {
            /* WARNING: Subroutine does not return */
            __assert_fail("*offset == 0", "ccan/opt/parse.c", 0x3b,
                          "parse_one");
        }
        pcVar4 = (char *)FUN_00040844(&local_30, local_2c);
        sVar6 = local_2c[0];
        while (pcVar4 != (char *)0x0) {
            iVar10 = *piVar9;
            local_2c[0] = sVar6;
            iVar5 = strncmp((char *)(iVar10 + 2), pcVar4, sVar6);
            if (iVar5 == 0) {
                sVar11 = sVar6 + 2;
                if (*(char *)(iVar10 + sVar11) == '=') {
                    iVar5 = local_30 * 0x1c;
                    iVar10 = iVar10 + sVar6 + 3;
                    local_38 = pcVar4 + -2;
                    iVar7 = DAT_00076864 + iVar5;
                    if (*(int *)(iVar7 + 4) == 1) {
                        local_2c[0] = sVar11;
                        if (iVar10 != 0) {
                            (*param_4)("%s: %.*s: %s", *param_2, sVar11,
                                       local_38, "doesn\'t allow an argument");
                            return 0xffffffff;
                        }
                        goto LAB_00040ee8;
                    }
                    local_2c[0] = sVar11;
                    if (iVar10 != 0)
                        goto LAB_00040d70;
                } else {
                    if (*(char *)(iVar10 + sVar11) != '\0')
                        goto LAB_00040e98;
                    local_38 = pcVar4 + -2;
                    iVar7 = DAT_00076864 + local_30 * 0x1c;
                    local_2c[0] = sVar11;
                    if (*(int *)(iVar7 + 4) == 1)
                        goto LAB_00040ee8;
                }
                local_38 = pcVar4 + -2;
                iVar5 = local_30 * 0x1c;
                iVar12 = *param_3;
                local_2c[0] = sVar11;
                goto LAB_00040d58;
            }
        LAB_00040e98:
            pcVar4 = (char *)FUN_0004089c(pcVar4, &local_30, local_2c);
            sVar6 = local_2c[0];
        }
    } else {
        local_38 = (char *)FUN_000408f4(&local_30);
        if (local_38 != (char *)0x0) {
            iVar12 = *param_3 + 1;
            if (*local_38 != *(char *)(*piVar9 + iVar12)) {
                do {
                    local_38 = (char *)FUN_00040954(local_38, &local_30);
                    if (local_38 == (char *)0x0)
                        goto LAB_00040eb0;
                    iVar12 = *param_3 + 1;
                } while (*(char *)(*piVar9 + iVar12) != *local_38);
            }
            local_38 = local_38 + -1;
            *param_3 = iVar12;
            local_2c[0] = 2;
            iVar5 = local_30 * 0x1c;
            iVar7 = DAT_00076864 + iVar5;
            if (*(int *)(iVar7 + 4) == 1) {
            LAB_00040ee8:
                iVar10 = 0;
                __ptr = (void *)(**(code **)(iVar7 + 8))(
                    *(undefined4 *)(iVar7 + 0x14));
            } else {
            LAB_00040d58:
                if ((iVar12 == 0) ||
                    (iVar10 = *piVar9 + iVar12 + 1,
                     *(char *)(*piVar9 + iVar12 + 1) == '\0')) {
                    iVar10 = param_2[iVar8 + 1];
                    if (iVar10 == 0) {
                        (*param_4)("%s: %.*s: %s", *param_2, local_2c[0],
                                   local_38, "requires an argument");
                        return 0xffffffff;
                    }
                } else {
                    *param_3 = 0;
                }
            LAB_00040d70:
                if (*(int *)(DAT_00076864 + iVar5 + 4) == 4) {
                    FUN_0004014c(iVar10,
                                 *(undefined4 *)(DAT_00076864 + iVar5 + 0x14));
                }
                iVar5 = DAT_00076864 + local_30 * 0x1c;
                __ptr = (void *)(**(code **)(iVar5 + 0xc))(
                    iVar10, *(undefined4 *)(iVar5 + 0x14));
            }
            if (__ptr != (void *)0x0) {
                (*param_4)("%s: %.*s: %s", *param_2, local_2c[0], local_38,
                           __ptr);
                free(__ptr);
                return 0xffffffff;
            }
            if (*param_3 != 0) {
                if (*(char *)(*piVar9 + *param_3 + 1) != '\0') {
                    return 1;
                }
                *param_3 = 0;
            }
            FUN_00040c00(param_1, param_2, iVar8);
            if ((iVar10 != 0) && (*piVar9 == iVar10)) {
                FUN_00040c00(param_1, param_2, iVar8);
            }
            return 1;
        }
    }
LAB_00040eb0:
    pcVar4 = (char *)*piVar9;
    sVar6 = strlen(pcVar4);
    (*param_4)("%s: %.*s: %s", *param_2, sVar6, pcVar4, "unrecognized option");
    return 0xffffffff;
}

char *FUN_000410e8(char *param_1, char *param_2)

{
    size_t sVar1;
    size_t sVar2;
    size_t sVar3;
    int iVar4;
    char *pcVar5;
    int iVar6;
    uint uVar7;
    int iVar8;
    char *__s;
    undefined4 *puVar9;
    char *pcVar10;
    undefined4 *puVar11;
    char *pcVar12;
    uint uVar13;
    uint uVar14;
    char *pcVar15;
    bool bVar16;
    int local_7c[20];
    undefined4 local_2c;

    sVar1 = strlen(param_1);
    uVar14 = DAT_0007686c;
    puVar9 = DAT_00076864;
    sVar1 = DAT_00076860 + 0x14 + sVar1;
    if (param_2 == (char *)0x0) {
        if (DAT_0007686c == 0) {
            param_2 = "";
            goto LAB_000411d8;
        }
        uVar13 = 0;
        puVar11 = DAT_00076864;
        do {
            uVar13 = uVar13 + 1;
            if (((undefined *)puVar11[2] == &UNK_00040368) &&
                (param_2 = (char *)puVar11[5], param_2 != (char *)0x0)) {
                sVar2 = strlen(param_2);
                sVar1 = sVar1 + sVar2;
                goto LAB_00041144;
            }
            puVar11 = puVar11 + 7;
        } while (uVar13 != DAT_0007686c);
        param_2 = "";
    } else {
        sVar2 = strlen(param_2);
        sVar1 = sVar1 + sVar2;
        puVar9 = DAT_00076864;
        if (uVar14 == 0)
            goto LAB_000411d8;
    }
LAB_00041144:
    uVar13 = 0;
    do {
        while (true) {
            pcVar15 = (char *)puVar9[6];
            if (puVar9[1] != 8)
                break;
            uVar13 = uVar13 + 1;
            sVar2 = strlen(pcVar15);
            sVar1 = sVar2 + sVar1 + 3;
            puVar9 = puVar9 + 7;
            if (uVar14 <= uVar13)
                goto LAB_000411d8;
        }
        if (pcVar15 != (char *)&DAT_00076870) {
            sVar2 = strlen((char *)*puVar9);
            sVar3 = strlen(pcVar15);
            iVar4 = sVar2 + sVar1 + 6 + sVar3;
            iVar8 = iVar4 + 0x76;
            if (puVar9[4] == 0) {
                iVar8 = iVar4 + 0x15;
            }
            sVar1 = iVar8 + 1;
        }
        uVar13 = uVar13 + 1;
        puVar9 = puVar9 + 7;
    } while (uVar13 < uVar14);
LAB_000411d8:
    pcVar15 = (char *)malloc(sVar1);
    if (pcVar15 != (char *)0x0) {
        iVar4 = sprintf(pcVar15, "Usage: %s", param_1);
        pcVar12 = pcVar15 + iVar4;
        builtin_strncpy(pcVar15 + iVar4, " [-", 4);
        pcVar5 = (char *)FUN_000408f4(local_7c);
        pcVar10 = pcVar12;
        if (pcVar5 != (char *)0x0) {
            iVar4 = 0;
            do {
                if ((undefined4 *)DAT_00076864[local_7c[0] * 7 + 6] !=
                    &DAT_00076870) {
                    pcVar12[iVar4 + 3] = *pcVar5;
                    iVar4 = iVar4 + 1;
                }
                pcVar5 = (char *)FUN_00040954(pcVar5, local_7c);
            } while (pcVar5 != (char *)0x0);
            if (iVar4 != 0) {
                pcVar10 = pcVar12 + iVar4 + 4;
                (pcVar12 + iVar4 + 3)[0] = ']';
                (pcVar12 + iVar4 + 3)[1] = '\0';
            }
        }
        iVar4 = sprintf(pcVar10, " %s", param_2);
        pcVar5 = pcVar10 + iVar4 + 1;
        bVar16 = DAT_0007686c != 0;
        (pcVar10 + iVar4)[0] = '\n';
        (pcVar10 + iVar4)[1] = '\0';
        if (bVar16) {
            iVar4 = 0;
            uVar14 = 0;
            do {
                puVar9 = (undefined4 *)((int)DAT_00076864 + iVar4);
                if ((undefined4 *)puVar9[6] != &DAT_00076870) {
                    if (puVar9[1] == 8) {
                        iVar8 = sprintf(pcVar5, "%s:\n");
                        pcVar5 = pcVar5 + iVar8;
                    } else {
                        uVar7 = sprintf(pcVar5, "%s", *puVar9);
                        pcVar10 = pcVar5 + uVar7;
                        uVar13 = uVar7;
                        if (*(int *)((int)DAT_00076864 + iVar4 + 4) == 2) {
                            __s = *(char **)((int)DAT_00076864 + iVar4);
                            pcVar12 = strchr(__s, 0x20);
                            if ((pcVar12 == (char *)0x0) &&
                                (pcVar12 = strchr(__s, 0x3d),
                                 pcVar12 == (char *)0x0)) {
                                uVar13 = uVar7 + 6;
                                builtin_strncpy(pcVar5 + uVar7, " <arg>", 7);
                                pcVar10 = pcVar5 + uVar13;
                            }
                        }
                        if (uVar13 < 0x14) {
                            iVar8 = 0x14 - uVar13;
                        } else {
                            iVar8 = 1;
                        }
                        iVar8 = sprintf(pcVar10, "%.*s", iVar8,
                                        "                    ");
                        iVar6 = sprintf(
                            pcVar5 + iVar8 + uVar13, "%s",
                            *(undefined4 *)((int)DAT_00076864 + iVar4 + 0x18));
                        iVar6 = iVar6 + iVar8 + uVar13;
                        pcVar10 = pcVar5 + iVar6;
                        if (*(int *)((int)DAT_00076864 + iVar4 + 0x10) != 0) {
                            local_2c = 0x2e2e2e;
                            (**(code **)((int)DAT_00076864 + iVar4 + 0x10))(
                                local_7c, *(undefined4 *)((int)DAT_00076864 +
                                                          iVar4 + 0x14));
                            iVar8 =
                                sprintf(pcVar10, " (default: %s)", local_7c);
                            pcVar10 = pcVar5 + iVar8 + iVar6;
                        }
                        pcVar5 = pcVar10 + 1;
                        pcVar10[0] = '\n';
                        pcVar10[1] = '\0';
                    }
                }
                uVar14 = uVar14 + 1;
                iVar4 = iVar4 + 0x1c;
            } while (uVar14 < DAT_0007686c);
        }
        *pcVar5 = '\0';
    }
    return pcVar15;
}

uint *FUN_0004152c(uint *param_1, uint param_2, uint param_3)

{
    uint *puVar1;
    uint uVar2;
    uint uVar3;
    uint uVar4;

    if (param_3 == 0) {
        return (uint *)0x0;
    }
    uVar4 = param_2 & 0xff;
    if (((uint)param_1 & 3) == 0) {
    LAB_00041584:
        uVar3 = (param_2 & 0xff) << 8 | uVar4;
        uVar3 = uVar3 | uVar3 << 0x10;
        if (3 < param_3) {
            uVar2 = *param_1 ^ uVar3;
            for (uVar2 = uVar2 + 0xfefefeff & ~uVar2; (uVar2 & 0x80808080) == 0;
                 uVar2 = uVar2 + 0xfefefeff & ~uVar2) {
                param_1 = param_1 + 1;
                param_3 = param_3 - 4;
                if (param_3 < 4) {
                    if (param_3 == 0) {
                        return (uint *)0x0;
                    }
                    break;
                }
                uVar2 = *param_1 ^ uVar3;
            }
        }
        if ((byte)*param_1 == uVar4) {
            return param_1;
        }
        puVar1 = (uint *)((int)param_1 + param_3);
        while (param_1 = (uint *)((int)param_1 + 1), param_1 != puVar1) {
            if (*(byte *)param_1 == uVar4) {
                return param_1;
            }
        }
    } else {
        if ((byte)*param_1 == uVar4) {
            return param_1;
        }
        puVar1 = (uint *)((int)param_1 + 1);
        while (param_1 = puVar1, param_3 = param_3 - 1, param_3 != 0) {
            if (((uint)param_1 & 3) == 0)
                goto LAB_00041584;
            puVar1 = (uint *)((int)param_1 + 1);
            if ((byte)*param_1 == uVar4) {
                return param_1;
            }
        }
    }
    return (uint *)0x0;
}

uint FUN_00041640(int param_1, uint param_2, int *param_3)

{
    byte bVar1;
    uint uVar2;
    uint uVar3;
    uint uVar4;
    uint uVar5;
    uint uVar6;
    int iVar7;
    int iVar8;
    int iVar9;
    uint uVar10;
    bool bVar11;

    iVar7 = 1;
    uVar2 = 0;
    iVar9 = 1;
    uVar10 = 0xffffffff;
    while (uVar6 = iVar9 + uVar2, uVar4 = uVar2, iVar9 + uVar2 < param_2) {
        while (uVar5 = uVar6, bVar1 = *(byte *)(param_1 + uVar10 + iVar9),
               *(byte *)(param_1 + uVar5) < bVar1) {
            iVar9 = 1;
            iVar7 = uVar5 - uVar10;
            uVar6 = uVar5 + 1;
            uVar4 = uVar5;
            if (param_2 <= uVar5 + 1)
                goto LAB_00041690;
        }
        if (*(byte *)(param_1 + uVar5) == bVar1) {
            bVar11 = iVar9 == iVar7;
            iVar9 = iVar9 + 1;
            uVar2 = uVar4;
            if (bVar11) {
                iVar9 = 1;
                uVar2 = uVar5;
            }
        } else {
            iVar7 = 1;
            uVar2 = uVar4 + 1;
            iVar9 = iVar7;
            uVar10 = uVar4;
        }
    }
LAB_00041690:
    iVar8 = 1;
    *param_3 = iVar7;
    uVar2 = 0;
    uVar6 = 0xffffffff;
    iVar9 = 1;
    while (uVar4 = iVar9 + uVar2, uVar5 = uVar2, iVar9 + uVar2 < param_2) {
        while (uVar3 = uVar4, bVar1 = *(byte *)(param_1 + uVar6 + iVar9),
               bVar1 < *(byte *)(param_1 + uVar3)) {
            iVar9 = 1;
            iVar8 = uVar3 - uVar6;
            uVar4 = uVar3 + 1;
            uVar5 = uVar3;
            if (param_2 <= uVar3 + 1)
                goto LAB_000416e0;
        }
        if (*(byte *)(param_1 + uVar3) == bVar1) {
            bVar11 = iVar9 == iVar8;
            iVar9 = iVar9 + 1;
            uVar2 = uVar5;
            if (bVar11) {
                iVar9 = 1;
                uVar2 = uVar3;
            }
        } else {
            iVar8 = 1;
            uVar2 = uVar5 + 1;
            uVar6 = uVar5;
            iVar9 = iVar8;
        }
    }
LAB_000416e0:
    uVar2 = uVar10 + 1;
    if (uVar10 + 1 <= uVar6 + 1) {
        *param_3 = iVar8;
        uVar2 = uVar6 + 1;
    }
    return uVar2;
}

int FUN_00041750(int param_1, int param_2, char *param_3, uint param_4)

{
    uint uVar1;
    int iVar2;
    int iVar3;
    uint __n;
    byte *pbVar4;
    uint uVar5;
    uint uVar6;
    uint *puVar7;
    uint uVar8;
    uint uVar9;
    uint uVar10;
    uint uVar11;
    char *pcVar12;
    char *pcVar13;
    bool bVar14;
    uint local_42c;
    uint local_428[257];

    uVar11 = param_4 - 1;
    if (param_4 < 3) {
        local_42c = 1;
        __n = uVar11;
    } else {
        __n = FUN_00041640(param_3, param_4, &local_42c);
    }
    uVar9 = local_42c;
    puVar7 = &local_42c;
    do {
        puVar7 = puVar7 + 1;
        *puVar7 = param_4;
    } while (puVar7 != local_428 + 0xff);
    if (param_4 != 0) {
        pbVar4 = (byte *)(param_3 + -1);
        uVar8 = uVar11;
        do {
            pbVar4 = pbVar4 + 1;
            local_428[*pbVar4] = uVar8;
            bVar14 = uVar8 != 0;
            uVar8 = uVar8 - 1;
        } while (bVar14);
    }
    iVar2 = memcmp(param_3, param_3 + local_42c, __n);
    if (iVar2 == 0) {
        uVar6 = __n - 1;
        uVar8 = 0;
        uVar10 = 0;
        do {
            while (true) {
                uVar5 = local_428[*(byte *)(param_1 + uVar8 + uVar11)];
                if (uVar5 == 0)
                    break;
                if (uVar10 != 0 && uVar5 < uVar9) {
                    uVar5 = param_4 - uVar9;
                }
                uVar8 = uVar8 + uVar5;
            LAB_00041830:
                uVar10 = 0;
                if (param_2 - param_4 < uVar8) {
                    return 0;
                }
            }
            uVar5 = __n;
            if (__n < uVar10) {
                uVar5 = uVar10;
            }
            if (uVar5 < uVar11) {
                pcVar13 = param_3 + uVar5;
                pcVar12 = (char *)(param_1 + uVar5 + uVar8);
                if (*(char *)(param_1 + uVar5 + uVar8) == param_3[uVar5]) {
                    do {
                        uVar5 = uVar5 + 1;
                        if (uVar11 <= uVar5)
                            goto LAB_000418a8;
                        pcVar13 = pcVar13 + 1;
                        pcVar12 = pcVar12 + 1;
                    } while (*pcVar13 == *pcVar12);
                }
                uVar8 = uVar5 + (1 - __n) + uVar8;
                goto LAB_00041830;
            }
        LAB_000418a8:
            uVar5 = __n;
            if ((uVar10 < __n) &&
                (pcVar12 = (char *)(param_1 + uVar6 + uVar8),
                 param_3[uVar6] == *(char *)(param_1 + uVar6 + uVar8))) {
                pcVar13 = param_3 + uVar6;
                uVar1 = uVar6;
                do {
                    uVar5 = uVar1;
                    if (uVar5 - 1 == uVar10 - 1)
                        break;
                    pcVar13 = pcVar13 + -1;
                    pcVar12 = pcVar12 + -1;
                    uVar1 = uVar5 - 1;
                } while (*pcVar13 == *pcVar12);
            }
            if (uVar5 < uVar10 + 1) {
                return param_1 + uVar8;
            }
            uVar8 = uVar8 + uVar9;
            uVar10 = param_4 - uVar9;
        } while (uVar8 <= param_2 - param_4);
    } else {
        iVar2 = __n - 1;
        uVar9 = param_4 - __n;
        if (param_4 - __n < __n) {
            uVar9 = __n;
        }
        uVar8 = 0;
        do {
            iVar3 = param_1 + uVar8;
            uVar10 = local_428[*(byte *)(iVar3 + uVar11)];
            if (local_428[*(byte *)(iVar3 + uVar11)] == 0) {
                if (uVar11 <= __n) {
                LAB_000419e4:
                    if (iVar2 == -1) {
                        return iVar3;
                    }
                    pcVar13 = (char *)(param_1 + iVar2 + uVar8);
                    pcVar12 = param_3 + iVar2;
                    uVar10 = uVar9 + 1;
                    if (*(char *)(param_1 + iVar2 + uVar8) == param_3[iVar2]) {
                        do {
                            if (pcVar12 == param_3) {
                                return iVar3;
                            }
                            pcVar12 = pcVar12 + -1;
                            pcVar13 = pcVar13 + -1;
                        } while (*pcVar12 == *pcVar13);
                    }
                    goto LAB_00041a28;
                }
                pcVar13 = (char *)(param_1 + __n + uVar8);
                uVar10 = __n;
                pcVar12 = param_3 + __n;
                if (*(char *)(param_1 + __n + uVar8) == param_3[__n]) {
                    do {
                        uVar10 = uVar10 + 1;
                        if (uVar11 <= uVar10)
                            goto LAB_000419e4;
                        pcVar12 = pcVar12 + 1;
                        pcVar13 = pcVar13 + 1;
                    } while (*pcVar12 == *pcVar13);
                }
                uVar8 = uVar10 + (1 - __n) + uVar8;
            } else {
            LAB_00041a28:
                uVar8 = uVar8 + uVar10;
            }
        } while (uVar8 <= param_2 - param_4);
    }
    return 0;
}

void *memmem(void *__haystack, size_t __haystacklen, void *__needle,
             size_t __needlelen)

{
    uint uVar1;
    void *pvVar2;
    int iVar3;
    uint uVar4;
    char *pcVar5;
    uint uVar6;
    uint uVar7;
    size_t sVar8;
    uint __n;
    uint uVar9;
    uint uVar10;
    int iVar11;
    char *pcVar12;
    int local_2c[2];

    if (__needlelen != 0) {
        if (__needlelen <= __haystacklen) {
            if (0x1f < __needlelen) {
                pvVar2 = (void *)FUN_00041750();
                return pvVar2;
            }
            /* WARNING: Load size is inaccurate */
            pvVar2 = (void *)FUN_0004152c(__haystack, *__needle, __haystacklen);
            if (pvVar2 == (void *)0x0 || __needlelen == 1) {
                return pvVar2;
            }
            uVar9 = __haystacklen - ((int)pvVar2 - (int)__haystack);
            if (__needlelen <= uVar9) {
                if (__needlelen < 3) {
                    __n = __needlelen - 1;
                    local_2c[0] = 1;
                } else {
                    __n = FUN_00041640(__needle, __needlelen, local_2c);
                }
                iVar11 = local_2c[0];
                iVar3 = memcmp(__needle, (void *)((int)__needle + local_2c[0]),
                               __n);
                if (iVar3 == 0) {
                    uVar6 = __n - 1;
                    uVar4 = 0;
                    uVar10 = 0;
                    do {
                        uVar7 = __n;
                        if (__n < uVar10) {
                            uVar7 = uVar10;
                        }
                        if (uVar7 < __needlelen) {
                            pcVar12 = (char *)((int)__needle + uVar7);
                            pcVar5 = (char *)((int)pvVar2 + uVar7 + uVar4);
                            if (*(char *)((int)__needle + uVar7) ==
                                *(char *)((int)pvVar2 + uVar7 + uVar4)) {
                                do {
                                    uVar7 = uVar7 + 1;
                                    if (__needlelen == uVar7)
                                        goto LAB_00041b94;
                                    pcVar12 = pcVar12 + 1;
                                    pcVar5 = pcVar5 + 1;
                                } while (*pcVar12 == *pcVar5);
                            }
                            uVar4 = (1 - __n) + uVar4 + uVar7;
                            uVar10 = 0;
                        } else {
                        LAB_00041b94:
                            uVar7 = __n;
                            if ((uVar10 < __n) &&
                                (pcVar5 = (char *)((int)pvVar2 + uVar6 + uVar4),
                                 *(char *)((int)__needle + uVar6) ==
                                     *(char *)((int)pvVar2 + uVar6 + uVar4))) {
                                pcVar12 = (char *)((int)__needle + uVar6);
                                uVar1 = uVar6;
                                do {
                                    uVar7 = uVar1;
                                    if (uVar7 - 1 == uVar10 - 1)
                                        break;
                                    pcVar12 = pcVar12 + -1;
                                    pcVar5 = pcVar5 + -1;
                                    uVar1 = uVar7 - 1;
                                } while (*pcVar12 == *pcVar5);
                            }
                            if (uVar7 < uVar10 + 1) {
                                return (void *)((int)pvVar2 + uVar4);
                            }
                            uVar4 = uVar4 + iVar11;
                            uVar10 = __needlelen - iVar11;
                        }
                    } while (uVar4 <= uVar9 - __needlelen);
                } else {
                    iVar11 = __n - 1;
                    uVar4 = __needlelen - __n;
                    if (__needlelen - __n < __n) {
                        uVar4 = __n;
                    }
                    uVar10 = 0;
                    do {
                        if (__n < __needlelen) {
                            pcVar12 = (char *)((int)pvVar2 + __n + uVar10);
                            pcVar5 = (char *)((int)__needle + __n);
                            sVar8 = __n;
                            if (*(char *)((int)pvVar2 + __n + uVar10) ==
                                *(char *)((int)__needle + __n)) {
                                do {
                                    sVar8 = sVar8 + 1;
                                    if (__needlelen == sVar8)
                                        goto LAB_00041cc0;
                                    pcVar5 = pcVar5 + 1;
                                    pcVar12 = pcVar12 + 1;
                                } while (*pcVar5 == *pcVar12);
                            }
                            uVar10 = (1 - __n) + uVar10 + sVar8;
                        } else {
                        LAB_00041cc0:
                            if (iVar11 == -1) {
                            LAB_00041d04:
                                return (void *)((int)pvVar2 + uVar10);
                            }
                            pcVar12 = (char *)((int)pvVar2 + iVar11 + uVar10);
                            pcVar5 = (char *)((int)__needle + iVar11);
                            if (*(char *)((int)pvVar2 + iVar11 + uVar10) ==
                                *(char *)((int)__needle + iVar11)) {
                                do {
                                    if (pcVar5 == (char *)__needle)
                                        goto LAB_00041d04;
                                    pcVar5 = pcVar5 + -1;
                                    pcVar12 = pcVar12 + -1;
                                } while (*pcVar5 == *pcVar12);
                            }
                            uVar10 = uVar10 + uVar4 + 1;
                        }
                    } while (uVar10 <= uVar9 - __needlelen);
                }
            }
        }
        __haystack = (void *)0x0;
    }
    return __haystack;
}

undefined4 FUN_00041d64(byte *param_1, undefined4 param_2)

{
    byte bVar1;
    byte bVar2;
    void *pvVar3;
    int iVar4;
    undefined4 uVar5;
    uint __size;
    uint __size_00;
    undefined1 auStack_9e0[252];
    undefined4 local_8e4;
    undefined4 local_8e0;
    undefined4 local_8dc;
    void *local_8c0;
    void *local_8ac;
    void *local_8a0;
    void *local_898;
    char acStack_820[2048];

    if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
        (4 < DAT_00067db4)) {
        snprintf(acStack_820, 0x800, "got nonce sz %d", param_2);
        FUN_00020f58(5, acStack_820, 0);
    }
    bVar1 = *param_1;
    uVar5 = *(undefined4 *)(param_1 + 1);
    memcpy(auStack_9e0, param_1 + 5, 0x1c0);
    __size_00 = (uint)param_1[0x1c5];
    param_1 = param_1 + 0x1c6;
    pvVar3 = calloc(1, __size_00);
    local_8c0 = memcpy(pvVar3, param_1, __size_00);
    __size = (uint)param_1[__size_00];
    param_1 = param_1 + __size_00 + 1;
    pvVar3 = calloc(1, __size);
    local_8ac = memcpy(pvVar3, param_1, __size);
    bVar2 = param_1[__size];
    pvVar3 = calloc(1, (uint)bVar2);
    local_8a0 = memcpy(pvVar3, param_1 + __size + 1, (uint)bVar2);
    local_898 = calloc(1, 1);
    local_8dc = *(undefined4 *)(DAT_000744c8 + (uint)bVar1 * 4);
    local_8e4 = *DAT_000744a4;
    local_8e0 = *(undefined4 *)*DAT_000744a4;
    iVar4 = FUN_0002dc68(*DAT_000744a4, uVar5);
    if ((iVar4 == 0) ||
        (iVar4 = FUN_0002dbfc(auStack_9e0, uVar5), iVar4 == 0)) {
        FUN_000331a4(*DAT_000744a4);
        uVar5 = 0xffffffff;
    } else {
        FUN_0003e82c(*DAT_000744a4, auStack_9e0);
        if ((DAT_000766c0 != 0) && (DAT_0007449d != '\0')) {
            FUN_0002ccf0(auStack_9e0, uVar5);
        }
        if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
            (DAT_00067db4 < 5)) {
            return 0;
        }
        snprintf(acStack_820, 0x800, "%s nonce submited",
                 "cb_bitmain_submit_nonce");
        FUN_00020f58(5, acStack_820, 0);
        uVar5 = 0;
    }
    return uVar5;
}

undefined4 FUN_00041fa8(void *param_1, size_t param_2)

{
    void *pvVar1;
    int iVar2;
    undefined4 uVar3;
    int *piVar4;
    undefined4 *puVar5;
    char acStack_820[2048];

    if (DAT_00068bd5 == '\0') {
    LAB_0004223c:
        if (param_1 != (void *)0x0 && param_2 != 0) {
        LAB_00042024:
            iVar2 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00076874);
            if (iVar2 != 0) {
                piVar4 = __errno_location();
                snprintf(acStack_820, 0x800,
                         "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d",
                         *piVar4, "socketa_api.c", "cb_bitmain_api_stats",
                         0x74);
                FUN_00020f58(3, acStack_820, 1);
                FUN_0003eba0(1);
            }
            DAT_0006acd0 = param_2;
            if (DAT_0006acd4 != (void *)0x0) {
                free(DAT_0006acd4);
            }
            DAT_0006acd4 = malloc(param_2);
            if (DAT_0006acd4 == (void *)0x0) {
                if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                    (2 < DAT_00067db4)) {
                    snprintf(acStack_820, 0x800, "%s, alloc failed",
                             "cb_bitmain_api_stats");
                    FUN_00020f58(3, acStack_820, 0);
                }
                iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00076874);
                if (iVar2 != 0) {
                    piVar4 = __errno_location();
                    snprintf(
                        acStack_820, 0x800,
                        "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d",
                        *piVar4, "socketa_api.c", "cb_bitmain_api_stats", 0x7e);
                    FUN_00020f58(3, acStack_820, 1);
                    FUN_0003eba0(1);
                }
                (*DAT_00067ed8)();
                uVar3 = 0xfffffffe;
            } else {
                memcpy(DAT_0006acd4, param_1, DAT_0006acd0);
                iVar2 = pthread_mutex_lock((pthread_mutex_t *)&DAT_0007688c);
                if (iVar2 != 0) {
                    piVar4 = __errno_location();
                    snprintf(acStack_820, 0x800,
                             "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d",
                             *piVar4, "socketa_api.c", "cb_bitmain_api_stats",
                             0x86);
                    FUN_00020f58(3, acStack_820, 1);
                    FUN_0003eba0(1);
                }
                puVar5 = (undefined4 *)((int)DAT_0006acd4 + (param_2 - 0x128));
                DAT_0006acd8 = *puVar5;
                DAT_0006acdc = puVar5[1];
                if ((DAT_00068bd5 != '\0') &&
                    (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                      (6 < DAT_00067db4)))) {
                    snprintf(acStack_820, 0x800, "[%s], hash 0x%llx",
                             "cb_bitmain_api_stats", DAT_0006acd8,
                             DAT_0006acdc);
                    FUN_00020f58(7, acStack_820, 0);
                }
                iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_0007688c);
                if (iVar2 != 0) {
                    piVar4 = __errno_location();
                    snprintf(
                        acStack_820, 0x800,
                        "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d",
                        *piVar4, "socketa_api.c", "cb_bitmain_api_stats", 0x8a);
                    FUN_00020f58(3, acStack_820, 1);
                    FUN_0003eba0(1);
                }
                (*DAT_00067ed8)();
                DAT_00073368 =
                    *(undefined4 *)((int)DAT_0006acd4 + (param_2 - 0x120));
                if ((DAT_00068bd5 != '\0') &&
                    (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                      (6 < DAT_00067db4)))) {
                    snprintf(acStack_820, 0x800, "[%s], hwerr %d",
                             "cb_bitmain_api_stats", DAT_00073368);
                    FUN_00020f58(7, acStack_820, 0);
                }
                pvVar1 = DAT_0006acd4;
                puVar5 = (undefined4 *)((int)DAT_0006acd4 + (param_2 - 0x11c));
                DAT_0006aba8 = puVar5[1];
                DAT_0006abac = puVar5[2];
                DAT_0006abb0 = puVar5[3];
                DAT_0006aba4 = *puVar5;
                puVar5 = (undefined4 *)((int)DAT_0006acd4 + (param_2 - 0xc));
                memcpy(&DAT_0006abc0,
                       (void *)((int)DAT_0006acd4 + (param_2 - 0x10c)), 0x100);
                DAT_0006abb8._0_4_ = *puVar5;
                DAT_0006abb8._4_4_ = puVar5[1];
                DAT_000687f4 = *(undefined4 *)((int)pvVar1 + (param_2 - 4));
                iVar2 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00076874);
                if (iVar2 != 0) {
                    piVar4 = __errno_location();
                    snprintf(
                        acStack_820, 0x800,
                        "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d",
                        *piVar4, "socketa_api.c", "cb_bitmain_api_stats", 0x9d);
                    FUN_00020f58(3, acStack_820, 1);
                    FUN_0003eba0(1);
                }
                (*DAT_00067ed8)();
                uVar3 = 0;
            }
            return uVar3;
        }
        if ((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0'))
            goto LAB_00042284;
    } else {
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (6 < DAT_00067db4)) {
            snprintf(acStack_820, 0x800, "got api len %d", param_2);
            FUN_00020f58(7, acStack_820, 0);
            goto LAB_0004223c;
        }
        if (param_1 != (void *)0x0 && param_2 != 0)
            goto LAB_00042024;
    }
    if (DAT_00067db4 < 3) {
        return 0xffffffff;
    }
LAB_00042284:
    snprintf(acStack_820, 0x800, "%s input err: data @ %p; len is %d",
             "cb_bitmain_api_stats", param_1, param_2);
    FUN_00020f58(3, acStack_820, 0);
    return 0xffffffff;
}

void FUN_00042554(undefined4 param_1, undefined4 param_2)

{
    char local_810[2048];

    if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
        (4 < DAT_00067db4)) {
        builtin_strncpy(local_810, "about to send detect", 0x14);
        local_810[0x14] = 0;
        FUN_00020f58(5, local_810, 0);
    }
    FUN_00044264(s_bitmain_api_detect_0006883c, param_1, param_2, local_810, 0,
                 0);
    return;
}

void FUN_00042610(undefined4 param_1, undefined4 param_2)

{
    char acStack_810[2048];

    if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
        (4 < DAT_00067db4)) {
        snprintf(acStack_810, 0x800, "about to send job, size is %d", param_2);
        FUN_00020f58(5, acStack_810, 0);
    }
    FUN_00044264(s_bitmain_update_job_000688c0, param_1, param_2, acStack_810,
                 0, 0);
    return;
}

uint FUN_0004279c(void)

{
    int iVar1;
    uint uVar2;
    uint uVar3;
    int *piVar4;
    char *pcVar5;
    char acStack_820[2048];

    iVar1 = pthread_mutex_init((pthread_mutex_t *)&DAT_00076874,
                               (pthread_mutexattr_t *)0x0);
    if (iVar1 != 0) {
        piVar4 = __errno_location();
        snprintf(acStack_820, 0x800,
                 "Failed to pthread_mutex_init errno=%d in %s %s():%d", *piVar4,
                 "socketa_api.c", "cgminer_socket_init", 0x100);
        FUN_00020f58(3, acStack_820, 1);
        FUN_0003eba0(1);
    }
    iVar1 = pthread_mutex_init((pthread_mutex_t *)&DAT_0007688c,
                               (pthread_mutexattr_t *)0x0);
    if (iVar1 != 0) {
        piVar4 = __errno_location();
        snprintf(acStack_820, 0x800,
                 "Failed to pthread_mutex_init errno=%d in %s %s():%d", *piVar4,
                 "socketa_api.c", "cgminer_socket_init", 0x101);
        FUN_00020f58(3, acStack_820, 1);
        FUN_0003eba0(1);
    }
    uVar2 = FUN_00043d64(&DAT_00055dac, 2);
    sleep(6);
    if (uVar2 == 0) {
        while (true) {
            pcVar5 = s_bitmain_api_detect_0006883c;
            uVar2 = 0;
            do {
                uVar3 = FUN_00043fa4(pcVar5);
                uVar2 = uVar2 | uVar3;
                if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                    (4 < DAT_00067db4)) {
                    snprintf(acStack_820, 0x800, "%s reg %s return: %d",
                             "cgminer_socket_init", pcVar5, uVar2);
                    FUN_00020f58(5, acStack_820, 0);
                }
                pcVar5 = pcVar5 + 0x84;
            } while (pcVar5 != &DAT_000689c8);
            if (uVar2 == 0)
                break;
            sleep(5);
            if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                (2 < DAT_00067db4)) {
                snprintf(acStack_820, 0x800, "%s reg failed wait 5s",
                         "cgminer_socket_init");
                FUN_00020f58(3, acStack_820, 0);
            }
        }
    } else if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
               (2 < DAT_00067db4)) {
        snprintf(acStack_820, 0x800, "%s trans init failed: %d",
                 "cgminer_socket_init", uVar2);
        FUN_00020f58(3, acStack_820, 0);
    }
    return uVar2;
}

void FUN_00042a18(void)

{
    void *pvVar1;
    int iVar2;
    char local_808[28];
    undefined2 local_7ec;

    pvVar1 = calloc(1, 0x188);
    if (pvVar1 == (void *)0x0) {
        /* WARNING: Subroutine does not return */
        __assert_fail("cgpu", "driver-btm-c5_socketa.c", 0x28,
                      "bitmain_c5_detect");
    }
    *(undefined **)((int)pvVar1 + 4) = &DAT_000689c8;
    *(undefined4 *)((int)pvVar1 + 0x20) = 0;
    *(undefined4 *)((int)pvVar1 + 0x94) = 1;
    iVar2 = FUN_0004279c();
    if (iVar2 == 0) {
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (5 < DAT_00067db4)) {
            builtin_strncpy(local_808, "cgminer socket init succeeds", 0x1c);
            local_7ec = 0x2e;
            FUN_00020f58(6, local_808, 0);
        }
    } else if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
               (2 < DAT_00067db4)) {
        builtin_strncpy(local_808, "cgminer socket init failes.", 0x1c);
        FUN_00020f58(3, local_808, 0);
    }
    if (DAT_00068de8 != 0) {
        FUN_0003fb54();
    }
    iVar2 = FUN_0003efd4(pvVar1);
    if (iVar2 == 0) {
        /* WARNING: Subroutine does not return */
        __assert_fail("add_cgpu(cgpu)", "driver-btm-c5_socketa.c", 0x3c,
                      "bitmain_c5_detect");
    }
    return;
}

undefined4 FUN_00042c44(void)

{
    char acStack_808[2052];

    snprintf(acStack_808, 0x800, "%s: api detect failed.",
             "bitmain_c5_prepare");
    FUN_00020f58(3, acStack_808, 0);
    return 0;
}

undefined4 FUN_00042c8c(void)

{
    tm *ptVar1;
    int iVar2;
    undefined4 uVar3;
    time_t atStack_b4[2];
    undefined1 auStack_ac[32];
    undefined1 auStack_8c[32];
    char acStack_6c[40];
    char acStack_44[60];

    memset(acStack_6c, 0, 0x28);
    memset(acStack_44, 0, 0x3b);
    memset(auStack_8c, 0, 0x20);
    FUN_000239a4(atStack_b4);
    ptVar1 = localtime(atStack_b4);
    snprintf(acStack_6c, 0x28, "[%d-%02d-%02d %02d:%02d:%02d]",
             ptVar1->tm_year + 0x76c, ptVar1->tm_mon + 1, ptVar1->tm_mday,
             ptVar1->tm_hour, ptVar1->tm_min, ptVar1->tm_sec);
    snprintf(acStack_44, 0x3b, "%s%s", "BITMAIN_OPENSOURCE", acStack_6c);
    FUN_00021c34(acStack_44, 0x3b, auStack_8c);
    FUN_00021c34(auStack_8c, 0x20, auStack_ac);
    iVar2 = FUN_00042554(auStack_ac, 0x20);
    if (iVar2 == 0) {
        FUN_0003fa44();
        return 1;
    }
    if (((DAT_00074500 == '\0') && (DAT_00068bd4 == '\0')) &&
        (DAT_00067db4 < 3)) {
        return 0;
    }
    uVar3 = FUN_00042c44();
    return uVar3;
}

void FUN_00042dd4(pthread_mutex_t *param_1, undefined4 param_2,
                  undefined4 param_3)

{
    int iVar1;
    int *piVar2;
    char acStack_810[2052];

    iVar1 = pthread_mutex_unlock(param_1);
    if (iVar1 == 0) {
        return;
    }
    piVar2 = __errno_location();
    snprintf(acStack_810, 0x800,
             "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d", *piVar2,
             "driver-btm-c5_socketa.c", param_2, param_3);
    FUN_00020f58(3, acStack_810, 1);
    FUN_0003eba0(1);
    return;
}

void FUN_00042e50(undefined4 param_1, undefined4 param_2)

{
    int *piVar1;
    char acStack_810[2052];

    piVar1 = __errno_location();
    snprintf(acStack_810, 0x800,
             "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar1,
             "driver-btm-c5_socketa.c", param_1, param_2);
    FUN_00020f58(3, acStack_810, 1);
    FUN_0003eba0(1);
    return;
}

undefined8 FUN_00042eb4(void)

{
    undefined8 uVar1;
    int iVar2;

    uVar1 = CONCAT44(DAT_0006acdc, DAT_0006acd8);
    if (DAT_0006acd8 != 0 || DAT_0006acdc != 0) {
        iVar2 = pthread_mutex_lock((pthread_mutex_t *)&DAT_0007688c);
        if (iVar2 != 0) {
            FUN_00042e50("bitmain_c5_scanhash", 0x9f);
        }
        DAT_0006acd8 = 0;
        DAT_0006acdc = 0;
        FUN_00042dd4(&DAT_0007688c, "bitmain_c5_scanhash", 0xa1);
        (*DAT_00067ed8)();
    }
    FUN_00023b9c(2);
    return uVar1;
}

int FUN_00042f3c(void)

{
    int iVar1;
    size_t sVar2;
    int iVar3;
    size_t sVar4;
    int iVar5;
    int *piVar6;
    uint uVar7;
    uint uVar8;
    char *__s;
    undefined4 uVar9;
    char *__s_00;
    char acStack_828[2052];

    iVar1 = DAT_0006acd4;
    if (DAT_0006acd4 != 0) {
        iVar1 = pthread_mutex_lock((pthread_mutex_t *)&DAT_00076874);
        if (iVar1 != 0) {
            piVar6 = __errno_location();
            snprintf(acStack_828, 0x800,
                     "WTF MUTEX ERROR ON LOCK! errno=%d in %s %s():%d", *piVar6,
                     "driver-btm-c5_socketa.c", "bitmain_api_stats", 0x183);
            FUN_00020f58(3, acStack_828, 1);
            FUN_0003eba0(1);
        }
        if (DAT_0006acd0 == 0x128) {
            iVar1 = 0;
        } else {
            uVar8 = 0;
            iVar1 = 0;
            do {
                iVar5 = DAT_0006acd4;
                __s = (char *)(DAT_0006acd4 + uVar8 + 4);
                uVar9 = *(undefined4 *)(DAT_0006acd4 + uVar8);
                sVar2 = strlen(__s);
                iVar3 = sVar2 + uVar8 + 5;
                __s_00 = (char *)(iVar5 + iVar3);
                if ((DAT_00068bd5 != '\0') &&
                    (((DAT_00074500 != '\0' || (DAT_00068bd4 != '\0')) ||
                      (6 < DAT_00067db4)))) {
                    snprintf(acStack_828, 0x800,
                             "[%s], update %s type %d value 0x%x",
                             "bitmain_api_stats", __s, uVar9,
                             (uint) * (byte *)(iVar5 + iVar3));
                    FUN_00020f58(7, acStack_828, 0);
                }
                iVar1 = FUN_00018850(iVar1, __s, uVar9, __s_00, 1);
                sVar2 = strlen(__s);
                switch (uVar9) {
                case 0:
                case 1:
                case 2:
                    sVar4 = strlen(__s_00);
                    iVar5 = sVar4 + 1;
                    break;
                case 3:
                case 4:
                case 5:
                case 6:
                case 7:
                case 8:
                case 9:
                case 0x10:
                case 0x13:
                case 0x16:
                case 0x1a:
                    iVar5 = 4;
                    break;
                case 10:
                case 0xb:
                case 0xc:
                case 0xd:
                case 0xf:
                case 0x11:
                case 0x12:
                case 0x14:
                case 0x15:
                case 0x17:
                case 0x18:
                case 0x19:
                    iVar5 = 8;
                    break;
                case 0xe:
                    iVar5 = 1;
                    break;
                default:
                    if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                        (iVar5 = 0, 2 < DAT_00067db4)) {
                        snprintf(acStack_828, 0x800,
                                 "Should not happy for unknown data type %d",
                                 uVar9);
                        FUN_00020f58(3, acStack_828, 0);
                        iVar5 = 0;
                    }
                }
                uVar8 = iVar5 + sVar2 + 5 + uVar8;
                uVar7 = DAT_0006acd0 - 0x128;
            } while (uVar8 < uVar7);
            if (uVar7 != uVar8) {
                if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
                    (2 < DAT_00067db4)) {
                    snprintf(acStack_828, 0x800,
                             "length mismatch; sckt %d; actual %d", uVar7,
                             uVar8);
                    FUN_00020f58(3, acStack_828, 0);
                }
                iVar1 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00076874);
                if (iVar1 != 0) {
                    piVar6 = __errno_location();
                    snprintf(
                        acStack_828, 0x800,
                        "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d",
                        *piVar6, "driver-btm-c5_socketa.c", "bitmain_api_stats",
                        0x197);
                    FUN_00020f58(3, acStack_828, 1);
                    FUN_0003eba0(1);
                }
                (*DAT_00067ed8)();
                return 0;
            }
        }
        iVar5 = pthread_mutex_unlock((pthread_mutex_t *)&DAT_00076874);
        if (iVar5 != 0) {
            piVar6 = __errno_location();
            snprintf(acStack_828, 0x800,
                     "WTF MUTEX ERROR ON UNLOCK! errno=%d in %s %s():%d",
                     *piVar6, "driver-btm-c5_socketa.c", "bitmain_api_stats",
                     0x19d);
            FUN_00020f58(3, acStack_828, 1);
            FUN_0003eba0(1);
        }
        (*DAT_00067ed8)();
    }
    return iVar1;
}

void *FUN_00043370(void *param_1, size_t *param_2)

{
    char cVar1;
    size_t sVar2;
    size_t sVar3;
    void *__dest;
    undefined4 uVar4;
    undefined4 *puVar5;
    int iVar6;
    undefined4 *puVar7;
    char *__s;
    char *__s_00;
    int iVar8;
    size_t __n;
    int *piVar9;
    int *piVar10;
    undefined4 uVar12;
    undefined4 uVar13;
    undefined4 uVar14;
    undefined4 extraout_s1;
    char acStack_828[2052];
    int *piVar11;

    uVar14 = FUN_0001d4e4();
    __s_00 = *(char **)((int)param_1 + 0x2a0);
    iVar8 = *(int *)((int)param_1 + 0x6ac);
    __n = *(size_t *)((int)param_1 + 0x624);
    sVar2 = strlen(__s_00);
    __s = *(char **)((int)param_1 + 0x264);
    sVar3 = strlen(__s);
    sVar3 = __n + 0x74a + iVar8 * 0x20 + sVar2 + sVar3;
    __dest = calloc(1, sVar3);
    if (__dest == (void *)0x0) {
        if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
            (2 < DAT_00067db4)) {
            snprintf(acStack_828, 0x800,
                     "malloc temp job data buf failed: %d\n", sVar3);
            FUN_00020f58(3, acStack_828, 0);
            return (void *)0x0;
        }
    } else {
        memcpy(__dest, param_1, 0x738);
        memcpy((void *)((int)__dest + 0x738), *(void **)((int)param_1 + 0x620),
               __n);
        iVar6 = __n + 0x738;
        if (0 < iVar8) {
            piVar9 = *(int **)((int)param_1 + 0x2a4);
            puVar7 = (undefined4 *)((int)__dest + iVar6);
            piVar10 = piVar9;
            do {
                piVar11 = piVar10 + 1;
                puVar5 = (undefined4 *)*piVar10;
                uVar13 = puVar5[1];
                uVar12 = puVar5[2];
                uVar4 = puVar5[3];
                *puVar7 = *puVar5;
                puVar7[1] = uVar13;
                puVar7[2] = uVar12;
                puVar7[3] = uVar4;
                uVar13 = puVar5[5];
                uVar12 = puVar5[6];
                uVar4 = puVar5[7];
                puVar7[4] = puVar5[4];
                puVar7[5] = uVar13;
                puVar7[6] = uVar12;
                puVar7[7] = uVar4;
                puVar7 = puVar7 + 8;
                piVar10 = piVar11;
            } while (piVar11 != piVar9 + iVar8);
            iVar6 = iVar8 * 0x20 + iVar6;
        }
        sVar2 = strlen(__s_00);
        memcpy((void *)((int)__dest + iVar6), __s_00, sVar2 + 1);
        iVar6 = sVar2 + 1 + iVar6;
        sVar2 = strlen(__s);
        memcpy((void *)((int)__dest + iVar6), __s, sVar2 + 1);
        cVar1 = DAT_00074500;
        iVar6 = iVar6 + sVar2;
        *(undefined4 *)((int)__dest + iVar6 + 1) = uVar14;
        *(undefined4 *)((int)__dest + iVar6 + 5) = extraout_s1;
        uVar14 = DAT_00068748._4_4_;
        *(undefined4 *)((int)__dest + iVar6 + 9) = (undefined4)DAT_00068748;
        *(undefined4 *)((int)__dest + iVar6 + 0xd) = uVar14;
        if (((cVar1 != '\0') || (DAT_00068bd4 != '\0')) || (4 < DAT_00067db4)) {
            snprintf(acStack_828, 0x800, "job buf total len:%d, offset:%d\n",
                     sVar3, iVar6 + 0x11);
            FUN_00020f58(5, acStack_828, 0);
        }
        *param_2 = sVar3;
    }
    return __dest;
}

void FUN_000435e4(int param_1)

{
    undefined4 uVar1;
    int iVar2;
    void *__ptr;
    int iVar3;
    undefined4 *puVar4;
    bool bVar5;
    int local_814;
    char local_810[8];
    undefined2 uStack_808;
    undefined1 local_806;
    char acStack_804[2036];

    puVar4 = (undefined4 *)**(undefined4 **)(param_1 + 0x98);
    if (((DAT_00074500 != '\0') || (DAT_00068bd4 != '\0')) ||
        (4 < DAT_00067db4)) {
        builtin_strncpy(local_810, "update j", 8);
        uStack_808 = 0x626f;
        local_806 = 0;
        FUN_00020f58(5, local_810, 0);
    }
    *(undefined1 *)((int)puVar4 + 0x3f) = 0;
    *(undefined1 *)((int)puVar4 + 0x3e) = 0;
    uVar1 = FUN_00036cd4(puVar4, *puVar4);
    FUN_0002cea0(&stack0xfffff7e8, "driver-btm-c5_socketa.c",
                 "bitmain_c5_update", 0x105, uVar1);
    iVar2 = FUN_00031ff4();
    if (*(char *)(iVar2 + 0x280) == '\0') {
        builtin_strncpy(local_810, "Bitmain ", 8);
        local_806 = 0x20;
        uStack_808 = 0x3953;
        builtin_strncpy(acStack_804, "as to use stratum pools", 0x18);
        FUN_00020f58(3, local_810, 1);
        FUN_0003eba0(1);
    }
    bVar5 = DAT_00069178 != 0;
    iVar3 = DAT_00069178;
    if (bVar5) {
        iVar3 = 0;
        *(undefined1 *)(iVar2 + 0x2a8) = 1;
    }
    if (bVar5) {
        DAT_00069178 = iVar3;
    }
    __ptr = (void *)FUN_00043370(iVar2, &local_814);
    if (((local_814 != 0) && (iVar2 = FUN_00042610(), iVar2 != 0)) &&
        ((DAT_00074500 != '\0' ||
          ((DAT_00068bd4 != '\0' || (2 < DAT_00067db4)))))) {
        snprintf(local_810, 0x800, "%s: update job failed.",
                 "bitmain_c5_update");
        FUN_00020f58(3, local_810, 0);
    }
    free(__ptr);
    return;
}

undefined4 FUN_000437bc(int param_1)

{
    pthread_t __th;
    ssize_t sVar1;
    int iVar2;
    int *__arg;
    int iVar3;
    size_t sVar4;
    int iVar5;
    char *__s2;
    int __fd;
    undefined4 local_200;
    pthread_t pStack_1fc;
    char local_1f8[8];
    undefined4 local_1f0;
    undefined4 local_1ec;
    undefined4 local_1e8;
    undefined4 local_1e4;
    undefined4 local_1e0;
    undefined4 local_1dc;
    undefined4 local_1d8;
    undefined4 local_1d4;
    undefined4 local_1d0;
    undefined4 local_1cc;
    undefined4 local_1c8;
    undefined4 local_1c4;
    undefined4 local_1c0;
    undefined4 local_1bc;
    undefined4 local_1b8;
    undefined4 local_1b4;
    undefined4 local_1b0;
    undefined4 local_1ac;
    undefined4 local_1a8;
    undefined1 auStack_1a4[124];
    undefined4 local_128;
    undefined1 auStack_124[256];

    __th = pthread_self();
    pthread_detach(__th);
    local_1ec = 0;
    builtin_strncpy(local_1f8, "ct_a/mai", 8);
    local_1f0 = 0x6e;
    prctl(0xf, local_1f8);
    __fd = *(int *)(param_1 + 8);
    do {
        while (true) {
            while (true) {
                local_1a8 = 0;
                memset(auStack_1a4, 0, 0x7c);
                sVar1 = recv(__fd, &local_1a8, 0x80, 0);
                if (sVar1 < 1) {
                    return 0;
                }
                local_1e8 = 0;
                local_1e4 = 0;
                local_1c8 = 0;
                local_1c4 = 0;
                local_200 = 0;
                local_1e0 = 0;
                local_1dc = 0;
                local_1d8 = 0;
                local_1d4 = 0;
                local_1d0 = 0;
                local_1cc = 0;
                local_1c0 = 0;
                local_1bc = 0;
                local_1b8 = 0;
                local_1b4 = 0;
                local_1b0 = 0;
                local_1ac = 0;
                __isoc99_sscanf(&local_1a8, "%x%s%s", &local_200, &local_1c8,
                                &local_1e8);
                iVar2 = strcmp((char *)&local_1c8, "regist");
                if (iVar2 == 0)
                    break;
                iVar2 = DAT_0006ace0 + 1;
                memcpy((void *)(DAT_0006ace0 * 0x80 + 0x6ad08), &local_1a8,
                       0x80);
                DAT_0006ace0 = iVar2;
            }
            __arg = (int *)calloc(0x98, 1);
            iVar2 = DAT_0006ace4;
            if (DAT_0006ace4 != 0)
                break;
        LAB_00043a60:
            local_128 = 0;
            memset(auStack_124, 0, 0xfc);
            sprintf((char *)&local_128, "%x %d %s %s %s", 0x3f, 0, "reg_resp",
                    "no_name", &local_1e8);
            sVar4 = strlen((char *)&local_128);
            send(__fd, &local_128, sVar4 + 1, 0);
            free(__arg);
        }
        __s2 = &DAT_0006ed0c;
        iVar5 = 0;
        do {
            iVar3 = strcmp((char *)&local_1e8, __s2);
            __s2 = __s2 + 0x88;
            if (iVar3 == 0) {
                iVar3 = *(int *)(&DAT_0006ed8c + iVar5 * 0x88);
                __arg[3] = *(int *)(&DAT_0006ed08 + iVar5 * 0x88);
                __arg[0x25] = iVar3;
                break;
            }
            iVar5 = iVar5 + 1;
        } while (iVar5 != iVar2);
        if (iVar2 == iVar5)
            goto LAB_00043a60;
        *__arg = DAT_00068a40;
        sVar4 = strlen((char *)&local_1e8);
        memcpy(__arg + 4, &local_1e8, sVar4 + 1);
        __arg[0x24] = 0;
        pthread_create(&pStack_1fc, (pthread_attr_t *)0x0, FUN_00043adc, __arg);
        iVar2 = __arg[0x24];
        while (iVar2 == 0) {
            usleep(10000);
            iVar2 = __arg[0x24];
        }
        iVar2 = *__arg;
        local_128 = 0;
        if (iVar2 != DAT_00068a40) {
            DAT_00068a40 = iVar2;
        }
        memset(auStack_124, 0, 0xfc);
        sprintf((char *)&local_128, "%x %d %s %s %s", 0x3f, iVar2, "reg_resp",
                &DAT_000563e0, &local_1e8);
        sVar4 = strlen((char *)&local_128);
        send(__fd, &local_128, sVar4 + 1, 0);
        DAT_00068a40 = DAT_00068a40 + 1;
    } while (true);
}

undefined4 FUN_00043adc(uint *param_1)

{
    pthread_t __th;
    int iVar1;
    int iVar2;
    size_t sVar3;
    void *__buf;
    ssize_t sVar4;
    uint uVar5;
    code *pcVar6;
    undefined4 local_260;
    socklen_t local_25c;
    char local_258[16];
    sockaddr local_248;
    sockaddr sStack_238;
    char local_228[256];
    char local_128[260];

    __th = pthread_self();
    pthread_detach(__th);
    local_258[0] = '\0';
    local_258[1] = '\0';
    local_258[2] = '\0';
    local_258[3] = '\0';
    local_258[4] = '\0';
    local_258[5] = '\0';
    local_258[6] = '\0';
    local_258[7] = '\0';
    local_258[8] = '\0';
    local_258[9] = '\0';
    local_258[10] = '\0';
    local_258[0xb] = '\0';
    local_258[0xc] = '\0';
    local_258[0xd] = '\0';
    local_258[0xe] = '\0';
    local_258[0xf] = '\0';
    sprintf(local_258, "ct_a/fcb/%d", *param_1);
    prctl(0xf, local_258);
    local_248.sa_family = 2;
    local_248.sa_data._2_4_ = inet_addr("127.0.0.1");
    iVar1 = socket(2, 1, 0);
    if (iVar1 < 0) {
        perror("socket error");
        return 0;
    }
    local_260 = 1;
    iVar2 = setsockopt(iVar1, 1, 2, &local_260, 4);
    if (iVar2 < 0) {
        perror("set sockopt err");
        return 0;
    }
    uVar5 = *param_1;
    while (true) {
        local_248.sa_data._0_2_ =
            (ushort)((uVar5 & 0xff) << 8) | (ushort)(uVar5 >> 8) & 0xff;
        iVar2 = bind(iVar1, &local_248, 0x10);
        if (-1 < iVar2)
            break;
        perror("bind error");
        uVar5 = *param_1 + 1;
        *param_1 = uVar5;
    }
    iVar2 = listen(iVar1, 5);
    if (iVar2 < 0) {
        perror("listen error");
    } else {
        local_25c = 0x10;
        param_1[0x24] = 1;
        iVar1 = accept(iVar1, &sStack_238, &local_25c);
        if (-1 < iVar1) {
            local_228[0] = '\0';
            local_228[1] = '\0';
            local_228[2] = '\0';
            local_228[3] = '\0';
            memset(local_228 + 4, 0, 0xfc);
            sprintf(local_228, "%x %s\n", 0x3f, param_1 + 4);
            sVar3 = strlen(local_228);
            send(iVar1, local_228, sVar3 + 1, 0);
            sVar3 = param_1[0x25];
            __buf = malloc(sVar3);
            recv(iVar1, __buf, sVar3, 0);
            do {
                sVar4 = recv(iVar1, __buf, param_1[0x25], 0);
                if (sVar4 < 1) {
                    pcVar6 = (code *)0x0;
                } else {
                    pcVar6 = (code *)param_1[3];
                    if (pcVar6 != (code *)0x0) {
                        pcVar6 = (code *)(*pcVar6)(__buf);
                    }
                }
                local_128[0] = '\0';
                local_128[1] = '\0';
                local_128[2] = '\0';
                local_128[3] = '\0';
                memset(local_128 + 4, 0, 0xfc);
                sprintf(local_128, "%x %d %s %s", 0x3f, pcVar6, param_1 + 4,
                        &DAT_000563e0);
                sVar3 = strlen(local_128);
                send(iVar1, local_128, sVar3 + 1, 0);
            } while (true);
        }
        perror("accept error");
    }
    return 0;
}

undefined4 FUN_00043d64(int param_1, int param_2)

{
    void *pvVar1;
    undefined4 uVar2;
    in_addr_t iVar3;
    int __fd;
    int iVar4;
    ssize_t sVar5;
    undefined4 *__arg;
    undefined *__dest;
    void *__src;
    void *pvVar6;
    pthread_t pStack_32c;
    sockaddr local_328;
    char local_318[20];
    uint local_304;
    undefined1 auStack_300[232];
    undefined4 local_218;
    undefined1 auStack_214[508];

    if (DAT_0006ace8 == 0) {
        pthread_mutex_init((pthread_mutex_t *)&DAT_0006acec,
                           (pthread_mutexattr_t *)0x0);
        if (param_2 != 0) {
            __dest = &DAT_0006ed0c;
            __src = (void *)(param_1 + 4);
            do {
                pvVar1 = memcpy(__dest, __src, 0x80);
                pvVar6 = (void *)((int)__src + 0x88);
                __dest = (undefined *)((int)pvVar1 + 0x88);
                uVar2 = *(undefined4 *)((int)__src + -4);
                *(undefined4 *)((int)pvVar1 + 0x80) =
                    *(undefined4 *)((int)__src + 0x80);
                *(undefined4 *)((int)pvVar1 + -4) = uVar2;
                __src = pvVar6;
            } while ((int)pvVar6 + (param_2 * -0x88 - (param_1 + 4)) != 0);
        }
        local_328.sa_data[4] = '\0';
        local_328.sa_data[5] = '\0';
        local_328.sa_data[6] = '\0';
        local_328.sa_data[7] = '\0';
        local_328.sa_data[8] = '\0';
        local_328.sa_data[9] = '\0';
        local_328.sa_data[10] = '\0';
        local_328.sa_data[0xb] = '\0';
        local_328.sa_data[0xc] = '\0';
        local_328.sa_data[0xd] = '\0';
        local_328.sa_data[0] = '\0';
        local_328.sa_data[1] = '\0';
        local_328.sa_data[2] = '\0';
        local_328.sa_data[3] = '\0';
        local_328.sa_family = 2;
        DAT_0006ace4 = param_2;
        iVar3 = inet_addr("127.0.0.1");
        local_328.sa_data._2_2_ = SUB42(iVar3, 0);
        local_328.sa_data._4_2_ = SUB42(iVar3 >> 0x10, 0);
        local_328.sa_data[0] = 'V';
        local_328.sa_data[1] = '\n';
        __fd = socket(2, 1, 0);
        if (__fd < 0) {
            uVar2 = 0xfffffffc;
            perror("socket err:");
        } else {
            while (iVar4 = connect(__fd, &local_328, 0x10), iVar4 < 0) {
                perror("connect err:");
                sleep(1);
            }
            local_218 = 0;
            memset(auStack_214, 0, 0x1fc);
            sVar5 = recv(__fd, &local_218, 0x100, 0);
            if (0 < sVar5) {
                auStack_214[sVar5 + -4] = 0;
            }
            builtin_strncpy(local_318, "func1 func2 func3 fu", 0x14);
            local_304._0_1_ = 'n';
            local_304._1_1_ = 'c';
            local_304._2_1_ = '4';
            local_304._3_1_ = '\0';
            memset(auStack_300, 0, 0xe8);
            send(__fd, local_318, 0x18, 0);
            sVar5 = recv(__fd, &local_218, 0x100, 0);
            if (0 < sVar5) {
                auStack_214[sVar5 + -4] = 0;
            }
            builtin_strncpy(local_318, "3f heart-beats 22027", 0x14);
            local_304 = local_304 & 0xffffff00;
            send(__fd, local_318, 0x15, 0);
            DAT_0006ad04 = __fd;
            __arg = (undefined4 *)malloc(0xc);
            __arg[2] = __fd;
            *__arg = 0x560a;
            pthread_create(&pStack_32c, (pthread_attr_t *)0x0, FUN_000437bc,
                           __arg);
            DAT_0006ace8 = 1;
            uVar2 = 0;
        }
    } else {
        uVar2 = 0xffffffff;
    }
    return uVar2;
}

/* WARNING: Type propagation algorithm not settling */

undefined4 FUN_00043fa4(int param_1)

{
    pthread_mutex_t *__mutex;
    size_t sVar1;
    in_addr_t iVar2;
    int iVar3;
    int iVar4;
    ssize_t sVar5;
    undefined4 uVar6;
    uint local_498[2];
    sockaddr local_490;
    undefined4 local_480;
    undefined4 local_47c;
    undefined4 local_478;
    undefined4 local_474;
    undefined4 local_470;
    undefined4 local_46c;
    undefined4 local_468;
    undefined4 local_464;
    undefined4 local_460;
    undefined4 local_45c;
    undefined4 local_458;
    undefined4 local_454;
    undefined4 local_450;
    undefined4 local_44c;
    undefined4 local_448;
    undefined4 local_444;
    undefined4 local_440;
    undefined4 local_43c;
    undefined4 local_438;
    undefined4 local_434;
    undefined4 local_430;
    undefined4 local_42c;
    undefined4 local_428;
    undefined4 local_424;
    undefined4 local_420;
    undefined1 auStack_41c[124];
    undefined4 local_3a0;
    undefined1 auStack_39c[124];
    undefined4 local_320;
    undefined1 auStack_31c[252];
    undefined4 local_220;
    undefined1 auStack_21c[512];

    if (DAT_0006ace8 == 0) {
        uVar6 = 0xffffffff;
    } else {
        __mutex = (pthread_mutex_t *)malloc(0x24);
        pthread_mutex_init(__mutex, (pthread_mutexattr_t *)0x0);
        iVar4 = DAT_0006ad04;
        local_320 = 0;
        memset(auStack_31c, 0, 0xfc);
        sprintf((char *)&local_320, "%x regist %s", 0x3f, param_1);
        iVar3 = DAT_0006ace0;
        sVar1 = strlen((char *)&local_320);
        send(iVar4, &local_320, sVar1 + 1, 0);
        local_420 = 0;
        memset(auStack_41c, 0, 0x7c);
        while (iVar3 == DAT_0006ace0) {
            usleep(1000);
        }
        memcpy(&local_420, (void *)(iVar3 * 0x80 + 0x6ad08), 0x80);
        local_498[0] = 0;
        local_498[1] = 0;
        local_480 = 0;
        local_47c = 0;
        local_460 = 0;
        local_45c = 0;
        local_440 = 0;
        local_43c = 0;
        local_478 = 0;
        local_474 = 0;
        local_470 = 0;
        local_46c = 0;
        local_468 = 0;
        local_464 = 0;
        local_458 = 0;
        local_454 = 0;
        local_450 = 0;
        local_44c = 0;
        local_448 = 0;
        local_444 = 0;
        local_438 = 0;
        local_434 = 0;
        local_430 = 0;
        local_42c = 0;
        local_428 = 0;
        local_424 = 0;
        __isoc99_sscanf(&local_420, "%x%d%s%s%s", local_498 + 1, local_498,
                        &local_480, &local_460, &local_440);
        if (local_498[0] == 0) {
            uVar6 = 0xfffffffc;
        } else {
            local_490.sa_family = 2;
            local_490.sa_data[0] = '\0';
            local_490.sa_data[1] = '\0';
            local_490.sa_data[2] = '\0';
            local_490.sa_data[3] = '\0';
            local_490.sa_data[4] = '\0';
            local_490.sa_data[5] = '\0';
            local_490.sa_data[6] = '\0';
            local_490.sa_data[7] = '\0';
            local_490.sa_data[8] = '\0';
            local_490.sa_data[9] = '\0';
            local_490.sa_data[10] = '\0';
            local_490.sa_data[0xb] = '\0';
            local_490.sa_data[0xc] = '\0';
            local_490.sa_data[0xd] = '\0';
            iVar2 = inet_addr("127.0.0.1");
            local_490.sa_data._2_2_ = SUB42(iVar2, 0);
            local_490.sa_data._4_2_ = SUB42(iVar2 >> 0x10, 0);
            local_490.sa_data._0_2_ = (ushort)((local_498[0] & 0xff) << 8) |
                                      (ushort)(local_498[0] >> 8) & 0xff;
            iVar3 = socket(2, 1, 0);
            if (iVar3 < 0) {
                perror("socket err:");
                uVar6 = 0xfffffffc;
            } else {
                iVar4 = connect(iVar3, &local_490, 0x10);
                if (iVar4 < 0) {
                    perror("connect err:");
                    uVar6 = 0xfffffffd;
                } else {
                    local_220 = 0;
                    memset(auStack_21c, 0, 0x1fc);
                    sVar5 = recv(iVar3, &local_220, 0x200, 0);
                    if (0 < sVar5) {
                        auStack_21c[sVar5 + -4] = 0;
                    }
                    memset(auStack_39c, 0, 0x7c);
                    local_3a0 = 0x214b4f;
                    send(iVar3, &local_3a0, 4, 0);
                    uVar6 = 0;
                    *(int *)((int)__mutex + 0x20) = iVar3;
                    *(pthread_mutex_t **)(param_1 + 0x80) = __mutex;
                    __mutex[1].__data.__lock = local_498[0];
                }
            }
        }
    }
    return uVar6;
}

undefined4 FUN_00044264(int param_1, void *param_2, size_t param_3,
                        int *param_4)

{
    int iVar1;
    ssize_t sVar2;
    undefined4 uVar3;
    pthread_mutex_t *__mutex;
    int local_160;
    int local_15c;
    int local_158;
    int local_154;
    int local_150;
    int local_14c;
    int local_148;
    int local_144;
    int local_140;
    int local_13c;
    int local_138;
    int local_134;
    int local_130;
    int local_12c;
    int local_128;
    int local_124;
    int local_120;
    int local_11c;
    int local_118;
    undefined1 auStack_114[252];

    if (DAT_0006ace8 == 0) {
        uVar3 = 0xffffffff;
    } else {
        __mutex = *(pthread_mutex_t **)(param_1 + 0x80);
        if (__mutex == (pthread_mutex_t *)0x0) {
            uVar3 = 0xfffffffe;
        } else {
            iVar1 = pthread_mutex_trylock(__mutex);
            if (iVar1 == 0) {
                sVar2 =
                    send(*(int *)((int)__mutex + 0x20), param_2, param_3, 0);
                if (sVar2 < 1) {
                    uVar3 = 0xfffffffc;
                    pthread_mutex_unlock(__mutex);
                } else {
                    local_118 = iVar1;
                    memset(auStack_114, 0, 0xfc);
                    sVar2 = recv(*(int *)((int)__mutex + 0x20), &local_118,
                                 0x100, 0);
                    local_160 = iVar1;
                    local_15c = iVar1;
                    local_158 = iVar1;
                    local_154 = iVar1;
                    local_150 = iVar1;
                    local_14c = iVar1;
                    local_148 = iVar1;
                    local_144 = iVar1;
                    local_140 = iVar1;
                    local_13c = iVar1;
                    local_138 = iVar1;
                    local_134 = iVar1;
                    local_130 = iVar1;
                    local_12c = iVar1;
                    local_128 = iVar1;
                    local_124 = iVar1;
                    local_120 = iVar1;
                    local_11c = iVar1;
                    if (0 < sVar2) {
                        __isoc99_sscanf(&local_118, &DAT_000564a0, &local_160,
                                        &local_15c, &local_158, &local_138);
                    }
                    if (param_4 != (int *)0x0) {
                        *param_4 = local_15c;
                    }
                    pthread_mutex_unlock(__mutex);
                    uVar3 = 0;
                }
            } else {
                uVar3 = 0xfffffffd;
            }
        }
    }
    return uVar3;
}

undefined4 FUN_000443c8(void *param_1, size_t param_2, uint *param_3)

{
    uint uVar1;

    uVar1 = param_3[1] + param_2;
    if (uVar1 <= *param_3) {
        memcpy((void *)(param_3[2] + param_3[1]), param_1, param_2);
        uVar1 = param_2 + param_3[1];
    }
    param_3[1] = uVar1;
    return 0;
}

undefined4 FUN_0004445c(uint param_1, int param_2, code *param_3,
                        undefined4 param_4, uint param_5)

{
    int iVar1;
    uint uVar2;
    char *pcVar3;
    undefined4 uVar4;
    uint uVar5;
    uint uVar6;
    uint local_3c;
    char acStack_38[20];

    local_3c = 0;
    iVar1 = (*param_3)(&DAT_00051dc0, 1, param_4);
    if (iVar1 == 0) {
        uVar5 = param_1;
        uVar2 = param_1;
        do {
            do {
                uVar6 = uVar2;
                if (param_1 + param_2 <= uVar6) {
                    if ((uVar5 != uVar6) &&
                        (iVar1 = (*param_3)(uVar5, uVar6 - uVar5, param_4),
                         iVar1 != 0)) {
                        return 0xffffffff;
                    }
                LAB_000446c8:
                    uVar4 = (*param_3)(&DAT_00051dc0, 1, param_4);
                    return uVar4;
                }
                uVar2 =
                    FUN_00047e38(uVar6, (param_1 + param_2) - uVar6, &local_3c);
                if (uVar2 == 0) {
                    return 0xffffffff;
                }
            } while (((0x1f < (int)local_3c &&
                       (local_3c != 0x22 && local_3c != 0x5c)) &&
                      (((uint)(local_3c == 0x2f) & param_5 >> 10) == 0)) &&
                     (((uint)(0x7f < (int)local_3c) & param_5 >> 6) == 0));
            if ((uVar5 != uVar6) &&
                (iVar1 = (*param_3)(uVar5, uVar6 - uVar5, param_4),
                 iVar1 != 0)) {
                return 0xffffffff;
            }
            if (uVar6 == uVar2)
                goto LAB_000446c8;
            if (local_3c == 0xc) {
                uVar4 = 2;
                pcVar3 = "\\f";
            } else if ((int)local_3c < 0xd) {
                if (local_3c == 9) {
                    uVar4 = 2;
                    pcVar3 = "\\t";
                } else if (local_3c == 10) {
                    uVar4 = 2;
                    pcVar3 = "\\n";
                } else if (local_3c == 8) {
                    uVar4 = 2;
                    pcVar3 = "\\b";
                } else {
                LAB_000445c0:
                    if ((int)local_3c < 0x10000)
                        goto LAB_000445c8;
                LAB_00044600:
                    local_3c = local_3c - 0x10000;
                    snprintf(acStack_38, 0xd, "\\u%04X\\u%04X",
                             local_3c * 0x1000 >> 0x16 | 0xd800,
                             local_3c & 0x3ff | 0xdc00);
                    uVar4 = 0xc;
                    pcVar3 = acStack_38;
                }
            } else if (local_3c == 0x22) {
                uVar4 = 2;
                pcVar3 = "\\\"";
            } else if ((int)local_3c < 0x23) {
                if (local_3c == 0xd) {
                    uVar4 = 2;
                    pcVar3 = "\\r";
                } else {
                    if (0xffff < (int)local_3c)
                        goto LAB_00044600;
                LAB_000445c8:
                    snprintf(acStack_38, 0xd, "\\u%04X");
                    uVar4 = 6;
                    pcVar3 = acStack_38;
                }
            } else if (local_3c == 0x2f) {
                uVar4 = 2;
                pcVar3 = "\\/";
            } else {
                if (local_3c != 0x5c)
                    goto LAB_000445c0;
                uVar4 = 2;
                pcVar3 = "\\\\";
            }
            iVar1 = (*param_3)(pcVar3, uVar4, param_4);
            uVar5 = uVar2;
        } while (iVar1 == 0);
    }
    return 0xffffffff;
}

undefined4 FUN_000446e4(uint param_1, int param_2, int param_3,
                        code *UNRECOVERED_JUMPTABLE, undefined4 param_5)

{
    int iVar1;
    undefined4 uVar2;
    uint uVar3;
    uint uVar4;

    if ((param_1 & 0x1f) == 0) {
        if ((param_3 != 0) && ((param_1 & 0x20) == 0)) {
            /* WARNING: Could not recover jumptable at 0x00044790. Too many
             * branches */
            /* WARNING: Treating indirect jump as call */
            uVar2 = (*UNRECOVERED_JUMPTABLE)(" ", 1, param_5);
            return uVar2;
        }
    } else {
        uVar3 = (param_1 & 0x1f) * param_2;
        iVar1 = (*UNRECOVERED_JUMPTABLE)(&DAT_0004c858, 1, param_5);
        if (iVar1 != 0) {
            return 0xffffffff;
        }
        for (; uVar3 != 0; uVar3 = uVar3 - uVar4) {
            uVar4 = uVar3;
            if (0x1f < uVar3) {
                uVar4 = 0x20;
            }
            iVar1 = (*UNRECOVERED_JUMPTABLE)("                                ",
                                             uVar4, param_5);
            if (iVar1 != 0) {
                return 0xffffffff;
            }
        }
    }
    return 0;
}

undefined4 FUN_00044794(undefined4 param_1, undefined4 param_2, char *param_3)

{
    int iVar1;
    undefined4 uVar2;

    snprintf(param_3, 0xb, "%p", param_2);
    iVar1 = FUN_00045b10(param_1, param_3);
    if (iVar1 == 0) {
        uVar2 = FUN_00048a28();
        uVar2 = FUN_0004587c(param_1, param_3, uVar2);
        return uVar2;
    }
    return 0xffffffff;
}

undefined4 FUN_000447ec(undefined4 *param_1, uint param_2, int param_3,
                        undefined4 param_4, code *param_5, undefined4 param_6)

{
    undefined4 uVar1;
    uint uVar2;
    undefined4 uVar3;
    int iVar4;
    char *pcVar5;
    size_t sVar6;
    int iVar7;
    void *__base;
    undefined *puVar8;
    int iVar9;
    undefined4 *puVar10;
    int iVar11;
    uint uVar12;
    uint uVar13;
    uint uVar14;
    uint uVar15;
    undefined4 *puVar16;
    undefined8 uVar17;
    char acStack_8c[104];

    if (param_1 != (undefined4 *)0x0) {
        uVar14 = param_2 & 0x10000;
        uVar13 = param_2 & 0xfffeffff;
        switch (*param_1) {
        case 0:
            puVar8 = &DAT_0004d734;
            if ((param_2 & 0x20) == 0) {
                uVar1 = 2;
                puVar8 = &DAT_00056514;
            } else {
                uVar1 = 1;
            }
            iVar4 = FUN_00044794(param_4, param_1, acStack_8c);
            if (iVar4 == 0) {
                iVar4 = FUN_00048364(param_1);
                if (uVar14 == 0) {
                    iVar11 = (*param_5)(&DAT_0004a4a0, 1, param_6);
                    if (iVar11 != 0) {
                        return 0xffffffff;
                    }
                    if (iVar4 == 0) {
                        FUN_00045b70(param_4, acStack_8c);
                        uVar1 = (*param_5)("}", 1, param_6);
                        return uVar1;
                    }
                } else if (iVar4 == 0) {
                LAB_00044cec:
                    FUN_00045b70(param_4, acStack_8c);
                    return 0;
                }
                iVar9 = param_3 + 1;
                iVar11 = FUN_000446e4(uVar13, iVar9, 0, param_5, param_6);
                if (iVar11 == 0) {
                    if ((param_2 & 0x80) == 0) {
                        while (true) {
                            iVar11 = FUN_000483b0(param_1, iVar4);
                            pcVar5 = (char *)FUN_000483e4(iVar4);
                            sVar6 = strlen(pcVar5);
                            FUN_0004445c(pcVar5, sVar6, param_5, param_6,
                                         uVar13);
                            iVar7 = (*param_5)(puVar8, uVar1, param_6);
                            if (iVar7 != 0)
                                break;
                            uVar3 = FUN_000483f0(iVar4);
                            iVar4 = FUN_000447ec(uVar3, uVar13, iVar9, param_4,
                                                 param_5, param_6);
                            if (iVar4 != 0) {
                                return 0xffffffff;
                            }
                            if (iVar11 == 0) {
                                iVar4 = FUN_000446e4(uVar13, param_3, 0,
                                                     param_5, param_6);
                                if (iVar4 != 0) {
                                    return 0xffffffff;
                                }
                                goto LAB_00044f74;
                            }
                            iVar4 = (*param_5)(&DAT_00051d10, 1, param_6);
                            if (iVar4 != 0) {
                                return 0xffffffff;
                            }
                            iVar7 = FUN_000446e4(uVar13, iVar9, 1, param_5,
                                                 param_6);
                            iVar4 = iVar11;
                            if (iVar7 != 0) {
                                return 0xffffffff;
                            }
                        }
                    } else {
                        sVar6 = FUN_000480e0(param_1);
                        __base = (void *)FUN_0004774c(sVar6 << 2);
                        if (__base != (void *)0x0) {
                            puVar10 = (undefined4 *)((int)__base + -4);
                            uVar2 = 0;
                            puVar16 = puVar10;
                            do {
                                uVar15 = uVar2;
                                uVar2 = uVar15 + 1;
                                uVar3 = FUN_000483e4(iVar4);
                                puVar16 = puVar16 + 1;
                                *puVar16 = uVar3;
                                iVar4 = FUN_000483b0(param_1, iVar4);
                            } while (iVar4 != 0);
                            if (sVar6 != uVar2) {
                                /* WARNING: Subroutine does not return */
                                __assert_fail("i == size", "dump.c", 0x160,
                                              "do_dump");
                            }
                            qsort(__base, uVar2, 4,
                                  (__compar_fn_t)&LAB_00044450);
                            uVar12 = 0;
                            do {
                                puVar10 = puVar10 + 1;
                                pcVar5 = (char *)*puVar10;
                                iVar4 = FUN_000480fc(param_1, pcVar5);
                                if (iVar4 == 0) {
                                    /* WARNING: Subroutine does not return */
                                    __assert_fail("value", "dump.c", 0x16b,
                                                  "do_dump");
                                }
                                sVar6 = strlen(pcVar5);
                                FUN_0004445c(pcVar5, sVar6, param_5, param_6,
                                             uVar13);
                                iVar11 = (*param_5)(puVar8, uVar1, param_6);
                                if ((iVar11 != 0) ||
                                    (iVar4 = FUN_000447ec(iVar4, uVar13, iVar9,
                                                          param_4, param_5,
                                                          param_6),
                                     iVar4 != 0)) {
                                LAB_00044f0c:
                                    FUN_00047764(__base);
                                    return 0xffffffff;
                                }
                                if (uVar12 < uVar15) {
                                    iVar4 =
                                        (*param_5)(&DAT_00051d10, 1, param_6);
                                    if (iVar4 != 0)
                                        goto LAB_00044f0c;
                                    iVar4 = FUN_000446e4(uVar13, iVar9, 1,
                                                         param_5, param_6);
                                } else {
                                    iVar4 = FUN_000446e4(uVar13, param_3, 0,
                                                         param_5, param_6);
                                }
                                if (iVar4 != 0)
                                    goto LAB_00044f0c;
                                uVar12 = uVar12 + 1;
                            } while (uVar12 != uVar2);
                            FUN_00047764(__base);
                        LAB_00044f74:
                            FUN_00045b70(param_4, acStack_8c);
                            if (uVar14 == 0) {
                                uVar1 = (*param_5)("}", 1, param_6);
                                return uVar1;
                            }
                            return 0;
                        }
                    }
                }
            }
            break;
        case 1:
            iVar4 = FUN_00044794(param_4, param_1, acStack_8c);
            if (iVar4 == 0) {
                uVar2 = FUN_00048468(param_1);
                if (uVar14 == 0) {
                    iVar4 = (*param_5)(&DAT_00051c98, 1, param_6);
                    if (iVar4 != 0) {
                        return 0xffffffff;
                    }
                    if (uVar2 == 0) {
                        FUN_00045b70(param_4, acStack_8c);
                        uVar1 = (*param_5)("]", 1, param_6);
                        return uVar1;
                    }
                } else if (uVar2 == 0)
                    goto LAB_00044cec;
                iVar11 = param_3 + 1;
                iVar4 = FUN_000446e4(uVar13, iVar11, 0, param_5, param_6);
                if (iVar4 == 0) {
                    uVar15 = 0;
                    while (true) {
                        uVar1 = FUN_00048484(param_1, uVar15);
                        iVar4 = FUN_000447ec(uVar1, uVar13, iVar11, param_4,
                                             param_5, param_6);
                        if (iVar4 != 0)
                            break;
                        if (uVar15 < uVar2 - 1) {
                            iVar4 = (*param_5)(&DAT_00051d10, 1, param_6);
                            if (iVar4 != 0) {
                                return 0xffffffff;
                            }
                            iVar4 = FUN_000446e4(uVar13, iVar11, 1, param_5,
                                                 param_6);
                        } else {
                            iVar4 = FUN_000446e4(uVar13, param_3, 0, param_5,
                                                 param_6);
                        }
                        if (iVar4 != 0) {
                            return 0xffffffff;
                        }
                        uVar15 = uVar15 + 1;
                        if (uVar2 == uVar15) {
                            FUN_00045b70(param_4, acStack_8c);
                            if (uVar14 == 0) {
                                uVar1 = (*param_5)("]", 1, param_6);
                                return uVar1;
                            }
                            return 0;
                        }
                    }
                }
            }
            break;
        case 2:
            uVar1 = FUN_00048630(param_1);
            uVar3 = FUN_0004864c(param_1);
            uVar1 = FUN_0004445c(uVar1, uVar3, param_5, param_6, uVar13);
            return uVar1;
        case 3:
            uVar17 = FUN_0004888c(param_1);
            iVar4 = snprintf(acStack_8c, 100, "%lld");
            uVar1 = (*param_5)(acStack_8c, iVar4, param_6, param_5, uVar17);
            return uVar1;
        case 4:
            FUN_00048938(param_1);
            iVar4 = FUN_00047ab8(acStack_8c, 100, (uVar13 << 0x10) >> 0x1b);
            if (-1 < iVar4) {
                uVar1 = (*param_5)(acStack_8c, iVar4, param_6);
                return uVar1;
            }
            break;
        case 5:
            uVar1 = (*param_5)(&DAT_0004aa48, 4, param_6);
            return uVar1;
        case 6:
            uVar1 = (*param_5)("false", 5, param_6);
            return uVar1;
        case 7:
            uVar1 = (*param_5)(&DAT_00056518, 4, param_6);
            return uVar1;
        }
    }
    return 0xffffffff;
}

undefined4 FUN_00044ffc(uint *param_1, undefined4 param_2, undefined4 param_3,
                        uint param_4)

{
    int iVar1;
    undefined4 uVar2;
    undefined1 auStack_34[32];

    if ((((param_4 & 0x200) == 0) &&
         ((param_1 == (uint *)0x0 || (1 < *param_1)))) ||
        (iVar1 = FUN_000457e8(auStack_34), iVar1 != 0)) {
        uVar2 = 0xffffffff;
    } else {
        uVar2 = FUN_000447ec(param_1, param_4, 0, auStack_34, param_2, param_3);
        FUN_00045864(auStack_34);
    }
    return uVar2;
}

undefined4 FUN_00045074(undefined4 param_1, undefined4 param_2)

{
    int iVar1;
    undefined4 uVar2;
    undefined1 auStack_1c[12];

    iVar1 = FUN_00047820(auStack_1c);
    if (iVar1 == 0) {
        iVar1 = FUN_00044ffc(param_1, &LAB_000443b4, auStack_1c, param_2);
        uVar2 = 0;
        if (iVar1 == 0) {
            FUN_00047894(auStack_1c);
            uVar2 = FUN_000477c8();
        }
        FUN_00047854(auStack_1c);
    } else {
        uVar2 = 0;
    }
    return uVar2;
}

undefined4 FUN_000450e0(undefined4 param_1, undefined4 param_2,
                        undefined4 param_3)

{
    int iVar1;
    undefined4 local_14;
    undefined4 local_10;
    undefined4 local_c;

    local_10 = 0;
    local_14 = param_3;
    local_c = param_2;
    iVar1 = FUN_00044ffc(param_1, FUN_000443c8, &local_14);
    if (iVar1 != 0) {
        local_10 = 0;
    }
    return local_10;
}

void FUN_00045194(undefined4 param_1, undefined4 param_2, undefined4 param_3)

{
    undefined4 local_c[2];

    local_c[0] = param_2;
    FUN_00044ffc(param_1, &LAB_00044428, local_c, param_3);
    return;
}

uint FUN_000451c0(uint *param_1, uint param_2, int param_3)

{
    uint *puVar1;
    uint uVar2;
    int iVar3;
    uint uVar4;
    int iVar5;
    uint uVar6;
    int iVar7;
    uint uVar8;
    int iVar9;
    uint uVar10;

    uVar6 = param_3 + -0x21524111 + param_2;
    uVar2 = uVar6;
    uVar4 = uVar6;
    if (((uint)param_1 & 3) != 0) {
        if (((uint)param_1 & 1) != 0) {
            if (0xc < param_2) {
                puVar1 = param_1 + 3;
                do {
                    param_1 = puVar1;
                    param_2 = param_2 - 0xc;
                    uVar6 = (uint) * (byte *)((int)param_1 + -2) * 0x10000 +
                            (uint) * (byte *)((int)param_1 + -3) * 0x100 +
                            (uint)(byte)param_1[-1] +
                            (uint) * (byte *)((int)param_1 + -1) * 0x1000000 +
                            uVar6;
                    uVar8 =
                        (((uint) * (byte *)((int)param_1 + -10) * 0x10000 +
                          (uint) * (byte *)((int)param_1 + -0xb) * 0x100 +
                          (uint)(byte)param_1[-3] +
                          (uint) * (byte *)((int)param_1 + -9) * 0x1000000) -
                         uVar6) +
                            uVar2 ^
                        (uVar6 >> 0x1c | uVar6 * 0x10);
                    iVar3 = (uint) * (byte *)((int)param_1 + -6) * 0x10000 +
                            (uint) * (byte *)((int)param_1 + -7) * 0x100 +
                            (uint)(byte)param_1[-2] +
                            (uint) * (byte *)((int)param_1 + -5) * 0x1000000 +
                            uVar4;
                    iVar7 = iVar3 + uVar6;
                    uVar2 = iVar3 - uVar8 ^ (uVar8 >> 0x1a | uVar8 << 6);
                    iVar5 = uVar8 + iVar7;
                    iVar9 = uVar2 + iVar5;
                    uVar2 = iVar7 - uVar2 ^ (uVar2 >> 0x18 | uVar2 << 8);
                    iVar3 = uVar2 + iVar9;
                    uVar4 = iVar5 - uVar2 ^ (uVar2 >> 0x10 | uVar2 << 0x10);
                    uVar2 = uVar4 + iVar3;
                    uVar6 = iVar9 - uVar4 ^ (uVar4 >> 0xd | uVar4 << 0x13);
                    uVar4 = uVar6 + uVar2;
                    uVar6 = iVar3 - uVar6 ^ (uVar6 >> 0x1c | uVar6 << 4);
                    puVar1 = param_1 + 3;
                } while (0xc < param_2);
            }
            switch (param_2) {
            case 1:
                break;
            case 0xc:
                uVar6 =
                    uVar6 + (uint) * (byte *)((int)param_1 + 0xb) * 0x1000000;
            case 0xb:
                uVar6 = uVar6 + (uint) * (byte *)((int)param_1 + 10) * 0x10000;
            case 10:
                uVar6 = uVar6 + (uint) * (byte *)((int)param_1 + 9) * 0x100;
            case 9:
                uVar6 = uVar6 + (byte)param_1[2];
            case 8:
                uVar4 = uVar4 + (uint) * (byte *)((int)param_1 + 7) * 0x1000000;
            case 7:
                uVar4 = uVar4 + (uint) * (byte *)((int)param_1 + 6) * 0x10000;
            case 6:
                uVar4 = uVar4 + (uint) * (byte *)((int)param_1 + 5) * 0x100;
            case 5:
                uVar4 = uVar4 + (byte)param_1[1];
            case 4:
                uVar2 = uVar2 + (uint) * (byte *)((int)param_1 + 3) * 0x1000000;
            case 3:
                uVar2 = uVar2 + (uint) * (byte *)((int)param_1 + 2) * 0x10000;
            case 2:
                uVar2 = uVar2 + (uint) * (byte *)((int)param_1 + 1) * 0x100;
                break;
            default:
                goto switchD_0004526c_default;
            }
            goto switchD_0004526c_caseD_1;
        }
        if (0xc < param_2) {
            puVar1 = param_1 + 3;
            do {
                param_1 = puVar1;
                param_2 = param_2 - 0xc;
                uVar6 = (uint)(ushort)param_1[-1] +
                        (uint) * (ushort *)((int)param_1 + -2) * 0x10000 +
                        uVar6;
                uVar8 = (((uint)(ushort)param_1[-3] +
                          (uint) * (ushort *)((int)param_1 + -10) * 0x10000) -
                         uVar6) +
                            uVar2 ^
                        (uVar6 >> 0x1c | uVar6 * 0x10);
                iVar3 = (uint)(ushort)param_1[-2] +
                        (uint) * (ushort *)((int)param_1 + -6) * 0x10000 +
                        uVar4;
                iVar7 = iVar3 + uVar6;
                uVar2 = iVar3 - uVar8 ^ (uVar8 >> 0x1a | uVar8 << 6);
                iVar5 = uVar8 + iVar7;
                iVar9 = uVar2 + iVar5;
                uVar2 = iVar7 - uVar2 ^ (uVar2 >> 0x18 | uVar2 << 8);
                iVar3 = uVar2 + iVar9;
                uVar4 = iVar5 - uVar2 ^ (uVar2 >> 0x10 | uVar2 << 0x10);
                uVar2 = uVar4 + iVar3;
                uVar6 = iVar9 - uVar4 ^ (uVar4 >> 0xd | uVar4 << 0x13);
                uVar4 = uVar6 + uVar2;
                uVar6 = iVar3 - uVar6 ^ (uVar6 >> 0x1c | uVar6 << 4);
                puVar1 = param_1 + 3;
            } while (0xc < param_2);
        }
        switch (param_2) {
        case 1:
        switchD_0004526c_caseD_1:
            uVar2 = (byte)*param_1 + uVar2;
            break;
        case 3:
            uVar2 = uVar2 + (uint) * (byte *)((int)param_1 + 2) * 0x10000;
        case 2:
        switchD_0004526c_caseD_2:
            uVar2 = (ushort)*param_1 + uVar2;
            break;
        case 5:
            uVar4 = uVar4 + (byte)param_1[1];
        case 4:
            uVar2 = (ushort)*param_1 + uVar2 +
                    (uint) * (ushort *)((int)param_1 + 2) * 0x10000;
            break;
        case 7:
            uVar4 = uVar4 + (uint) * (byte *)((int)param_1 + 6) * 0x10000;
        case 6:
            uVar2 = (ushort)*param_1 + uVar2 +
                    (uint) * (ushort *)((int)param_1 + 2) * 0x10000;
            uVar4 = uVar4 + (ushort)param_1[1];
            break;
        case 9:
            uVar6 = uVar6 + (byte)param_1[2];
        case 8:
            uVar4 = (ushort)param_1[1] + uVar4 +
                    (uint) * (ushort *)((int)param_1 + 6) * 0x10000;
            uVar2 = (ushort)*param_1 + uVar2 +
                    (uint) * (ushort *)((int)param_1 + 2) * 0x10000;
            break;
        case 0xb:
            uVar6 = uVar6 + (uint) * (byte *)((int)param_1 + 10) * 0x10000;
        case 10:
            uVar4 = (ushort)param_1[1] + uVar4 +
                    (uint) * (ushort *)((int)param_1 + 6) * 0x10000;
            uVar2 = (ushort)*param_1 + uVar2 +
                    (uint) * (ushort *)((int)param_1 + 2) * 0x10000;
            uVar6 = uVar6 + (ushort)param_1[2];
            break;
        case 0xc:
            uVar6 = (ushort)param_1[2] + uVar6 +
                    (uint) * (ushort *)((int)param_1 + 10) * 0x10000;
            uVar4 = (ushort)param_1[1] + uVar4 +
                    (uint) * (ushort *)((int)param_1 + 6) * 0x10000;
            uVar2 = (ushort)*param_1 + uVar2 +
                    (uint) * (ushort *)((int)param_1 + 2) * 0x10000;
            break;
        default:
            goto switchD_0004526c_default;
        }
        goto LAB_00045510;
    }
    if (0xc < param_2) {
        puVar1 = param_1 + 3;
        do {
            param_1 = puVar1;
            param_2 = param_2 - 0xc;
            uVar6 = uVar6 + param_1[-1];
            uVar2 =
                (param_1[-3] - uVar6) + uVar2 ^ (uVar6 >> 0x1c | uVar6 * 0x10);
            iVar3 = uVar4 + param_1[-2] + uVar6;
            iVar5 = uVar2 + iVar3;
            uVar2 =
                (uVar4 + param_1[-2]) - uVar2 ^ (uVar2 >> 0x1a | uVar2 << 6);
            iVar7 = uVar2 + iVar5;
            uVar2 = iVar3 - uVar2 ^ (uVar2 >> 0x18 | uVar2 << 8);
            iVar3 = uVar2 + iVar7;
            uVar4 = iVar5 - uVar2 ^ (uVar2 >> 0x10 | uVar2 << 0x10);
            uVar2 = uVar4 + iVar3;
            uVar6 = iVar7 - uVar4 ^ (uVar4 >> 0xd | uVar4 << 0x13);
            uVar4 = uVar6 + uVar2;
            uVar6 = iVar3 - uVar6 ^ (uVar6 >> 0x1c | uVar6 << 4);
            puVar1 = param_1 + 3;
        } while (0xc < param_2);
    }
    switch (param_2) {
    case 1:
        goto switchD_0004526c_caseD_1;
    case 2:
        goto switchD_0004526c_caseD_2;
    case 3:
        uVar2 = (*param_1 & 0xffffff) + uVar2;
        break;
    case 4:
        uVar2 = uVar2 + *param_1;
        break;
    case 5:
        uVar4 = uVar4 + (byte)param_1[1];
        uVar2 = uVar2 + *param_1;
        break;
    case 6:
        uVar4 = uVar4 + (ushort)param_1[1];
        uVar2 = uVar2 + *param_1;
        break;
    case 7:
        uVar2 = uVar2 + *param_1;
        uVar4 = uVar4 + (param_1[1] & 0xffffff);
        break;
    case 8:
        uVar4 = uVar4 + param_1[1];
        uVar2 = uVar2 + *param_1;
        break;
    case 9:
        uVar8 = (uint)(byte)param_1[2];
        goto LAB_00045580;
    case 10:
        uVar8 = (uint)(ushort)param_1[2];
        goto LAB_00045580;
    case 0xb:
        uVar6 = uVar6 + (param_1[2] & 0xffffff);
        uVar4 = uVar4 + param_1[1];
        uVar2 = uVar2 + *param_1;
        break;
    case 0xc:
        uVar8 = param_1[2];
    LAB_00045580:
        uVar6 = uVar6 + uVar8;
        uVar4 = uVar4 + param_1[1];
        uVar2 = uVar2 + *param_1;
        break;
    default:
        goto switchD_0004526c_default;
    }
LAB_00045510:
    uVar6 = (uVar6 ^ uVar4) - (uVar4 >> 0x12 | uVar4 << 0xe);
    uVar8 = (uVar2 ^ uVar6) - (uVar6 >> 0x15 | uVar6 * 0x800);
    uVar10 = (uVar4 ^ uVar8) - (uVar8 >> 7 | uVar8 * 0x2000000);
    uVar2 = (uVar6 ^ uVar10) - (uVar10 >> 0x10 | uVar10 * 0x10000);
    uVar4 = (uVar8 ^ uVar2) - (uVar2 >> 0x1c | uVar2 * 0x10);
    uVar4 = (uVar10 ^ uVar4) - (uVar4 >> 0x12 | uVar4 * 0x4000);
    uVar6 = (uVar2 ^ uVar4) - (uVar4 >> 8 | uVar4 * 0x1000000);
switchD_0004526c_default:
    return uVar6;
}

int FUN_00045704(int param_1, int *param_2, char *param_3, int param_4)

{
    int iVar1;
    int iVar2;

    iVar2 = *param_2;
    if ((iVar2 != param_1 + 0xc) || (iVar2 != param_2[1])) {
        while (true) {
            if ((*(int *)(iVar2 + 0x10) == param_4) &&
                (iVar1 = strcmp((char *)(iVar2 + 0x18), param_3), iVar1 == 0)) {
                return iVar2;
            }
            if (param_2[1] == iVar2)
                break;
            iVar2 = *(int *)(iVar2 + 4);
        }
    }
    return 0;
}

void FUN_00045778(int param_1)

{
    bool bVar1;
    int iVar2;
    int *piVar3;
    int iVar4;
    int iVar5;

    iVar4 = *(int *)(param_1 + 0x10);
    if (*(int *)(param_1 + 0x10) != param_1 + 0xc) {
        do {
            iVar2 = *(int *)(iVar4 + 0x14);
            iVar5 = *(int *)(iVar4 + 4);
            if ((iVar2 != 0) &&
                (piVar3 = (int *)(iVar2 + 4), *(int *)(iVar2 + 4) != -1)) {
                DataMemoryBarrier(0xb);
                do {
                    iVar2 = *piVar3;
                    bVar1 = (bool)hasExclusiveAccess(piVar3);
                } while (!bVar1);
                *piVar3 = iVar2 + -1;
                if (iVar2 + -1 == 0) {
                    FUN_00048a34();
                }
            }
            FUN_00047764(iVar4);
            iVar4 = iVar5;
        } while (iVar5 != param_1 + 0xc);
        return;
    }
    return;
}

undefined4 FUN_000457e8(undefined4 *param_1)

{
    undefined4 *puVar1;
    undefined4 *puVar2;
    undefined4 *puVar3;
    undefined4 *puVar4;
    uint uVar5;

    *param_1 = 0;
    param_1[2] = 3;
    puVar1 = (undefined4 *)FUN_0004774c(0x40);
    param_1[1] = puVar1;
    if (puVar1 != (undefined4 *)0x0) {
        uVar5 = param_1[2];
        puVar4 = param_1 + 3;
        param_1[4] = puVar4;
        param_1[3] = puVar4;
        param_1[6] = param_1 + 5;
        param_1[5] = param_1 + 5;
        if (1 << (uVar5 & 0xff) != 0) {
            puVar2 = puVar1;
            do {
                puVar2[1] = puVar4;
                puVar3 = puVar2 + 2;
                *puVar2 = puVar4;
                puVar2 = puVar3;
            } while (puVar3 !=
                     (undefined4 *)((int)puVar1 + (8 << (uVar5 & 0xff))));
        }
        return 0;
    }
    return 0xffffffff;
}

void FUN_00045864(int param_1)

{
    FUN_00045778();
    FUN_00047764(*(undefined4 *)(param_1 + 4));
    return;
}

undefined4 FUN_0004587c(uint *param_1, char *param_2, uint param_3)

{
    bool bVar1;
    int *piVar2;
    size_t sVar3;
    uint uVar4;
    int iVar5;
    int iVar6;
    uint *puVar7;
    int *piVar8;
    int *piVar9;
    uint *puVar10;
    uint *puVar11;
    uint uVar12;
    uint *puVar13;

    uVar12 = param_1[2];
    if (*param_1 >> (uVar12 & 0xff) == 0) {
        piVar2 = (int *)param_1[1];
        uVar12 = ~(-1 << (uVar12 & 0xff));
    } else {
        uVar12 = uVar12 + 1;
        iVar5 = 8 << (uVar12 & 0xff);
        piVar2 = (int *)FUN_0004774c(iVar5);
        if (piVar2 == (int *)0x0) {
            return 0xffffffff;
        }
        FUN_00047764(param_1[1]);
        param_1[1] = (uint)piVar2;
        param_1[2] = uVar12;
        puVar7 = param_1 + 3;
        if (1 << (uVar12 & 0xff) != 0) {
            piVar8 = piVar2;
            do {
                piVar8[1] = (int)puVar7;
                piVar9 = piVar8 + 2;
                *piVar8 = (int)puVar7;
                piVar8 = piVar9;
            } while ((int *)(iVar5 + (int)piVar2) != piVar9);
        }
        puVar10 = (uint *)param_1[4];
        param_1[3] = (uint)puVar7;
        uVar12 = ~(-1 << (uVar12 & 0xff));
        param_1[4] = (uint)puVar7;
        if (puVar10 != puVar7) {
            do {
                while (true) {
                    puVar13 = (uint *)puVar10[1];
                    puVar11 = (uint *)piVar2[(puVar10[4] & uVar12) * 2];
                    piVar8 = piVar2 + (puVar10[4] & uVar12) * 2;
                    if ((puVar11 != puVar7) || (puVar7 != (uint *)piVar8[1]))
                        break;
                    uVar4 = param_1[3];
                    puVar10[1] = (uint)puVar7;
                    *puVar10 = uVar4;
                    *(uint **)(param_1[3] + 4) = puVar10;
                    param_1[3] = (uint)puVar10;
                    piVar8[1] = (int)puVar10;
                    *piVar8 = (int)puVar10;
                    puVar10 = puVar13;
                    if (puVar13 == puVar7)
                        goto LAB_0004598c;
                }
                uVar4 = *puVar11;
                puVar10[1] = (uint)puVar11;
                *puVar10 = uVar4;
                *(uint **)(*puVar11 + 4) = puVar10;
                *puVar11 = (uint)puVar10;
                *piVar8 = (int)puVar10;
                puVar10 = puVar13;
            } while (puVar13 != puVar7);
        LAB_0004598c:
            piVar2 = (int *)param_1[1];
            uVar12 = ~(-1 << (param_1[2] & 0xff));
        }
    }
    sVar3 = strlen(param_2);
    uVar4 = FUN_000451c0(param_2, sVar3, DAT_00073108);
    piVar2 = piVar2 + (uVar12 & uVar4) * 2;
    iVar5 = FUN_00045704(param_1, piVar2, param_2, uVar4);
    if (iVar5 != 0) {
        iVar6 = *(int *)(iVar5 + 0x14);
        if ((iVar6 != 0) && (*(int *)(iVar6 + 4) != -1)) {
            piVar2 = (int *)(iVar6 + 4);
            DataMemoryBarrier(0xb);
            do {
                iVar6 = *piVar2;
                bVar1 = (bool)hasExclusiveAccess(piVar2);
            } while (!bVar1);
            *piVar2 = iVar6 + -1;
            if (iVar6 + -1 == 0) {
                FUN_00048a34();
            }
        }
        *(uint *)(iVar5 + 0x14) = param_3;
        return 0;
    }
    puVar7 = (uint *)FUN_0004774c(sVar3 + 0x19);
    if (puVar7 == (uint *)0x0) {
        return 0xffffffff;
    }
    puVar7[4] = uVar4;
    strncpy((char *)(puVar7 + 6), param_2, sVar3 + 1);
    puVar11 = (uint *)*piVar2;
    puVar10 = puVar7 + 2;
    puVar7[5] = param_3;
    puVar7[1] = (uint)puVar7;
    *puVar7 = (uint)puVar7;
    puVar7[3] = (uint)puVar10;
    puVar7[2] = (uint)puVar10;
    if ((puVar11 == param_1 + 3) && (puVar11 == (uint *)piVar2[1])) {
        *puVar7 = param_1[3];
        puVar7[1] = (uint)puVar11;
        *(uint **)(param_1[3] + 4) = puVar7;
        param_1[3] = (uint)puVar7;
        piVar2[1] = (int)puVar7;
        *piVar2 = (int)puVar7;
    } else {
        *puVar7 = *puVar11;
        puVar7[1] = (uint)puVar11;
        *(uint **)(*puVar11 + 4) = puVar7;
        *puVar11 = (uint)puVar7;
        *piVar2 = (int)puVar7;
    }
    uVar12 = param_1[5];
    uVar4 = *param_1;
    puVar7[3] = (uint)(param_1 + 5);
    puVar7[2] = uVar12;
    *(uint **)(param_1[5] + 4) = puVar10;
    param_1[5] = (uint)puVar10;
    *param_1 = uVar4 + 1;
    return 0;
}

int FUN_00045b10(int param_1, char *param_2)

{
    size_t sVar1;
    uint uVar2;
    int iVar3;

    sVar1 = strlen(param_2);
    uVar2 = FUN_000451c0(param_2, sVar1, DAT_00073108);
    iVar3 =
        FUN_00045704(param_1,
                     *(int *)(param_1 + 4) +
                         (uVar2 & ~(-1 << (*(uint *)(param_1 + 8) & 0xff))) * 8,
                     param_2, uVar2);
    if (iVar3 != 0) {
        iVar3 = *(int *)(iVar3 + 0x14);
    }
    return iVar3;
}

undefined4 FUN_00045b70(int *param_1, char *param_2)

{
    bool bVar1;
    size_t sVar2;
    uint uVar3;
    int *piVar4;
    int iVar5;
    int iVar6;
    int *piVar7;
    uint uVar8;
    int iVar9;
    int iVar10;

    sVar2 = strlen(param_2);
    uVar3 = FUN_000451c0(param_2, sVar2, DAT_00073108);
    iVar10 = param_1[1];
    uVar8 = uVar3 & ~(-1 << (param_1[2] & 0xffU));
    iVar9 = iVar10 + uVar8 * 8;
    piVar4 = (int *)FUN_00045704(param_1, iVar9, param_2, uVar3);
    if (piVar4 == (int *)0x0) {
        return 0xffffffff;
    }
    iVar5 = piVar4[1];
    iVar6 = *piVar4;
    if (piVar4 == *(int **)(iVar10 + uVar8 * 8)) {
        if (piVar4 == *(int **)(iVar9 + 4)) {
            *(int **)(iVar9 + 4) = param_1 + 3;
            *(int **)(iVar10 + uVar8 * 8) = param_1 + 3;
        } else {
            *(int *)(iVar10 + uVar8 * 8) = iVar5;
        }
    } else if (piVar4 == *(int **)(iVar9 + 4)) {
        *(int *)(iVar9 + 4) = iVar6;
    }
    *(int *)(iVar6 + 4) = iVar5;
    iVar10 = piVar4[3];
    iVar9 = piVar4[5];
    *(int *)piVar4[1] = iVar6;
    iVar5 = piVar4[2];
    *(int *)(iVar5 + 4) = iVar10;
    *(int *)piVar4[3] = iVar5;
    if ((iVar9 != 0) && (*(int *)(iVar9 + 4) != -1)) {
        piVar7 = (int *)(iVar9 + 4);
        DataMemoryBarrier(0xb);
        do {
            iVar9 = *piVar7;
            bVar1 = (bool)hasExclusiveAccess(piVar7);
        } while (!bVar1);
        *piVar7 = iVar9 + -1;
        if (iVar9 + -1 == 0) {
            FUN_00048a34();
        }
    }
    FUN_00047764(piVar4);
    *param_1 = *param_1 + -1;
    return 0;
}

void FUN_00045c90(undefined4 *param_1)

{
    uint uVar1;
    undefined4 *puVar2;
    undefined4 *puVar3;
    undefined4 *puVar4;
    undefined4 *puVar5;

    FUN_00045778();
    puVar2 = param_1 + 3;
    uVar1 = param_1[2];
    if (1 << (uVar1 & 0xff) != 0) {
        puVar3 = (undefined4 *)param_1[1];
        puVar4 = puVar3;
        do {
            puVar4[1] = puVar2;
            puVar5 = puVar4 + 2;
            *puVar4 = puVar2;
            puVar4 = puVar5;
        } while (puVar5 != (undefined4 *)((int)puVar3 + (8 << (uVar1 & 0xff))));
    }
    param_1[4] = puVar2;
    param_1[3] = puVar2;
    param_1[6] = param_1 + 5;
    param_1[5] = param_1 + 5;
    *param_1 = 0;
    return;
}

int FUN_00045cec(int param_1)

{
    int iVar1;

    iVar1 = *(int *)(param_1 + 0x18);
    if (iVar1 == param_1 + 0x14) {
        iVar1 = 0;
    }
    return iVar1;
}

int FUN_00045d04(int param_1, char *param_2)

{
    size_t sVar1;
    uint uVar2;
    int iVar3;

    sVar1 = strlen(param_2);
    uVar2 = FUN_000451c0(param_2, sVar1, DAT_00073108);
    iVar3 =
        FUN_00045704(param_1,
                     *(int *)(param_1 + 4) +
                         (uVar2 & ~(-1 << (*(uint *)(param_1 + 8) & 0xff))) * 8,
                     param_2, uVar2);
    if (iVar3 != 0) {
        iVar3 = iVar3 + 8;
    }
    return iVar3;
}

int FUN_00045d64(int param_1, int param_2)

{
    int iVar1;

    iVar1 = *(int *)(param_2 + 4);
    if (iVar1 == param_1 + 0x14) {
        iVar1 = 0;
    }
    return iVar1;
}

int FUN_00045d7c(int param_1)

{
    return param_1 + 0x10;
}

undefined4 FUN_00045d84(int param_1)

{
    return *(undefined4 *)(param_1 + 0xc);
}

void FUN_00045d8c(int param_1, undefined4 param_2)

{
    bool bVar1;
    int iVar2;
    int *piVar3;

    iVar2 = *(int *)(param_1 + 0xc);
    if ((iVar2 != 0) && (*(int *)(iVar2 + 4) != -1)) {
        piVar3 = (int *)(iVar2 + 4);
        DataMemoryBarrier(0xb);
        do {
            iVar2 = *piVar3;
            bVar1 = (bool)hasExclusiveAccess(piVar3);
        } while (!bVar1);
        *piVar3 = iVar2 + -1;
        if (iVar2 + -1 == 0) {
            FUN_00048a34();
            *(undefined4 *)(param_1 + 0xc) = param_2;
            return;
        }
    }
    *(undefined4 *)(param_1 + 0xc) = param_2;
    return;
}

void FUN_00045df8(uint param_1)

{
    bool bVar1;
    char cVar2;
    int __fd;
    ssize_t sVar3;
    timeval local_20;

    cVar2 = DAT_0007310c;
    if (DAT_00073108 != 0) {
        return;
    }
    do {
        bVar1 = (bool)hasExclusiveAccess(0x7310c);
    } while (!bVar1);
    DAT_0007310c = 1;
    if (cVar2 != '\0') {
        do {
            sched_yield();
            DataMemoryBarrier(0xb);
        } while (DAT_00073108 == 0);
        return;
    }
    if (param_1 != 0)
        goto LAB_00045e48;
    __fd = open64("/dev/urandom", 0);
    if (__fd == -1) {
    LAB_00045ecc:
        gettimeofday(&local_20, (__timezone_ptr_t)0x0);
        param_1 = getpid();
        param_1 = param_1 ^ local_20.tv_usec ^ local_20.tv_sec;
    } else {
        sVar3 = read(__fd, &local_20, 4);
        close(__fd);
        if (sVar3 != 4)
            goto LAB_00045ecc;
        param_1 = CONCAT31(CONCAT21(CONCAT11((undefined1)local_20.tv_sec,
                                             local_20.tv_sec._1_1_),
                                    local_20.tv_sec._2_1_),
                           local_20.tv_sec._3_1_);
    }
    if (param_1 == 0) {
        param_1 = 1;
    }
LAB_00045e48:
    DataMemoryBarrier(0xb);
    DAT_00073108 = param_1;
    return;
}

void FUN_00045f98(int param_1, int param_2, int param_3, char *param_4)

{
    char *pcVar1;
    undefined4 uVar2;
    undefined4 uVar3;
    undefined4 uVar4;
    char acStack_168[159];
    undefined1 local_c9;
    char acStack_c8[159];
    undefined1 local_29;

    if (param_1 == 0) {
        return;
    }
    vsnprintf(acStack_168, 0xa0, param_4, &stack0x00000000);
    local_c9 = 0;
    if (param_2 == 0) {
        uVar2 = 0xffffffff;
        pcVar1 = acStack_168;
        uVar3 = 0xffffffff;
        uVar4 = 0;
    } else {
        pcVar1 = (char *)FUN_00047894(param_2 + 0x28);
        uVar3 = *(undefined4 *)(param_2 + 0x18);
        uVar2 = *(undefined4 *)(param_2 + 0x1c);
        uVar4 = *(undefined4 *)(param_2 + 0x24);
        if ((pcVar1 == (char *)0x0) || (*pcVar1 == '\0')) {
            if (param_3 == 8) {
                param_3 = 6;
            }
            if (*(int *)(param_2 + 0x14) != -2) {
                snprintf(acStack_c8, 0xa0, "%s near end of file", acStack_168);
                pcVar1 = acStack_c8;
                local_29 = 0;
                goto LAB_0004602c;
            }
        } else if (*(uint *)(param_2 + 0x2c) < 0x15) {
            snprintf(acStack_c8, 0xa0, "%s near \'%s\'", acStack_168, pcVar1);
            pcVar1 = acStack_c8;
            local_29 = 0;
            goto LAB_0004602c;
        }
        pcVar1 = acStack_168;
    }
LAB_0004602c:
    FUN_00049824(param_1, uVar3, uVar2, uVar4, param_3, "%s", pcVar1);
    return;
}

void FUN_000460c8(int param_1)

{
    if (*(int *)(param_1 + 0x3c) != 0x100) {
        FUN_00047854(param_1 + 0x28);
        return;
    }
    FUN_00047764(*(undefined4 *)(param_1 + 0x40));
    *(undefined4 *)(param_1 + 0x40) = 0;
    *(undefined4 *)(param_1 + 0x44) = 0;
    FUN_00047854(param_1 + 0x28);
    return;
}

uint FUN_00046108(int *param_1)

{
    ssize_t sVar1;
    uint uVar2;
    byte local_9[5];

    sVar1 = read(*param_1, local_9, 1);
    if (sVar1 == 1) {
        uVar2 = (uint)local_9[0];
    } else {
        uVar2 = 0xffffffff;
    }
    return uVar2;
}

int FUN_00046134(byte *param_1)

{
    int iVar1;
    uint uVar2;
    byte *pbVar3;

    if (*param_1 != 0x75) {
        /* WARNING: Subroutine does not return */
        __assert_fail("str[0] == \'u\'", "load.c", 0x135,
                      "decode_unicode_escape");
    }
    iVar1 = 0;
    pbVar3 = param_1 + 4;
    do {
        param_1 = param_1 + 1;
        uVar2 = (uint)*param_1;
        iVar1 = iVar1 * 0x10;
        if ((uVar2 - 0x30 & 0xff) < 10) {
            iVar1 = (uVar2 - 0x30) + iVar1;
        } else if (uVar2 - 0x61 < 0x1a) {
            iVar1 = (uVar2 - 0x57) + iVar1;
        } else {
            if (0x19 < uVar2 - 0x41) {
                return -1;
            }
            iVar1 = (uVar2 - 0x37) + iVar1;
        }
    } while (param_1 != pbVar3);
    return iVar1;
}

void FUN_000461c8(int param_1, uint param_2)

{
    int iVar1;

    if (param_2 + 2 < 2) {
        return;
    }
    *(int *)(param_1 + 0x24) = *(int *)(param_1 + 0x24) + -1;
    if (param_2 == 10) {
        *(int *)(param_1 + 0x18) = *(int *)(param_1 + 0x18) + -1;
        *(undefined4 *)(param_1 + 0x1c) = *(undefined4 *)(param_1 + 0x20);
    } else {
        iVar1 = FUN_00047ce4(param_2 & 0xff);
        if (iVar1 != 0) {
            *(int *)(param_1 + 0x1c) = *(int *)(param_1 + 0x1c) + -1;
        }
    }
    if (*(int *)(param_1 + 0x10) != 0) {
        iVar1 = *(int *)(param_1 + 0x10) + -1;
        *(int *)(param_1 + 0x10) = iVar1;
        if (*(byte *)(param_1 + iVar1 + 8) == param_2) {
            return;
        }
        /* WARNING: Subroutine does not return */
        __assert_fail("stream->buffer[stream->buffer_pos] == c", "load.c", 0xf0,
                      "stream_unget");
    }
    /* WARNING: Subroutine does not return */
    __assert_fail("stream->buffer_pos > 0", "load.c", 0xee, "stream_unget");
}

uint FUN_00046284(undefined4 *param_1, undefined4 param_2)

{
    undefined1 uVar1;
    int iVar2;
    int iVar3;
    undefined4 uVar4;
    undefined4 *puVar5;
    uint uVar6;
    undefined1 *puVar7;
    undefined1 *puVar8;

    puVar5 = (undefined4 *)((int)param_1 + param_1[4]);
    if (*(char *)(puVar5 + 2) == '\0') {
        iVar3 = (*(code *)*param_1)(param_1[1]);
        if (iVar3 == -1) {
            param_1[5] = 0xffffffff;
            return 0xffffffff;
        }
        param_1[4] = 0;
        *(char *)(param_1 + 2) = (char)iVar3;
        if (iVar3 - 0x80U < 0x80) {
            uVar6 = FUN_00047ce4();
            if (uVar6 != 0) {
                if (uVar6 < 2) {
                    /* WARNING: Subroutine does not return */
                    __assert_fail("count >= 2", "load.c", 0xbd, "stream_get");
                }
                puVar7 = (undefined1 *)((int)param_1 + 9);
                do {
                    uVar1 = (*(code *)*param_1)(param_1[1]);
                    puVar8 = puVar7 + 1;
                    *puVar7 = uVar1;
                    puVar7 = puVar8;
                } while ((undefined1 *)((int)(param_1 + 2) + uVar6) != puVar8);
                iVar2 = FUN_00047d50(param_1 + 2, uVar6, 0);
                if (iVar2 != 0) {
                    *(undefined1 *)((int)param_1 + uVar6 + 8) = 0;
                    iVar3 = param_1[4] + 1;
                    puVar5 = (undefined4 *)((int)param_1 + param_1[4]);
                    goto LAB_000462ec;
                }
            }
            param_1[5] = 0xfffffffe;
            FUN_00045f98(param_2, param_1, 5, "unable to decode byte 0x%x",
                         iVar3);
            return 0xfffffffe;
        }
        iVar3 = 1;
        *(undefined1 *)((int)param_1 + 9) = 0;
        puVar5 = param_1;
    } else {
        iVar3 = param_1[4] + 1;
    }
LAB_000462ec:
    param_1[4] = iVar3;
    uVar6 = (uint) * (byte *)(puVar5 + 2);
    param_1[9] = param_1[9] + 1;
    if (uVar6 != 10) {
        iVar3 = FUN_00047ce4(uVar6);
        if (iVar3 != 0) {
            param_1[7] = param_1[7] + 1;
        }
        return uVar6;
    }
    uVar4 = param_1[7];
    param_1[7] = 0;
    param_1[6] = param_1[6] + 1;
    param_1[8] = uVar4;
    return 10;
}

uint FUN_0004640c(int param_1)

{
    uint uVar1;

    uVar1 = *(uint *)(param_1 + 0x14);
    if (uVar1 == 0) {
        uVar1 = FUN_00046284();
    }
    if (1 < uVar1 + 2) {
        FUN_0004797c(param_1 + 0x28, uVar1 & 0xff);
    }
    return uVar1;
}

void FUN_0004644c(int param_1, int param_2)

{
    int iVar1;

    if (param_2 + 2U < 2) {
        return;
    }
    FUN_000461c8();
    iVar1 = FUN_000479a0(param_1 + 0x28);
    if (iVar1 == param_2) {
        return;
    }
    /* WARNING: Subroutine does not return */
    __assert_fail("c == d", "load.c", 0x11a, "lex_unget_unsave");
}

uint FUN_00046498(int param_1, undefined4 param_2)

{
    char cVar1;
    char *pcVar2;
    int *piVar3;
    byte *pbVar4;
    byte *pbVar5;
    byte bVar6;
    int iVar7;
    uint uVar8;
    uint uVar9;
    byte *pbVar10;
    int iVar11;
    bool bVar12;
    bool bVar13;
    longlong lVar14;
    char *local_30;
    undefined4 uStack_2c;

    iVar11 = param_1 + 0x28;
    FUN_00047880(iVar11);
    if (*(int *)(param_1 + 0x3c) == 0x100) {
        FUN_00047764(*(undefined4 *)(param_1 + 0x40));
        *(undefined4 *)(param_1 + 0x40) = 0;
        *(undefined4 *)(param_1 + 0x44) = 0;
    }
    do {
        uVar9 = *(uint *)(param_1 + 0x14);
        if (uVar9 == 0) {
            uVar9 = FUN_00046284(param_1, param_2);
        }
        bVar12 = 0x1f < uVar9;
        if (uVar9 != 0x20) {
            bVar12 = uVar9 != 9;
        }
    } while ((!bVar12 || (uVar9 == 0x20 || uVar9 == 10)) || (uVar9 == 0xd));
    if (uVar9 == 0xffffffff) {
        *(undefined4 *)(param_1 + 0x3c) = 0;
        return 0;
    }
    if (uVar9 == 0xfffffffe) {
    LAB_000465e0:
        *(undefined4 *)(param_1 + 0x3c) = 0xffffffff;
        return 0xffffffff;
    }
    FUN_0004797c(iVar11, uVar9 & 0xff);
    if ((((uVar9 & 0xffffffdf) - 0x5b & 0xfffffffd) == 0) ||
        (uVar9 == 0x2c || uVar9 == 0x3a)) {
    LAB_0004660c:
        *(uint *)(param_1 + 0x3c) = uVar9;
        return uVar9;
    }
    if (uVar9 == 0x22) {
        *(undefined4 *)(param_1 + 0x40) = 0;
        *(undefined4 *)(param_1 + 0x3c) = 0xffffffff;
    LAB_00046648:
        do {
            uVar9 = FUN_0004640c(param_1, param_2);
            while (true) {
                if (uVar9 == 0x22) {
                    pbVar4 = (byte *)FUN_0004774c(*(int *)(param_1 + 0x2c) + 1);
                    if (pbVar4 == (byte *)0x0)
                        goto LAB_000466d4;
                    *(byte **)(param_1 + 0x40) = pbVar4;
                    iVar11 = FUN_00047894(iVar11);
                    pbVar10 = (byte *)(iVar11 + 1);
                    goto LAB_0004697c;
                }
                if (uVar9 == 0xfffffffe)
                    goto LAB_000466d4;
                if (uVar9 == 0xffffffff) {
                    FUN_00045f98(param_2, param_1, 6, "premature end of input");
                    goto LAB_000466d4;
                }
                if (uVar9 < 0x20) {
                    FUN_0004644c(param_1, uVar9);
                    if (uVar9 == 10) {
                        FUN_00045f98(param_2, param_1, 8, "unexpected newline");
                    } else {
                        FUN_00045f98(param_2, param_1, 8,
                                     "control character 0x%x", uVar9);
                    }
                    goto LAB_000466d4;
                }
                if (uVar9 != 0x5c)
                    goto LAB_00046648;
                uVar9 = FUN_0004640c(param_1, param_2);
                if (uVar9 != 0x75)
                    break;
                uVar9 = FUN_0004640c(param_1, param_2);
                iVar7 = 4;
                do {
                    uVar8 = (uVar9 & 0xffffffdf) - 0x41;
                    bVar13 = 4 < uVar8;
                    bVar12 = uVar8 == 5;
                    if (5 < uVar8) {
                        bVar13 = 8 < uVar9 - 0x30;
                        bVar12 = uVar9 - 0x30 == 9;
                    }
                    if (bVar13 && !bVar12)
                        goto LAB_000466bc;
                    uVar9 = FUN_0004640c(param_1, param_2);
                    iVar7 = iVar7 + -1;
                } while (iVar7 != 0);
            }
        } while (((uVar9 == 0x5c || (uVar9 & 0xffffffbf) == 0x22) ||
                  (uVar9 == 0x2f)) ||
                 (((uVar9 & 0xfffffff7) == 0x66 ||
                   ((uVar9 - 0x72 & 0xfffffffd) == 0))));
    LAB_000466bc:
        FUN_00045f98(param_2, param_1, 8, "invalid escape");
    LAB_000466d4:
        FUN_00047764(*(undefined4 *)(param_1 + 0x40));
        *(undefined4 *)(param_1 + 0x40) = 0;
        *(undefined4 *)(param_1 + 0x44) = 0;
        return *(uint *)(param_1 + 0x3c);
    }
    bVar12 = 0x2c < uVar9;
    if (uVar9 != 0x2d) {
        bVar12 = 8 < uVar9 - 0x30;
    }
    if (bVar12 && (uVar9 != 0x2d && uVar9 - 0x30 != 9)) {
        if ((uVar9 & 0xffffffdf) - 0x41 < 0x1a) {
            do {
                uVar9 = FUN_0004640c(param_1, param_2);
            } while ((uVar9 & 0xffffffdf) - 0x41 < 0x1a);
            FUN_0004644c(param_1, uVar9);
            pcVar2 = (char *)FUN_00047894(iVar11);
            iVar11 = strcmp(pcVar2, "true");
            if (iVar11 == 0) {
                *(undefined4 *)(param_1 + 0x3c) = 0x103;
                return 0x103;
            }
            iVar11 = strcmp(pcVar2, "false");
            if (iVar11 == 0) {
                uVar9 = 0x104;
                goto LAB_0004660c;
            }
            iVar11 = strcmp(pcVar2, "null");
            if (iVar11 == 0) {
                *(undefined4 *)(param_1 + 0x3c) = 0x105;
                return 0x105;
            }
        } else {
            cVar1 = *(char *)(param_1 + *(int *)(param_1 + 0x10) + 8);
            while (cVar1 != '\0') {
                FUN_0004797c(iVar11);
                iVar7 = *(int *)(param_1 + 0x10) + 1;
                *(int *)(param_1 + 0x10) = iVar7;
                *(int *)(param_1 + 0x24) = *(int *)(param_1 + 0x24) + 1;
                cVar1 = *(char *)(param_1 + iVar7 + 8);
            }
        }
        goto LAB_000465e0;
    }
    *(undefined4 *)(param_1 + 0x3c) = 0xffffffff;
    if (uVar9 == 0x2d) {
        uVar9 = FUN_0004640c(param_1, param_2);
        if (uVar9 == 0x30)
            goto LAB_00046a78;
        if (uVar9 - 0x30 < 10)
            goto LAB_00046708;
    LAB_00046a94:
        FUN_0004644c(param_1, uVar9);
        uVar9 = *(uint *)(param_1 + 0x3c);
    } else {
        if (uVar9 == 0x30) {
        LAB_00046a78:
            uVar9 = FUN_0004640c(param_1, param_2);
            if (uVar9 - 0x30 < 10)
                goto LAB_00046a94;
        } else {
        LAB_00046708:
            do {
                uVar9 = FUN_0004640c(param_1, param_2);
            } while (uVar9 - 0x30 < 10);
        }
        if (((*(uint *)(param_1 + 0x34) & 8) == 0) &&
            (uVar9 != 0x2e && uVar9 != 0x45)) {
            if (uVar9 != 0x65) {
                FUN_0004644c(param_1, uVar9);
                pcVar2 = (char *)FUN_00047894(iVar11);
                piVar3 = __errno_location();
                *piVar3 = 0;
                lVar14 = strtoll(pcVar2, &local_30, 10);
                if (*piVar3 == 0x22) {
                    if (lVar14 < 0) {
                        pcVar2 = "too big negative integer";
                    } else {
                        pcVar2 = "too big integer";
                    }
                    FUN_00045f98(param_2, param_1, 0xf, pcVar2);
                    return *(uint *)(param_1 + 0x3c);
                }
                if (local_30 == pcVar2 + *(int *)(param_1 + 0x2c)) {
                    *(longlong *)(param_1 + 0x40) = lVar14;
                    *(undefined4 *)(param_1 + 0x3c) = 0x101;
                    return 0x101;
                }
                /* WARNING: Subroutine does not return */
                __assert_fail("end == saved_text + lex->saved_text.length",
                              "load.c", 0x21d, "lex_scan_number");
            }
        LAB_00046834:
            uVar9 = FUN_0004640c(param_1, param_2);
            if ((uVar9 - 0x2b & 0xfffffffd) == 0) {
                uVar9 = FUN_0004640c(param_1, param_2);
            }
            if (9 < uVar9 - 0x30)
                goto LAB_00046a94;
            do {
                uVar9 = FUN_0004640c(param_1, param_2);
            } while (uVar9 - 0x30 < 10);
        } else {
            if (uVar9 == 0x2e) {
                uVar9 = *(uint *)(param_1 + 0x14);
                if (uVar9 == 0) {
                    uVar9 = FUN_00046284(param_1, param_2);
                }
                if (9 < uVar9 - 0x30) {
                    FUN_000461c8(param_1);
                    return *(uint *)(param_1 + 0x3c);
                }
                FUN_0004797c(iVar11, uVar9 & 0xff);
                do {
                    uVar9 = FUN_0004640c(param_1, param_2);
                } while (uVar9 - 0x30 < 10);
            }
            if ((uVar9 & 0xffffffdf) == 0x45)
                goto LAB_00046834;
        }
        FUN_0004644c(param_1, uVar9);
        iVar11 = FUN_000479c8(iVar11, &local_30);
        if (iVar11 == 0) {
            uVar9 = 0x102;
            *(undefined4 *)(param_1 + 0x3c) = 0x102;
            *(char **)(param_1 + 0x40) = local_30;
            *(undefined4 *)(param_1 + 0x44) = uStack_2c;
        } else {
            FUN_00045f98(param_2, param_1, 0xf, "real number overflow");
            uVar9 = *(uint *)(param_1 + 0x3c);
        }
    }
    return uVar9;
LAB_0004697c:
    while (true) {
        bVar6 = *pbVar10;
        if (bVar6 == 0x22) {
            *pbVar4 = 0;
            *(undefined4 *)(param_1 + 0x3c) = 0x100;
            *(int *)(param_1 + 0x44) = (int)pbVar4 - *(int *)(param_1 + 0x40);
            return 0x100;
        }
        if (bVar6 == 0x5c)
            break;
        *pbVar4 = bVar6;
        pbVar4 = pbVar4 + 1;
        pbVar10 = pbVar10 + 1;
    }
    bVar6 = pbVar10[1];
    if (bVar6 == 0x75) {
        iVar11 = FUN_00046134();
        pbVar5 = pbVar10;
        if (iVar11 < 0) {
        LAB_00046ba4:
            FUN_00045f98(param_2, param_1, 8, "invalid Unicode escape \'%.6s\'",
                         pbVar5);
            goto LAB_000466d4;
        }
        pbVar5 = pbVar10 + 6;
        if (iVar11 - 0xd800U < 0x400) {
            if ((pbVar10[6] == 0x5c) && (pbVar10[7] == 0x75)) {
                iVar7 = FUN_00046134(pbVar10 + 7);
                if (iVar7 < 0)
                    goto LAB_00046ba4;
                pbVar5 = pbVar10 + 0xc;
                if (0x3ff < iVar7 - 0xdc00U) {
                    FUN_00045f98(param_2, param_1, 8,
                                 "invalid Unicode \'\\u%04X\\u%04X\'", iVar11,
                                 iVar7);
                    goto LAB_000466d4;
                }
                iVar11 =
                    (iVar7 - 0xdc00U) + (iVar11 - 0xd800U) * 0x400 + 0x10000;
            LAB_00046a54:
                iVar11 = FUN_00047bf8(iVar11, pbVar4, &local_30);
                if (iVar11 != 0) {
                    /* WARNING: Subroutine does not return */
                    __assert_fail("0", "load.c", 0x1c4, "lex_scan_string");
                }
                pbVar4 = pbVar4 + (int)local_30;
                pbVar10 = pbVar5;
                goto LAB_0004697c;
            }
        } else if (0x3ff < iVar11 - 0xdc00U)
            goto LAB_00046a54;
        FUN_00045f98(param_2, param_1, 8, "invalid Unicode \'\\u%04X\'",
                     iVar11);
        goto LAB_000466d4;
    }
    if (bVar6 == 0x62) {
        *pbVar4 = 8;
    } else if (bVar6 < 99) {
        if (((bVar6 != 0x2f) && (bVar6 != 0x5c)) && (bVar6 != 0x22))
            goto LAB_00046b08;
    LAB_00046ae0:
        *pbVar4 = bVar6;
    } else if (bVar6 == 0x6e) {
        *pbVar4 = 10;
    } else {
        if (bVar6 < 0x6f) {
            if (bVar6 != 0x66) {
            LAB_00046b08:
                /* WARNING: Subroutine does not return */
                __assert_fail("0", "load.c", 0x1d0, "lex_scan_string");
            }
            bVar6 = 0xc;
            goto LAB_00046ae0;
        }
        if (bVar6 == 0x72) {
            *pbVar4 = 0xd;
        } else {
            if (bVar6 != 0x74)
                goto LAB_00046b08;
            *pbVar4 = 9;
        }
    }
    pbVar4 = pbVar4 + 1;
    pbVar10 = pbVar10 + 2;
    goto LAB_0004697c;
}

int FUN_00046cb0(int param_1, uint param_2, undefined4 param_3)

{
    bool bVar1;
    void *pvVar2;
    int iVar3;
    uint uVar4;
    int iVar5;
    int *piVar6;
    void *pvVar7;
    size_t sVar8;

    uVar4 = *(int *)(param_1 + 0x38) + 1;
    *(uint *)(param_1 + 0x38) = uVar4;
    if (0x800 < uVar4) {
        FUN_00045f98(param_3, param_1, 2, "maximum parsing depth reached");
        return 0;
    }
    iVar5 = *(int *)(param_1 + 0x3c);
    if (iVar5 == 0x101) {
        iVar5 = FUN_00048858(*(undefined4 *)(param_1 + 0x40),
                             *(undefined4 *)(param_1 + 0x44));
    } else if (iVar5 < 0x102) {
        if (iVar5 == 0x5b) {
            iVar5 = FUN_00048408();
            if (iVar5 == 0) {
                return 0;
            }
            FUN_00046498(param_1, param_3);
            iVar3 = *(int *)(param_1 + 0x3c);
            if (iVar3 != 0x5d) {
                while (iVar3 != 0) {
                    iVar3 = FUN_00046cb0(param_1, param_2, param_3);
                    if ((iVar3 == 0) ||
                        (iVar3 = FUN_0004935c(iVar5), iVar3 != 0))
                        goto LAB_00046fd8;
                    FUN_00046498(param_1, param_3);
                    if (*(int *)(param_1 + 0x3c) != 0x2c) {
                        if (*(int *)(param_1 + 0x3c) == 0x5d)
                            goto LAB_00046d18;
                        break;
                    }
                    FUN_00046498(param_1, param_3);
                    iVar3 = *(int *)(param_1 + 0x3c);
                }
                FUN_00045f98(param_3, param_1, 8, "\']\' expected");
            LAB_00046fd8:
                if (*(int *)(iVar5 + 4) == -1) {
                    return 0;
                }
                piVar6 = (int *)(iVar5 + 4);
                DataMemoryBarrier(0xb);
                do {
                    iVar3 = *piVar6 + -1;
                    bVar1 = (bool)hasExclusiveAccess(piVar6);
                } while (!bVar1);
                *piVar6 = iVar3;
            LAB_00047000:
                if (iVar3 == 0) {
                    FUN_00048a34(iVar5);
                    return 0;
                }
                return 0;
            }
            goto LAB_00046d18;
        }
        if (iVar5 < 0x5c) {
            if (iVar5 == -1) {
                FUN_00045f98(param_3, param_1, 8, "invalid token");
                return 0;
            }
        LAB_00047018:
            FUN_00045f98(param_3, param_1, 8, "unexpected token");
            return 0;
        }
        if (iVar5 == 0x7b) {
            iVar5 = FUN_00048078();
            if (iVar5 == 0) {
                return 0;
            }
            FUN_00046498(param_1, param_3);
            if (*(int *)(param_1 + 0x3c) != 0x7d) {
                if (*(int *)(param_1 + 0x3c) == 0x100) {
                    pvVar7 = *(void **)(param_1 + 0x40);
                    sVar8 = *(size_t *)(param_1 + 0x44);
                    *(undefined4 *)(param_1 + 0x40) = 0;
                    *(undefined4 *)(param_1 + 0x44) = 0;
                    if (pvVar7 == (void *)0x0) {
                        return 0;
                    }
                    while (true) {
                        pvVar2 = memchr(pvVar7, 0, sVar8);
                        if (pvVar2 != (void *)0x0) {
                            FUN_00047764(pvVar7);
                            FUN_00045f98(
                                param_3, param_1, 0xd,
                                "NUL byte in object key not supported");
                            goto LAB_00046ee0;
                        }
                        if (((param_2 & 1) != 0) &&
                            (iVar3 = FUN_000480fc(iVar5, pvVar7), iVar3 != 0)) {
                            FUN_00047764(pvVar7);
                            FUN_00045f98(param_3, param_1, 0xe,
                                         "duplicate object key");
                            goto LAB_00046ee0;
                        }
                        FUN_00046498(param_1, param_3);
                        if (*(int *)(param_1 + 0x3c) != 0x3a) {
                            FUN_00047764(pvVar7, param_3);
                            FUN_00045f98(param_3, param_1, 8, "\':\' expected");
                            goto LAB_00046ee0;
                        }
                        FUN_00046498(param_1);
                        iVar3 = FUN_00046cb0(param_1, param_2, param_3);
                        if (iVar3 == 0) {
                            FUN_00047764(pvVar7, pvVar7);
                            goto LAB_00046ee0;
                        }
                        iVar3 = FUN_00048cf4(iVar5);
                        if (iVar3 != 0) {
                            FUN_00047764(pvVar7);
                            goto LAB_00046ee0;
                        }
                        FUN_00047764(pvVar7);
                        FUN_00046498(param_1, param_3);
                        if (*(int *)(param_1 + 0x3c) != 0x2c)
                            break;
                        FUN_00046498(param_1, param_3);
                        if (*(int *)(param_1 + 0x3c) != 0x100)
                            goto LAB_00047098;
                        pvVar7 = *(void **)(param_1 + 0x40);
                        sVar8 = *(size_t *)(param_1 + 0x44);
                        *(undefined4 *)(param_1 + 0x40) = 0;
                        *(undefined4 *)(param_1 + 0x44) = 0;
                        if (pvVar7 == (void *)0x0) {
                            return 0;
                        }
                    }
                    if (*(int *)(param_1 + 0x3c) == 0x7d)
                        goto LAB_00046d18;
                    FUN_00045f98(param_3, param_1, 8, "\'}\' expected");
                } else {
                LAB_00047098:
                    FUN_00045f98(param_3, param_1, 8,
                                 "string or \'}\' expected");
                }
            LAB_00046ee0:
                if (*(int *)(iVar5 + 4) == -1) {
                    return 0;
                }
                piVar6 = (int *)(iVar5 + 4);
                DataMemoryBarrier(0xb);
                do {
                    iVar3 = *piVar6 + -1;
                    bVar1 = (bool)hasExclusiveAccess(piVar6);
                } while (!bVar1);
                *piVar6 = iVar3;
                goto LAB_00047000;
            }
            goto LAB_00046d18;
        }
        if (iVar5 != 0x100)
            goto LAB_00047018;
        pvVar7 = *(void **)(param_1 + 0x40);
        sVar8 = *(size_t *)(param_1 + 0x44);
        if (((param_2 & 0x10) == 0) &&
            (pvVar2 = memchr(pvVar7, 0, sVar8), pvVar2 != (void *)0x0)) {
            FUN_00045f98(param_3, param_1, 0xb,
                         "\\u0000 is not allowed without JSON_ALLOW_NUL");
            return 0;
        }
        iVar5 = FUN_000485c0(pvVar7, sVar8);
        *(undefined4 *)(param_1 + 0x40) = 0;
        *(undefined4 *)(param_1 + 0x44) = 0;
    } else if (iVar5 == 0x103) {
        iVar5 = FUN_00048a10();
    } else if (iVar5 < 0x103) {
        iVar5 = FUN_000488dc((int)*(undefined8 *)(param_1 + 0x40));
    } else if (iVar5 == 0x104) {
        iVar5 = FUN_00048a1c();
    } else {
        if (iVar5 != 0x105)
            goto LAB_00047018;
        iVar5 = FUN_00048a28();
    }
    if (iVar5 == 0) {
        return 0;
    }
LAB_00046d18:
    *(int *)(param_1 + 0x38) = *(int *)(param_1 + 0x38) + -1;
    return iVar5;
}

int FUN_00047154(int param_1, uint param_2, int param_3)

{
    bool bVar1;
    int iVar2;
    int iVar3;
    int *piVar4;

    *(undefined4 *)(param_1 + 0x38) = 0;
    FUN_00046498(param_1, param_3);
    if (((param_2 & 4) == 0) &&
        ((*(uint *)(param_1 + 0x3c) & 0xffffffdf) != 0x5b)) {
        FUN_00045f98(param_3, param_1, 8, "\'[\' or \'{\' expected");
        return 0;
    }
    iVar2 = FUN_00046cb0(param_1, param_2, param_3);
    if (iVar2 != 0) {
        if (((param_2 & 2) != 0) ||
            (FUN_00046498(param_1, param_3), *(int *)(param_1 + 0x3c) == 0)) {
            if (param_3 == 0) {
                return iVar2;
            }
            *(undefined4 *)(param_3 + 8) = *(undefined4 *)(param_1 + 0x24);
            return iVar2;
        }
        FUN_00045f98(param_3, param_1, 7, "end of file expected");
        if (*(int *)(iVar2 + 4) != -1) {
            piVar4 = (int *)(iVar2 + 4);
            DataMemoryBarrier(0xb);
            do {
                iVar3 = *piVar4;
                bVar1 = (bool)hasExclusiveAccess(piVar4);
            } while (!bVar1);
            *piVar4 = iVar3 + -1;
            if (iVar3 + -1 == 0) {
                FUN_00048a34(iVar2);
                return 0;
            }
        }
    }
    return 0;
}

undefined4 FUN_00047258(int param_1, undefined4 param_2, undefined4 param_3)

{
    int iVar1;
    undefined4 uVar2;
    int local_68[2];
    undefined1 *local_60;
    undefined1 *local_5c;
    undefined1 local_58;
    undefined4 local_50;
    undefined4 local_4c;
    undefined4 local_48;
    undefined4 local_44;
    undefined4 local_3c;
    undefined1 auStack_38[12];
    undefined4 local_2c;
    undefined4 local_24;

    FUN_000497d4(param_3, "<string>");
    if (param_1 == 0) {
        FUN_00045f98(param_3, 0, 4, "wrong arguments");
        uVar2 = 0;
    } else {
        uVar2 = 0;
        local_60 = &LAB_00045ef4;
        local_68[1] = 0;
        local_58 = 0;
        local_50 = 0;
        local_4c = 0;
        local_44 = 0;
        local_3c = 0;
        local_48 = 1;
        local_68[0] = param_1;
        local_5c = (undefined1 *)local_68;
        iVar1 = FUN_00047820(auStack_38);
        if (iVar1 == 0) {
            local_24 = 0xffffffff;
            local_2c = param_2;
            uVar2 = FUN_00047154(&local_60, param_2, param_3);
            FUN_000460c8(&local_60);
        }
    }
    return uVar2;
}

undefined4 FUN_00047320(int param_1, undefined4 param_2, undefined4 param_3,
                        undefined4 param_4)

{
    int iVar1;
    undefined4 uVar2;
    int local_6c;
    undefined4 local_68;
    undefined4 local_64;
    undefined1 *local_60;
    int *local_5c;
    undefined1 local_58;
    undefined4 local_50;
    undefined4 local_4c;
    undefined4 local_48;
    undefined4 local_44;
    undefined4 local_3c;
    undefined1 auStack_38[12];
    undefined4 local_2c;
    undefined4 local_24;

    FUN_000497d4(param_4, "<buffer>");
    if (param_1 == 0) {
        FUN_00045f98(param_4, 0, 4, "wrong arguments");
        uVar2 = 0;
    } else {
        uVar2 = 0;
        local_5c = &local_6c;
        local_60 = &LAB_00045f18;
        local_64 = 0;
        local_58 = 0;
        local_50 = 0;
        local_4c = 0;
        local_44 = 0;
        local_3c = 0;
        local_48 = 1;
        local_6c = param_1;
        local_68 = param_2;
        iVar1 = FUN_00047820(auStack_38);
        if (iVar1 == 0) {
            local_24 = 0xffffffff;
            local_2c = param_3;
            uVar2 = FUN_00047154(&local_60, param_3, param_4);
            FUN_000460c8(&local_60);
        }
    }
    return uVar2;
}

undefined4 FUN_000473f4(int param_1, undefined4 param_2, undefined4 param_3)

{
    int iVar1;
    undefined4 uVar2;
    char *pcVar3;
    code *local_60;
    int local_5c;
    undefined1 local_58;
    undefined4 local_50;
    undefined4 local_4c;
    undefined4 local_48;
    undefined4 local_44;
    undefined4 local_3c;
    undefined1 auStack_38[12];
    undefined4 local_2c;
    undefined4 local_24;

    pcVar3 = "<stdin>";
    if (stdin != param_1) {
        pcVar3 = "<stream>";
    }
    FUN_000497d4(param_3, pcVar3);
    if (param_1 == 0) {
        FUN_00045f98(param_3, 0, 4, "wrong arguments");
        uVar2 = 0;
    } else {
        uVar2 = 0;
        local_60 = fgetc;
        local_58 = 0;
        local_50 = 0;
        local_4c = 0;
        local_44 = 0;
        local_3c = 0;
        local_48 = 1;
        local_5c = param_1;
        iVar1 = FUN_00047820(auStack_38);
        if (iVar1 == 0) {
            local_24 = 0xffffffff;
            local_2c = param_2;
            uVar2 = FUN_00047154(&local_60, param_2, param_3);
            FUN_000460c8(&local_60);
        }
    }
    return uVar2;
}

undefined4 FUN_000475b0(char *param_1, undefined4 param_2, undefined4 param_3)

{
    FILE *__stream;
    undefined4 uVar1;
    int *piVar2;
    char *pcVar3;

    FUN_000497d4(param_3, param_1);
    if (param_1 == (char *)0x0) {
        FUN_00045f98(param_3, 0, 4, "wrong arguments");
        uVar1 = 0;
    } else {
        __stream = fopen64(param_1, "rb");
        if (__stream == (FILE *)0x0) {
            piVar2 = __errno_location();
            pcVar3 = strerror(*piVar2);
            FUN_00045f98(param_3, 0, 3, "unable to open %s: %s", param_1,
                         pcVar3);
            uVar1 = 0;
        } else {
            uVar1 = FUN_000473f4(__stream, param_2, param_3);
            fclose(__stream);
        }
    }
    return uVar1;
}

undefined4 FUN_00047668(int param_1, undefined4 param_2, undefined4 param_3,
                        undefined4 param_4)

{
    int iVar1;
    undefined4 uVar2;
    undefined1 *local_470;
    undefined1 *local_46c;
    undefined1 local_468;
    undefined4 local_460;
    undefined4 local_45c;
    undefined4 local_458;
    undefined4 local_454;
    undefined4 local_44c;
    undefined1 auStack_448[12];
    undefined4 local_43c;
    undefined4 local_434;
    undefined1 auStack_428[1032];
    int local_20;
    undefined4 local_1c;

    memset(auStack_428, 0, 0x410);
    local_20 = param_1;
    local_1c = param_2;
    FUN_000497d4(param_4, "<callback>");
    if (param_1 == 0) {
        FUN_00045f98(param_4, 0, 4, "wrong arguments");
        uVar2 = 0;
    } else {
        uVar2 = 0;
        local_46c = auStack_428;
        local_470 = &LAB_00045f3c;
        local_468 = 0;
        local_460 = 0;
        local_45c = 0;
        local_454 = 0;
        local_44c = 0;
        local_458 = 1;
        iVar1 = FUN_00047820(auStack_448);
        if (iVar1 == 0) {
            local_434 = 0xffffffff;
            local_43c = param_3;
            uVar2 = FUN_00047154(&local_470, param_3, param_4);
            FUN_000460c8(&local_470);
        }
    }
    return uVar2;
}

void FUN_0004774c(int param_1)

{
    if (param_1 == 0) {
        return;
    }
    /* WARNING: Could not recover jumptable at 0x00047760. Too many branches */
    /* WARNING: Treating indirect jump as call */
    (*DAT_00068a44)();
    return;
}

void FUN_00047764(int param_1)

{
    if (param_1 == 0) {
        return;
    }
    (*DAT_00068a48)();
    return;
}

void *FUN_0004777c(void *param_1, size_t param_2)

{
    void *__dest;

    __dest = (void *)(param_2 + 1);
    if ((__dest != (void *)0x0) &&
        (__dest = (void *)(*DAT_00068a44)(__dest), __dest != (void *)0x0)) {
        memcpy(__dest, param_1, param_2);
        *(undefined1 *)((int)__dest + param_2) = 0;
    }
    return __dest;
}

void FUN_000477c8(char *param_1)

{
    size_t sVar1;

    sVar1 = strlen(param_1);
    FUN_0004777c(param_1, sVar1);
    return;
}

undefined4 FUN_00047820(undefined4 *param_1)

{
    undefined1 *puVar1;
    undefined4 uVar2;

    param_1[2] = 0x10;
    param_1[1] = 0;
    puVar1 = (undefined1 *)FUN_0004774c();
    *param_1 = puVar1;
    if (puVar1 == (undefined1 *)0x0) {
        uVar2 = 0xffffffff;
    } else {
        *puVar1 = 0;
        uVar2 = 0;
    }
    return uVar2;
}

void FUN_00047854(int *param_1)

{
    if (*param_1 != 0) {
        FUN_00047764();
    }
    param_1[2] = 0;
    param_1[1] = 0;
    *param_1 = 0;
    return;
}

void FUN_00047880(undefined4 *param_1)

{
    param_1[1] = 0;
    *(undefined1 *)*param_1 = 0;
    return;
}

undefined4 FUN_00047894(undefined4 *param_1)

{
    return *param_1;
}

undefined4 FUN_000478b0(int *param_1, void *param_2, size_t param_3)

{
    uint uVar1;
    uint uVar2;
    int iVar3;
    void *__dest;

    iVar3 = param_1[2];
    uVar1 = param_1[1];
    if (param_3 < iVar3 - uVar1) {
        __dest = (void *)*param_1;
    LAB_00047944:
        memcpy((void *)((int)__dest + uVar1), param_2, param_3);
        iVar3 = param_1[1];
        param_1[1] = param_3 + iVar3;
        *(undefined1 *)(*param_1 + param_3 + iVar3) = 0;
        return 0;
    }
    if ((param_3 != 0xffffffff && -1 < iVar3) && (uVar1 <= -param_3 - 2)) {
        uVar2 = param_3 + 1 + uVar1;
        if (uVar2 < (uint)(iVar3 << 1)) {
            uVar2 = iVar3 << 1;
        }
        __dest = (void *)FUN_0004774c(uVar2);
        if (__dest != (void *)0x0) {
            memcpy(__dest, (void *)*param_1, param_1[1]);
            FUN_00047764(*param_1);
            uVar1 = param_1[1];
            *param_1 = (int)__dest;
            param_1[2] = uVar2;
            goto LAB_00047944;
        }
    }
    return 0xffffffff;
}

void FUN_0004797c(undefined4 param_1, undefined1 param_2)

{
    undefined1 local_9[5];

    local_9[0] = param_2;
    FUN_000478b0(param_1, local_9, 1);
    return;
}

undefined1 FUN_000479a0(int *param_1)

{
    undefined1 uVar1;
    int iVar2;

    if (param_1[1] == 0) {
        uVar1 = 0;
    } else {
        iVar2 = param_1[1] + -1;
        param_1[1] = iVar2;
        uVar1 = *(undefined1 *)(*param_1 + iVar2);
        *(undefined1 *)(*param_1 + iVar2) = 0;
    }
    return uVar1;
}

undefined4 FUN_000479c8(int *param_1, double *param_2)

{
    char cVar1;
    lconv *plVar2;
    char *pcVar3;
    int *piVar4;
    undefined4 uVar5;
    char *__s;
    double dVar6;
    char *local_1c[2];

    plVar2 = localeconv();
    __s = (char *)*param_1;
    cVar1 = *plVar2->decimal_point;
    if ((cVar1 != '.') && (pcVar3 = strchr(__s, 0x2e), pcVar3 != (char *)0x0)) {
        *pcVar3 = cVar1;
        __s = (char *)*param_1;
    }
    piVar4 = __errno_location();
    *piVar4 = 0;
    dVar6 = strtod(__s, local_1c);
    if (local_1c[0] == (char *)(*param_1 + param_1[1])) {
        if (((dVar6 <= 1.79769313486232e+308) &&
             (-1.79769313486232e+308 <= dVar6)) ||
            (*piVar4 != 0x22)) {
            uVar5 = 0;
            *param_2 = dVar6;
        } else {
            uVar5 = 0xffffffff;
        }
        return uVar5;
    }
    /* WARNING: Subroutine does not return */
    __assert_fail("end == strbuffer->value + strbuffer->length", "strconv.c",
                  0x4e, "jsonp_strtod");
}

uint FUN_00047ab8(char *param_1, uint param_2, int param_3)

{
    char cVar1;
    uint uVar2;
    lconv *plVar3;
    char *pcVar4;
    char *pcVar5;
    size_t __n;

    if (param_3 == 0) {
        param_3 = 0x11;
    }
    uVar2 = snprintf(param_1, param_2, "%.*g", param_3);
    if (param_2 <= uVar2) {
        return 0xffffffff;
    }
    plVar3 = localeconv();
    if (((byte)*plVar3->decimal_point != 0x2e) &&
        (pcVar4 = strchr(param_1, (uint)(byte)*plVar3->decimal_point),
         pcVar4 != (char *)0x0)) {
        *pcVar4 = '.';
    }
    pcVar5 = strchr(param_1, 0x2e);
    pcVar4 = strchr(param_1, 0x65);
    if (pcVar5 == (char *)0x0) {
        if (pcVar4 != (char *)0x0)
            goto LAB_00047b44;
        if (param_2 <= uVar2 + 3) {
            return 0xffffffff;
        }
        pcVar4 = param_1 + uVar2;
        *pcVar4 = '.';
        uVar2 = uVar2 + 2;
        pcVar4[1] = '0';
        param_1[uVar2] = '\0';
        pcVar4 = strchr(param_1, 0x65);
    }
    if (pcVar4 == (char *)0x0) {
        return uVar2;
    }
LAB_00047b44:
    pcVar5 = pcVar4 + 2;
    cVar1 = pcVar4[2];
    if (pcVar4[1] == '-') {
        pcVar4 = pcVar5;
        if (cVar1 == '0')
            goto LAB_00047b64;
    } else {
        pcVar4 = pcVar4 + 1;
        while (cVar1 == '0') {
        LAB_00047b64:
            pcVar5 = pcVar5 + 1;
            cVar1 = *pcVar5;
        }
        if (pcVar5 != pcVar4) {
            __n = uVar2 - ((int)pcVar5 - (int)param_1);
            uVar2 = uVar2 - ((int)pcVar5 - (int)pcVar4);
            memmove(pcVar4, pcVar5, __n);
        }
    }
    return uVar2;
}

undefined4 FUN_00047bf8(int param_1, byte *param_2, undefined4 *param_3)

{
    byte bVar1;

    if (param_1 < 0) {
        return 0xffffffff;
    }
    bVar1 = (byte)param_1;
    if (param_1 < 0x80) {
        *param_2 = bVar1;
        *param_3 = 1;
        return 0;
    }
    if (param_1 < 0x800) {
        *param_2 = (char)(param_1 >> 6) - 0x40;
        param_2[1] = (bVar1 & 0x3f) + 0x80;
        *param_3 = 2;
        return 0;
    }
    if (0xffff < param_1) {
        if (param_1 < 0x110000) {
            *param_2 = (char)(param_1 >> 0x12) - 0x10;
            param_2[1] = (byte)((uint)(param_1 << 0xe) >> 0x1a) + 0x80;
            param_2[2] = (byte)((uint)(param_1 << 0x14) >> 0x1a) + 0x80;
            param_2[3] = (bVar1 & 0x3f) + 0x80;
            *param_3 = 4;
            return 0;
        }
        return 0xffffffff;
    }
    *param_2 = (char)(param_1 >> 0xc) - 0x20;
    param_2[1] = (byte)((uint)(param_1 << 0x14) >> 0x1a) + 0x80;
    param_2[2] = (bVar1 & 0x3f) + 0x80;
    *param_3 = 3;
    return 0;
}

undefined4 FUN_00047ce4(uint param_1)

{
    undefined4 uVar1;

    if ((param_1 & 0x80) == 0) {
        return 1;
    }
    if ((param_1 ^ 0x80) < 0x42) {
        return 0;
    }
    if ((param_1 + 0x3e & 0xff) < 0x1e) {
        return 2;
    }
    if ((param_1 + 0x20 & 0xff) < 0x10) {
        return 3;
    }
    if ((param_1 + 0x10 & 0xff) < 5) {
        uVar1 = 4;
    } else {
        uVar1 = 0;
    }
    return uVar1;
}

undefined4 FUN_00047d50(byte *param_1, uint param_2, uint *param_3)

{
    uint uVar1;
    uint uVar2;
    uint uVar3;
    bool bVar4;

    uVar3 = (uint)*param_1;
    if (param_2 == 2) {
        uVar3 = uVar3 & 0x1f;
    } else if (param_2 == 3) {
        uVar3 = uVar3 & 0xf;
    } else {
        if (param_2 != 4) {
            return 0;
        }
        uVar3 = uVar3 & 7;
    }
    uVar1 = (uint)param_1[1];
    if ((uVar1 ^ 0x80) < 0x40) {
        param_1 = param_1 + 1;
        uVar2 = 1;
        do {
            uVar2 = uVar2 + 1;
            uVar3 = (uVar1 & 0x3f) + uVar3 * 0x40;
            if (param_2 <= uVar2) {
                if (0x10ffff < (int)uVar3) {
                    return 0;
                }
                if (uVar3 - 0xd800 < 0x800) {
                    return 0;
                }
                bVar4 = uVar3 == 0x7f;
                if ((int)uVar3 < 0x80) {
                    bVar4 = param_2 == 2;
                }
                if (bVar4) {
                    return 0;
                }
                if ((int)uVar3 < 0x800 && param_2 == 3) {
                    return 0;
                }
                if ((int)uVar3 < 0x10000 && param_2 == 4) {
                    return 0;
                }
                if (param_3 != (uint *)0x0) {
                    *param_3 = uVar3;
                }
                return 1;
            }
            param_1 = param_1 + 1;
            uVar1 = (uint)*param_1;
        } while ((uVar1 ^ 0x80) < 0x40);
    }
    return 0;
}

undefined1 *FUN_00047e38(undefined1 *param_1, int param_2, undefined4 *param_3)

{
    undefined4 uVar1;
    uint uVar2;
    int iVar3;
    undefined4 extraout_r2;
    undefined8 uVar4;
    undefined4 local_14;

    if (param_2 == 0) {
        return param_1;
    }
    uVar4 = FUN_00047ce4(*param_1);
    uVar2 = (uint)uVar4;
    if ((uVar2 != 0) &&
        ((uVar1 = extraout_r2,
          uVar2 == 1 || ((uVar2 <= (uint)((ulonglong)uVar4 >> 0x20) &&
                          (iVar3 = FUN_00047d50(param_1, uVar2, &local_14),
                           uVar1 = local_14, iVar3 != 0)))))) {
        local_14 = uVar1;
        if (param_3 != (undefined4 *)0x0) {
            *param_3 = local_14;
        }
        return param_1 + uVar2;
    }
    return (undefined1 *)0x0;
}

undefined4 FUN_00047eb4(int param_1, uint param_2)

{
    uint uVar1;
    uint uVar2;
    uint uVar3;
    undefined8 uVar4;

    if (param_2 != 0) {
        uVar3 = 0;
        uVar2 = param_2;
        do {
            uVar1 = FUN_00047ce4(*(undefined1 *)(param_1 + uVar3), uVar2);
            if (uVar1 == 0) {
                return 0;
            }
            uVar2 = uVar1;
            if (1 < uVar1) {
                if (param_2 - uVar3 < uVar1) {
                    return 0;
                }
                uVar4 = FUN_00047d50(param_1 + uVar3, uVar1, 0);
                uVar2 = (uint)((ulonglong)uVar4 >> 0x20);
                uVar3 = (uVar1 + uVar3) - 1;
                if ((int)uVar4 == 0) {
                    return 0;
                }
            }
            uVar3 = uVar3 + 1;
        } while (uVar3 < param_2);
    }
    return 1;
}

void *FUN_00047f80(int param_1, int param_2, int param_3)

{
    void *__dest;
    void *__src;
    uint uVar1;
    uint uVar2;

    uVar2 = *(uint *)(param_1 + 8);
    __src = *(void **)(param_1 + 0x10);
    if (uVar2 < (uint)(param_2 + *(int *)(param_1 + 0xc))) {
        uVar1 = uVar2 << 1;
        if (uVar1 < uVar2 + param_2) {
            uVar1 = uVar2 + param_2;
        }
        __dest = (void *)FUN_0004774c(uVar1 << 2);
        if (__dest == (void *)0x0) {
            __src = (void *)0x0;
        } else {
            *(uint *)(param_1 + 8) = uVar1;
            *(void **)(param_1 + 0x10) = __dest;
            if (param_3 != 0) {
                memcpy(__dest, __src, *(int *)(param_1 + 0xc) << 2);
                FUN_00047764(__src);
                return *(void **)(param_1 + 0x10);
            }
        }
    }
    return __src;
}

undefined4 *FUN_0004800c(int param_1, undefined4 param_2, int param_3)

{
    undefined4 *puVar1;

    if ((param_1 != 0) &&
        ((param_3 != 0 || (param_1 = FUN_0004777c(), param_1 != 0)))) {
        puVar1 = (undefined4 *)FUN_0004774c(0x10);
        if (puVar1 != (undefined4 *)0x0) {
            puVar1[2] = param_1;
            puVar1[3] = param_2;
            *puVar1 = 2;
            puVar1[1] = 1;
            return puVar1;
        }
        FUN_00047764(param_1);
        return (undefined4 *)0x0;
    }
    return (undefined4 *)0x0;
}

undefined4 *FUN_00048078(void)

{
    undefined4 *puVar1;
    int iVar2;

    puVar1 = (undefined4 *)FUN_0004774c(0x24);
    if (puVar1 != (undefined4 *)0x0) {
        if (DAT_00073108 == 0) {
            FUN_00045df8();
        }
        puVar1[1] = 1;
        *puVar1 = 0;
        iVar2 = FUN_000457e8(puVar1 + 2);
        if (iVar2 != 0) {
            FUN_00047764(puVar1);
            puVar1 = (undefined4 *)0x0;
        }
    }
    return puVar1;
}

int FUN_000480e0(int *param_1)

{
    int iVar1;

    if (param_1 != (int *)0x0) {
        if (*param_1 == 0) {
            iVar1 = param_1[2];
        } else {
            iVar1 = 0;
        }
        return iVar1;
    }
    return 0;
}

undefined4 FUN_000480fc(int *param_1, int param_2)

{
    undefined4 uVar1;

    if ((param_1 != (int *)0x0 && param_2 != 0) && (*param_1 == 0)) {
        uVar1 = FUN_00045b10(param_1 + 2);
        return uVar1;
    }
    return 0;
}

bool FUN_00048124(int *param_1, int *param_2)

{
    int iVar1;
    int iVar2;
    int iVar3;
    uint uVar4;
    uint uVar5;

    iVar3 = *param_1;
    if (iVar3 != *param_2) {
        return false;
    }
    if (param_1 == param_2) {
        return true;
    }
    switch (iVar3) {
    case 0:
        if (param_1[2] == param_2[2]) {
            iVar3 = FUN_00045cec(param_1 + 2);
            if (iVar3 != 0) {
                while (iVar3 = FUN_00045d7c(), iVar3 != 0) {
                    iVar1 = FUN_00045d84(iVar3 + -0x10);
                    if (iVar1 == 0) {
                        return true;
                    }
                    iVar2 = FUN_000480fc(param_2, iVar3);
                    if (iVar2 == 0) {
                        return false;
                    }
                    iVar1 = FUN_00048124(iVar1);
                    if (iVar1 == 0) {
                        return false;
                    }
                    if (*param_1 != 0) {
                        return true;
                    }
                    iVar3 = FUN_00045d64(param_1 + 2, iVar3 + -0x10);
                    if (iVar3 == 0) {
                        return true;
                    }
                }
            }
            return true;
        }
        break;
    case 1:
        uVar5 = param_1[3];
        if (uVar5 == param_2[3]) {
            if (uVar5 == 0) {
                return true;
            }
            uVar4 = 0;
            iVar1 = iVar3;
            while (true) {
                if ((iVar1 == 1) && (uVar4 < (uint)param_1[3])) {
                    iVar1 = *(int *)(param_1[4] + uVar4 * 4);
                } else {
                    iVar1 = 0;
                }
                if (iVar3 != 1) {
                    return false;
                }
                if ((uint)param_2[3] <= uVar4) {
                    return false;
                }
                if (*(int *)(param_2[4] + uVar4 * 4) == 0 || iVar1 == 0)
                    break;
                iVar3 = FUN_00048124();
                if (iVar3 == 0) {
                    return false;
                }
                uVar4 = uVar4 + 1;
                if (uVar5 == uVar4) {
                    return true;
                }
                iVar1 = *param_1;
                iVar3 = *param_2;
            }
            return false;
        }
        break;
    case 2:
        if ((param_1[3] == param_2[3]) &&
            (iVar3 = memcmp((void *)param_1[2], (void *)param_2[2], param_1[3]),
             iVar3 == 0)) {
            return true;
        }
        break;
    case 3:
        return param_1[3] == param_2[3] && param_1[2] == param_2[2];
    case 4:
        return *(double *)(param_1 + 2) == *(double *)(param_2 + 2);
    }
    return false;
}

undefined4 FUN_00048364(int *param_1)

{
    undefined4 uVar1;

    if ((param_1 != (int *)0x0) && (*param_1 == 0)) {
        uVar1 = FUN_00045cec(param_1 + 2);
        return uVar1;
    }
    return 0;
}

undefined4 FUN_000483b0(int *param_1, int param_2)

{
    undefined4 uVar1;

    if ((param_1 != (int *)0x0) && (*param_1 == 0 && param_2 != 0)) {
        uVar1 = FUN_00045d64(param_1 + 2);
        return uVar1;
    }
    return 0;
}

void FUN_000483e4(int param_1)

{
    if (param_1 == 0) {
        return;
    }
    FUN_00045d7c();
    return;
}

void FUN_000483f0(int param_1)

{
    if (param_1 == 0) {
        return;
    }
    FUN_00045d84();
    return;
}

int FUN_000483fc(int param_1)

{
    if (param_1 != 0) {
        param_1 = param_1 + -0x10;
    }
    return param_1;
}

undefined4 *FUN_00048408(void)

{
    undefined4 *puVar1;
    int iVar2;

    puVar1 = (undefined4 *)FUN_0004774c(0x14);
    if (puVar1 != (undefined4 *)0x0) {
        *puVar1 = 1;
        puVar1[1] = 1;
        puVar1[3] = 0;
        puVar1[2] = 8;
        iVar2 = FUN_0004774c(0x20);
        puVar1[4] = iVar2;
        if (iVar2 == 0) {
            FUN_00047764(puVar1);
            puVar1 = (undefined4 *)0x0;
        }
    }
    return puVar1;
}

int FUN_00048468(int *param_1)

{
    int iVar1;

    if (param_1 != (int *)0x0) {
        if (*param_1 == 1) {
            iVar1 = param_1[3];
        } else {
            iVar1 = 0;
        }
        return iVar1;
    }
    return 0;
}

undefined4 FUN_00048484(int *param_1, uint param_2)

{
    if (param_1 == (int *)0x0) {
        return 0;
    }
    if ((*param_1 == 1) && (param_2 < (uint)param_1[3])) {
        return *(undefined4 *)(param_1[4] + param_2 * 4);
    }
    return 0;
}

undefined4 FUN_000484b8(int *param_1, int *param_2)

{
    bool bVar1;
    int iVar2;
    size_t __n;
    void *__src;
    int *piVar3;
    uint uVar4;

    if ((((param_1 != (int *)0x0) &&
          (*param_1 == 1 && param_2 != (int *)0x0)) &&
         (*param_2 == 1)) &&
        (iVar2 = FUN_00047f80(param_1, param_2[3]), iVar2 != 0)) {
        __n = param_2[3];
        __src = (void *)param_2[4];
        if (__n != 0) {
            uVar4 = 0;
            do {
                iVar2 = *(int *)((int)__src + uVar4 * 4);
                if ((iVar2 != 0) &&
                    (piVar3 = (int *)(iVar2 + 4), *(int *)(iVar2 + 4) != -1)) {
                    do {
                        bVar1 = (bool)hasExclusiveAccess(piVar3);
                    } while (!bVar1);
                    *piVar3 = *piVar3 + 1;
                    DataMemoryBarrier(0xb);
                    __n = param_2[3];
                    __src = (void *)param_2[4];
                }
                uVar4 = uVar4 + 1;
            } while (uVar4 < __n);
            __n = __n << 2;
        }
        memcpy((void *)(param_1[4] + param_1[3] * 4), __src, __n);
        param_1[3] = param_1[3] + param_2[3];
        return 0;
    }
    return 0xffffffff;
}

void FUN_000485c0(undefined4 param_1, undefined4 param_2)

{
    FUN_0004800c(param_1, param_2, 1);
    return;
}

undefined4 FUN_000485c8(int param_1, undefined4 param_2)

{
    int iVar1;
    undefined4 uVar2;

    if (param_1 == 0) {
        return 0;
    }
    iVar1 = FUN_00047eb4();
    if (iVar1 != 0) {
        uVar2 = FUN_0004800c(param_1, param_2, 0);
        return uVar2;
    }
    return 0;
}

int FUN_00048630(int *param_1)

{
    int iVar1;

    if (param_1 != (int *)0x0) {
        if (*param_1 == 2) {
            iVar1 = param_1[2];
        } else {
            iVar1 = 0;
        }
        return iVar1;
    }
    return 0;
}

int FUN_0004864c(int *param_1)

{
    int iVar1;

    if (param_1 != (int *)0x0) {
        if (*param_1 == 2) {
            iVar1 = param_1[3];
        } else {
            iVar1 = 0;
        }
        return iVar1;
    }
    return 0;
}

undefined4 FUN_00048668(int *param_1, int param_2, int param_3)

{
    int iVar1;

    if (((param_1 != (int *)0x0) && (*param_1 == 2 && param_2 != 0)) &&
        (iVar1 = FUN_0004777c(param_2, param_3), iVar1 != 0)) {
        FUN_00047764(param_1[2]);
        param_1[2] = iVar1;
        param_1[3] = param_3;
        return 0;
    }
    return 0xffffffff;
}

undefined4 FUN_000486cc(undefined4 param_1, char *param_2)

{
    size_t sVar1;
    undefined4 uVar2;

    if (param_2 != (char *)0x0) {
        sVar1 = strlen(param_2);
        uVar2 = FUN_00048668(param_1, param_2, sVar1);
        return uVar2;
    }
    return 0xffffffff;
}

undefined4 FUN_00048700(undefined4 param_1, int param_2, undefined4 param_3)

{
    int iVar1;
    undefined4 uVar2;

    if ((param_2 != 0) &&
        (iVar1 = FUN_00047eb4(param_2, param_3), iVar1 != 0)) {
        uVar2 = FUN_00048668(param_1, param_2, param_3);
        return uVar2;
    }
    return 0xffffffff;
}

undefined4 FUN_00048744(undefined4 param_1, char *param_2)

{
    size_t sVar1;
    undefined4 uVar2;

    if (param_2 != (char *)0x0) {
        sVar1 = strlen(param_2);
        uVar2 = FUN_00048700(param_1, param_2, sVar1);
        return uVar2;
    }
    return 0xffffffff;
}

undefined4 FUN_00048778(char *param_1, __gnuc_va_list param_2)

{
    int iVar1;
    char *__s;
    int iVar2;
    undefined4 uVar3;

    iVar1 = vsnprintf((char *)0x0, 0, param_1, param_2);
    if (iVar1 != 0) {
        __s = (char *)FUN_0004774c(iVar1 + 1U);
        if (__s == (char *)0x0) {
            uVar3 = 0;
        } else {
            vsnprintf(__s, iVar1 + 1U, param_1, param_2);
            iVar2 = FUN_00047eb4(__s, iVar1);
            if (iVar2 == 0) {
                FUN_00047764(__s);
                uVar3 = 0;
            } else {
                uVar3 = FUN_0004800c(__s, iVar1, 1);
            }
        }
        return uVar3;
    }
    uVar3 = FUN_000485c8(&DAT_0004d5c8, 0);
    return uVar3;
}

void FUN_00048828(undefined4 param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    undefined4 uStack_c;
    undefined4 uStack_8;
    undefined4 uStack_4;

    uStack_c = param_2;
    uStack_8 = param_3;
    uStack_4 = param_4;
    FUN_00048778(param_1, &uStack_c);
    return;
}

void FUN_00048858(undefined4 param_1, undefined4 param_2)

{
    undefined4 *puVar1;

    puVar1 = (undefined4 *)FUN_0004774c(0x10);
    if (puVar1 == (undefined4 *)0x0) {
        return;
    }
    puVar1[2] = param_1;
    puVar1[3] = param_2;
    *puVar1 = 3;
    puVar1[1] = 1;
    return;
}

undefined8 FUN_0004888c(int *param_1)

{
    if ((param_1 != (int *)0x0) && (*param_1 == 3)) {
        return *(undefined8 *)(param_1 + 2);
    }
    return 0;
}

undefined4 *FUN_000488dc(undefined4 param_1, undefined4 param_2)

{
    undefined4 *puVar1;

    if ((!NAN((double)CONCAT44(param_2, param_1)) &&
         !NAN((double)CONCAT44(param_2, param_1))) &&
        (ABS((double)CONCAT44(param_2, param_1)) <= 1.79769313486232e+308)) {
        puVar1 = (undefined4 *)FUN_0004774c(0x10);
        if (puVar1 != (undefined4 *)0x0) {
            puVar1[2] = param_1;
            puVar1[3] = param_2;
            *puVar1 = 4;
            puVar1[1] = 1;
        }
        return puVar1;
    }
    return (undefined4 *)0x0;
}

undefined4 FUN_00048938(int *param_1)

{
    if ((param_1 != (int *)0x0) && (*param_1 == 4)) {
        return (int)*(undefined8 *)(param_1 + 2);
    }
    return 0;
}

undefined4 FUN_000489c8(int *param_1)

{
    undefined4 uVar1;

    if (param_1 != (int *)0x0) {
        if (*param_1 == 3) {
            uVar1 = FUN_0004a11c(param_1[2], param_1[3]);
            return uVar1;
        }
        if (*param_1 == 4) {
            return (int)*(undefined8 *)(param_1 + 2);
        }
    }
    return 0;
}

undefined *FUN_00048a10(void)

{
    return &DAT_00068a4c;
}

undefined *FUN_00048a1c(void)

{
    return &DAT_00068a54;
}

undefined *FUN_00048a28(void)

{
    return &DAT_00068a5c;
}

void FUN_00048a34(undefined4 *param_1)

{
    bool bVar1;
    int iVar2;
    uint uVar3;
    int *piVar4;
    int iVar5;
    uint uVar6;

    if (param_1 == (undefined4 *)0x0) {
        return;
    }
    switch (*param_1) {
    case 0:
        FUN_00045864(param_1 + 2);
        FUN_00047764(param_1);
        return;
    case 1:
        uVar3 = param_1[3];
        iVar2 = param_1[4];
        if (uVar3 != 0) {
            uVar6 = 0;
            do {
                iVar5 = *(int *)(iVar2 + uVar6 * 4);
                if ((iVar5 != 0) &&
                    (piVar4 = (int *)(iVar5 + 4), *(int *)(iVar5 + 4) != -1)) {
                    DataMemoryBarrier(0xb);
                    do {
                        iVar2 = *piVar4;
                        bVar1 = (bool)hasExclusiveAccess(piVar4);
                    } while (!bVar1);
                    *piVar4 = iVar2 + -1;
                    if (iVar2 + -1 == 0) {
                        FUN_00048a34(iVar5);
                    }
                    iVar2 = param_1[4];
                    uVar3 = param_1[3];
                }
                uVar6 = uVar6 + 1;
            } while (uVar6 < uVar3);
        }
        break;
    case 2:
        iVar2 = param_1[2];
        break;
    case 3:
    case 4:
        goto switchD_00048a48_caseD_3;
    default:
        return;
    }
    FUN_00047764(iVar2);
switchD_00048a48_caseD_3:
    FUN_00047764(param_1);
    return;
}

undefined4 FUN_00048b00(int *param_1)

{
    bool bVar1;
    int iVar2;
    uint uVar3;
    int *piVar4;
    uint uVar5;

    if ((param_1 != (int *)0x0) && (*param_1 == 1)) {
        uVar3 = param_1[3];
        if (uVar3 != 0) {
            uVar5 = 0;
            do {
                iVar2 = *(int *)(param_1[4] + uVar5 * 4);
                if ((iVar2 != 0) &&
                    (piVar4 = (int *)(iVar2 + 4), *(int *)(iVar2 + 4) != -1)) {
                    DataMemoryBarrier(0xb);
                    do {
                        iVar2 = *piVar4;
                        bVar1 = (bool)hasExclusiveAccess(piVar4);
                    } while (!bVar1);
                    *piVar4 = iVar2 + -1;
                    if (iVar2 + -1 == 0) {
                        FUN_00048a34();
                    }
                    uVar3 = param_1[3];
                }
                uVar5 = uVar5 + 1;
            } while (uVar5 < uVar3);
        }
        param_1[3] = 0;
        return 0;
    }
    return 0xffffffff;
}

undefined4 FUN_00048c28(int *param_1, uint param_2)

{
    bool bVar1;
    int iVar2;
    int *piVar3;
    uint uVar4;
    uint uVar5;

    if (((param_1 != (int *)0x0) && (*param_1 == 1)) &&
        (uVar5 = param_1[3], param_2 < uVar5)) {
        iVar2 = *(int *)(param_1[4] + param_2 * 4);
        if ((iVar2 != 0) && (*(int *)(iVar2 + 4) != -1)) {
            piVar3 = (int *)(iVar2 + 4);
            DataMemoryBarrier(0xb);
            do {
                iVar2 = *piVar3;
                bVar1 = (bool)hasExclusiveAccess(piVar3);
            } while (!bVar1);
            *piVar3 = iVar2 + -1;
            if (iVar2 + -1 == 0) {
                FUN_00048a34();
            }
            uVar5 = param_1[3];
        }
        uVar4 = uVar5 - 1;
        if (param_2 < uVar4) {
            memmove((void *)(param_1[4] + param_2 * 4),
                    (void *)(param_1[4] + param_2 * 4 + 4),
                    (~param_2 + uVar5) * 4);
            uVar4 = param_1[3] - 1;
        }
        param_1[3] = uVar4;
        return 0;
    }
    return 0xffffffff;
}

undefined4 FUN_00048cf4(int *param_1, int param_2, int *param_3)

{
    bool bVar1;
    int iVar2;
    int *piVar3;

    if (param_3 != (int *)0x0) {
        if ((param_1 == (int *)0x0 || param_2 == 0) ||
            (*param_1 != 0 || param_3 == param_1)) {
            if (param_3[1] == -1) {
                return 0xffffffff;
            }
            piVar3 = param_3 + 1;
            DataMemoryBarrier(0xb);
            do {
                iVar2 = *piVar3 + -1;
                bVar1 = (bool)hasExclusiveAccess(piVar3);
            } while (!bVar1);
            *piVar3 = iVar2;
        } else {
            iVar2 = FUN_0004587c(param_1 + 2);
            if (iVar2 == 0) {
                return 0;
            }
            if (param_3[1] == -1) {
                return 0xffffffff;
            }
            piVar3 = param_3 + 1;
            DataMemoryBarrier(0xb);
            do {
                iVar2 = *piVar3 + -1;
                bVar1 = (bool)hasExclusiveAccess(piVar3);
            } while (!bVar1);
            *piVar3 = iVar2;
        }
        if (iVar2 == 0) {
            FUN_00048a34(param_3);
            return 0xffffffff;
        }
    }
    return 0xffffffff;
}

undefined4 FUN_00048db0(int *param_1, int *param_2)

{
    bool bVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    int *piVar5;

    if (((param_1 == (int *)0x0) || (*param_1 != 0 || param_2 == (int *)0x0)) ||
        (*param_2 != 0)) {
        return 0xffffffff;
    }
    iVar2 = FUN_00045cec(param_2 + 2);
    if (iVar2 != 0) {
        while (iVar2 = FUN_00045d7c(), iVar2 != 0) {
            iVar3 = FUN_00045d84(iVar2 + -0x10);
            if (iVar3 == 0) {
                return 0;
            }
            iVar4 = FUN_000480fc(param_1, iVar2);
            if (iVar4 == 0) {
                piVar5 = (int *)(iVar3 + 4);
                if (*(int *)(iVar3 + 4) != -1) {
                    do {
                        bVar1 = (bool)hasExclusiveAccess(piVar5);
                    } while (!bVar1);
                    *piVar5 = *piVar5 + 1;
                    DataMemoryBarrier(0xb);
                }
                FUN_00048cf4(param_1, iVar2, iVar3);
            }
            if (*param_2 != 0) {
                return 0;
            }
            iVar2 = FUN_00045d64(param_2 + 2, iVar2 + -0x10);
            if (iVar2 == 0) {
                return 0;
            }
        }
    }
    return 0;
}

undefined4 FUN_00048e9c(undefined4 param_1, char *param_2, int param_3)

{
    bool bVar1;
    size_t sVar2;
    int iVar3;
    undefined4 uVar4;
    int *piVar5;

    if (param_2 != (char *)0x0) {
        sVar2 = strlen(param_2);
        iVar3 = FUN_00047eb4(param_2, sVar2);
        if (iVar3 != 0) {
            uVar4 = FUN_00048cf4(param_1, param_2, param_3);
            return uVar4;
        }
    }
    if ((param_3 != 0) && (*(int *)(param_3 + 4) != -1)) {
        piVar5 = (int *)(param_3 + 4);
        DataMemoryBarrier(0xb);
        do {
            iVar3 = *piVar5;
            bVar1 = (bool)hasExclusiveAccess(piVar5);
        } while (!bVar1);
        *piVar5 = iVar3 + -1;
        if (iVar3 + -1 == 0) {
            FUN_00048a34(param_3);
            return 0xffffffff;
        }
    }
    return 0xffffffff;
}

undefined4 FUN_00048f30(int *param_1, int *param_2)

{
    bool bVar1;
    int iVar2;
    int iVar3;
    int *piVar4;

    if (((param_1 == (int *)0x0) || (*param_1 != 0 || param_2 == (int *)0x0)) ||
        (*param_2 != 0)) {
        return 0xffffffff;
    }
    iVar2 = FUN_00045cec(param_2 + 2);
    if (iVar2 != 0) {
        while (iVar2 = FUN_00045d7c(), iVar2 != 0) {
            iVar3 = FUN_00045d84(iVar2 + -0x10);
            piVar4 = (int *)(iVar3 + 4);
            if (iVar3 == 0) {
                return 0;
            }
            if (*(int *)(iVar3 + 4) != -1) {
                do {
                    bVar1 = (bool)hasExclusiveAccess(piVar4);
                } while (!bVar1);
                *piVar4 = *piVar4 + 1;
                DataMemoryBarrier(0xb);
            }
            iVar3 = FUN_00048cf4(param_1, iVar2);
            if (iVar3 != 0) {
                return 0xffffffff;
            }
            if (*param_2 != 0) {
                return 0;
            }
            iVar2 = FUN_00045d64(param_2 + 2, iVar2 + -0x10);
            if (iVar2 == 0) {
                return 0;
            }
        }
    }
    return 0;
}

undefined4 FUN_00049010(int *param_1, int *param_2)

{
    bool bVar1;
    int iVar2;
    int iVar3;
    int iVar4;
    int *piVar5;

    if (((param_1 == (int *)0x0) || (*param_1 != 0 || param_2 == (int *)0x0)) ||
        (*param_2 != 0)) {
        return 0xffffffff;
    }
    iVar2 = FUN_00045cec(param_2 + 2);
    if (iVar2 != 0) {
        while (iVar2 = FUN_00045d7c(), iVar2 != 0) {
            iVar4 = FUN_00045d84(iVar2 + -0x10);
            if (iVar4 == 0) {
                return 0;
            }
            iVar3 = FUN_000480fc(param_1, iVar2);
            if (iVar3 != 0) {
                piVar5 = (int *)(iVar4 + 4);
                if (*(int *)(iVar4 + 4) != -1) {
                    do {
                        bVar1 = (bool)hasExclusiveAccess(piVar5);
                    } while (!bVar1);
                    *piVar5 = *piVar5 + 1;
                    DataMemoryBarrier(0xb);
                }
                FUN_00048cf4(param_1, iVar2, iVar4);
            }
            if (*param_2 != 0) {
                return 0;
            }
            iVar2 = FUN_00045d64(param_2 + 2, iVar2 + -0x10);
            if (iVar2 == 0) {
                return 0;
            }
        }
    }
    return 0;
}

undefined4 FUN_00049100(int *param_1, uint param_2, int *param_3)

{
    bool bVar1;
    void *__src;
    void *__dest;
    int iVar2;
    int *piVar3;
    size_t __n;

    if (param_3 != (int *)0x0) {
        if (((param_1 == (int *)0x0) ||
             (*param_1 != 1 || param_3 == param_1)) ||
            ((uint)param_1[3] < param_2)) {
            if (param_3[1] == -1) {
                return 0xffffffff;
            }
            piVar3 = param_3 + 1;
            DataMemoryBarrier(0xb);
            do {
                iVar2 = *piVar3 + -1;
                bVar1 = (bool)hasExclusiveAccess(piVar3);
            } while (!bVar1);
            *piVar3 = iVar2;
        } else {
            __src = (void *)FUN_00047f80(param_1, 1);
            if (__src != (void *)0x0) {
                __dest = (void *)param_1[4];
                iVar2 = (param_2 + 1) * 4;
                __n = iVar2 - 4;
                if (__dest == __src) {
                    memmove((void *)((int)__dest + iVar2),
                            (void *)((int)__src + __n),
                            (param_1[3] - param_2) * 4);
                } else {
                    memcpy(__dest, __src, __n);
                    memcpy((void *)(param_1[4] + iVar2),
                           (void *)((int)__src + __n),
                           (param_1[3] - param_2) * 4);
                    FUN_00047764(__src);
                }
                iVar2 = param_1[3];
                *(int **)(param_1[4] + __n) = param_3;
                param_1[3] = iVar2 + 1;
                return 0;
            }
            if (param_3[1] == -1) {
                return 0xffffffff;
            }
            piVar3 = param_3 + 1;
            DataMemoryBarrier(0xb);
            do {
                iVar2 = *piVar3 + -1;
                bVar1 = (bool)hasExclusiveAccess(piVar3);
            } while (!bVar1);
            *piVar3 = iVar2;
        }
        if (iVar2 == 0) {
            FUN_00048a34(param_3);
            return 0xffffffff;
        }
    }
    return 0xffffffff;
}

undefined4 FUN_0004935c(int *param_1, int *param_2)

{
    bool bVar1;
    int iVar2;
    int *piVar3;

    if (param_2 != (int *)0x0) {
        if ((param_1 == (int *)0x0) || (*param_1 != 1 || param_2 == param_1)) {
            if (param_2[1] == -1) {
                return 0xffffffff;
            }
            piVar3 = param_2 + 1;
            DataMemoryBarrier(0xb);
            do {
                iVar2 = *piVar3 + -1;
                bVar1 = (bool)hasExclusiveAccess(piVar3);
            } while (!bVar1);
            *piVar3 = iVar2;
        } else {
            iVar2 = FUN_00047f80(param_1, 1);
            if (iVar2 != 0) {
                iVar2 = param_1[3];
                *(int **)(param_1[4] + iVar2 * 4) = param_2;
                param_1[3] = iVar2 + 1;
                return 0;
            }
            if (param_2[1] == -1) {
                return 0xffffffff;
            }
            piVar3 = param_2 + 1;
            DataMemoryBarrier(0xb);
            do {
                iVar2 = *piVar3 + -1;
                bVar1 = (bool)hasExclusiveAccess(piVar3);
            } while (!bVar1);
            *piVar3 = iVar2;
        }
        if (iVar2 == 0) {
            FUN_00048a34(param_2);
            return 0xffffffff;
        }
    }
    return 0xffffffff;
}

int *FUN_00049450(int *param_1)

{
    bool bVar1;
    int *piVar2;
    int *piVar3;
    uint uVar4;
    int iVar5;
    int iVar6;
    uint uVar7;

    if (param_1 != (int *)0x0) {
        switch (*param_1) {
        case 0:
            piVar2 = (int *)FUN_00048078();
            if (piVar2 != (int *)0x0) {
                if (*param_1 != 0) {
                    return piVar2;
                }
                iVar5 = FUN_00045cec(param_1 + 2);
                if (iVar5 == 0) {
                    return piVar2;
                }
                while (true) {
                    iVar5 = FUN_00045d7c();
                    if (iVar5 == 0) {
                        return piVar2;
                    }
                    iVar6 = FUN_00045d84(iVar5 + -0x10);
                    piVar3 = (int *)(iVar6 + 4);
                    if (iVar6 == 0)
                        break;
                    if (*(int *)(iVar6 + 4) != -1) {
                        do {
                            bVar1 = (bool)hasExclusiveAccess(piVar3);
                        } while (!bVar1);
                        *piVar3 = *piVar3 + 1;
                        DataMemoryBarrier(0xb);
                    }
                    FUN_00048cf4(piVar2, iVar5);
                    if (*param_1 != 0) {
                        return piVar2;
                    }
                    iVar5 = FUN_00045d64(param_1 + 2, iVar5 + -0x10);
                    if (iVar5 == 0) {
                        return piVar2;
                    }
                }
                return piVar2;
            }
            break;
        case 1:
            piVar2 = (int *)FUN_00048408();
            if (piVar2 != (int *)0x0) {
                if (*param_1 != 1) {
                    return piVar2;
                }
                uVar4 = param_1[3];
                if (uVar4 == 0) {
                    return piVar2;
                }
                uVar7 = 0;
                while (true) {
                    iVar5 = 0;
                    if (uVar7 < uVar4) {
                        iVar5 = *(int *)(param_1[4] + uVar7 * 4);
                        piVar3 = (int *)(iVar5 + 4);
                        if ((iVar5 != 0) && (*(int *)(iVar5 + 4) != -1)) {
                            do {
                                bVar1 = (bool)hasExclusiveAccess(piVar3);
                            } while (!bVar1);
                            *piVar3 = *piVar3 + 1;
                            DataMemoryBarrier(0xb);
                        }
                    }
                    FUN_0004935c(piVar2, iVar5);
                    if (*param_1 != 1)
                        break;
                    uVar4 = param_1[3];
                    uVar7 = uVar7 + 1;
                    if (uVar4 <= uVar7) {
                        return piVar2;
                    }
                }
                return piVar2;
            }
            break;
        case 2:
            piVar2 = (int *)FUN_0004800c(param_1[2], param_1[3], 0);
            return piVar2;
        case 3:
            if ((param_1 == (int *)0x0) || (*param_1 != 3)) {
                iVar5 = 0;
                iVar6 = 0;
            } else {
                iVar5 = param_1[2];
                iVar6 = param_1[3];
            }
            piVar2 = (int *)FUN_0004774c(0x10);
            if (piVar2 != (int *)0x0) {
                piVar2[2] = iVar5;
                piVar2[3] = iVar6;
                *piVar2 = 3;
                piVar2[1] = 1;
                return piVar2;
            }
            return (int *)0x0;
        case 4:
            piVar2 = (int *)FUN_000488dc((int)*(undefined8 *)(param_1 + 2));
            return piVar2;
        case 5:
        case 6:
        case 7:
            return param_1;
        }
    }
    return (int *)0x0;
}

int *FUN_0004960c(int *param_1)

{
    undefined4 uVar1;
    undefined4 uVar2;
    int *piVar3;
    uint uVar4;
    int iVar5;
    int iVar6;
    uint uVar7;

    if (param_1 != (int *)0x0) {
        switch (*param_1) {
        case 0:
            piVar3 = (int *)FUN_00048078();
            if (piVar3 != (int *)0x0) {
                if (*param_1 != 0) {
                    return piVar3;
                }
                iVar5 = FUN_00045cec(param_1 + 2);
                while (true) {
                    if (iVar5 == 0) {
                        return piVar3;
                    }
                    uVar2 = FUN_00045d7c(iVar5);
                    FUN_00045d84(iVar5);
                    uVar1 = FUN_0004960c();
                    FUN_00048cf4(piVar3, uVar2, uVar1);
                    if (*param_1 != 0)
                        break;
                    iVar5 = FUN_00045d64(param_1 + 2, iVar5);
                }
                return piVar3;
            }
            break;
        case 1:
            piVar3 = (int *)FUN_00048408();
            if (piVar3 != (int *)0x0) {
                if (*param_1 != 1) {
                    return piVar3;
                }
                uVar4 = param_1[3];
                if (uVar4 == 0) {
                    return piVar3;
                }
                uVar7 = 0;
                while (true) {
                    uVar2 = 0;
                    if (uVar7 < uVar4) {
                        uVar2 = *(undefined4 *)(param_1[4] + uVar7 * 4);
                    }
                    uVar2 = FUN_0004960c(uVar2);
                    FUN_0004935c(piVar3, uVar2);
                    if (*param_1 != 1)
                        break;
                    uVar4 = param_1[3];
                    uVar7 = uVar7 + 1;
                    if (uVar4 <= uVar7) {
                        return piVar3;
                    }
                }
                return piVar3;
            }
            break;
        case 2:
            piVar3 = (int *)FUN_0004800c(param_1[2], param_1[3], 0);
            return piVar3;
        case 3:
            if ((param_1 == (int *)0x0) || (*param_1 != 3)) {
                iVar5 = 0;
                iVar6 = 0;
            } else {
                iVar5 = param_1[2];
                iVar6 = param_1[3];
            }
            piVar3 = (int *)FUN_0004774c(0x10);
            if (piVar3 == (int *)0x0) {
                return (int *)0x0;
            }
            piVar3[2] = iVar5;
            piVar3[3] = iVar6;
            *piVar3 = 3;
            piVar3[1] = 1;
            return piVar3;
        case 4:
            piVar3 = (int *)FUN_000488dc((int)*(undefined8 *)(param_1 + 2));
            return piVar3;
        case 5:
        case 6:
        case 7:
            return param_1;
        }
    }
    return (int *)0x0;
}

void FUN_000497d4(undefined4 *param_1, char *param_2)

{
    size_t sVar1;

    if (param_1 == (undefined4 *)0x0) {
        return;
    }
    *(undefined1 *)(param_1 + 0x17) = 0;
    param_1[2] = 0;
    *param_1 = 0xffffffff;
    param_1[1] = 0xffffffff;
    if (param_2 == (char *)0x0) {
        *(undefined1 *)(param_1 + 3) = 0;
        return;
    }
    sVar1 = strlen(param_2);
    if (0x4f < sVar1) {
        *(undefined2 *)(param_1 + 3) = 0x2e2e;
        *(undefined1 *)((int)param_1 + 0xe) = 0x2e;
        strncpy((char *)((int)param_1 + 0xf), param_2 + (sVar1 - 0x4c), 0x4d);
        return;
    }
    strncpy((char *)(param_1 + 3), param_2, sVar1 + 1);
    return;
}

void FUN_00049824(undefined4 *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4, undefined1 param_5, char *param_6)

{
    if ((param_1 != (undefined4 *)0x0) && (*(char *)(param_1 + 0x17) == '\0')) {
        *param_1 = param_2;
        param_1[1] = param_3;
        param_1[2] = param_4;
        vsnprintf((char *)(param_1 + 0x17), 0x9f, param_6, &stack0x00000008);
        *(undefined1 *)((int)param_1 + 0xfa) = 0;
        *(undefined1 *)((int)param_1 + 0xfb) = param_5;
        return;
    }
    return;
}

void FUN_00049888(undefined4 *param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4, undefined1 param_5, char *param_6,
                  __gnuc_va_list param_7)

{
    if (param_1 == (undefined4 *)0x0) {
        return;
    }
    if (*(char *)(param_1 + 0x17) != '\0') {
        return;
    }
    *param_1 = param_2;
    param_1[1] = param_3;
    param_1[2] = param_4;
    vsnprintf((char *)(param_1 + 0x17), 0x9f, param_6, param_7);
    *(undefined1 *)((int)param_1 + 0xfa) = 0;
    *(undefined1 *)((int)param_1 + 0xfb) = param_5;
    return;
}

ulonglong FUN_000498d8(uint param_1, uint param_2)

{
    uint uVar1;
    ulonglong uVar2;

    if (param_2 - 1 == 0) {
        return CONCAT44(param_2, param_1);
    }
    if (param_2 == 0) {
        uVar1 = raise(8);
        return (ulonglong)uVar1;
    }
    if (param_1 <= param_2) {
        return CONCAT44(param_2, (uint)(param_1 == param_2));
    }
    if ((param_2 & param_2 - 1) == 0) {
        return CONCAT44(param_2, param_1 >> (0x1fU - LZCOUNT(param_2) & 0xff));
    }
    /* WARNING: Could not recover jumptable at 0x00049908. Too many branches */
    /* WARNING: Treating indirect jump as call */
    uVar2 = (*(code *)(&UNK_00049910 +
                       (0x1f - (LZCOUNT(param_2) - LZCOUNT(param_1))) * 0x10))(
        param_1, param_2, 0);
    return uVar2;
}

void FUN_00049b34(undefined4 param_1, int param_2)

{
    if (param_2 != 0) {
        FUN_000498d8();
        return;
    }
    raise(8);
    return;
}

ulonglong FUN_00049b50(uint param_1, uint param_2)

{
    uint uVar1;
    uint uVar2;
    uint uVar3;
    ulonglong uVar4;

    if (param_2 == 0) {
        uVar2 = raise(8);
        return (ulonglong)uVar2;
    }
    uVar3 = param_1 ^ param_2;
    uVar2 = param_2;
    if ((int)param_2 < 0) {
        uVar2 = -param_2;
    }
    if (uVar2 - 1 == 0) {
        if ((int)param_2 < 0) {
            param_1 = -param_1;
        }
        return CONCAT44(uVar2, param_1);
    }
    uVar1 = param_1;
    if ((int)param_1 < 0) {
        uVar1 = -param_1;
    }
    if (uVar1 <= uVar2) {
        if (uVar1 < uVar2) {
            param_1 = 0;
        }
        if (uVar1 == uVar2) {
            param_1 = (int)uVar3 >> 0x1f | 1;
        }
        return CONCAT44(uVar2, param_1);
    }
    if ((uVar2 & uVar2 - 1) == 0) {
        uVar1 = uVar1 >> (0x1fU - LZCOUNT(uVar2) & 0xff);
        if ((int)uVar3 < 0) {
            uVar1 = -uVar1;
        }
        return CONCAT44(uVar2, uVar1);
    }
    /* WARNING: Could not recover jumptable at 0x00049b90. Too many branches */
    /* WARNING: Treating indirect jump as call */
    uVar4 = (*(code *)(&UNK_00049b98 +
                       (0x1f - (LZCOUNT(uVar2) - LZCOUNT(uVar1))) * 0x10))(0);
    return uVar4;
}

ulonglong FUN_0004a10c(uint param_1, uint param_2)

{
    byte bVar1;
    uint uVar2;
    uint uVar3;
    uint uVar4;
    int iVar5;
    uint uVar6;
    int iVar7;
    uint uVar8;
    bool bVar9;
    bool bVar10;
    bool bVar11;

    if (param_1 == 0 && param_2 == 0) {
        return CONCAT44(param_2, param_1);
    }
    iVar7 = 0x432;
    uVar8 = param_2 >> 0x16;
    if (uVar8 != 0) {
        iVar7 = 3;
        if (param_2 >> 0x19 != 0) {
            iVar7 = 6;
        }
        if (param_2 >> 0x1c != 0) {
            iVar7 = iVar7 + 3;
        }
        uVar4 = iVar7 - ((int)param_2 >> 0x1f);
        uVar8 = param_1 << (0x20 - uVar4 & 0xff);
        param_1 = param_1 >> (uVar4 & 0xff) | param_2 << (0x20 - uVar4 & 0xff);
        param_2 = param_2 >> (uVar4 & 0xff);
        iVar7 = uVar4 + 0x432;
    }
    if (0xfffff < param_2) {
        if (0x1fffff < param_2) {
            uVar4 = param_2 & 1;
            param_2 = param_2 >> 1;
            bVar1 = (byte)param_1;
            param_1 = (uint)(uVar4 != 0) << 0x1f | param_1 >> 1;
            uVar8 = (uint)(bVar1 & 1) << 0x1f | uVar8 >> 1;
            iVar7 = iVar7 + 1;
            if (0xffbfffff < (uint)(iVar7 * 0x200000)) {
                return 0x7ff0000000000000;
            }
        }
    LAB_00049f18:
        bVar10 = 0x7fffffff < uVar8;
        if (uVar8 == 0x80000000) {
            bVar10 = (param_1 & 1) != 0;
        }
        return CONCAT44(param_2 + iVar7 * 0x100000 +
                            (uint)CARRY4(param_1, (uint)bVar10),
                        param_1 + bVar10);
    }
    bVar9 = (uVar8 & 0x80000000) != 0;
    uVar8 = uVar8 << 1;
    uVar4 = param_1 * 2;
    bVar10 = CARRY4(param_1, param_1);
    param_1 = param_1 * 2 + (uint)bVar9;
    param_2 = param_2 * 2 + (uint)(bVar10 || CARRY4(uVar4, (uint)bVar9));
    iVar7 = iVar7 + -1;
    if ((param_2 & 0x100000) != 0)
        goto LAB_00049f18;
    uVar2 = param_1;
    uVar4 = param_2;
    if (param_2 == 0) {
        uVar2 = 0;
        uVar4 = param_1;
    }
    iVar5 = LZCOUNT(uVar4);
    if (param_2 == 0) {
        iVar5 = iVar5 + 0x20;
    }
    uVar6 = iVar5 - 0xb;
    bVar11 = SBORROW4(uVar6, 0x20);
    uVar3 = iVar5 - 0x2b;
    bVar10 = (int)uVar3 < 0;
    bVar9 = uVar3 == 0;
    if ((int)uVar6 < 0x20) {
        bVar11 = SCARRY4(uVar3, 0xc);
        iVar5 = iVar5 + -0x1f;
        bVar10 = iVar5 < 0;
        bVar9 = iVar5 == 0;
        uVar3 = uVar6;
        if (!bVar9 && bVar10 == bVar11) {
            uVar2 = uVar4 << (uVar6 & 0xff);
            uVar4 = uVar4 >> (0xcU - iVar5 & 0xff);
            goto LAB_00049f90;
        }
    }
    if (bVar9 || bVar10 != bVar11) {
        uVar8 = 0x20 - uVar3;
    }
    uVar4 = uVar4 << (uVar3 & 0xff);
    if (bVar9 || bVar10 != bVar11) {
        uVar4 = uVar4 | uVar2 >> (uVar8 & 0xff);
        uVar2 = uVar2 << (uVar3 & 0xff);
    }
LAB_00049f90:
    if ((int)uVar6 <= iVar7) {
        return CONCAT44(uVar4 + (iVar7 - uVar6) * 0x100000, uVar2);
    }
    uVar8 = ~(iVar7 - uVar6);
    if (0x1e < (int)uVar8) {
        return (ulonglong)(uVar4 >> (uVar8 - 0x1f & 0xff));
    }
    iVar7 = uVar8 - 0x13;
    if (iVar7 == 0 || iVar7 < 0 != SCARRY4(uVar8 - 0x1f, 0xc)) {
        uVar8 = uVar8 + 1;
        return CONCAT44(uVar4 >> (uVar8 & 0xff),
                        uVar2 >> (uVar8 & 0xff) | uVar4
                                                      << (0x20 - uVar8 & 0xff));
    }
    return (ulonglong)(uVar2 >> (0x20 - (0xcU - iVar7) & 0xff) |
                       uVar4 << (0xcU - iVar7 & 0xff));
}

ulonglong FUN_0004a11c(uint param_1, uint param_2)

{
    byte bVar1;
    uint uVar2;
    uint uVar3;
    uint uVar4;
    int iVar5;
    uint uVar6;
    int iVar7;
    uint uVar8;
    uint uVar9;
    bool bVar10;
    bool bVar11;
    bool bVar12;

    if (param_1 == 0 && param_2 == 0) {
        return CONCAT44(param_2, param_1);
    }
    uVar8 = param_2 & 0x80000000;
    uVar3 = param_2;
    if ((int)uVar8 < 0) {
        bVar11 = param_1 != 0;
        param_1 = -param_1;
        uVar3 = -param_2 - (uint)bVar11;
    }
    iVar7 = 0x432;
    uVar9 = uVar3 >> 0x16;
    if (uVar9 != 0) {
        iVar7 = 3;
        if (uVar3 >> 0x19 != 0) {
            iVar7 = 6;
        }
        if (uVar3 >> 0x1c != 0) {
            iVar7 = iVar7 + 3;
        }
        uVar4 = iVar7 - ((int)uVar3 >> 0x1f);
        uVar9 = param_1 << (0x20 - uVar4 & 0xff);
        param_1 = param_1 >> (uVar4 & 0xff) | uVar3 << (0x20 - uVar4 & 0xff);
        uVar3 = uVar3 >> (uVar4 & 0xff);
        iVar7 = uVar4 + 0x432;
    }
    if (0xfffff < uVar3) {
        if (0x1fffff < uVar3) {
            uVar4 = uVar3 & 1;
            uVar3 = uVar3 >> 1;
            bVar1 = (byte)param_1;
            param_1 = (uint)(uVar4 != 0) << 0x1f | param_1 >> 1;
            uVar9 = (uint)(bVar1 & 1) << 0x1f | uVar9 >> 1;
            iVar7 = iVar7 + 1;
            if (0xffbfffff < (uint)(iVar7 * 0x200000)) {
                return (ulonglong)(uVar8 | 0x7ff00000) << 0x20;
            }
        }
    LAB_00049f18:
        bVar11 = 0x7fffffff < uVar9;
        if (uVar9 == 0x80000000) {
            bVar11 = (param_1 & 1) != 0;
        }
        return CONCAT44(uVar3 + iVar7 * 0x100000 +
                                (uint)CARRY4(param_1, (uint)bVar11) |
                            uVar8,
                        param_1 + bVar11);
    }
    bVar10 = (uVar9 & 0x80000000) != 0;
    uVar9 = uVar9 << 1;
    uVar4 = param_1 * 2;
    bVar11 = CARRY4(param_1, param_1);
    param_1 = param_1 * 2 + (uint)bVar10;
    uVar3 = uVar3 * 2 + (uint)(bVar11 || CARRY4(uVar4, (uint)bVar10));
    iVar7 = iVar7 + -1;
    if ((uVar3 & 0x100000) != 0)
        goto LAB_00049f18;
    uVar2 = param_1;
    uVar4 = uVar3;
    if (uVar3 == 0) {
        uVar2 = 0;
        uVar4 = param_1;
    }
    iVar5 = LZCOUNT(uVar4);
    if (uVar3 == 0) {
        iVar5 = iVar5 + 0x20;
    }
    uVar6 = iVar5 - 0xb;
    bVar12 = SBORROW4(uVar6, 0x20);
    uVar3 = iVar5 - 0x2b;
    bVar11 = (int)uVar3 < 0;
    bVar10 = uVar3 == 0;
    if ((int)uVar6 < 0x20) {
        bVar12 = SCARRY4(uVar3, 0xc);
        iVar5 = iVar5 + -0x1f;
        bVar11 = iVar5 < 0;
        bVar10 = iVar5 == 0;
        uVar3 = uVar6;
        if (!bVar10 && bVar11 == bVar12) {
            uVar2 = uVar4 << (uVar6 & 0xff);
            uVar4 = uVar4 >> (0xcU - iVar5 & 0xff);
            goto LAB_00049f90;
        }
    }
    if (bVar10 || bVar11 != bVar12) {
        uVar9 = 0x20 - uVar3;
    }
    uVar4 = uVar4 << (uVar3 & 0xff);
    if (bVar10 || bVar11 != bVar12) {
        uVar4 = uVar4 | uVar2 >> (uVar9 & 0xff);
        uVar2 = uVar2 << (uVar3 & 0xff);
    }
LAB_00049f90:
    if ((int)uVar6 <= iVar7) {
        return CONCAT44(uVar4 + (iVar7 - uVar6) * 0x100000 | uVar8, uVar2);
    }
    uVar3 = ~(iVar7 - uVar6);
    if (0x1e < (int)uVar3) {
        return CONCAT44(param_2, uVar4 >> (uVar3 - 0x1f & 0xff)) &
               0x80000000ffffffff;
    }
    iVar7 = uVar3 - 0x13;
    if (iVar7 == 0 || iVar7 < 0 != SCARRY4(uVar3 - 0x1f, 0xc)) {
        uVar3 = uVar3 + 1;
        return CONCAT44(uVar8 | uVar4 >> (uVar3 & 0xff),
                        uVar2 >> (uVar3 & 0xff) | uVar4
                                                      << (0x20 - uVar3 & 0xff));
    }
    return CONCAT44(param_2, uVar2 >> (0x20 - (0xcU - iVar7) & 0xff) |
                                 uVar4 << (0xcU - iVar7 & 0xff)) &
           0x80000000ffffffff;
}

void FUN_0004a178(undefined4 param_1, undefined4 param_2, int param_3,
                  int param_4)

{
    if ((param_4 == 0) && (param_3 == 0)) {
        raise(8);
        return;
    }
    FUN_0004a218();
    return;
}

int FUN_0004a1b4(undefined4 param_1, uint param_2, undefined4 param_3,
                 undefined4 param_4)

{
    int iVar1;

    if (-1 < (int)((uint)((double)CONCAT44(param_2, param_1) < 0.0) << 0x1f)) {
        iVar1 = FUN_0004a1d8();
        return iVar1;
    }
    iVar1 =
        FUN_0004a1d8(param_1, param_2 ^ 0x80000000, param_3, param_4, param_4);
    return -iVar1;
}

undefined8 FUN_0004a1d8(undefined4 param_1, undefined4 param_2)

{
    uint uVar1;
    double dVar2;

    dVar2 = (double)CONCAT44(param_2, param_1) * 2.3283064365386963e-10;
    uVar1 = (uint)(0.0 < dVar2) * (int)(longlong)dVar2;
    dVar2 = (double)CONCAT44(param_2, param_1) - (double)uVar1 * 4294967296.0;
    return CONCAT44(uVar1, (uint)(0.0 < dVar2) * (int)(longlong)dVar2);
}

undefined8 FUN_0004a218(uint param_1, uint param_2, uint param_3, uint param_4,
                        uint *param_5)

{
    uint uVar1;
    uint uVar2;
    int iVar3;
    uint uVar4;
    uint uVar5;
    uint uVar6;
    uint uVar7;
    uint uVar8;
    uint uVar9;
    int iVar10;
    uint uVar11;
    bool bVar12;

    bVar12 = param_4 <= param_2;
    if (param_2 == param_4) {
        bVar12 = param_3 <= param_1;
    }
    if (bVar12) {
        iVar10 = LZCOUNT(param_4);
        if (param_4 == 0) {
            iVar10 = LZCOUNT(param_3) + 0x20;
        }
        iVar3 = LZCOUNT(param_2);
        if (param_2 == 0) {
            iVar3 = LZCOUNT(param_1) + 0x20;
        }
        uVar11 = iVar10 - iVar3;
        uVar8 = uVar11 - 0x20;
        uVar9 = 0x20 - uVar11;
        uVar5 = param_3 << (uVar11 & 0xff);
        uVar6 = param_4 << (uVar11 & 0xff) | param_3 << (uVar8 & 0xff) |
                param_3 >> (uVar9 & 0xff);
        bVar12 = uVar6 <= param_2;
        if (param_2 == uVar6) {
            bVar12 = uVar5 <= param_1;
        }
        if (bVar12) {
            bVar12 = param_1 < uVar5;
            param_1 = param_1 - uVar5;
            uVar1 = 1 << (uVar11 & 0xff);
            param_2 = (param_2 - uVar6) - (uint)bVar12;
            uVar2 = 1 << (uVar8 & 0xff) | 1U >> (uVar9 & 0xff);
        } else {
            uVar1 = 0;
            uVar2 = uVar1;
        }
        if (uVar11 != 0) {
            uVar7 = uVar6 >> 1;
            uVar6 = (uint)((uVar6 & 1) != 0) << 0x1f | uVar5 >> 1;
            uVar5 = uVar11;
            do {
                while (true) {
                    bVar12 = uVar7 <= param_2;
                    if (param_2 == uVar7) {
                        bVar12 = uVar6 <= param_1;
                    }
                    if (bVar12)
                        break;
                    bVar12 = CARRY4(param_1, param_1);
                    param_1 = param_1 * 2;
                    param_2 = param_2 * 2 + (uint)bVar12;
                    uVar5 = uVar5 - 1;
                    uVar4 = param_2;
                    if (uVar5 == 0)
                        goto LAB_0004a2c2;
                }
                bVar12 = param_1 < uVar6;
                uVar4 = param_1 - uVar6;
                param_1 = uVar4 * 2 + 1;
                param_2 = ((param_2 - uVar7) - (uint)bVar12) * 2 +
                          (uint)CARRY4(uVar4, uVar4) +
                          (uint)(0xfffffffe < uVar4 * 2);
                uVar5 = uVar5 - 1;
                uVar4 = param_2;
            } while (uVar5 != 0);
        LAB_0004a2c2:
            param_2 = uVar4 >> (uVar11 & 0xff);
            bVar12 = CARRY4(uVar1, param_1);
            uVar5 = uVar1 + param_1;
            param_1 = param_1 >> (uVar11 & 0xff) | uVar4 << (uVar9 & 0xff) |
                      uVar4 >> (uVar8 & 0xff);
            uVar6 = param_1 << (uVar11 & 0xff);
            uVar1 = uVar5 - uVar6;
            uVar2 = ((uVar4 + uVar2 + bVar12) -
                     (param_2 << (uVar11 & 0xff) |
                      param_1 << (uVar11 - 0x20 & 0xff) |
                      param_1 >> (0x20 - uVar11 & 0xff))) -
                    (uint)(uVar5 < uVar6);
        }
    } else {
        uVar1 = 0;
        uVar2 = uVar1;
    }
    if (param_5 != (uint *)0x0) {
        *param_5 = param_1;
        param_5[1] = param_2;
    }
    return CONCAT44(uVar2, uVar1);
}

void FUN_0004a330(undefined4 param_1, undefined4 param_2, undefined4 param_3,
                  undefined4 param_4)

{
    int iVar1;
    undefined **ppuVar2;

    _DT_INIT();
    iVar1 = 0;
    ppuVar2 = &__DT_INIT_ARRAY;
    do {
        iVar1 = iVar1 + 1;
        (*(code *)*ppuVar2)(param_1, param_2, param_3, *ppuVar2, param_4);
        ppuVar2 = ppuVar2 + 1;
    } while (iVar1 != 1);
    return;
}

void _DT_FINI(void)

{
    return;
}
